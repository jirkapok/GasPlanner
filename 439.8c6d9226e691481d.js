(self.webpackChunkplanner=self.webpackChunkplanner||[]).push([[439],{861:(xe,pe,Ut)=>{"use strict";Ut.d(pe,{e:()=>ht});var tt=Ut(376),f=Ut.n(tt),mt=Ut(530);class ht{static toTanks(v){const b=[];return v.forEach(T=>{const G=new mt.bx(T.size,T.startPressure,0);G.id=T.id,G.gas.fO2=T.gas.fO2,G.gas.fHe=T.gas.fHe,b.push(G)}),mt.uP.renumberIds(b),b}static fromTanks(v){const b=[];return v.forEach(T=>{const G=T.tank,L={id:G.id,size:G.size,workPressure:T.workingPressureBars,startPressure:G.startPressure,gas:ht.fromGas(G.gas)};b.push(L)}),b}static toConsumed(v){const b=[];for(let T=0;T<v.length;T++){const G=v[T];b.push({id:G.id,consumed:G.consumed,reserve:G.reserve})}return b}static toSegments(v,b){const T=[];for(let G=0;G<v.length;G++){const L=v[G],Dt=ht.toGas(L.gas),yt=new mt.Y4(L.startDepth,L.endDepth,Dt,L.duration);L.tankId>0&&L.tankId<=b.length&&(yt.tank=b[L.tankId-1]),T.push(yt)}return T}static fromSegments(v){const b=[];return v.forEach(T=>{const L={startDepth:T.startDepth,endDepth:T.endDepth,duration:T.duration,tankId:T.tank?T.tank.id:0,gas:ht.fromGas(T.gas)};b.push(L)}),b}static toProfile(v,b){const T=ht.toSegments(v.segments,b);if(v.errors.length>0){const L=ht.toEvents(v.errors);return mt.W5.fromErrors(T,L.items)}const G=ht.toTissues(v.tissues);return mt.W5.fromProfile(T,v.ceilings,G)}static fromProfile(v){return{segments:ht.fromSegments(v.segments),ceilings:v.ceilings,tissues:ht.fromTissues(v.tissues),errors:ht.fromEvents(v.errors)}}static toTissues(v){return f()(v).map(b=>({pN2:b.pN2,pHe:b.pHe,a:b.a,b:b.b})).value()}static fromTissues(v){return f()(v).map(b=>({pN2:b.pN2,pHe:b.pHe,a:b.a,b:b.b})).value()}static toEvents(v){const b=new mt.sV;return v.forEach(T=>{const G=mt.Jh.create(T.type,T.timeStamp,T.depth);G.message=T.message,T.gas&&(G.gas=ht.toGas(T.gas)),b.add(G)}),b}static fromEvents(v){const b=[];return v.forEach(T=>{const G={timeStamp:T.timeStamp,depth:T.depth,type:T.type,message:T.message};T.gas&&(G.gas=ht.fromGas(T.gas)),b.push(G)}),b}static fromDiver(v){return{rmv:v.rmv,stressRmv:v.stressRmv}}static toDiver(v){return new mt.lB(v.rmv,v.stressRmv)}static fromOptions(v){return{gfLow:v.gfLow,gfHigh:v.gfHigh,maxPpO2:v.maxPpO2,maxDecoPpO2:v.maxDecoPpO2,salinity:v.salinity,altitude:v.altitude,roundStopsToMinutes:v.roundStopsToMinutes,gasSwitchDuration:v.gasSwitchDuration,safetyStop:v.safetyStop,lastStopDepth:v.lastStopDepth,decoStopDistance:v.decoStopDistance,minimumAutoStopDepth:v.minimumAutoStopDepth,maxEND:v.maxEND,oxygenNarcotic:v.oxygenNarcotic,ascentSpeed6m:v.ascentSpeed6m,ascentSpeed50percTo6m:v.ascentSpeed50percTo6m,ascentSpeed50perc:v.ascentSpeed50perc,descentSpeed:v.descentSpeed,problemSolvingDuration:v.problemSolvingDuration,airBreaks:ht.fromAirBreaks(v.airBreaks)}}static toOptions(v){const b=new mt.JY(v.gfLow,v.gfHigh,v.maxPpO2,v.maxDecoPpO2,v.salinity);return b.altitude=v.altitude,b.roundStopsToMinutes=v.roundStopsToMinutes,b.gasSwitchDuration=v.gasSwitchDuration,b.safetyStop=v.safetyStop,b.lastStopDepth=v.lastStopDepth,b.decoStopDistance=v.decoStopDistance,b.minimumAutoStopDepth=v.minimumAutoStopDepth,b.maxEND=v.maxEND,b.oxygenNarcotic=v.oxygenNarcotic,b.ascentSpeed6m=v.ascentSpeed6m,b.ascentSpeed50percTo6m=v.ascentSpeed50percTo6m,b.ascentSpeed50perc=v.ascentSpeed50perc,b.descentSpeed=v.descentSpeed,b.problemSolvingDuration=v.problemSolvingDuration,ht.toAirBreaks(b.airBreaks,v.airBreaks),b}static fromDensity(v){return{gas:ht.fromGas(v.gas),depth:v.depth,density:v.density}}static toDensity(v){const b=ht.toGas(v.gas);return new mt.JG(b,v.depth,v.density)}static toGas(v){return new mt.qP(v.fO2,v.fHe)}static fromGas(v){return{fO2:v.fO2,fHe:v.fHe}}static fromAirBreaks(v){return{enabled:v.enabled,oxygenDuration:v.oxygenDuration,bottomGasDuration:v.bottomGasDuration}}static toAirBreaks(v,b){b&&(v.enabled=b.enabled,v.oxygenDuration=b.oxygenDuration,v.bottomGasDuration=b.bottomGasDuration)}}},439:(xe,pe,Ut)=>{"use strict";Ut.d(pe,{u:()=>mt});var tt=Ut(530),f=Ut(861);class mt{static calculateDecompression(X){const v=this.profileParametersFromTask(X),T=(new tt.bY).decompression(v),G=f.e.fromProfile(T),Dt=tt.nU.fromProfile({maxDensity:X.eventOptions.maxDensity,startAscentIndex:v.segments.startAscentIndex,profile:T.segments,ceilings:T.ceilings,profileOptions:v.options}),yt=f.e.fromEvents(Dt.items);return{diveId:X.diveId,profile:G,events:yt}}static diveInfo(X){const v=this.profileParametersFromTask(X),T=(new tt.bY).noDecoLimit(v),G=new tt.ac(X.options).create(),L=v.segments.items,Dt=new tt.lm(G).calculateForProfile(L),yt=new tt.J2(G).calculateForProfile(L),ft=new tt.NL(G).forProfile(L);return{diveId:X.diveId,noDeco:T,otu:Dt,cns:yt,density:f.e.fromDensity(ft)}}static calculateConsumption(X){const v=new tt.ac(X.options).create(),b=new tt.Gs(v),T=f.e.toTanks(X.tanks),G=f.e.toSegments(X.profile,T),L=f.e.toSegments(X.plan,T),Dt=X.consumptionOptions.diver,yt=new tt.lB(Dt.rmv,Dt.stressRmv),ft=f.e.toOptions(X.options),kt=mt.selectConsumptionPlan(L,X.isComplex),B={diver:yt,primaryTankReserve:X.consumptionOptions.primaryTankReserve,stageTankReserve:X.consumptionOptions.stageTankReserve},xt=b.calculateMaxBottomTime(kt,T,B,ft),pt=tt.KK.emergencyAscent(G,ft,T);let de=tt.$K.duration(pt);return de=tt.gX.toMinutes(de),b.consumeFromTanks2(G,pt,T,B),{diveId:X.diveId,maxTime:xt,timeToSurface:de,tanks:f.e.toConsumed(T)}}static selectConsumptionPlan(X,v){if(v)return tt.$K.fromCollection(X);const b=X.slice(0,1);return tt.$K.fromCollection(b)}static profileParametersFromTask(X){const v=f.e.toTanks(X.tanks),b=tt.Ch.fromTanks(v),T=f.e.toSegments(X.plan,v),G=tt.$K.fromCollection(T),L=f.e.toOptions(X.options),Dt=f.e.toTissues(X.tissues),yt=new tt.Pr(Dt,X.surfaceInterval);return tt._g.forMultilevelDive(G,b,L,yt)}}},376:function(xe,pe,Ut){var tt;xe=Ut.nmd(xe),function(){var f,v="Expected a function",T="__lodash_hash_undefined__",L="__lodash_placeholder__",z=1/0,zt=9007199254740991,At=4294967295,It=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],U="[object Arguments]",tn="[object Array]",ke="[object Boolean]",Oe="[object Date]",en="[object Error]",nn="[object Function]",er="[object GeneratorFunction]",Ot="[object Map]",Ee="[object Number]",re="[object Object]",nr="[object Promise]",ie="[object RegExp]",Jt="[object Set]",rn="[object String]",bn="[object Symbol]",sn="[object WeakMap]",ze="[object ArrayBuffer]",ve="[object DataView]",gn="[object Float32Array]",an="[object Float64Array]",rr="[object Int8Array]",Rn="[object Int16Array]",In="[object Int32Array]",ir="[object Uint8Array]",Mn="[object Uint8ClampedArray]",Ln="[object Uint16Array]",Bn="[object Uint32Array]",Nn=/\b__p \+= '';/g,jr=/\b(__p \+=) '' \+/g,hs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ti=/&(?:amp|lt|gt|quot|#39);/g,Mt=/[&<>"']/g,fs=RegExp(ti.source),ls=RegExp(Mt.source),D=/<%-([\s\S]+?)%>/g,n=/<%([\s\S]+?)%>/g,i=/<%=([\s\S]+?)%>/g,a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/,g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,w=/[\\^$.*+?()[\]{}|]/g,P=RegExp(w.source),O=/^\s+/,I=/\s/,V=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ht=/\{\n\/\* \[wrapped with (.+)\] \*/,vt=/,? & /,ye=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,be=/[()=,{}\[\]\/\s]/,Gu=/\\(\\)?/g,Uu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ps=/\w*$/,ku=/^[-+]0x[0-9a-f]+$/i,Ku=/^0b[01]+$/i,zu=/^\[object .+?Constructor\]$/,$u=/^0o[0-7]+$/i,Yu=/^(?:0|[1-9]\d*)$/,Zu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sr=/($^)/,Vu=/['\n\r\u2028\u2029\\]/g,ar="\\ud800-\\udfff",ds="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",gs="\\u2700-\\u27bf",ms="a-z\\xdf-\\xf6\\xf8-\\xff",vs="A-Z\\xc0-\\xd6\\xd8-\\xde",_s="\\ufe0e\\ufe0f",Ss="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",no="["+ar+"]",ws="["+Ss+"]",ur="["+ds+"]",Ds="\\d+",ro="["+gs+"]",xs="["+ms+"]",ys="[^"+ar+Ss+Ds+gs+ms+vs+"]",ni="\\ud83c[\\udffb-\\udfff]",As="[^"+ar+"]",ri="(?:\\ud83c[\\udde6-\\uddff]){2}",ii="[\\ud800-\\udbff][\\udc00-\\udfff]",mn="["+vs+"]",Ps="(?:"+xs+"|"+ys+")",so="(?:"+mn+"|"+ys+")",Ts="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Os="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Es="(?:"+ur+"|"+ni+")?",bs="["+_s+"]?",Rs=bs+Es+"(?:\\u200d(?:"+[As,ri,ii].join("|")+")"+bs+Es+")*",co="(?:"+[ro,ri,ii].join("|")+")"+Rs,ho="(?:"+[As+ur+"?",ur,ri,ii,no].join("|")+")",fo=RegExp("['\u2019]","g"),lo=RegExp(ur,"g"),si=RegExp(ni+"(?="+ni+")|"+ho+Rs,"g"),po=RegExp([mn+"?"+xs+"+"+Ts+"(?="+[ws,mn,"$"].join("|")+")",so+"+"+Os+"(?="+[ws,mn+Ps,"$"].join("|")+")",mn+"?"+Ps+"+"+Ts,mn+"+"+Os,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ds,co].join("|"),"g"),go=RegExp("[\\u200d"+ar+ds+_s+"]"),mo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_o=-1,ct={};ct[gn]=ct[an]=ct[rr]=ct[Rn]=ct[In]=ct[ir]=ct[Mn]=ct[Ln]=ct[Bn]=!0,ct[U]=ct[tn]=ct[ze]=ct[ke]=ct[ve]=ct[Oe]=ct[en]=ct[nn]=ct[Ot]=ct[Ee]=ct[re]=ct[ie]=ct[Jt]=ct[rn]=ct[sn]=!1;var at={};at[U]=at[tn]=at[ze]=at[ve]=at[ke]=at[Oe]=at[gn]=at[an]=at[rr]=at[Rn]=at[In]=at[Ot]=at[Ee]=at[re]=at[ie]=at[Jt]=at[rn]=at[bn]=at[ir]=at[Mn]=at[Ln]=at[Bn]=!0,at[en]=at[nn]=at[sn]=!1;var xo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yo=parseFloat,Ao=parseInt,Is="object"==typeof global&&global&&global.Object===Object&&global,Co="object"==typeof self&&self&&self.Object===Object&&self,bt=Is||Co||Function("return this")(),Ms=pe&&!pe.nodeType&&pe,Hn=Ms&&xe&&!xe.nodeType&&xe,Ls=Hn&&Hn.exports===Ms,ai=Ls&&Is.process,se=function(){try{return Hn&&Hn.require&&Hn.require("util").types||ai&&ai.binding&&ai.binding("util")}catch{}}(),Bs=se&&se.isArrayBuffer,Ns=se&&se.isDate,Hs=se&&se.isMap,Fs=se&&se.isRegExp,Ws=se&&se.isSet,Gs=se&&se.isTypedArray;function qt(d,x,S){switch(S.length){case 0:return d.call(x);case 1:return d.call(x,S[0]);case 2:return d.call(x,S[0],S[1]);case 3:return d.call(x,S[0],S[1],S[2])}return d.apply(x,S)}function Po(d,x,S,R){for(var k=-1,j=null==d?0:d.length;++k<j;){var Pt=d[k];x(R,Pt,S(Pt),d)}return R}function ae(d,x){for(var S=-1,R=null==d?0:d.length;++S<R&&!1!==x(d[S],S,d););return d}function To(d,x){for(var S=null==d?0:d.length;S--&&!1!==x(d[S],S,d););return d}function Us(d,x){for(var S=-1,R=null==d?0:d.length;++S<R;)if(!x(d[S],S,d))return!1;return!0}function $e(d,x){for(var S=-1,R=null==d?0:d.length,k=0,j=[];++S<R;){var Pt=d[S];x(Pt,S,d)&&(j[k++]=Pt)}return j}function or(d,x){return!(null==d||!d.length)&&vn(d,x,0)>-1}function ui(d,x,S){for(var R=-1,k=null==d?0:d.length;++R<k;)if(S(x,d[R]))return!0;return!1}function lt(d,x){for(var S=-1,R=null==d?0:d.length,k=Array(R);++S<R;)k[S]=x(d[S],S,d);return k}function Ye(d,x){for(var S=-1,R=x.length,k=d.length;++S<R;)d[k+S]=x[S];return d}function oi(d,x,S,R){var k=-1,j=null==d?0:d.length;for(R&&j&&(S=d[++k]);++k<j;)S=x(S,d[k],k,d);return S}function Oo(d,x,S,R){var k=null==d?0:d.length;for(R&&k&&(S=d[--k]);k--;)S=x(S,d[k],k,d);return S}function ci(d,x){for(var S=-1,R=null==d?0:d.length;++S<R;)if(x(d[S],S,d))return!0;return!1}var Eo=hi("length");function ks(d,x,S){var R;return S(d,function(k,j,Pt){if(x(k,j,Pt))return R=j,!1}),R}function cr(d,x,S,R){for(var k=d.length,j=S+(R?1:-1);R?j--:++j<k;)if(x(d[j],j,d))return j;return-1}function vn(d,x,S){return x==x?function Ko(d,x,S){for(var R=S-1,k=d.length;++R<k;)if(d[R]===x)return R;return-1}(d,x,S):cr(d,Ks,S)}function Io(d,x,S,R){for(var k=S-1,j=d.length;++k<j;)if(R(d[k],x))return k;return-1}function Ks(d){return d!=d}function zs(d,x){var S=null==d?0:d.length;return S?li(d,x)/S:NaN}function hi(d){return function(x){return null==x?f:x[d]}}function fi(d){return function(x){return null==d?f:d[x]}}function $s(d,x,S,R,k){return k(d,function(j,Pt,rt){S=R?(R=!1,j):x(S,j,Pt,rt)}),S}function li(d,x){for(var S,R=-1,k=d.length;++R<k;){var j=x(d[R]);j!==f&&(S=S===f?j:S+j)}return S}function pi(d,x){for(var S=-1,R=Array(d);++S<d;)R[S]=x(S);return R}function Ys(d){return d&&d.slice(0,Js(d)+1).replace(O,"")}function Qt(d){return function(x){return d(x)}}function di(d,x){return lt(x,function(S){return d[S]})}function Fn(d,x){return d.has(x)}function Zs(d,x){for(var S=-1,R=d.length;++S<R&&vn(x,d[S],0)>-1;);return S}function Vs(d,x){for(var S=d.length;S--&&vn(x,d[S],0)>-1;);return S}var No=fi({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ho=fi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Fo(d){return"\\"+xo[d]}function _n(d){return go.test(d)}function gi(d){var x=-1,S=Array(d.size);return d.forEach(function(R,k){S[++x]=[k,R]}),S}function Xs(d,x){return function(S){return d(x(S))}}function Ze(d,x){for(var S=-1,R=d.length,k=0,j=[];++S<R;){var Pt=d[S];(Pt===x||Pt===L)&&(d[S]=L,j[k++]=S)}return j}function hr(d){var x=-1,S=Array(d.size);return d.forEach(function(R){S[++x]=R}),S}function Sn(d){return _n(d)?function Yo(d){for(var x=si.lastIndex=0;si.test(d);)++x;return x}(d):Eo(d)}function _e(d){return _n(d)?function Zo(d){return d.match(si)||[]}(d):function bo(d){return d.split("")}(d)}function Js(d){for(var x=d.length;x--&&I.test(d.charAt(x)););return x}var $o=fi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fr=function d(x){var t,S=(x=null==x?bt:fr.defaults(bt.Object(),x,fr.pick(bt,vo))).Array,R=x.Date,k=x.Error,j=x.Function,Pt=x.Math,rt=x.Object,mi=x.RegExp,Jo=x.String,ue=x.TypeError,lr=S.prototype,wn=rt.prototype,pr=x["__core-js_shared__"],dr=j.prototype.toString,nt=wn.hasOwnProperty,Qo=0,qs=(t=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",gr=wn.toString,jo=dr.call(rt),tc=bt._,ec=mi("^"+dr.call(nt).replace(w,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mr=Ls?x.Buffer:f,Ve=x.Symbol,vr=x.Uint8Array,Qs=mr?mr.allocUnsafe:f,_r=Xs(rt.getPrototypeOf,rt),js=rt.create,ta=wn.propertyIsEnumerable,Sr=lr.splice,ea=Ve?Ve.isConcatSpreadable:f,Wn=Ve?Ve.iterator:f,un=Ve?Ve.toStringTag:f,wr=function(){try{var t=ln(rt,"defineProperty");return t({},"",{}),t}catch{}}(),nc=x.clearTimeout!==bt.clearTimeout&&x.clearTimeout,rc=R&&R.now!==bt.Date.now&&R.now,ic=x.setTimeout!==bt.setTimeout&&x.setTimeout,Dr=Pt.ceil,xr=Pt.floor,vi=rt.getOwnPropertySymbols,sc=mr?mr.isBuffer:f,na=x.isFinite,ac=lr.join,uc=Xs(rt.keys,rt),Tt=Pt.max,Lt=Pt.min,oc=R.now,cc=x.parseInt,ra=Pt.random,hc=lr.reverse,_i=ln(x,"DataView"),Gn=ln(x,"Map"),Si=ln(x,"Promise"),Dn=ln(x,"Set"),Un=ln(x,"WeakMap"),kn=ln(rt,"create"),yr=Un&&new Un,xn={},fc=pn(_i),lc=pn(Gn),pc=pn(Si),dc=pn(Dn),gc=pn(Un),Ar=Ve?Ve.prototype:f,Kn=Ar?Ar.valueOf:f,ia=Ar?Ar.toString:f;function o(t){if(_t(t)&&!K(t)&&!(t instanceof q)){if(t instanceof oe)return t;if(nt.call(t,"__wrapped__"))return su(t)}return new oe(t)}var yn=function(){function t(){}return function(e){if(!gt(e))return{};if(js)return js(e);t.prototype=e;var r=new t;return t.prototype=f,r}}();function Cr(){}function oe(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=f}function q(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=At,this.__views__=[]}function on(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function Re(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function Ie(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function cn(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ie;++e<r;)this.add(t[e])}function Se(t){var e=this.__data__=new Re(t);this.size=e.size}function sa(t,e){var r=K(t),s=!r&&dn(t),u=!r&&!s&&je(t),c=!r&&!s&&!u&&Tn(t),l=r||s||u||c,p=l?pi(t.length,Jo):[],m=p.length;for(var y in t)(e||nt.call(t,y))&&(!l||!("length"==y||u&&("offset"==y||"parent"==y)||c&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||Ne(y,m)))&&p.push(y);return p}function aa(t){var e=t.length;return e?t[bi(0,e-1)]:f}function Uc(t,e){return Wr($t(t),hn(e,0,t.length))}function kc(t){return Wr($t(t))}function wi(t,e,r){(r!==f&&!we(t[e],r)||r===f&&!(e in t))&&Me(t,e,r)}function zn(t,e,r){var s=t[e];(!nt.call(t,e)||!we(s,r)||r===f&&!(e in t))&&Me(t,e,r)}function Pr(t,e){for(var r=t.length;r--;)if(we(t[r][0],e))return r;return-1}function Kc(t,e,r,s){return Xe(t,function(u,c,l){e(s,u,r(u),l)}),s}function ua(t,e){return t&&Ce(e,Et(e),t)}function Me(t,e,r){"__proto__"==e&&wr?wr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Di(t,e){for(var r=-1,s=e.length,u=S(s),c=null==t;++r<s;)u[r]=c?f:es(t,e[r]);return u}function hn(t,e,r){return t==t&&(r!==f&&(t=t<=r?t:r),e!==f&&(t=t>=e?t:e)),t}function ce(t,e,r,s,u,c){var l,p=1&e,m=2&e,y=4&e;if(r&&(l=u?r(t,s,u,c):r(t)),l!==f)return l;if(!gt(t))return t;var A=K(t);if(A){if(l=function Ih(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&nt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!p)return $t(t,l)}else{var C=Bt(t),E=C==nn||C==er;if(je(t))return Ra(t,p);if(C==re||C==U||E&&!u){if(l=m||E?{}:Ja(t),!p)return m?function Dh(t,e){return Ce(t,Va(t),e)}(t,function zc(t,e){return t&&Ce(e,Zt(e),t)}(l,t)):function wh(t,e){return Ce(t,zi(t),e)}(t,ua(l,t))}else{if(!at[C])return u?t:{};l=function Mh(t,e,r){var s=t.constructor;switch(e){case ze:return Hi(t);case ke:case Oe:return new s(+t);case ve:return function mh(t,e){var r=e?Hi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case gn:case an:case rr:case Rn:case In:case ir:case Mn:case Ln:case Bn:return Ia(t,r);case Ot:return new s;case Ee:case rn:return new s(t);case ie:return function vh(t){var e=new t.constructor(t.source,ps.exec(t));return e.lastIndex=t.lastIndex,e}(t);case Jt:return new s;case bn:return function _h(t){return Kn?rt(Kn.call(t)):{}}(t)}}(t,C,p)}}c||(c=new Se);var M=c.get(t);if(M)return M;c.set(t,l),Cu(t)?t.forEach(function(W){l.add(ce(W,e,r,W,t,c))}):yu(t)&&t.forEach(function(W,J){l.set(J,ce(W,e,r,J,t,c))});var Y=A?f:(y?m?Ui:Gi:m?Zt:Et)(t);return ae(Y||t,function(W,J){Y&&(W=t[J=W]),zn(l,J,ce(W,e,r,J,t,c))}),l}function oa(t,e,r){var s=r.length;if(null==t)return!s;for(t=rt(t);s--;){var u=r[s],l=t[u];if(l===f&&!(u in t)||!(0,e[u])(l))return!1}return!0}function ca(t,e,r){if("function"!=typeof t)throw new ue(v);return qn(function(){t.apply(f,r)},e)}function $n(t,e,r,s){var u=-1,c=or,l=!0,p=t.length,m=[],y=e.length;if(!p)return m;r&&(e=lt(e,Qt(r))),s?(c=ui,l=!1):e.length>=200&&(c=Fn,l=!1,e=new cn(e));t:for(;++u<p;){var A=t[u],C=null==r?A:r(A);if(A=s||0!==A?A:0,l&&C==C){for(var E=y;E--;)if(e[E]===C)continue t;m.push(A)}else c(e,C,s)||m.push(A)}return m}o.templateSettings={escape:D,evaluate:n,interpolate:i,variable:"",imports:{_:o}},(o.prototype=Cr.prototype).constructor=o,(oe.prototype=yn(Cr.prototype)).constructor=oe,(q.prototype=yn(Cr.prototype)).constructor=q,on.prototype.clear=function Sc(){this.__data__=kn?kn(null):{},this.size=0},on.prototype.delete=function wc(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},on.prototype.get=function Dc(t){var e=this.__data__;if(kn){var r=e[t];return r===T?f:r}return nt.call(e,t)?e[t]:f},on.prototype.has=function xc(t){var e=this.__data__;return kn?e[t]!==f:nt.call(e,t)},on.prototype.set=function yc(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=kn&&e===f?T:e,this},Re.prototype.clear=function Ac(){this.__data__=[],this.size=0},Re.prototype.delete=function Cc(t){var e=this.__data__,r=Pr(e,t);return!(r<0||(r==e.length-1?e.pop():Sr.call(e,r,1),--this.size,0))},Re.prototype.get=function Pc(t){var e=this.__data__,r=Pr(e,t);return r<0?f:e[r][1]},Re.prototype.has=function Tc(t){return Pr(this.__data__,t)>-1},Re.prototype.set=function Oc(t,e){var r=this.__data__,s=Pr(r,t);return s<0?(++this.size,r.push([t,e])):r[s][1]=e,this},Ie.prototype.clear=function Ec(){this.size=0,this.__data__={hash:new on,map:new(Gn||Re),string:new on}},Ie.prototype.delete=function bc(t){var e=Fr(this,t).delete(t);return this.size-=e?1:0,e},Ie.prototype.get=function Rc(t){return Fr(this,t).get(t)},Ie.prototype.has=function Ic(t){return Fr(this,t).has(t)},Ie.prototype.set=function Mc(t,e){var r=Fr(this,t),s=r.size;return r.set(t,e),this.size+=r.size==s?0:1,this},cn.prototype.add=cn.prototype.push=function Lc(t){return this.__data__.set(t,T),this},cn.prototype.has=function Bc(t){return this.__data__.has(t)},Se.prototype.clear=function Nc(){this.__data__=new Re,this.size=0},Se.prototype.delete=function Hc(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Se.prototype.get=function Fc(t){return this.__data__.get(t)},Se.prototype.has=function Wc(t){return this.__data__.has(t)},Se.prototype.set=function Gc(t,e){var r=this.__data__;if(r instanceof Re){var s=r.__data__;if(!Gn||s.length<199)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ie(s)}return r.set(t,e),this.size=r.size,this};var Xe=Na(Ae),ha=Na(yi,!0);function Yc(t,e){var r=!0;return Xe(t,function(s,u,c){return r=!!e(s,u,c)}),r}function Tr(t,e,r){for(var s=-1,u=t.length;++s<u;){var c=t[s],l=e(c);if(null!=l&&(p===f?l==l&&!te(l):r(l,p)))var p=l,m=c}return m}function fa(t,e){var r=[];return Xe(t,function(s,u,c){e(s,u,c)&&r.push(s)}),r}function Rt(t,e,r,s,u){var c=-1,l=t.length;for(r||(r=Bh),u||(u=[]);++c<l;){var p=t[c];e>0&&r(p)?e>1?Rt(p,e-1,r,s,u):Ye(u,p):s||(u[u.length]=p)}return u}var xi=Ha(),la=Ha(!0);function Ae(t,e){return t&&xi(t,e,Et)}function yi(t,e){return t&&la(t,e,Et)}function Or(t,e){return $e(e,function(r){return He(t[r])})}function fn(t,e){for(var r=0,s=(e=qe(e,t)).length;null!=t&&r<s;)t=t[Pe(e[r++])];return r&&r==s?t:f}function pa(t,e,r){var s=e(t);return K(t)?s:Ye(s,r(t))}function Ft(t){return null==t?t===f?"[object Undefined]":"[object Null]":un&&un in rt(t)?function Eh(t){var e=nt.call(t,un),r=t[un];try{t[un]=f;var s=!0}catch{}var u=gr.call(t);return s&&(e?t[un]=r:delete t[un]),u}(t):function kh(t){return gr.call(t)}(t)}function Ai(t,e){return t>e}function Vc(t,e){return null!=t&&nt.call(t,e)}function Xc(t,e){return null!=t&&e in rt(t)}function Ci(t,e,r){for(var s=r?ui:or,u=t[0].length,c=t.length,l=c,p=S(c),m=1/0,y=[];l--;){var A=t[l];l&&e&&(A=lt(A,Qt(e))),m=Lt(A.length,m),p[l]=!r&&(e||u>=120&&A.length>=120)?new cn(l&&A):f}A=t[0];var C=-1,E=p[0];t:for(;++C<u&&y.length<m;){var M=A[C],F=e?e(M):M;if(M=r||0!==M?M:0,!(E?Fn(E,F):s(y,F,r))){for(l=c;--l;){var Y=p[l];if(!(Y?Fn(Y,F):s(t[l],F,r)))continue t}E&&E.push(F),y.push(M)}}return y}function Yn(t,e,r){var s=null==(t=tu(t,e=qe(e,t)))?t:t[Pe(fe(e))];return null==s?f:qt(s,t,r)}function da(t){return _t(t)&&Ft(t)==U}function Zn(t,e,r,s,u){return t===e||(null==t||null==e||!_t(t)&&!_t(e)?t!=t&&e!=e:function th(t,e,r,s,u,c){var l=K(t),p=K(e),m=l?tn:Bt(t),y=p?tn:Bt(e),A=(m=m==U?re:m)==re,C=(y=y==U?re:y)==re,E=m==y;if(E&&je(t)){if(!je(e))return!1;l=!0,A=!1}if(E&&!A)return c||(c=new Se),l||Tn(t)?Za(t,e,r,s,u,c):function Th(t,e,r,s,u,c,l){switch(r){case ve:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ze:return!(t.byteLength!=e.byteLength||!c(new vr(t),new vr(e)));case ke:case Oe:case Ee:return we(+t,+e);case en:return t.name==e.name&&t.message==e.message;case ie:case rn:return t==e+"";case Ot:var p=gi;case Jt:if(p||(p=hr),t.size!=e.size&&!(1&s))return!1;var y=l.get(t);if(y)return y==e;s|=2,l.set(t,e);var A=Za(p(t),p(e),s,u,c,l);return l.delete(t),A;case bn:if(Kn)return Kn.call(t)==Kn.call(e)}return!1}(t,e,m,r,s,u,c);if(!(1&r)){var M=A&&nt.call(t,"__wrapped__"),F=C&&nt.call(e,"__wrapped__");if(M||F){var Y=M?t.value():t,W=F?e.value():e;return c||(c=new Se),u(Y,W,r,s,c)}}return!!E&&(c||(c=new Se),function Oh(t,e,r,s,u,c){var l=1&r,p=Gi(t),m=p.length;if(m!=Gi(e).length&&!l)return!1;for(var C=m;C--;){var E=p[C];if(!(l?E in e:nt.call(e,E)))return!1}var M=c.get(t),F=c.get(e);if(M&&F)return M==e&&F==t;var Y=!0;c.set(t,e),c.set(e,t);for(var W=l;++C<m;){var J=t[E=p[C]],Q=e[E];if(s)var ee=l?s(Q,J,E,e,t,c):s(J,Q,E,t,e,c);if(!(ee===f?J===Q||u(J,Q,r,s,c):ee)){Y=!1;break}W||(W="constructor"==E)}if(Y&&!W){var Gt=t.constructor,ne=e.constructor;Gt!=ne&&"constructor"in t&&"constructor"in e&&!("function"==typeof Gt&&Gt instanceof Gt&&"function"==typeof ne&&ne instanceof ne)&&(Y=!1)}return c.delete(t),c.delete(e),Y}(t,e,r,s,u,c))}(t,e,r,s,Zn,u))}function Pi(t,e,r,s){var u=r.length,c=u,l=!s;if(null==t)return!c;for(t=rt(t);u--;){var p=r[u];if(l&&p[2]?p[1]!==t[p[0]]:!(p[0]in t))return!1}for(;++u<c;){var m=(p=r[u])[0],y=t[m],A=p[1];if(l&&p[2]){if(y===f&&!(m in t))return!1}else{var C=new Se;if(s)var E=s(y,A,m,t,e,C);if(!(E===f?Zn(A,y,3,s,C):E))return!1}}return!0}function ga(t){return!(!gt(t)||function Hh(t){return!!qs&&qs in t}(t))&&(He(t)?ec:zu).test(pn(t))}function ma(t){return"function"==typeof t?t:null==t?Vt:"object"==typeof t?K(t)?Sa(t[0],t[1]):_a(t):Fu(t)}function Ti(t){if(!Jn(t))return uc(t);var e=[];for(var r in rt(t))nt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Oi(t,e){return t<e}function va(t,e){var r=-1,s=Yt(t)?S(t.length):[];return Xe(t,function(u,c,l){s[++r]=e(u,c,l)}),s}function _a(t){var e=Ki(t);return 1==e.length&&e[0][2]?Qa(e[0][0],e[0][1]):function(r){return r===t||Pi(r,t,e)}}function Sa(t,e){return $i(t)&&qa(e)?Qa(Pe(t),e):function(r){var s=es(r,t);return s===f&&s===e?ns(r,t):Zn(e,s,3)}}function Er(t,e,r,s,u){t!==e&&xi(e,function(c,l){if(u||(u=new Se),gt(c))!function ah(t,e,r,s,u,c,l){var p=Zi(t,r),m=Zi(e,r),y=l.get(m);if(y)wi(t,r,y);else{var A=c?c(p,m,r+"",t,e,l):f,C=A===f;if(C){var E=K(m),M=!E&&je(m),F=!E&&!M&&Tn(m);A=m,E||M||F?K(p)?A=p:St(p)?A=$t(p):M?(C=!1,A=Ra(m,!0)):F?(C=!1,A=Ia(m,!0)):A=[]:Qn(m)||dn(m)?(A=p,dn(p)?A=Ou(p):(!gt(p)||He(p))&&(A=Ja(m))):C=!1}C&&(l.set(m,A),u(A,m,s,c,l),l.delete(m)),wi(t,r,A)}}(t,e,l,r,Er,s,u);else{var p=s?s(Zi(t,l),c,l+"",t,e,u):f;p===f&&(p=c),wi(t,l,p)}},Zt)}function wa(t,e){var r=t.length;if(r)return Ne(e+=e<0?r:0,r)?t[e]:f}function Da(t,e,r){e=e.length?lt(e,function(c){return K(c)?function(l){return fn(l,1===c.length?c[0]:c)}:c}):[Vt];var s=-1;return e=lt(e,Qt(H())),function Mo(d,x){var S=d.length;for(d.sort(x);S--;)d[S]=d[S].value;return d}(va(t,function(c,l,p){return{criteria:lt(e,function(y){return y(c)}),index:++s,value:c}}),function(c,l){return function Sh(t,e,r){for(var s=-1,u=t.criteria,c=e.criteria,l=u.length,p=r.length;++s<l;){var m=Ma(u[s],c[s]);if(m)return s>=p?m:m*("desc"==r[s]?-1:1)}return t.index-e.index}(c,l,r)})}function xa(t,e,r){for(var s=-1,u=e.length,c={};++s<u;){var l=e[s],p=fn(t,l);r(p,l)&&Vn(c,qe(l,t),p)}return c}function Ei(t,e,r,s){var u=s?Io:vn,c=-1,l=e.length,p=t;for(t===e&&(e=$t(e)),r&&(p=lt(t,Qt(r)));++c<l;)for(var m=0,y=e[c],A=r?r(y):y;(m=u(p,A,m,s))>-1;)p!==t&&Sr.call(p,m,1),Sr.call(t,m,1);return t}function ya(t,e){for(var r=t?e.length:0,s=r-1;r--;){var u=e[r];if(r==s||u!==c){var c=u;Ne(u)?Sr.call(t,u,1):Mi(t,u)}}return t}function bi(t,e){return t+xr(ra()*(e-t+1))}function Ri(t,e){var r="";if(!t||e<1||e>zt)return r;do{e%2&&(r+=t),(e=xr(e/2))&&(t+=t)}while(e);return r}function Z(t,e){return Vi(ja(t,e,Vt),t+"")}function hh(t){return aa(On(t))}function fh(t,e){var r=On(t);return Wr(r,hn(e,0,r.length))}function Vn(t,e,r,s){if(!gt(t))return t;for(var u=-1,c=(e=qe(e,t)).length,l=c-1,p=t;null!=p&&++u<c;){var m=Pe(e[u]),y=r;if("__proto__"===m||"constructor"===m||"prototype"===m)return t;if(u!=l){var A=p[m];(y=s?s(A,m,p):f)===f&&(y=gt(A)?A:Ne(e[u+1])?[]:{})}zn(p,m,y),p=p[m]}return t}var Aa=yr?function(t,e){return yr.set(t,e),t}:Vt,lh=wr?function(t,e){return wr(t,"toString",{configurable:!0,enumerable:!1,value:is(e),writable:!0})}:Vt;function ph(t){return Wr(On(t))}function he(t,e,r){var s=-1,u=t.length;e<0&&(e=-e>u?0:u+e),(r=r>u?u:r)<0&&(r+=u),u=e>r?0:r-e>>>0,e>>>=0;for(var c=S(u);++s<u;)c[s]=t[s+e];return c}function dh(t,e){var r;return Xe(t,function(s,u,c){return!(r=e(s,u,c))}),!!r}function br(t,e,r){var s=0,u=null==t?s:t.length;if("number"==typeof e&&e==e&&u<=2147483647){for(;s<u;){var c=s+u>>>1,l=t[c];null!==l&&!te(l)&&(r?l<=e:l<e)?s=c+1:u=c}return u}return Ii(t,e,Vt,r)}function Ii(t,e,r,s){var u=0,c=null==t?0:t.length;if(0===c)return 0;for(var l=(e=r(e))!=e,p=null===e,m=te(e),y=e===f;u<c;){var A=xr((u+c)/2),C=r(t[A]),E=C!==f,M=null===C,F=C==C,Y=te(C);if(l)var W=s||F;else W=y?F&&(s||E):p?F&&E&&(s||!M):m?F&&E&&!M&&(s||!Y):!M&&!Y&&(s?C<=e:C<e);W?u=A+1:c=A}return Lt(c,4294967294)}function Ca(t,e){for(var r=-1,s=t.length,u=0,c=[];++r<s;){var l=t[r],p=e?e(l):l;if(!r||!we(p,m)){var m=p;c[u++]=0===l?0:l}}return c}function Pa(t){return"number"==typeof t?t:te(t)?NaN:+t}function jt(t){if("string"==typeof t)return t;if(K(t))return lt(t,jt)+"";if(te(t))return ia?ia.call(t):"";var e=t+"";return"0"==e&&1/t==-z?"-0":e}function Je(t,e,r){var s=-1,u=or,c=t.length,l=!0,p=[],m=p;if(r)l=!1,u=ui;else if(c>=200){var y=e?null:Ch(t);if(y)return hr(y);l=!1,u=Fn,m=new cn}else m=e?[]:p;t:for(;++s<c;){var A=t[s],C=e?e(A):A;if(A=r||0!==A?A:0,l&&C==C){for(var E=m.length;E--;)if(m[E]===C)continue t;e&&m.push(C),p.push(A)}else u(m,C,r)||(m!==p&&m.push(C),p.push(A))}return p}function Mi(t,e){return null==(t=tu(t,e=qe(e,t)))||delete t[Pe(fe(e))]}function Ta(t,e,r,s){return Vn(t,e,r(fn(t,e)),s)}function Rr(t,e,r,s){for(var u=t.length,c=s?u:-1;(s?c--:++c<u)&&e(t[c],c,t););return r?he(t,s?0:c,s?c+1:u):he(t,s?c+1:0,s?u:c)}function Oa(t,e){var r=t;return r instanceof q&&(r=r.value()),oi(e,function(s,u){return u.func.apply(u.thisArg,Ye([s],u.args))},r)}function Li(t,e,r){var s=t.length;if(s<2)return s?Je(t[0]):[];for(var u=-1,c=S(s);++u<s;)for(var l=t[u],p=-1;++p<s;)p!=u&&(c[u]=$n(c[u]||l,t[p],e,r));return Je(Rt(c,1),e,r)}function Ea(t,e,r){for(var s=-1,u=t.length,c=e.length,l={};++s<u;)r(l,t[s],s<c?e[s]:f);return l}function Bi(t){return St(t)?t:[]}function Ni(t){return"function"==typeof t?t:Vt}function qe(t,e){return K(t)?t:$i(t,e)?[t]:iu(et(t))}var gh=Z;function Qe(t,e,r){var s=t.length;return r=r===f?s:r,!e&&r>=s?t:he(t,e,r)}var ba=nc||function(t){return bt.clearTimeout(t)};function Ra(t,e){if(e)return t.slice();var r=t.length,s=Qs?Qs(r):new t.constructor(r);return t.copy(s),s}function Hi(t){var e=new t.constructor(t.byteLength);return new vr(e).set(new vr(t)),e}function Ia(t,e){var r=e?Hi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Ma(t,e){if(t!==e){var r=t!==f,s=null===t,u=t==t,c=te(t),l=e!==f,p=null===e,m=e==e,y=te(e);if(!p&&!y&&!c&&t>e||c&&l&&m&&!p&&!y||s&&l&&m||!r&&m||!u)return 1;if(!s&&!c&&!y&&t<e||y&&r&&u&&!s&&!c||p&&r&&u||!l&&u||!m)return-1}return 0}function La(t,e,r,s){for(var u=-1,c=t.length,l=r.length,p=-1,m=e.length,y=Tt(c-l,0),A=S(m+y),C=!s;++p<m;)A[p]=e[p];for(;++u<l;)(C||u<c)&&(A[r[u]]=t[u]);for(;y--;)A[p++]=t[u++];return A}function Ba(t,e,r,s){for(var u=-1,c=t.length,l=-1,p=r.length,m=-1,y=e.length,A=Tt(c-p,0),C=S(A+y),E=!s;++u<A;)C[u]=t[u];for(var M=u;++m<y;)C[M+m]=e[m];for(;++l<p;)(E||u<c)&&(C[M+r[l]]=t[u++]);return C}function $t(t,e){var r=-1,s=t.length;for(e||(e=S(s));++r<s;)e[r]=t[r];return e}function Ce(t,e,r,s){var u=!r;r||(r={});for(var c=-1,l=e.length;++c<l;){var p=e[c],m=s?s(r[p],t[p],p,r,t):f;m===f&&(m=t[p]),u?Me(r,p,m):zn(r,p,m)}return r}function Ir(t,e){return function(r,s){var u=K(r)?Po:Kc,c=e?e():{};return u(r,t,H(s,2),c)}}function An(t){return Z(function(e,r){var s=-1,u=r.length,c=u>1?r[u-1]:f,l=u>2?r[2]:f;for(c=t.length>3&&"function"==typeof c?(u--,c):f,l&&Wt(r[0],r[1],l)&&(c=u<3?f:c,u=1),e=rt(e);++s<u;){var p=r[s];p&&t(e,p,s,c)}return e})}function Na(t,e){return function(r,s){if(null==r)return r;if(!Yt(r))return t(r,s);for(var u=r.length,c=e?u:-1,l=rt(r);(e?c--:++c<u)&&!1!==s(l[c],c,l););return r}}function Ha(t){return function(e,r,s){for(var u=-1,c=rt(e),l=s(e),p=l.length;p--;){var m=l[t?p:++u];if(!1===r(c[m],m,c))break}return e}}function Fa(t){return function(e){var r=_n(e=et(e))?_e(e):f,s=r?r[0]:e.charAt(0),u=r?Qe(r,1).join(""):e.slice(1);return s[t]()+u}}function Cn(t){return function(e){return oi(Nu(Bu(e).replace(fo,"")),t,"")}}function Xn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=yn(t.prototype),s=t.apply(r,e);return gt(s)?s:r}}function Wa(t){return function(e,r,s){var u=rt(e);if(!Yt(e)){var c=H(r,3);e=Et(e),r=function(p){return c(u[p],p,u)}}var l=t(e,r,s);return l>-1?u[c?e[l]:l]:f}}function Ga(t){return Be(function(e){var r=e.length,s=r,u=oe.prototype.thru;for(t&&e.reverse();s--;){var c=e[s];if("function"!=typeof c)throw new ue(v);if(u&&!l&&"wrapper"==Hr(c))var l=new oe([],!0)}for(s=l?s:r;++s<r;){var p=Hr(c=e[s]),m="wrapper"==p?ki(c):f;l=m&&Yi(m[0])&&424==m[1]&&!m[4].length&&1==m[9]?l[Hr(m[0])].apply(l,m[3]):1==c.length&&Yi(c)?l[p]():l.thru(c)}return function(){var y=arguments,A=y[0];if(l&&1==y.length&&K(A))return l.plant(A).value();for(var C=0,E=r?e[C].apply(this,y):A;++C<r;)E=e[C].call(this,E);return E}})}function Mr(t,e,r,s,u,c,l,p,m,y){var A=128&e,C=1&e,E=2&e,M=24&e,F=512&e,Y=E?f:Xn(t);return function W(){for(var J=arguments.length,Q=S(J),ee=J;ee--;)Q[ee]=arguments[ee];if(M)var Gt=Pn(W),ne=function Bo(d,x){for(var S=d.length,R=0;S--;)d[S]===x&&++R;return R}(Q,Gt);if(s&&(Q=La(Q,s,u,M)),c&&(Q=Ba(Q,c,l,M)),J-=ne,M&&J<y){var wt=Ze(Q,Gt);return Ka(t,e,Mr,W.placeholder,r,Q,wt,p,m,y-J)}var De=C?r:this,We=E?De[t]:t;return J=Q.length,p?Q=function Kh(t,e){for(var r=t.length,s=Lt(e.length,r),u=$t(t);s--;){var c=e[s];t[s]=Ne(c,r)?u[c]:f}return t}(Q,p):F&&J>1&&Q.reverse(),A&&m<J&&(Q.length=m),this&&this!==bt&&this instanceof W&&(We=Y||Xn(We)),We.apply(De,Q)}}function Ua(t,e){return function(r,s){return function qc(t,e,r,s){return Ae(t,function(u,c,l){e(s,r(u),c,l)}),s}(r,t,e(s),{})}}function Lr(t,e){return function(r,s){var u;if(r===f&&s===f)return e;if(r!==f&&(u=r),s!==f){if(u===f)return s;"string"==typeof r||"string"==typeof s?(r=jt(r),s=jt(s)):(r=Pa(r),s=Pa(s)),u=t(r,s)}return u}}function Fi(t){return Be(function(e){return e=lt(e,Qt(H())),Z(function(r){var s=this;return t(e,function(u){return qt(u,s,r)})})})}function Br(t,e){var r=(e=e===f?" ":jt(e)).length;if(r<2)return r?Ri(e,t):e;var s=Ri(e,Dr(t/Sn(e)));return _n(e)?Qe(_e(s),0,t).join(""):s.slice(0,t)}function ka(t){return function(e,r,s){return s&&"number"!=typeof s&&Wt(e,r,s)&&(r=s=f),e=Fe(e),r===f?(r=e,e=0):r=Fe(r),function ch(t,e,r,s){for(var u=-1,c=Tt(Dr((e-t)/(r||1)),0),l=S(c);c--;)l[s?c:++u]=t,t+=r;return l}(e,r,s=s===f?e<r?1:-1:Fe(s),t)}}function Nr(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=le(e),r=le(r)),t(e,r)}}function Ka(t,e,r,s,u,c,l,p,m,y){var A=8&e;e|=A?32:64,4&(e&=~(A?64:32))||(e&=-4);var Y=[t,e,u,A?c:f,A?l:f,A?f:c,A?f:l,p,m,y],W=r.apply(f,Y);return Yi(t)&&eu(W,Y),W.placeholder=s,nu(W,t,e)}function Wi(t){var e=Pt[t];return function(r,s){if(r=le(r),(s=null==s?0:Lt($(s),292))&&na(r)){var u=(et(r)+"e").split("e");return+((u=(et(e(u[0]+"e"+(+u[1]+s)))+"e").split("e"))[0]+"e"+(+u[1]-s))}return e(r)}}var Ch=Dn&&1/hr(new Dn([,-0]))[1]==z?function(t){return new Dn(t)}:us;function za(t){return function(e){var r=Bt(e);return r==Ot?gi(e):r==Jt?function ko(d){var x=-1,S=Array(d.size);return d.forEach(function(R){S[++x]=[R,R]}),S}(e):function Lo(d,x){return lt(x,function(S){return[S,d[S]]})}(e,t(e))}}function Le(t,e,r,s,u,c,l,p){var m=2&e;if(!m&&"function"!=typeof t)throw new ue(v);var y=s?s.length:0;if(y||(e&=-97,s=u=f),l=l===f?l:Tt($(l),0),p=p===f?p:$(p),y-=u?u.length:0,64&e){var A=s,C=u;s=u=f}var E=m?f:ki(t),M=[t,e,r,s,u,A,C,c,l,p];if(E&&function Gh(t,e){var r=t[1],s=e[1],u=r|s;if(!(u<131)&&!(128==s&&8==r||128==s&&256==r&&t[7].length<=e[8]||384==s&&e[7].length<=e[8]&&8==r))return t;1&s&&(t[2]=e[2],u|=1&r?0:4);var p=e[3];if(p){var m=t[3];t[3]=m?La(m,p,e[4]):p,t[4]=m?Ze(t[3],L):e[4]}(p=e[5])&&(t[5]=(m=t[5])?Ba(m,p,e[6]):p,t[6]=m?Ze(t[5],L):e[6]),(p=e[7])&&(t[7]=p),128&s&&(t[8]=null==t[8]?e[8]:Lt(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=u}(M,E),t=M[0],e=M[1],r=M[2],s=M[3],u=M[4],!(p=M[9]=M[9]===f?m?0:t.length:Tt(M[9]-y,0))&&24&e&&(e&=-25),e&&1!=e)F=8==e||16==e?function yh(t,e,r){var s=Xn(t);return function u(){for(var c=arguments.length,l=S(c),p=c,m=Pn(u);p--;)l[p]=arguments[p];var y=c<3&&l[0]!==m&&l[c-1]!==m?[]:Ze(l,m);return(c-=y.length)<r?Ka(t,e,Mr,u.placeholder,f,l,y,f,f,r-c):qt(this&&this!==bt&&this instanceof u?s:t,this,l)}}(t,e,p):32!=e&&33!=e||u.length?Mr.apply(f,M):function Ah(t,e,r,s){var u=1&e,c=Xn(t);return function l(){for(var p=-1,m=arguments.length,y=-1,A=s.length,C=S(A+m),E=this&&this!==bt&&this instanceof l?c:t;++y<A;)C[y]=s[y];for(;m--;)C[y++]=arguments[++p];return qt(E,u?r:this,C)}}(t,e,r,s);else var F=function xh(t,e,r){var s=1&e,u=Xn(t);return function c(){return(this&&this!==bt&&this instanceof c?u:t).apply(s?r:this,arguments)}}(t,e,r);return nu((E?Aa:eu)(F,M),t,e)}function $a(t,e,r,s){return t===f||we(t,wn[r])&&!nt.call(s,r)?e:t}function Ya(t,e,r,s,u,c){return gt(t)&&gt(e)&&(c.set(e,t),Er(t,e,f,Ya,c),c.delete(e)),t}function Ph(t){return Qn(t)?f:t}function Za(t,e,r,s,u,c){var l=1&r,p=t.length,m=e.length;if(p!=m&&!(l&&m>p))return!1;var y=c.get(t),A=c.get(e);if(y&&A)return y==e&&A==t;var C=-1,E=!0,M=2&r?new cn:f;for(c.set(t,e),c.set(e,t);++C<p;){var F=t[C],Y=e[C];if(s)var W=l?s(Y,F,C,e,t,c):s(F,Y,C,t,e,c);if(W!==f){if(W)continue;E=!1;break}if(M){if(!ci(e,function(J,Q){if(!Fn(M,Q)&&(F===J||u(F,J,r,s,c)))return M.push(Q)})){E=!1;break}}else if(F!==Y&&!u(F,Y,r,s,c)){E=!1;break}}return c.delete(t),c.delete(e),E}function Be(t){return Vi(ja(t,f,ou),t+"")}function Gi(t){return pa(t,Et,zi)}function Ui(t){return pa(t,Zt,Va)}var ki=yr?function(t){return yr.get(t)}:us;function Hr(t){for(var e=t.name+"",r=xn[e],s=nt.call(xn,e)?r.length:0;s--;){var u=r[s],c=u.func;if(null==c||c==t)return u.name}return e}function Pn(t){return(nt.call(o,"placeholder")?o:t).placeholder}function H(){var t=o.iteratee||ss;return t=t===ss?ma:t,arguments.length?t(arguments[0],arguments[1]):t}function Fr(t,e){var r=t.__data__;return function Nh(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function Ki(t){for(var e=Et(t),r=e.length;r--;){var s=e[r],u=t[s];e[r]=[s,u,qa(u)]}return e}function ln(t,e){var r=function Wo(d,x){return null==d?f:d[x]}(t,e);return ga(r)?r:f}var zi=vi?function(t){return null==t?[]:(t=rt(t),$e(vi(t),function(e){return ta.call(t,e)}))}:os,Va=vi?function(t){for(var e=[];t;)Ye(e,zi(t)),t=_r(t);return e}:os,Bt=Ft;function Xa(t,e,r){for(var s=-1,u=(e=qe(e,t)).length,c=!1;++s<u;){var l=Pe(e[s]);if(!(c=null!=t&&r(t,l)))break;t=t[l]}return c||++s!=u?c:!!(u=null==t?0:t.length)&&$r(u)&&Ne(l,u)&&(K(t)||dn(t))}function Ja(t){return"function"!=typeof t.constructor||Jn(t)?{}:yn(_r(t))}function Bh(t){return K(t)||dn(t)||!!(ea&&t&&t[ea])}function Ne(t,e){var r=typeof t;return!!(e=e??zt)&&("number"==r||"symbol"!=r&&Yu.test(t))&&t>-1&&t%1==0&&t<e}function Wt(t,e,r){if(!gt(r))return!1;var s=typeof e;return!!("number"==s?Yt(r)&&Ne(e,r.length):"string"==s&&e in r)&&we(r[e],t)}function $i(t,e){if(K(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!te(t))||h.test(t)||!a.test(t)||null!=e&&t in rt(e)}function Yi(t){var e=Hr(t),r=o[e];if("function"!=typeof r||!(e in q.prototype))return!1;if(t===r)return!0;var s=ki(r);return!!s&&t===s[0]}(_i&&Bt(new _i(new ArrayBuffer(1)))!=ve||Gn&&Bt(new Gn)!=Ot||Si&&Bt(Si.resolve())!=nr||Dn&&Bt(new Dn)!=Jt||Un&&Bt(new Un)!=sn)&&(Bt=function(t){var e=Ft(t),r=e==re?t.constructor:f,s=r?pn(r):"";if(s)switch(s){case fc:return ve;case lc:return Ot;case pc:return nr;case dc:return Jt;case gc:return sn}return e});var Fh=pr?He:cs;function Jn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wn)}function qa(t){return t==t&&!gt(t)}function Qa(t,e){return function(r){return null!=r&&r[t]===e&&(e!==f||t in rt(r))}}function ja(t,e,r){return e=Tt(e===f?t.length-1:e,0),function(){for(var s=arguments,u=-1,c=Tt(s.length-e,0),l=S(c);++u<c;)l[u]=s[e+u];u=-1;for(var p=S(e+1);++u<e;)p[u]=s[u];return p[e]=r(l),qt(t,this,p)}}function tu(t,e){return e.length<2?t:fn(t,he(e,0,-1))}function Zi(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var eu=ru(Aa),qn=ic||function(t,e){return bt.setTimeout(t,e)},Vi=ru(lh);function nu(t,e,r){var s=e+"";return Vi(t,function Lh(t,e){var r=e.length;if(!r)return t;var s=r-1;return e[s]=(r>1?"& ":"")+e[s],e=e.join(r>2?", ":" "),t.replace(V,"{\n/* [wrapped with "+e+"] */\n")}(s,function zh(t,e){return ae(It,function(r){var s="_."+r[0];e&r[1]&&!or(t,s)&&t.push(s)}),t.sort()}(function Rh(t){var e=t.match(Ht);return e?e[1].split(vt):[]}(s),r)))}function ru(t){var e=0,r=0;return function(){var s=oc(),u=16-(s-r);if(r=s,u>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(f,arguments)}}function Wr(t,e){var r=-1,s=t.length,u=s-1;for(e=e===f?s:e;++r<e;){var c=bi(r,u),l=t[c];t[c]=t[r],t[r]=l}return t.length=e,t}var iu=function Wh(t){var e=Kr(t,function(s){return 500===r.size&&r.clear(),s}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(g,function(r,s,u,c){e.push(u?c.replace(Gu,"$1"):s||r)}),e});function Pe(t){if("string"==typeof t||te(t))return t;var e=t+"";return"0"==e&&1/t==-z?"-0":e}function pn(t){if(null!=t){try{return dr.call(t)}catch{}try{return t+""}catch{}}return""}function su(t){if(t instanceof q)return t.clone();var e=new oe(t.__wrapped__,t.__chain__);return e.__actions__=$t(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vh=Z(function(t,e){return St(t)?$n(t,Rt(e,1,St,!0)):[]}),Xh=Z(function(t,e){var r=fe(e);return St(r)&&(r=f),St(t)?$n(t,Rt(e,1,St,!0),H(r,2)):[]}),Jh=Z(function(t,e){var r=fe(e);return St(r)&&(r=f),St(t)?$n(t,Rt(e,1,St,!0),f,r):[]});function au(t,e,r){var s=null==t?0:t.length;if(!s)return-1;var u=null==r?0:$(r);return u<0&&(u=Tt(s+u,0)),cr(t,H(e,3),u)}function uu(t,e,r){var s=null==t?0:t.length;if(!s)return-1;var u=s-1;return r!==f&&(u=$(r),u=r<0?Tt(s+u,0):Lt(u,s-1)),cr(t,H(e,3),u,!0)}function ou(t){return null!=t&&t.length?Rt(t,1):[]}function cu(t){return t&&t.length?t[0]:f}var of=Z(function(t){var e=lt(t,Bi);return e.length&&e[0]===t[0]?Ci(e):[]}),cf=Z(function(t){var e=fe(t),r=lt(t,Bi);return e===fe(r)?e=f:r.pop(),r.length&&r[0]===t[0]?Ci(r,H(e,2)):[]}),hf=Z(function(t){var e=fe(t),r=lt(t,Bi);return(e="function"==typeof e?e:f)&&r.pop(),r.length&&r[0]===t[0]?Ci(r,f,e):[]});function fe(t){var e=null==t?0:t.length;return e?t[e-1]:f}var df=Z(hu);function hu(t,e){return t&&t.length&&e&&e.length?Ei(t,e):t}var vf=Be(function(t,e){var r=null==t?0:t.length,s=Di(t,e);return ya(t,lt(e,function(u){return Ne(u,r)?+u:u}).sort(Ma)),s});function Xi(t){return null==t?t:hc.call(t)}var Mf=Z(function(t){return Je(Rt(t,1,St,!0))}),Lf=Z(function(t){var e=fe(t);return St(e)&&(e=f),Je(Rt(t,1,St,!0),H(e,2))}),Bf=Z(function(t){var e=fe(t);return e="function"==typeof e?e:f,Je(Rt(t,1,St,!0),f,e)});function Ji(t){if(!t||!t.length)return[];var e=0;return t=$e(t,function(r){if(St(r))return e=Tt(r.length,e),!0}),pi(e,function(r){return lt(t,hi(r))})}function fu(t,e){if(!t||!t.length)return[];var r=Ji(t);return null==e?r:lt(r,function(s){return qt(e,f,s)})}var Wf=Z(function(t,e){return St(t)?$n(t,e):[]}),Gf=Z(function(t){return Li($e(t,St))}),Uf=Z(function(t){var e=fe(t);return St(e)&&(e=f),Li($e(t,St),H(e,2))}),kf=Z(function(t){var e=fe(t);return e="function"==typeof e?e:f,Li($e(t,St),f,e)}),Kf=Z(Ji),Yf=Z(function(t){var e=t.length,r=e>1?t[e-1]:f;return r="function"==typeof r?(t.pop(),r):f,fu(t,r)});function lu(t){var e=o(t);return e.__chain__=!0,e}function Gr(t,e){return e(t)}var Vf=Be(function(t){var e=t.length,r=e?t[0]:0,s=this.__wrapped__,u=function(c){return Di(c,t)};return!(e>1||this.__actions__.length)&&s instanceof q&&Ne(r)?((s=s.slice(r,+r+(e?1:0))).__actions__.push({func:Gr,args:[u],thisArg:f}),new oe(s,this.__chain__).thru(function(c){return e&&!c.length&&c.push(f),c})):this.thru(u)}),nl=Ir(function(t,e,r){nt.call(t,r)?++t[r]:Me(t,r,1)}),sl=Wa(au),al=Wa(uu);function pu(t,e){return(K(t)?ae:Xe)(t,H(e,3))}function du(t,e){return(K(t)?To:ha)(t,H(e,3))}var hl=Ir(function(t,e,r){nt.call(t,r)?t[r].push(e):Me(t,r,[e])}),ll=Z(function(t,e,r){var s=-1,u="function"==typeof e,c=Yt(t)?S(t.length):[];return Xe(t,function(l){c[++s]=u?qt(e,l,r):Yn(l,e,r)}),c}),pl=Ir(function(t,e,r){Me(t,r,e)});function Ur(t,e){return(K(t)?lt:va)(t,H(e,3))}var gl=Ir(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),Al=Z(function(t,e){if(null==t)return[];var r=e.length;return r>1&&Wt(t,e[0],e[1])?e=[]:r>2&&Wt(e[0],e[1],e[2])&&(e=[e[0]]),Da(t,Rt(e,1),[])}),kr=rc||function(){return bt.Date.now()};function gu(t,e,r){return e=r?f:e,Le(t,128,f,f,f,f,e=t&&null==e?t.length:e)}function mu(t,e){var r;if("function"!=typeof e)throw new ue(v);return t=$(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=f),r}}var qi=Z(function(t,e,r){var s=1;if(r.length){var u=Ze(r,Pn(qi));s|=32}return Le(t,s,e,r,u)}),vu=Z(function(t,e,r){var s=3;if(r.length){var u=Ze(r,Pn(vu));s|=32}return Le(e,s,t,r,u)});function wu(t,e,r){var s,u,c,l,p,m,y=0,A=!1,C=!1,E=!0;if("function"!=typeof t)throw new ue(v);function M(wt){var De=s,We=u;return s=u=f,y=wt,l=t.apply(We,De)}function W(wt){var De=wt-m;return m===f||De>=e||De<0||C&&wt-y>=c}function J(){var wt=kr();if(W(wt))return Q(wt);p=qn(J,function Y(wt){var Wu=e-(wt-m);return C?Lt(Wu,c-(wt-y)):Wu}(wt))}function Q(wt){return p=f,E&&s?M(wt):(s=u=f,l)}function ne(){var wt=kr(),De=W(wt);if(s=arguments,u=this,m=wt,De){if(p===f)return function F(wt){return y=wt,p=qn(J,e),A?M(wt):l}(m);if(C)return ba(p),p=qn(J,e),M(m)}return p===f&&(p=qn(J,e)),l}return e=le(e)||0,gt(r)&&(A=!!r.leading,c=(C="maxWait"in r)?Tt(le(r.maxWait)||0,e):c,E="trailing"in r?!!r.trailing:E),ne.cancel=function ee(){p!==f&&ba(p),y=0,s=m=u=p=f},ne.flush=function Gt(){return p===f?l:Q(kr())},ne}var Pl=Z(function(t,e){return ca(t,1,e)}),Tl=Z(function(t,e,r){return ca(t,le(e)||0,r)});function Kr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ue(v);var r=function(){var s=arguments,u=e?e.apply(this,s):s[0],c=r.cache;if(c.has(u))return c.get(u);var l=t.apply(this,s);return r.cache=c.set(u,l)||c,l};return r.cache=new(Kr.Cache||Ie),r}function zr(t){if("function"!=typeof t)throw new ue(v);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Kr.Cache=Ie;var bl=gh(function(t,e){var r=(e=1==e.length&&K(e[0])?lt(e[0],Qt(H())):lt(Rt(e,1),Qt(H()))).length;return Z(function(s){for(var u=-1,c=Lt(s.length,r);++u<c;)s[u]=e[u].call(this,s[u]);return qt(t,this,s)})}),Qi=Z(function(t,e){var r=Ze(e,Pn(Qi));return Le(t,32,f,e,r)}),Du=Z(function(t,e){var r=Ze(e,Pn(Du));return Le(t,64,f,e,r)}),Rl=Be(function(t,e){return Le(t,256,f,f,f,e)});function we(t,e){return t===e||t!=t&&e!=e}var Kl=Nr(Ai),zl=Nr(function(t,e){return t>=e}),dn=da(function(){return arguments}())?da:function(t){return _t(t)&&nt.call(t,"callee")&&!ta.call(t,"callee")},K=S.isArray,$l=Bs?Qt(Bs):function Qc(t){return _t(t)&&Ft(t)==ze};function Yt(t){return null!=t&&$r(t.length)&&!He(t)}function St(t){return _t(t)&&Yt(t)}var je=sc||cs,Zl=Ns?Qt(Ns):function jc(t){return _t(t)&&Ft(t)==Oe};function ji(t){if(!_t(t))return!1;var e=Ft(t);return e==en||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Qn(t)}function He(t){if(!gt(t))return!1;var e=Ft(t);return e==nn||e==er||"[object AsyncFunction]"==e||"[object Proxy]"==e}function xu(t){return"number"==typeof t&&t==$(t)}function $r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=zt}function gt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function _t(t){return null!=t&&"object"==typeof t}var yu=Hs?Qt(Hs):function eh(t){return _t(t)&&Bt(t)==Ot};function Au(t){return"number"==typeof t||_t(t)&&Ft(t)==Ee}function Qn(t){if(!_t(t)||Ft(t)!=re)return!1;var e=_r(t);if(null===e)return!0;var r=nt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&dr.call(r)==jo}var ts=Fs?Qt(Fs):function nh(t){return _t(t)&&Ft(t)==ie},Cu=Ws?Qt(Ws):function rh(t){return _t(t)&&Bt(t)==Jt};function Yr(t){return"string"==typeof t||!K(t)&&_t(t)&&Ft(t)==rn}function te(t){return"symbol"==typeof t||_t(t)&&Ft(t)==bn}var Tn=Gs?Qt(Gs):function ih(t){return _t(t)&&$r(t.length)&&!!ct[Ft(t)]},cp=Nr(Oi),hp=Nr(function(t,e){return t<=e});function Pu(t){if(!t)return[];if(Yt(t))return Yr(t)?_e(t):$t(t);if(Wn&&t[Wn])return function Uo(d){for(var x,S=[];!(x=d.next()).done;)S.push(x.value);return S}(t[Wn]());var e=Bt(t);return(e==Ot?gi:e==Jt?hr:On)(t)}function Fe(t){return t?(t=le(t))===z||t===-z?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function $(t){var e=Fe(t),r=e%1;return e==e?r?e-r:e:0}function Tu(t){return t?hn($(t),0,At):0}function le(t){if("number"==typeof t)return t;if(te(t))return NaN;if(gt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=gt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ys(t);var r=Ku.test(t);return r||$u.test(t)?Ao(t.slice(2),r?2:8):ku.test(t)?NaN:+t}function Ou(t){return Ce(t,Zt(t))}function et(t){return null==t?"":jt(t)}var lp=An(function(t,e){if(Jn(e)||Yt(e))Ce(e,Et(e),t);else for(var r in e)nt.call(e,r)&&zn(t,r,e[r])}),Eu=An(function(t,e){Ce(e,Zt(e),t)}),Zr=An(function(t,e,r,s){Ce(e,Zt(e),t,s)}),pp=An(function(t,e,r,s){Ce(e,Et(e),t,s)}),dp=Be(Di),mp=Z(function(t,e){t=rt(t);var r=-1,s=e.length,u=s>2?e[2]:f;for(u&&Wt(e[0],e[1],u)&&(s=1);++r<s;)for(var c=e[r],l=Zt(c),p=-1,m=l.length;++p<m;){var y=l[p],A=t[y];(A===f||we(A,wn[y])&&!nt.call(t,y))&&(t[y]=c[y])}return t}),vp=Z(function(t){return t.push(f,Ya),qt(bu,f,t)});function es(t,e,r){var s=null==t?f:fn(t,e);return s===f?r:s}function ns(t,e){return null!=t&&Xa(t,e,Xc)}var Tp=Ua(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=gr.call(e)),t[e]=r},is(Vt)),Op=Ua(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=gr.call(e)),nt.call(t,e)?t[e].push(r):t[e]=[r]},H),Ep=Z(Yn);function Et(t){return Yt(t)?sa(t):Ti(t)}function Zt(t){return Yt(t)?sa(t,!0):function sh(t){if(!gt(t))return function Uh(t){var e=[];if(null!=t)for(var r in rt(t))e.push(r);return e}(t);var e=Jn(t),r=[];for(var s in t)"constructor"==s&&(e||!nt.call(t,s))||r.push(s);return r}(t)}var Ip=An(function(t,e,r){Er(t,e,r)}),bu=An(function(t,e,r,s){Er(t,e,r,s)}),Mp=Be(function(t,e){var r={};if(null==t)return r;var s=!1;e=lt(e,function(c){return c=qe(c,t),s||(s=c.length>1),c}),Ce(t,Ui(t),r),s&&(r=ce(r,7,Ph));for(var u=e.length;u--;)Mi(r,e[u]);return r}),Bp=Be(function(t,e){return null==t?{}:function uh(t,e){return xa(t,e,function(r,s){return ns(t,s)})}(t,e)});function Ru(t,e){if(null==t)return{};var r=lt(Ui(t),function(s){return[s]});return e=H(e),xa(t,r,function(s,u){return e(s,u[0])})}var Iu=za(Et),Mu=za(Zt);function On(t){return null==t?[]:di(t,Et(t))}var Zp=Cn(function(t,e,r){return e=e.toLowerCase(),t+(r?Lu(e):e)});function Lu(t){return rs(et(t).toLowerCase())}function Bu(t){return(t=et(t))&&t.replace(Zu,No).replace(lo,"")}var qp=Cn(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Qp=Cn(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),jp=Fa("toLowerCase"),ad=Cn(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),od=Cn(function(t,e,r){return t+(r?" ":"")+rs(e)}),_d=Cn(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),rs=Fa("toUpperCase");function Nu(t,e,r){return t=et(t),(e=r?f:e)===f?function Go(d){return mo.test(d)}(t)?function Vo(d){return d.match(po)||[]}(t):function Ro(d){return d.match(ye)||[]}(t):t.match(e)||[]}var Hu=Z(function(t,e){try{return qt(t,f,e)}catch(r){return ji(r)?r:new k(r)}}),Sd=Be(function(t,e){return ae(e,function(r){r=Pe(r),Me(t,r,qi(t[r],t))}),t});function is(t){return function(){return t}}var yd=Ga(),Ad=Ga(!0);function Vt(t){return t}function ss(t){return ma("function"==typeof t?t:ce(t,1))}var Td=Z(function(t,e){return function(r){return Yn(r,t,e)}}),Od=Z(function(t,e){return function(r){return Yn(t,r,e)}});function as(t,e,r){var s=Et(e),u=Or(e,s);null==r&&(!gt(e)||!u.length&&s.length)&&(r=e,e=t,t=this,u=Or(e,Et(e)));var c=!(gt(r)&&"chain"in r&&!r.chain),l=He(t);return ae(u,function(p){var m=e[p];t[p]=m,l&&(t.prototype[p]=function(){var y=this.__chain__;if(c||y){var A=t(this.__wrapped__);return(A.__actions__=$t(this.__actions__)).push({func:m,args:arguments,thisArg:t}),A.__chain__=y,A}return m.apply(t,Ye([this.value()],arguments))})}),t}function us(){}var Rd=Fi(lt),Id=Fi(Us),Md=Fi(ci);function Fu(t){return $i(t)?hi(Pe(t)):function oh(t){return function(e){return fn(e,t)}}(t)}var Bd=ka(),Nd=ka(!0);function os(){return[]}function cs(){return!1}var Kd=Lr(function(t,e){return t+e},0),zd=Wi("ceil"),$d=Lr(function(t,e){return t/e},1),Yd=Wi("floor"),jd=Lr(function(t,e){return t*e},1),tg=Wi("round"),eg=Lr(function(t,e){return t-e},0);return o.after=function Cl(t,e){if("function"!=typeof e)throw new ue(v);return t=$(t),function(){if(--t<1)return e.apply(this,arguments)}},o.ary=gu,o.assign=lp,o.assignIn=Eu,o.assignInWith=Zr,o.assignWith=pp,o.at=dp,o.before=mu,o.bind=qi,o.bindAll=Sd,o.bindKey=vu,o.castArray=function Hl(){if(!arguments.length)return[];var t=arguments[0];return K(t)?t:[t]},o.chain=lu,o.chunk=function $h(t,e,r){e=(r?Wt(t,e,r):e===f)?1:Tt($(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var u=0,c=0,l=S(Dr(s/e));u<s;)l[c++]=he(t,u,u+=e);return l},o.compact=function Yh(t){for(var e=-1,r=null==t?0:t.length,s=0,u=[];++e<r;){var c=t[e];c&&(u[s++]=c)}return u},o.concat=function Zh(){var t=arguments.length;if(!t)return[];for(var e=S(t-1),r=arguments[0],s=t;s--;)e[s-1]=arguments[s];return Ye(K(r)?$t(r):[r],Rt(e,1))},o.cond=function wd(t){var e=null==t?0:t.length,r=H();return t=e?lt(t,function(s){if("function"!=typeof s[1])throw new ue(v);return[r(s[0]),s[1]]}):[],Z(function(s){for(var u=-1;++u<e;){var c=t[u];if(qt(c[0],this,s))return qt(c[1],this,s)}})},o.conforms=function Dd(t){return function $c(t){var e=Et(t);return function(r){return oa(r,t,e)}}(ce(t,1))},o.constant=is,o.countBy=nl,o.create=function gp(t,e){var r=yn(t);return null==e?r:ua(r,e)},o.curry=function _u(t,e,r){var s=Le(t,8,f,f,f,f,f,e=r?f:e);return s.placeholder=_u.placeholder,s},o.curryRight=function Su(t,e,r){var s=Le(t,16,f,f,f,f,f,e=r?f:e);return s.placeholder=Su.placeholder,s},o.debounce=wu,o.defaults=mp,o.defaultsDeep=vp,o.defer=Pl,o.delay=Tl,o.difference=Vh,o.differenceBy=Xh,o.differenceWith=Jh,o.drop=function qh(t,e,r){var s=null==t?0:t.length;return s?he(t,(e=r||e===f?1:$(e))<0?0:e,s):[]},o.dropRight=function Qh(t,e,r){var s=null==t?0:t.length;return s?he(t,0,(e=s-(e=r||e===f?1:$(e)))<0?0:e):[]},o.dropRightWhile=function jh(t,e){return t&&t.length?Rr(t,H(e,3),!0,!0):[]},o.dropWhile=function tf(t,e){return t&&t.length?Rr(t,H(e,3),!0):[]},o.fill=function ef(t,e,r,s){var u=null==t?0:t.length;return u?(r&&"number"!=typeof r&&Wt(t,e,r)&&(r=0,s=u),function Zc(t,e,r,s){var u=t.length;for((r=$(r))<0&&(r=-r>u?0:u+r),(s=s===f||s>u?u:$(s))<0&&(s+=u),s=r>s?0:Tu(s);r<s;)t[r++]=e;return t}(t,e,r,s)):[]},o.filter=function il(t,e){return(K(t)?$e:fa)(t,H(e,3))},o.flatMap=function ul(t,e){return Rt(Ur(t,e),1)},o.flatMapDeep=function ol(t,e){return Rt(Ur(t,e),z)},o.flatMapDepth=function cl(t,e,r){return r=r===f?1:$(r),Rt(Ur(t,e),r)},o.flatten=ou,o.flattenDeep=function nf(t){return null!=t&&t.length?Rt(t,z):[]},o.flattenDepth=function rf(t,e){return null!=t&&t.length?Rt(t,e=e===f?1:$(e)):[]},o.flip=function Ol(t){return Le(t,512)},o.flow=yd,o.flowRight=Ad,o.fromPairs=function sf(t){for(var e=-1,r=null==t?0:t.length,s={};++e<r;){var u=t[e];s[u[0]]=u[1]}return s},o.functions=function Ap(t){return null==t?[]:Or(t,Et(t))},o.functionsIn=function Cp(t){return null==t?[]:Or(t,Zt(t))},o.groupBy=hl,o.initial=function uf(t){return null!=t&&t.length?he(t,0,-1):[]},o.intersection=of,o.intersectionBy=cf,o.intersectionWith=hf,o.invert=Tp,o.invertBy=Op,o.invokeMap=ll,o.iteratee=ss,o.keyBy=pl,o.keys=Et,o.keysIn=Zt,o.map=Ur,o.mapKeys=function bp(t,e){var r={};return e=H(e,3),Ae(t,function(s,u,c){Me(r,e(s,u,c),s)}),r},o.mapValues=function Rp(t,e){var r={};return e=H(e,3),Ae(t,function(s,u,c){Me(r,u,e(s,u,c))}),r},o.matches=function Cd(t){return _a(ce(t,1))},o.matchesProperty=function Pd(t,e){return Sa(t,ce(e,1))},o.memoize=Kr,o.merge=Ip,o.mergeWith=bu,o.method=Td,o.methodOf=Od,o.mixin=as,o.negate=zr,o.nthArg=function bd(t){return t=$(t),Z(function(e){return wa(e,t)})},o.omit=Mp,o.omitBy=function Lp(t,e){return Ru(t,zr(H(e)))},o.once=function El(t){return mu(2,t)},o.orderBy=function dl(t,e,r,s){return null==t?[]:(K(e)||(e=null==e?[]:[e]),K(r=s?f:r)||(r=null==r?[]:[r]),Da(t,e,r))},o.over=Rd,o.overArgs=bl,o.overEvery=Id,o.overSome=Md,o.partial=Qi,o.partialRight=Du,o.partition=gl,o.pick=Bp,o.pickBy=Ru,o.property=Fu,o.propertyOf=function Ld(t){return function(e){return null==t?f:fn(t,e)}},o.pull=df,o.pullAll=hu,o.pullAllBy=function gf(t,e,r){return t&&t.length&&e&&e.length?Ei(t,e,H(r,2)):t},o.pullAllWith=function mf(t,e,r){return t&&t.length&&e&&e.length?Ei(t,e,f,r):t},o.pullAt=vf,o.range=Bd,o.rangeRight=Nd,o.rearg=Rl,o.reject=function _l(t,e){return(K(t)?$e:fa)(t,zr(H(e,3)))},o.remove=function _f(t,e){var r=[];if(!t||!t.length)return r;var s=-1,u=[],c=t.length;for(e=H(e,3);++s<c;){var l=t[s];e(l,s,t)&&(r.push(l),u.push(s))}return ya(t,u),r},o.rest=function Il(t,e){if("function"!=typeof t)throw new ue(v);return Z(t,e=e===f?e:$(e))},o.reverse=Xi,o.sampleSize=function wl(t,e,r){return e=(r?Wt(t,e,r):e===f)?1:$(e),(K(t)?Uc:fh)(t,e)},o.set=function Hp(t,e,r){return null==t?t:Vn(t,e,r)},o.setWith=function Fp(t,e,r,s){return s="function"==typeof s?s:f,null==t?t:Vn(t,e,r,s)},o.shuffle=function Dl(t){return(K(t)?kc:ph)(t)},o.slice=function Sf(t,e,r){var s=null==t?0:t.length;return s?(r&&"number"!=typeof r&&Wt(t,e,r)?(e=0,r=s):(e=null==e?0:$(e),r=r===f?s:$(r)),he(t,e,r)):[]},o.sortBy=Al,o.sortedUniq=function Pf(t){return t&&t.length?Ca(t):[]},o.sortedUniqBy=function Tf(t,e){return t&&t.length?Ca(t,H(e,2)):[]},o.split=function ud(t,e,r){return r&&"number"!=typeof r&&Wt(t,e,r)&&(e=r=f),(r=r===f?At:r>>>0)?(t=et(t))&&("string"==typeof e||null!=e&&!ts(e))&&!(e=jt(e))&&_n(t)?Qe(_e(t),0,r):t.split(e,r):[]},o.spread=function Ml(t,e){if("function"!=typeof t)throw new ue(v);return e=null==e?0:Tt($(e),0),Z(function(r){var s=r[e],u=Qe(r,0,e);return s&&Ye(u,s),qt(t,this,u)})},o.tail=function Of(t){var e=null==t?0:t.length;return e?he(t,1,e):[]},o.take=function Ef(t,e,r){return t&&t.length?he(t,0,(e=r||e===f?1:$(e))<0?0:e):[]},o.takeRight=function bf(t,e,r){var s=null==t?0:t.length;return s?he(t,(e=s-(e=r||e===f?1:$(e)))<0?0:e,s):[]},o.takeRightWhile=function Rf(t,e){return t&&t.length?Rr(t,H(e,3),!1,!0):[]},o.takeWhile=function If(t,e){return t&&t.length?Rr(t,H(e,3)):[]},o.tap=function Zf(t,e){return e(t),t},o.throttle=function Ll(t,e,r){var s=!0,u=!0;if("function"!=typeof t)throw new ue(v);return gt(r)&&(s="leading"in r?!!r.leading:s,u="trailing"in r?!!r.trailing:u),wu(t,e,{leading:s,maxWait:e,trailing:u})},o.thru=Gr,o.toArray=Pu,o.toPairs=Iu,o.toPairsIn=Mu,o.toPath=function Ud(t){return K(t)?lt(t,Pe):te(t)?[t]:$t(iu(et(t)))},o.toPlainObject=Ou,o.transform=function Wp(t,e,r){var s=K(t),u=s||je(t)||Tn(t);if(e=H(e,4),null==r){var c=t&&t.constructor;r=u?s?new c:[]:gt(t)&&He(c)?yn(_r(t)):{}}return(u?ae:Ae)(t,function(l,p,m){return e(r,l,p,m)}),r},o.unary=function Bl(t){return gu(t,1)},o.union=Mf,o.unionBy=Lf,o.unionWith=Bf,o.uniq=function Nf(t){return t&&t.length?Je(t):[]},o.uniqBy=function Hf(t,e){return t&&t.length?Je(t,H(e,2)):[]},o.uniqWith=function Ff(t,e){return e="function"==typeof e?e:f,t&&t.length?Je(t,f,e):[]},o.unset=function Gp(t,e){return null==t||Mi(t,e)},o.unzip=Ji,o.unzipWith=fu,o.update=function Up(t,e,r){return null==t?t:Ta(t,e,Ni(r))},o.updateWith=function kp(t,e,r,s){return s="function"==typeof s?s:f,null==t?t:Ta(t,e,Ni(r),s)},o.values=On,o.valuesIn=function Kp(t){return null==t?[]:di(t,Zt(t))},o.without=Wf,o.words=Nu,o.wrap=function Nl(t,e){return Qi(Ni(e),t)},o.xor=Gf,o.xorBy=Uf,o.xorWith=kf,o.zip=Kf,o.zipObject=function zf(t,e){return Ea(t||[],e||[],zn)},o.zipObjectDeep=function $f(t,e){return Ea(t||[],e||[],Vn)},o.zipWith=Yf,o.entries=Iu,o.entriesIn=Mu,o.extend=Eu,o.extendWith=Zr,as(o,o),o.add=Kd,o.attempt=Hu,o.camelCase=Zp,o.capitalize=Lu,o.ceil=zd,o.clamp=function zp(t,e,r){return r===f&&(r=e,e=f),r!==f&&(r=(r=le(r))==r?r:0),e!==f&&(e=(e=le(e))==e?e:0),hn(le(t),e,r)},o.clone=function Fl(t){return ce(t,4)},o.cloneDeep=function Gl(t){return ce(t,5)},o.cloneDeepWith=function Ul(t,e){return ce(t,5,e="function"==typeof e?e:f)},o.cloneWith=function Wl(t,e){return ce(t,4,e="function"==typeof e?e:f)},o.conformsTo=function kl(t,e){return null==e||oa(t,e,Et(e))},o.deburr=Bu,o.defaultTo=function xd(t,e){return null==t||t!=t?e:t},o.divide=$d,o.endsWith=function Vp(t,e,r){t=et(t),e=jt(e);var s=t.length,u=r=r===f?s:hn($(r),0,s);return(r-=e.length)>=0&&t.slice(r,u)==e},o.eq=we,o.escape=function Xp(t){return(t=et(t))&&ls.test(t)?t.replace(Mt,Ho):t},o.escapeRegExp=function Jp(t){return(t=et(t))&&P.test(t)?t.replace(w,"\\$&"):t},o.every=function rl(t,e,r){var s=K(t)?Us:Yc;return r&&Wt(t,e,r)&&(e=f),s(t,H(e,3))},o.find=sl,o.findIndex=au,o.findKey=function _p(t,e){return ks(t,H(e,3),Ae)},o.findLast=al,o.findLastIndex=uu,o.findLastKey=function Sp(t,e){return ks(t,H(e,3),yi)},o.floor=Yd,o.forEach=pu,o.forEachRight=du,o.forIn=function wp(t,e){return null==t?t:xi(t,H(e,3),Zt)},o.forInRight=function Dp(t,e){return null==t?t:la(t,H(e,3),Zt)},o.forOwn=function xp(t,e){return t&&Ae(t,H(e,3))},o.forOwnRight=function yp(t,e){return t&&yi(t,H(e,3))},o.get=es,o.gt=Kl,o.gte=zl,o.has=function Pp(t,e){return null!=t&&Xa(t,e,Vc)},o.hasIn=ns,o.head=cu,o.identity=Vt,o.includes=function fl(t,e,r,s){t=Yt(t)?t:On(t),r=r&&!s?$(r):0;var u=t.length;return r<0&&(r=Tt(u+r,0)),Yr(t)?r<=u&&t.indexOf(e,r)>-1:!!u&&vn(t,e,r)>-1},o.indexOf=function af(t,e,r){var s=null==t?0:t.length;if(!s)return-1;var u=null==r?0:$(r);return u<0&&(u=Tt(s+u,0)),vn(t,e,u)},o.inRange=function $p(t,e,r){return e=Fe(e),r===f?(r=e,e=0):r=Fe(r),function Jc(t,e,r){return t>=Lt(e,r)&&t<Tt(e,r)}(t=le(t),e,r)},o.invoke=Ep,o.isArguments=dn,o.isArray=K,o.isArrayBuffer=$l,o.isArrayLike=Yt,o.isArrayLikeObject=St,o.isBoolean=function Yl(t){return!0===t||!1===t||_t(t)&&Ft(t)==ke},o.isBuffer=je,o.isDate=Zl,o.isElement=function Vl(t){return _t(t)&&1===t.nodeType&&!Qn(t)},o.isEmpty=function Xl(t){if(null==t)return!0;if(Yt(t)&&(K(t)||"string"==typeof t||"function"==typeof t.splice||je(t)||Tn(t)||dn(t)))return!t.length;var e=Bt(t);if(e==Ot||e==Jt)return!t.size;if(Jn(t))return!Ti(t).length;for(var r in t)if(nt.call(t,r))return!1;return!0},o.isEqual=function Jl(t,e){return Zn(t,e)},o.isEqualWith=function ql(t,e,r){var s=(r="function"==typeof r?r:f)?r(t,e):f;return s===f?Zn(t,e,f,r):!!s},o.isError=ji,o.isFinite=function Ql(t){return"number"==typeof t&&na(t)},o.isFunction=He,o.isInteger=xu,o.isLength=$r,o.isMap=yu,o.isMatch=function jl(t,e){return t===e||Pi(t,e,Ki(e))},o.isMatchWith=function tp(t,e,r){return r="function"==typeof r?r:f,Pi(t,e,Ki(e),r)},o.isNaN=function ep(t){return Au(t)&&t!=+t},o.isNative=function np(t){if(Fh(t))throw new k("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ga(t)},o.isNil=function ip(t){return null==t},o.isNull=function rp(t){return null===t},o.isNumber=Au,o.isObject=gt,o.isObjectLike=_t,o.isPlainObject=Qn,o.isRegExp=ts,o.isSafeInteger=function sp(t){return xu(t)&&t>=-zt&&t<=zt},o.isSet=Cu,o.isString=Yr,o.isSymbol=te,o.isTypedArray=Tn,o.isUndefined=function ap(t){return t===f},o.isWeakMap=function up(t){return _t(t)&&Bt(t)==sn},o.isWeakSet=function op(t){return _t(t)&&"[object WeakSet]"==Ft(t)},o.join=function ff(t,e){return null==t?"":ac.call(t,e)},o.kebabCase=qp,o.last=fe,o.lastIndexOf=function lf(t,e,r){var s=null==t?0:t.length;if(!s)return-1;var u=s;return r!==f&&(u=(u=$(r))<0?Tt(s+u,0):Lt(u,s-1)),e==e?function zo(d,x,S){for(var R=S+1;R--;)if(d[R]===x)return R;return R}(t,e,u):cr(t,Ks,u,!0)},o.lowerCase=Qp,o.lowerFirst=jp,o.lt=cp,o.lte=hp,o.max=function Zd(t){return t&&t.length?Tr(t,Vt,Ai):f},o.maxBy=function Vd(t,e){return t&&t.length?Tr(t,H(e,2),Ai):f},o.mean=function Xd(t){return zs(t,Vt)},o.meanBy=function Jd(t,e){return zs(t,H(e,2))},o.min=function qd(t){return t&&t.length?Tr(t,Vt,Oi):f},o.minBy=function Qd(t,e){return t&&t.length?Tr(t,H(e,2),Oi):f},o.stubArray=os,o.stubFalse=cs,o.stubObject=function Hd(){return{}},o.stubString=function Fd(){return""},o.stubTrue=function Wd(){return!0},o.multiply=jd,o.nth=function pf(t,e){return t&&t.length?wa(t,$(e)):f},o.noConflict=function Ed(){return bt._===this&&(bt._=tc),this},o.noop=us,o.now=kr,o.pad=function td(t,e,r){t=et(t);var s=(e=$(e))?Sn(t):0;if(!e||s>=e)return t;var u=(e-s)/2;return Br(xr(u),r)+t+Br(Dr(u),r)},o.padEnd=function ed(t,e,r){t=et(t);var s=(e=$(e))?Sn(t):0;return e&&s<e?t+Br(e-s,r):t},o.padStart=function nd(t,e,r){t=et(t);var s=(e=$(e))?Sn(t):0;return e&&s<e?Br(e-s,r)+t:t},o.parseInt=function rd(t,e,r){return r||null==e?e=0:e&&(e=+e),cc(et(t).replace(O,""),e||0)},o.random=function Yp(t,e,r){if(r&&"boolean"!=typeof r&&Wt(t,e,r)&&(e=r=f),r===f&&("boolean"==typeof e?(r=e,e=f):"boolean"==typeof t&&(r=t,t=f)),t===f&&e===f?(t=0,e=1):(t=Fe(t),e===f?(e=t,t=0):e=Fe(e)),t>e){var s=t;t=e,e=s}if(r||t%1||e%1){var u=ra();return Lt(t+u*(e-t+yo("1e-"+((u+"").length-1))),e)}return bi(t,e)},o.reduce=function ml(t,e,r){var s=K(t)?oi:$s,u=arguments.length<3;return s(t,H(e,4),r,u,Xe)},o.reduceRight=function vl(t,e,r){var s=K(t)?Oo:$s,u=arguments.length<3;return s(t,H(e,4),r,u,ha)},o.repeat=function id(t,e,r){return e=(r?Wt(t,e,r):e===f)?1:$(e),Ri(et(t),e)},o.replace=function sd(){var t=arguments,e=et(t[0]);return t.length<3?e:e.replace(t[1],t[2])},o.result=function Np(t,e,r){var s=-1,u=(e=qe(e,t)).length;for(u||(u=1,t=f);++s<u;){var c=null==t?f:t[Pe(e[s])];c===f&&(s=u,c=r),t=He(c)?c.call(t):c}return t},o.round=tg,o.runInContext=d,o.sample=function Sl(t){return(K(t)?aa:hh)(t)},o.size=function xl(t){if(null==t)return 0;if(Yt(t))return Yr(t)?Sn(t):t.length;var e=Bt(t);return e==Ot||e==Jt?t.size:Ti(t).length},o.snakeCase=ad,o.some=function yl(t,e,r){var s=K(t)?ci:dh;return r&&Wt(t,e,r)&&(e=f),s(t,H(e,3))},o.sortedIndex=function wf(t,e){return br(t,e)},o.sortedIndexBy=function Df(t,e,r){return Ii(t,e,H(r,2))},o.sortedIndexOf=function xf(t,e){var r=null==t?0:t.length;if(r){var s=br(t,e);if(s<r&&we(t[s],e))return s}return-1},o.sortedLastIndex=function yf(t,e){return br(t,e,!0)},o.sortedLastIndexBy=function Af(t,e,r){return Ii(t,e,H(r,2),!0)},o.sortedLastIndexOf=function Cf(t,e){if(null!=t&&t.length){var s=br(t,e,!0)-1;if(we(t[s],e))return s}return-1},o.startCase=od,o.startsWith=function cd(t,e,r){return t=et(t),r=null==r?0:hn($(r),0,t.length),e=jt(e),t.slice(r,r+e.length)==e},o.subtract=eg,o.sum=function ng(t){return t&&t.length?li(t,Vt):0},o.sumBy=function rg(t,e){return t&&t.length?li(t,H(e,2)):0},o.template=function hd(t,e,r){var s=o.templateSettings;r&&Wt(t,e,r)&&(e=f),t=et(t),e=Zr({},e,s,$a);var p,m,u=Zr({},e.imports,s.imports,$a),c=Et(u),l=di(u,c),y=0,A=e.interpolate||sr,C="__p += '",E=mi((e.escape||sr).source+"|"+A.source+"|"+(A===i?Uu:sr).source+"|"+(e.evaluate||sr).source+"|$","g"),M="//# sourceURL="+(nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_o+"]")+"\n";t.replace(E,function(W,J,Q,ee,Gt,ne){return Q||(Q=ee),C+=t.slice(y,ne).replace(Vu,Fo),J&&(p=!0,C+="' +\n__e("+J+") +\n'"),Gt&&(m=!0,C+="';\n"+Gt+";\n__p += '"),Q&&(C+="' +\n((__t = ("+Q+")) == null ? '' : __t) +\n'"),y=ne+W.length,W}),C+="';\n";var F=nt.call(e,"variable")&&e.variable;if(F){if(be.test(F))throw new k("Invalid `variable` option passed into `_.template`")}else C="with (obj) {\n"+C+"\n}\n";C=(m?C.replace(Nn,""):C).replace(jr,"$1").replace(hs,"$1;"),C="function("+(F||"obj")+") {\n"+(F?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(p?", __e = _.escape":"")+(m?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+C+"return __p\n}";var Y=Hu(function(){return j(c,M+"return "+C).apply(f,l)});if(Y.source=C,ji(Y))throw Y;return Y},o.times=function Gd(t,e){if((t=$(t))<1||t>zt)return[];var r=At,s=Lt(t,At);e=H(e),t-=At;for(var u=pi(s,e);++r<t;)e(r);return u},o.toFinite=Fe,o.toInteger=$,o.toLength=Tu,o.toLower=function fd(t){return et(t).toLowerCase()},o.toNumber=le,o.toSafeInteger=function fp(t){return t?hn($(t),-zt,zt):0===t?t:0},o.toString=et,o.toUpper=function ld(t){return et(t).toUpperCase()},o.trim=function pd(t,e,r){if((t=et(t))&&(r||e===f))return Ys(t);if(!t||!(e=jt(e)))return t;var s=_e(t),u=_e(e);return Qe(s,Zs(s,u),Vs(s,u)+1).join("")},o.trimEnd=function dd(t,e,r){if((t=et(t))&&(r||e===f))return t.slice(0,Js(t)+1);if(!t||!(e=jt(e)))return t;var s=_e(t);return Qe(s,0,Vs(s,_e(e))+1).join("")},o.trimStart=function gd(t,e,r){if((t=et(t))&&(r||e===f))return t.replace(O,"");if(!t||!(e=jt(e)))return t;var s=_e(t);return Qe(s,Zs(s,_e(e))).join("")},o.truncate=function md(t,e){var r=30,s="...";if(gt(e)){var u="separator"in e?e.separator:u;r="length"in e?$(e.length):r,s="omission"in e?jt(e.omission):s}var c=(t=et(t)).length;if(_n(t)){var l=_e(t);c=l.length}if(r>=c)return t;var p=r-Sn(s);if(p<1)return s;var m=l?Qe(l,0,p).join(""):t.slice(0,p);if(u===f)return m+s;if(l&&(p+=m.length-p),ts(u)){if(t.slice(p).search(u)){var y,A=m;for(u.global||(u=mi(u.source,et(ps.exec(u))+"g")),u.lastIndex=0;y=u.exec(A);)var C=y.index;m=m.slice(0,C===f?p:C)}}else if(t.indexOf(jt(u),p)!=p){var E=m.lastIndexOf(u);E>-1&&(m=m.slice(0,E))}return m+s},o.unescape=function vd(t){return(t=et(t))&&fs.test(t)?t.replace(ti,$o):t},o.uniqueId=function kd(t){var e=++Qo;return et(t)+e},o.upperCase=_d,o.upperFirst=rs,o.each=pu,o.eachRight=du,o.first=cu,as(o,function(){var t={};return Ae(o,function(e,r){nt.call(o.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),o.VERSION="4.17.21",ae(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){o[t].placeholder=o}),ae(["drop","take"],function(t,e){q.prototype[t]=function(r){r=r===f?1:Tt($(r),0);var s=this.__filtered__&&!e?new q(this):this.clone();return s.__filtered__?s.__takeCount__=Lt(r,s.__takeCount__):s.__views__.push({size:Lt(r,At),type:t+(s.__dir__<0?"Right":"")}),s},q.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),ae(["filter","map","takeWhile"],function(t,e){var r=e+1,s=1==r||3==r;q.prototype[t]=function(u){var c=this.clone();return c.__iteratees__.push({iteratee:H(u,3),type:r}),c.__filtered__=c.__filtered__||s,c}}),ae(["head","last"],function(t,e){var r="take"+(e?"Right":"");q.prototype[t]=function(){return this[r](1).value()[0]}}),ae(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");q.prototype[t]=function(){return this.__filtered__?new q(this):this[r](1)}}),q.prototype.compact=function(){return this.filter(Vt)},q.prototype.find=function(t){return this.filter(t).head()},q.prototype.findLast=function(t){return this.reverse().find(t)},q.prototype.invokeMap=Z(function(t,e){return"function"==typeof t?new q(this):this.map(function(r){return Yn(r,t,e)})}),q.prototype.reject=function(t){return this.filter(zr(H(t)))},q.prototype.slice=function(t,e){t=$(t);var r=this;return r.__filtered__&&(t>0||e<0)?new q(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==f&&(r=(e=$(e))<0?r.dropRight(-e):r.take(e-t)),r)},q.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},q.prototype.toArray=function(){return this.take(At)},Ae(q.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),s=/^(?:head|last)$/.test(e),u=o[s?"take"+("last"==e?"Right":""):e],c=s||/^find/.test(e);u&&(o.prototype[e]=function(){var l=this.__wrapped__,p=s?[1]:arguments,m=l instanceof q,y=p[0],A=m||K(l),C=function(J){var Q=u.apply(o,Ye([J],p));return s&&E?Q[0]:Q};A&&r&&"function"==typeof y&&1!=y.length&&(m=A=!1);var E=this.__chain__,F=c&&!E,Y=m&&!this.__actions__.length;if(!c&&A){l=Y?l:new q(this);var W=t.apply(l,p);return W.__actions__.push({func:Gr,args:[C],thisArg:f}),new oe(W,E)}return F&&Y?t.apply(this,p):(W=this.thru(C),F?s?W.value()[0]:W.value():W)})}),ae(["pop","push","shift","sort","splice","unshift"],function(t){var e=lr[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);o.prototype[t]=function(){var u=arguments;if(s&&!this.__chain__){var c=this.value();return e.apply(K(c)?c:[],u)}return this[r](function(l){return e.apply(K(l)?l:[],u)})}}),Ae(q.prototype,function(t,e){var r=o[e];if(r){var s=r.name+"";nt.call(xn,s)||(xn[s]=[]),xn[s].push({name:e,func:r})}}),xn[Mr(f,2).name]=[{name:"wrapper",func:f}],q.prototype.clone=function mc(){var t=new q(this.__wrapped__);return t.__actions__=$t(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=$t(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=$t(this.__views__),t},q.prototype.reverse=function vc(){if(this.__filtered__){var t=new q(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},q.prototype.value=function _c(){var t=this.__wrapped__.value(),e=this.__dir__,r=K(t),s=e<0,u=r?t.length:0,c=function bh(t,e,r){for(var s=-1,u=r.length;++s<u;){var c=r[s],l=c.size;switch(c.type){case"drop":t+=l;break;case"dropRight":e-=l;break;case"take":e=Lt(e,t+l);break;case"takeRight":t=Tt(t,e-l)}}return{start:t,end:e}}(0,u,this.__views__),l=c.start,p=c.end,m=p-l,y=s?p:l-1,A=this.__iteratees__,C=A.length,E=0,M=Lt(m,this.__takeCount__);if(!r||!s&&u==m&&M==m)return Oa(t,this.__actions__);var F=[];t:for(;m--&&E<M;){for(var Y=-1,W=t[y+=e];++Y<C;){var J=A[Y],ee=J.type,Gt=(0,J.iteratee)(W);if(2==ee)W=Gt;else if(!Gt){if(1==ee)continue t;break t}}F[E++]=W}return F},o.prototype.at=Vf,o.prototype.chain=function Xf(){return lu(this)},o.prototype.commit=function Jf(){return new oe(this.value(),this.__chain__)},o.prototype.next=function qf(){this.__values__===f&&(this.__values__=Pu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?f:this.__values__[this.__index__++]}},o.prototype.plant=function jf(t){for(var e,r=this;r instanceof Cr;){var s=su(r);s.__index__=0,s.__values__=f,e?u.__wrapped__=s:e=s;var u=s;r=r.__wrapped__}return u.__wrapped__=t,e},o.prototype.reverse=function tl(){var t=this.__wrapped__;if(t instanceof q){var e=t;return this.__actions__.length&&(e=new q(this)),(e=e.reverse()).__actions__.push({func:Gr,args:[Xi],thisArg:f}),new oe(e,this.__chain__)}return this.thru(Xi)},o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=function el(){return Oa(this.__wrapped__,this.__actions__)},o.prototype.first=o.prototype.head,Wn&&(o.prototype[Wn]=function Qf(){return this}),o}();bt._=fr,(tt=function(){return fr}.call(pe,Ut,pe,xe))!==f&&(xe.exports=tt)}.call(this)},530:(xe,pe,Ut)=>{"use strict";Ut.d(pe,{$K:()=>It,Ch:()=>Te,Gs:()=>nr,J2:()=>Qr,JG:()=>ve,JY:()=>Kt,Jh:()=>ut,KK:()=>Ke,NL:()=>an,Pr:()=>nn,W5:()=>Ue,Y4:()=>Nt,_g:()=>Ot,ac:()=>xt,bY:()=>Ee,bx:()=>Xt,gX:()=>U,lB:()=>sn,lm:()=>Mn,nU:()=>Nn,qP:()=>ot,sV:()=>jn,uP:()=>zt});var tt=Ut(376),f=function(D){return D[D.fresh=1]="fresh",D[D.brackish=2]="brackish",D[D.salt=3]="salt",D}(f||{});let mt=(()=>{class D{static#t=this.fresh=1e3;static#e=this.brackish=1020;static#n=this.salt=1030}return D})(),ht=(()=>{class D{static#t=this.standard=9.80665}return D})(),X=(()=>{class D{static#t=this.coefficient=1e5;static pascalToBar(i){return i/D.coefficient}static barToPascal(i){return i*D.coefficient}}return D})();class v{static#t=this.standard=1.01325;static#e=this.standardPascals=X.barToPascal(v.standard);static#n=this.gasConstant=8.31432;static#r=this.temperature=288.15;static#i=this.lapsRate=-.0065;static#s=this.molarMass=.0289644;static#a=this.exponent=ht.standard*v.molarMass/(v.gasConstant*v.lapsRate);static#u=this.invertedExponent=1/v.exponent;static pressure(n){return v.standardPascals*Math.pow(v.temperature/(v.temperature+v.lapsRate*n),v.exponent)}static altitude(n){if(n>=v.standardPascals)return 0;const a=Math.pow(n/v.standardPascals,v.invertedExponent);return(v.temperature/a-v.temperature)/v.lapsRate}}class T{constructor(n,i,a,h,g,w){this._n2HalfTime=n,this._n2A=i,this._n2B=a,this._heHalfTime=h,this._heA=g,this._heB=w}get n2HalfTime(){return this._n2HalfTime}get n2A(){return this._n2A}get n2B(){return this._n2B}get heHalfTime(){return this._heHalfTime}get heA(){return this._heA}get heB(){return this._heB}}class G{static#t=this.buhlmannZHL16C=[new T(5,1.1696,.5578,1.88,1.6189,.477),new T(8,1,.6514,3.02,1.383,.5747),new T(12.5,.8618,.7222,4.72,1.1919,.6527),new T(18.5,.7562,.7826,6.99,1.0458,.7223),new T(27,.62,.8125,10.21,.922,.7582),new T(38.3,.5043,.8434,14.48,.8205,.7957),new T(54.3,.441,.8693,20.53,.7305,.8279),new T(77,.4,.891,29.11,.6502,.8553),new T(109,.375,.9092,41.2,.595,.8757),new T(146,.35,.9222,55.19,.5545,.8903),new T(187,.3295,.9319,70.69,.5333,.8997),new T(239,.3065,.9403,90.34,.5189,.9073),new T(305,.2835,.9477,115.29,.5181,.9122),new T(390,.261,.9544,147.42,.5176,.9171),new T(498,.248,.9602,188.24,.5172,.9217),new T(635,.2327,.9653,240.03,.5119,.9267)]}class L{static#t=this.o2InAir=.209;static#e=this.nitroxInAir=1-L.o2InAir;static#n=this.minPpO2=.18;static#r=this.maxEnd=30;static partialPressure(n,i){return n*i}static mod(n,i){return n/i}static bestMix(n,i,a){const g=n/a.toBar(i);return g>1?1:g}static ead(n,i,a=L.o2InAir){const g=1-a;return L.end(i,1-n)/g}static end(n,i,a=0){return n*this.narcoticIndex(a,i)}static mnd(n,i,a=0){return n/this.narcoticIndex(a,i)}static ceiling(n,i){const h=L.minPpO2/n*i;return h<i?i:h}static narcoticIndex(n,i=0){return i+n}}class yt extends T{constructor(n,i){super(n.n2HalfTime,n.n2A,n.n2B,n.heHalfTime,n.heA,n.heB),this._pN2=0,this._pHe=0,this._pTotal=0,this._a=0,this._b=0;const a=this.pressureInLungs(i);this._pN2=L.partialPressure(a,L.nitroxInAir),this._pHe=0,this.updateTotal()}get pN2(){return this._pN2}get pHe(){return this._pHe}get pTotal(){return this._pTotal}get a(){return this._a}get b(){return this._b}static fromCurrent(n,i){const a=new yt(i,1);return a._pN2=n.pN2,a._pHe=n.pHe,a._a=n.a,a._b=n.b,a.updateTotal(),a}copy(){return yt.fromCurrent(this,this)}ceiling(n){return(this.pTotal-this.a*n)/(n/this.b+1-n)}load(n,i){this._pN2=this.loadGas(n,i.fN2,this.pN2,this.n2HalfTime),this._pHe=this.loadGas(n,i.fHe,this.pHe,this.heHalfTime);const a=this.pTotal;return this.updateTotal(),this._a=(this.n2A*this.pN2+this.heA*this.pHe)/this.pTotal,this._b=(this.n2B*this.pN2+this.heB*this.pHe)/this.pTotal,this.pTotal-a}loadGas(n,i,a,h){const g=n.speed*i,w=this.pressureInLungs(n.startPressure)*i;return this.schreinerEquation(a,w,n.duration,h,g)}pressureInLungs(n){return n-.0627}schreinerEquation(n,i,a,h,g){const P=.01155245301/h;return i+g*(a-1/P)-(i-n-g/P)*Math.exp(-P*a)}updateTotal(){this._pTotal=this.pN2+this.pHe}}class ft{constructor(n){this._compartments=n}get compartments(){return this._compartments}static createLoaded(n){if(n.length!==G.buhlmannZHL16C.length)throw new Error("Provided incompatible count of tissues");const i=tt(n).map((a,h)=>yt.fromCurrent(a,G.buhlmannZHL16C[h])).value();return new ft(i)}static create(n){const i=[];for(let a=0;a<G.buhlmannZHL16C.length;a++){const g=new yt(G.buhlmannZHL16C[a],n);i.push(g)}return new ft(i)}static createLoadedAt(n){const i=v.pressure(n),a=X.pascalToBar(i);return ft.create(a).finalState()}static copy(n){const i=[];for(let a=0;a<n.length;a++){const h=n[a].copy();i.push(h)}return i}restoreFrom(n){this._compartments=ft.copy(n)}finalState(){return ft.copy(this._compartments)}ceiling(n){let i=0;for(let a=0;a<this._compartments.length;a++){const h=this._compartments[a].ceiling(n);h>i&&(i=h)}return i}load(n,i){let a=0;for(let h=0;h<this._compartments.length;h++)a+=this._compartments[h].load(n,i);return a}}class kt{static validTissue(n){return n.pN2>0&&n.pHe>=0&&n.a>=0&&n.b>=0}static validCount(n){return!!n&&n.length===G.buhlmannZHL16C.length}static valid(n){return!!kt.validCount(n)&&tt(n).every(a=>kt.validTissue(a))}}class B{static fix(n){return Number(n.toFixed(10))}static roundTwoDecimals(n){return B.round(n,2)}static round(n,i=0){return B.adapt(Math.round,n,i)}static floorTwoDecimals(n){return B.floor(n,2)}static floor(n,i=0){return B.adapt(Math.floor,n,i)}static ceilTwoDecimals(n){return B.ceil(n,2)}static ceil(n,i=0){return B.adapt(Math.ceil,n,i)}static ceilDistance(n,i){return B.adaptDistance(Math.ceil,n,i)}static roundDistance(n,i){return B.adaptDistance(Math.round,n,i)}static floorDistance(n,i){return B.adaptDistance(Math.floor,n,i)}static adapt(n,i,a){const h=Math.pow(10,a);return n(i*h)/h}static adaptDistance(n,i,a){return n(i/a)*a}}class xt{constructor(n){this.options=n}create(){switch(this.options.salinity){case f.salt:return pt.forSaltWater(this.options.altitude);case f.brackish:return pt.forBrackishWater(this.options.altitude);default:return pt.forFreshWater(this.options.altitude)}}}class pt{constructor(n,i){this.density=n,this._gravity=ht.standard;const a=v.pressure(i);this._surfacePressure=X.pascalToBar(a)}get surfacePressure(){return this._surfacePressure}static forSaltWater(n=0){return new pt(mt.salt,n)}static forBrackishWater(n=0){return new pt(mt.brackish,n)}static forFreshWater(n=0){return new pt(mt.fresh,n)}static simple(){const n=new pt(mt.fresh,0);return n._surfacePressure=1,n._gravity=10,n}toBar(n){return X.pascalToBar(n*(this.density*this._gravity))+this._surfacePressure}fromBar(n){if(n<this._surfacePressure)throw new Error("Lower pressure than altitude isn`t convertible to depth.");const i=this.density*this._gravity;return X.barToPascal(n-this._surfacePressure)/i}}var de=function(D){return D[D.never=1]="never",D[D.auto=2]="auto",D[D.always=3]="always",D}(de||{});class N{static#t=this.altitude=0;static#e=this.saltWater=f.salt;static#n=this.roundStopsToMinutes=!1;static#r=this.gasSwitchDuration=2;static#i=this.problemSolvingDuration=1;static#s=this.lastStopDepth=3;static#a=this.lastStopDepthRecre=5;static#u=this.safetyStopRecre=de.auto;static#o=this.decoStopDistance=3;static#c=this.minimumAutoStopDepth=10;static#h=this.addSafetyStop=!0;static#f=this.maxEND=L.maxEnd;static#l=this.oxygenNarcotic=!0;static#p=this.ascentSpeed6m=3;static#d=this.ascentSpeed50percTo6m=3;static#g=this.ascentSpeed50perc=9;static#m=this.descentSpeed=18;static#v=this.gfLow=.4;static#_=this.gfHigh=.85;static#S=this.maxPpO2=1.4;static#w=this.maxDecoPpO2=1.6;static#D=this.airBreakOxygenDuration=20;static#x=this.airBreakBottomGasDuration=5;static setMediumConservatism(n){n.gfLow=N.gfLow,n.gfHigh=N.gfHigh}static useGeneralRecommended(n){n.safetyStop=N.safetyStopRecre,n.roundStopsToMinutes=N.roundStopsToMinutes,n.gasSwitchDuration=N.gasSwitchDuration,n.oxygenNarcotic=N.oxygenNarcotic}}class Ge{constructor(n=!1,i=N.airBreakOxygenDuration,a=N.airBreakBottomGasDuration){this.enabled=n,this.oxygenDuration=i,this.bottomGasDuration=a}loadFrom(n){this.enabled=n.enabled,this.oxygenDuration=n.oxygenDuration,this.bottomGasDuration=n.bottomGasDuration}}class Kt{constructor(n=N.gfLow,i=N.gfHigh,a=N.maxPpO2,h=N.maxDecoPpO2,g=N.saltWater){this.gfLow=n,this.gfHigh=i,this.maxPpO2=a,this.maxDecoPpO2=h,this.salinity=g,this.altitude=N.altitude,this.roundStopsToMinutes=N.roundStopsToMinutes,this.gasSwitchDuration=N.gasSwitchDuration,this.safetyStop=N.safetyStopRecre,this.lastStopDepth=N.lastStopDepth,this.decoStopDistance=N.decoStopDistance,this.minimumAutoStopDepth=N.minimumAutoStopDepth,this.maxEND=N.maxEND,this.oxygenNarcotic=!0,this.ascentSpeed6m=N.ascentSpeed6m,this.ascentSpeed50percTo6m=N.ascentSpeed50percTo6m,this.ascentSpeed50perc=N.ascentSpeed50perc,this.descentSpeed=N.descentSpeed,this.problemSolvingDuration=N.problemSolvingDuration,this._airBreaks=new Ge,this.gfLow=n||N.gfLow,this.gfHigh=i||N.gfHigh,this.maxPpO2=a||N.maxPpO2,this.maxDecoPpO2=h||N.maxDecoPpO2,this.salinity=g||N.saltWater}get airBreaks(){return this._airBreaks}loadFrom(n){this.gfLow=n.gfLow||this.gfLow,this.gfHigh=n.gfHigh||this.gfHigh,this.maxPpO2=n.maxPpO2||this.maxPpO2,this.maxDecoPpO2=n.maxDecoPpO2||this.maxDecoPpO2,this.oxygenNarcotic=n.oxygenNarcotic,this.salinity=n.salinity||this.salinity,this.altitude=n.altitude||0===n.altitude?n.altitude:this.altitude,this.roundStopsToMinutes=n.roundStopsToMinutes,this.gasSwitchDuration=n.gasSwitchDuration||this.gasSwitchDuration,this.problemSolvingDuration=n.problemSolvingDuration||this.problemSolvingDuration,this.lastStopDepth=n.lastStopDepth||this.lastStopDepth,this.decoStopDistance=n.decoStopDistance||this.decoStopDistance,this.minimumAutoStopDepth=n.minimumAutoStopDepth||this.minimumAutoStopDepth,this.safetyStop=n.safetyStop||this.safetyStop,this.maxEND=n.maxEND||this.maxEND,this.ascentSpeed6m=n.ascentSpeed6m||this.ascentSpeed6m,this.ascentSpeed50percTo6m=n.ascentSpeed50percTo6m||this.ascentSpeed50percTo6m,this.ascentSpeed50perc=n.ascentSpeed50perc||this.ascentSpeed50perc,this.descentSpeed=n.descentSpeed||this.descentSpeed,this.airBreaks.loadFrom(n.airBreaks)}}class ge{constructor(n,i){this.depthConverter=n,this.options=i}toDecoStop(n){const i=this.depthConverter.fromBar(n);return B.roundDistance(i,this.options.decoStopDistance)}nextStop(n){if(n<=this.options.lastStopDepth)return 0;const i=B.floorDistance(n,this.options.decoStopDistance);if(i!==n)return i;const a=n-this.options.decoStopDistance;return a<=this.options.lastStopDepth?this.options.lastStopDepth:a}addSafetyStop(n,i){return(this.options.safetyStop===de.always||this.options.safetyStop===de.auto&&i>this.options.minimumAutoStopDepth)&&n===this.options.lastStopDepth}}var it=function(D){return D[D.noAction=0]="noAction",D[D.error=1]="error",D[D.gasSwitch=2]="gasSwitch",D[D.noDecoEnd=3]="noDecoEnd",D[D.lowPpO2=4]="lowPpO2",D[D.highPpO2=5]="highPpO2",D[D.highAscentSpeed=6]="highAscentSpeed",D[D.highDescentSpeed=7]="highDescentSpeed",D[D.brokenCeiling=8]="brokenCeiling",D[D.maxEndExceeded=9]="maxEndExceeded",D[D.isobaricCounterDiffusion=10]="isobaricCounterDiffusion",D[D.highGasDensity=11]="highGasDensity",D[D.safetyStop=12]="safetyStop",D[D.minDepth=13]="minDepth",D[D.maxDepth=14]="maxDepth",D[D.missingAirBreak=15]="missingAirBreak",D}(it||{});class ut{constructor(n,i,a,h,g){this.timeStamp=n,this.depth=i,this.type=a,this.message=h,this.gas=g}static create(n,i,a,h){return new ut(i,a,n,"",h)}static createError(n){return new ut(0,0,it.error,n)}}class dt{static createError(n){return ut.createError(n)}static createSafetyStopStart(n,i){return ut.create(it.safetyStop,n,i)}static createNoDecoEnd(n,i){return ut.create(it.noDecoEnd,n,i)}static createGasSwitch(n,i,a){return ut.create(it.gasSwitch,n,i,a)}static createLowPpO2(n,i){return ut.create(it.lowPpO2,n,i)}static createHighPpO2(n,i){return ut.create(it.highPpO2,n,i)}static createHighAscentSpeed(n,i){return ut.create(it.highAscentSpeed,n,i)}static createHighDescentSpeed(n,i){return ut.create(it.highDescentSpeed,n,i)}static createBrokenCeiling(n,i){return ut.create(it.brokenCeiling,n,i)}static createMaxEndExceeded(n,i,a){return ut.create(it.maxEndExceeded,n,i,a)}static createIsobaricCounterDiffusion(n,i,a){return ut.create(it.isobaricCounterDiffusion,n,i,a)}static createHighDensity(n,i,a){return ut.create(it.highGasDensity,n,i,a)}static createShallowDepth(n){return ut.create(it.minDepth,0,n)}static createMaxDepth(n){return ut.create(it.maxDepth,0,n)}static createMissingAirBreak(n,i){return ut.create(it.missingAirBreak,n,i)}}class jn{constructor(){this.items=[]}add(n){this.items.push(n)}}class Vr{constructor(n,i){this.time=n,this.depth=i}get notAtSurface(){return this.depth>0}static isDecoDive(n){for(const i of n)if(i.notAtSurface)return!0;return!1}}class Ue{constructor(n,i,a,h){this.seg=n,this.ceil=i,this.tiss=a,this.err=h}get segments(){return this.seg}get ceilings(){return this.ceil}get tissues(){return this.tiss}get errors(){return this.err}static fromErrors(n,i){return new Ue(n,[],[],i)}static fromProfile(n,i,a){return new Ue(n,i,a,[])}}class Xr{static validate(n){const i=[];if(!n.hasBottomGas){const a=dt.createError("At least one bottom gas has to be defined.");return i.push(a),i}return i}}class tr{constructor(n,i){this.gases=n,this.depthConverter=pt.simple(),this.depthLevels=new ge(this.depthConverter,i)}bestGas(n){const i=this.depthConverter.toBar(n.currentDepth),a=this.depthConverter.toBar(n.maxEnd);let h=n.currentGas;return this.gases.all.forEach(g=>{const w=g.mod(n.maxDecoPpO2),P=this.depthLevels.toDecoStop(w),O=g.end(i,n.oxygenNarcotic);n.currentDepth<=P&&O<=a&&(!h||h.fO2<g.fO2)&&(h=g)}),h}airBreakGas(n,i){const a=this.depthConverter.toBar(n);return tt(this.gases.all).filter(g=>L.partialPressure(a,g.fO2)>=L.minPpO2).minBy(g=>g.fO2)||i}}class Te{constructor(){this.items=[]}get all(){return this.items.slice()}get hasBottomGas(){return this.items.length>=1}static fromTanks(n){const i=new Te;return n.forEach(a=>{i.add(a.gas)}),i}add(n){this.items.push(n)}isRegistered(n){return this.items.includes(n)}}class ot{constructor(n,i){if(this._fO2=n,this._fHe=i,this._contentCode=0,this.contentExceeds100percent())throw new Error("O2 + He can't exceed 100 %");this.updateContentCode()}get fN2(){return 1-this._fO2-this._fHe}get fO2(){return this._fO2}get fHe(){return this._fHe}get name(){return ot.nameFor(this.fO2,this.fHe)}get contentCode(){return this._contentCode}set fO2(n){this._fO2=n>1?1:n,this.contentExceeds100percent()&&(this._fHe=this.countRemaining(this._fO2)),this.updateContentCode()}set fHe(n){this._fHe=n>.99?.99:n,this.contentExceeds100percent()&&(this._fO2=this.countRemaining(this._fHe)),this.updateContentCode()}static init(n,i){ot.nameFor=n,ot.byName=i}copy(){return new ot(this._fO2,this._fHe)}mod(n){return L.mod(n,this._fO2)}end(n,i){return L.end(n,this.fN2,i?this._fO2:0)}mnd(n,i){return L.mnd(n,this.fN2,i?this._fO2:0)}ceiling(n){return L.ceiling(this._fO2,n)}compositionEquals(n){return!!n&&this._fO2===n._fO2&&this._fHe===n._fHe}assignStandardGas(n){const i=ot.byName(n);i&&(this.fO2=i.fO2,this.fHe=i.fHe)}contentExceeds100percent(){return this._fO2+this._fHe>1}countRemaining(n){return B.round(1-n,5)}updateContentCode(){this._contentCode=B.round(1e4*this._fO2*1e4)+B.round(1e4*this._fHe)}}class z{static#t=this.oxygen=new ot(1,0);static#e=this.ean50=new ot(.5,0);static#n=this.ean38=new ot(.38,0);static#r=this.ean36=new ot(.36,0);static#i=this.ean32=new ot(.32,0);static#s=this.trimix3525=new ot(.35,.25);static#a=this.trimix2525=new ot(.25,.25);static#u=this.air=new ot(L.o2InAir,0);static#o=this.trimix2135=new ot(.21,.35);static#c=this.trimix1845=new ot(.18,.45);static#h=this.trimix1555=new ot(.15,.55);static#f=this.trimix1260=new ot(.12,.6);static#l=this.trimix1070=new ot(.1,.7);static#p=this.airName="Air";static#d=this.oxygenName="Oxygen";static#g=this.namesRegEx=/[EAN](?<fO2>\d{2})|(?<fO2b>\d{2})\/(?<fHe>\d{2})/i;static#m=this.map=new Map([[z.airName,z.air],["EAN32",z.ean32],["EAN36",z.ean36],["EAN38",z.ean38],["EAN50",z.ean50],[z.oxygenName,z.oxygen],["Helitrox 35/25",z.trimix3525],["Helitrox 25/25",z.trimix2525],["Helitrox 21/35",z.trimix2135],["Trimix 18/45",z.trimix1845],["Trimix 15/55",z.trimix1555],["Trimix 12/60",z.trimix1260],["Trimix 10/70",z.trimix1070]]);static nitroxNames(){return z.allNames().slice(0,6)}static allNames(){return Array.from(z.map.keys())}static nameFor(n,i=0){const h=B.round(100*n),g=B.round(100*i);return h<=0?"":g<=0?h>=100?z.oxygenName:21===h?z.airName:"EAN"+h.toString():`${h>=21?"Helitrox":"Trimix"} ${h.toString()}/${g.toString()}`}static byName(n){const i=[...z.map.keys()],a=tt(i).filter(g=>g.toLowerCase()===n.toLowerCase()).first();if(a)return z.map.get(a)??null;const h=z.namesRegEx.exec(n);if(h){if(h[1]){const g=Number(h[1])/100;if(g>0)return new ot(g,0)}if(h[2]&&h[3]){const g=Number(h[2])/100,w=Number(h[3])/100;if(g>0&&w>0)return new ot(g,w)}}return null}}ot.init((D,n)=>z.nameFor(D,n),D=>z.byName(D));class zt{static haveReserve(n){for(let i=0;i<n.length;i++)if(!n[i].hasReserve)return!1;return!0}static resetConsumption(n){n.forEach(i=>{i.consumed=0,i.reserve=0})}static removeTank(n,i){const a=n.filter(h=>h!==i);return zt.renumberIds(a),a}static renumberIds(n){for(let i=0;i<n.length;i++)n[i].id=i+1}}class Xt{constructor(n,i,a){this.size=n,this.startPressure=i,this.id=0,this.consumed=0,this.reserve=0,this._gas=z.air.copy(),this.o2=a}get gas(){return this._gas}get o2(){return me.getO2(this.gas.fO2,this.gas.fHe)}get he(){return B.roundTwoDecimals(100*this.gas.fHe)}get n2(){return B.roundTwoDecimals(100-this.o2-this.he)}get volume(){return Xt.volume(this)}get reserveVolume(){return Xt.volume2(this.size,this.reserve)}get consumedVolume(){return Xt.volume2(this.size,this.consumed)}get name(){return this._gas.name}get endPressure(){const n=this.startPressure-this.consumed;return n>0?n:0}get percentsRemaining(){return this.endPressure/this.startPressure*100}get percentsReserve(){const n=this.reserve/this.startPressure*100;return n>100?100:n}get hasReserve(){return this.endPressure>=this.reserve}set o2(n){this._gas.fO2=me.setO2(n,this.gas.fHe)}set he(n){this.gas.fHe=n/100}static createDefault(){return new Xt(15,200,100*L.o2InAir)}static volume(n){return Xt.volume2(n.size,n.startPressure)}static volume2(n,i){return n*i}assignStandardGas(n){this.gas.assignStandardGas(n)}loadFrom(n){this.size=n.size,this.startPressure=n.startPressure,this.consumed=n.consumed,this.reserve=n.reserve,this.gas.fO2=n._gas.fO2,this.gas.fHe=n._gas.fHe}}class me{static#t=this.pinnedO2=21;static#e=this.o2InAirPercent=100*L.o2InAir;static getO2(n,i){const a=100*n;return this.isInAirRange(a,i)?me.pinnedO2:B.roundTwoDecimals(a)}static setO2(n,i){return this.isInAirRange(n,i)?L.o2InAir:n/100}static isInAirRange(n,i){return me.o2InAirPercent<=n&&n<=me.pinnedO2&&0===i}}class At{static speed(n,i){return At.speedByXChange(i.start,i.end,n.end-n.start)}static speedByXChange(n,i,a){return(i-n)/a}static yValueAt(n,i,a){return n+i*a}static xValueAtAbsolute(n,i,a){const h=this.speed(n,i);return n.start+At.xValueAt(i.start,h,a)}static xValueAt(n,i,a){return 0===i?0:(a-n)/i}}class En{static validate(n,i){const a=[];if(!n.any()){const h=dt.createError("There needs to be at least one segment at depth.");a.push(h)}return n.withAll(h=>{En.validateRegisteredGas(a,i,h)}),a}static validateRegisteredGas(n,i,a){if(!i.isRegistered(a.gas)){const g=dt.createError(`Segment ${a.startDepth}-${a.endDepth} has gas not registered in gases.`);n.push(g)}}}class Nt{constructor(n,i,a,h){this._startDepth=n,this._endDepth=i,this._duration=h,a instanceof Xt?(this._tank=a,this._gas=a.gas):this._gas=a}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}get duration(){return this._duration}get gas(){return this._gas}get tank(){return this._tank}get speed(){return Nt.speed(this.startDepth,this.endDepth,this.duration)}get averageDepth(){return(this.startDepth+this.endDepth)/2}set startDepth(n){this._startDepth=n}set endDepth(n){this._endDepth=n}set duration(n){this._duration=n}set tank(n){this._tank=n,n&&(this._gas=n.gas)}static from(n){const i=new Nt(n.startDepth,n.endDepth,n._gas,n.duration);return i.tank=n.tank,i}static speed(n,i,a){return At.speedByXChange(n,i,a)}static depthAt(n,i,a){return At.yValueAt(n,i,a)}static timeAt(n,i,a){return At.xValueAt(n,i,a)}contentEquals(n){return this.speed===n.speed&&this._gas.compositionEquals(n._gas)}depthAt(n){return Nt.depthAt(this.startDepth,this.speed,n)}mergeFrom(n){this.duration+=n.duration,this.endDepth=n.endDepth}}class It{constructor(){this.segments=[],this._maxDepth=0}get startAscentIndex(){return this.deepestPart().length}get startAscentTime(){const n=this.deepestPart();return It.duration(n)}get length(){return this.segments.length}get items(){return this.segments.slice()}get maxDepth(){return this._maxDepth}get currentDepth(){return this.any()?this.last().endDepth:0}get duration(){return It.duration(this.segments)}static from(n){return It.fromCollection(n.segments)}static fromCollection(n){const i=new It;return n.forEach(a=>{const h=Nt.from(a);i.segments.push(h),i.updateMaxDepth(h)}),i}static duration(n){let i=0;for(const a of n)i+=a.duration;return i}static averageDepth(n){if(n.length<=0)return 0;let i=0,a=0;return n.forEach(h=>{if(h.duration>0){const g=h.averageDepth*h.duration+a*i;a+=h.duration,i=g/a}}),i}add(n,i,a){const h=new Nt(this.currentDepth,n,i,a);return this.segments.push(h),this.updateMaxDepth(h),h}addFlat(n,i){return this.add(this.currentDepth,n,i)}mergeFlat(n=0){if(n<0)return this.items;const i=[];for(let a=this.segments.length-1;a>n;a--){const h=this.segments[a-1],g=this.segments[a];h.contentEquals(g)&&(h.mergeFrom(g),i.push(g))}return this.segments=this.segments.filter(a=>!i.includes(a)),this.items}remove(n){this.segments=this.segments.filter(i=>i!==n),this.fixStartDepths()}cutDown(n){this.segments=this.segments.slice(0,this.segments.length-n),this.fixStartDepths()}withAll(n){for(let i=0;i<this.segments.length;i++)n(this.segments[i])}any(){return 0!==this.segments.length}last(){return this.segments[this.segments.length-1]}copy(){return It.from(this)}fixStartDepths(){this.any()&&(this.segments[0].startDepth=0);for(let n=0;n<this.segments.length-1;n++){const a=this.segments[n+1];a.startDepth=this.segments[n].endDepth,this.updateMaxDepth(a)}}deepestPart(){for(let n=this.segments.length-1;n>=0;n--)if(this.segments[n].endDepth===this.maxDepth)return this.items.slice(0,n+1);return[]}updateMaxDepth(n){n.endDepth>this._maxDepth&&(this._maxDepth=n.endDepth)}}class U{static#t=this.oneSecond=1;static#e=this.oneMinute=60;static#n=this.oneHour=60*U.oneMinute;static#r=this.oneDay=24*U.oneHour;static#i=this.safetyStopDuration=3*U.oneMinute;static toSeconds(n){return n*U.oneMinute}static toMinutes(n){return n/U.oneMinute}static toHours(n){return n/U.oneHour}}let tn=(()=>{class D{static#t=this.minimalStep=1;constructor(){}search(i){if(i.maxValue<i.initialValue)throw Error("Max value cant be smaller than initial value");if(i.estimationStep>i.maxValue-i.initialValue)throw Error("Step cant be larger than range");const a=this.findInitialLimit(i);return this.searchInsideInterval(i,a)}searchInsideInterval(i,a){for(;a.right-a.left>D.minimalStep;){let h=a.left+(a.right-a.left)/2;h=Math.round(h),i.doWork(h),i.meetsCondition()?a.left=h:a.right=h}return a.left}findInitialLimit(i){let a=i.initialValue;for(i.doWork(a);i.meetsCondition()&&a<=i.maxValue;)a+=i.estimationStep,i.doWork(a);let h=a-i.estimationStep;return h=h<i.initialValue?i.initialValue:h,{left:h,right:a>i.maxValue?i.maxValue:a}}}return D})();class Jr{constructor(n,i,a){this.depthConverter=n,this.options=i,this.tissues=a,this.lowestCeiling=0,this.lowestCeiling=this.depthConverter.surfacePressure+1}ceiling(){let n=this.tolerated();return n<this.depthConverter.surfacePressure&&(n=this.depthConverter.surfacePressure),this.depthConverter.fromBar(n)}toleratedTissues(n,i,a,h){const g=this.tissues.compartments;let w=0;for(let P=0;P<g.length;P++){const O=g[P];let I=w;(n/O.b+O.a-n)*a+n<(i/O.b+O.a-i)*h+i&&(I=(-O.a*O.b*(a*i-h*n)-(1-O.b)*(a-h)*i*n+O.b*(i-n)*O.pTotal)/(-O.a*O.b*(a-h)+(1-O.b)*(h*i-a*n)+O.b*(i-n))),I>=w&&(w=I)}return w}tolerated(){const n=this.options.gfLow,i=this.options.gfHigh,a=this.depthConverter.surfacePressure,h=this.tissues.ceiling(n);return h>this.lowestCeiling&&(this.lowestCeiling=h),this.toleratedTissues(a,this.lowestCeiling,i,n)}}let ke=(()=>{class D{static#t=this.sixMeters=6;constructor(i){this.options=i,this.averageDepth=0}markAverageDepth(i){const a=i.deepestPart();this.averageDepth=It.averageDepth(a)}ascent(i){return i>D.sixMeters?i>this.averageDepth/2?this.options.ascentSpeed50perc:this.options.ascentSpeed50percTo6m:this.options.ascentSpeed6m}}return D})();class Oe{constructor(n,i,a,h,g){this.gases=n,this.segments=i,this.options=a,this.depthConverter=h,this.ceilings=[],this.runTime=0,this._oxygenStarted=0,this.tissues=ft.createLoaded(g),this.gradients=new Jr(h,a,this.tissues);const w=i.last();this._currentGas=w.gas,this.bestGasOptions={currentDepth:this.currentDepth,maxDecoPpO2:this.options.maxDecoPpO2,oxygenNarcotic:this.options.oxygenNarcotic,maxEnd:this.options.maxEND,currentGas:this.currentGas},this.speeds=new ke(this.options),this.levels=new ge(h,a),this.gasSource=new tr(n,a)}get currentGas(){return this._currentGas}get ascentSpeed(){return this.speeds.ascent(this.currentDepth)}get currentDepth(){return this.segments.currentDepth}get addSafetyStop(){return this.levels.addSafetyStop(this.currentDepth,this.segments.maxDepth)}get decoStopDuration(){return this.options.roundStopsToMinutes?U.oneMinute:U.oneSecond}get isAtSurface(){return 0===this.segments.last().endDepth}get shouldAddAirBreaks(){return this.isBreathingOxygen&&this.options.airBreaks.enabled}get runTimeOnOxygen(){return this.runTime-this._oxygenStarted}get isBreathingOxygen(){return this.currentGas.compositionEquals(z.oxygen)}set currentGas(n){n.compositionEquals(z.oxygen)&&!this.isBreathingOxygen&&(this._oxygenStarted=this.runTime),this._currentGas=n}markAverageDepth(){this.speeds.markAverageDepth(this.segments)}addCeiling(){const n=this.ceiling(),i=new Vr(this.runTime,n);this.ceilings.push(i)}ceiling(){return this.gradients.ceiling()}bestDecoGas(){return this.bestGasOptions.currentDepth=this.currentDepth,this.bestGasOptions.currentGas=this.currentGas,this.gasSource.bestGas(this.bestGasOptions)}createMemento(){return{runTime:this.runTime,oxygenStarted:this._oxygenStarted,tissues:ft.copy(this.tissues.compartments),ceilings:this.ceilings.length,segments:this.segments.length,lowestCeiling:this.gradients.lowestCeiling}}restore(n){this.tissues.restoreFrom(n.tissues),this.gradients.lowestCeiling=n.lowestCeiling,this.runTime=n.runTime,this._oxygenStarted=n.oxygenStarted,this.ceilings=this.ceilings.slice(0,n.ceilings),this.segments.cutDown(this.segments.length-n.segments)}nextStop(n){return this.levels.nextStop(n)}shouldSwitchTo(n){return n&&!this.currentGas.compositionEquals(n)}addAscentSegment(n,i){return this.segments.add(n,this.currentGas,i)}addGasSwitchSegment(){return this.addStopSegment(this.options.gasSwitchDuration*U.oneMinute)}addStopSegment(n){return this.segments.addFlat(this.currentGas,n)}airBreakGas(){return this.gasSource.airBreakGas(this.currentDepth,this.currentGas)}}class qr{constructor(n,i){this.context=n,this.remainingStopTime=i,this.maxOxygenTime=this.context.options.airBreaks.oxygenDuration*U.oneMinute,this.maxBottomGasTime=this.context.options.airBreaks.bottomGasDuration*U.oneMinute,this._initialStopDuration=Math.min(this.remainingStopTime,this.remainingOxygenTime)}get needsStop(){return this.remainingStopTime>0}get maxGasTime(){return this.context.isBreathingOxygen?this.maxOxygenTime:this.maxBottomGasTime}get stopDuration(){return this._initialStopDuration>0?this._initialStopDuration:Math.min(this.remainingStopTime,this.maxGasTime)}get remainingOxygenTime(){const n=this.maxOxygenTime-this.context.runTimeOnOxygen;return n>0?n:0}switchStopGas(){if(!(this._initialStopDuration>0)){if(this.context.isBreathingOxygen)return void(this.context.currentGas=this.context.airBreakGas());this.context.currentGas=this.context.bestDecoGas()}}subtractStopDuration(){if(this._initialStopDuration>0)return this.subtractRemainingStopTime(this._initialStopDuration),void(this._initialStopDuration=0);this.subtractRemainingStopTime(this.stopDuration)}subtractRemainingStopTime(n){this.remainingStopTime-=n}}const en=(D,n)=>D/U.toMinutes(n);class nn{constructor(n,i){this.current=n,this.surfaceInterval=i}}class er{constructor(n,i,a){this.previousTissues=n,this.altitude=i,this.surfaceInterval=a}}class Ot{constructor(n,i,a,h){this._segments=n,this._gases=i,this._options=a,this._surface=this.resolveSurfaceParameters(h)}get segments(){return this._segments}get gases(){return this._gases}get options(){return this._options}get surfaceInterval(){return new er(this._surface.current,this.options.altitude,this._surface.surfaceInterval)}static forSimpleDive(n,i,a,h){const g=new Te;g.add(i);const w=new It,P=en(n,a.descentSpeed);return w.add(n,i,P),new Ot(w,g,a,h)}static forMultilevelDive(n,i,a,h){return new Ot(n,i,a,h)}resolveSurfaceParameters(n){if(n&&kt.validCount(n?.current))return n;const i=ft.createLoadedAt(this.options.altitude);return new nn(i,Number.POSITIVE_INFINITY)}}class Ee{noDecoLimit({segments:n,gases:i,options:a,surfaceInterval:h}){const g=new xt(a).create(),w=this.applySurfaceInterval(h),P=new Oe(i,n,a,g,w);return this.swimNoDecoLimit(n,i,P)}decompression({segments:n,gases:i,options:a,surfaceInterval:h}){const g=new xt(a).create(),w=n.copy(),P=this.validate(n,i);if(P.length>0){const vt=w.mergeFlat(n.length);return Ue.fromErrors(vt,P)}const O=this.applySurfaceInterval(h),I=new Oe(i,w,a,g,O);this.swimPlan(I),I.markAverageDepth();let V=I.nextStop(I.currentDepth);for(;V>=0&&!I.isAtSurface;)this.tryGasSwitch(I),this.stayAtDecoStop(I,V),this.stayAtSafetyStop(I),this.ascentToNextStop(I,V),V=I.nextStop(V);const Ht=I.segments.mergeFlat(n.length);return Ue.fromProfile(Ht,I.ceilings,I.tissues.finalState())}applySurfaceInterval({previousTissues:n,altitude:i,surfaceInterval:a}){if(!kt.valid(n))throw Error("Provided tissues collection isn`t valid. It needs have valid items of 16 compartments ordered by halftime.");if(i<0)throw Error("Altitude needs to be positive number or 0.");if(a<0)throw Error("Surface interval needs to be positive number or 0.");if(a===Number.POSITIVE_INFINITY)return ft.createLoadedAt(i);const h=new It,g=h.addFlat(z.air,a),w=new Te;w.add(z.air);const P=new Kt(1,1,1.6,1.6,f.salt);P.altitude=i;const O=new xt(P).create(),I=new Oe(w,h,P,O,n);return this.swim(I,g),I.tissues.finalState()}tryGasSwitch(n){const i=n.bestDecoGas();if(n.shouldSwitchTo(i)){n.currentGas=i;const a=n.addGasSwitchSegment();this.swim(n,a)}}stayAtDecoStop(n,i){if(this.needsDecoStop(n,i)){const a=n.createMemento(),h={estimationStep:20*U.oneMinute,initialValue:0,maxValue:U.oneDay,doWork:O=>this.swimDecoStop(n,a,O),meetsCondition:()=>this.needsDecoStop(n,i)},w=(new tn).search(h)+U.oneSecond,P=B.ceilDistance(w,n.decoStopDuration);this.swimDecoStop(n,a,P)}}swimDecoStop(n,i,a){n.restore(i),this.stayAtStop(n,a)}stayAtSafetyStop(n){n.addSafetyStop&&this.stayAtStop(n,U.safetyStopDuration)}stayAtStop(n,i){n.shouldAddAirBreaks?this.swimOxygenStop(n,i):this.swimStopDuration(n,i)}swimOxygenStop(n,i){const a=new qr(n,i);for(;a.needsStop;)a.switchStopGas(),this.swimStopDuration(n,a.stopDuration),a.subtractStopDuration();n.currentGas=z.oxygen}swimStopDuration(n,i){const a=n.addStopSegment(i);this.swim(n,a)}needsDecoStop(n,i){if(i>=n.ceiling())return!1;const a=n.createMemento();this.ascentToNextStop(n,i);const h=i<n.ceiling();return n.restore(a),h}ascentToNextStop(n,i){const h=en(n.currentDepth-i,n.ascentSpeed),g=n.addAscentSegment(i,h);this.swim(n,g)}validate(n,i){const a=En.validate(n,i);if(a.length>0)return a;const h=Xr.validate(i);return h.length>0?h:[]}swimPlan(n){n.addCeiling(),n.segments.withAll(i=>{this.swim(n,i)})}swim(n,i){let a=i.startDepth;const h=U.oneSecond;for(let g=0;g<i.duration;g+=h){const w=Nt.depthAt(a,i.speed,h),P=new Nt(a,w,i.gas,h);this.swimPart(n,P),a=P.endDepth}}swimPart(n,i){const a=this.toLoadSegment(n.depthConverter,i);n.tissues.load(a,i.gas),n.runTime+=i.duration,n.addCeiling()}swimNoDecoLimit(n,i,a){if(this.validate(n,i).length>0)return 0;this.swimPlan(a);const g=this.currentNdl(a.ceilings);return g!==Number.POSITIVE_INFINITY?g:this.predictNoDecoLimit(n,a)}predictNoDecoLimit(n,i){const a=n.last(),h=a.endDepth,g=new Nt(h,h,a.gas,U.oneMinute),w=this.toLoadSegment(i.depthConverter,g);let P=1;for(;i.ceiling()<=0&&P>0;)P=i.tissues.load(w,a.gas),i.runTime+=U.oneMinute;return 0===P||0===h?Number.POSITIVE_INFINITY:this.floorNdl(i.runTime)}floorNdl(n){let i=U.toMinutes(n);return i=B.floor(i),i-1}currentNdl(n){for(let i=0;i<n.length;i+=U.oneMinute){const a=n[i];if(a.notAtSurface)return this.floorNdl(a.time)}return Number.POSITIVE_INFINITY}toLoadSegment(n,i){const a=n.toBar(i.speed)-n.surfacePressure;return{startPressure:n.toBar(i.startDepth),duration:i.duration,speed:a}}}class Ke{static createPlan(n,i,a,h){const g=new It,w=Ke.descentDuration(n,h);g.add(n,a,w);let P=U.toSeconds(i)-w;return P=P<0?0:P,g.addFlat(a,P),g}static descentDuration(n,i){let a=n/i.descentSpeed;return a=B.ceil(a,1),a=U.toSeconds(a),B.ceil(a)}static emergencyAscent(n,i,a){const g=It.fromCollection(n).deepestPart(),w=g.length;Ke.addSolvingSegment(g,i.problemSolvingDuration),Ke.addUserDefinedAscent(g,n,w);const P=It.fromCollection(g),O=Te.fromTanks(a),I=new Ee,V=Ot.forMultilevelDive(P,O,i),vt=I.decompression(V).segments;return vt.slice(w,vt.length)}static addSolvingSegment(n,i){if(0===n.length)return;const h=n[n.length-1],g=h.endDepth,w=new Nt(g,g,h.gas,i*U.oneMinute);n.push(w)}static addUserDefinedAscent(n,i,a){for(let h=a;h<i.length;h++){const g=i[h];if(!g.tank)return;n.push(g)}}}class re{constructor(){this.remaining=new Map}get(n){return this.remaining.get(n)||0}set(n,i){this.remaining.set(n,i>0?i:0)}}let nr=(()=>{class D{static#t=this.defaultPrimaryReserve=30;static#e=this.defaultStageReserve=20;constructor(i){this.depthConverter=i}static calculateDecompression(i,a,h){const g=Te.fromTanks(a),w=new Ee,P=i.copy(),O=Ot.forMultilevelDive(P,g,h);return w.decompression(O)}consumeFromTanks(i,a,h,g){if(i.length<2)throw new Error("Profile needs to contain at least 2 segments.");const w=Ke.emergencyAscent(i,a,h);this.consumeFromTanks2(i,w,h,g)}consumeFromTanks2(i,a,h,g){if(i.length<2)throw new Error("Profile needs to contain at least 2 segments.");zt.resetConsumption(h),this.updateReserve(a,h,g);const w=I=>I.reserve,P=g.diver.rmv;let O=this.toBeConsumedYet(i,P,new re,I=>!!I.tank);O=this.consumeByTanks(i,O,P,w),O=this.consumeByTanksRemaining(i,O,()=>0),O=this.toBeConsumedYet(i,P,O,I=>!I.tank),O=this.consumeByGases(h,O,w),this.consumeByGases(h,O,()=>0),this.roundTanksConsumedToBars(h)}calculateMaxBottomTime(i,a,h,g){const w=this.createTestProfile(i),P=w.last(),O={estimationStep:40*U.oneMinute,initialValue:0,maxValue:U.oneDay,doWork:vt=>{P.duration=vt,this.consumeFromProfile(w,a,h,g)},meetsCondition:()=>zt.haveReserve(a)},V=(new tn).search(O);if(0===V)return 0;const Ht=U.toMinutes(i.duration+V);return B.floor(Ht)}consumeFromProfile(i,a,h,g){const w=D.calculateDecompression(i,a,g);this.consumeFromTanks(w.segments,g,a,h)}createTestProfile(i){const a=i.copy(),h=i.last();return a.addFlat(h.gas,0),a}updateReserve(i,a,h){const g=this.toBeConsumedYet(i,h.diver.teamStressRmv,new re,()=>!0);for(let w=0;w<=a.length-1;w++){const P=a[w],O=P.gas.contentCode,I=g.get(O);this.updateTankReserve(P,w,h,I),g.set(O,I-P.reserve*P.size)}}updateTankReserve(i,a,h,g){const w=B.ceil(g/i.size);i.reserve=this.ensureMinimalReserve(w>i.startPressure?i.startPressure:w,a,h)}ensureMinimalReserve(i,a,h){const g=0===a?h.primaryTankReserve:h.stageTankReserve;return i<g?g:i}consumeByGases(i,a,h){for(let g=i.length-1;g>=0;g--){const w=i[g],P=w.gas.contentCode;let O=a.get(P),I=this.consumeFromTank(w,O,h);I=I<0?0:I,O-=I,a.set(P,O)}return a}consumeByTanks(i,a,h,g){const w=U.toMinutes(h);return this.consumeBySegmentTank(i,a,g,P=>this.consumedBySegment(P,w))}consumeByTanksRemaining(i,a,h){return this.consumeBySegmentTank(i,a,h,(g,w)=>w)}consumeBySegmentTank(i,a,h,g){return i.forEach(w=>{if(w.tank){const P=w.gas.contentCode;let O=a.get(P);const I=g(w,O);let V=this.consumeFromTank(w.tank,I,h);V=V<0?0:V,O-=V,a.set(P,O)}}),a}consumeFromTank(i,a,h){let g=i.endPressure-h(i);g=g>0?g:0;const w=g*i.size,P=a>w?w:a;return i.consumed+=P/i.size,P}toBeConsumedYet(i,a,h,g){const w=U.toMinutes(a);for(let P=0;P<i.length;P++){const O=i[P];if(g(O)){const V=O.gas.contentCode,Ht=this.consumedBySegment(O,w);let vt=h.get(V);vt+=Ht,h.set(V,vt)}}return h}consumedBySegment(i,a){const h=this.depthConverter.toBar(i.averageDepth);return B.roundTwoDecimals(i.duration)*h*a}roundTanksConsumedToBars(i){i.forEach(a=>a.consumed=B.ceil(a.consumed))}}return D})();class Qr{constructor(n){this.depthConverter=n,this.minimumPpO2=.5}calculateForProfile(n){let i=0;return n.forEach(a=>{const g=this.calculate(a.gas.fO2,a.startDepth,a.endDepth,a.duration);i+=g}),i}calculate(n,i,a,h){const P=n*this.depthConverter.toBar((i+a)/2);if(P<=this.minimumPpO2)return 0;const O=this.exponentByPpO2(P);return h*Math.exp(O)*100}exponentByPpO2(n){return n<=1.5?1.93873*n-11.7853:9.80829*n-23.6349}}let ie=(()=>{class D{static#t=this.imperialTankSize=124.1;static#e=this.imperialTankWorkPressure=3442;static#n=this.imperialStageSize=80.1;static#r=this.imperialStageWorkPressure=3e3;static#i=this.mertricTankSize=15;static#s=this.metricStageSize=11.1}return D})();class Jt{get available(){return[this.primary,this.stage,{name:"2xLP85",size:165,workingPressure:2640},{name:"S40",size:41.3,workingPressure:3e3},{name:"LP85",size:82.5,workingPressure:2640},{name:"HP80",size:84.4,workingPressure:3442},{name:"HP100",size:106.7,workingPressure:3442}]}get primary(){return{name:"HP117",size:ie.imperialTankSize,workingPressure:ie.imperialTankWorkPressure}}get stage(){return{name:"S80",size:ie.imperialStageSize,workingPressure:ie.imperialStageWorkPressure}}}class Ct{static#t=this.lastStopDepth=15;static#e=this.depthDistance=10;static#n=this.descentSpeed=6*Ct.depthDistance;static#r=this.recreSpeed=3*Ct.depthDistance;static#i=this.maxEnd=10*Ct.depthDistance;get tanks(){return new Jt}get lastSpeedLevel(){return 20}get autoStopLevel(){return 33}get stopsDistance(){return Ct.depthDistance}get recreationalOptions(){return{ascentSpeed50perc:Ct.recreSpeed,ascentSpeed50percTo6m:Ct.recreSpeed,ascentSpeed6m:Ct.recreSpeed,descentSpeed:Ct.descentSpeed,lastStopDepth:Ct.lastStopDepth,maxEND:Ct.maxEnd}}get recommendedOptions(){return{ascentSpeed50perc:Ct.recreSpeed,ascentSpeed50percTo6m:2*Ct.depthDistance,ascentSpeed6m:Ct.depthDistance,descentSpeed:Ct.descentSpeed,lastStopDepth:Ct.depthDistance,maxEND:Ct.maxEnd}}}let sn=(()=>{class D{static#t=this.defaultSac=20;constructor(i=D.defaultSac,a){this.rmv=i,this.stressRmv=a||1.5*i}get teamStressRmv(){return 2*this.stressRmv}static gasSac(i,a){return i/a}gasSac(i){return D.gasSac(this.rmv,i.size)}loadFrom(i){this.rmv=i.rmv,this.stressRmv=i.stressRmv}}return D})();class ve{constructor(n,i,a){this.gas=n,this.depth=i,this.density=a}static createDefault(){return new ve(z.air,0,0)}applyHigher(n,i,a){a>this.density&&(this.gas=n,this.density=a,this.depth=i)}}let gn=(()=>{class D{constructor(){this.helium=.179,this.nitrogen=1.251,this.oxygen=1.428}static#t=this.recommendedMaximum=5.7;forGas(i){return this.forContent(i.fO2,i.fHe)}forContent(i,a){return this.nitrogen*(1-i-a)+this.oxygen*i+this.helium*a}}return D})();class an{constructor(n){this.depthConverter=n,this.density=new gn}forProfile(n){const i=ve.createDefault();return n.forEach(a=>{const h=a.gas,g=this.density.forGas(h);this.applyHigher(i,h,a.startDepth,g),this.applyHigher(i,h,a.endDepth,g)}),i}atDepth(n,i){const a=this.density.forGas(n);return this.fromAtaDensity(a,i)}applyHigher(n,i,a,h){const g=this.fromAtaDensity(h,a);n.applyHigher(i,a,g)}fromAtaDensity(n,i){return n*this.depthConverter.toBar(i)}}let Mn=(()=>{class D{static#t=this.dailyLimit=300;constructor(i){this.depthConverter=i,this.minPressure=.5}calculateForProfile(i){let a=0;return i.forEach(h=>{const w=this.calculate(h.duration,h.gas.fO2,h.startDepth,h.endDepth);a+=w}),a}calculate(i,a,h,g){let w=U.toMinutes(i),I=this.depthConverter.toBar(h)*a,V=this.depthConverter.toBar(g)*a;if(I<=this.minPressure&&V<=this.minPressure)return 0;I<=this.minPressure?(w=w*(V-this.minPressure)/(V-I),I=.501):V<=this.minPressure&&(w=w*(I-this.minPressure)/(I-V),V=.501);const Ht=I+V-1;return Math.pow(Ht,5/6)*(1-5*Math.pow(V-I,2)/216/Math.pow(Ht,2))*w}}return D})();class Ln{constructor(n,i,a){this.startDepth=n,this.endDepth=i,this.duration=a}get minDepth(){return Math.min(this.startDepth,this.endDepth)}get maxDepth(){return Math.max(this.startDepth,this.endDepth)}get isDescent(){return this.startDepth<this.endDepth}get isStop(){return this.startDepth===this.endDepth}get isAscent(){return this.startDepth>this.endDepth}timeAt(n){const i=Nt.speed(this.startDepth,this.endDepth,this.duration),a=Nt.timeAt(this.startDepth,i,n);return B.round(a)}}class Bn{constructor(n){this.simpleDepths=pt.simple(),this.events=new jn,this.elapsed=0,this.index=0,this.fixedMnd=!0,this.profile=n.profile,this.options=n.profileOptions,this.startAscentIndex=n.startAscentIndex,this.maxDensity=n.maxDensity,this.exactDepths=new xt(this.options).create(),this.levels=new ge(this.exactDepths,this.options),this.densityAtDepth=new an(this.exactDepths),this.speeds=new ke(this.options);const i=It.fromCollection(this.profile);this._maxDepth=i.maxDepth,this._totalDuration=i.duration,this.speeds.markAverageDepth(i),this._mndBars=this.simpleDepths.toBar(this.options.maxEND)}get maxDepth(){return this._maxDepth}get totalDuration(){return this._totalDuration}get previous(){return this.index>0?this.profile[this.index-1]:null}get isBeforeDecoAscent(){return this.index<this.startAscentIndex}get maxPpo(){return this.isBeforeDecoAscent?this.options.maxPpO2:this.options.maxDecoPpO2}get current(){return this.profile[this.index]}get switchingGas(){return!!this.previous&&!this.current.gas.compositionEquals(this.previous.gas)}get switchingTank(){return!!this.previous&&!!this.previous.tank&&!!this.current.tank&&this.previous.tank!==this.current.tank}get brokenOxygenDuration(){return this.current.gas.compositionEquals(z.oxygen)&&this.current.duration>20*U.oneMinute}get maxMnd(){return this._mndBars}get currentEndTime(){return this.elapsed+this.current.duration}get atSafetyStop(){return this.index===this.profile.length-2&&this.levels.addSafetyStop(this.current.startDepth,this.maxDepth)}gasEnd(n){return this.current.gas.end(n,this.options.oxygenNarcotic)}addElapsed(){this.elapsed=this.currentEndTime}}class Nn{static fromProfile(n){const i=new Bn(n),a=new jr(i.events,i.current);for(i.index=0;i.index<n.profile.length;i.index++){const h=this.toPressureSegment(i.current,i.simpleDepths);this.addHighPpO2(i,h),this.addLowPpO2(i,h),this.addGasSwitch(i),this.addUserTankSwitch(i),this.addHighDescentSpeed(i),this.addHighAscentSpeed(i),this.addIsobaricCounterDiffusion(i),this.addMndExceeded(i,h),this.addDensityExceeded(i),this.addSafetyStop(i),this.addMissingAirBreak(i,h),a.assignSegment(i.current),Nn.addBrokenCeiling(a,n.ceilings),i.addElapsed()}return this.addShallowDepth(i),this.addMaximumDepth(i),i.events}static addHighAscentSpeed(n){const i=n.current;let a=U.toSeconds(i.speed);if(a=B.roundTwoDecimals(a),-a>n.speeds.ascent(i.startDepth)){const h=dt.createHighAscentSpeed(n.elapsed,i.startDepth);n.events.add(h)}}static addHighDescentSpeed(n){const i=n.current;if(U.toSeconds(i.speed)>n.options.descentSpeed){const h=dt.createHighDescentSpeed(n.elapsed,i.startDepth);n.events.add(h)}}static addGasSwitch(n){if(n.switchingGas){const i=n.current,a=dt.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(a)}}static addUserTankSwitch(n){if(n.switchingTank){const i=n.current,a=dt.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(a)}}static toPressureSegment(n,i){const a=i.toBar(n.startDepth),h=i.toBar(n.endDepth);return new Ln(a,h,n.duration)}static addHighPpO2(n,i){if(i.isDescent||n.isBeforeDecoAscent&&n.switchingGas){const a=n.current.gas.mod(n.maxPpo);if(i.maxDepth>a){let h=i.startDepth,g=n.elapsed;i.startDepth<a&&(h=a,g+=i.timeAt(h));const w=n.simpleDepths.fromBar(h),P=dt.createHighPpO2(g,w);n.events.add(P)}}}static addLowPpO2(n,i){const a=n.current,h=a.gas.ceiling(n.simpleDepths.surfacePressure);if(i.minDepth<h&&n.switchingGas||i.startDepth>h&&h>i.endDepth&&i.isAscent||0===a.startDepth&&i.startDepth<h&&i.isDescent){let w=i.startDepth,P=n.elapsed;i.startDepth>h&&(w=h,P+=i.timeAt(w));const O=n.simpleDepths.fromBar(w),I=dt.createLowPpO2(P,O);n.events.add(I)}}static addBrokenCeiling(n,i){for(;n.lastCeilingIndex<n.currentSegmentEndTime&&n.lastCeilingIndex<i.length-1;){const a=i[n.lastCeilingIndex];n.lastCeilingIndex++,this.addNdlEnd(n,a);const h=n.belowCeiling(a);if(!h&&n.fixedBrokenCeiling){const g=dt.createBrokenCeiling(a.time,a.depth);n.events.add(g),n.fixedBrokenCeiling=!1;break}if(h&&!n.fixedBrokenCeiling&&(n.fixedBrokenCeiling=!0),a.time>n.currentSegmentEndTime)break}}static addNdlEnd(n,i){if(!n.ndlCeilingMarked&&i.depth>0){n.ndlCeilingMarked=!0;const h=n.current.depthAt(i.time-n.currentSegmentStartTime),g=dt.createNoDecoEnd(i.time,h);n.events.add(g)}}static addIsobaricCounterDiffusion(n){const i=n.current,a=n.previous;if(n.switchingGas&&a&&a.gas.fHe>0&&5*(i.gas.fN2-a.gas.fN2)>-(i.gas.fHe-a.gas.fHe)){const w=dt.createIsobaricCounterDiffusion(n.elapsed,i.startDepth,i.gas);n.events.add(w)}}static addMndExceeded(n,i){const a=n.current,h=n.gasEnd(i.startDepth),g=n.gasEnd(i.endDepth);if(n.maxMnd<h&&n.fixedMnd||n.maxMnd<g&&n.fixedMnd)if(i.startDepth>n.maxMnd)this.addMndEvent(n,n.elapsed,a.startDepth);else{const O=At.xValueAtAbsolute({start:n.elapsed,end:n.elapsed+a.duration},{start:i.startDepth,end:i.endDepth},n.maxMnd),I=a.depthAt(O-n.elapsed);this.addMndEvent(n,O,I)}n.fixedMnd=g<=n.maxMnd}static addMndEvent(n,i,a){const g=dt.createMaxEndExceeded(i,a,n.current.gas);n.events.add(g),n.fixedMnd=!0}static addDensityExceeded(n){const i=n.current,a=i.gas,g=i.endDepth,w=i.endDepth>i.startDepth,P=n.switchingGas,O=n.densityAtDepth.atDepth(a,i.startDepth),I=n.densityAtDepth.atDepth(a,g);if(P&&O>n.maxDensity||w&&I>n.maxDensity)if(i.startDepth>i.endDepth){const V=dt.createHighDensity(n.elapsed,i.startDepth,i.gas);n.events.add(V)}else{const vt=At.xValueAtAbsolute({start:n.elapsed,end:n.elapsed+i.duration},{start:O,end:I},n.maxDensity),ye=i.depthAt(vt-n.elapsed),be=dt.createHighDensity(vt,ye,i.gas);n.events.add(be)}}static addSafetyStop(n){const i=n.current;if(n.atSafetyStop&&i.duration>=U.safetyStopDuration){const h=dt.createSafetyStopStart(n.elapsed+i.duration-U.safetyStopDuration,i.endDepth);n.events.add(h)}}static addShallowDepth(n){if(n.maxDepth<9&&n.totalDuration>5*U.oneHour){const i=dt.createShallowDepth(n.maxDepth);n.events.add(i)}}static addMaximumDepth(n){if(n.maxDepth>120){const i=dt.createMaxDepth(n.maxDepth);n.events.add(i)}}static addMissingAirBreak(n,i){if(n.brokenOxygenDuration&&i.isStop){const h=dt.createMissingAirBreak(n.elapsed+n.options.airBreaks.oxygenDuration,n.current.startDepth);n.events.add(h)}}}class jr{constructor(n,i){this.events=n,this.lastCeilingIndex=0,this.currentSegmentStartTime=0,this.currentSegmentEndTime=0,this.fixedBrokenCeiling=!0,this.ndlCeilingMarked=!1,this._current=i}get current(){return this._current}assignSegment(n){this.currentSegmentStartTime=this.currentSegmentEndTime,this.currentSegmentEndTime=this.currentSegmentStartTime+n.duration,this._current=n}belowCeiling(n){return this._current.depthAt(n.time-this.currentSegmentStartTime)>=n.depth}}class Mt{static#t=this.psiRate=14.503773773022;static#e=this.cftRate=28.316846592;static#n=this.lbRate=2.20462262185;static#r=this.footRate=.3048;static#i=this.poundRate=.00220462262;static#s=this.lbPerCuftRate=Mt.poundRate*Mt.cftRate;get name(){return"Imperial"}get lengthShortcut(){return"ft"}get pressureShortcut(){return"psi"}get volumeShortcut(){return"cuft"}get weightShortcut(){return"lb"}get altitudeShortcut(){return"ft.a.s.l"}get densityShortcut(){return"lb/cuft"}toMeters(n){return n*Mt.footRate}fromMeters(n){return n/Mt.footRate}toBar(n){return n/Mt.psiRate}fromBar(n){return n*Mt.psiRate}toLiter(n){return n*Mt.cftRate}fromLiter(n){return n/Mt.cftRate}fromTankLiters(n,i){return this.fromLiter(n)*i}toTankLiters(n,i){return this.toLiter(n)/i}fromGramPerLiter(n){return n*Mt.lbPerCuftRate}toGramPerLiter(n){return n/Mt.lbPerCuftRate}fromKilogram(n){return n*Mt.lbRate}toKilogram(n){return n/Mt.lbRate}}}}]);