(self.webpackChunkplanner=self.webpackChunkplanner||[]).push([[540],{124:(we,de,Ut)=>{"use strict";Ut.d(de,{G:()=>dt});var et=Ut(940),f=Ut.n(et),pt=Ut(944);class dt{static toTanks(S){const I=[];return S.forEach(T=>{const G=new pt.e_(T.size,T.startPressure,0);G.id=T.id,G.gas.fO2=T.gas.fO2,G.gas.fHe=T.gas.fHe,I.push(G)}),pt.If.renumberIds(I),I}static fromTanks(S){const I=[];return S.forEach(T=>{const G=T.tank,L={id:G.id,size:G.size,workPressure:T.workingPressureBars,startPressure:G.startPressure,gas:dt.fromGas(G.gas)};I.push(L)}),I}static toConsumed(S){const I=[];for(let T=0;T<S.length;T++){const G=S[T];I.push({id:G.id,consumed:G.consumed,reserve:G.reserve})}return I}static toSegments(S,I){const T=[];for(let G=0;G<S.length;G++){const L=S[G],At=dt.toGas(L.gas),wt=new pt.GC(L.startDepth,L.endDepth,At,L.duration);L.tankId>0&&L.tankId<=I.length&&(wt.tank=I[L.tankId-1]),T.push(wt)}return T}static fromSegments(S){const I=[];return S.forEach(T=>{const L={startDepth:T.startDepth,endDepth:T.endDepth,duration:T.duration,tankId:T.tank?T.tank.id:0,gas:dt.fromGas(T.gas)};I.push(L)}),I}static toProfile(S,I){const T=dt.toSegments(S.segments,I);if(S.errors.length>0){const L=dt.toEvents(S.errors);return pt.gh.fromErrors(T,L.items)}const G=dt.toTissues(S.tissues);return pt.gh.fromProfile(T,S.ceilings,G)}static fromProfile(S){return{segments:dt.fromSegments(S.segments),ceilings:S.ceilings,tissues:dt.fromTissues(S.tissues),errors:dt.fromEvents(S.errors)}}static toTissues(S){return f()(S).map(I=>({pN2:I.pN2,pHe:I.pHe,a:I.a,b:I.b})).value()}static fromTissues(S){return f()(S).map(I=>({pN2:I.pN2,pHe:I.pHe,a:I.a,b:I.b})).value()}static toEvents(S){const I=new pt.YF;return S.forEach(T=>{const G=pt.im.create(T.type,T.timeStamp,T.depth);G.message=T.message,T.gas&&(G.gas=dt.toGas(T.gas)),I.add(G)}),I}static fromEvents(S){const I=[];return S.forEach(T=>{const G={timeStamp:T.timeStamp,depth:T.depth,type:T.type,message:T.message};T.gas&&(G.gas=dt.fromGas(T.gas)),I.push(G)}),I}static fromDiver(S){return{rmv:S.rmv}}static toDiver(S){return new pt.GN(S.rmv)}static fromOptions(S){return{gfLow:S.gfLow,gfHigh:S.gfHigh,maxPpO2:S.maxPpO2,maxDecoPpO2:S.maxDecoPpO2,salinity:S.salinity,altitude:S.altitude,roundStopsToMinutes:S.roundStopsToMinutes,gasSwitchDuration:S.gasSwitchDuration,safetyStop:S.safetyStop,lastStopDepth:S.lastStopDepth,decoStopDistance:S.decoStopDistance,minimumAutoStopDepth:S.minimumAutoStopDepth,maxEND:S.maxEND,oxygenNarcotic:S.oxygenNarcotic,ascentSpeed6m:S.ascentSpeed6m,ascentSpeed50percTo6m:S.ascentSpeed50percTo6m,ascentSpeed50perc:S.ascentSpeed50perc,descentSpeed:S.descentSpeed,problemSolvingDuration:S.problemSolvingDuration}}static toOptions(S){const I=new pt.Zq(S.gfLow,S.gfHigh,S.maxPpO2,S.maxDecoPpO2,S.salinity);return I.altitude=S.altitude,I.roundStopsToMinutes=S.roundStopsToMinutes,I.gasSwitchDuration=S.gasSwitchDuration,I.safetyStop=S.safetyStop,I.lastStopDepth=S.lastStopDepth,I.decoStopDistance=S.decoStopDistance,I.minimumAutoStopDepth=S.minimumAutoStopDepth,I.maxEND=S.maxEND,I.oxygenNarcotic=S.oxygenNarcotic,I.ascentSpeed6m=S.ascentSpeed6m,I.ascentSpeed50percTo6m=S.ascentSpeed50percTo6m,I.ascentSpeed50perc=S.ascentSpeed50perc,I.descentSpeed=S.descentSpeed,I.problemSolvingDuration=S.problemSolvingDuration,I}static fromDensity(S){return{gas:dt.fromGas(S.gas),depth:S.depth,density:S.density}}static toDensity(S){const I=dt.toGas(S.gas);return new pt.O0(I,S.depth,S.density)}static toGas(S){return new pt.WM(S.fO2,S.fHe)}static fromGas(S){return{fO2:S.fO2,fHe:S.fHe}}}},540:(we,de,Ut)=>{"use strict";Ut.d(de,{o:()=>pt});var et=Ut(944),f=Ut(124);class pt{static calculateDecompression(q){const S=this.profileParametersFromTask(q),T=(new et.Gi).decompression(S),G=f.G.fromProfile(T),At=et.oN.fromProfile({maxDensity:q.eventOptions.maxDensity,startAscentIndex:S.segments.startAscentIndex,profile:T.segments,ceilings:T.ceilings,profileOptions:S.options}),wt=f.G.fromEvents(At.items);return{diveId:q.diveId,profile:G,events:wt}}static diveInfo(q){const S=this.profileParametersFromTask(q),T=(new et.Gi).noDecoLimit(S),G=new et.M5(q.options).create(),L=S.segments.items,At=new et.WU(G).calculateForProfile(L),wt=new et.uY(G).calculateForProfile(L),ft=new et.YR(G).forProfile(L);return{diveId:q.diveId,noDeco:T,otu:At,cns:wt,density:f.G.fromDensity(ft)}}static calculateConsumption(q){const S=new et.M5(q.options).create(),I=new et.W(S),T=f.G.toTanks(q.tanks),G=f.G.toSegments(q.profile,T),L=f.G.toSegments(q.plan,T),At=new et.GN(q.diver.rmv),wt=f.G.toOptions(q.options),ft=pt.selectConsumptionPlan(L,q.isComplex),zt=I.calculateMaxBottomTime(ft,T,At,wt),N=et.wh.emergencyAscent(G,wt,T);let gt=et._O.duration(N);return gt=et.Ef.toMinutes(gt),I.consumeFromTanks2(G,N,wt,T,At),{diveId:q.diveId,maxTime:zt,timeToSurface:gt,tanks:f.G.toConsumed(T)}}static selectConsumptionPlan(q,S){if(S)return et._O.fromCollection(q);const I=q.slice(0,1);return et._O.fromCollection(I)}static profileParametersFromTask(q){const S=f.G.toTanks(q.tanks),I=et.aE.fromTanks(S),T=f.G.toSegments(q.plan,S),G=et._O.fromCollection(T),L=f.G.toOptions(q.options),At=f.G.toTissues(q.tissues),wt=new et.KK(At,q.surfaceInterval);return et.oF.forMultilevelDive(G,I,L,wt)}}},940:function(we,de,Ut){var et;we=Ut.nmd(we),function(){var f,S="Expected a function",T="__lodash_hash_undefined__",L="__lodash_placeholder__",Xt=1/0,Ct=9007199254740991,kt=4294967295,Z=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Te="[object Arguments]",dn="[object Array]",ze="[object Boolean]",Ee="[object Date]",en="[object Error]",gn="[object Function]",Oe="[object GeneratorFunction]",Ht="[object Map]",se="[object Number]",ge="[object Object]",er="[object Promise]",nn="[object RegExp]",Jt="[object Set]",vn="[object String]",vt="[object Symbol]",_t="[object WeakMap]",Ke="[object ArrayBuffer]",Ae="[object DataView]",nr="[object Float32Array]",bn="[object Float64Array]",Ln="[object Int8Array]",rr="[object Int16Array]",Mn="[object Int32Array]",Nn="[object Uint8Array]",Bn="[object Uint8ClampedArray]",rn="[object Uint16Array]",Hn="[object Uint32Array]",cs=/\b__p \+= '';/g,hs=/\b(__p \+=) '' \+/g,Kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Jr=/&(?:amp|lt|gt|quot|#39);/g,Qr=/[&<>"']/g,D=RegExp(Jr.source),r=RegExp(Qr.source),i=/<%-([\s\S]+?)%>/g,u=/<%([\s\S]+?)%>/g,h=/<%=([\s\S]+?)%>/g,m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/[\\^$.*+?()[\]{}|]/g,M=RegExp(R.source),$=/^\s+/,Ot=/\s/,ct=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ie=/,? & /,Fa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wa=/[()=,{}\[\]\/\s]/,Ga=/\\(\\)?/g,Ua=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fs=/\w*$/,za=/^[-+]0x[0-9a-f]+$/i,ka=/^0b[01]+$/i,Ka=/^\[object .+?Constructor\]$/,$a=/^0o[0-7]+$/i,Ya=/^(?:0|[1-9]\d*)$/,Za=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ir=/($^)/,Va=/['\n\r\u2028\u2029\\]/g,sr="\\ud800-\\udfff",ls="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ps="\\u2700-\\u27bf",ds="a-z\\xdf-\\xf6\\xf8-\\xff",gs="A-Z\\xc0-\\xd6\\xd8-\\xde",ms="\\ufe0e\\ufe0f",vs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",no="["+sr+"]",_s="["+vs+"]",ur="["+ls+"]",Ss="\\d+",ro="["+ps+"]",ws="["+ds+"]",Ds="[^"+sr+vs+Ss+ps+ds+gs+"]",ti="\\ud83c[\\udffb-\\udfff]",xs="[^"+sr+"]",ei="(?:\\ud83c[\\udde6-\\uddff]){2}",ni="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+gs+"]",ys="(?:"+ws+"|"+Ds+")",so="(?:"+Sn+"|"+Ds+")",Cs="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ps="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ts="(?:"+ur+"|"+ti+")?",Es="["+ms+"]?",Os=Es+Ts+"(?:\\u200d(?:"+[xs,ei,ni].join("|")+")"+Es+Ts+")*",co="(?:"+[ro,ei,ni].join("|")+")"+Os,ho="(?:"+[xs+ur+"?",ur,ei,ni,no].join("|")+")",fo=RegExp("['\u2019]","g"),lo=RegExp(ur,"g"),ri=RegExp(ti+"(?="+ti+")|"+ho+Os,"g"),po=RegExp([Sn+"?"+ws+"+"+Cs+"(?="+[_s,Sn,"$"].join("|")+")",so+"+"+Ps+"(?="+[_s,Sn+ys,"$"].join("|")+")",Sn+"?"+ys+"+"+Cs,Sn+"+"+Ps,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ss,co].join("|"),"g"),go=RegExp("[\\u200d"+sr+ls+ms+"]"),mo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_o=-1,at={};at[nr]=at[bn]=at[Ln]=at[rr]=at[Mn]=at[Nn]=at[Bn]=at[rn]=at[Hn]=!0,at[Te]=at[dn]=at[Ke]=at[ze]=at[Ae]=at[Ee]=at[en]=at[gn]=at[Ht]=at[se]=at[ge]=at[nn]=at[Jt]=at[vn]=at[_t]=!1;var st={};st[Te]=st[dn]=st[Ke]=st[Ae]=st[ze]=st[Ee]=st[nr]=st[bn]=st[Ln]=st[rr]=st[Mn]=st[Ht]=st[se]=st[ge]=st[nn]=st[Jt]=st[vn]=st[vt]=st[Nn]=st[Bn]=st[rn]=st[Hn]=!0,st[en]=st[gn]=st[_t]=!1;var xo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ao=parseFloat,yo=parseInt,Is="object"==typeof global&&global&&global.Object===Object&&global,Co="object"==typeof self&&self&&self.Object===Object&&self,It=Is||Co||Function("return this")(),Rs=de&&!de.nodeType&&de,Fn=Rs&&we&&!we.nodeType&&we,bs=Fn&&Fn.exports===Rs,ii=bs&&Is.process,ue=function(){try{return Fn&&Fn.require&&Fn.require("util").types||ii&&ii.binding&&ii.binding("util")}catch{}}(),Ls=ue&&ue.isArrayBuffer,Ms=ue&&ue.isDate,Ns=ue&&ue.isMap,Bs=ue&&ue.isRegExp,Hs=ue&&ue.isSet,Fs=ue&&ue.isTypedArray;function jt(d,w,v){switch(v.length){case 0:return d.call(w);case 1:return d.call(w,v[0]);case 2:return d.call(w,v[0],v[1]);case 3:return d.call(w,v[0],v[1],v[2])}return d.apply(w,v)}function Po(d,w,v,O){for(var U=-1,j=null==d?0:d.length;++U<j;){var Pt=d[U];w(O,Pt,v(Pt),d)}return O}function ae(d,w){for(var v=-1,O=null==d?0:d.length;++v<O&&!1!==w(d[v],v,d););return d}function To(d,w){for(var v=null==d?0:d.length;v--&&!1!==w(d[v],v,d););return d}function Ws(d,w){for(var v=-1,O=null==d?0:d.length;++v<O;)if(!w(d[v],v,d))return!1;return!0}function $e(d,w){for(var v=-1,O=null==d?0:d.length,U=0,j=[];++v<O;){var Pt=d[v];w(Pt,v,d)&&(j[U++]=Pt)}return j}function ar(d,w){return!(null==d||!d.length)&&wn(d,w,0)>-1}function si(d,w,v){for(var O=-1,U=null==d?0:d.length;++O<U;)if(v(w,d[O]))return!0;return!1}function ht(d,w){for(var v=-1,O=null==d?0:d.length,U=Array(O);++v<O;)U[v]=w(d[v],v,d);return U}function Ye(d,w){for(var v=-1,O=w.length,U=d.length;++v<O;)d[U+v]=w[v];return d}function ui(d,w,v,O){var U=-1,j=null==d?0:d.length;for(O&&j&&(v=d[++U]);++U<j;)v=w(v,d[U],U,d);return v}function Eo(d,w,v,O){var U=null==d?0:d.length;for(O&&U&&(v=d[--U]);U--;)v=w(v,d[U],U,d);return v}function ai(d,w){for(var v=-1,O=null==d?0:d.length;++v<O;)if(w(d[v],v,d))return!0;return!1}var Oo=oi("length");function Gs(d,w,v){var O;return v(d,function(U,j,Pt){if(w(U,j,Pt))return O=j,!1}),O}function or(d,w,v,O){for(var U=d.length,j=v+(O?1:-1);O?j--:++j<U;)if(w(d[j],j,d))return j;return-1}function wn(d,w,v){return w==w?function ko(d,w,v){for(var O=v-1,U=d.length;++O<U;)if(d[O]===w)return O;return-1}(d,w,v):or(d,Us,v)}function bo(d,w,v,O){for(var U=v-1,j=d.length;++U<j;)if(O(d[U],w))return U;return-1}function Us(d){return d!=d}function zs(d,w){var v=null==d?0:d.length;return v?hi(d,w)/v:NaN}function oi(d){return function(w){return null==w?f:w[d]}}function ci(d){return function(w){return null==d?f:d[w]}}function ks(d,w,v,O,U){return U(d,function(j,Pt,it){v=O?(O=!1,j):w(v,j,Pt,it)}),v}function hi(d,w){for(var v,O=-1,U=d.length;++O<U;){var j=w(d[O]);j!==f&&(v=v===f?j:v+j)}return v}function fi(d,w){for(var v=-1,O=Array(d);++v<d;)O[v]=w(v);return O}function Ks(d){return d&&d.slice(0,Vs(d)+1).replace($,"")}function te(d){return function(w){return d(w)}}function li(d,w){return ht(w,function(v){return d[v]})}function Wn(d,w){return d.has(w)}function $s(d,w){for(var v=-1,O=d.length;++v<O&&wn(w,d[v],0)>-1;);return v}function Ys(d,w){for(var v=d.length;v--&&wn(w,d[v],0)>-1;);return v}var Bo=ci({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ho=ci({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Fo(d){return"\\"+xo[d]}function Dn(d){return go.test(d)}function pi(d){var w=-1,v=Array(d.size);return d.forEach(function(O,U){v[++w]=[U,O]}),v}function Zs(d,w){return function(v){return d(w(v))}}function Ze(d,w){for(var v=-1,O=d.length,U=0,j=[];++v<O;){var Pt=d[v];(Pt===w||Pt===L)&&(d[v]=L,j[U++]=v)}return j}function cr(d){var w=-1,v=Array(d.size);return d.forEach(function(O){v[++w]=O}),v}function xn(d){return Dn(d)?function Yo(d){for(var w=ri.lastIndex=0;ri.test(d);)++w;return w}(d):Oo(d)}function me(d){return Dn(d)?function Zo(d){return d.match(ri)||[]}(d):function Io(d){return d.split("")}(d)}function Vs(d){for(var w=d.length;w--&&Ot.test(d.charAt(w)););return w}var $o=ci({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hr=function d(w){var t,v=(w=null==w?It:hr.defaults(It.Object(),w,hr.pick(It,vo))).Array,O=w.Date,U=w.Error,j=w.Function,Pt=w.Math,it=w.Object,di=w.RegExp,qo=w.String,oe=w.TypeError,fr=v.prototype,An=it.prototype,lr=w["__core-js_shared__"],pr=j.prototype.toString,nt=An.hasOwnProperty,Qo=0,Xs=(t=/[^.]+$/.exec(lr&&lr.keys&&lr.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",dr=An.toString,jo=pr.call(it),tc=It._,ec=di("^"+pr.call(nt).replace(R,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gr=bs?w.Buffer:f,Ve=w.Symbol,mr=w.Uint8Array,qs=gr?gr.allocUnsafe:f,vr=Zs(it.getPrototypeOf,it),Js=it.create,Qs=An.propertyIsEnumerable,_r=fr.splice,js=Ve?Ve.isConcatSpreadable:f,Gn=Ve?Ve.iterator:f,sn=Ve?Ve.toStringTag:f,Sr=function(){try{var t=hn(it,"defineProperty");return t({},"",{}),t}catch{}}(),nc=w.clearTimeout!==It.clearTimeout&&w.clearTimeout,rc=O&&O.now!==It.Date.now&&O.now,ic=w.setTimeout!==It.setTimeout&&w.setTimeout,wr=Pt.ceil,Dr=Pt.floor,gi=it.getOwnPropertySymbols,sc=gr?gr.isBuffer:f,tu=w.isFinite,uc=fr.join,ac=Zs(it.keys,it),Tt=Pt.max,Lt=Pt.min,oc=O.now,cc=w.parseInt,eu=Pt.random,hc=fr.reverse,mi=hn(w,"DataView"),Un=hn(w,"Map"),vi=hn(w,"Promise"),yn=hn(w,"Set"),zn=hn(w,"WeakMap"),kn=hn(it,"create"),xr=zn&&new zn,Cn={},fc=fn(mi),lc=fn(Un),pc=fn(vi),dc=fn(yn),gc=fn(zn),Ar=Ve?Ve.prototype:f,Kn=Ar?Ar.valueOf:f,nu=Ar?Ar.toString:f;function o(t){if(St(t)&&!z(t)&&!(t instanceof X)){if(t instanceof ce)return t;if(nt.call(t,"__wrapped__"))return ra(t)}return new ce(t)}var Pn=function(){function t(){}return function(e){if(!lt(e))return{};if(Js)return Js(e);t.prototype=e;var n=new t;return t.prototype=f,n}}();function yr(){}function ce(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=f}function X(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=kt,this.__views__=[]}function un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}function Re(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}function be(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}function an(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new be;++e<n;)this.add(t[e])}function ve(t){var e=this.__data__=new Re(t);this.size=e.size}function ru(t,e){var n=z(t),s=!n&&ln(t),a=!n&&!s&&je(t),c=!n&&!s&&!a&&In(t),l=n||s||a||c,p=l?fi(t.length,qo):[],g=p.length;for(var A in t)(e||nt.call(t,A))&&(!l||!("length"==A||a&&("offset"==A||"parent"==A)||c&&("buffer"==A||"byteLength"==A||"byteOffset"==A)||Be(A,g)))&&p.push(A);return p}function iu(t){var e=t.length;return e?t[Ei(0,e-1)]:f}function Uc(t,e){return Fr($t(t),on(e,0,t.length))}function zc(t){return Fr($t(t))}function _i(t,e,n){(n!==f&&!_e(t[e],n)||n===f&&!(e in t))&&Le(t,e,n)}function $n(t,e,n){var s=t[e];(!nt.call(t,e)||!_e(s,n)||n===f&&!(e in t))&&Le(t,e,n)}function Cr(t,e){for(var n=t.length;n--;)if(_e(t[n][0],e))return n;return-1}function kc(t,e,n,s){return Xe(t,function(a,c,l){e(s,a,n(a),l)}),s}function su(t,e){return t&&Ce(e,Et(e),t)}function Le(t,e,n){"__proto__"==e&&Sr?Sr(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Si(t,e){for(var n=-1,s=e.length,a=v(s),c=null==t;++n<s;)a[n]=c?f:ji(t,e[n]);return a}function on(t,e,n){return t==t&&(n!==f&&(t=t<=n?t:n),e!==f&&(t=t>=e?t:e)),t}function he(t,e,n,s,a,c){var l,p=1&e,g=2&e,A=4&e;if(n&&(l=a?n(t,s,a,c):n(t)),l!==f)return l;if(!lt(t))return t;var y=z(t);if(y){if(l=function bh(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&nt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!p)return $t(t,l)}else{var C=Mt(t),E=C==gn||C==Oe;if(je(t))return Ou(t,p);if(C==ge||C==Te||E&&!a){if(l=g||E?{}:Vu(t),!p)return g?function Dh(t,e){return Ce(t,Yu(t),e)}(t,function Kc(t,e){return t&&Ce(e,Zt(e),t)}(l,t)):function wh(t,e){return Ce(t,zi(t),e)}(t,su(l,t))}else{if(!st[C])return a?t:{};l=function Lh(t,e,n){var s=t.constructor;switch(e){case Ke:return Ni(t);case ze:case Ee:return new s(+t);case Ae:return function mh(t,e){var n=e?Ni(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case nr:case bn:case Ln:case rr:case Mn:case Nn:case Bn:case rn:case Hn:return Iu(t,n);case Ht:return new s;case se:case vn:return new s(t);case nn:return function vh(t){var e=new t.constructor(t.source,fs.exec(t));return e.lastIndex=t.lastIndex,e}(t);case Jt:return new s;case vt:return function _h(t){return Kn?it(Kn.call(t)):{}}(t)}}(t,C,p)}}c||(c=new ve);var b=c.get(t);if(b)return b;c.set(t,l),Aa(t)?t.forEach(function(W){l.add(he(W,e,n,W,t,c))}):Da(t)&&t.forEach(function(W,V){l.set(V,he(W,e,n,V,t,c))});var K=y?f:(A?g?Wi:Fi:g?Zt:Et)(t);return ae(K||t,function(W,V){K&&(W=t[V=W]),$n(l,V,he(W,e,n,V,t,c))}),l}function uu(t,e,n){var s=n.length;if(null==t)return!s;for(t=it(t);s--;){var a=n[s],l=t[a];if(l===f&&!(a in t)||!(0,e[a])(l))return!1}return!0}function au(t,e,n){if("function"!=typeof t)throw new oe(S);return Qn(function(){t.apply(f,n)},e)}function Yn(t,e,n,s){var a=-1,c=ar,l=!0,p=t.length,g=[],A=e.length;if(!p)return g;n&&(e=ht(e,te(n))),s?(c=si,l=!1):e.length>=200&&(c=Wn,l=!1,e=new an(e));t:for(;++a<p;){var y=t[a],C=null==n?y:n(y);if(y=s||0!==y?y:0,l&&C==C){for(var E=A;E--;)if(e[E]===C)continue t;g.push(y)}else c(e,C,s)||g.push(y)}return g}o.templateSettings={escape:i,evaluate:u,interpolate:h,variable:"",imports:{_:o}},(o.prototype=yr.prototype).constructor=o,(ce.prototype=Pn(yr.prototype)).constructor=ce,(X.prototype=Pn(yr.prototype)).constructor=X,un.prototype.clear=function Sc(){this.__data__=kn?kn(null):{},this.size=0},un.prototype.delete=function wc(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},un.prototype.get=function Dc(t){var e=this.__data__;if(kn){var n=e[t];return n===T?f:n}return nt.call(e,t)?e[t]:f},un.prototype.has=function xc(t){var e=this.__data__;return kn?e[t]!==f:nt.call(e,t)},un.prototype.set=function Ac(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kn&&e===f?T:e,this},Re.prototype.clear=function yc(){this.__data__=[],this.size=0},Re.prototype.delete=function Cc(t){var e=this.__data__,n=Cr(e,t);return!(n<0||(n==e.length-1?e.pop():_r.call(e,n,1),--this.size,0))},Re.prototype.get=function Pc(t){var e=this.__data__,n=Cr(e,t);return n<0?f:e[n][1]},Re.prototype.has=function Tc(t){return Cr(this.__data__,t)>-1},Re.prototype.set=function Ec(t,e){var n=this.__data__,s=Cr(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this},be.prototype.clear=function Oc(){this.size=0,this.__data__={hash:new un,map:new(Un||Re),string:new un}},be.prototype.delete=function Ic(t){var e=Hr(this,t).delete(t);return this.size-=e?1:0,e},be.prototype.get=function Rc(t){return Hr(this,t).get(t)},be.prototype.has=function bc(t){return Hr(this,t).has(t)},be.prototype.set=function Lc(t,e){var n=Hr(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this},an.prototype.add=an.prototype.push=function Mc(t){return this.__data__.set(t,T),this},an.prototype.has=function Nc(t){return this.__data__.has(t)},ve.prototype.clear=function Bc(){this.__data__=new Re,this.size=0},ve.prototype.delete=function Hc(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ve.prototype.get=function Fc(t){return this.__data__.get(t)},ve.prototype.has=function Wc(t){return this.__data__.has(t)},ve.prototype.set=function Gc(t,e){var n=this.__data__;if(n instanceof Re){var s=n.__data__;if(!Un||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new be(s)}return n.set(t,e),this.size=n.size,this};var Xe=Mu(ye),ou=Mu(Di,!0);function Yc(t,e){var n=!0;return Xe(t,function(s,a,c){return n=!!e(s,a,c)}),n}function Pr(t,e,n){for(var s=-1,a=t.length;++s<a;){var c=t[s],l=e(c);if(null!=l&&(p===f?l==l&&!ne(l):n(l,p)))var p=l,g=c}return g}function cu(t,e){var n=[];return Xe(t,function(s,a,c){e(s,a,c)&&n.push(s)}),n}function Rt(t,e,n,s,a){var c=-1,l=t.length;for(n||(n=Nh),a||(a=[]);++c<l;){var p=t[c];e>0&&n(p)?e>1?Rt(p,e-1,n,s,a):Ye(a,p):s||(a[a.length]=p)}return a}var wi=Nu(),hu=Nu(!0);function ye(t,e){return t&&wi(t,e,Et)}function Di(t,e){return t&&hu(t,e,Et)}function Tr(t,e){return $e(e,function(n){return He(t[n])})}function cn(t,e){for(var n=0,s=(e=Je(e,t)).length;null!=t&&n<s;)t=t[Pe(e[n++])];return n&&n==s?t:f}function fu(t,e,n){var s=e(t);return z(t)?s:Ye(s,n(t))}function Ft(t){return null==t?t===f?"[object Undefined]":"[object Null]":sn&&sn in it(t)?function Oh(t){var e=nt.call(t,sn),n=t[sn];try{t[sn]=f;var s=!0}catch{}var a=dr.call(t);return s&&(e?t[sn]=n:delete t[sn]),a}(t):function zh(t){return dr.call(t)}(t)}function xi(t,e){return t>e}function Vc(t,e){return null!=t&&nt.call(t,e)}function Xc(t,e){return null!=t&&e in it(t)}function Ai(t,e,n){for(var s=n?si:ar,a=t[0].length,c=t.length,l=c,p=v(c),g=1/0,A=[];l--;){var y=t[l];l&&e&&(y=ht(y,te(e))),g=Lt(y.length,g),p[l]=!n&&(e||a>=120&&y.length>=120)?new an(l&&y):f}y=t[0];var C=-1,E=p[0];t:for(;++C<a&&A.length<g;){var b=y[C],F=e?e(b):b;if(b=n||0!==b?b:0,!(E?Wn(E,F):s(A,F,n))){for(l=c;--l;){var K=p[l];if(!(K?Wn(K,F):s(t[l],F,n)))continue t}E&&E.push(F),A.push(b)}}return A}function Zn(t,e,n){var s=null==(t=Qu(t,e=Je(e,t)))?t:t[Pe(le(e))];return null==s?f:jt(s,t,n)}function lu(t){return St(t)&&Ft(t)==Te}function Vn(t,e,n,s,a){return t===e||(null==t||null==e||!St(t)&&!St(e)?t!=t&&e!=e:function th(t,e,n,s,a,c){var l=z(t),p=z(e),g=l?dn:Mt(t),A=p?dn:Mt(e),y=(g=g==Te?ge:g)==ge,C=(A=A==Te?ge:A)==ge,E=g==A;if(E&&je(t)){if(!je(e))return!1;l=!0,y=!1}if(E&&!y)return c||(c=new ve),l||In(t)?$u(t,e,n,s,a,c):function Th(t,e,n,s,a,c,l){switch(n){case Ae:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ke:return!(t.byteLength!=e.byteLength||!c(new mr(t),new mr(e)));case ze:case Ee:case se:return _e(+t,+e);case en:return t.name==e.name&&t.message==e.message;case nn:case vn:return t==e+"";case Ht:var p=pi;case Jt:if(p||(p=cr),t.size!=e.size&&!(1&s))return!1;var A=l.get(t);if(A)return A==e;s|=2,l.set(t,e);var y=$u(p(t),p(e),s,a,c,l);return l.delete(t),y;case vt:if(Kn)return Kn.call(t)==Kn.call(e)}return!1}(t,e,g,n,s,a,c);if(!(1&n)){var b=y&&nt.call(t,"__wrapped__"),F=C&&nt.call(e,"__wrapped__");if(b||F){var K=b?t.value():t,W=F?e.value():e;return c||(c=new ve),a(K,W,n,s,c)}}return!!E&&(c||(c=new ve),function Eh(t,e,n,s,a,c){var l=1&n,p=Fi(t),g=p.length;if(g!=Fi(e).length&&!l)return!1;for(var C=g;C--;){var E=p[C];if(!(l?E in e:nt.call(e,E)))return!1}var b=c.get(t),F=c.get(e);if(b&&F)return b==e&&F==t;var K=!0;c.set(t,e),c.set(e,t);for(var W=l;++C<g;){var V=t[E=p[C]],J=e[E];if(s)var re=l?s(J,V,E,e,t,c):s(V,J,E,t,e,c);if(!(re===f?V===J||a(V,J,n,s,c):re)){K=!1;break}W||(W="constructor"==E)}if(K&&!W){var Gt=t.constructor,ie=e.constructor;Gt!=ie&&"constructor"in t&&"constructor"in e&&!("function"==typeof Gt&&Gt instanceof Gt&&"function"==typeof ie&&ie instanceof ie)&&(K=!1)}return c.delete(t),c.delete(e),K}(t,e,n,s,a,c))}(t,e,n,s,Vn,a))}function yi(t,e,n,s){var a=n.length,c=a,l=!s;if(null==t)return!c;for(t=it(t);a--;){var p=n[a];if(l&&p[2]?p[1]!==t[p[0]]:!(p[0]in t))return!1}for(;++a<c;){var g=(p=n[a])[0],A=t[g],y=p[1];if(l&&p[2]){if(A===f&&!(g in t))return!1}else{var C=new ve;if(s)var E=s(A,y,g,t,e,C);if(!(E===f?Vn(y,A,3,s,C):E))return!1}}return!0}function pu(t){return!(!lt(t)||function Hh(t){return!!Xs&&Xs in t}(t))&&(He(t)?ec:Ka).test(fn(t))}function du(t){return"function"==typeof t?t:null==t?Vt:"object"==typeof t?z(t)?vu(t[0],t[1]):mu(t):Ba(t)}function Ci(t){if(!Jn(t))return ac(t);var e=[];for(var n in it(t))nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pi(t,e){return t<e}function gu(t,e){var n=-1,s=Yt(t)?v(t.length):[];return Xe(t,function(a,c,l){s[++n]=e(a,c,l)}),s}function mu(t){var e=Ui(t);return 1==e.length&&e[0][2]?qu(e[0][0],e[0][1]):function(n){return n===t||yi(n,t,e)}}function vu(t,e){return ki(t)&&Xu(e)?qu(Pe(t),e):function(n){var s=ji(n,t);return s===f&&s===e?ts(n,t):Vn(e,s,3)}}function Er(t,e,n,s,a){t!==e&&wi(e,function(c,l){if(a||(a=new ve),lt(c))!function uh(t,e,n,s,a,c,l){var p=$i(t,n),g=$i(e,n),A=l.get(g);if(A)_i(t,n,A);else{var y=c?c(p,g,n+"",t,e,l):f,C=y===f;if(C){var E=z(g),b=!E&&je(g),F=!E&&!b&&In(g);y=g,E||b||F?z(p)?y=p:Dt(p)?y=$t(p):b?(C=!1,y=Ou(g,!0)):F?(C=!1,y=Iu(g,!0)):y=[]:jn(g)||ln(g)?(y=p,ln(p)?y=Pa(p):(!lt(p)||He(p))&&(y=Vu(g))):C=!1}C&&(l.set(g,y),a(y,g,s,c,l),l.delete(g)),_i(t,n,y)}}(t,e,l,n,Er,s,a);else{var p=s?s($i(t,l),c,l+"",t,e,a):f;p===f&&(p=c),_i(t,l,p)}},Zt)}function _u(t,e){var n=t.length;if(n)return Be(e+=e<0?n:0,n)?t[e]:f}function Su(t,e,n){e=e.length?ht(e,function(c){return z(c)?function(l){return cn(l,1===c.length?c[0]:c)}:c}):[Vt];var s=-1;return e=ht(e,te(H())),function Lo(d,w){var v=d.length;for(d.sort(w);v--;)d[v]=d[v].value;return d}(gu(t,function(c,l,p){return{criteria:ht(e,function(A){return A(c)}),index:++s,value:c}}),function(c,l){return function Sh(t,e,n){for(var s=-1,a=t.criteria,c=e.criteria,l=a.length,p=n.length;++s<l;){var g=Ru(a[s],c[s]);if(g)return s>=p?g:g*("desc"==n[s]?-1:1)}return t.index-e.index}(c,l,n)})}function wu(t,e,n){for(var s=-1,a=e.length,c={};++s<a;){var l=e[s],p=cn(t,l);n(p,l)&&Xn(c,Je(l,t),p)}return c}function Ti(t,e,n,s){var a=s?bo:wn,c=-1,l=e.length,p=t;for(t===e&&(e=$t(e)),n&&(p=ht(t,te(n)));++c<l;)for(var g=0,A=e[c],y=n?n(A):A;(g=a(p,y,g,s))>-1;)p!==t&&_r.call(p,g,1),_r.call(t,g,1);return t}function Du(t,e){for(var n=t?e.length:0,s=n-1;n--;){var a=e[n];if(n==s||a!==c){var c=a;Be(a)?_r.call(t,a,1):Ri(t,a)}}return t}function Ei(t,e){return t+Dr(eu()*(e-t+1))}function Oi(t,e){var n="";if(!t||e<1||e>Ct)return n;do{e%2&&(n+=t),(e=Dr(e/2))&&(t+=t)}while(e);return n}function Y(t,e){return Yi(Ju(t,e,Vt),t+"")}function hh(t){return iu(Rn(t))}function fh(t,e){var n=Rn(t);return Fr(n,on(e,0,n.length))}function Xn(t,e,n,s){if(!lt(t))return t;for(var a=-1,c=(e=Je(e,t)).length,l=c-1,p=t;null!=p&&++a<c;){var g=Pe(e[a]),A=n;if("__proto__"===g||"constructor"===g||"prototype"===g)return t;if(a!=l){var y=p[g];(A=s?s(y,g,p):f)===f&&(A=lt(y)?y:Be(e[a+1])?[]:{})}$n(p,g,A),p=p[g]}return t}var xu=xr?function(t,e){return xr.set(t,e),t}:Vt,lh=Sr?function(t,e){return Sr(t,"toString",{configurable:!0,enumerable:!1,value:ns(e),writable:!0})}:Vt;function ph(t){return Fr(Rn(t))}function fe(t,e,n){var s=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var c=v(a);++s<a;)c[s]=t[s+e];return c}function dh(t,e){var n;return Xe(t,function(s,a,c){return!(n=e(s,a,c))}),!!n}function Or(t,e,n){var s=0,a=null==t?s:t.length;if("number"==typeof e&&e==e&&a<=2147483647){for(;s<a;){var c=s+a>>>1,l=t[c];null!==l&&!ne(l)&&(n?l<=e:l<e)?s=c+1:a=c}return a}return Ii(t,e,Vt,n)}function Ii(t,e,n,s){var a=0,c=null==t?0:t.length;if(0===c)return 0;for(var l=(e=n(e))!=e,p=null===e,g=ne(e),A=e===f;a<c;){var y=Dr((a+c)/2),C=n(t[y]),E=C!==f,b=null===C,F=C==C,K=ne(C);if(l)var W=s||F;else W=A?F&&(s||E):p?F&&E&&(s||!b):g?F&&E&&!b&&(s||!K):!b&&!K&&(s?C<=e:C<e);W?a=y+1:c=y}return Lt(c,4294967294)}function Au(t,e){for(var n=-1,s=t.length,a=0,c=[];++n<s;){var l=t[n],p=e?e(l):l;if(!n||!_e(p,g)){var g=p;c[a++]=0===l?0:l}}return c}function yu(t){return"number"==typeof t?t:ne(t)?NaN:+t}function ee(t){if("string"==typeof t)return t;if(z(t))return ht(t,ee)+"";if(ne(t))return nu?nu.call(t):"";var e=t+"";return"0"==e&&1/t==-Xt?"-0":e}function qe(t,e,n){var s=-1,a=ar,c=t.length,l=!0,p=[],g=p;if(n)l=!1,a=si;else if(c>=200){var A=e?null:Ch(t);if(A)return cr(A);l=!1,a=Wn,g=new an}else g=e?[]:p;t:for(;++s<c;){var y=t[s],C=e?e(y):y;if(y=n||0!==y?y:0,l&&C==C){for(var E=g.length;E--;)if(g[E]===C)continue t;e&&g.push(C),p.push(y)}else a(g,C,n)||(g!==p&&g.push(C),p.push(y))}return p}function Ri(t,e){return null==(t=Qu(t,e=Je(e,t)))||delete t[Pe(le(e))]}function Cu(t,e,n,s){return Xn(t,e,n(cn(t,e)),s)}function Ir(t,e,n,s){for(var a=t.length,c=s?a:-1;(s?c--:++c<a)&&e(t[c],c,t););return n?fe(t,s?0:c,s?c+1:a):fe(t,s?c+1:0,s?a:c)}function Pu(t,e){var n=t;return n instanceof X&&(n=n.value()),ui(e,function(s,a){return a.func.apply(a.thisArg,Ye([s],a.args))},n)}function bi(t,e,n){var s=t.length;if(s<2)return s?qe(t[0]):[];for(var a=-1,c=v(s);++a<s;)for(var l=t[a],p=-1;++p<s;)p!=a&&(c[a]=Yn(c[a]||l,t[p],e,n));return qe(Rt(c,1),e,n)}function Tu(t,e,n){for(var s=-1,a=t.length,c=e.length,l={};++s<a;)n(l,t[s],s<c?e[s]:f);return l}function Li(t){return Dt(t)?t:[]}function Mi(t){return"function"==typeof t?t:Vt}function Je(t,e){return z(t)?t:ki(t,e)?[t]:na(tt(t))}var gh=Y;function Qe(t,e,n){var s=t.length;return n=n===f?s:n,!e&&n>=s?t:fe(t,e,n)}var Eu=nc||function(t){return It.clearTimeout(t)};function Ou(t,e){if(e)return t.slice();var n=t.length,s=qs?qs(n):new t.constructor(n);return t.copy(s),s}function Ni(t){var e=new t.constructor(t.byteLength);return new mr(e).set(new mr(t)),e}function Iu(t,e){var n=e?Ni(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ru(t,e){if(t!==e){var n=t!==f,s=null===t,a=t==t,c=ne(t),l=e!==f,p=null===e,g=e==e,A=ne(e);if(!p&&!A&&!c&&t>e||c&&l&&g&&!p&&!A||s&&l&&g||!n&&g||!a)return 1;if(!s&&!c&&!A&&t<e||A&&n&&a&&!s&&!c||p&&n&&a||!l&&a||!g)return-1}return 0}function bu(t,e,n,s){for(var a=-1,c=t.length,l=n.length,p=-1,g=e.length,A=Tt(c-l,0),y=v(g+A),C=!s;++p<g;)y[p]=e[p];for(;++a<l;)(C||a<c)&&(y[n[a]]=t[a]);for(;A--;)y[p++]=t[a++];return y}function Lu(t,e,n,s){for(var a=-1,c=t.length,l=-1,p=n.length,g=-1,A=e.length,y=Tt(c-p,0),C=v(y+A),E=!s;++a<y;)C[a]=t[a];for(var b=a;++g<A;)C[b+g]=e[g];for(;++l<p;)(E||a<c)&&(C[b+n[l]]=t[a++]);return C}function $t(t,e){var n=-1,s=t.length;for(e||(e=v(s));++n<s;)e[n]=t[n];return e}function Ce(t,e,n,s){var a=!n;n||(n={});for(var c=-1,l=e.length;++c<l;){var p=e[c],g=s?s(n[p],t[p],p,n,t):f;g===f&&(g=t[p]),a?Le(n,p,g):$n(n,p,g)}return n}function Rr(t,e){return function(n,s){var a=z(n)?Po:kc,c=e?e():{};return a(n,t,H(s,2),c)}}function Tn(t){return Y(function(e,n){var s=-1,a=n.length,c=a>1?n[a-1]:f,l=a>2?n[2]:f;for(c=t.length>3&&"function"==typeof c?(a--,c):f,l&&Wt(n[0],n[1],l)&&(c=a<3?f:c,a=1),e=it(e);++s<a;){var p=n[s];p&&t(e,p,s,c)}return e})}function Mu(t,e){return function(n,s){if(null==n)return n;if(!Yt(n))return t(n,s);for(var a=n.length,c=e?a:-1,l=it(n);(e?c--:++c<a)&&!1!==s(l[c],c,l););return n}}function Nu(t){return function(e,n,s){for(var a=-1,c=it(e),l=s(e),p=l.length;p--;){var g=l[t?p:++a];if(!1===n(c[g],g,c))break}return e}}function Bu(t){return function(e){var n=Dn(e=tt(e))?me(e):f,s=n?n[0]:e.charAt(0),a=n?Qe(n,1).join(""):e.slice(1);return s[t]()+a}}function En(t){return function(e){return ui(Ma(La(e).replace(fo,"")),t,"")}}function qn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Pn(t.prototype),s=t.apply(n,e);return lt(s)?s:n}}function Hu(t){return function(e,n,s){var a=it(e);if(!Yt(e)){var c=H(n,3);e=Et(e),n=function(p){return c(a[p],p,a)}}var l=t(e,n,s);return l>-1?a[c?e[l]:l]:f}}function Fu(t){return Ne(function(e){var n=e.length,s=n,a=ce.prototype.thru;for(t&&e.reverse();s--;){var c=e[s];if("function"!=typeof c)throw new oe(S);if(a&&!l&&"wrapper"==Br(c))var l=new ce([],!0)}for(s=l?s:n;++s<n;){var p=Br(c=e[s]),g="wrapper"==p?Gi(c):f;l=g&&Ki(g[0])&&424==g[1]&&!g[4].length&&1==g[9]?l[Br(g[0])].apply(l,g[3]):1==c.length&&Ki(c)?l[p]():l.thru(c)}return function(){var A=arguments,y=A[0];if(l&&1==A.length&&z(y))return l.plant(y).value();for(var C=0,E=n?e[C].apply(this,A):y;++C<n;)E=e[C].call(this,E);return E}})}function br(t,e,n,s,a,c,l,p,g,A){var y=128&e,C=1&e,E=2&e,b=24&e,F=512&e,K=E?f:qn(t);return function W(){for(var V=arguments.length,J=v(V),re=V;re--;)J[re]=arguments[re];if(b)var Gt=On(W),ie=function No(d,w){for(var v=d.length,O=0;v--;)d[v]===w&&++O;return O}(J,Gt);if(s&&(J=bu(J,s,a,b)),c&&(J=Lu(J,c,l,b)),V-=ie,b&&V<A){var xt=Ze(J,Gt);return Uu(t,e,br,W.placeholder,n,J,xt,p,g,A-V)}var Se=C?n:this,We=E?Se[t]:t;return V=J.length,p?J=function kh(t,e){for(var n=t.length,s=Lt(e.length,n),a=$t(t);s--;){var c=e[s];t[s]=Be(c,n)?a[c]:f}return t}(J,p):F&&V>1&&J.reverse(),y&&g<V&&(J.length=g),this&&this!==It&&this instanceof W&&(We=K||qn(We)),We.apply(Se,J)}}function Wu(t,e){return function(n,s){return function Jc(t,e,n,s){return ye(t,function(a,c,l){e(s,n(a),c,l)}),s}(n,t,e(s),{})}}function Lr(t,e){return function(n,s){var a;if(n===f&&s===f)return e;if(n!==f&&(a=n),s!==f){if(a===f)return s;"string"==typeof n||"string"==typeof s?(n=ee(n),s=ee(s)):(n=yu(n),s=yu(s)),a=t(n,s)}return a}}function Bi(t){return Ne(function(e){return e=ht(e,te(H())),Y(function(n){var s=this;return t(e,function(a){return jt(a,s,n)})})})}function Mr(t,e){var n=(e=e===f?" ":ee(e)).length;if(n<2)return n?Oi(e,t):e;var s=Oi(e,wr(t/xn(e)));return Dn(e)?Qe(me(s),0,t).join(""):s.slice(0,t)}function Gu(t){return function(e,n,s){return s&&"number"!=typeof s&&Wt(e,n,s)&&(n=s=f),e=Fe(e),n===f?(n=e,e=0):n=Fe(n),function ch(t,e,n,s){for(var a=-1,c=Tt(wr((e-t)/(n||1)),0),l=v(c);c--;)l[s?c:++a]=t,t+=n;return l}(e,n,s=s===f?e<n?1:-1:Fe(s),t)}}function Nr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=pe(e),n=pe(n)),t(e,n)}}function Uu(t,e,n,s,a,c,l,p,g,A){var y=8&e;e|=y?32:64,4&(e&=~(y?64:32))||(e&=-4);var K=[t,e,a,y?c:f,y?l:f,y?f:c,y?f:l,p,g,A],W=n.apply(f,K);return Ki(t)&&ju(W,K),W.placeholder=s,ta(W,t,e)}function Hi(t){var e=Pt[t];return function(n,s){if(n=pe(n),(s=null==s?0:Lt(k(s),292))&&tu(n)){var a=(tt(n)+"e").split("e");return+((a=(tt(e(a[0]+"e"+(+a[1]+s)))+"e").split("e"))[0]+"e"+(+a[1]-s))}return e(n)}}var Ch=yn&&1/cr(new yn([,-0]))[1]==Xt?function(t){return new yn(t)}:ss;function zu(t){return function(e){var n=Mt(e);return n==Ht?pi(e):n==Jt?function zo(d){var w=-1,v=Array(d.size);return d.forEach(function(O){v[++w]=[O,O]}),v}(e):function Mo(d,w){return ht(w,function(v){return[v,d[v]]})}(e,t(e))}}function Me(t,e,n,s,a,c,l,p){var g=2&e;if(!g&&"function"!=typeof t)throw new oe(S);var A=s?s.length:0;if(A||(e&=-97,s=a=f),l=l===f?l:Tt(k(l),0),p=p===f?p:k(p),A-=a?a.length:0,64&e){var y=s,C=a;s=a=f}var E=g?f:Gi(t),b=[t,e,n,s,a,y,C,c,l,p];if(E&&function Gh(t,e){var n=t[1],s=e[1],a=n|s;if(!(a<131)&&!(128==s&&8==n||128==s&&256==n&&t[7].length<=e[8]||384==s&&e[7].length<=e[8]&&8==n))return t;1&s&&(t[2]=e[2],a|=1&n?0:4);var p=e[3];if(p){var g=t[3];t[3]=g?bu(g,p,e[4]):p,t[4]=g?Ze(t[3],L):e[4]}(p=e[5])&&(t[5]=(g=t[5])?Lu(g,p,e[6]):p,t[6]=g?Ze(t[5],L):e[6]),(p=e[7])&&(t[7]=p),128&s&&(t[8]=null==t[8]?e[8]:Lt(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=a}(b,E),t=b[0],e=b[1],n=b[2],s=b[3],a=b[4],!(p=b[9]=b[9]===f?g?0:t.length:Tt(b[9]-A,0))&&24&e&&(e&=-25),e&&1!=e)F=8==e||16==e?function Ah(t,e,n){var s=qn(t);return function a(){for(var c=arguments.length,l=v(c),p=c,g=On(a);p--;)l[p]=arguments[p];var A=c<3&&l[0]!==g&&l[c-1]!==g?[]:Ze(l,g);return(c-=A.length)<n?Uu(t,e,br,a.placeholder,f,l,A,f,f,n-c):jt(this&&this!==It&&this instanceof a?s:t,this,l)}}(t,e,p):32!=e&&33!=e||a.length?br.apply(f,b):function yh(t,e,n,s){var a=1&e,c=qn(t);return function l(){for(var p=-1,g=arguments.length,A=-1,y=s.length,C=v(y+g),E=this&&this!==It&&this instanceof l?c:t;++A<y;)C[A]=s[A];for(;g--;)C[A++]=arguments[++p];return jt(E,a?n:this,C)}}(t,e,n,s);else var F=function xh(t,e,n){var s=1&e,a=qn(t);return function c(){return(this&&this!==It&&this instanceof c?a:t).apply(s?n:this,arguments)}}(t,e,n);return ta((E?xu:ju)(F,b),t,e)}function ku(t,e,n,s){return t===f||_e(t,An[n])&&!nt.call(s,n)?e:t}function Ku(t,e,n,s,a,c){return lt(t)&&lt(e)&&(c.set(e,t),Er(t,e,f,Ku,c),c.delete(e)),t}function Ph(t){return jn(t)?f:t}function $u(t,e,n,s,a,c){var l=1&n,p=t.length,g=e.length;if(p!=g&&!(l&&g>p))return!1;var A=c.get(t),y=c.get(e);if(A&&y)return A==e&&y==t;var C=-1,E=!0,b=2&n?new an:f;for(c.set(t,e),c.set(e,t);++C<p;){var F=t[C],K=e[C];if(s)var W=l?s(K,F,C,e,t,c):s(F,K,C,t,e,c);if(W!==f){if(W)continue;E=!1;break}if(b){if(!ai(e,function(V,J){if(!Wn(b,J)&&(F===V||a(F,V,n,s,c)))return b.push(J)})){E=!1;break}}else if(F!==K&&!a(F,K,n,s,c)){E=!1;break}}return c.delete(t),c.delete(e),E}function Ne(t){return Yi(Ju(t,f,ua),t+"")}function Fi(t){return fu(t,Et,zi)}function Wi(t){return fu(t,Zt,Yu)}var Gi=xr?function(t){return xr.get(t)}:ss;function Br(t){for(var e=t.name+"",n=Cn[e],s=nt.call(Cn,e)?n.length:0;s--;){var a=n[s],c=a.func;if(null==c||c==t)return a.name}return e}function On(t){return(nt.call(o,"placeholder")?o:t).placeholder}function H(){var t=o.iteratee||rs;return t=t===rs?du:t,arguments.length?t(arguments[0],arguments[1]):t}function Hr(t,e){var n=t.__data__;return function Bh(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ui(t){for(var e=Et(t),n=e.length;n--;){var s=e[n],a=t[s];e[n]=[s,a,Xu(a)]}return e}function hn(t,e){var n=function Wo(d,w){return null==d?f:d[w]}(t,e);return pu(n)?n:f}var zi=gi?function(t){return null==t?[]:(t=it(t),$e(gi(t),function(e){return Qs.call(t,e)}))}:us,Yu=gi?function(t){for(var e=[];t;)Ye(e,zi(t)),t=vr(t);return e}:us,Mt=Ft;function Zu(t,e,n){for(var s=-1,a=(e=Je(e,t)).length,c=!1;++s<a;){var l=Pe(e[s]);if(!(c=null!=t&&n(t,l)))break;t=t[l]}return c||++s!=a?c:!!(a=null==t?0:t.length)&&Kr(a)&&Be(l,a)&&(z(t)||ln(t))}function Vu(t){return"function"!=typeof t.constructor||Jn(t)?{}:Pn(vr(t))}function Nh(t){return z(t)||ln(t)||!!(js&&t&&t[js])}function Be(t,e){var n=typeof t;return!!(e=e??Ct)&&("number"==n||"symbol"!=n&&Ya.test(t))&&t>-1&&t%1==0&&t<e}function Wt(t,e,n){if(!lt(n))return!1;var s=typeof e;return!!("number"==s?Yt(n)&&Be(e,n.length):"string"==s&&e in n)&&_e(n[e],t)}function ki(t,e){if(z(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ne(t))||x.test(t)||!m.test(t)||null!=e&&t in it(e)}function Ki(t){var e=Br(t),n=o[e];if("function"!=typeof n||!(e in X.prototype))return!1;if(t===n)return!0;var s=Gi(n);return!!s&&t===s[0]}(mi&&Mt(new mi(new ArrayBuffer(1)))!=Ae||Un&&Mt(new Un)!=Ht||vi&&Mt(vi.resolve())!=er||yn&&Mt(new yn)!=Jt||zn&&Mt(new zn)!=_t)&&(Mt=function(t){var e=Ft(t),n=e==ge?t.constructor:f,s=n?fn(n):"";if(s)switch(s){case fc:return Ae;case lc:return Ht;case pc:return er;case dc:return Jt;case gc:return _t}return e});var Fh=lr?He:as;function Jn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||An)}function Xu(t){return t==t&&!lt(t)}function qu(t,e){return function(n){return null!=n&&n[t]===e&&(e!==f||t in it(n))}}function Ju(t,e,n){return e=Tt(e===f?t.length-1:e,0),function(){for(var s=arguments,a=-1,c=Tt(s.length-e,0),l=v(c);++a<c;)l[a]=s[e+a];a=-1;for(var p=v(e+1);++a<e;)p[a]=s[a];return p[e]=n(l),jt(t,this,p)}}function Qu(t,e){return e.length<2?t:cn(t,fe(e,0,-1))}function $i(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ju=ea(xu),Qn=ic||function(t,e){return It.setTimeout(t,e)},Yi=ea(lh);function ta(t,e,n){var s=e+"";return Yi(t,function Mh(t,e){var n=e.length;if(!n)return t;var s=n-1;return e[s]=(n>1?"& ":"")+e[s],e=e.join(n>2?", ":" "),t.replace(ct,"{\n/* [wrapped with "+e+"] */\n")}(s,function Kh(t,e){return ae(Z,function(n){var s="_."+n[0];e&n[1]&&!ar(t,s)&&t.push(s)}),t.sort()}(function Rh(t){var e=t.match(Qt);return e?e[1].split(Ie):[]}(s),n)))}function ea(t){var e=0,n=0;return function(){var s=oc(),a=16-(s-n);if(n=s,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(f,arguments)}}function Fr(t,e){var n=-1,s=t.length,a=s-1;for(e=e===f?s:e;++n<e;){var c=Ei(n,a),l=t[c];t[c]=t[n],t[n]=l}return t.length=e,t}var na=function Wh(t){var e=zr(t,function(s){return 500===n.size&&n.clear(),s}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(P,function(n,s,a,c){e.push(a?c.replace(Ga,"$1"):s||n)}),e});function Pe(t){if("string"==typeof t||ne(t))return t;var e=t+"";return"0"==e&&1/t==-Xt?"-0":e}function fn(t){if(null!=t){try{return pr.call(t)}catch{}try{return t+""}catch{}}return""}function ra(t){if(t instanceof X)return t.clone();var e=new ce(t.__wrapped__,t.__chain__);return e.__actions__=$t(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vh=Y(function(t,e){return Dt(t)?Yn(t,Rt(e,1,Dt,!0)):[]}),Xh=Y(function(t,e){var n=le(e);return Dt(n)&&(n=f),Dt(t)?Yn(t,Rt(e,1,Dt,!0),H(n,2)):[]}),qh=Y(function(t,e){var n=le(e);return Dt(n)&&(n=f),Dt(t)?Yn(t,Rt(e,1,Dt,!0),f,n):[]});function ia(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var a=null==n?0:k(n);return a<0&&(a=Tt(s+a,0)),or(t,H(e,3),a)}function sa(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var a=s-1;return n!==f&&(a=k(n),a=n<0?Tt(s+a,0):Lt(a,s-1)),or(t,H(e,3),a,!0)}function ua(t){return null!=t&&t.length?Rt(t,1):[]}function aa(t){return t&&t.length?t[0]:f}var of=Y(function(t){var e=ht(t,Li);return e.length&&e[0]===t[0]?Ai(e):[]}),cf=Y(function(t){var e=le(t),n=ht(t,Li);return e===le(n)?e=f:n.pop(),n.length&&n[0]===t[0]?Ai(n,H(e,2)):[]}),hf=Y(function(t){var e=le(t),n=ht(t,Li);return(e="function"==typeof e?e:f)&&n.pop(),n.length&&n[0]===t[0]?Ai(n,f,e):[]});function le(t){var e=null==t?0:t.length;return e?t[e-1]:f}var df=Y(oa);function oa(t,e){return t&&t.length&&e&&e.length?Ti(t,e):t}var vf=Ne(function(t,e){var n=null==t?0:t.length,s=Si(t,e);return Du(t,ht(e,function(a){return Be(a,n)?+a:a}).sort(Ru)),s});function Zi(t){return null==t?t:hc.call(t)}var Lf=Y(function(t){return qe(Rt(t,1,Dt,!0))}),Mf=Y(function(t){var e=le(t);return Dt(e)&&(e=f),qe(Rt(t,1,Dt,!0),H(e,2))}),Nf=Y(function(t){var e=le(t);return e="function"==typeof e?e:f,qe(Rt(t,1,Dt,!0),f,e)});function Vi(t){if(!t||!t.length)return[];var e=0;return t=$e(t,function(n){if(Dt(n))return e=Tt(n.length,e),!0}),fi(e,function(n){return ht(t,oi(n))})}function ca(t,e){if(!t||!t.length)return[];var n=Vi(t);return null==e?n:ht(n,function(s){return jt(e,f,s)})}var Wf=Y(function(t,e){return Dt(t)?Yn(t,e):[]}),Gf=Y(function(t){return bi($e(t,Dt))}),Uf=Y(function(t){var e=le(t);return Dt(e)&&(e=f),bi($e(t,Dt),H(e,2))}),zf=Y(function(t){var e=le(t);return e="function"==typeof e?e:f,bi($e(t,Dt),f,e)}),kf=Y(Vi),Yf=Y(function(t){var e=t.length,n=e>1?t[e-1]:f;return n="function"==typeof n?(t.pop(),n):f,ca(t,n)});function ha(t){var e=o(t);return e.__chain__=!0,e}function Wr(t,e){return e(t)}var Vf=Ne(function(t){var e=t.length,n=e?t[0]:0,s=this.__wrapped__,a=function(c){return Si(c,t)};return!(e>1||this.__actions__.length)&&s instanceof X&&Be(n)?((s=s.slice(n,+n+(e?1:0))).__actions__.push({func:Wr,args:[a],thisArg:f}),new ce(s,this.__chain__).thru(function(c){return e&&!c.length&&c.push(f),c})):this.thru(a)}),nl=Rr(function(t,e,n){nt.call(t,n)?++t[n]:Le(t,n,1)}),sl=Hu(ia),ul=Hu(sa);function fa(t,e){return(z(t)?ae:Xe)(t,H(e,3))}function la(t,e){return(z(t)?To:ou)(t,H(e,3))}var hl=Rr(function(t,e,n){nt.call(t,n)?t[n].push(e):Le(t,n,[e])}),ll=Y(function(t,e,n){var s=-1,a="function"==typeof e,c=Yt(t)?v(t.length):[];return Xe(t,function(l){c[++s]=a?jt(e,l,n):Zn(l,e,n)}),c}),pl=Rr(function(t,e,n){Le(t,n,e)});function Gr(t,e){return(z(t)?ht:gu)(t,H(e,3))}var gl=Rr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),yl=Y(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Wt(t,e[0],e[1])?e=[]:n>2&&Wt(e[0],e[1],e[2])&&(e=[e[0]]),Su(t,Rt(e,1),[])}),Ur=rc||function(){return It.Date.now()};function pa(t,e,n){return e=n?f:e,Me(t,128,f,f,f,f,e=t&&null==e?t.length:e)}function da(t,e){var n;if("function"!=typeof e)throw new oe(S);return t=k(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=f),n}}var Xi=Y(function(t,e,n){var s=1;if(n.length){var a=Ze(n,On(Xi));s|=32}return Me(t,s,e,n,a)}),ga=Y(function(t,e,n){var s=3;if(n.length){var a=Ze(n,On(ga));s|=32}return Me(e,s,t,n,a)});function _a(t,e,n){var s,a,c,l,p,g,A=0,y=!1,C=!1,E=!0;if("function"!=typeof t)throw new oe(S);function b(xt){var Se=s,We=a;return s=a=f,A=xt,l=t.apply(We,Se)}function W(xt){var Se=xt-g;return g===f||Se>=e||Se<0||C&&xt-A>=c}function V(){var xt=Ur();if(W(xt))return J(xt);p=Qn(V,function K(xt){var Ha=e-(xt-g);return C?Lt(Ha,c-(xt-A)):Ha}(xt))}function J(xt){return p=f,E&&s?b(xt):(s=a=f,l)}function ie(){var xt=Ur(),Se=W(xt);if(s=arguments,a=this,g=xt,Se){if(p===f)return function F(xt){return A=xt,p=Qn(V,e),y?b(xt):l}(g);if(C)return Eu(p),p=Qn(V,e),b(g)}return p===f&&(p=Qn(V,e)),l}return e=pe(e)||0,lt(n)&&(y=!!n.leading,c=(C="maxWait"in n)?Tt(pe(n.maxWait)||0,e):c,E="trailing"in n?!!n.trailing:E),ie.cancel=function re(){p!==f&&Eu(p),A=0,s=g=a=p=f},ie.flush=function Gt(){return p===f?l:J(Ur())},ie}var Pl=Y(function(t,e){return au(t,1,e)}),Tl=Y(function(t,e,n){return au(t,pe(e)||0,n)});function zr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new oe(S);var n=function(){var s=arguments,a=e?e.apply(this,s):s[0],c=n.cache;if(c.has(a))return c.get(a);var l=t.apply(this,s);return n.cache=c.set(a,l)||c,l};return n.cache=new(zr.Cache||be),n}function kr(t){if("function"!=typeof t)throw new oe(S);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}zr.Cache=be;var Il=gh(function(t,e){var n=(e=1==e.length&&z(e[0])?ht(e[0],te(H())):ht(Rt(e,1),te(H()))).length;return Y(function(s){for(var a=-1,c=Lt(s.length,n);++a<c;)s[a]=e[a].call(this,s[a]);return jt(t,this,s)})}),qi=Y(function(t,e){var n=Ze(e,On(qi));return Me(t,32,f,e,n)}),Sa=Y(function(t,e){var n=Ze(e,On(Sa));return Me(t,64,f,e,n)}),Rl=Ne(function(t,e){return Me(t,256,f,f,f,e)});function _e(t,e){return t===e||t!=t&&e!=e}var kl=Nr(xi),Kl=Nr(function(t,e){return t>=e}),ln=lu(function(){return arguments}())?lu:function(t){return St(t)&&nt.call(t,"callee")&&!Qs.call(t,"callee")},z=v.isArray,$l=Ls?te(Ls):function Qc(t){return St(t)&&Ft(t)==Ke};function Yt(t){return null!=t&&Kr(t.length)&&!He(t)}function Dt(t){return St(t)&&Yt(t)}var je=sc||as,Zl=Ms?te(Ms):function jc(t){return St(t)&&Ft(t)==Ee};function Ji(t){if(!St(t))return!1;var e=Ft(t);return e==en||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!jn(t)}function He(t){if(!lt(t))return!1;var e=Ft(t);return e==gn||e==Oe||"[object AsyncFunction]"==e||"[object Proxy]"==e}function wa(t){return"number"==typeof t&&t==k(t)}function Kr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ct}function lt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function St(t){return null!=t&&"object"==typeof t}var Da=Ns?te(Ns):function eh(t){return St(t)&&Mt(t)==Ht};function xa(t){return"number"==typeof t||St(t)&&Ft(t)==se}function jn(t){if(!St(t)||Ft(t)!=ge)return!1;var e=vr(t);if(null===e)return!0;var n=nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&pr.call(n)==jo}var Qi=Bs?te(Bs):function nh(t){return St(t)&&Ft(t)==nn},Aa=Hs?te(Hs):function rh(t){return St(t)&&Mt(t)==Jt};function $r(t){return"string"==typeof t||!z(t)&&St(t)&&Ft(t)==vn}function ne(t){return"symbol"==typeof t||St(t)&&Ft(t)==vt}var In=Fs?te(Fs):function ih(t){return St(t)&&Kr(t.length)&&!!at[Ft(t)]},cp=Nr(Pi),hp=Nr(function(t,e){return t<=e});function ya(t){if(!t)return[];if(Yt(t))return $r(t)?me(t):$t(t);if(Gn&&t[Gn])return function Uo(d){for(var w,v=[];!(w=d.next()).done;)v.push(w.value);return v}(t[Gn]());var e=Mt(t);return(e==Ht?pi:e==Jt?cr:Rn)(t)}function Fe(t){return t?(t=pe(t))===Xt||t===-Xt?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function k(t){var e=Fe(t),n=e%1;return e==e?n?e-n:e:0}function Ca(t){return t?on(k(t),0,kt):0}function pe(t){if("number"==typeof t)return t;if(ne(t))return NaN;if(lt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=lt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ks(t);var n=ka.test(t);return n||$a.test(t)?yo(t.slice(2),n?2:8):za.test(t)?NaN:+t}function Pa(t){return Ce(t,Zt(t))}function tt(t){return null==t?"":ee(t)}var lp=Tn(function(t,e){if(Jn(e)||Yt(e))Ce(e,Et(e),t);else for(var n in e)nt.call(e,n)&&$n(t,n,e[n])}),Ta=Tn(function(t,e){Ce(e,Zt(e),t)}),Yr=Tn(function(t,e,n,s){Ce(e,Zt(e),t,s)}),pp=Tn(function(t,e,n,s){Ce(e,Et(e),t,s)}),dp=Ne(Si),mp=Y(function(t,e){t=it(t);var n=-1,s=e.length,a=s>2?e[2]:f;for(a&&Wt(e[0],e[1],a)&&(s=1);++n<s;)for(var c=e[n],l=Zt(c),p=-1,g=l.length;++p<g;){var A=l[p],y=t[A];(y===f||_e(y,An[A])&&!nt.call(t,A))&&(t[A]=c[A])}return t}),vp=Y(function(t){return t.push(f,Ku),jt(Ea,f,t)});function ji(t,e,n){var s=null==t?f:cn(t,e);return s===f?n:s}function ts(t,e){return null!=t&&Zu(t,e,Xc)}var Tp=Wu(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=dr.call(e)),t[e]=n},ns(Vt)),Ep=Wu(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=dr.call(e)),nt.call(t,e)?t[e].push(n):t[e]=[n]},H),Op=Y(Zn);function Et(t){return Yt(t)?ru(t):Ci(t)}function Zt(t){return Yt(t)?ru(t,!0):function sh(t){if(!lt(t))return function Uh(t){var e=[];if(null!=t)for(var n in it(t))e.push(n);return e}(t);var e=Jn(t),n=[];for(var s in t)"constructor"==s&&(e||!nt.call(t,s))||n.push(s);return n}(t)}var bp=Tn(function(t,e,n){Er(t,e,n)}),Ea=Tn(function(t,e,n,s){Er(t,e,n,s)}),Lp=Ne(function(t,e){var n={};if(null==t)return n;var s=!1;e=ht(e,function(c){return c=Je(c,t),s||(s=c.length>1),c}),Ce(t,Wi(t),n),s&&(n=he(n,7,Ph));for(var a=e.length;a--;)Ri(n,e[a]);return n}),Np=Ne(function(t,e){return null==t?{}:function ah(t,e){return wu(t,e,function(n,s){return ts(t,s)})}(t,e)});function Oa(t,e){if(null==t)return{};var n=ht(Wi(t),function(s){return[s]});return e=H(e),wu(t,n,function(s,a){return e(s,a[0])})}var Ia=zu(Et),Ra=zu(Zt);function Rn(t){return null==t?[]:li(t,Et(t))}var Zp=En(function(t,e,n){return e=e.toLowerCase(),t+(n?ba(e):e)});function ba(t){return es(tt(t).toLowerCase())}function La(t){return(t=tt(t))&&t.replace(Za,Bo).replace(lo,"")}var Jp=En(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Qp=En(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),jp=Bu("toLowerCase"),ud=En(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),od=En(function(t,e,n){return t+(n?" ":"")+es(e)}),_d=En(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),es=Bu("toUpperCase");function Ma(t,e,n){return t=tt(t),(e=n?f:e)===f?function Go(d){return mo.test(d)}(t)?function Vo(d){return d.match(po)||[]}(t):function Ro(d){return d.match(Fa)||[]}(t):t.match(e)||[]}var Na=Y(function(t,e){try{return jt(t,f,e)}catch(n){return Ji(n)?n:new U(n)}}),Sd=Ne(function(t,e){return ae(e,function(n){n=Pe(n),Le(t,n,Xi(t[n],t))}),t});function ns(t){return function(){return t}}var Ad=Fu(),yd=Fu(!0);function Vt(t){return t}function rs(t){return du("function"==typeof t?t:he(t,1))}var Td=Y(function(t,e){return function(n){return Zn(n,t,e)}}),Ed=Y(function(t,e){return function(n){return Zn(t,n,e)}});function is(t,e,n){var s=Et(e),a=Tr(e,s);null==n&&(!lt(e)||!a.length&&s.length)&&(n=e,e=t,t=this,a=Tr(e,Et(e)));var c=!(lt(n)&&"chain"in n&&!n.chain),l=He(t);return ae(a,function(p){var g=e[p];t[p]=g,l&&(t.prototype[p]=function(){var A=this.__chain__;if(c||A){var y=t(this.__wrapped__);return(y.__actions__=$t(this.__actions__)).push({func:g,args:arguments,thisArg:t}),y.__chain__=A,y}return g.apply(t,Ye([this.value()],arguments))})}),t}function ss(){}var Rd=Bi(ht),bd=Bi(Ws),Ld=Bi(ai);function Ba(t){return ki(t)?oi(Pe(t)):function oh(t){return function(e){return cn(e,t)}}(t)}var Nd=Gu(),Bd=Gu(!0);function us(){return[]}function as(){return!1}var kd=Lr(function(t,e){return t+e},0),Kd=Hi("ceil"),$d=Lr(function(t,e){return t/e},1),Yd=Hi("floor"),jd=Lr(function(t,e){return t*e},1),tg=Hi("round"),eg=Lr(function(t,e){return t-e},0);return o.after=function Cl(t,e){if("function"!=typeof e)throw new oe(S);return t=k(t),function(){if(--t<1)return e.apply(this,arguments)}},o.ary=pa,o.assign=lp,o.assignIn=Ta,o.assignInWith=Yr,o.assignWith=pp,o.at=dp,o.before=da,o.bind=Xi,o.bindAll=Sd,o.bindKey=ga,o.castArray=function Hl(){if(!arguments.length)return[];var t=arguments[0];return z(t)?t:[t]},o.chain=ha,o.chunk=function $h(t,e,n){e=(n?Wt(t,e,n):e===f)?1:Tt(k(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var a=0,c=0,l=v(wr(s/e));a<s;)l[c++]=fe(t,a,a+=e);return l},o.compact=function Yh(t){for(var e=-1,n=null==t?0:t.length,s=0,a=[];++e<n;){var c=t[e];c&&(a[s++]=c)}return a},o.concat=function Zh(){var t=arguments.length;if(!t)return[];for(var e=v(t-1),n=arguments[0],s=t;s--;)e[s-1]=arguments[s];return Ye(z(n)?$t(n):[n],Rt(e,1))},o.cond=function wd(t){var e=null==t?0:t.length,n=H();return t=e?ht(t,function(s){if("function"!=typeof s[1])throw new oe(S);return[n(s[0]),s[1]]}):[],Y(function(s){for(var a=-1;++a<e;){var c=t[a];if(jt(c[0],this,s))return jt(c[1],this,s)}})},o.conforms=function Dd(t){return function $c(t){var e=Et(t);return function(n){return uu(n,t,e)}}(he(t,1))},o.constant=ns,o.countBy=nl,o.create=function gp(t,e){var n=Pn(t);return null==e?n:su(n,e)},o.curry=function ma(t,e,n){var s=Me(t,8,f,f,f,f,f,e=n?f:e);return s.placeholder=ma.placeholder,s},o.curryRight=function va(t,e,n){var s=Me(t,16,f,f,f,f,f,e=n?f:e);return s.placeholder=va.placeholder,s},o.debounce=_a,o.defaults=mp,o.defaultsDeep=vp,o.defer=Pl,o.delay=Tl,o.difference=Vh,o.differenceBy=Xh,o.differenceWith=qh,o.drop=function Jh(t,e,n){var s=null==t?0:t.length;return s?fe(t,(e=n||e===f?1:k(e))<0?0:e,s):[]},o.dropRight=function Qh(t,e,n){var s=null==t?0:t.length;return s?fe(t,0,(e=s-(e=n||e===f?1:k(e)))<0?0:e):[]},o.dropRightWhile=function jh(t,e){return t&&t.length?Ir(t,H(e,3),!0,!0):[]},o.dropWhile=function tf(t,e){return t&&t.length?Ir(t,H(e,3),!0):[]},o.fill=function ef(t,e,n,s){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&Wt(t,e,n)&&(n=0,s=a),function Zc(t,e,n,s){var a=t.length;for((n=k(n))<0&&(n=-n>a?0:a+n),(s=s===f||s>a?a:k(s))<0&&(s+=a),s=n>s?0:Ca(s);n<s;)t[n++]=e;return t}(t,e,n,s)):[]},o.filter=function il(t,e){return(z(t)?$e:cu)(t,H(e,3))},o.flatMap=function al(t,e){return Rt(Gr(t,e),1)},o.flatMapDeep=function ol(t,e){return Rt(Gr(t,e),Xt)},o.flatMapDepth=function cl(t,e,n){return n=n===f?1:k(n),Rt(Gr(t,e),n)},o.flatten=ua,o.flattenDeep=function nf(t){return null!=t&&t.length?Rt(t,Xt):[]},o.flattenDepth=function rf(t,e){return null!=t&&t.length?Rt(t,e=e===f?1:k(e)):[]},o.flip=function El(t){return Me(t,512)},o.flow=Ad,o.flowRight=yd,o.fromPairs=function sf(t){for(var e=-1,n=null==t?0:t.length,s={};++e<n;){var a=t[e];s[a[0]]=a[1]}return s},o.functions=function yp(t){return null==t?[]:Tr(t,Et(t))},o.functionsIn=function Cp(t){return null==t?[]:Tr(t,Zt(t))},o.groupBy=hl,o.initial=function af(t){return null!=t&&t.length?fe(t,0,-1):[]},o.intersection=of,o.intersectionBy=cf,o.intersectionWith=hf,o.invert=Tp,o.invertBy=Ep,o.invokeMap=ll,o.iteratee=rs,o.keyBy=pl,o.keys=Et,o.keysIn=Zt,o.map=Gr,o.mapKeys=function Ip(t,e){var n={};return e=H(e,3),ye(t,function(s,a,c){Le(n,e(s,a,c),s)}),n},o.mapValues=function Rp(t,e){var n={};return e=H(e,3),ye(t,function(s,a,c){Le(n,a,e(s,a,c))}),n},o.matches=function Cd(t){return mu(he(t,1))},o.matchesProperty=function Pd(t,e){return vu(t,he(e,1))},o.memoize=zr,o.merge=bp,o.mergeWith=Ea,o.method=Td,o.methodOf=Ed,o.mixin=is,o.negate=kr,o.nthArg=function Id(t){return t=k(t),Y(function(e){return _u(e,t)})},o.omit=Lp,o.omitBy=function Mp(t,e){return Oa(t,kr(H(e)))},o.once=function Ol(t){return da(2,t)},o.orderBy=function dl(t,e,n,s){return null==t?[]:(z(e)||(e=null==e?[]:[e]),z(n=s?f:n)||(n=null==n?[]:[n]),Su(t,e,n))},o.over=Rd,o.overArgs=Il,o.overEvery=bd,o.overSome=Ld,o.partial=qi,o.partialRight=Sa,o.partition=gl,o.pick=Np,o.pickBy=Oa,o.property=Ba,o.propertyOf=function Md(t){return function(e){return null==t?f:cn(t,e)}},o.pull=df,o.pullAll=oa,o.pullAllBy=function gf(t,e,n){return t&&t.length&&e&&e.length?Ti(t,e,H(n,2)):t},o.pullAllWith=function mf(t,e,n){return t&&t.length&&e&&e.length?Ti(t,e,f,n):t},o.pullAt=vf,o.range=Nd,o.rangeRight=Bd,o.rearg=Rl,o.reject=function _l(t,e){return(z(t)?$e:cu)(t,kr(H(e,3)))},o.remove=function _f(t,e){var n=[];if(!t||!t.length)return n;var s=-1,a=[],c=t.length;for(e=H(e,3);++s<c;){var l=t[s];e(l,s,t)&&(n.push(l),a.push(s))}return Du(t,a),n},o.rest=function bl(t,e){if("function"!=typeof t)throw new oe(S);return Y(t,e=e===f?e:k(e))},o.reverse=Zi,o.sampleSize=function wl(t,e,n){return e=(n?Wt(t,e,n):e===f)?1:k(e),(z(t)?Uc:fh)(t,e)},o.set=function Hp(t,e,n){return null==t?t:Xn(t,e,n)},o.setWith=function Fp(t,e,n,s){return s="function"==typeof s?s:f,null==t?t:Xn(t,e,n,s)},o.shuffle=function Dl(t){return(z(t)?zc:ph)(t)},o.slice=function Sf(t,e,n){var s=null==t?0:t.length;return s?(n&&"number"!=typeof n&&Wt(t,e,n)?(e=0,n=s):(e=null==e?0:k(e),n=n===f?s:k(n)),fe(t,e,n)):[]},o.sortBy=yl,o.sortedUniq=function Pf(t){return t&&t.length?Au(t):[]},o.sortedUniqBy=function Tf(t,e){return t&&t.length?Au(t,H(e,2)):[]},o.split=function ad(t,e,n){return n&&"number"!=typeof n&&Wt(t,e,n)&&(e=n=f),(n=n===f?kt:n>>>0)?(t=tt(t))&&("string"==typeof e||null!=e&&!Qi(e))&&!(e=ee(e))&&Dn(t)?Qe(me(t),0,n):t.split(e,n):[]},o.spread=function Ll(t,e){if("function"!=typeof t)throw new oe(S);return e=null==e?0:Tt(k(e),0),Y(function(n){var s=n[e],a=Qe(n,0,e);return s&&Ye(a,s),jt(t,this,a)})},o.tail=function Ef(t){var e=null==t?0:t.length;return e?fe(t,1,e):[]},o.take=function Of(t,e,n){return t&&t.length?fe(t,0,(e=n||e===f?1:k(e))<0?0:e):[]},o.takeRight=function If(t,e,n){var s=null==t?0:t.length;return s?fe(t,(e=s-(e=n||e===f?1:k(e)))<0?0:e,s):[]},o.takeRightWhile=function Rf(t,e){return t&&t.length?Ir(t,H(e,3),!1,!0):[]},o.takeWhile=function bf(t,e){return t&&t.length?Ir(t,H(e,3)):[]},o.tap=function Zf(t,e){return e(t),t},o.throttle=function Ml(t,e,n){var s=!0,a=!0;if("function"!=typeof t)throw new oe(S);return lt(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),_a(t,e,{leading:s,maxWait:e,trailing:a})},o.thru=Wr,o.toArray=ya,o.toPairs=Ia,o.toPairsIn=Ra,o.toPath=function Ud(t){return z(t)?ht(t,Pe):ne(t)?[t]:$t(na(tt(t)))},o.toPlainObject=Pa,o.transform=function Wp(t,e,n){var s=z(t),a=s||je(t)||In(t);if(e=H(e,4),null==n){var c=t&&t.constructor;n=a?s?new c:[]:lt(t)&&He(c)?Pn(vr(t)):{}}return(a?ae:ye)(t,function(l,p,g){return e(n,l,p,g)}),n},o.unary=function Nl(t){return pa(t,1)},o.union=Lf,o.unionBy=Mf,o.unionWith=Nf,o.uniq=function Bf(t){return t&&t.length?qe(t):[]},o.uniqBy=function Hf(t,e){return t&&t.length?qe(t,H(e,2)):[]},o.uniqWith=function Ff(t,e){return e="function"==typeof e?e:f,t&&t.length?qe(t,f,e):[]},o.unset=function Gp(t,e){return null==t||Ri(t,e)},o.unzip=Vi,o.unzipWith=ca,o.update=function Up(t,e,n){return null==t?t:Cu(t,e,Mi(n))},o.updateWith=function zp(t,e,n,s){return s="function"==typeof s?s:f,null==t?t:Cu(t,e,Mi(n),s)},o.values=Rn,o.valuesIn=function kp(t){return null==t?[]:li(t,Zt(t))},o.without=Wf,o.words=Ma,o.wrap=function Bl(t,e){return qi(Mi(e),t)},o.xor=Gf,o.xorBy=Uf,o.xorWith=zf,o.zip=kf,o.zipObject=function Kf(t,e){return Tu(t||[],e||[],$n)},o.zipObjectDeep=function $f(t,e){return Tu(t||[],e||[],Xn)},o.zipWith=Yf,o.entries=Ia,o.entriesIn=Ra,o.extend=Ta,o.extendWith=Yr,is(o,o),o.add=kd,o.attempt=Na,o.camelCase=Zp,o.capitalize=ba,o.ceil=Kd,o.clamp=function Kp(t,e,n){return n===f&&(n=e,e=f),n!==f&&(n=(n=pe(n))==n?n:0),e!==f&&(e=(e=pe(e))==e?e:0),on(pe(t),e,n)},o.clone=function Fl(t){return he(t,4)},o.cloneDeep=function Gl(t){return he(t,5)},o.cloneDeepWith=function Ul(t,e){return he(t,5,e="function"==typeof e?e:f)},o.cloneWith=function Wl(t,e){return he(t,4,e="function"==typeof e?e:f)},o.conformsTo=function zl(t,e){return null==e||uu(t,e,Et(e))},o.deburr=La,o.defaultTo=function xd(t,e){return null==t||t!=t?e:t},o.divide=$d,o.endsWith=function Vp(t,e,n){t=tt(t),e=ee(e);var s=t.length,a=n=n===f?s:on(k(n),0,s);return(n-=e.length)>=0&&t.slice(n,a)==e},o.eq=_e,o.escape=function Xp(t){return(t=tt(t))&&r.test(t)?t.replace(Qr,Ho):t},o.escapeRegExp=function qp(t){return(t=tt(t))&&M.test(t)?t.replace(R,"\\$&"):t},o.every=function rl(t,e,n){var s=z(t)?Ws:Yc;return n&&Wt(t,e,n)&&(e=f),s(t,H(e,3))},o.find=sl,o.findIndex=ia,o.findKey=function _p(t,e){return Gs(t,H(e,3),ye)},o.findLast=ul,o.findLastIndex=sa,o.findLastKey=function Sp(t,e){return Gs(t,H(e,3),Di)},o.floor=Yd,o.forEach=fa,o.forEachRight=la,o.forIn=function wp(t,e){return null==t?t:wi(t,H(e,3),Zt)},o.forInRight=function Dp(t,e){return null==t?t:hu(t,H(e,3),Zt)},o.forOwn=function xp(t,e){return t&&ye(t,H(e,3))},o.forOwnRight=function Ap(t,e){return t&&Di(t,H(e,3))},o.get=ji,o.gt=kl,o.gte=Kl,o.has=function Pp(t,e){return null!=t&&Zu(t,e,Vc)},o.hasIn=ts,o.head=aa,o.identity=Vt,o.includes=function fl(t,e,n,s){t=Yt(t)?t:Rn(t),n=n&&!s?k(n):0;var a=t.length;return n<0&&(n=Tt(a+n,0)),$r(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&wn(t,e,n)>-1},o.indexOf=function uf(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var a=null==n?0:k(n);return a<0&&(a=Tt(s+a,0)),wn(t,e,a)},o.inRange=function $p(t,e,n){return e=Fe(e),n===f?(n=e,e=0):n=Fe(n),function qc(t,e,n){return t>=Lt(e,n)&&t<Tt(e,n)}(t=pe(t),e,n)},o.invoke=Op,o.isArguments=ln,o.isArray=z,o.isArrayBuffer=$l,o.isArrayLike=Yt,o.isArrayLikeObject=Dt,o.isBoolean=function Yl(t){return!0===t||!1===t||St(t)&&Ft(t)==ze},o.isBuffer=je,o.isDate=Zl,o.isElement=function Vl(t){return St(t)&&1===t.nodeType&&!jn(t)},o.isEmpty=function Xl(t){if(null==t)return!0;if(Yt(t)&&(z(t)||"string"==typeof t||"function"==typeof t.splice||je(t)||In(t)||ln(t)))return!t.length;var e=Mt(t);if(e==Ht||e==Jt)return!t.size;if(Jn(t))return!Ci(t).length;for(var n in t)if(nt.call(t,n))return!1;return!0},o.isEqual=function ql(t,e){return Vn(t,e)},o.isEqualWith=function Jl(t,e,n){var s=(n="function"==typeof n?n:f)?n(t,e):f;return s===f?Vn(t,e,f,n):!!s},o.isError=Ji,o.isFinite=function Ql(t){return"number"==typeof t&&tu(t)},o.isFunction=He,o.isInteger=wa,o.isLength=Kr,o.isMap=Da,o.isMatch=function jl(t,e){return t===e||yi(t,e,Ui(e))},o.isMatchWith=function tp(t,e,n){return n="function"==typeof n?n:f,yi(t,e,Ui(e),n)},o.isNaN=function ep(t){return xa(t)&&t!=+t},o.isNative=function np(t){if(Fh(t))throw new U("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return pu(t)},o.isNil=function ip(t){return null==t},o.isNull=function rp(t){return null===t},o.isNumber=xa,o.isObject=lt,o.isObjectLike=St,o.isPlainObject=jn,o.isRegExp=Qi,o.isSafeInteger=function sp(t){return wa(t)&&t>=-Ct&&t<=Ct},o.isSet=Aa,o.isString=$r,o.isSymbol=ne,o.isTypedArray=In,o.isUndefined=function up(t){return t===f},o.isWeakMap=function ap(t){return St(t)&&Mt(t)==_t},o.isWeakSet=function op(t){return St(t)&&"[object WeakSet]"==Ft(t)},o.join=function ff(t,e){return null==t?"":uc.call(t,e)},o.kebabCase=Jp,o.last=le,o.lastIndexOf=function lf(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var a=s;return n!==f&&(a=(a=k(n))<0?Tt(s+a,0):Lt(a,s-1)),e==e?function Ko(d,w,v){for(var O=v+1;O--;)if(d[O]===w)return O;return O}(t,e,a):or(t,Us,a,!0)},o.lowerCase=Qp,o.lowerFirst=jp,o.lt=cp,o.lte=hp,o.max=function Zd(t){return t&&t.length?Pr(t,Vt,xi):f},o.maxBy=function Vd(t,e){return t&&t.length?Pr(t,H(e,2),xi):f},o.mean=function Xd(t){return zs(t,Vt)},o.meanBy=function qd(t,e){return zs(t,H(e,2))},o.min=function Jd(t){return t&&t.length?Pr(t,Vt,Pi):f},o.minBy=function Qd(t,e){return t&&t.length?Pr(t,H(e,2),Pi):f},o.stubArray=us,o.stubFalse=as,o.stubObject=function Hd(){return{}},o.stubString=function Fd(){return""},o.stubTrue=function Wd(){return!0},o.multiply=jd,o.nth=function pf(t,e){return t&&t.length?_u(t,k(e)):f},o.noConflict=function Od(){return It._===this&&(It._=tc),this},o.noop=ss,o.now=Ur,o.pad=function td(t,e,n){t=tt(t);var s=(e=k(e))?xn(t):0;if(!e||s>=e)return t;var a=(e-s)/2;return Mr(Dr(a),n)+t+Mr(wr(a),n)},o.padEnd=function ed(t,e,n){t=tt(t);var s=(e=k(e))?xn(t):0;return e&&s<e?t+Mr(e-s,n):t},o.padStart=function nd(t,e,n){t=tt(t);var s=(e=k(e))?xn(t):0;return e&&s<e?Mr(e-s,n)+t:t},o.parseInt=function rd(t,e,n){return n||null==e?e=0:e&&(e=+e),cc(tt(t).replace($,""),e||0)},o.random=function Yp(t,e,n){if(n&&"boolean"!=typeof n&&Wt(t,e,n)&&(e=n=f),n===f&&("boolean"==typeof e?(n=e,e=f):"boolean"==typeof t&&(n=t,t=f)),t===f&&e===f?(t=0,e=1):(t=Fe(t),e===f?(e=t,t=0):e=Fe(e)),t>e){var s=t;t=e,e=s}if(n||t%1||e%1){var a=eu();return Lt(t+a*(e-t+Ao("1e-"+((a+"").length-1))),e)}return Ei(t,e)},o.reduce=function ml(t,e,n){var s=z(t)?ui:ks,a=arguments.length<3;return s(t,H(e,4),n,a,Xe)},o.reduceRight=function vl(t,e,n){var s=z(t)?Eo:ks,a=arguments.length<3;return s(t,H(e,4),n,a,ou)},o.repeat=function id(t,e,n){return e=(n?Wt(t,e,n):e===f)?1:k(e),Oi(tt(t),e)},o.replace=function sd(){var t=arguments,e=tt(t[0]);return t.length<3?e:e.replace(t[1],t[2])},o.result=function Bp(t,e,n){var s=-1,a=(e=Je(e,t)).length;for(a||(a=1,t=f);++s<a;){var c=null==t?f:t[Pe(e[s])];c===f&&(s=a,c=n),t=He(c)?c.call(t):c}return t},o.round=tg,o.runInContext=d,o.sample=function Sl(t){return(z(t)?iu:hh)(t)},o.size=function xl(t){if(null==t)return 0;if(Yt(t))return $r(t)?xn(t):t.length;var e=Mt(t);return e==Ht||e==Jt?t.size:Ci(t).length},o.snakeCase=ud,o.some=function Al(t,e,n){var s=z(t)?ai:dh;return n&&Wt(t,e,n)&&(e=f),s(t,H(e,3))},o.sortedIndex=function wf(t,e){return Or(t,e)},o.sortedIndexBy=function Df(t,e,n){return Ii(t,e,H(n,2))},o.sortedIndexOf=function xf(t,e){var n=null==t?0:t.length;if(n){var s=Or(t,e);if(s<n&&_e(t[s],e))return s}return-1},o.sortedLastIndex=function Af(t,e){return Or(t,e,!0)},o.sortedLastIndexBy=function yf(t,e,n){return Ii(t,e,H(n,2),!0)},o.sortedLastIndexOf=function Cf(t,e){if(null!=t&&t.length){var s=Or(t,e,!0)-1;if(_e(t[s],e))return s}return-1},o.startCase=od,o.startsWith=function cd(t,e,n){return t=tt(t),n=null==n?0:on(k(n),0,t.length),e=ee(e),t.slice(n,n+e.length)==e},o.subtract=eg,o.sum=function ng(t){return t&&t.length?hi(t,Vt):0},o.sumBy=function rg(t,e){return t&&t.length?hi(t,H(e,2)):0},o.template=function hd(t,e,n){var s=o.templateSettings;n&&Wt(t,e,n)&&(e=f),t=tt(t),e=Yr({},e,s,ku);var p,g,a=Yr({},e.imports,s.imports,ku),c=Et(a),l=li(a,c),A=0,y=e.interpolate||ir,C="__p += '",E=di((e.escape||ir).source+"|"+y.source+"|"+(y===h?Ua:ir).source+"|"+(e.evaluate||ir).source+"|$","g"),b="//# sourceURL="+(nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_o+"]")+"\n";t.replace(E,function(W,V,J,re,Gt,ie){return J||(J=re),C+=t.slice(A,ie).replace(Va,Fo),V&&(p=!0,C+="' +\n__e("+V+") +\n'"),Gt&&(g=!0,C+="';\n"+Gt+";\n__p += '"),J&&(C+="' +\n((__t = ("+J+")) == null ? '' : __t) +\n'"),A=ie+W.length,W}),C+="';\n";var F=nt.call(e,"variable")&&e.variable;if(F){if(Wa.test(F))throw new U("Invalid `variable` option passed into `_.template`")}else C="with (obj) {\n"+C+"\n}\n";C=(g?C.replace(cs,""):C).replace(hs,"$1").replace(Kt,"$1;"),C="function("+(F||"obj")+") {\n"+(F?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(p?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+C+"return __p\n}";var K=Na(function(){return j(c,b+"return "+C).apply(f,l)});if(K.source=C,Ji(K))throw K;return K},o.times=function Gd(t,e){if((t=k(t))<1||t>Ct)return[];var n=kt,s=Lt(t,kt);e=H(e),t-=kt;for(var a=fi(s,e);++n<t;)e(n);return a},o.toFinite=Fe,o.toInteger=k,o.toLength=Ca,o.toLower=function fd(t){return tt(t).toLowerCase()},o.toNumber=pe,o.toSafeInteger=function fp(t){return t?on(k(t),-Ct,Ct):0===t?t:0},o.toString=tt,o.toUpper=function ld(t){return tt(t).toUpperCase()},o.trim=function pd(t,e,n){if((t=tt(t))&&(n||e===f))return Ks(t);if(!t||!(e=ee(e)))return t;var s=me(t),a=me(e);return Qe(s,$s(s,a),Ys(s,a)+1).join("")},o.trimEnd=function dd(t,e,n){if((t=tt(t))&&(n||e===f))return t.slice(0,Vs(t)+1);if(!t||!(e=ee(e)))return t;var s=me(t);return Qe(s,0,Ys(s,me(e))+1).join("")},o.trimStart=function gd(t,e,n){if((t=tt(t))&&(n||e===f))return t.replace($,"");if(!t||!(e=ee(e)))return t;var s=me(t);return Qe(s,$s(s,me(e))).join("")},o.truncate=function md(t,e){var n=30,s="...";if(lt(e)){var a="separator"in e?e.separator:a;n="length"in e?k(e.length):n,s="omission"in e?ee(e.omission):s}var c=(t=tt(t)).length;if(Dn(t)){var l=me(t);c=l.length}if(n>=c)return t;var p=n-xn(s);if(p<1)return s;var g=l?Qe(l,0,p).join(""):t.slice(0,p);if(a===f)return g+s;if(l&&(p+=g.length-p),Qi(a)){if(t.slice(p).search(a)){var A,y=g;for(a.global||(a=di(a.source,tt(fs.exec(a))+"g")),a.lastIndex=0;A=a.exec(y);)var C=A.index;g=g.slice(0,C===f?p:C)}}else if(t.indexOf(ee(a),p)!=p){var E=g.lastIndexOf(a);E>-1&&(g=g.slice(0,E))}return g+s},o.unescape=function vd(t){return(t=tt(t))&&D.test(t)?t.replace(Jr,$o):t},o.uniqueId=function zd(t){var e=++Qo;return tt(t)+e},o.upperCase=_d,o.upperFirst=es,o.each=fa,o.eachRight=la,o.first=aa,is(o,function(){var t={};return ye(o,function(e,n){nt.call(o.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),o.VERSION="4.17.21",ae(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){o[t].placeholder=o}),ae(["drop","take"],function(t,e){X.prototype[t]=function(n){n=n===f?1:Tt(k(n),0);var s=this.__filtered__&&!e?new X(this):this.clone();return s.__filtered__?s.__takeCount__=Lt(n,s.__takeCount__):s.__views__.push({size:Lt(n,kt),type:t+(s.__dir__<0?"Right":"")}),s},X.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),ae(["filter","map","takeWhile"],function(t,e){var n=e+1,s=1==n||3==n;X.prototype[t]=function(a){var c=this.clone();return c.__iteratees__.push({iteratee:H(a,3),type:n}),c.__filtered__=c.__filtered__||s,c}}),ae(["head","last"],function(t,e){var n="take"+(e?"Right":"");X.prototype[t]=function(){return this[n](1).value()[0]}}),ae(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");X.prototype[t]=function(){return this.__filtered__?new X(this):this[n](1)}}),X.prototype.compact=function(){return this.filter(Vt)},X.prototype.find=function(t){return this.filter(t).head()},X.prototype.findLast=function(t){return this.reverse().find(t)},X.prototype.invokeMap=Y(function(t,e){return"function"==typeof t?new X(this):this.map(function(n){return Zn(n,t,e)})}),X.prototype.reject=function(t){return this.filter(kr(H(t)))},X.prototype.slice=function(t,e){t=k(t);var n=this;return n.__filtered__&&(t>0||e<0)?new X(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==f&&(n=(e=k(e))<0?n.dropRight(-e):n.take(e-t)),n)},X.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},X.prototype.toArray=function(){return this.take(kt)},ye(X.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),s=/^(?:head|last)$/.test(e),a=o[s?"take"+("last"==e?"Right":""):e],c=s||/^find/.test(e);a&&(o.prototype[e]=function(){var l=this.__wrapped__,p=s?[1]:arguments,g=l instanceof X,A=p[0],y=g||z(l),C=function(V){var J=a.apply(o,Ye([V],p));return s&&E?J[0]:J};y&&n&&"function"==typeof A&&1!=A.length&&(g=y=!1);var E=this.__chain__,F=c&&!E,K=g&&!this.__actions__.length;if(!c&&y){l=K?l:new X(this);var W=t.apply(l,p);return W.__actions__.push({func:Wr,args:[C],thisArg:f}),new ce(W,E)}return F&&K?t.apply(this,p):(W=this.thru(C),F?s?W.value()[0]:W.value():W)})}),ae(["pop","push","shift","sort","splice","unshift"],function(t){var e=fr[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);o.prototype[t]=function(){var a=arguments;if(s&&!this.__chain__){var c=this.value();return e.apply(z(c)?c:[],a)}return this[n](function(l){return e.apply(z(l)?l:[],a)})}}),ye(X.prototype,function(t,e){var n=o[e];if(n){var s=n.name+"";nt.call(Cn,s)||(Cn[s]=[]),Cn[s].push({name:e,func:n})}}),Cn[br(f,2).name]=[{name:"wrapper",func:f}],X.prototype.clone=function mc(){var t=new X(this.__wrapped__);return t.__actions__=$t(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=$t(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=$t(this.__views__),t},X.prototype.reverse=function vc(){if(this.__filtered__){var t=new X(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},X.prototype.value=function _c(){var t=this.__wrapped__.value(),e=this.__dir__,n=z(t),s=e<0,a=n?t.length:0,c=function Ih(t,e,n){for(var s=-1,a=n.length;++s<a;){var c=n[s],l=c.size;switch(c.type){case"drop":t+=l;break;case"dropRight":e-=l;break;case"take":e=Lt(e,t+l);break;case"takeRight":t=Tt(t,e-l)}}return{start:t,end:e}}(0,a,this.__views__),l=c.start,p=c.end,g=p-l,A=s?p:l-1,y=this.__iteratees__,C=y.length,E=0,b=Lt(g,this.__takeCount__);if(!n||!s&&a==g&&b==g)return Pu(t,this.__actions__);var F=[];t:for(;g--&&E<b;){for(var K=-1,W=t[A+=e];++K<C;){var V=y[K],re=V.type,Gt=(0,V.iteratee)(W);if(2==re)W=Gt;else if(!Gt){if(1==re)continue t;break t}}F[E++]=W}return F},o.prototype.at=Vf,o.prototype.chain=function Xf(){return ha(this)},o.prototype.commit=function qf(){return new ce(this.value(),this.__chain__)},o.prototype.next=function Jf(){this.__values__===f&&(this.__values__=ya(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?f:this.__values__[this.__index__++]}},o.prototype.plant=function jf(t){for(var e,n=this;n instanceof yr;){var s=ra(n);s.__index__=0,s.__values__=f,e?a.__wrapped__=s:e=s;var a=s;n=n.__wrapped__}return a.__wrapped__=t,e},o.prototype.reverse=function tl(){var t=this.__wrapped__;if(t instanceof X){var e=t;return this.__actions__.length&&(e=new X(this)),(e=e.reverse()).__actions__.push({func:Wr,args:[Zi],thisArg:f}),new ce(e,this.__chain__)}return this.thru(Zi)},o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=function el(){return Pu(this.__wrapped__,this.__actions__)},o.prototype.first=o.prototype.head,Gn&&(o.prototype[Gn]=function Qf(){return this}),o}();It._=hr,(et=function(){return hr}.call(de,Ut,de,we))!==f&&(we.exports=et)}.call(this)},944:(we,de,Ut)=>{"use strict";Ut.d(de,{Ef:()=>Z,GC:()=>Bt,GN:()=>qr,Gi:()=>Ht,If:()=>Xt,KK:()=>en,M5:()=>gt,O0:()=>_n,W:()=>ge,WM:()=>ut,WU:()=>Mn,YF:()=>pn,YR:()=>Ae,Zq:()=>De,_O:()=>bt,aE:()=>xe,e_:()=>Ct,gh:()=>Ge,im:()=>rt,oF:()=>Oe,oN:()=>rn,uY:()=>er,wh:()=>se});var et=Ut(940),f=function(D){return D[D.fresh=1]="fresh",D[D.brackish=2]="brackish",D[D.salt=3]="salt",D}(f||{});let pt=(()=>{class D{static#t=this.fresh=1e3;static#e=this.brackish=1020;static#n=this.salt=1030}return D})(),dt=(()=>{class D{static#t=this.standard=9.80665}return D})(),q=(()=>{class D{static#t=this.coefficient=1e5;static pascalToBar(i){return i/D.coefficient}static barToPascal(i){return i*D.coefficient}}return D})();class S{static#t=this.standard=1.01325;static#e=this.standardPascals=q.barToPascal(S.standard);static#n=this.gasConstant=8.31432;static#r=this.temperature=288.15;static#i=this.lapsRate=-.0065;static#s=this.molarMass=.0289644;static#u=this.exponent=dt.standard*S.molarMass/(S.gasConstant*S.lapsRate);static#a=this.invertedExponent=1/S.exponent;static pressure(r){return S.standardPascals*Math.pow(S.temperature/(S.temperature+S.lapsRate*r),S.exponent)}static altitude(r){if(r>=S.standardPascals)return 0;const u=Math.pow(r/S.standardPascals,S.invertedExponent);return(S.temperature/u-S.temperature)/S.lapsRate}}class T{constructor(r,i,u,h,m,x){this._n2HalfTime=r,this._n2A=i,this._n2B=u,this._heHalfTime=h,this._heA=m,this._heB=x}get n2HalfTime(){return this._n2HalfTime}get n2A(){return this._n2A}get n2B(){return this._n2B}get heHalfTime(){return this._heHalfTime}get heA(){return this._heA}get heB(){return this._heB}}class G{static#t=this.buhlmannZHL16C=[new T(5,1.1696,.5578,1.88,1.6189,.477),new T(8,1,.6514,3.02,1.383,.5747),new T(12.5,.8618,.7222,4.72,1.1919,.6527),new T(18.5,.7562,.7826,6.99,1.0458,.7223),new T(27,.62,.8125,10.21,.922,.7582),new T(38.3,.5043,.8434,14.48,.8205,.7957),new T(54.3,.441,.8693,20.53,.7305,.8279),new T(77,.4,.891,29.11,.6502,.8553),new T(109,.375,.9092,41.2,.595,.8757),new T(146,.35,.9222,55.19,.5545,.8903),new T(187,.3295,.9319,70.69,.5333,.8997),new T(239,.3065,.9403,90.34,.5189,.9073),new T(305,.2835,.9477,115.29,.5181,.9122),new T(390,.261,.9544,147.42,.5176,.9171),new T(498,.248,.9602,188.24,.5172,.9217),new T(635,.2327,.9653,240.03,.5119,.9267)]}class L{static#t=this.o2InAir=.209;static#e=this.nitroxInAir=1-L.o2InAir;static#n=this.minPpO2=.18;static#r=this.maxEnd=30;static partialPressure(r,i){return r*i}static mod(r,i){return r/i}static bestMix(r,i,u){const m=r/u.toBar(i);return m>1?1:m}static ead(r,i,u=L.o2InAir){const m=1-u;return L.end(i,1-r)/m}static end(r,i,u=0){return r*this.narcoticIndex(u,i)}static mnd(r,i,u=0){return r/this.narcoticIndex(u,i)}static ceiling(r,i){const h=L.minPpO2/r*i;return h<i?i:h}static narcoticIndex(r,i=0){return i+r}}class wt extends T{constructor(r,i){super(r.n2HalfTime,r.n2A,r.n2B,r.heHalfTime,r.heA,r.heB),this._pN2=0,this._pHe=0,this._pTotal=0,this._a=0,this._b=0;const u=this.pressureInLungs(i);this._pN2=L.partialPressure(u,L.nitroxInAir),this._pHe=0,this.updateTotal()}get pN2(){return this._pN2}get pHe(){return this._pHe}get pTotal(){return this._pTotal}get a(){return this._a}get b(){return this._b}static fromCurrent(r,i){const u=new wt(i,1);return u._pN2=r.pN2,u._pHe=r.pHe,u._a=r.a,u._b=r.b,u.updateTotal(),u}copy(){return wt.fromCurrent(this,this)}ceiling(r){return(this.pTotal-this.a*r)/(r/this.b+1-r)}load(r,i){this._pN2=this.loadGas(r,i.fN2,this.pN2,this.n2HalfTime),this._pHe=this.loadGas(r,i.fHe,this.pHe,this.heHalfTime);const u=this.pTotal;return this.updateTotal(),this._a=(this.n2A*this.pN2+this.heA*this.pHe)/this.pTotal,this._b=(this.n2B*this.pN2+this.heB*this.pHe)/this.pTotal,this.pTotal-u}loadGas(r,i,u,h){const m=r.speed*i,x=this.pressureInLungs(r.startPressure)*i;return this.schreinerEquation(u,x,r.duration,h,m)}pressureInLungs(r){return r-.0627}schreinerEquation(r,i,u,h,m){const P=.01155245301/h;return i+m*(u-1/P)-(i-r-m/P)*Math.exp(-P*u)}updateTotal(){this._pTotal=this.pN2+this.pHe}}class ft{constructor(r){this._compartments=r}get compartments(){return this._compartments}static createLoaded(r){if(r.length!==G.buhlmannZHL16C.length)throw new Error("Provided incompatible count of tissues");const i=et(r).map((u,h)=>wt.fromCurrent(u,G.buhlmannZHL16C[h])).value();return new ft(i)}static create(r){const i=[];for(let u=0;u<G.buhlmannZHL16C.length;u++){const m=new wt(G.buhlmannZHL16C[u],r);i.push(m)}return new ft(i)}static createLoadedAt(r){const i=S.pressure(r),u=q.pascalToBar(i);return ft.create(u).finalState()}static copy(r){const i=[];for(let u=0;u<r.length;u++){const h=r[u].copy();i.push(h)}return i}restoreFrom(r){this._compartments=ft.copy(r)}finalState(){return ft.copy(this._compartments)}ceiling(r){let i=0;for(let u=0;u<this._compartments.length;u++){const h=this._compartments[u].ceiling(r);h>i&&(i=h)}return i}load(r,i){let u=0;for(let h=0;h<this._compartments.length;h++)u+=this._compartments[h].load(r,i);return u}}class zt{static validTissue(r){return r.pN2>0&&r.pHe>=0&&r.a>=0&&r.b>=0}static validCount(r){return!!r&&r.length===G.buhlmannZHL16C.length}static valid(r){return!!zt.validCount(r)&&et(r).every(u=>zt.validTissue(u))}}class N{static fix(r){return Number(r.toFixed(10))}static roundTwoDecimals(r){return N.round(r,2)}static round(r,i=0){return N.adapt(Math.round,r,i)}static floorTwoDecimals(r){return N.floor(r,2)}static floor(r,i=0){return N.adapt(Math.floor,r,i)}static ceilTwoDecimals(r){return N.ceil(r,2)}static ceil(r,i=0){return N.adapt(Math.ceil,r,i)}static ceilDistance(r,i){return N.adaptDistance(Math.ceil,r,i)}static roundDistance(r,i){return N.adaptDistance(Math.round,r,i)}static floorDistance(r,i){return N.adaptDistance(Math.floor,r,i)}static adapt(r,i,u){const h=Math.pow(10,u);return r(i*h)/h}static adaptDistance(r,i,u){return r(i/u)*u}}class gt{constructor(r){this.options=r}create(){switch(this.options.salinity){case f.salt:return yt.forSaltWater(this.options.altitude);case f.brackish:return yt.forBrackishWater(this.options.altitude);default:return yt.forFreshWater(this.options.altitude)}}}class yt{constructor(r,i){this.density=r,this._gravity=dt.standard;const u=S.pressure(i);this._surfacePressure=q.pascalToBar(u)}get surfacePressure(){return this._surfacePressure}static forSaltWater(r=0){return new yt(pt.salt,r)}static forBrackishWater(r=0){return new yt(pt.brackish,r)}static forFreshWater(r=0){return new yt(pt.fresh,r)}static simple(){const r=new yt(pt.fresh,0);return r._surfacePressure=1,r._gravity=10,r}toBar(r){return q.pascalToBar(r*(this.density*this._gravity))+this._surfacePressure}fromBar(r){if(r<this._surfacePressure)throw new Error("Lower pressure than altitude isn`t convertible to depth.");const i=this.density*this._gravity;return q.barToPascal(r-this._surfacePressure)/i}}var tn=function(D){return D[D.never=1]="never",D[D.auto=2]="auto",D[D.always=3]="always",D}(tn||{});class B{static#t=this.altitude=0;static#e=this.saltWater=f.salt;static#n=this.roundStopsToMinutes=!1;static#r=this.gasSwitchDuration=2;static#i=this.problemSolvingDuration=1;static#s=this.lastStopDepth=3;static#u=this.lastStopDepthRecre=5;static#a=this.safetyStopRecre=tn.auto;static#o=this.decoStopDistance=3;static#c=this.minimumAutoStopDepth=10;static#h=this.addSafetyStop=!0;static#f=this.maxEND=L.maxEnd;static#l=this.oxygenNarcotic=!0;static#p=this.ascentSpeed6m=3;static#d=this.ascentSpeed50percTo6m=6;static#g=this.ascentSpeed50perc=9;static#m=this.descentSpeed=18;static#v=this.gfLow=.4;static#_=this.gfHigh=.85;static#S=this.maxPpO2=1.4;static#w=this.maxDecoPpO2=1.6;static setMediumConservatism(r){r.gfLow=B.gfLow,r.gfHigh=B.gfHigh}static useGeneralRecommended(r){r.safetyStop=B.safetyStopRecre,r.roundStopsToMinutes=B.roundStopsToMinutes,r.gasSwitchDuration=B.gasSwitchDuration,r.oxygenNarcotic=B.oxygenNarcotic}}class De{constructor(r=B.gfLow,i=B.gfHigh,u=B.maxPpO2,h=B.maxDecoPpO2,m=B.saltWater){this.gfLow=r,this.gfHigh=i,this.maxPpO2=u,this.maxDecoPpO2=h,this.salinity=m,this.altitude=B.altitude,this.roundStopsToMinutes=B.roundStopsToMinutes,this.gasSwitchDuration=B.gasSwitchDuration,this.safetyStop=B.safetyStopRecre,this.lastStopDepth=B.lastStopDepth,this.decoStopDistance=B.decoStopDistance,this.minimumAutoStopDepth=B.minimumAutoStopDepth,this.maxEND=B.maxEND,this.oxygenNarcotic=!0,this.ascentSpeed6m=B.ascentSpeed6m,this.ascentSpeed50percTo6m=B.ascentSpeed50percTo6m,this.ascentSpeed50perc=B.ascentSpeed50perc,this.descentSpeed=B.descentSpeed,this.problemSolvingDuration=B.problemSolvingDuration,this.gfLow=r||B.gfLow,this.gfHigh=i||B.gfHigh,this.maxPpO2=u||B.maxPpO2,this.maxDecoPpO2=h||B.maxDecoPpO2,this.salinity=m||B.saltWater}loadFrom(r){this.gfLow=r.gfLow||this.gfLow,this.gfHigh=r.gfHigh||this.gfHigh,this.maxPpO2=r.maxPpO2||this.maxPpO2,this.maxDecoPpO2=r.maxDecoPpO2||this.maxDecoPpO2,this.oxygenNarcotic=!!r.oxygenNarcotic,this.salinity=r.salinity||this.salinity,this.altitude=r.altitude||0===r.altitude?r.altitude:this.altitude,this.roundStopsToMinutes=!!r.roundStopsToMinutes,this.gasSwitchDuration=r.gasSwitchDuration||this.gasSwitchDuration,this.problemSolvingDuration=r.problemSolvingDuration||this.problemSolvingDuration,this.lastStopDepth=r.lastStopDepth||this.lastStopDepth,this.decoStopDistance=r.decoStopDistance||this.decoStopDistance,this.minimumAutoStopDepth=r.minimumAutoStopDepth||this.minimumAutoStopDepth,this.safetyStop=r.safetyStop||this.safetyStop,this.maxEND=r.maxEND||this.maxEND,this.ascentSpeed6m=r.ascentSpeed6m||this.ascentSpeed6m,this.ascentSpeed50percTo6m=r.ascentSpeed50percTo6m||this.ascentSpeed50percTo6m,this.ascentSpeed50perc=r.ascentSpeed50perc||this.ascentSpeed50perc,this.descentSpeed=r.descentSpeed||this.descentSpeed}}class Nt{constructor(r,i){this.depthConverter=r,this.options=i}toDecoStop(r){const i=this.depthConverter.fromBar(r);return N.roundDistance(i,this.options.decoStopDistance)}nextStop(r){if(r<=this.options.lastStopDepth)return 0;const i=N.floorDistance(r,this.options.decoStopDistance);if(i!==r)return i;const u=r-this.options.decoStopDistance;return u<=this.options.lastStopDepth?this.options.lastStopDepth:u}addSafetyStop(r,i){return(this.options.safetyStop===tn.always||this.options.safetyStop===tn.auto&&i>this.options.minimumAutoStopDepth)&&r===this.options.lastStopDepth}}var mt=function(D){return D[D.noAction=0]="noAction",D[D.error=1]="error",D[D.gasSwitch=2]="gasSwitch",D[D.noDecoEnd=3]="noDecoEnd",D[D.lowPpO2=4]="lowPpO2",D[D.highPpO2=5]="highPpO2",D[D.highAscentSpeed=6]="highAscentSpeed",D[D.highDescentSpeed=7]="highDescentSpeed",D[D.brokenCeiling=8]="brokenCeiling",D[D.maxEndExceeded=9]="maxEndExceeded",D[D.switchToHigherN2=10]="switchToHigherN2",D[D.highGasDensity=11]="highGasDensity",D[D.safetyStop=12]="safetyStop",D[D.minDepth=13]="minDepth",D[D.maxDepth=14]="maxDepth",D}(mt||{});class rt{constructor(r,i,u,h,m){this.timeStamp=r,this.depth=i,this.type=u,this.message=h,this.gas=m}static create(r,i,u,h){return new rt(i,u,r,"",h)}static createError(r){return new rt(0,0,mt.error,r)}}class ot{static createError(r){return rt.createError(r)}static createSafetyStopStart(r,i){return rt.create(mt.safetyStop,r,i)}static createNoDecoEnd(r,i){return rt.create(mt.noDecoEnd,r,i)}static createGasSwitch(r,i,u){return rt.create(mt.gasSwitch,r,i,u)}static createLowPpO2(r,i){return rt.create(mt.lowPpO2,r,i)}static createHighPpO2(r,i){return rt.create(mt.highPpO2,r,i)}static createHighAscentSpeed(r,i){return rt.create(mt.highAscentSpeed,r,i)}static createHighDescentSpeed(r,i){return rt.create(mt.highDescentSpeed,r,i)}static createBrokenCeiling(r,i){return rt.create(mt.brokenCeiling,r,i)}static createMaxEndExceeded(r,i,u){return rt.create(mt.maxEndExceeded,r,i,u)}static createSwitchToHigherN2(r,i,u){return rt.create(mt.switchToHigherN2,r,i,u)}static createHighDensity(r,i,u){return rt.create(mt.highGasDensity,r,i,u)}static createShallowDepth(r){return rt.create(mt.minDepth,0,r)}static createMaxDepth(r){return rt.create(mt.maxDepth,0,r)}}class pn{constructor(){this.items=[]}add(r){this.items.push(r)}}class Zr{constructor(r,i){this.time=r,this.depth=i}get notAtSurface(){return this.depth>0}static isDecoDive(r){for(const i of r)if(i.notAtSurface)return!0;return!1}}class Ge{constructor(r,i,u,h){this.seg=r,this.ceil=i,this.tiss=u,this.err=h}get segments(){return this.seg}get ceilings(){return this.ceil}get tissues(){return this.tiss}get errors(){return this.err}static fromErrors(r,i){return new Ge(r,[],[],i)}static fromProfile(r,i,u){return new Ge(r,i,u,[])}}class Vr{static validate(r){const i=[];if(!r.hasBottomGas){const u=ot.createError("At least one bottom gas has to be defined.");return i.push(u),i}return i}}class Xr{constructor(r,i){this.gases=r,this.depthConverter=yt.simple(),this.depthLevels=new Nt(this.depthConverter,i)}bestGas(r){const i=this.depthConverter.toBar(r.currentDepth),u=this.depthConverter.toBar(r.maxEnd);let h=r.currentGas;return this.gases.all.forEach(m=>{const x=m.mod(r.maxDecoPpO2),P=this.depthLevels.toDecoStop(x),R=m.end(i,r.oxygenNarcotic);r.currentDepth<=P&&R<=u&&(!h||h.fO2<m.fO2)&&(h=m)}),h}}class xe{constructor(){this.bottomGases=[]}get all(){return this.bottomGases.slice()}get hasBottomGas(){return this.bottomGases.length>=1}static fromTanks(r){const i=new xe;return r.forEach(u=>{i.add(u.gas)}),i}add(r){this.bottomGases.push(r)}isRegistered(r){return this.bottomGases.includes(r)}}class ut{constructor(r,i){if(this._fO2=r,this._fHe=i,this.contentExceeds100percent())throw new Error("O2 + He can't exceed 100 %")}get fN2(){return 1-this._fO2-this._fHe}get fO2(){return this._fO2}get fHe(){return this._fHe}get name(){return ut.nameFor(this.fO2,this.fHe)}set fO2(r){this._fO2=r>1?1:r,this.contentExceeds100percent()&&(this._fHe=this.countRemaining(this._fO2))}set fHe(r){this._fHe=r>.99?.99:r,this.contentExceeds100percent()&&(this._fO2=this.countRemaining(this._fHe))}static init(r,i){ut.nameFor=r,ut.byName=i}copy(){return new ut(this._fO2,this._fHe)}mod(r){return L.mod(r,this._fO2)}end(r,i){return L.end(r,this.fN2,i?this._fO2:0)}mnd(r,i){return L.mnd(r,this.fN2,i?this._fO2:0)}ceiling(r){return L.ceiling(this._fO2,r)}compositionEquals(r){return!!r&&this._fO2===r._fO2&&this._fHe===r._fHe}contentCode(){return N.round(1e4*this._fO2*1e4)+N.round(1e4*this._fHe)}assignStandardGas(r){const i=ut.byName(r);i&&(this.fO2=i.fO2,this.fHe=i.fHe)}contentExceeds100percent(){return this._fO2+this._fHe>1}countRemaining(r){return N.round(1-r,5)}}class Q{static#t=this.oxygen=new ut(1,0);static#e=this.ean50=new ut(.5,0);static#n=this.ean38=new ut(.38,0);static#r=this.ean36=new ut(.36,0);static#i=this.ean32=new ut(.32,0);static#s=this.trimix3525=new ut(.35,.25);static#u=this.trimix2525=new ut(.25,.25);static#a=this.air=new ut(L.o2InAir,0);static#o=this.trimix2135=new ut(.21,.35);static#c=this.trimix1845=new ut(.18,.45);static#h=this.trimix1555=new ut(.15,.55);static#f=this.trimix1260=new ut(.12,.6);static#l=this.trimix1070=new ut(.1,.7);static#p=this.airName="Air";static#d=this.oxygenName="Oxygen";static#g=this.namesRegEx=/[EAN](?<fO2>\d{2})|(?<fO2b>\d{2})\/(?<fHe>\d{2})/i;static#m=this.map=new Map([[Q.airName,Q.air],["EAN32",Q.ean32],["EAN36",Q.ean36],["EAN38",Q.ean38],["EAN50",Q.ean50],[Q.oxygenName,Q.oxygen],["Helitrox 35/25",Q.trimix3525],["Helitrox 25/25",Q.trimix2525],["Helitrox 21/35",Q.trimix2135],["Trimix 18/45",Q.trimix1845],["Trimix 15/55",Q.trimix1555],["Trimix 12/60",Q.trimix1260],["Trimix 10/70",Q.trimix1070]]);static nitroxNames(){return Q.allNames().slice(0,6)}static allNames(){return Array.from(Q.map.keys())}static nameFor(r,i=0){const h=N.round(100*r),m=N.round(100*i);return h<=0?"":m<=0?h>=100?Q.oxygenName:21===h?Q.airName:"EAN"+h.toString():`${h>=21?"Helitrox":"Trimix"} ${h.toString()}/${m.toString()}`}static byName(r){const i=[...Q.map.keys()],u=et(i).filter(m=>m.toLowerCase()===r.toLowerCase()).first();if(u)return Q.map.get(u)??null;const h=Q.namesRegEx.exec(r);if(h){if(h[1]){const m=Number(h[1])/100;if(m>0)return new ut(m,0)}if(h[2]&&h[3]){const m=Number(h[2])/100,x=Number(h[3])/100;if(m>0&&x>0)return new ut(m,x)}}return null}}ut.init((D,r)=>Q.nameFor(D,r),D=>Q.byName(D));class Xt{static haveReserve(r){for(let i=0;i<r.length;i++)if(!r[i].hasReserve)return!1;return!0}static resetConsumption(r){r.forEach(i=>{i.consumed=0,i.reserve=0})}static removeTank(r,i){const u=r.filter(h=>h!==i);return Xt.renumberIds(u),u}static renumberIds(r){for(let i=0;i<r.length;i++)r[i].id=i+1}}class Ct{constructor(r,i,u){this.size=r,this.startPressure=i,this.id=0,this.consumed=0,this.reserve=0,this._gas=Q.air.copy(),this.o2=u}get gas(){return this._gas}get o2(){return Ue.getO2(this.gas.fO2,this.gas.fHe)}get he(){return N.roundTwoDecimals(100*this.gas.fHe)}get n2(){return N.roundTwoDecimals(100-this.o2-this.he)}get volume(){return Ct.volume(this)}get reserveVolume(){return Ct.volume2(this.size,this.reserve)}get consumedVolume(){return Ct.volume2(this.size,this.consumed)}get name(){return this._gas.name}get endPressure(){const r=this.startPressure-this.consumed;return r>0?r:0}get percentsRemaining(){return this.endPressure/this.startPressure*100}get percentsReserve(){const r=this.reserve/this.startPressure*100;return r>100?100:r}get hasReserve(){return this.endPressure>=this.reserve}set o2(r){this._gas.fO2=Ue.setO2(r,this.gas.fHe)}set he(r){this.gas.fHe=r/100}static createDefault(){return new Ct(15,200,100*L.o2InAir)}static volume(r){return Ct.volume2(r.size,r.startPressure)}static volume2(r,i){return r*i}assignStandardGas(r){this.gas.assignStandardGas(r)}loadFrom(r){this.size=r.size,this.startPressure=r.startPressure,this.consumed=r.consumed,this.reserve=r.reserve,this.gas.fO2=r._gas.fO2,this.gas.fHe=r._gas.fHe}}class Ue{static#t=this.pinnedO2=21;static#e=this.o2InAirPercent=100*L.o2InAir;static getO2(r,i){const u=100*r;return this.isInAirRange(u,i)?Ue.pinnedO2:N.roundTwoDecimals(u)}static setO2(r,i){return this.isInAirRange(r,i)?L.o2InAir:r/100}static isInAirRange(r,i){return Ue.o2InAirPercent<=r&&r<=Ue.pinnedO2&&0===i}}class qt{static speed(r,i){return qt.speedByXChange(i.start,i.end,r.end-r.start)}static speedByXChange(r,i,u){return(i-r)/u}static yValueAt(r,i,u){return r+i*u}static xValueAtAbsolute(r,i,u){const h=this.speed(r,i);return r.start+qt.xValueAt(i.start,h,u)}static xValueAt(r,i,u){return 0===i?0:(u-r)/i}}class kt{static validate(r,i){const u=[];if(!r.any()){const h=ot.createError("There needs to be at least one segment at depth.");u.push(h)}return r.withAll(h=>{kt.validateRegisteredGas(u,i,h)}),u}static validateRegisteredGas(r,i,u){if(!i.isRegistered(u.gas)){const m=ot.createError(`Segment ${u.startDepth}-${u.endDepth} has gas not registered in gases.`);r.push(m)}}}class Bt{constructor(r,i,u,h){this._startDepth=r,this._endDepth=i,this._duration=h,u instanceof Ct?(this._tank=u,this._gas=u.gas):this._gas=u}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}get duration(){return this._duration}get gas(){return this._gas}get tank(){return this._tank}get speed(){return Bt.speed(this.startDepth,this.endDepth,this.duration)}get averageDepth(){return(this.startDepth+this.endDepth)/2}set startDepth(r){this._startDepth=r}set endDepth(r){this._endDepth=r}set duration(r){this._duration=r}set tank(r){this._tank=r,r&&(this._gas=r.gas)}static from(r){const i=new Bt(r.startDepth,r.endDepth,r._gas,r.duration);return i.tank=r.tank,i}static speed(r,i,u){return qt.speedByXChange(r,i,u)}static depthAt(r,i,u){return qt.yValueAt(r,i,u)}static timeAt(r,i,u){return qt.xValueAt(r,i,u)}contentEquals(r){return this.speed===r.speed&&this._gas===r._gas}depthAt(r){return Bt.depthAt(this.startDepth,this.speed,r)}mergeFrom(r){this.duration+=r.duration,this.endDepth=r.endDepth}}class bt{constructor(){this.segments=[],this._maxDepth=0}get startAscentIndex(){return this.deepestPart().length}get startAscentTime(){const r=this.deepestPart();return bt.duration(r)}get length(){return this.segments.length}get items(){return this.segments.slice()}get maxDepth(){return this._maxDepth}get currentDepth(){return this.any()?this.last().endDepth:0}get duration(){return bt.duration(this.segments)}static from(r){return bt.fromCollection(r.segments)}static fromCollection(r){const i=new bt;return r.forEach(u=>{const h=Bt.from(u);i.segments.push(h),i.updateMaxDepth(h)}),i}static duration(r){let i=0;for(const u of r)i+=u.duration;return i}static averageDepth(r){if(r.length<=0)return 0;let i=0,u=0;return r.forEach(h=>{if(h.duration>0){const m=h.averageDepth*h.duration+u*i;u+=h.duration,i=m/u}}),i}add(r,i,u){const h=new Bt(this.currentDepth,r,i,u);return this.segments.push(h),this.updateMaxDepth(h),h}addFlat(r,i){return this.add(this.currentDepth,r,i)}mergeFlat(r=0){if(r<0)return this.items;const i=[];for(let u=this.segments.length-1;u>r;u--){const h=this.segments[u-1],m=this.segments[u];h.contentEquals(m)&&(h.mergeFrom(m),i.push(m))}return this.segments=this.segments.filter(u=>!i.includes(u)),this.items}remove(r){this.segments=this.segments.filter(i=>i!==r),this.fixStartDepths()}cutDown(r){this.segments=this.segments.slice(0,this.segments.length-r),this.fixStartDepths()}withAll(r){for(let i=0;i<this.segments.length;i++)r(this.segments[i])}any(){return 0!==this.segments.length}last(){return this.segments[this.segments.length-1]}copy(){return bt.from(this)}fixStartDepths(){this.any()&&(this.segments[0].startDepth=0);for(let r=0;r<this.segments.length-1;r++){const u=this.segments[r+1];u.startDepth=this.segments[r].endDepth,this.updateMaxDepth(u)}}deepestPart(){for(let r=this.segments.length-1;r>=0;r--)if(this.segments[r].endDepth===this.maxDepth)return this.items.slice(0,r+1);return[]}updateMaxDepth(r){r.endDepth>this._maxDepth&&(this._maxDepth=r.endDepth)}}class Z{static#t=this.oneSecond=1;static#e=this.oneMinute=60;static#n=this.oneHour=60*Z.oneMinute;static#r=this.oneDay=24*Z.oneHour;static#i=this.safetyStopDuration=3*Z.oneMinute;static toSeconds(r){return r*Z.oneMinute}static toMinutes(r){return r/Z.oneMinute}static toHours(r){return r/Z.oneHour}}let Te=(()=>{class D{static#t=this.minimalStep=1;constructor(){}search(i){if(i.maxValue<i.initialValue)throw Error("Max value cant be smaller than initial value");if(i.estimationStep>i.maxValue-i.initialValue)throw Error("Step cant be larger than range");const u=this.findInitialLimit(i);return this.searchInsideInterval(i,u)}searchInsideInterval(i,u){for(;u.right-u.left>D.minimalStep;){let h=u.left+(u.right-u.left)/2;h=Math.round(h),i.doWork(h),i.meetsCondition()?u.left=h:u.right=h}return u.left}findInitialLimit(i){let u=i.initialValue;for(i.doWork(u);i.meetsCondition()&&u<=i.maxValue;)u+=i.estimationStep,i.doWork(u);let h=u-i.estimationStep;return h=h<i.initialValue?i.initialValue:h,{left:h,right:u>i.maxValue?i.maxValue:u}}}return D})();class dn{constructor(r,i,u){this.depthConverter=r,this.options=i,this.tissues=u,this.lowestCeiling=0,this.lowestCeiling=this.depthConverter.surfacePressure+1}ceiling(){let r=this.tolerated();return r<this.depthConverter.surfacePressure&&(r=this.depthConverter.surfacePressure),this.depthConverter.fromBar(r)}toleratedTissues(r,i,u,h){const m=this.tissues.compartments;let x=0;for(let P=0;P<m.length;P++){const R=m[P];let M=x;(r/R.b+R.a-r)*u+r<(i/R.b+R.a-i)*h+i&&(M=(-R.a*R.b*(u*i-h*r)-(1-R.b)*(u-h)*i*r+R.b*(i-r)*R.pTotal)/(-R.a*R.b*(u-h)+(1-R.b)*(h*i-u*r)+R.b*(i-r))),M>=x&&(x=M)}return x}tolerated(){const r=this.options.gfLow,i=this.options.gfHigh,u=this.depthConverter.surfacePressure,h=this.tissues.ceiling(r);return h>this.lowestCeiling&&(this.lowestCeiling=h),this.toleratedTissues(u,this.lowestCeiling,i,r)}}let ze=(()=>{class D{static#t=this.sixMeters=6;constructor(i){this.options=i,this.averageDepth=0}markAverageDepth(i){const u=i.deepestPart();this.averageDepth=bt.averageDepth(u)}ascent(i){return i>D.sixMeters?i>this.averageDepth/2?this.options.ascentSpeed50perc:this.options.ascentSpeed50percTo6m:this.options.ascentSpeed6m}}return D})();class Ee{constructor(r,i,u,h,m){this.gases=r,this.segments=i,this.options=u,this.depthConverter=h,this.ceilings=[],this.runTime=0,this.tissues=ft.createLoaded(m),this.gradients=new dn(h,u,this.tissues);const x=i.last();this.currentGas=x.gas,this.bestGasOptions={currentDepth:this.currentDepth,maxDecoPpO2:this.options.maxDecoPpO2,oxygenNarcotic:this.options.oxygenNarcotic,maxEnd:this.options.maxEND,currentGas:this.currentGas},this.speeds=new ze(this.options),this.levels=new Nt(h,u),this.gasSource=new Xr(r,u)}get ascentSpeed(){return this.speeds.ascent(this.currentDepth)}get currentDepth(){return this.segments.currentDepth}get ambientPressure(){return this.depthConverter.toBar(this.currentDepth)}get addSafetyStop(){return this.levels.addSafetyStop(this.currentDepth,this.segments.maxDepth)}get decoStopDuration(){return this.options.roundStopsToMinutes?Z.oneMinute:Z.oneSecond}get isAtSurface(){return 0===this.segments.last().endDepth}markAverageDepth(){this.speeds.markAverageDepth(this.segments)}addCeiling(){const r=this.ceiling(),i=new Zr(this.runTime,r);this.ceilings.push(i)}ceiling(){return this.gradients.ceiling()}bestDecoGas(){return this.bestGasOptions.currentDepth=this.currentDepth,this.bestGasOptions.currentGas=this.currentGas,this.gasSource.bestGas(this.bestGasOptions)}createMemento(){return{runTime:this.runTime,tissues:ft.copy(this.tissues.compartments),ceilings:this.ceilings.length,segments:this.segments.length,lowestCeiling:this.gradients.lowestCeiling}}restore(r){this.tissues.restoreFrom(r.tissues),this.gradients.lowestCeiling=r.lowestCeiling,this.runTime=r.runTime,this.ceilings=this.ceilings.slice(0,r.ceilings),this.segments.cutDown(this.segments.length-r.segments)}nextStop(r){return this.levels.nextStop(r)}shouldSwitchTo(r){return r&&!this.currentGas.compositionEquals(r)}addGasSwitchSegment(){return this.addStopSegment(this.options.gasSwitchDuration*Z.oneMinute)}addDecoStopSegment(){return this.addStopSegment(0)}addSafetyStopSegment(){return this.addStopSegment(Z.safetyStopDuration)}addAscentSegment(r,i){return this.segments.add(r,this.currentGas,i)}addStopSegment(r){return this.segments.addFlat(this.currentGas,r)}}const tr=(D,r)=>D/Z.toMinutes(r);class en{constructor(r,i){this.current=r,this.surfaceInterval=i}}class gn{constructor(r,i,u){this.previousTissues=r,this.altitude=i,this.surfaceInterval=u}}class Oe{constructor(r,i,u,h){this._segments=r,this._gases=i,this._options=u,this._surface=this.resolveSurfaceParameters(h)}get segments(){return this._segments}get gases(){return this._gases}get options(){return this._options}get surfaceInterval(){return new gn(this._surface.current,this.options.altitude,this._surface.surfaceInterval)}static forSimpleDive(r,i,u,h){const m=new xe;m.add(i);const x=new bt,P=tr(r,u.descentSpeed);return x.add(r,i,P),new Oe(x,m,u,h)}static forMultilevelDive(r,i,u,h){return new Oe(r,i,u,h)}resolveSurfaceParameters(r){if(r&&zt.validCount(r?.current))return r;const i=ft.createLoadedAt(this.options.altitude);return new en(i,Number.POSITIVE_INFINITY)}}class Ht{noDecoLimit({segments:r,gases:i,options:u,surfaceInterval:h}){const m=new gt(u).create(),x=this.applySurfaceInterval(h),P=new Ee(i,r,u,m,x);return this.swimNoDecoLimit(r,i,P)}decompression({segments:r,gases:i,options:u,surfaceInterval:h}){const m=new gt(u).create(),x=r.copy(),P=this.validate(r,i);if(P.length>0){const ct=x.mergeFlat(r.length);return Ge.fromErrors(ct,P)}const R=this.applySurfaceInterval(h),M=new Ee(i,x,u,m,R);this.swimPlan(M),M.markAverageDepth();let $=M.nextStop(M.currentDepth);for(;$>=0&&!M.isAtSurface;)this.tryGasSwitch(M),this.stayAtDecoStop(M,$),this.stayAtSafetyStop(M),this.ascentToNextStop(M,$),$=M.nextStop($);const Ot=M.segments.mergeFlat(r.length);return Ge.fromProfile(Ot,M.ceilings,M.tissues.finalState())}applySurfaceInterval({previousTissues:r,altitude:i,surfaceInterval:u}){if(!zt.valid(r))throw Error("Provided tissues collection isn`t valid. It needs have valid items of 16 compartments ordered by halftime.");if(i<0)throw Error("Altitude needs to be positive number or 0.");if(u<0)throw Error("Surface interval needs to be positive number or 0.");if(u===Number.POSITIVE_INFINITY)return ft.createLoadedAt(i);const h=new bt,m=h.addFlat(Q.air,u),x=new xe;x.add(Q.air);const P=new De(1,1,1.6,1.6,f.salt);P.altitude=i;const R=new gt(P).create(),M=new Ee(x,h,P,R,r);return this.swim(M,m),M.tissues.finalState()}tryGasSwitch(r){const i=r.bestDecoGas();if(r.shouldSwitchTo(i)){r.currentGas=i;const u=r.addGasSwitchSegment();this.swim(r,u)}}stayAtDecoStop(r,i){if(this.needsDecoStop(r,i)){const u=r.createMemento(),h={estimationStep:20*Z.oneMinute,initialValue:0,maxValue:Z.oneDay,doWork:R=>this.swimDecoStop(r,u,R),meetsCondition:()=>this.needsDecoStop(r,i)},x=(new Te).search(h)+Z.oneSecond,P=N.ceilDistance(x,r.decoStopDuration);this.swimDecoStop(r,u,P)}}swimDecoStop(r,i,u){r.restore(i);const h=r.addDecoStopSegment();h.duration=u,this.swim(r,h)}needsDecoStop(r,i){if(i>=r.ceiling())return!1;const u=r.createMemento();this.ascentToNextStop(r,i);const h=i<r.ceiling();return r.restore(u),h}stayAtSafetyStop(r){if(r.addSafetyStop){const i=r.addSafetyStopSegment();this.swim(r,i)}}ascentToNextStop(r,i){const h=tr(r.currentDepth-i,r.ascentSpeed),m=r.addAscentSegment(i,h);this.swim(r,m)}validate(r,i){const u=kt.validate(r,i);if(u.length>0)return u;const h=Vr.validate(i);return h.length>0?h:[]}swimPlan(r){r.addCeiling(),r.segments.withAll(i=>{this.swim(r,i)})}swim(r,i){let u=i.startDepth;const h=Z.oneSecond;for(let m=0;m<i.duration;m+=h){const x=Bt.depthAt(u,i.speed,h),P=new Bt(u,x,i.gas,h);this.swimPart(r,P),u=P.endDepth}}swimPart(r,i){const u=this.toLoadSegment(r.depthConverter,i);r.tissues.load(u,i.gas),r.runTime+=i.duration,r.addCeiling()}swimNoDecoLimit(r,i,u){if(this.validate(r,i).length>0)return 0;this.swimPlan(u);const m=this.currentNdl(u.ceilings);return m!==Number.POSITIVE_INFINITY?m:this.predictNoDecoLimit(r,u)}predictNoDecoLimit(r,i){const u=r.last(),h=u.endDepth,m=new Bt(h,h,u.gas,Z.oneMinute),x=this.toLoadSegment(i.depthConverter,m);let P=1;for(;i.ceiling()<=0&&P>0;)P=i.tissues.load(x,u.gas),i.runTime+=Z.oneMinute;return 0===P||0===h?Number.POSITIVE_INFINITY:this.floorNdl(i.runTime)}floorNdl(r){let i=Z.toMinutes(r);return i=N.floor(i),i-1}currentNdl(r){for(let i=0;i<r.length;i+=Z.oneMinute){const u=r[i];if(u.notAtSurface)return this.floorNdl(u.time)}return Number.POSITIVE_INFINITY}toLoadSegment(r,i){const u=r.toBar(i.speed)-r.surfacePressure;return{startPressure:r.toBar(i.startDepth),duration:i.duration,speed:u}}}class se{static createPlan(r,i,u,h){const m=new bt,x=se.descentDuration(r,h);m.add(r,u,x);let P=Z.toSeconds(i)-x;return P=P<0?0:P,m.addFlat(u,P),m}static descentDuration(r,i){let u=r/i.descentSpeed;return u=N.ceil(u,1),u=Z.toSeconds(u),N.ceil(u)}static emergencyAscent(r,i,u){const m=bt.fromCollection(r).deepestPart(),x=m.length;se.addSolvingSegment(m,i.problemSolvingDuration),se.addUserDefinedAscent(m,r,x);const P=bt.fromCollection(m),R=xe.fromTanks(u),M=new Ht,$=Oe.forMultilevelDive(P,R,i),ct=M.decompression($).segments;return ct.slice(x,ct.length)}static addSolvingSegment(r,i){if(0===r.length)return;const h=r[r.length-1],m=h.endDepth,x=new Bt(m,m,h.gas,i*Z.oneMinute);r.push(x)}static addUserDefinedAscent(r,i,u){for(let h=u;h<i.length;h++){const m=i[h];if(!m.tank)return;r.push(m)}}}class mn{constructor(r,i,u,h){this.duration=r,this.startTime=0,this.endTime=0,this.averageDepth=0,this._startDepth=0,this._endDepth=0,this.endTime=N.roundTwoDecimals(r),this._endDepth=i,this._startDepth=u,this.averageDepth=h}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}static fromSegment(r){return new mn(r.duration,r.endDepth,r.startDepth,r.averageDepth)}}let ge=(()=>{class D{static#t=this.minimumRockBottom=30;constructor(i){this.depthConverter=i}static calculateDecompression(i,u,h){const m=xe.fromTanks(u),x=new Ht,P=i.copy(),R=Oe.forMultilevelDive(P,m,h);return x.decompression(R)}consumeFromTanks(i,u,h,m){if(i.length<2)throw new Error("Profile needs to contain at least 2 segments.");const x=se.emergencyAscent(i,u,h);this.consumeFromTanks2(i,x,u,h,m)}consumeFromTanks2(i,u,h,m,x){if(i.length<2)throw new Error("Profile needs to contain at least 2 segments.");Xt.resetConsumption(m);const P=this.consumeByTanks(i,x.rmv);this.consumeByGases(i,m,x.rmv,P),this.updateReserve(u,m,x.stressRmv)}calculateMaxBottomTime(i,u,h,m){const x=this.createTestProfile(i),P=x.last(),R={estimationStep:40*Z.oneMinute,initialValue:0,maxValue:Z.oneDay,doWork:ct=>{P.duration=ct,this.consumeFromProfile(x,u,h,m)},meetsCondition:()=>Xt.haveReserve(u)},$=(new Te).search(R);if(0===$)return 0;const Ot=Z.toMinutes(i.duration+$);return N.floor(Ot)}consumeFromProfile(i,u,h,m){const x=D.calculateDecompression(i,u,m);this.consumeFromTanks(x.segments,m,u,h)}createTestProfile(i){const u=i.copy(),h=i.last();return u.addFlat(h.gas,0),u}updateReserve(i,u,h){const m=this.toBeConsumed(i,h,()=>!0);for(let x=0;x<=u.length-1;x++){const P=u[x],R=P.gas.contentCode();let M=m.get(R)||0;M=this.addReserveToTank(P,M),m.set(R,M)}u[0].reserve<D.minimumRockBottom&&(u[0].reserve=D.minimumRockBottom)}addReserveToTank(i,u){const h=N.ceil(u/i.size),m=h+i.reserve>i.startPressure?i.startPressure-i.reserve:h;return i.reserve+=m,this.extractRemaining(u,m,i.size)}consumeByGases(i,u,h,m){const x=this.toBeConsumedYet(i,h,m,P=>!P.tank);for(let P=u.length-1;P>=0;P--){const R=u[P],M=R.gas.contentCode();let $=x.get(M)||0;$=this.consumeFromTank(R,$),x.set(M,$)}}consumeByTanks(i,u){const h=new Map,m=Z.toMinutes(u);return i.forEach(x=>{if(x.tank){const P=x.tank,R=x.gas.contentCode(),M=mn.fromSegment(x),$=this.consumedBySegment(M,m),Ot=this.consumeFromTank(P,$);let ct=h.get(R)||0;ct+=Ot,h.set(R,ct)}}),h}consumeFromTank(i,u){const h=N.ceil(u/i.size),m=h>i.endPressure?i.endPressure:h;return i.consumed+=m,this.extractRemaining(u,m,i.size)}extractRemaining(i,u,h){return(i-=u*h)<0?0:i}toBeConsumed(i,u,h){return this.toBeConsumedYet(i,u,new Map,h)}toBeConsumedYet(i,u,h,m){const x=Z.toMinutes(u);for(let P=0;P<i.length;P++){const R=i[P];if(m(R)){const $=R.gas.contentCode(),Ot=mn.fromSegment(R),ct=this.consumedBySegment(Ot,x);let Qt=h.get($)||0;Qt+=ct,h.set($,Qt)}}return h}consumedBySegment(i,u){const h=this.depthConverter.toBar(i.averageDepth);return i.duration*h*u}}return D})();class er{constructor(r){this.depthConverter=r,this.minimumPpO2=.5}calculateForProfile(r){let i=0;return r.forEach(u=>{const m=this.calculate(u.gas.fO2,u.startDepth,u.endDepth,u.duration);i+=m}),i}calculate(r,i,u,h){const P=r*this.depthConverter.toBar((i+u)/2);if(P<=this.minimumPpO2)return 0;const R=this.exponentByPpO2(P);return h*Math.exp(R)*100}exponentByPpO2(r){return r<=1.5?1.93873*r-11.7853:9.80829*r-23.6349}}let ke=(()=>{class D{static#t=this.imperialTankSize=124.1;static#e=this.imperialTankWorkPressure=3442;static#n=this.imperialStageSize=80.1;static#r=this.imperialStageWorkPressure=3e3;static#i=this.mertricTankSize=15;static#s=this.metricStageSize=11.1}return D})();class nn{get available(){return[this.primary,this.stage,{name:"2xLP85",size:165,workingPressure:2640},{name:"S40",size:41.3,workingPressure:3e3},{name:"LP85",size:82.5,workingPressure:2640},{name:"HP80",size:84.4,workingPressure:3442},{name:"HP100",size:106.7,workingPressure:3442}]}get primary(){return{name:"HP117",size:ke.imperialTankSize,workingPressure:ke.imperialTankWorkPressure}}get stage(){return{name:"S80",size:ke.imperialStageSize,workingPressure:ke.imperialStageWorkPressure}}}class vt{static#t=this.lastStopDepth=15;static#e=this.depthDistance=10;static#n=this.descentSpeed=6*vt.depthDistance;static#r=this.recreSpeed=3*vt.depthDistance;static#i=this.maxEnd=10*vt.depthDistance;get tanks(){return new nn}get lastSpeedLevel(){return 20}get autoStopLevel(){return 33}get stopsDistance(){return vt.depthDistance}get recreationalOptions(){return{ascentSpeed50perc:vt.recreSpeed,ascentSpeed50percTo6m:vt.recreSpeed,ascentSpeed6m:vt.recreSpeed,descentSpeed:vt.descentSpeed,lastStopDepth:vt.lastStopDepth,maxEND:vt.maxEnd}}get recommendedOptions(){return{ascentSpeed50perc:vt.recreSpeed,ascentSpeed50percTo6m:2*vt.depthDistance,ascentSpeed6m:vt.depthDistance,descentSpeed:vt.descentSpeed,lastStopDepth:vt.depthDistance,maxEND:vt.maxEnd}}}let qr=(()=>{class D{static#t=this.defaultSac=20;constructor(i=D.defaultSac){this.rmv=i}get stressRmv(){return 3*this.rmv}static gasSac(i,u){return i/u}gasSac(i){return D.gasSac(this.rmv,i.size)}loadFrom(i){this.rmv=i.rmv}}return D})();class _n{constructor(r,i,u){this.gas=r,this.depth=i,this.density=u}static createDefault(){return new _n(Q.air,0,0)}applyHigher(r,i,u){u>this.density&&(this.gas=r,this.density=u,this.depth=i)}}let Ke=(()=>{class D{constructor(){this.helium=.179,this.nitrogen=1.251,this.oxygen=1.428}static#t=this.recommendedMaximum=5.7;forGas(i){return this.forContent(i.fO2,i.fHe)}forContent(i,u){return this.nitrogen*(1-i-u)+this.oxygen*i+this.helium*u}}return D})();class Ae{constructor(r){this.depthConverter=r,this.density=new Ke}forProfile(r){const i=_n.createDefault();return r.forEach(u=>{const h=u.gas,m=this.density.forGas(h);this.applyHigher(i,h,u.startDepth,m),this.applyHigher(i,h,u.endDepth,m)}),i}atDepth(r,i){const u=this.density.forGas(r);return this.fromAtaDensity(u,i)}applyHigher(r,i,u,h){const m=this.fromAtaDensity(h,u);r.applyHigher(i,u,m)}fromAtaDensity(r,i){return r*this.depthConverter.toBar(i)}}let Mn=(()=>{class D{static#t=this.dailyLimit=300;constructor(i){this.depthConverter=i,this.minPressure=.5}calculateForProfile(i){let u=0;return i.forEach(h=>{const x=this.calculate(h.duration,h.gas.fO2,h.startDepth,h.endDepth);u+=x}),u}calculate(i,u,h,m){let x=Z.toMinutes(i),M=this.depthConverter.toBar(h)*u,$=this.depthConverter.toBar(m)*u;if(M<=this.minPressure&&$<=this.minPressure)return 0;M<=this.minPressure?(x=x*($-this.minPressure)/($-M),M=.501):$<=this.minPressure&&(x=x*(M-this.minPressure)/(M-$),$=.501);const Ot=M+$-1;return Math.pow(Ot,5/6)*(1-5*Math.pow($-M,2)/216/Math.pow(Ot,2))*x}}return D})();class Nn{constructor(r,i,u){this.startDepth=r,this.endDepth=i,this.duration=u}get minDepth(){return Math.min(this.startDepth,this.endDepth)}get maxDepth(){return Math.max(this.startDepth,this.endDepth)}get isDescent(){return this.startDepth<this.endDepth}get isFlat(){return this.startDepth===this.endDepth}get isAscent(){return this.startDepth>this.endDepth}timeAt(r){const i=Bt.speed(this.startDepth,this.endDepth,this.duration),u=Bt.timeAt(this.startDepth,i,r);return N.round(u)}}class Bn{constructor(r){this.simpleDepths=yt.simple(),this.events=new pn,this.elapsed=0,this.index=0,this.fixedMnd=!0,this.profile=r.profile,this.options=r.profileOptions,this.startAscentIndex=r.startAscentIndex,this.maxDensity=r.maxDensity,this.exactDepths=new gt(this.options).create(),this.levels=new Nt(this.exactDepths,this.options),this.densityAtDepth=new Ae(this.exactDepths),this.speeds=new ze(this.options);const i=bt.fromCollection(this.profile);this._maxDepth=i.maxDepth,this._totalDuration=i.duration,this.speeds.markAverageDepth(i),this._mndBars=this.simpleDepths.toBar(this.options.maxEND)}get maxDepth(){return this._maxDepth}get totalDuration(){return this._totalDuration}get previous(){return this.index>0?this.profile[this.index-1]:null}get isBeforeDecoAscent(){return this.index<this.startAscentIndex}get maxPpo(){return this.isBeforeDecoAscent?this.options.maxPpO2:this.options.maxDecoPpO2}get current(){return this.profile[this.index]}get switchingGas(){return!!this.previous&&!this.current.gas.compositionEquals(this.previous.gas)}get switchingTank(){return!!this.previous&&!!this.previous.tank&&!!this.current.tank&&this.previous.tank!==this.current.tank}get maxMnd(){return this._mndBars}get currentEndTime(){return this.elapsed+this.current.duration}get atSafetyStop(){return this.index===this.profile.length-2&&this.levels.addSafetyStop(this.current.startDepth,this.maxDepth)}gasEnd(r){return this.current.gas.end(r,this.options.oxygenNarcotic)}addElapsed(){this.elapsed=this.currentEndTime}}class rn{static fromProfile(r){const i=new Bn(r),u=new Hn(i.events,i.current);for(i.index=0;i.index<r.profile.length;i.index++){const h=this.toPressureSegment(i.current,i.simpleDepths);this.addHighPpO2(i,h),this.addLowPpO2(i,h),this.addGasSwitch(i),this.addUserTankSwitch(i),this.addHighDescentSpeed(i),this.addHighAscentSpeed(i),this.addSwitchHighN2(i),this.addMndExceeded(i,h),this.addDensityExceeded(i),this.addSafetyStop(i),u.assignSegment(i.current),rn.addBrokenCeiling(u,r.ceilings),i.addElapsed()}return this.addShallowDepth(i),this.addMaximumDepth(i),i.events}static addHighAscentSpeed(r){const i=r.current;let u=Z.toSeconds(i.speed);if(u=N.roundTwoDecimals(u),-u>r.speeds.ascent(i.startDepth)){const h=ot.createHighAscentSpeed(r.elapsed,i.startDepth);r.events.add(h)}}static addHighDescentSpeed(r){const i=r.current;if(Z.toSeconds(i.speed)>r.options.descentSpeed){const h=ot.createHighDescentSpeed(r.elapsed,i.startDepth);r.events.add(h)}}static addGasSwitch(r){if(r.switchingGas){const i=r.current,u=ot.createGasSwitch(r.elapsed,i.startDepth,i.gas);r.events.add(u)}}static addUserTankSwitch(r){if(r.switchingTank){const i=r.current,u=ot.createGasSwitch(r.elapsed,i.startDepth,i.gas);r.events.add(u)}}static toPressureSegment(r,i){const u=i.toBar(r.startDepth),h=i.toBar(r.endDepth);return new Nn(u,h,r.duration)}static addHighPpO2(r,i){if(i.isDescent||r.isBeforeDecoAscent&&r.switchingGas){const u=r.current.gas.mod(r.maxPpo);if(i.maxDepth>u){let h=i.startDepth,m=r.elapsed;i.startDepth<u&&(h=u,m+=i.timeAt(h));const x=r.simpleDepths.fromBar(h),P=ot.createHighPpO2(m,x);r.events.add(P)}}}static addLowPpO2(r,i){const u=r.current,h=u.gas.ceiling(r.simpleDepths.surfacePressure);if(i.minDepth<h&&r.switchingGas||i.startDepth>h&&h>i.endDepth&&i.isAscent||0===u.startDepth&&i.startDepth<h&&i.isDescent){let x=i.startDepth,P=r.elapsed;i.startDepth>h&&(x=h,P+=i.timeAt(x));const R=r.simpleDepths.fromBar(x),M=ot.createLowPpO2(P,R);r.events.add(M)}}static addBrokenCeiling(r,i){for(;r.lastCeilingIndex<r.currentSegmentEndTime&&r.lastCeilingIndex<i.length-1;){const u=i[r.lastCeilingIndex];r.lastCeilingIndex++,this.addNdlEnd(r,u);const h=r.belowCeiling(u);if(!h&&r.fixedBrokenCeiling){const m=ot.createBrokenCeiling(u.time,u.depth);r.events.add(m),r.fixedBrokenCeiling=!1;break}if(h&&!r.fixedBrokenCeiling&&(r.fixedBrokenCeiling=!0),u.time>r.currentSegmentEndTime)break}}static addNdlEnd(r,i){if(!r.ndlCeilingMarked&&i.depth>0){r.ndlCeilingMarked=!0;const h=r.current.depthAt(i.time-r.currentSegmentStartTime),m=ot.createNoDecoEnd(i.time,h);r.events.add(m)}}static addSwitchHighN2(r){const i=r.current,u=r.previous;if(r.switchingGas&&u&&u.gas.fHe>0&&5*(i.gas.fN2-u.gas.fN2)>-(i.gas.fHe-u.gas.fHe)){const x=ot.createSwitchToHigherN2(r.elapsed,i.startDepth,i.gas);r.events.add(x)}}static addMndExceeded(r,i){const u=r.current,h=r.gasEnd(i.startDepth),m=r.gasEnd(i.endDepth);if(r.maxMnd<h&&r.fixedMnd||r.maxMnd<m&&r.fixedMnd)if(i.startDepth>r.maxMnd)this.addMndEvent(r,r.elapsed,u.startDepth);else{const R=qt.xValueAtAbsolute({start:r.elapsed,end:r.elapsed+u.duration},{start:i.startDepth,end:i.endDepth},r.maxMnd),M=u.depthAt(R-r.elapsed);this.addMndEvent(r,R,M)}r.fixedMnd=m<=r.maxMnd}static addMndEvent(r,i,u){const m=ot.createMaxEndExceeded(i,u,r.current.gas);r.events.add(m),r.fixedMnd=!0}static addDensityExceeded(r){const i=r.current,u=i.gas,m=i.endDepth,x=i.endDepth>i.startDepth,P=r.switchingGas,R=r.densityAtDepth.atDepth(u,i.startDepth),M=r.densityAtDepth.atDepth(u,m);if(P&&R>r.maxDensity||x&&M>r.maxDensity)if(i.startDepth>i.endDepth){const $=ot.createHighDensity(r.elapsed,i.startDepth,i.gas);r.events.add($)}else{const ct=qt.xValueAtAbsolute({start:r.elapsed,end:r.elapsed+i.duration},{start:R,end:M},r.maxDensity),Qt=i.depthAt(ct-r.elapsed),Ie=ot.createHighDensity(ct,Qt,i.gas);r.events.add(Ie)}}static addSafetyStop(r){const i=r.current;if(r.atSafetyStop&&i.duration>=Z.safetyStopDuration){const h=ot.createSafetyStopStart(r.elapsed+i.duration-Z.safetyStopDuration,i.endDepth);r.events.add(h)}}static addShallowDepth(r){if(r.maxDepth<9&&r.totalDuration>5*Z.oneHour){const i=ot.createShallowDepth(r.maxDepth);r.events.add(i)}}static addMaximumDepth(r){if(r.maxDepth>120){const i=ot.createMaxDepth(r.maxDepth);r.events.add(i)}}}class Hn{constructor(r,i){this.events=r,this.lastCeilingIndex=0,this.currentSegmentStartTime=0,this.currentSegmentEndTime=0,this.fixedBrokenCeiling=!0,this.ndlCeilingMarked=!1,this._current=i}get current(){return this._current}assignSegment(r){this.currentSegmentStartTime=this.currentSegmentEndTime,this.currentSegmentEndTime=this.currentSegmentStartTime+r.duration,this._current=r}belowCeiling(r){return this._current.depthAt(r.time-this.currentSegmentStartTime)>=r.depth}}class Kt{static#t=this.psiRate=14.503773773022;static#e=this.cftRate=28.316846592;static#n=this.lbRate=2.20462262185;static#r=this.footRate=.3048;static#i=this.poundRate=.00220462262;static#s=this.lbPerCuftRate=Kt.poundRate*Kt.cftRate;get name(){return"Imperial"}get lengthShortcut(){return"ft"}get pressureShortcut(){return"psi"}get volumeShortcut(){return"cuft"}get weightShortcut(){return"lb"}get altitudeShortcut(){return"ft.a.s.l"}get densityShortcut(){return"lb/cuft"}toMeters(r){return r*Kt.footRate}fromMeters(r){return r/Kt.footRate}toBar(r){return r/Kt.psiRate}fromBar(r){return r*Kt.psiRate}toLiter(r){return r*Kt.cftRate}fromLiter(r){return r/Kt.cftRate}fromTankLiters(r,i){return this.fromLiter(r)*i}toTankLiters(r,i){return this.toLiter(r)/i}fromGramPerLiter(r){return r*Kt.lbPerCuftRate}fromKilogram(r){return r*Kt.lbRate}toKilogram(r){return r/Kt.lbRate}}}}]);