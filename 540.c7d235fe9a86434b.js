(self.webpackChunkplanner=self.webpackChunkplanner||[]).push([[540],{124:(we,pe,kt)=>{"use strict";kt.d(pe,{G:()=>dt});var et=kt(940),f=kt.n(et),pt=kt(944);class dt{static toTanks(S){const I=[];return S.forEach(T=>{const G=new pt.e_(T.size,T.startPressure,0);G.id=T.id,G.gas.fO2=T.gas.fO2,G.gas.fHe=T.gas.fHe,I.push(G)}),pt.If.renumberIds(I),I}static fromTanks(S){const I=[];return S.forEach(T=>{const G=T.tank,M={id:G.id,size:G.size,workPressure:T.workingPressureBars,startPressure:G.startPressure,gas:dt.fromGas(G.gas)};I.push(M)}),I}static toConsumed(S){const I=[];for(let T=0;T<S.length;T++){const G=S[T];I.push({id:G.id,consumed:G.consumed,reserve:G.reserve})}return I}static toSegments(S,I){const T=[];for(let G=0;G<S.length;G++){const M=S[G],xt=dt.toGas(M.gas),Ct=new pt.GC(M.startDepth,M.endDepth,xt,M.duration);M.tankId>0&&M.tankId<=I.length&&(Ct.tank=I[M.tankId-1]),T.push(Ct)}return T}static fromSegments(S){const I=[];return S.forEach(T=>{const M={startDepth:T.startDepth,endDepth:T.endDepth,duration:T.duration,tankId:T.tank?T.tank.id:0,gas:dt.fromGas(T.gas)};I.push(M)}),I}static toProfile(S,I){const T=dt.toSegments(S.segments,I);if(S.errors.length>0){const M=dt.toEvents(S.errors);return pt.gh.fromErrors(T,M.items)}const G=dt.toTissues(S.tissues);return pt.gh.fromProfile(T,S.ceilings,G)}static fromProfile(S){return{segments:dt.fromSegments(S.segments),ceilings:S.ceilings,tissues:dt.fromTissues(S.tissues),errors:dt.fromEvents(S.errors)}}static toTissues(S){return f()(S).map(I=>({pN2:I.pN2,pHe:I.pHe,a:I.a,b:I.b})).value()}static fromTissues(S){return f()(S).map(I=>({pN2:I.pN2,pHe:I.pHe,a:I.a,b:I.b})).value()}static toEvents(S){const I=new pt.YF;return S.forEach(T=>{const G=pt.im.create(T.type,T.timeStamp,T.depth);G.message=T.message,T.gas&&(G.gas=dt.toGas(T.gas)),I.add(G)}),I}static fromEvents(S){const I=[];return S.forEach(T=>{const G={timeStamp:T.timeStamp,depth:T.depth,type:T.type,message:T.message};T.gas&&(G.gas=dt.fromGas(T.gas)),I.push(G)}),I}static fromDiver(S){return{rmv:S.rmv,stressRmv:S.stressRmv}}static toDiver(S){return new pt.GN(S.rmv,S.stressRmv)}static fromOptions(S){return{gfLow:S.gfLow,gfHigh:S.gfHigh,maxPpO2:S.maxPpO2,maxDecoPpO2:S.maxDecoPpO2,salinity:S.salinity,altitude:S.altitude,roundStopsToMinutes:S.roundStopsToMinutes,gasSwitchDuration:S.gasSwitchDuration,safetyStop:S.safetyStop,lastStopDepth:S.lastStopDepth,decoStopDistance:S.decoStopDistance,minimumAutoStopDepth:S.minimumAutoStopDepth,maxEND:S.maxEND,oxygenNarcotic:S.oxygenNarcotic,ascentSpeed6m:S.ascentSpeed6m,ascentSpeed50percTo6m:S.ascentSpeed50percTo6m,ascentSpeed50perc:S.ascentSpeed50perc,descentSpeed:S.descentSpeed,problemSolvingDuration:S.problemSolvingDuration}}static toOptions(S){const I=new pt.Zq(S.gfLow,S.gfHigh,S.maxPpO2,S.maxDecoPpO2,S.salinity);return I.altitude=S.altitude,I.roundStopsToMinutes=S.roundStopsToMinutes,I.gasSwitchDuration=S.gasSwitchDuration,I.safetyStop=S.safetyStop,I.lastStopDepth=S.lastStopDepth,I.decoStopDistance=S.decoStopDistance,I.minimumAutoStopDepth=S.minimumAutoStopDepth,I.maxEND=S.maxEND,I.oxygenNarcotic=S.oxygenNarcotic,I.ascentSpeed6m=S.ascentSpeed6m,I.ascentSpeed50percTo6m=S.ascentSpeed50percTo6m,I.ascentSpeed50perc=S.ascentSpeed50perc,I.descentSpeed=S.descentSpeed,I.problemSolvingDuration=S.problemSolvingDuration,I}static fromDensity(S){return{gas:dt.fromGas(S.gas),depth:S.depth,density:S.density}}static toDensity(S){const I=dt.toGas(S.gas);return new pt.O0(I,S.depth,S.density)}static toGas(S){return new pt.WM(S.fO2,S.fHe)}static fromGas(S){return{fO2:S.fO2,fHe:S.fHe}}}},540:(we,pe,kt)=>{"use strict";kt.d(pe,{o:()=>pt});var et=kt(944),f=kt(124);class pt{static calculateDecompression(Z){const S=this.profileParametersFromTask(Z),T=(new et.Gi).decompression(S),G=f.G.fromProfile(T),xt=et.oN.fromProfile({maxDensity:Z.eventOptions.maxDensity,startAscentIndex:S.segments.startAscentIndex,profile:T.segments,ceilings:T.ceilings,profileOptions:S.options}),Ct=f.G.fromEvents(xt.items);return{diveId:Z.diveId,profile:G,events:Ct}}static diveInfo(Z){const S=this.profileParametersFromTask(Z),T=(new et.Gi).noDecoLimit(S),G=new et.M5(Z.options).create(),M=S.segments.items,xt=new et.WU(G).calculateForProfile(M),Ct=new et.uY(G).calculateForProfile(M),ot=new et.YR(G).forProfile(M);return{diveId:Z.diveId,noDeco:T,otu:xt,cns:Ct,density:f.G.fromDensity(ot)}}static calculateConsumption(Z){const S=new et.M5(Z.options).create(),I=new et.W(S),T=f.G.toTanks(Z.tanks),G=f.G.toSegments(Z.profile,T),M=f.G.toSegments(Z.plan,T),xt=Z.consumptionOptions.diver,Ct=new et.GN(xt.rmv,xt.stressRmv),ot=f.G.toOptions(Z.options),zt=pt.selectConsumptionPlan(M,Z.isComplex),B={diver:Ct,primaryTankReserve:Z.consumptionOptions.primaryTankReserve,stageTankReserve:Z.consumptionOptions.stageTankReserve},yt=I.calculateMaxBottomTime(zt,T,B,ot),ft=et.wh.emergencyAscent(G,ot,T);let de=et._O.duration(ft);return de=et.Ef.toMinutes(de),I.consumeFromTanks2(G,ft,T,B),{diveId:Z.diveId,maxTime:yt,timeToSurface:de,tanks:f.G.toConsumed(T)}}static selectConsumptionPlan(Z,S){if(S)return et._O.fromCollection(Z);const I=Z.slice(0,1);return et._O.fromCollection(I)}static profileParametersFromTask(Z){const S=f.G.toTanks(Z.tanks),I=et.aE.fromTanks(S),T=f.G.toSegments(Z.plan,S),G=et._O.fromCollection(T),M=f.G.toOptions(Z.options),xt=f.G.toTissues(Z.tissues),Ct=new et.KK(xt,Z.surfaceInterval);return et.oF.forMultilevelDive(G,I,M,Ct)}}},940:function(we,pe,kt){var et;we=kt.nmd(we),function(){var f,S="Expected a function",T="__lodash_hash_undefined__",M="__lodash_placeholder__",Xt=1/0,At=9007199254740991,Kt=4294967295,V=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ee="[object Arguments]",dn="[object Array]",ze="[object Boolean]",Oe="[object Date]",en="[object Error]",gn="[object Function]",Re="[object GeneratorFunction]",Nt="[object Map]",ie="[object Number]",ge="[object Object]",er="[object Promise]",nn="[object RegExp]",Jt="[object Set]",mn="[object String]",mt="[object Symbol]",vt="[object WeakMap]",$e="[object ArrayBuffer]",ye="[object DataView]",nr="[object Float32Array]",In="[object Float64Array]",Ln="[object Int8Array]",rr="[object Int16Array]",bn="[object Int32Array]",Mn="[object Uint8Array]",Bn="[object Uint8ClampedArray]",rn="[object Uint16Array]",Nn="[object Uint32Array]",cs=/\b__p \+= '';/g,hs=/\b(__p \+=) '' \+/g,Ht=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Jr=/&(?:amp|lt|gt|quot|#39);/g,Qr=/[&<>"']/g,x=RegExp(Jr.source),r=RegExp(Qr.source),i=/<%-([\s\S]+?)%>/g,u=/<%([\s\S]+?)%>/g,h=/<%=([\s\S]+?)%>/g,g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,E=/[\\^$.*+?()[\]{}|]/g,L=RegExp(E.source),K=/^\s+/,Ft=/\s/,_t=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ae=/\{\n\/\* \[wrapped with (.+)\] \*/,Ie=/,? & /,Fa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wa=/[()=,{}\[\]\/\s]/,Ga=/\\(\\)?/g,Ua=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fs=/\w*$/,ka=/^[-+]0x[0-9a-f]+$/i,za=/^0b[01]+$/i,Ka=/^\[object .+?Constructor\]$/,$a=/^0o[0-7]+$/i,Ya=/^(?:0|[1-9]\d*)$/,Za=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ir=/($^)/,Va=/['\n\r\u2028\u2029\\]/g,sr="\\ud800-\\udfff",ls="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ps="\\u2700-\\u27bf",ds="a-z\\xdf-\\xf6\\xf8-\\xff",gs="A-Z\\xc0-\\xd6\\xd8-\\xde",ms="\\ufe0e\\ufe0f",vs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",no="["+sr+"]",_s="["+vs+"]",ur="["+ls+"]",Ss="\\d+",ro="["+ps+"]",ws="["+ds+"]",Ds="[^"+sr+vs+Ss+ps+ds+gs+"]",ti="\\ud83c[\\udffb-\\udfff]",xs="[^"+sr+"]",ei="(?:\\ud83c[\\udde6-\\uddff]){2}",ni="[\\ud800-\\udbff][\\udc00-\\udfff]",_n="["+gs+"]",As="(?:"+ws+"|"+Ds+")",so="(?:"+_n+"|"+Ds+")",Cs="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ps="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ts="(?:"+ur+"|"+ti+")?",Es="["+ms+"]?",Os=Es+Ts+"(?:\\u200d(?:"+[xs,ei,ni].join("|")+")"+Es+Ts+")*",co="(?:"+[ro,ei,ni].join("|")+")"+Os,ho="(?:"+[xs+ur+"?",ur,ei,ni,no].join("|")+")",fo=RegExp("['\u2019]","g"),lo=RegExp(ur,"g"),ri=RegExp(ti+"(?="+ti+")|"+ho+Os,"g"),po=RegExp([_n+"?"+ws+"+"+Cs+"(?="+[_s,_n,"$"].join("|")+")",so+"+"+Ps+"(?="+[_s,_n+As,"$"].join("|")+")",_n+"?"+As+"+"+Cs,_n+"+"+Ps,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ss,co].join("|"),"g"),go=RegExp("[\\u200d"+sr+ls+ms+"]"),mo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_o=-1,at={};at[nr]=at[In]=at[Ln]=at[rr]=at[bn]=at[Mn]=at[Bn]=at[rn]=at[Nn]=!0,at[Ee]=at[dn]=at[$e]=at[ze]=at[ye]=at[Oe]=at[en]=at[gn]=at[Nt]=at[ie]=at[ge]=at[nn]=at[Jt]=at[mn]=at[vt]=!1;var st={};st[Ee]=st[dn]=st[$e]=st[ye]=st[ze]=st[Oe]=st[nr]=st[In]=st[Ln]=st[rr]=st[bn]=st[Nt]=st[ie]=st[ge]=st[nn]=st[Jt]=st[mn]=st[mt]=st[Mn]=st[Bn]=st[rn]=st[Nn]=!0,st[en]=st[gn]=st[vt]=!1;var xo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yo=parseFloat,Ao=parseInt,Rs="object"==typeof global&&global&&global.Object===Object&&global,Co="object"==typeof self&&self&&self.Object===Object&&self,Ot=Rs||Co||Function("return this")(),Is=pe&&!pe.nodeType&&pe,Hn=Is&&we&&!we.nodeType&&we,Ls=Hn&&Hn.exports===Is,ii=Ls&&Rs.process,se=function(){try{return Hn&&Hn.require&&Hn.require("util").types||ii&&ii.binding&&ii.binding("util")}catch{}}(),bs=se&&se.isArrayBuffer,Ms=se&&se.isDate,Bs=se&&se.isMap,Ns=se&&se.isRegExp,Hs=se&&se.isSet,Fs=se&&se.isTypedArray;function Qt(d,D,v){switch(v.length){case 0:return d.call(D);case 1:return d.call(D,v[0]);case 2:return d.call(D,v[0],v[1]);case 3:return d.call(D,v[0],v[1],v[2])}return d.apply(D,v)}function Po(d,D,v,R){for(var U=-1,j=null==d?0:d.length;++U<j;){var Pt=d[U];D(R,Pt,v(Pt),d)}return R}function ue(d,D){for(var v=-1,R=null==d?0:d.length;++v<R&&!1!==D(d[v],v,d););return d}function To(d,D){for(var v=null==d?0:d.length;v--&&!1!==D(d[v],v,d););return d}function Ws(d,D){for(var v=-1,R=null==d?0:d.length;++v<R;)if(!D(d[v],v,d))return!1;return!0}function Ye(d,D){for(var v=-1,R=null==d?0:d.length,U=0,j=[];++v<R;){var Pt=d[v];D(Pt,v,d)&&(j[U++]=Pt)}return j}function ar(d,D){return!(null==d||!d.length)&&Sn(d,D,0)>-1}function si(d,D,v){for(var R=-1,U=null==d?0:d.length;++R<U;)if(v(D,d[R]))return!0;return!1}function ht(d,D){for(var v=-1,R=null==d?0:d.length,U=Array(R);++v<R;)U[v]=D(d[v],v,d);return U}function Ze(d,D){for(var v=-1,R=D.length,U=d.length;++v<R;)d[U+v]=D[v];return d}function ui(d,D,v,R){var U=-1,j=null==d?0:d.length;for(R&&j&&(v=d[++U]);++U<j;)v=D(v,d[U],U,d);return v}function Eo(d,D,v,R){var U=null==d?0:d.length;for(R&&U&&(v=d[--U]);U--;)v=D(v,d[U],U,d);return v}function ai(d,D){for(var v=-1,R=null==d?0:d.length;++v<R;)if(D(d[v],v,d))return!0;return!1}var Oo=oi("length");function Gs(d,D,v){var R;return v(d,function(U,j,Pt){if(D(U,j,Pt))return R=j,!1}),R}function or(d,D,v,R){for(var U=d.length,j=v+(R?1:-1);R?j--:++j<U;)if(D(d[j],j,d))return j;return-1}function Sn(d,D,v){return D==D?function zo(d,D,v){for(var R=v-1,U=d.length;++R<U;)if(d[R]===D)return R;return-1}(d,D,v):or(d,Us,v)}function Lo(d,D,v,R){for(var U=v-1,j=d.length;++U<j;)if(R(d[U],D))return U;return-1}function Us(d){return d!=d}function ks(d,D){var v=null==d?0:d.length;return v?hi(d,D)/v:NaN}function oi(d){return function(D){return null==D?f:D[d]}}function ci(d){return function(D){return null==d?f:d[D]}}function zs(d,D,v,R,U){return U(d,function(j,Pt,it){v=R?(R=!1,j):D(v,j,Pt,it)}),v}function hi(d,D){for(var v,R=-1,U=d.length;++R<U;){var j=D(d[R]);j!==f&&(v=v===f?j:v+j)}return v}function fi(d,D){for(var v=-1,R=Array(d);++v<d;)R[v]=D(v);return R}function Ks(d){return d&&d.slice(0,Vs(d)+1).replace(K,"")}function jt(d){return function(D){return d(D)}}function li(d,D){return ht(D,function(v){return d[v]})}function Fn(d,D){return d.has(D)}function $s(d,D){for(var v=-1,R=d.length;++v<R&&Sn(D,d[v],0)>-1;);return v}function Ys(d,D){for(var v=d.length;v--&&Sn(D,d[v],0)>-1;);return v}var No=ci({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ho=ci({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Fo(d){return"\\"+xo[d]}function wn(d){return go.test(d)}function pi(d){var D=-1,v=Array(d.size);return d.forEach(function(R,U){v[++D]=[U,R]}),v}function Zs(d,D){return function(v){return d(D(v))}}function Ve(d,D){for(var v=-1,R=d.length,U=0,j=[];++v<R;){var Pt=d[v];(Pt===D||Pt===M)&&(d[v]=M,j[U++]=v)}return j}function cr(d){var D=-1,v=Array(d.size);return d.forEach(function(R){v[++D]=R}),v}function Dn(d){return wn(d)?function Yo(d){for(var D=ri.lastIndex=0;ri.test(d);)++D;return D}(d):Oo(d)}function me(d){return wn(d)?function Zo(d){return d.match(ri)||[]}(d):function Ro(d){return d.split("")}(d)}function Vs(d){for(var D=d.length;D--&&Ft.test(d.charAt(D)););return D}var $o=ci({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hr=function d(D){var t,v=(D=null==D?Ot:hr.defaults(Ot.Object(),D,hr.pick(Ot,vo))).Array,R=D.Date,U=D.Error,j=D.Function,Pt=D.Math,it=D.Object,di=D.RegExp,qo=D.String,ae=D.TypeError,fr=v.prototype,xn=it.prototype,lr=D["__core-js_shared__"],pr=j.prototype.toString,nt=xn.hasOwnProperty,Qo=0,Xs=(t=/[^.]+$/.exec(lr&&lr.keys&&lr.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",dr=xn.toString,jo=pr.call(it),tc=Ot._,ec=di("^"+pr.call(nt).replace(E,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gr=Ls?D.Buffer:f,Xe=D.Symbol,mr=D.Uint8Array,qs=gr?gr.allocUnsafe:f,vr=Zs(it.getPrototypeOf,it),Js=it.create,Qs=xn.propertyIsEnumerable,_r=fr.splice,js=Xe?Xe.isConcatSpreadable:f,Wn=Xe?Xe.iterator:f,sn=Xe?Xe.toStringTag:f,Sr=function(){try{var t=hn(it,"defineProperty");return t({},"",{}),t}catch{}}(),nc=D.clearTimeout!==Ot.clearTimeout&&D.clearTimeout,rc=R&&R.now!==Ot.Date.now&&R.now,ic=D.setTimeout!==Ot.setTimeout&&D.setTimeout,wr=Pt.ceil,Dr=Pt.floor,gi=it.getOwnPropertySymbols,sc=gr?gr.isBuffer:f,tu=D.isFinite,uc=fr.join,ac=Zs(it.keys,it),Tt=Pt.max,Lt=Pt.min,oc=R.now,cc=D.parseInt,eu=Pt.random,hc=fr.reverse,mi=hn(D,"DataView"),Gn=hn(D,"Map"),vi=hn(D,"Promise"),yn=hn(D,"Set"),Un=hn(D,"WeakMap"),kn=hn(it,"create"),xr=Un&&new Un,An={},fc=fn(mi),lc=fn(Gn),pc=fn(vi),dc=fn(yn),gc=fn(Un),yr=Xe?Xe.prototype:f,zn=yr?yr.valueOf:f,nu=yr?yr.toString:f;function o(t){if(St(t)&&!k(t)&&!(t instanceof q)){if(t instanceof oe)return t;if(nt.call(t,"__wrapped__"))return ra(t)}return new oe(t)}var Cn=function(){function t(){}return function(e){if(!lt(e))return{};if(Js)return Js(e);t.prototype=e;var n=new t;return t.prototype=f,n}}();function Ar(){}function oe(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=f}function q(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Kt,this.__views__=[]}function un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}function Le(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}function be(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}function an(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new be;++e<n;)this.add(t[e])}function ve(t){var e=this.__data__=new Le(t);this.size=e.size}function ru(t,e){var n=k(t),s=!n&&ln(t),a=!n&&!s&&tn(t),c=!n&&!s&&!a&&On(t),l=n||s||a||c,p=l?fi(t.length,qo):[],m=p.length;for(var y in t)(e||nt.call(t,y))&&(!l||!("length"==y||a&&("offset"==y||"parent"==y)||c&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||He(y,m)))&&p.push(y);return p}function iu(t){var e=t.length;return e?t[Ei(0,e-1)]:f}function Uc(t,e){return Fr($t(t),on(e,0,t.length))}function kc(t){return Fr($t(t))}function _i(t,e,n){(n!==f&&!_e(t[e],n)||n===f&&!(e in t))&&Me(t,e,n)}function Kn(t,e,n){var s=t[e];(!nt.call(t,e)||!_e(s,n)||n===f&&!(e in t))&&Me(t,e,n)}function Cr(t,e){for(var n=t.length;n--;)if(_e(t[n][0],e))return n;return-1}function zc(t,e,n,s){return qe(t,function(a,c,l){e(s,a,n(a),l)}),s}function su(t,e){return t&&Pe(e,Et(e),t)}function Me(t,e,n){"__proto__"==e&&Sr?Sr(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Si(t,e){for(var n=-1,s=e.length,a=v(s),c=null==t;++n<s;)a[n]=c?f:ji(t,e[n]);return a}function on(t,e,n){return t==t&&(n!==f&&(t=t<=n?t:n),e!==f&&(t=t>=e?t:e)),t}function ce(t,e,n,s,a,c){var l,p=1&e,m=2&e,y=4&e;if(n&&(l=a?n(t,s,a,c):n(t)),l!==f)return l;if(!lt(t))return t;var A=k(t);if(A){if(l=function Lh(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&nt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!p)return $t(t,l)}else{var C=bt(t),O=C==gn||C==Re;if(tn(t))return Ou(t,p);if(C==ge||C==Ee||O&&!a){if(l=m||O?{}:Vu(t),!p)return m?function Dh(t,e){return Pe(t,Yu(t),e)}(t,function Kc(t,e){return t&&Pe(e,Zt(e),t)}(l,t)):function wh(t,e){return Pe(t,ki(t),e)}(t,su(l,t))}else{if(!st[C])return a?t:{};l=function bh(t,e,n){var s=t.constructor;switch(e){case $e:return Bi(t);case ze:case Oe:return new s(+t);case ye:return function mh(t,e){var n=e?Bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case nr:case In:case Ln:case rr:case bn:case Mn:case Bn:case rn:case Nn:return Ru(t,n);case Nt:return new s;case ie:case mn:return new s(t);case nn:return function vh(t){var e=new t.constructor(t.source,fs.exec(t));return e.lastIndex=t.lastIndex,e}(t);case Jt:return new s;case mt:return function _h(t){return zn?it(zn.call(t)):{}}(t)}}(t,C,p)}}c||(c=new ve);var b=c.get(t);if(b)return b;c.set(t,l),ya(t)?t.forEach(function(W){l.add(ce(W,e,n,W,t,c))}):Da(t)&&t.forEach(function(W,X){l.set(X,ce(W,e,n,X,t,c))});var $=A?f:(y?m?Wi:Fi:m?Zt:Et)(t);return ue($||t,function(W,X){$&&(W=t[X=W]),Kn(l,X,ce(W,e,n,X,t,c))}),l}function uu(t,e,n){var s=n.length;if(null==t)return!s;for(t=it(t);s--;){var a=n[s],l=t[a];if(l===f&&!(a in t)||!(0,e[a])(l))return!1}return!0}function au(t,e,n){if("function"!=typeof t)throw new ae(S);return Jn(function(){t.apply(f,n)},e)}function $n(t,e,n,s){var a=-1,c=ar,l=!0,p=t.length,m=[],y=e.length;if(!p)return m;n&&(e=ht(e,jt(n))),s?(c=si,l=!1):e.length>=200&&(c=Fn,l=!1,e=new an(e));t:for(;++a<p;){var A=t[a],C=null==n?A:n(A);if(A=s||0!==A?A:0,l&&C==C){for(var O=y;O--;)if(e[O]===C)continue t;m.push(A)}else c(e,C,s)||m.push(A)}return m}o.templateSettings={escape:i,evaluate:u,interpolate:h,variable:"",imports:{_:o}},(o.prototype=Ar.prototype).constructor=o,(oe.prototype=Cn(Ar.prototype)).constructor=oe,(q.prototype=Cn(Ar.prototype)).constructor=q,un.prototype.clear=function Sc(){this.__data__=kn?kn(null):{},this.size=0},un.prototype.delete=function wc(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},un.prototype.get=function Dc(t){var e=this.__data__;if(kn){var n=e[t];return n===T?f:n}return nt.call(e,t)?e[t]:f},un.prototype.has=function xc(t){var e=this.__data__;return kn?e[t]!==f:nt.call(e,t)},un.prototype.set=function yc(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kn&&e===f?T:e,this},Le.prototype.clear=function Ac(){this.__data__=[],this.size=0},Le.prototype.delete=function Cc(t){var e=this.__data__,n=Cr(e,t);return!(n<0||(n==e.length-1?e.pop():_r.call(e,n,1),--this.size,0))},Le.prototype.get=function Pc(t){var e=this.__data__,n=Cr(e,t);return n<0?f:e[n][1]},Le.prototype.has=function Tc(t){return Cr(this.__data__,t)>-1},Le.prototype.set=function Ec(t,e){var n=this.__data__,s=Cr(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this},be.prototype.clear=function Oc(){this.size=0,this.__data__={hash:new un,map:new(Gn||Le),string:new un}},be.prototype.delete=function Rc(t){var e=Hr(this,t).delete(t);return this.size-=e?1:0,e},be.prototype.get=function Ic(t){return Hr(this,t).get(t)},be.prototype.has=function Lc(t){return Hr(this,t).has(t)},be.prototype.set=function bc(t,e){var n=Hr(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this},an.prototype.add=an.prototype.push=function Mc(t){return this.__data__.set(t,T),this},an.prototype.has=function Bc(t){return this.__data__.has(t)},ve.prototype.clear=function Nc(){this.__data__=new Le,this.size=0},ve.prototype.delete=function Hc(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ve.prototype.get=function Fc(t){return this.__data__.get(t)},ve.prototype.has=function Wc(t){return this.__data__.has(t)},ve.prototype.set=function Gc(t,e){var n=this.__data__;if(n instanceof Le){var s=n.__data__;if(!Gn||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new be(s)}return n.set(t,e),this.size=n.size,this};var qe=Mu(Ce),ou=Mu(Di,!0);function Yc(t,e){var n=!0;return qe(t,function(s,a,c){return n=!!e(s,a,c)}),n}function Pr(t,e,n){for(var s=-1,a=t.length;++s<a;){var c=t[s],l=e(c);if(null!=l&&(p===f?l==l&&!ee(l):n(l,p)))var p=l,m=c}return m}function cu(t,e){var n=[];return qe(t,function(s,a,c){e(s,a,c)&&n.push(s)}),n}function Rt(t,e,n,s,a){var c=-1,l=t.length;for(n||(n=Bh),a||(a=[]);++c<l;){var p=t[c];e>0&&n(p)?e>1?Rt(p,e-1,n,s,a):Ze(a,p):s||(a[a.length]=p)}return a}var wi=Bu(),hu=Bu(!0);function Ce(t,e){return t&&wi(t,e,Et)}function Di(t,e){return t&&hu(t,e,Et)}function Tr(t,e){return Ye(e,function(n){return Fe(t[n])})}function cn(t,e){for(var n=0,s=(e=Qe(e,t)).length;null!=t&&n<s;)t=t[Te(e[n++])];return n&&n==s?t:f}function fu(t,e,n){var s=e(t);return k(t)?s:Ze(s,n(t))}function Wt(t){return null==t?t===f?"[object Undefined]":"[object Null]":sn&&sn in it(t)?function Oh(t){var e=nt.call(t,sn),n=t[sn];try{t[sn]=f;var s=!0}catch{}var a=dr.call(t);return s&&(e?t[sn]=n:delete t[sn]),a}(t):function kh(t){return dr.call(t)}(t)}function xi(t,e){return t>e}function Vc(t,e){return null!=t&&nt.call(t,e)}function Xc(t,e){return null!=t&&e in it(t)}function yi(t,e,n){for(var s=n?si:ar,a=t[0].length,c=t.length,l=c,p=v(c),m=1/0,y=[];l--;){var A=t[l];l&&e&&(A=ht(A,jt(e))),m=Lt(A.length,m),p[l]=!n&&(e||a>=120&&A.length>=120)?new an(l&&A):f}A=t[0];var C=-1,O=p[0];t:for(;++C<a&&y.length<m;){var b=A[C],F=e?e(b):b;if(b=n||0!==b?b:0,!(O?Fn(O,F):s(y,F,n))){for(l=c;--l;){var $=p[l];if(!($?Fn($,F):s(t[l],F,n)))continue t}O&&O.push(F),y.push(b)}}return y}function Yn(t,e,n){var s=null==(t=Qu(t,e=Qe(e,t)))?t:t[Te(fe(e))];return null==s?f:Qt(s,t,n)}function lu(t){return St(t)&&Wt(t)==Ee}function Zn(t,e,n,s,a){return t===e||(null==t||null==e||!St(t)&&!St(e)?t!=t&&e!=e:function th(t,e,n,s,a,c){var l=k(t),p=k(e),m=l?dn:bt(t),y=p?dn:bt(e),A=(m=m==Ee?ge:m)==ge,C=(y=y==Ee?ge:y)==ge,O=m==y;if(O&&tn(t)){if(!tn(e))return!1;l=!0,A=!1}if(O&&!A)return c||(c=new ve),l||On(t)?$u(t,e,n,s,a,c):function Th(t,e,n,s,a,c,l){switch(n){case ye:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $e:return!(t.byteLength!=e.byteLength||!c(new mr(t),new mr(e)));case ze:case Oe:case ie:return _e(+t,+e);case en:return t.name==e.name&&t.message==e.message;case nn:case mn:return t==e+"";case Nt:var p=pi;case Jt:if(p||(p=cr),t.size!=e.size&&!(1&s))return!1;var y=l.get(t);if(y)return y==e;s|=2,l.set(t,e);var A=$u(p(t),p(e),s,a,c,l);return l.delete(t),A;case mt:if(zn)return zn.call(t)==zn.call(e)}return!1}(t,e,m,n,s,a,c);if(!(1&n)){var b=A&&nt.call(t,"__wrapped__"),F=C&&nt.call(e,"__wrapped__");if(b||F){var $=b?t.value():t,W=F?e.value():e;return c||(c=new ve),a($,W,n,s,c)}}return!!O&&(c||(c=new ve),function Eh(t,e,n,s,a,c){var l=1&n,p=Fi(t),m=p.length;if(m!=Fi(e).length&&!l)return!1;for(var C=m;C--;){var O=p[C];if(!(l?O in e:nt.call(e,O)))return!1}var b=c.get(t),F=c.get(e);if(b&&F)return b==e&&F==t;var $=!0;c.set(t,e),c.set(e,t);for(var W=l;++C<m;){var X=t[O=p[C]],J=e[O];if(s)var ne=l?s(J,X,O,e,t,c):s(X,J,O,t,e,c);if(!(ne===f?X===J||a(X,J,n,s,c):ne)){$=!1;break}W||(W="constructor"==O)}if($&&!W){var Ut=t.constructor,re=e.constructor;Ut!=re&&"constructor"in t&&"constructor"in e&&!("function"==typeof Ut&&Ut instanceof Ut&&"function"==typeof re&&re instanceof re)&&($=!1)}return c.delete(t),c.delete(e),$}(t,e,n,s,a,c))}(t,e,n,s,Zn,a))}function Ai(t,e,n,s){var a=n.length,c=a,l=!s;if(null==t)return!c;for(t=it(t);a--;){var p=n[a];if(l&&p[2]?p[1]!==t[p[0]]:!(p[0]in t))return!1}for(;++a<c;){var m=(p=n[a])[0],y=t[m],A=p[1];if(l&&p[2]){if(y===f&&!(m in t))return!1}else{var C=new ve;if(s)var O=s(y,A,m,t,e,C);if(!(O===f?Zn(A,y,3,s,C):O))return!1}}return!0}function pu(t){return!(!lt(t)||function Hh(t){return!!Xs&&Xs in t}(t))&&(Fe(t)?ec:Ka).test(fn(t))}function du(t){return"function"==typeof t?t:null==t?Vt:"object"==typeof t?k(t)?vu(t[0],t[1]):mu(t):Na(t)}function Ci(t){if(!qn(t))return ac(t);var e=[];for(var n in it(t))nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pi(t,e){return t<e}function gu(t,e){var n=-1,s=Yt(t)?v(t.length):[];return qe(t,function(a,c,l){s[++n]=e(a,c,l)}),s}function mu(t){var e=Ui(t);return 1==e.length&&e[0][2]?qu(e[0][0],e[0][1]):function(n){return n===t||Ai(n,t,e)}}function vu(t,e){return zi(t)&&Xu(e)?qu(Te(t),e):function(n){var s=ji(n,t);return s===f&&s===e?ts(n,t):Zn(e,s,3)}}function Er(t,e,n,s,a){t!==e&&wi(e,function(c,l){if(a||(a=new ve),lt(c))!function uh(t,e,n,s,a,c,l){var p=$i(t,n),m=$i(e,n),y=l.get(m);if(y)_i(t,n,y);else{var A=c?c(p,m,n+"",t,e,l):f,C=A===f;if(C){var O=k(m),b=!O&&tn(m),F=!O&&!b&&On(m);A=m,O||b||F?k(p)?A=p:wt(p)?A=$t(p):b?(C=!1,A=Ou(m,!0)):F?(C=!1,A=Ru(m,!0)):A=[]:Qn(m)||ln(m)?(A=p,ln(p)?A=Pa(p):(!lt(p)||Fe(p))&&(A=Vu(m))):C=!1}C&&(l.set(m,A),a(A,m,s,c,l),l.delete(m)),_i(t,n,A)}}(t,e,l,n,Er,s,a);else{var p=s?s($i(t,l),c,l+"",t,e,a):f;p===f&&(p=c),_i(t,l,p)}},Zt)}function _u(t,e){var n=t.length;if(n)return He(e+=e<0?n:0,n)?t[e]:f}function Su(t,e,n){e=e.length?ht(e,function(c){return k(c)?function(l){return cn(l,1===c.length?c[0]:c)}:c}):[Vt];var s=-1;return e=ht(e,jt(H())),function bo(d,D){var v=d.length;for(d.sort(D);v--;)d[v]=d[v].value;return d}(gu(t,function(c,l,p){return{criteria:ht(e,function(y){return y(c)}),index:++s,value:c}}),function(c,l){return function Sh(t,e,n){for(var s=-1,a=t.criteria,c=e.criteria,l=a.length,p=n.length;++s<l;){var m=Iu(a[s],c[s]);if(m)return s>=p?m:m*("desc"==n[s]?-1:1)}return t.index-e.index}(c,l,n)})}function wu(t,e,n){for(var s=-1,a=e.length,c={};++s<a;){var l=e[s],p=cn(t,l);n(p,l)&&Vn(c,Qe(l,t),p)}return c}function Ti(t,e,n,s){var a=s?Lo:Sn,c=-1,l=e.length,p=t;for(t===e&&(e=$t(e)),n&&(p=ht(t,jt(n)));++c<l;)for(var m=0,y=e[c],A=n?n(y):y;(m=a(p,A,m,s))>-1;)p!==t&&_r.call(p,m,1),_r.call(t,m,1);return t}function Du(t,e){for(var n=t?e.length:0,s=n-1;n--;){var a=e[n];if(n==s||a!==c){var c=a;He(a)?_r.call(t,a,1):Ii(t,a)}}return t}function Ei(t,e){return t+Dr(eu()*(e-t+1))}function Oi(t,e){var n="";if(!t||e<1||e>At)return n;do{e%2&&(n+=t),(e=Dr(e/2))&&(t+=t)}while(e);return n}function Y(t,e){return Yi(Ju(t,e,Vt),t+"")}function hh(t){return iu(Rn(t))}function fh(t,e){var n=Rn(t);return Fr(n,on(e,0,n.length))}function Vn(t,e,n,s){if(!lt(t))return t;for(var a=-1,c=(e=Qe(e,t)).length,l=c-1,p=t;null!=p&&++a<c;){var m=Te(e[a]),y=n;if("__proto__"===m||"constructor"===m||"prototype"===m)return t;if(a!=l){var A=p[m];(y=s?s(A,m,p):f)===f&&(y=lt(A)?A:He(e[a+1])?[]:{})}Kn(p,m,y),p=p[m]}return t}var xu=xr?function(t,e){return xr.set(t,e),t}:Vt,lh=Sr?function(t,e){return Sr(t,"toString",{configurable:!0,enumerable:!1,value:ns(e),writable:!0})}:Vt;function ph(t){return Fr(Rn(t))}function he(t,e,n){var s=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var c=v(a);++s<a;)c[s]=t[s+e];return c}function dh(t,e){var n;return qe(t,function(s,a,c){return!(n=e(s,a,c))}),!!n}function Or(t,e,n){var s=0,a=null==t?s:t.length;if("number"==typeof e&&e==e&&a<=2147483647){for(;s<a;){var c=s+a>>>1,l=t[c];null!==l&&!ee(l)&&(n?l<=e:l<e)?s=c+1:a=c}return a}return Ri(t,e,Vt,n)}function Ri(t,e,n,s){var a=0,c=null==t?0:t.length;if(0===c)return 0;for(var l=(e=n(e))!=e,p=null===e,m=ee(e),y=e===f;a<c;){var A=Dr((a+c)/2),C=n(t[A]),O=C!==f,b=null===C,F=C==C,$=ee(C);if(l)var W=s||F;else W=y?F&&(s||O):p?F&&O&&(s||!b):m?F&&O&&!b&&(s||!$):!b&&!$&&(s?C<=e:C<e);W?a=A+1:c=A}return Lt(c,4294967294)}function yu(t,e){for(var n=-1,s=t.length,a=0,c=[];++n<s;){var l=t[n],p=e?e(l):l;if(!n||!_e(p,m)){var m=p;c[a++]=0===l?0:l}}return c}function Au(t){return"number"==typeof t?t:ee(t)?NaN:+t}function te(t){if("string"==typeof t)return t;if(k(t))return ht(t,te)+"";if(ee(t))return nu?nu.call(t):"";var e=t+"";return"0"==e&&1/t==-Xt?"-0":e}function Je(t,e,n){var s=-1,a=ar,c=t.length,l=!0,p=[],m=p;if(n)l=!1,a=si;else if(c>=200){var y=e?null:Ch(t);if(y)return cr(y);l=!1,a=Fn,m=new an}else m=e?[]:p;t:for(;++s<c;){var A=t[s],C=e?e(A):A;if(A=n||0!==A?A:0,l&&C==C){for(var O=m.length;O--;)if(m[O]===C)continue t;e&&m.push(C),p.push(A)}else a(m,C,n)||(m!==p&&m.push(C),p.push(A))}return p}function Ii(t,e){return null==(t=Qu(t,e=Qe(e,t)))||delete t[Te(fe(e))]}function Cu(t,e,n,s){return Vn(t,e,n(cn(t,e)),s)}function Rr(t,e,n,s){for(var a=t.length,c=s?a:-1;(s?c--:++c<a)&&e(t[c],c,t););return n?he(t,s?0:c,s?c+1:a):he(t,s?c+1:0,s?a:c)}function Pu(t,e){var n=t;return n instanceof q&&(n=n.value()),ui(e,function(s,a){return a.func.apply(a.thisArg,Ze([s],a.args))},n)}function Li(t,e,n){var s=t.length;if(s<2)return s?Je(t[0]):[];for(var a=-1,c=v(s);++a<s;)for(var l=t[a],p=-1;++p<s;)p!=a&&(c[a]=$n(c[a]||l,t[p],e,n));return Je(Rt(c,1),e,n)}function Tu(t,e,n){for(var s=-1,a=t.length,c=e.length,l={};++s<a;)n(l,t[s],s<c?e[s]:f);return l}function bi(t){return wt(t)?t:[]}function Mi(t){return"function"==typeof t?t:Vt}function Qe(t,e){return k(t)?t:zi(t,e)?[t]:na(tt(t))}var gh=Y;function je(t,e,n){var s=t.length;return n=n===f?s:n,!e&&n>=s?t:he(t,e,n)}var Eu=nc||function(t){return Ot.clearTimeout(t)};function Ou(t,e){if(e)return t.slice();var n=t.length,s=qs?qs(n):new t.constructor(n);return t.copy(s),s}function Bi(t){var e=new t.constructor(t.byteLength);return new mr(e).set(new mr(t)),e}function Ru(t,e){var n=e?Bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Iu(t,e){if(t!==e){var n=t!==f,s=null===t,a=t==t,c=ee(t),l=e!==f,p=null===e,m=e==e,y=ee(e);if(!p&&!y&&!c&&t>e||c&&l&&m&&!p&&!y||s&&l&&m||!n&&m||!a)return 1;if(!s&&!c&&!y&&t<e||y&&n&&a&&!s&&!c||p&&n&&a||!l&&a||!m)return-1}return 0}function Lu(t,e,n,s){for(var a=-1,c=t.length,l=n.length,p=-1,m=e.length,y=Tt(c-l,0),A=v(m+y),C=!s;++p<m;)A[p]=e[p];for(;++a<l;)(C||a<c)&&(A[n[a]]=t[a]);for(;y--;)A[p++]=t[a++];return A}function bu(t,e,n,s){for(var a=-1,c=t.length,l=-1,p=n.length,m=-1,y=e.length,A=Tt(c-p,0),C=v(A+y),O=!s;++a<A;)C[a]=t[a];for(var b=a;++m<y;)C[b+m]=e[m];for(;++l<p;)(O||a<c)&&(C[b+n[l]]=t[a++]);return C}function $t(t,e){var n=-1,s=t.length;for(e||(e=v(s));++n<s;)e[n]=t[n];return e}function Pe(t,e,n,s){var a=!n;n||(n={});for(var c=-1,l=e.length;++c<l;){var p=e[c],m=s?s(n[p],t[p],p,n,t):f;m===f&&(m=t[p]),a?Me(n,p,m):Kn(n,p,m)}return n}function Ir(t,e){return function(n,s){var a=k(n)?Po:zc,c=e?e():{};return a(n,t,H(s,2),c)}}function Pn(t){return Y(function(e,n){var s=-1,a=n.length,c=a>1?n[a-1]:f,l=a>2?n[2]:f;for(c=t.length>3&&"function"==typeof c?(a--,c):f,l&&Gt(n[0],n[1],l)&&(c=a<3?f:c,a=1),e=it(e);++s<a;){var p=n[s];p&&t(e,p,s,c)}return e})}function Mu(t,e){return function(n,s){if(null==n)return n;if(!Yt(n))return t(n,s);for(var a=n.length,c=e?a:-1,l=it(n);(e?c--:++c<a)&&!1!==s(l[c],c,l););return n}}function Bu(t){return function(e,n,s){for(var a=-1,c=it(e),l=s(e),p=l.length;p--;){var m=l[t?p:++a];if(!1===n(c[m],m,c))break}return e}}function Nu(t){return function(e){var n=wn(e=tt(e))?me(e):f,s=n?n[0]:e.charAt(0),a=n?je(n,1).join(""):e.slice(1);return s[t]()+a}}function Tn(t){return function(e){return ui(Ma(ba(e).replace(fo,"")),t,"")}}function Xn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Cn(t.prototype),s=t.apply(n,e);return lt(s)?s:n}}function Hu(t){return function(e,n,s){var a=it(e);if(!Yt(e)){var c=H(n,3);e=Et(e),n=function(p){return c(a[p],p,a)}}var l=t(e,n,s);return l>-1?a[c?e[l]:l]:f}}function Fu(t){return Ne(function(e){var n=e.length,s=n,a=oe.prototype.thru;for(t&&e.reverse();s--;){var c=e[s];if("function"!=typeof c)throw new ae(S);if(a&&!l&&"wrapper"==Nr(c))var l=new oe([],!0)}for(s=l?s:n;++s<n;){var p=Nr(c=e[s]),m="wrapper"==p?Gi(c):f;l=m&&Ki(m[0])&&424==m[1]&&!m[4].length&&1==m[9]?l[Nr(m[0])].apply(l,m[3]):1==c.length&&Ki(c)?l[p]():l.thru(c)}return function(){var y=arguments,A=y[0];if(l&&1==y.length&&k(A))return l.plant(A).value();for(var C=0,O=n?e[C].apply(this,y):A;++C<n;)O=e[C].call(this,O);return O}})}function Lr(t,e,n,s,a,c,l,p,m,y){var A=128&e,C=1&e,O=2&e,b=24&e,F=512&e,$=O?f:Xn(t);return function W(){for(var X=arguments.length,J=v(X),ne=X;ne--;)J[ne]=arguments[ne];if(b)var Ut=En(W),re=function Bo(d,D){for(var v=d.length,R=0;v--;)d[v]===D&&++R;return R}(J,Ut);if(s&&(J=Lu(J,s,a,b)),c&&(J=bu(J,c,l,b)),X-=re,b&&X<y){var Dt=Ve(J,Ut);return Uu(t,e,Lr,W.placeholder,n,J,Dt,p,m,y-X)}var Se=C?n:this,Ge=O?Se[t]:t;return X=J.length,p?J=function zh(t,e){for(var n=t.length,s=Lt(e.length,n),a=$t(t);s--;){var c=e[s];t[s]=He(c,n)?a[c]:f}return t}(J,p):F&&X>1&&J.reverse(),A&&m<X&&(J.length=m),this&&this!==Ot&&this instanceof W&&(Ge=$||Xn(Ge)),Ge.apply(Se,J)}}function Wu(t,e){return function(n,s){return function Jc(t,e,n,s){return Ce(t,function(a,c,l){e(s,n(a),c,l)}),s}(n,t,e(s),{})}}function br(t,e){return function(n,s){var a;if(n===f&&s===f)return e;if(n!==f&&(a=n),s!==f){if(a===f)return s;"string"==typeof n||"string"==typeof s?(n=te(n),s=te(s)):(n=Au(n),s=Au(s)),a=t(n,s)}return a}}function Ni(t){return Ne(function(e){return e=ht(e,jt(H())),Y(function(n){var s=this;return t(e,function(a){return Qt(a,s,n)})})})}function Mr(t,e){var n=(e=e===f?" ":te(e)).length;if(n<2)return n?Oi(e,t):e;var s=Oi(e,wr(t/Dn(e)));return wn(e)?je(me(s),0,t).join(""):s.slice(0,t)}function Gu(t){return function(e,n,s){return s&&"number"!=typeof s&&Gt(e,n,s)&&(n=s=f),e=We(e),n===f?(n=e,e=0):n=We(n),function ch(t,e,n,s){for(var a=-1,c=Tt(wr((e-t)/(n||1)),0),l=v(c);c--;)l[s?c:++a]=t,t+=n;return l}(e,n,s=s===f?e<n?1:-1:We(s),t)}}function Br(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=le(e),n=le(n)),t(e,n)}}function Uu(t,e,n,s,a,c,l,p,m,y){var A=8&e;e|=A?32:64,4&(e&=~(A?64:32))||(e&=-4);var $=[t,e,a,A?c:f,A?l:f,A?f:c,A?f:l,p,m,y],W=n.apply(f,$);return Ki(t)&&ju(W,$),W.placeholder=s,ta(W,t,e)}function Hi(t){var e=Pt[t];return function(n,s){if(n=le(n),(s=null==s?0:Lt(z(s),292))&&tu(n)){var a=(tt(n)+"e").split("e");return+((a=(tt(e(a[0]+"e"+(+a[1]+s)))+"e").split("e"))[0]+"e"+(+a[1]-s))}return e(n)}}var Ch=yn&&1/cr(new yn([,-0]))[1]==Xt?function(t){return new yn(t)}:ss;function ku(t){return function(e){var n=bt(e);return n==Nt?pi(e):n==Jt?function ko(d){var D=-1,v=Array(d.size);return d.forEach(function(R){v[++D]=[R,R]}),v}(e):function Mo(d,D){return ht(D,function(v){return[v,d[v]]})}(e,t(e))}}function Be(t,e,n,s,a,c,l,p){var m=2&e;if(!m&&"function"!=typeof t)throw new ae(S);var y=s?s.length:0;if(y||(e&=-97,s=a=f),l=l===f?l:Tt(z(l),0),p=p===f?p:z(p),y-=a?a.length:0,64&e){var A=s,C=a;s=a=f}var O=m?f:Gi(t),b=[t,e,n,s,a,A,C,c,l,p];if(O&&function Gh(t,e){var n=t[1],s=e[1],a=n|s;if(!(a<131)&&!(128==s&&8==n||128==s&&256==n&&t[7].length<=e[8]||384==s&&e[7].length<=e[8]&&8==n))return t;1&s&&(t[2]=e[2],a|=1&n?0:4);var p=e[3];if(p){var m=t[3];t[3]=m?Lu(m,p,e[4]):p,t[4]=m?Ve(t[3],M):e[4]}(p=e[5])&&(t[5]=(m=t[5])?bu(m,p,e[6]):p,t[6]=m?Ve(t[5],M):e[6]),(p=e[7])&&(t[7]=p),128&s&&(t[8]=null==t[8]?e[8]:Lt(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=a}(b,O),t=b[0],e=b[1],n=b[2],s=b[3],a=b[4],!(p=b[9]=b[9]===f?m?0:t.length:Tt(b[9]-y,0))&&24&e&&(e&=-25),e&&1!=e)F=8==e||16==e?function yh(t,e,n){var s=Xn(t);return function a(){for(var c=arguments.length,l=v(c),p=c,m=En(a);p--;)l[p]=arguments[p];var y=c<3&&l[0]!==m&&l[c-1]!==m?[]:Ve(l,m);return(c-=y.length)<n?Uu(t,e,Lr,a.placeholder,f,l,y,f,f,n-c):Qt(this&&this!==Ot&&this instanceof a?s:t,this,l)}}(t,e,p):32!=e&&33!=e||a.length?Lr.apply(f,b):function Ah(t,e,n,s){var a=1&e,c=Xn(t);return function l(){for(var p=-1,m=arguments.length,y=-1,A=s.length,C=v(A+m),O=this&&this!==Ot&&this instanceof l?c:t;++y<A;)C[y]=s[y];for(;m--;)C[y++]=arguments[++p];return Qt(O,a?n:this,C)}}(t,e,n,s);else var F=function xh(t,e,n){var s=1&e,a=Xn(t);return function c(){return(this&&this!==Ot&&this instanceof c?a:t).apply(s?n:this,arguments)}}(t,e,n);return ta((O?xu:ju)(F,b),t,e)}function zu(t,e,n,s){return t===f||_e(t,xn[n])&&!nt.call(s,n)?e:t}function Ku(t,e,n,s,a,c){return lt(t)&&lt(e)&&(c.set(e,t),Er(t,e,f,Ku,c),c.delete(e)),t}function Ph(t){return Qn(t)?f:t}function $u(t,e,n,s,a,c){var l=1&n,p=t.length,m=e.length;if(p!=m&&!(l&&m>p))return!1;var y=c.get(t),A=c.get(e);if(y&&A)return y==e&&A==t;var C=-1,O=!0,b=2&n?new an:f;for(c.set(t,e),c.set(e,t);++C<p;){var F=t[C],$=e[C];if(s)var W=l?s($,F,C,e,t,c):s(F,$,C,t,e,c);if(W!==f){if(W)continue;O=!1;break}if(b){if(!ai(e,function(X,J){if(!Fn(b,J)&&(F===X||a(F,X,n,s,c)))return b.push(J)})){O=!1;break}}else if(F!==$&&!a(F,$,n,s,c)){O=!1;break}}return c.delete(t),c.delete(e),O}function Ne(t){return Yi(Ju(t,f,ua),t+"")}function Fi(t){return fu(t,Et,ki)}function Wi(t){return fu(t,Zt,Yu)}var Gi=xr?function(t){return xr.get(t)}:ss;function Nr(t){for(var e=t.name+"",n=An[e],s=nt.call(An,e)?n.length:0;s--;){var a=n[s],c=a.func;if(null==c||c==t)return a.name}return e}function En(t){return(nt.call(o,"placeholder")?o:t).placeholder}function H(){var t=o.iteratee||rs;return t=t===rs?du:t,arguments.length?t(arguments[0],arguments[1]):t}function Hr(t,e){var n=t.__data__;return function Nh(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ui(t){for(var e=Et(t),n=e.length;n--;){var s=e[n],a=t[s];e[n]=[s,a,Xu(a)]}return e}function hn(t,e){var n=function Wo(d,D){return null==d?f:d[D]}(t,e);return pu(n)?n:f}var ki=gi?function(t){return null==t?[]:(t=it(t),Ye(gi(t),function(e){return Qs.call(t,e)}))}:us,Yu=gi?function(t){for(var e=[];t;)Ze(e,ki(t)),t=vr(t);return e}:us,bt=Wt;function Zu(t,e,n){for(var s=-1,a=(e=Qe(e,t)).length,c=!1;++s<a;){var l=Te(e[s]);if(!(c=null!=t&&n(t,l)))break;t=t[l]}return c||++s!=a?c:!!(a=null==t?0:t.length)&&Kr(a)&&He(l,a)&&(k(t)||ln(t))}function Vu(t){return"function"!=typeof t.constructor||qn(t)?{}:Cn(vr(t))}function Bh(t){return k(t)||ln(t)||!!(js&&t&&t[js])}function He(t,e){var n=typeof t;return!!(e=e??At)&&("number"==n||"symbol"!=n&&Ya.test(t))&&t>-1&&t%1==0&&t<e}function Gt(t,e,n){if(!lt(n))return!1;var s=typeof e;return!!("number"==s?Yt(n)&&He(e,n.length):"string"==s&&e in n)&&_e(n[e],t)}function zi(t,e){if(k(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ee(t))||w.test(t)||!g.test(t)||null!=e&&t in it(e)}function Ki(t){var e=Nr(t),n=o[e];if("function"!=typeof n||!(e in q.prototype))return!1;if(t===n)return!0;var s=Gi(n);return!!s&&t===s[0]}(mi&&bt(new mi(new ArrayBuffer(1)))!=ye||Gn&&bt(new Gn)!=Nt||vi&&bt(vi.resolve())!=er||yn&&bt(new yn)!=Jt||Un&&bt(new Un)!=vt)&&(bt=function(t){var e=Wt(t),n=e==ge?t.constructor:f,s=n?fn(n):"";if(s)switch(s){case fc:return ye;case lc:return Nt;case pc:return er;case dc:return Jt;case gc:return vt}return e});var Fh=lr?Fe:as;function qn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||xn)}function Xu(t){return t==t&&!lt(t)}function qu(t,e){return function(n){return null!=n&&n[t]===e&&(e!==f||t in it(n))}}function Ju(t,e,n){return e=Tt(e===f?t.length-1:e,0),function(){for(var s=arguments,a=-1,c=Tt(s.length-e,0),l=v(c);++a<c;)l[a]=s[e+a];a=-1;for(var p=v(e+1);++a<e;)p[a]=s[a];return p[e]=n(l),Qt(t,this,p)}}function Qu(t,e){return e.length<2?t:cn(t,he(e,0,-1))}function $i(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ju=ea(xu),Jn=ic||function(t,e){return Ot.setTimeout(t,e)},Yi=ea(lh);function ta(t,e,n){var s=e+"";return Yi(t,function Mh(t,e){var n=e.length;if(!n)return t;var s=n-1;return e[s]=(n>1?"& ":"")+e[s],e=e.join(n>2?", ":" "),t.replace(_t,"{\n/* [wrapped with "+e+"] */\n")}(s,function Kh(t,e){return ue(V,function(n){var s="_."+n[0];e&n[1]&&!ar(t,s)&&t.push(s)}),t.sort()}(function Ih(t){var e=t.match(Ae);return e?e[1].split(Ie):[]}(s),n)))}function ea(t){var e=0,n=0;return function(){var s=oc(),a=16-(s-n);if(n=s,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(f,arguments)}}function Fr(t,e){var n=-1,s=t.length,a=s-1;for(e=e===f?s:e;++n<e;){var c=Ei(n,a),l=t[c];t[c]=t[n],t[n]=l}return t.length=e,t}var na=function Wh(t){var e=kr(t,function(s){return 500===n.size&&n.clear(),s}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(P,function(n,s,a,c){e.push(a?c.replace(Ga,"$1"):s||n)}),e});function Te(t){if("string"==typeof t||ee(t))return t;var e=t+"";return"0"==e&&1/t==-Xt?"-0":e}function fn(t){if(null!=t){try{return pr.call(t)}catch{}try{return t+""}catch{}}return""}function ra(t){if(t instanceof q)return t.clone();var e=new oe(t.__wrapped__,t.__chain__);return e.__actions__=$t(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vh=Y(function(t,e){return wt(t)?$n(t,Rt(e,1,wt,!0)):[]}),Xh=Y(function(t,e){var n=fe(e);return wt(n)&&(n=f),wt(t)?$n(t,Rt(e,1,wt,!0),H(n,2)):[]}),qh=Y(function(t,e){var n=fe(e);return wt(n)&&(n=f),wt(t)?$n(t,Rt(e,1,wt,!0),f,n):[]});function ia(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var a=null==n?0:z(n);return a<0&&(a=Tt(s+a,0)),or(t,H(e,3),a)}function sa(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var a=s-1;return n!==f&&(a=z(n),a=n<0?Tt(s+a,0):Lt(a,s-1)),or(t,H(e,3),a,!0)}function ua(t){return null!=t&&t.length?Rt(t,1):[]}function aa(t){return t&&t.length?t[0]:f}var of=Y(function(t){var e=ht(t,bi);return e.length&&e[0]===t[0]?yi(e):[]}),cf=Y(function(t){var e=fe(t),n=ht(t,bi);return e===fe(n)?e=f:n.pop(),n.length&&n[0]===t[0]?yi(n,H(e,2)):[]}),hf=Y(function(t){var e=fe(t),n=ht(t,bi);return(e="function"==typeof e?e:f)&&n.pop(),n.length&&n[0]===t[0]?yi(n,f,e):[]});function fe(t){var e=null==t?0:t.length;return e?t[e-1]:f}var df=Y(oa);function oa(t,e){return t&&t.length&&e&&e.length?Ti(t,e):t}var vf=Ne(function(t,e){var n=null==t?0:t.length,s=Si(t,e);return Du(t,ht(e,function(a){return He(a,n)?+a:a}).sort(Iu)),s});function Zi(t){return null==t?t:hc.call(t)}var bf=Y(function(t){return Je(Rt(t,1,wt,!0))}),Mf=Y(function(t){var e=fe(t);return wt(e)&&(e=f),Je(Rt(t,1,wt,!0),H(e,2))}),Bf=Y(function(t){var e=fe(t);return e="function"==typeof e?e:f,Je(Rt(t,1,wt,!0),f,e)});function Vi(t){if(!t||!t.length)return[];var e=0;return t=Ye(t,function(n){if(wt(n))return e=Tt(n.length,e),!0}),fi(e,function(n){return ht(t,oi(n))})}function ca(t,e){if(!t||!t.length)return[];var n=Vi(t);return null==e?n:ht(n,function(s){return Qt(e,f,s)})}var Wf=Y(function(t,e){return wt(t)?$n(t,e):[]}),Gf=Y(function(t){return Li(Ye(t,wt))}),Uf=Y(function(t){var e=fe(t);return wt(e)&&(e=f),Li(Ye(t,wt),H(e,2))}),kf=Y(function(t){var e=fe(t);return e="function"==typeof e?e:f,Li(Ye(t,wt),f,e)}),zf=Y(Vi),Yf=Y(function(t){var e=t.length,n=e>1?t[e-1]:f;return n="function"==typeof n?(t.pop(),n):f,ca(t,n)});function ha(t){var e=o(t);return e.__chain__=!0,e}function Wr(t,e){return e(t)}var Vf=Ne(function(t){var e=t.length,n=e?t[0]:0,s=this.__wrapped__,a=function(c){return Si(c,t)};return!(e>1||this.__actions__.length)&&s instanceof q&&He(n)?((s=s.slice(n,+n+(e?1:0))).__actions__.push({func:Wr,args:[a],thisArg:f}),new oe(s,this.__chain__).thru(function(c){return e&&!c.length&&c.push(f),c})):this.thru(a)}),nl=Ir(function(t,e,n){nt.call(t,n)?++t[n]:Me(t,n,1)}),sl=Hu(ia),ul=Hu(sa);function fa(t,e){return(k(t)?ue:qe)(t,H(e,3))}function la(t,e){return(k(t)?To:ou)(t,H(e,3))}var hl=Ir(function(t,e,n){nt.call(t,n)?t[n].push(e):Me(t,n,[e])}),ll=Y(function(t,e,n){var s=-1,a="function"==typeof e,c=Yt(t)?v(t.length):[];return qe(t,function(l){c[++s]=a?Qt(e,l,n):Yn(l,e,n)}),c}),pl=Ir(function(t,e,n){Me(t,n,e)});function Gr(t,e){return(k(t)?ht:gu)(t,H(e,3))}var gl=Ir(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Al=Y(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Gt(t,e[0],e[1])?e=[]:n>2&&Gt(e[0],e[1],e[2])&&(e=[e[0]]),Su(t,Rt(e,1),[])}),Ur=rc||function(){return Ot.Date.now()};function pa(t,e,n){return e=n?f:e,Be(t,128,f,f,f,f,e=t&&null==e?t.length:e)}function da(t,e){var n;if("function"!=typeof e)throw new ae(S);return t=z(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=f),n}}var Xi=Y(function(t,e,n){var s=1;if(n.length){var a=Ve(n,En(Xi));s|=32}return Be(t,s,e,n,a)}),ga=Y(function(t,e,n){var s=3;if(n.length){var a=Ve(n,En(ga));s|=32}return Be(e,s,t,n,a)});function _a(t,e,n){var s,a,c,l,p,m,y=0,A=!1,C=!1,O=!0;if("function"!=typeof t)throw new ae(S);function b(Dt){var Se=s,Ge=a;return s=a=f,y=Dt,l=t.apply(Ge,Se)}function W(Dt){var Se=Dt-m;return m===f||Se>=e||Se<0||C&&Dt-y>=c}function X(){var Dt=Ur();if(W(Dt))return J(Dt);p=Jn(X,function $(Dt){var Ha=e-(Dt-m);return C?Lt(Ha,c-(Dt-y)):Ha}(Dt))}function J(Dt){return p=f,O&&s?b(Dt):(s=a=f,l)}function re(){var Dt=Ur(),Se=W(Dt);if(s=arguments,a=this,m=Dt,Se){if(p===f)return function F(Dt){return y=Dt,p=Jn(X,e),A?b(Dt):l}(m);if(C)return Eu(p),p=Jn(X,e),b(m)}return p===f&&(p=Jn(X,e)),l}return e=le(e)||0,lt(n)&&(A=!!n.leading,c=(C="maxWait"in n)?Tt(le(n.maxWait)||0,e):c,O="trailing"in n?!!n.trailing:O),re.cancel=function ne(){p!==f&&Eu(p),y=0,s=m=a=p=f},re.flush=function Ut(){return p===f?l:J(Ur())},re}var Pl=Y(function(t,e){return au(t,1,e)}),Tl=Y(function(t,e,n){return au(t,le(e)||0,n)});function kr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ae(S);var n=function(){var s=arguments,a=e?e.apply(this,s):s[0],c=n.cache;if(c.has(a))return c.get(a);var l=t.apply(this,s);return n.cache=c.set(a,l)||c,l};return n.cache=new(kr.Cache||be),n}function zr(t){if("function"!=typeof t)throw new ae(S);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}kr.Cache=be;var Rl=gh(function(t,e){var n=(e=1==e.length&&k(e[0])?ht(e[0],jt(H())):ht(Rt(e,1),jt(H()))).length;return Y(function(s){for(var a=-1,c=Lt(s.length,n);++a<c;)s[a]=e[a].call(this,s[a]);return Qt(t,this,s)})}),qi=Y(function(t,e){var n=Ve(e,En(qi));return Be(t,32,f,e,n)}),Sa=Y(function(t,e){var n=Ve(e,En(Sa));return Be(t,64,f,e,n)}),Il=Ne(function(t,e){return Be(t,256,f,f,f,e)});function _e(t,e){return t===e||t!=t&&e!=e}var zl=Br(xi),Kl=Br(function(t,e){return t>=e}),ln=lu(function(){return arguments}())?lu:function(t){return St(t)&&nt.call(t,"callee")&&!Qs.call(t,"callee")},k=v.isArray,$l=bs?jt(bs):function Qc(t){return St(t)&&Wt(t)==$e};function Yt(t){return null!=t&&Kr(t.length)&&!Fe(t)}function wt(t){return St(t)&&Yt(t)}var tn=sc||as,Zl=Ms?jt(Ms):function jc(t){return St(t)&&Wt(t)==Oe};function Ji(t){if(!St(t))return!1;var e=Wt(t);return e==en||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Qn(t)}function Fe(t){if(!lt(t))return!1;var e=Wt(t);return e==gn||e==Re||"[object AsyncFunction]"==e||"[object Proxy]"==e}function wa(t){return"number"==typeof t&&t==z(t)}function Kr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=At}function lt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function St(t){return null!=t&&"object"==typeof t}var Da=Bs?jt(Bs):function eh(t){return St(t)&&bt(t)==Nt};function xa(t){return"number"==typeof t||St(t)&&Wt(t)==ie}function Qn(t){if(!St(t)||Wt(t)!=ge)return!1;var e=vr(t);if(null===e)return!0;var n=nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&pr.call(n)==jo}var Qi=Ns?jt(Ns):function nh(t){return St(t)&&Wt(t)==nn},ya=Hs?jt(Hs):function rh(t){return St(t)&&bt(t)==Jt};function $r(t){return"string"==typeof t||!k(t)&&St(t)&&Wt(t)==mn}function ee(t){return"symbol"==typeof t||St(t)&&Wt(t)==mt}var On=Fs?jt(Fs):function ih(t){return St(t)&&Kr(t.length)&&!!at[Wt(t)]},cp=Br(Pi),hp=Br(function(t,e){return t<=e});function Aa(t){if(!t)return[];if(Yt(t))return $r(t)?me(t):$t(t);if(Wn&&t[Wn])return function Uo(d){for(var D,v=[];!(D=d.next()).done;)v.push(D.value);return v}(t[Wn]());var e=bt(t);return(e==Nt?pi:e==Jt?cr:Rn)(t)}function We(t){return t?(t=le(t))===Xt||t===-Xt?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function z(t){var e=We(t),n=e%1;return e==e?n?e-n:e:0}function Ca(t){return t?on(z(t),0,Kt):0}function le(t){if("number"==typeof t)return t;if(ee(t))return NaN;if(lt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=lt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ks(t);var n=za.test(t);return n||$a.test(t)?Ao(t.slice(2),n?2:8):ka.test(t)?NaN:+t}function Pa(t){return Pe(t,Zt(t))}function tt(t){return null==t?"":te(t)}var lp=Pn(function(t,e){if(qn(e)||Yt(e))Pe(e,Et(e),t);else for(var n in e)nt.call(e,n)&&Kn(t,n,e[n])}),Ta=Pn(function(t,e){Pe(e,Zt(e),t)}),Yr=Pn(function(t,e,n,s){Pe(e,Zt(e),t,s)}),pp=Pn(function(t,e,n,s){Pe(e,Et(e),t,s)}),dp=Ne(Si),mp=Y(function(t,e){t=it(t);var n=-1,s=e.length,a=s>2?e[2]:f;for(a&&Gt(e[0],e[1],a)&&(s=1);++n<s;)for(var c=e[n],l=Zt(c),p=-1,m=l.length;++p<m;){var y=l[p],A=t[y];(A===f||_e(A,xn[y])&&!nt.call(t,y))&&(t[y]=c[y])}return t}),vp=Y(function(t){return t.push(f,Ku),Qt(Ea,f,t)});function ji(t,e,n){var s=null==t?f:cn(t,e);return s===f?n:s}function ts(t,e){return null!=t&&Zu(t,e,Xc)}var Tp=Wu(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=dr.call(e)),t[e]=n},ns(Vt)),Ep=Wu(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=dr.call(e)),nt.call(t,e)?t[e].push(n):t[e]=[n]},H),Op=Y(Yn);function Et(t){return Yt(t)?ru(t):Ci(t)}function Zt(t){return Yt(t)?ru(t,!0):function sh(t){if(!lt(t))return function Uh(t){var e=[];if(null!=t)for(var n in it(t))e.push(n);return e}(t);var e=qn(t),n=[];for(var s in t)"constructor"==s&&(e||!nt.call(t,s))||n.push(s);return n}(t)}var Lp=Pn(function(t,e,n){Er(t,e,n)}),Ea=Pn(function(t,e,n,s){Er(t,e,n,s)}),bp=Ne(function(t,e){var n={};if(null==t)return n;var s=!1;e=ht(e,function(c){return c=Qe(c,t),s||(s=c.length>1),c}),Pe(t,Wi(t),n),s&&(n=ce(n,7,Ph));for(var a=e.length;a--;)Ii(n,e[a]);return n}),Bp=Ne(function(t,e){return null==t?{}:function ah(t,e){return wu(t,e,function(n,s){return ts(t,s)})}(t,e)});function Oa(t,e){if(null==t)return{};var n=ht(Wi(t),function(s){return[s]});return e=H(e),wu(t,n,function(s,a){return e(s,a[0])})}var Ra=ku(Et),Ia=ku(Zt);function Rn(t){return null==t?[]:li(t,Et(t))}var Zp=Tn(function(t,e,n){return e=e.toLowerCase(),t+(n?La(e):e)});function La(t){return es(tt(t).toLowerCase())}function ba(t){return(t=tt(t))&&t.replace(Za,No).replace(lo,"")}var Jp=Tn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Qp=Tn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),jp=Nu("toLowerCase"),ud=Tn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),od=Tn(function(t,e,n){return t+(n?" ":"")+es(e)}),_d=Tn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),es=Nu("toUpperCase");function Ma(t,e,n){return t=tt(t),(e=n?f:e)===f?function Go(d){return mo.test(d)}(t)?function Vo(d){return d.match(po)||[]}(t):function Io(d){return d.match(Fa)||[]}(t):t.match(e)||[]}var Ba=Y(function(t,e){try{return Qt(t,f,e)}catch(n){return Ji(n)?n:new U(n)}}),Sd=Ne(function(t,e){return ue(e,function(n){n=Te(n),Me(t,n,Xi(t[n],t))}),t});function ns(t){return function(){return t}}var yd=Fu(),Ad=Fu(!0);function Vt(t){return t}function rs(t){return du("function"==typeof t?t:ce(t,1))}var Td=Y(function(t,e){return function(n){return Yn(n,t,e)}}),Ed=Y(function(t,e){return function(n){return Yn(t,n,e)}});function is(t,e,n){var s=Et(e),a=Tr(e,s);null==n&&(!lt(e)||!a.length&&s.length)&&(n=e,e=t,t=this,a=Tr(e,Et(e)));var c=!(lt(n)&&"chain"in n&&!n.chain),l=Fe(t);return ue(a,function(p){var m=e[p];t[p]=m,l&&(t.prototype[p]=function(){var y=this.__chain__;if(c||y){var A=t(this.__wrapped__);return(A.__actions__=$t(this.__actions__)).push({func:m,args:arguments,thisArg:t}),A.__chain__=y,A}return m.apply(t,Ze([this.value()],arguments))})}),t}function ss(){}var Id=Ni(ht),Ld=Ni(Ws),bd=Ni(ai);function Na(t){return zi(t)?oi(Te(t)):function oh(t){return function(e){return cn(e,t)}}(t)}var Bd=Gu(),Nd=Gu(!0);function us(){return[]}function as(){return!1}var zd=br(function(t,e){return t+e},0),Kd=Hi("ceil"),$d=br(function(t,e){return t/e},1),Yd=Hi("floor"),jd=br(function(t,e){return t*e},1),tg=Hi("round"),eg=br(function(t,e){return t-e},0);return o.after=function Cl(t,e){if("function"!=typeof e)throw new ae(S);return t=z(t),function(){if(--t<1)return e.apply(this,arguments)}},o.ary=pa,o.assign=lp,o.assignIn=Ta,o.assignInWith=Yr,o.assignWith=pp,o.at=dp,o.before=da,o.bind=Xi,o.bindAll=Sd,o.bindKey=ga,o.castArray=function Hl(){if(!arguments.length)return[];var t=arguments[0];return k(t)?t:[t]},o.chain=ha,o.chunk=function $h(t,e,n){e=(n?Gt(t,e,n):e===f)?1:Tt(z(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var a=0,c=0,l=v(wr(s/e));a<s;)l[c++]=he(t,a,a+=e);return l},o.compact=function Yh(t){for(var e=-1,n=null==t?0:t.length,s=0,a=[];++e<n;){var c=t[e];c&&(a[s++]=c)}return a},o.concat=function Zh(){var t=arguments.length;if(!t)return[];for(var e=v(t-1),n=arguments[0],s=t;s--;)e[s-1]=arguments[s];return Ze(k(n)?$t(n):[n],Rt(e,1))},o.cond=function wd(t){var e=null==t?0:t.length,n=H();return t=e?ht(t,function(s){if("function"!=typeof s[1])throw new ae(S);return[n(s[0]),s[1]]}):[],Y(function(s){for(var a=-1;++a<e;){var c=t[a];if(Qt(c[0],this,s))return Qt(c[1],this,s)}})},o.conforms=function Dd(t){return function $c(t){var e=Et(t);return function(n){return uu(n,t,e)}}(ce(t,1))},o.constant=ns,o.countBy=nl,o.create=function gp(t,e){var n=Cn(t);return null==e?n:su(n,e)},o.curry=function ma(t,e,n){var s=Be(t,8,f,f,f,f,f,e=n?f:e);return s.placeholder=ma.placeholder,s},o.curryRight=function va(t,e,n){var s=Be(t,16,f,f,f,f,f,e=n?f:e);return s.placeholder=va.placeholder,s},o.debounce=_a,o.defaults=mp,o.defaultsDeep=vp,o.defer=Pl,o.delay=Tl,o.difference=Vh,o.differenceBy=Xh,o.differenceWith=qh,o.drop=function Jh(t,e,n){var s=null==t?0:t.length;return s?he(t,(e=n||e===f?1:z(e))<0?0:e,s):[]},o.dropRight=function Qh(t,e,n){var s=null==t?0:t.length;return s?he(t,0,(e=s-(e=n||e===f?1:z(e)))<0?0:e):[]},o.dropRightWhile=function jh(t,e){return t&&t.length?Rr(t,H(e,3),!0,!0):[]},o.dropWhile=function tf(t,e){return t&&t.length?Rr(t,H(e,3),!0):[]},o.fill=function ef(t,e,n,s){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&Gt(t,e,n)&&(n=0,s=a),function Zc(t,e,n,s){var a=t.length;for((n=z(n))<0&&(n=-n>a?0:a+n),(s=s===f||s>a?a:z(s))<0&&(s+=a),s=n>s?0:Ca(s);n<s;)t[n++]=e;return t}(t,e,n,s)):[]},o.filter=function il(t,e){return(k(t)?Ye:cu)(t,H(e,3))},o.flatMap=function al(t,e){return Rt(Gr(t,e),1)},o.flatMapDeep=function ol(t,e){return Rt(Gr(t,e),Xt)},o.flatMapDepth=function cl(t,e,n){return n=n===f?1:z(n),Rt(Gr(t,e),n)},o.flatten=ua,o.flattenDeep=function nf(t){return null!=t&&t.length?Rt(t,Xt):[]},o.flattenDepth=function rf(t,e){return null!=t&&t.length?Rt(t,e=e===f?1:z(e)):[]},o.flip=function El(t){return Be(t,512)},o.flow=yd,o.flowRight=Ad,o.fromPairs=function sf(t){for(var e=-1,n=null==t?0:t.length,s={};++e<n;){var a=t[e];s[a[0]]=a[1]}return s},o.functions=function Ap(t){return null==t?[]:Tr(t,Et(t))},o.functionsIn=function Cp(t){return null==t?[]:Tr(t,Zt(t))},o.groupBy=hl,o.initial=function af(t){return null!=t&&t.length?he(t,0,-1):[]},o.intersection=of,o.intersectionBy=cf,o.intersectionWith=hf,o.invert=Tp,o.invertBy=Ep,o.invokeMap=ll,o.iteratee=rs,o.keyBy=pl,o.keys=Et,o.keysIn=Zt,o.map=Gr,o.mapKeys=function Rp(t,e){var n={};return e=H(e,3),Ce(t,function(s,a,c){Me(n,e(s,a,c),s)}),n},o.mapValues=function Ip(t,e){var n={};return e=H(e,3),Ce(t,function(s,a,c){Me(n,a,e(s,a,c))}),n},o.matches=function Cd(t){return mu(ce(t,1))},o.matchesProperty=function Pd(t,e){return vu(t,ce(e,1))},o.memoize=kr,o.merge=Lp,o.mergeWith=Ea,o.method=Td,o.methodOf=Ed,o.mixin=is,o.negate=zr,o.nthArg=function Rd(t){return t=z(t),Y(function(e){return _u(e,t)})},o.omit=bp,o.omitBy=function Mp(t,e){return Oa(t,zr(H(e)))},o.once=function Ol(t){return da(2,t)},o.orderBy=function dl(t,e,n,s){return null==t?[]:(k(e)||(e=null==e?[]:[e]),k(n=s?f:n)||(n=null==n?[]:[n]),Su(t,e,n))},o.over=Id,o.overArgs=Rl,o.overEvery=Ld,o.overSome=bd,o.partial=qi,o.partialRight=Sa,o.partition=gl,o.pick=Bp,o.pickBy=Oa,o.property=Na,o.propertyOf=function Md(t){return function(e){return null==t?f:cn(t,e)}},o.pull=df,o.pullAll=oa,o.pullAllBy=function gf(t,e,n){return t&&t.length&&e&&e.length?Ti(t,e,H(n,2)):t},o.pullAllWith=function mf(t,e,n){return t&&t.length&&e&&e.length?Ti(t,e,f,n):t},o.pullAt=vf,o.range=Bd,o.rangeRight=Nd,o.rearg=Il,o.reject=function _l(t,e){return(k(t)?Ye:cu)(t,zr(H(e,3)))},o.remove=function _f(t,e){var n=[];if(!t||!t.length)return n;var s=-1,a=[],c=t.length;for(e=H(e,3);++s<c;){var l=t[s];e(l,s,t)&&(n.push(l),a.push(s))}return Du(t,a),n},o.rest=function Ll(t,e){if("function"!=typeof t)throw new ae(S);return Y(t,e=e===f?e:z(e))},o.reverse=Zi,o.sampleSize=function wl(t,e,n){return e=(n?Gt(t,e,n):e===f)?1:z(e),(k(t)?Uc:fh)(t,e)},o.set=function Hp(t,e,n){return null==t?t:Vn(t,e,n)},o.setWith=function Fp(t,e,n,s){return s="function"==typeof s?s:f,null==t?t:Vn(t,e,n,s)},o.shuffle=function Dl(t){return(k(t)?kc:ph)(t)},o.slice=function Sf(t,e,n){var s=null==t?0:t.length;return s?(n&&"number"!=typeof n&&Gt(t,e,n)?(e=0,n=s):(e=null==e?0:z(e),n=n===f?s:z(n)),he(t,e,n)):[]},o.sortBy=Al,o.sortedUniq=function Pf(t){return t&&t.length?yu(t):[]},o.sortedUniqBy=function Tf(t,e){return t&&t.length?yu(t,H(e,2)):[]},o.split=function ad(t,e,n){return n&&"number"!=typeof n&&Gt(t,e,n)&&(e=n=f),(n=n===f?Kt:n>>>0)?(t=tt(t))&&("string"==typeof e||null!=e&&!Qi(e))&&!(e=te(e))&&wn(t)?je(me(t),0,n):t.split(e,n):[]},o.spread=function bl(t,e){if("function"!=typeof t)throw new ae(S);return e=null==e?0:Tt(z(e),0),Y(function(n){var s=n[e],a=je(n,0,e);return s&&Ze(a,s),Qt(t,this,a)})},o.tail=function Ef(t){var e=null==t?0:t.length;return e?he(t,1,e):[]},o.take=function Of(t,e,n){return t&&t.length?he(t,0,(e=n||e===f?1:z(e))<0?0:e):[]},o.takeRight=function Rf(t,e,n){var s=null==t?0:t.length;return s?he(t,(e=s-(e=n||e===f?1:z(e)))<0?0:e,s):[]},o.takeRightWhile=function If(t,e){return t&&t.length?Rr(t,H(e,3),!1,!0):[]},o.takeWhile=function Lf(t,e){return t&&t.length?Rr(t,H(e,3)):[]},o.tap=function Zf(t,e){return e(t),t},o.throttle=function Ml(t,e,n){var s=!0,a=!0;if("function"!=typeof t)throw new ae(S);return lt(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),_a(t,e,{leading:s,maxWait:e,trailing:a})},o.thru=Wr,o.toArray=Aa,o.toPairs=Ra,o.toPairsIn=Ia,o.toPath=function Ud(t){return k(t)?ht(t,Te):ee(t)?[t]:$t(na(tt(t)))},o.toPlainObject=Pa,o.transform=function Wp(t,e,n){var s=k(t),a=s||tn(t)||On(t);if(e=H(e,4),null==n){var c=t&&t.constructor;n=a?s?new c:[]:lt(t)&&Fe(c)?Cn(vr(t)):{}}return(a?ue:Ce)(t,function(l,p,m){return e(n,l,p,m)}),n},o.unary=function Bl(t){return pa(t,1)},o.union=bf,o.unionBy=Mf,o.unionWith=Bf,o.uniq=function Nf(t){return t&&t.length?Je(t):[]},o.uniqBy=function Hf(t,e){return t&&t.length?Je(t,H(e,2)):[]},o.uniqWith=function Ff(t,e){return e="function"==typeof e?e:f,t&&t.length?Je(t,f,e):[]},o.unset=function Gp(t,e){return null==t||Ii(t,e)},o.unzip=Vi,o.unzipWith=ca,o.update=function Up(t,e,n){return null==t?t:Cu(t,e,Mi(n))},o.updateWith=function kp(t,e,n,s){return s="function"==typeof s?s:f,null==t?t:Cu(t,e,Mi(n),s)},o.values=Rn,o.valuesIn=function zp(t){return null==t?[]:li(t,Zt(t))},o.without=Wf,o.words=Ma,o.wrap=function Nl(t,e){return qi(Mi(e),t)},o.xor=Gf,o.xorBy=Uf,o.xorWith=kf,o.zip=zf,o.zipObject=function Kf(t,e){return Tu(t||[],e||[],Kn)},o.zipObjectDeep=function $f(t,e){return Tu(t||[],e||[],Vn)},o.zipWith=Yf,o.entries=Ra,o.entriesIn=Ia,o.extend=Ta,o.extendWith=Yr,is(o,o),o.add=zd,o.attempt=Ba,o.camelCase=Zp,o.capitalize=La,o.ceil=Kd,o.clamp=function Kp(t,e,n){return n===f&&(n=e,e=f),n!==f&&(n=(n=le(n))==n?n:0),e!==f&&(e=(e=le(e))==e?e:0),on(le(t),e,n)},o.clone=function Fl(t){return ce(t,4)},o.cloneDeep=function Gl(t){return ce(t,5)},o.cloneDeepWith=function Ul(t,e){return ce(t,5,e="function"==typeof e?e:f)},o.cloneWith=function Wl(t,e){return ce(t,4,e="function"==typeof e?e:f)},o.conformsTo=function kl(t,e){return null==e||uu(t,e,Et(e))},o.deburr=ba,o.defaultTo=function xd(t,e){return null==t||t!=t?e:t},o.divide=$d,o.endsWith=function Vp(t,e,n){t=tt(t),e=te(e);var s=t.length,a=n=n===f?s:on(z(n),0,s);return(n-=e.length)>=0&&t.slice(n,a)==e},o.eq=_e,o.escape=function Xp(t){return(t=tt(t))&&r.test(t)?t.replace(Qr,Ho):t},o.escapeRegExp=function qp(t){return(t=tt(t))&&L.test(t)?t.replace(E,"\\$&"):t},o.every=function rl(t,e,n){var s=k(t)?Ws:Yc;return n&&Gt(t,e,n)&&(e=f),s(t,H(e,3))},o.find=sl,o.findIndex=ia,o.findKey=function _p(t,e){return Gs(t,H(e,3),Ce)},o.findLast=ul,o.findLastIndex=sa,o.findLastKey=function Sp(t,e){return Gs(t,H(e,3),Di)},o.floor=Yd,o.forEach=fa,o.forEachRight=la,o.forIn=function wp(t,e){return null==t?t:wi(t,H(e,3),Zt)},o.forInRight=function Dp(t,e){return null==t?t:hu(t,H(e,3),Zt)},o.forOwn=function xp(t,e){return t&&Ce(t,H(e,3))},o.forOwnRight=function yp(t,e){return t&&Di(t,H(e,3))},o.get=ji,o.gt=zl,o.gte=Kl,o.has=function Pp(t,e){return null!=t&&Zu(t,e,Vc)},o.hasIn=ts,o.head=aa,o.identity=Vt,o.includes=function fl(t,e,n,s){t=Yt(t)?t:Rn(t),n=n&&!s?z(n):0;var a=t.length;return n<0&&(n=Tt(a+n,0)),$r(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Sn(t,e,n)>-1},o.indexOf=function uf(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var a=null==n?0:z(n);return a<0&&(a=Tt(s+a,0)),Sn(t,e,a)},o.inRange=function $p(t,e,n){return e=We(e),n===f?(n=e,e=0):n=We(n),function qc(t,e,n){return t>=Lt(e,n)&&t<Tt(e,n)}(t=le(t),e,n)},o.invoke=Op,o.isArguments=ln,o.isArray=k,o.isArrayBuffer=$l,o.isArrayLike=Yt,o.isArrayLikeObject=wt,o.isBoolean=function Yl(t){return!0===t||!1===t||St(t)&&Wt(t)==ze},o.isBuffer=tn,o.isDate=Zl,o.isElement=function Vl(t){return St(t)&&1===t.nodeType&&!Qn(t)},o.isEmpty=function Xl(t){if(null==t)return!0;if(Yt(t)&&(k(t)||"string"==typeof t||"function"==typeof t.splice||tn(t)||On(t)||ln(t)))return!t.length;var e=bt(t);if(e==Nt||e==Jt)return!t.size;if(qn(t))return!Ci(t).length;for(var n in t)if(nt.call(t,n))return!1;return!0},o.isEqual=function ql(t,e){return Zn(t,e)},o.isEqualWith=function Jl(t,e,n){var s=(n="function"==typeof n?n:f)?n(t,e):f;return s===f?Zn(t,e,f,n):!!s},o.isError=Ji,o.isFinite=function Ql(t){return"number"==typeof t&&tu(t)},o.isFunction=Fe,o.isInteger=wa,o.isLength=Kr,o.isMap=Da,o.isMatch=function jl(t,e){return t===e||Ai(t,e,Ui(e))},o.isMatchWith=function tp(t,e,n){return n="function"==typeof n?n:f,Ai(t,e,Ui(e),n)},o.isNaN=function ep(t){return xa(t)&&t!=+t},o.isNative=function np(t){if(Fh(t))throw new U("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return pu(t)},o.isNil=function ip(t){return null==t},o.isNull=function rp(t){return null===t},o.isNumber=xa,o.isObject=lt,o.isObjectLike=St,o.isPlainObject=Qn,o.isRegExp=Qi,o.isSafeInteger=function sp(t){return wa(t)&&t>=-At&&t<=At},o.isSet=ya,o.isString=$r,o.isSymbol=ee,o.isTypedArray=On,o.isUndefined=function up(t){return t===f},o.isWeakMap=function ap(t){return St(t)&&bt(t)==vt},o.isWeakSet=function op(t){return St(t)&&"[object WeakSet]"==Wt(t)},o.join=function ff(t,e){return null==t?"":uc.call(t,e)},o.kebabCase=Jp,o.last=fe,o.lastIndexOf=function lf(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var a=s;return n!==f&&(a=(a=z(n))<0?Tt(s+a,0):Lt(a,s-1)),e==e?function Ko(d,D,v){for(var R=v+1;R--;)if(d[R]===D)return R;return R}(t,e,a):or(t,Us,a,!0)},o.lowerCase=Qp,o.lowerFirst=jp,o.lt=cp,o.lte=hp,o.max=function Zd(t){return t&&t.length?Pr(t,Vt,xi):f},o.maxBy=function Vd(t,e){return t&&t.length?Pr(t,H(e,2),xi):f},o.mean=function Xd(t){return ks(t,Vt)},o.meanBy=function qd(t,e){return ks(t,H(e,2))},o.min=function Jd(t){return t&&t.length?Pr(t,Vt,Pi):f},o.minBy=function Qd(t,e){return t&&t.length?Pr(t,H(e,2),Pi):f},o.stubArray=us,o.stubFalse=as,o.stubObject=function Hd(){return{}},o.stubString=function Fd(){return""},o.stubTrue=function Wd(){return!0},o.multiply=jd,o.nth=function pf(t,e){return t&&t.length?_u(t,z(e)):f},o.noConflict=function Od(){return Ot._===this&&(Ot._=tc),this},o.noop=ss,o.now=Ur,o.pad=function td(t,e,n){t=tt(t);var s=(e=z(e))?Dn(t):0;if(!e||s>=e)return t;var a=(e-s)/2;return Mr(Dr(a),n)+t+Mr(wr(a),n)},o.padEnd=function ed(t,e,n){t=tt(t);var s=(e=z(e))?Dn(t):0;return e&&s<e?t+Mr(e-s,n):t},o.padStart=function nd(t,e,n){t=tt(t);var s=(e=z(e))?Dn(t):0;return e&&s<e?Mr(e-s,n)+t:t},o.parseInt=function rd(t,e,n){return n||null==e?e=0:e&&(e=+e),cc(tt(t).replace(K,""),e||0)},o.random=function Yp(t,e,n){if(n&&"boolean"!=typeof n&&Gt(t,e,n)&&(e=n=f),n===f&&("boolean"==typeof e?(n=e,e=f):"boolean"==typeof t&&(n=t,t=f)),t===f&&e===f?(t=0,e=1):(t=We(t),e===f?(e=t,t=0):e=We(e)),t>e){var s=t;t=e,e=s}if(n||t%1||e%1){var a=eu();return Lt(t+a*(e-t+yo("1e-"+((a+"").length-1))),e)}return Ei(t,e)},o.reduce=function ml(t,e,n){var s=k(t)?ui:zs,a=arguments.length<3;return s(t,H(e,4),n,a,qe)},o.reduceRight=function vl(t,e,n){var s=k(t)?Eo:zs,a=arguments.length<3;return s(t,H(e,4),n,a,ou)},o.repeat=function id(t,e,n){return e=(n?Gt(t,e,n):e===f)?1:z(e),Oi(tt(t),e)},o.replace=function sd(){var t=arguments,e=tt(t[0]);return t.length<3?e:e.replace(t[1],t[2])},o.result=function Np(t,e,n){var s=-1,a=(e=Qe(e,t)).length;for(a||(a=1,t=f);++s<a;){var c=null==t?f:t[Te(e[s])];c===f&&(s=a,c=n),t=Fe(c)?c.call(t):c}return t},o.round=tg,o.runInContext=d,o.sample=function Sl(t){return(k(t)?iu:hh)(t)},o.size=function xl(t){if(null==t)return 0;if(Yt(t))return $r(t)?Dn(t):t.length;var e=bt(t);return e==Nt||e==Jt?t.size:Ci(t).length},o.snakeCase=ud,o.some=function yl(t,e,n){var s=k(t)?ai:dh;return n&&Gt(t,e,n)&&(e=f),s(t,H(e,3))},o.sortedIndex=function wf(t,e){return Or(t,e)},o.sortedIndexBy=function Df(t,e,n){return Ri(t,e,H(n,2))},o.sortedIndexOf=function xf(t,e){var n=null==t?0:t.length;if(n){var s=Or(t,e);if(s<n&&_e(t[s],e))return s}return-1},o.sortedLastIndex=function yf(t,e){return Or(t,e,!0)},o.sortedLastIndexBy=function Af(t,e,n){return Ri(t,e,H(n,2),!0)},o.sortedLastIndexOf=function Cf(t,e){if(null!=t&&t.length){var s=Or(t,e,!0)-1;if(_e(t[s],e))return s}return-1},o.startCase=od,o.startsWith=function cd(t,e,n){return t=tt(t),n=null==n?0:on(z(n),0,t.length),e=te(e),t.slice(n,n+e.length)==e},o.subtract=eg,o.sum=function ng(t){return t&&t.length?hi(t,Vt):0},o.sumBy=function rg(t,e){return t&&t.length?hi(t,H(e,2)):0},o.template=function hd(t,e,n){var s=o.templateSettings;n&&Gt(t,e,n)&&(e=f),t=tt(t),e=Yr({},e,s,zu);var p,m,a=Yr({},e.imports,s.imports,zu),c=Et(a),l=li(a,c),y=0,A=e.interpolate||ir,C="__p += '",O=di((e.escape||ir).source+"|"+A.source+"|"+(A===h?Ua:ir).source+"|"+(e.evaluate||ir).source+"|$","g"),b="//# sourceURL="+(nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_o+"]")+"\n";t.replace(O,function(W,X,J,ne,Ut,re){return J||(J=ne),C+=t.slice(y,re).replace(Va,Fo),X&&(p=!0,C+="' +\n__e("+X+") +\n'"),Ut&&(m=!0,C+="';\n"+Ut+";\n__p += '"),J&&(C+="' +\n((__t = ("+J+")) == null ? '' : __t) +\n'"),y=re+W.length,W}),C+="';\n";var F=nt.call(e,"variable")&&e.variable;if(F){if(Wa.test(F))throw new U("Invalid `variable` option passed into `_.template`")}else C="with (obj) {\n"+C+"\n}\n";C=(m?C.replace(cs,""):C).replace(hs,"$1").replace(Ht,"$1;"),C="function("+(F||"obj")+") {\n"+(F?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(p?", __e = _.escape":"")+(m?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+C+"return __p\n}";var $=Ba(function(){return j(c,b+"return "+C).apply(f,l)});if($.source=C,Ji($))throw $;return $},o.times=function Gd(t,e){if((t=z(t))<1||t>At)return[];var n=Kt,s=Lt(t,Kt);e=H(e),t-=Kt;for(var a=fi(s,e);++n<t;)e(n);return a},o.toFinite=We,o.toInteger=z,o.toLength=Ca,o.toLower=function fd(t){return tt(t).toLowerCase()},o.toNumber=le,o.toSafeInteger=function fp(t){return t?on(z(t),-At,At):0===t?t:0},o.toString=tt,o.toUpper=function ld(t){return tt(t).toUpperCase()},o.trim=function pd(t,e,n){if((t=tt(t))&&(n||e===f))return Ks(t);if(!t||!(e=te(e)))return t;var s=me(t),a=me(e);return je(s,$s(s,a),Ys(s,a)+1).join("")},o.trimEnd=function dd(t,e,n){if((t=tt(t))&&(n||e===f))return t.slice(0,Vs(t)+1);if(!t||!(e=te(e)))return t;var s=me(t);return je(s,0,Ys(s,me(e))+1).join("")},o.trimStart=function gd(t,e,n){if((t=tt(t))&&(n||e===f))return t.replace(K,"");if(!t||!(e=te(e)))return t;var s=me(t);return je(s,$s(s,me(e))).join("")},o.truncate=function md(t,e){var n=30,s="...";if(lt(e)){var a="separator"in e?e.separator:a;n="length"in e?z(e.length):n,s="omission"in e?te(e.omission):s}var c=(t=tt(t)).length;if(wn(t)){var l=me(t);c=l.length}if(n>=c)return t;var p=n-Dn(s);if(p<1)return s;var m=l?je(l,0,p).join(""):t.slice(0,p);if(a===f)return m+s;if(l&&(p+=m.length-p),Qi(a)){if(t.slice(p).search(a)){var y,A=m;for(a.global||(a=di(a.source,tt(fs.exec(a))+"g")),a.lastIndex=0;y=a.exec(A);)var C=y.index;m=m.slice(0,C===f?p:C)}}else if(t.indexOf(te(a),p)!=p){var O=m.lastIndexOf(a);O>-1&&(m=m.slice(0,O))}return m+s},o.unescape=function vd(t){return(t=tt(t))&&x.test(t)?t.replace(Jr,$o):t},o.uniqueId=function kd(t){var e=++Qo;return tt(t)+e},o.upperCase=_d,o.upperFirst=es,o.each=fa,o.eachRight=la,o.first=aa,is(o,function(){var t={};return Ce(o,function(e,n){nt.call(o.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),o.VERSION="4.17.21",ue(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){o[t].placeholder=o}),ue(["drop","take"],function(t,e){q.prototype[t]=function(n){n=n===f?1:Tt(z(n),0);var s=this.__filtered__&&!e?new q(this):this.clone();return s.__filtered__?s.__takeCount__=Lt(n,s.__takeCount__):s.__views__.push({size:Lt(n,Kt),type:t+(s.__dir__<0?"Right":"")}),s},q.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),ue(["filter","map","takeWhile"],function(t,e){var n=e+1,s=1==n||3==n;q.prototype[t]=function(a){var c=this.clone();return c.__iteratees__.push({iteratee:H(a,3),type:n}),c.__filtered__=c.__filtered__||s,c}}),ue(["head","last"],function(t,e){var n="take"+(e?"Right":"");q.prototype[t]=function(){return this[n](1).value()[0]}}),ue(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");q.prototype[t]=function(){return this.__filtered__?new q(this):this[n](1)}}),q.prototype.compact=function(){return this.filter(Vt)},q.prototype.find=function(t){return this.filter(t).head()},q.prototype.findLast=function(t){return this.reverse().find(t)},q.prototype.invokeMap=Y(function(t,e){return"function"==typeof t?new q(this):this.map(function(n){return Yn(n,t,e)})}),q.prototype.reject=function(t){return this.filter(zr(H(t)))},q.prototype.slice=function(t,e){t=z(t);var n=this;return n.__filtered__&&(t>0||e<0)?new q(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==f&&(n=(e=z(e))<0?n.dropRight(-e):n.take(e-t)),n)},q.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},q.prototype.toArray=function(){return this.take(Kt)},Ce(q.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),s=/^(?:head|last)$/.test(e),a=o[s?"take"+("last"==e?"Right":""):e],c=s||/^find/.test(e);a&&(o.prototype[e]=function(){var l=this.__wrapped__,p=s?[1]:arguments,m=l instanceof q,y=p[0],A=m||k(l),C=function(X){var J=a.apply(o,Ze([X],p));return s&&O?J[0]:J};A&&n&&"function"==typeof y&&1!=y.length&&(m=A=!1);var O=this.__chain__,F=c&&!O,$=m&&!this.__actions__.length;if(!c&&A){l=$?l:new q(this);var W=t.apply(l,p);return W.__actions__.push({func:Wr,args:[C],thisArg:f}),new oe(W,O)}return F&&$?t.apply(this,p):(W=this.thru(C),F?s?W.value()[0]:W.value():W)})}),ue(["pop","push","shift","sort","splice","unshift"],function(t){var e=fr[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);o.prototype[t]=function(){var a=arguments;if(s&&!this.__chain__){var c=this.value();return e.apply(k(c)?c:[],a)}return this[n](function(l){return e.apply(k(l)?l:[],a)})}}),Ce(q.prototype,function(t,e){var n=o[e];if(n){var s=n.name+"";nt.call(An,s)||(An[s]=[]),An[s].push({name:e,func:n})}}),An[Lr(f,2).name]=[{name:"wrapper",func:f}],q.prototype.clone=function mc(){var t=new q(this.__wrapped__);return t.__actions__=$t(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=$t(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=$t(this.__views__),t},q.prototype.reverse=function vc(){if(this.__filtered__){var t=new q(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},q.prototype.value=function _c(){var t=this.__wrapped__.value(),e=this.__dir__,n=k(t),s=e<0,a=n?t.length:0,c=function Rh(t,e,n){for(var s=-1,a=n.length;++s<a;){var c=n[s],l=c.size;switch(c.type){case"drop":t+=l;break;case"dropRight":e-=l;break;case"take":e=Lt(e,t+l);break;case"takeRight":t=Tt(t,e-l)}}return{start:t,end:e}}(0,a,this.__views__),l=c.start,p=c.end,m=p-l,y=s?p:l-1,A=this.__iteratees__,C=A.length,O=0,b=Lt(m,this.__takeCount__);if(!n||!s&&a==m&&b==m)return Pu(t,this.__actions__);var F=[];t:for(;m--&&O<b;){for(var $=-1,W=t[y+=e];++$<C;){var X=A[$],ne=X.type,Ut=(0,X.iteratee)(W);if(2==ne)W=Ut;else if(!Ut){if(1==ne)continue t;break t}}F[O++]=W}return F},o.prototype.at=Vf,o.prototype.chain=function Xf(){return ha(this)},o.prototype.commit=function qf(){return new oe(this.value(),this.__chain__)},o.prototype.next=function Jf(){this.__values__===f&&(this.__values__=Aa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?f:this.__values__[this.__index__++]}},o.prototype.plant=function jf(t){for(var e,n=this;n instanceof Ar;){var s=ra(n);s.__index__=0,s.__values__=f,e?a.__wrapped__=s:e=s;var a=s;n=n.__wrapped__}return a.__wrapped__=t,e},o.prototype.reverse=function tl(){var t=this.__wrapped__;if(t instanceof q){var e=t;return this.__actions__.length&&(e=new q(this)),(e=e.reverse()).__actions__.push({func:Wr,args:[Zi],thisArg:f}),new oe(e,this.__chain__)}return this.thru(Zi)},o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=function el(){return Pu(this.__wrapped__,this.__actions__)},o.prototype.first=o.prototype.head,Wn&&(o.prototype[Wn]=function Qf(){return this}),o}();Ot._=hr,(et=function(){return hr}.call(pe,kt,pe,we))!==f&&(we.exports=et)}.call(this)},944:(we,pe,kt)=>{"use strict";kt.d(pe,{Ef:()=>V,GC:()=>Bt,GN:()=>qr,Gi:()=>Nt,If:()=>Xt,KK:()=>en,M5:()=>yt,O0:()=>vn,W:()=>ge,WM:()=>ut,WU:()=>bn,YF:()=>pn,YR:()=>ye,Zq:()=>De,_O:()=>It,aE:()=>xe,e_:()=>At,gh:()=>Ue,im:()=>rt,oF:()=>Re,oN:()=>rn,uY:()=>er,wh:()=>ie});var et=kt(940),f=function(x){return x[x.fresh=1]="fresh",x[x.brackish=2]="brackish",x[x.salt=3]="salt",x}(f||{});let pt=(()=>{class x{static#t=this.fresh=1e3;static#e=this.brackish=1020;static#n=this.salt=1030}return x})(),dt=(()=>{class x{static#t=this.standard=9.80665}return x})(),Z=(()=>{class x{static#t=this.coefficient=1e5;static pascalToBar(i){return i/x.coefficient}static barToPascal(i){return i*x.coefficient}}return x})();class S{static#t=this.standard=1.01325;static#e=this.standardPascals=Z.barToPascal(S.standard);static#n=this.gasConstant=8.31432;static#r=this.temperature=288.15;static#i=this.lapsRate=-.0065;static#s=this.molarMass=.0289644;static#u=this.exponent=dt.standard*S.molarMass/(S.gasConstant*S.lapsRate);static#a=this.invertedExponent=1/S.exponent;static pressure(r){return S.standardPascals*Math.pow(S.temperature/(S.temperature+S.lapsRate*r),S.exponent)}static altitude(r){if(r>=S.standardPascals)return 0;const u=Math.pow(r/S.standardPascals,S.invertedExponent);return(S.temperature/u-S.temperature)/S.lapsRate}}class T{constructor(r,i,u,h,g,w){this._n2HalfTime=r,this._n2A=i,this._n2B=u,this._heHalfTime=h,this._heA=g,this._heB=w}get n2HalfTime(){return this._n2HalfTime}get n2A(){return this._n2A}get n2B(){return this._n2B}get heHalfTime(){return this._heHalfTime}get heA(){return this._heA}get heB(){return this._heB}}class G{static#t=this.buhlmannZHL16C=[new T(5,1.1696,.5578,1.88,1.6189,.477),new T(8,1,.6514,3.02,1.383,.5747),new T(12.5,.8618,.7222,4.72,1.1919,.6527),new T(18.5,.7562,.7826,6.99,1.0458,.7223),new T(27,.62,.8125,10.21,.922,.7582),new T(38.3,.5043,.8434,14.48,.8205,.7957),new T(54.3,.441,.8693,20.53,.7305,.8279),new T(77,.4,.891,29.11,.6502,.8553),new T(109,.375,.9092,41.2,.595,.8757),new T(146,.35,.9222,55.19,.5545,.8903),new T(187,.3295,.9319,70.69,.5333,.8997),new T(239,.3065,.9403,90.34,.5189,.9073),new T(305,.2835,.9477,115.29,.5181,.9122),new T(390,.261,.9544,147.42,.5176,.9171),new T(498,.248,.9602,188.24,.5172,.9217),new T(635,.2327,.9653,240.03,.5119,.9267)]}class M{static#t=this.o2InAir=.209;static#e=this.nitroxInAir=1-M.o2InAir;static#n=this.minPpO2=.18;static#r=this.maxEnd=30;static partialPressure(r,i){return r*i}static mod(r,i){return r/i}static bestMix(r,i,u){const g=r/u.toBar(i);return g>1?1:g}static ead(r,i,u=M.o2InAir){const g=1-u;return M.end(i,1-r)/g}static end(r,i,u=0){return r*this.narcoticIndex(u,i)}static mnd(r,i,u=0){return r/this.narcoticIndex(u,i)}static ceiling(r,i){const h=M.minPpO2/r*i;return h<i?i:h}static narcoticIndex(r,i=0){return i+r}}class Ct extends T{constructor(r,i){super(r.n2HalfTime,r.n2A,r.n2B,r.heHalfTime,r.heA,r.heB),this._pN2=0,this._pHe=0,this._pTotal=0,this._a=0,this._b=0;const u=this.pressureInLungs(i);this._pN2=M.partialPressure(u,M.nitroxInAir),this._pHe=0,this.updateTotal()}get pN2(){return this._pN2}get pHe(){return this._pHe}get pTotal(){return this._pTotal}get a(){return this._a}get b(){return this._b}static fromCurrent(r,i){const u=new Ct(i,1);return u._pN2=r.pN2,u._pHe=r.pHe,u._a=r.a,u._b=r.b,u.updateTotal(),u}copy(){return Ct.fromCurrent(this,this)}ceiling(r){return(this.pTotal-this.a*r)/(r/this.b+1-r)}load(r,i){this._pN2=this.loadGas(r,i.fN2,this.pN2,this.n2HalfTime),this._pHe=this.loadGas(r,i.fHe,this.pHe,this.heHalfTime);const u=this.pTotal;return this.updateTotal(),this._a=(this.n2A*this.pN2+this.heA*this.pHe)/this.pTotal,this._b=(this.n2B*this.pN2+this.heB*this.pHe)/this.pTotal,this.pTotal-u}loadGas(r,i,u,h){const g=r.speed*i,w=this.pressureInLungs(r.startPressure)*i;return this.schreinerEquation(u,w,r.duration,h,g)}pressureInLungs(r){return r-.0627}schreinerEquation(r,i,u,h,g){const P=.01155245301/h;return i+g*(u-1/P)-(i-r-g/P)*Math.exp(-P*u)}updateTotal(){this._pTotal=this.pN2+this.pHe}}class ot{constructor(r){this._compartments=r}get compartments(){return this._compartments}static createLoaded(r){if(r.length!==G.buhlmannZHL16C.length)throw new Error("Provided incompatible count of tissues");const i=et(r).map((u,h)=>Ct.fromCurrent(u,G.buhlmannZHL16C[h])).value();return new ot(i)}static create(r){const i=[];for(let u=0;u<G.buhlmannZHL16C.length;u++){const g=new Ct(G.buhlmannZHL16C[u],r);i.push(g)}return new ot(i)}static createLoadedAt(r){const i=S.pressure(r),u=Z.pascalToBar(i);return ot.create(u).finalState()}static copy(r){const i=[];for(let u=0;u<r.length;u++){const h=r[u].copy();i.push(h)}return i}restoreFrom(r){this._compartments=ot.copy(r)}finalState(){return ot.copy(this._compartments)}ceiling(r){let i=0;for(let u=0;u<this._compartments.length;u++){const h=this._compartments[u].ceiling(r);h>i&&(i=h)}return i}load(r,i){let u=0;for(let h=0;h<this._compartments.length;h++)u+=this._compartments[h].load(r,i);return u}}class zt{static validTissue(r){return r.pN2>0&&r.pHe>=0&&r.a>=0&&r.b>=0}static validCount(r){return!!r&&r.length===G.buhlmannZHL16C.length}static valid(r){return!!zt.validCount(r)&&et(r).every(u=>zt.validTissue(u))}}class B{static fix(r){return Number(r.toFixed(10))}static roundTwoDecimals(r){return B.round(r,2)}static round(r,i=0){return B.adapt(Math.round,r,i)}static floorTwoDecimals(r){return B.floor(r,2)}static floor(r,i=0){return B.adapt(Math.floor,r,i)}static ceilTwoDecimals(r){return B.ceil(r,2)}static ceil(r,i=0){return B.adapt(Math.ceil,r,i)}static ceilDistance(r,i){return B.adaptDistance(Math.ceil,r,i)}static roundDistance(r,i){return B.adaptDistance(Math.round,r,i)}static floorDistance(r,i){return B.adaptDistance(Math.floor,r,i)}static adapt(r,i,u){const h=Math.pow(10,u);return r(i*h)/h}static adaptDistance(r,i,u){return r(i/u)*u}}class yt{constructor(r){this.options=r}create(){switch(this.options.salinity){case f.salt:return ft.forSaltWater(this.options.altitude);case f.brackish:return ft.forBrackishWater(this.options.altitude);default:return ft.forFreshWater(this.options.altitude)}}}class ft{constructor(r,i){this.density=r,this._gravity=dt.standard;const u=S.pressure(i);this._surfacePressure=Z.pascalToBar(u)}get surfacePressure(){return this._surfacePressure}static forSaltWater(r=0){return new ft(pt.salt,r)}static forBrackishWater(r=0){return new ft(pt.brackish,r)}static forFreshWater(r=0){return new ft(pt.fresh,r)}static simple(){const r=new ft(pt.fresh,0);return r._surfacePressure=1,r._gravity=10,r}toBar(r){return Z.pascalToBar(r*(this.density*this._gravity))+this._surfacePressure}fromBar(r){if(r<this._surfacePressure)throw new Error("Lower pressure than altitude isn`t convertible to depth.");const i=this.density*this._gravity;return Z.barToPascal(r-this._surfacePressure)/i}}var de=function(x){return x[x.never=1]="never",x[x.auto=2]="auto",x[x.always=3]="always",x}(de||{});class N{static#t=this.altitude=0;static#e=this.saltWater=f.salt;static#n=this.roundStopsToMinutes=!1;static#r=this.gasSwitchDuration=2;static#i=this.problemSolvingDuration=1;static#s=this.lastStopDepth=3;static#u=this.lastStopDepthRecre=5;static#a=this.safetyStopRecre=de.auto;static#o=this.decoStopDistance=3;static#c=this.minimumAutoStopDepth=10;static#h=this.addSafetyStop=!0;static#f=this.maxEND=M.maxEnd;static#l=this.oxygenNarcotic=!0;static#p=this.ascentSpeed6m=3;static#d=this.ascentSpeed50percTo6m=3;static#g=this.ascentSpeed50perc=9;static#m=this.descentSpeed=18;static#v=this.gfLow=.4;static#_=this.gfHigh=.85;static#S=this.maxPpO2=1.4;static#w=this.maxDecoPpO2=1.6;static setMediumConservatism(r){r.gfLow=N.gfLow,r.gfHigh=N.gfHigh}static useGeneralRecommended(r){r.safetyStop=N.safetyStopRecre,r.roundStopsToMinutes=N.roundStopsToMinutes,r.gasSwitchDuration=N.gasSwitchDuration,r.oxygenNarcotic=N.oxygenNarcotic}}class De{constructor(r=N.gfLow,i=N.gfHigh,u=N.maxPpO2,h=N.maxDecoPpO2,g=N.saltWater){this.gfLow=r,this.gfHigh=i,this.maxPpO2=u,this.maxDecoPpO2=h,this.salinity=g,this.altitude=N.altitude,this.roundStopsToMinutes=N.roundStopsToMinutes,this.gasSwitchDuration=N.gasSwitchDuration,this.safetyStop=N.safetyStopRecre,this.lastStopDepth=N.lastStopDepth,this.decoStopDistance=N.decoStopDistance,this.minimumAutoStopDepth=N.minimumAutoStopDepth,this.maxEND=N.maxEND,this.oxygenNarcotic=!0,this.ascentSpeed6m=N.ascentSpeed6m,this.ascentSpeed50percTo6m=N.ascentSpeed50percTo6m,this.ascentSpeed50perc=N.ascentSpeed50perc,this.descentSpeed=N.descentSpeed,this.problemSolvingDuration=N.problemSolvingDuration,this.gfLow=r||N.gfLow,this.gfHigh=i||N.gfHigh,this.maxPpO2=u||N.maxPpO2,this.maxDecoPpO2=h||N.maxDecoPpO2,this.salinity=g||N.saltWater}loadFrom(r){this.gfLow=r.gfLow||this.gfLow,this.gfHigh=r.gfHigh||this.gfHigh,this.maxPpO2=r.maxPpO2||this.maxPpO2,this.maxDecoPpO2=r.maxDecoPpO2||this.maxDecoPpO2,this.oxygenNarcotic=!!r.oxygenNarcotic,this.salinity=r.salinity||this.salinity,this.altitude=r.altitude||0===r.altitude?r.altitude:this.altitude,this.roundStopsToMinutes=!!r.roundStopsToMinutes,this.gasSwitchDuration=r.gasSwitchDuration||this.gasSwitchDuration,this.problemSolvingDuration=r.problemSolvingDuration||this.problemSolvingDuration,this.lastStopDepth=r.lastStopDepth||this.lastStopDepth,this.decoStopDistance=r.decoStopDistance||this.decoStopDistance,this.minimumAutoStopDepth=r.minimumAutoStopDepth||this.minimumAutoStopDepth,this.safetyStop=r.safetyStop||this.safetyStop,this.maxEND=r.maxEND||this.maxEND,this.ascentSpeed6m=r.ascentSpeed6m||this.ascentSpeed6m,this.ascentSpeed50percTo6m=r.ascentSpeed50percTo6m||this.ascentSpeed50percTo6m,this.ascentSpeed50perc=r.ascentSpeed50perc||this.ascentSpeed50perc,this.descentSpeed=r.descentSpeed||this.descentSpeed}}class Mt{constructor(r,i){this.depthConverter=r,this.options=i}toDecoStop(r){const i=this.depthConverter.fromBar(r);return B.roundDistance(i,this.options.decoStopDistance)}nextStop(r){if(r<=this.options.lastStopDepth)return 0;const i=B.floorDistance(r,this.options.decoStopDistance);if(i!==r)return i;const u=r-this.options.decoStopDistance;return u<=this.options.lastStopDepth?this.options.lastStopDepth:u}addSafetyStop(r,i){return(this.options.safetyStop===de.always||this.options.safetyStop===de.auto&&i>this.options.minimumAutoStopDepth)&&r===this.options.lastStopDepth}}var gt=function(x){return x[x.noAction=0]="noAction",x[x.error=1]="error",x[x.gasSwitch=2]="gasSwitch",x[x.noDecoEnd=3]="noDecoEnd",x[x.lowPpO2=4]="lowPpO2",x[x.highPpO2=5]="highPpO2",x[x.highAscentSpeed=6]="highAscentSpeed",x[x.highDescentSpeed=7]="highDescentSpeed",x[x.brokenCeiling=8]="brokenCeiling",x[x.maxEndExceeded=9]="maxEndExceeded",x[x.switchToHigherN2=10]="switchToHigherN2",x[x.highGasDensity=11]="highGasDensity",x[x.safetyStop=12]="safetyStop",x[x.minDepth=13]="minDepth",x[x.maxDepth=14]="maxDepth",x}(gt||{});class rt{constructor(r,i,u,h,g){this.timeStamp=r,this.depth=i,this.type=u,this.message=h,this.gas=g}static create(r,i,u,h){return new rt(i,u,r,"",h)}static createError(r){return new rt(0,0,gt.error,r)}}class ct{static createError(r){return rt.createError(r)}static createSafetyStopStart(r,i){return rt.create(gt.safetyStop,r,i)}static createNoDecoEnd(r,i){return rt.create(gt.noDecoEnd,r,i)}static createGasSwitch(r,i,u){return rt.create(gt.gasSwitch,r,i,u)}static createLowPpO2(r,i){return rt.create(gt.lowPpO2,r,i)}static createHighPpO2(r,i){return rt.create(gt.highPpO2,r,i)}static createHighAscentSpeed(r,i){return rt.create(gt.highAscentSpeed,r,i)}static createHighDescentSpeed(r,i){return rt.create(gt.highDescentSpeed,r,i)}static createBrokenCeiling(r,i){return rt.create(gt.brokenCeiling,r,i)}static createMaxEndExceeded(r,i,u){return rt.create(gt.maxEndExceeded,r,i,u)}static createSwitchToHigherN2(r,i,u){return rt.create(gt.switchToHigherN2,r,i,u)}static createHighDensity(r,i,u){return rt.create(gt.highGasDensity,r,i,u)}static createShallowDepth(r){return rt.create(gt.minDepth,0,r)}static createMaxDepth(r){return rt.create(gt.maxDepth,0,r)}}class pn{constructor(){this.items=[]}add(r){this.items.push(r)}}class Zr{constructor(r,i){this.time=r,this.depth=i}get notAtSurface(){return this.depth>0}static isDecoDive(r){for(const i of r)if(i.notAtSurface)return!0;return!1}}class Ue{constructor(r,i,u,h){this.seg=r,this.ceil=i,this.tiss=u,this.err=h}get segments(){return this.seg}get ceilings(){return this.ceil}get tissues(){return this.tiss}get errors(){return this.err}static fromErrors(r,i){return new Ue(r,[],[],i)}static fromProfile(r,i,u){return new Ue(r,i,u,[])}}class Vr{static validate(r){const i=[];if(!r.hasBottomGas){const u=ct.createError("At least one bottom gas has to be defined.");return i.push(u),i}return i}}class Xr{constructor(r,i){this.gases=r,this.depthConverter=ft.simple(),this.depthLevels=new Mt(this.depthConverter,i)}bestGas(r){const i=this.depthConverter.toBar(r.currentDepth),u=this.depthConverter.toBar(r.maxEnd);let h=r.currentGas;return this.gases.all.forEach(g=>{const w=g.mod(r.maxDecoPpO2),P=this.depthLevels.toDecoStop(w),E=g.end(i,r.oxygenNarcotic);r.currentDepth<=P&&E<=u&&(!h||h.fO2<g.fO2)&&(h=g)}),h}}class xe{constructor(){this.bottomGases=[]}get all(){return this.bottomGases.slice()}get hasBottomGas(){return this.bottomGases.length>=1}static fromTanks(r){const i=new xe;return r.forEach(u=>{i.add(u.gas)}),i}add(r){this.bottomGases.push(r)}isRegistered(r){return this.bottomGases.includes(r)}}class ut{constructor(r,i){if(this._fO2=r,this._fHe=i,this._contentCode=0,this.contentExceeds100percent())throw new Error("O2 + He can't exceed 100 %");this.updateContentCode()}get fN2(){return 1-this._fO2-this._fHe}get fO2(){return this._fO2}get fHe(){return this._fHe}get name(){return ut.nameFor(this.fO2,this.fHe)}get contentCode(){return this._contentCode}set fO2(r){this._fO2=r>1?1:r,this.contentExceeds100percent()&&(this._fHe=this.countRemaining(this._fO2)),this.updateContentCode()}set fHe(r){this._fHe=r>.99?.99:r,this.contentExceeds100percent()&&(this._fO2=this.countRemaining(this._fHe)),this.updateContentCode()}static init(r,i){ut.nameFor=r,ut.byName=i}copy(){return new ut(this._fO2,this._fHe)}mod(r){return M.mod(r,this._fO2)}end(r,i){return M.end(r,this.fN2,i?this._fO2:0)}mnd(r,i){return M.mnd(r,this.fN2,i?this._fO2:0)}ceiling(r){return M.ceiling(this._fO2,r)}compositionEquals(r){return!!r&&this._fO2===r._fO2&&this._fHe===r._fHe}assignStandardGas(r){const i=ut.byName(r);i&&(this.fO2=i.fO2,this.fHe=i.fHe)}contentExceeds100percent(){return this._fO2+this._fHe>1}countRemaining(r){return B.round(1-r,5)}updateContentCode(){this._contentCode=B.round(1e4*this._fO2*1e4)+B.round(1e4*this._fHe)}}class Q{static#t=this.oxygen=new ut(1,0);static#e=this.ean50=new ut(.5,0);static#n=this.ean38=new ut(.38,0);static#r=this.ean36=new ut(.36,0);static#i=this.ean32=new ut(.32,0);static#s=this.trimix3525=new ut(.35,.25);static#u=this.trimix2525=new ut(.25,.25);static#a=this.air=new ut(M.o2InAir,0);static#o=this.trimix2135=new ut(.21,.35);static#c=this.trimix1845=new ut(.18,.45);static#h=this.trimix1555=new ut(.15,.55);static#f=this.trimix1260=new ut(.12,.6);static#l=this.trimix1070=new ut(.1,.7);static#p=this.airName="Air";static#d=this.oxygenName="Oxygen";static#g=this.namesRegEx=/[EAN](?<fO2>\d{2})|(?<fO2b>\d{2})\/(?<fHe>\d{2})/i;static#m=this.map=new Map([[Q.airName,Q.air],["EAN32",Q.ean32],["EAN36",Q.ean36],["EAN38",Q.ean38],["EAN50",Q.ean50],[Q.oxygenName,Q.oxygen],["Helitrox 35/25",Q.trimix3525],["Helitrox 25/25",Q.trimix2525],["Helitrox 21/35",Q.trimix2135],["Trimix 18/45",Q.trimix1845],["Trimix 15/55",Q.trimix1555],["Trimix 12/60",Q.trimix1260],["Trimix 10/70",Q.trimix1070]]);static nitroxNames(){return Q.allNames().slice(0,6)}static allNames(){return Array.from(Q.map.keys())}static nameFor(r,i=0){const h=B.round(100*r),g=B.round(100*i);return h<=0?"":g<=0?h>=100?Q.oxygenName:21===h?Q.airName:"EAN"+h.toString():`${h>=21?"Helitrox":"Trimix"} ${h.toString()}/${g.toString()}`}static byName(r){const i=[...Q.map.keys()],u=et(i).filter(g=>g.toLowerCase()===r.toLowerCase()).first();if(u)return Q.map.get(u)??null;const h=Q.namesRegEx.exec(r);if(h){if(h[1]){const g=Number(h[1])/100;if(g>0)return new ut(g,0)}if(h[2]&&h[3]){const g=Number(h[2])/100,w=Number(h[3])/100;if(g>0&&w>0)return new ut(g,w)}}return null}}ut.init((x,r)=>Q.nameFor(x,r),x=>Q.byName(x));class Xt{static haveReserve(r){for(let i=0;i<r.length;i++)if(!r[i].hasReserve)return!1;return!0}static resetConsumption(r){r.forEach(i=>{i.consumed=0,i.reserve=0})}static removeTank(r,i){const u=r.filter(h=>h!==i);return Xt.renumberIds(u),u}static renumberIds(r){for(let i=0;i<r.length;i++)r[i].id=i+1}}class At{constructor(r,i,u){this.size=r,this.startPressure=i,this.id=0,this.consumed=0,this.reserve=0,this._gas=Q.air.copy(),this.o2=u}get gas(){return this._gas}get o2(){return ke.getO2(this.gas.fO2,this.gas.fHe)}get he(){return B.roundTwoDecimals(100*this.gas.fHe)}get n2(){return B.roundTwoDecimals(100-this.o2-this.he)}get volume(){return At.volume(this)}get reserveVolume(){return At.volume2(this.size,this.reserve)}get consumedVolume(){return At.volume2(this.size,this.consumed)}get name(){return this._gas.name}get endPressure(){const r=this.startPressure-this.consumed;return r>0?r:0}get percentsRemaining(){return this.endPressure/this.startPressure*100}get percentsReserve(){const r=this.reserve/this.startPressure*100;return r>100?100:r}get hasReserve(){return this.endPressure>=this.reserve}set o2(r){this._gas.fO2=ke.setO2(r,this.gas.fHe)}set he(r){this.gas.fHe=r/100}static createDefault(){return new At(15,200,100*M.o2InAir)}static volume(r){return At.volume2(r.size,r.startPressure)}static volume2(r,i){return r*i}assignStandardGas(r){this.gas.assignStandardGas(r)}loadFrom(r){this.size=r.size,this.startPressure=r.startPressure,this.consumed=r.consumed,this.reserve=r.reserve,this.gas.fO2=r._gas.fO2,this.gas.fHe=r._gas.fHe}}class ke{static#t=this.pinnedO2=21;static#e=this.o2InAirPercent=100*M.o2InAir;static getO2(r,i){const u=100*r;return this.isInAirRange(u,i)?ke.pinnedO2:B.roundTwoDecimals(u)}static setO2(r,i){return this.isInAirRange(r,i)?M.o2InAir:r/100}static isInAirRange(r,i){return ke.o2InAirPercent<=r&&r<=ke.pinnedO2&&0===i}}class qt{static speed(r,i){return qt.speedByXChange(i.start,i.end,r.end-r.start)}static speedByXChange(r,i,u){return(i-r)/u}static yValueAt(r,i,u){return r+i*u}static xValueAtAbsolute(r,i,u){const h=this.speed(r,i);return r.start+qt.xValueAt(i.start,h,u)}static xValueAt(r,i,u){return 0===i?0:(u-r)/i}}class Kt{static validate(r,i){const u=[];if(!r.any()){const h=ct.createError("There needs to be at least one segment at depth.");u.push(h)}return r.withAll(h=>{Kt.validateRegisteredGas(u,i,h)}),u}static validateRegisteredGas(r,i,u){if(!i.isRegistered(u.gas)){const g=ct.createError(`Segment ${u.startDepth}-${u.endDepth} has gas not registered in gases.`);r.push(g)}}}class Bt{constructor(r,i,u,h){this._startDepth=r,this._endDepth=i,this._duration=h,u instanceof At?(this._tank=u,this._gas=u.gas):this._gas=u}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}get duration(){return this._duration}get gas(){return this._gas}get tank(){return this._tank}get speed(){return Bt.speed(this.startDepth,this.endDepth,this.duration)}get averageDepth(){return(this.startDepth+this.endDepth)/2}set startDepth(r){this._startDepth=r}set endDepth(r){this._endDepth=r}set duration(r){this._duration=r}set tank(r){this._tank=r,r&&(this._gas=r.gas)}static from(r){const i=new Bt(r.startDepth,r.endDepth,r._gas,r.duration);return i.tank=r.tank,i}static speed(r,i,u){return qt.speedByXChange(r,i,u)}static depthAt(r,i,u){return qt.yValueAt(r,i,u)}static timeAt(r,i,u){return qt.xValueAt(r,i,u)}contentEquals(r){return this.speed===r.speed&&this._gas===r._gas}depthAt(r){return Bt.depthAt(this.startDepth,this.speed,r)}mergeFrom(r){this.duration+=r.duration,this.endDepth=r.endDepth}}class It{constructor(){this.segments=[],this._maxDepth=0}get startAscentIndex(){return this.deepestPart().length}get startAscentTime(){const r=this.deepestPart();return It.duration(r)}get length(){return this.segments.length}get items(){return this.segments.slice()}get maxDepth(){return this._maxDepth}get currentDepth(){return this.any()?this.last().endDepth:0}get duration(){return It.duration(this.segments)}static from(r){return It.fromCollection(r.segments)}static fromCollection(r){const i=new It;return r.forEach(u=>{const h=Bt.from(u);i.segments.push(h),i.updateMaxDepth(h)}),i}static duration(r){let i=0;for(const u of r)i+=u.duration;return i}static averageDepth(r){if(r.length<=0)return 0;let i=0,u=0;return r.forEach(h=>{if(h.duration>0){const g=h.averageDepth*h.duration+u*i;u+=h.duration,i=g/u}}),i}add(r,i,u){const h=new Bt(this.currentDepth,r,i,u);return this.segments.push(h),this.updateMaxDepth(h),h}addFlat(r,i){return this.add(this.currentDepth,r,i)}mergeFlat(r=0){if(r<0)return this.items;const i=[];for(let u=this.segments.length-1;u>r;u--){const h=this.segments[u-1],g=this.segments[u];h.contentEquals(g)&&(h.mergeFrom(g),i.push(g))}return this.segments=this.segments.filter(u=>!i.includes(u)),this.items}remove(r){this.segments=this.segments.filter(i=>i!==r),this.fixStartDepths()}cutDown(r){this.segments=this.segments.slice(0,this.segments.length-r),this.fixStartDepths()}withAll(r){for(let i=0;i<this.segments.length;i++)r(this.segments[i])}any(){return 0!==this.segments.length}last(){return this.segments[this.segments.length-1]}copy(){return It.from(this)}fixStartDepths(){this.any()&&(this.segments[0].startDepth=0);for(let r=0;r<this.segments.length-1;r++){const u=this.segments[r+1];u.startDepth=this.segments[r].endDepth,this.updateMaxDepth(u)}}deepestPart(){for(let r=this.segments.length-1;r>=0;r--)if(this.segments[r].endDepth===this.maxDepth)return this.items.slice(0,r+1);return[]}updateMaxDepth(r){r.endDepth>this._maxDepth&&(this._maxDepth=r.endDepth)}}class V{static#t=this.oneSecond=1;static#e=this.oneMinute=60;static#n=this.oneHour=60*V.oneMinute;static#r=this.oneDay=24*V.oneHour;static#i=this.safetyStopDuration=3*V.oneMinute;static toSeconds(r){return r*V.oneMinute}static toMinutes(r){return r/V.oneMinute}static toHours(r){return r/V.oneHour}}let Ee=(()=>{class x{static#t=this.minimalStep=1;constructor(){}search(i){if(i.maxValue<i.initialValue)throw Error("Max value cant be smaller than initial value");if(i.estimationStep>i.maxValue-i.initialValue)throw Error("Step cant be larger than range");const u=this.findInitialLimit(i);return this.searchInsideInterval(i,u)}searchInsideInterval(i,u){for(;u.right-u.left>x.minimalStep;){let h=u.left+(u.right-u.left)/2;h=Math.round(h),i.doWork(h),i.meetsCondition()?u.left=h:u.right=h}return u.left}findInitialLimit(i){let u=i.initialValue;for(i.doWork(u);i.meetsCondition()&&u<=i.maxValue;)u+=i.estimationStep,i.doWork(u);let h=u-i.estimationStep;return h=h<i.initialValue?i.initialValue:h,{left:h,right:u>i.maxValue?i.maxValue:u}}}return x})();class dn{constructor(r,i,u){this.depthConverter=r,this.options=i,this.tissues=u,this.lowestCeiling=0,this.lowestCeiling=this.depthConverter.surfacePressure+1}ceiling(){let r=this.tolerated();return r<this.depthConverter.surfacePressure&&(r=this.depthConverter.surfacePressure),this.depthConverter.fromBar(r)}toleratedTissues(r,i,u,h){const g=this.tissues.compartments;let w=0;for(let P=0;P<g.length;P++){const E=g[P];let L=w;(r/E.b+E.a-r)*u+r<(i/E.b+E.a-i)*h+i&&(L=(-E.a*E.b*(u*i-h*r)-(1-E.b)*(u-h)*i*r+E.b*(i-r)*E.pTotal)/(-E.a*E.b*(u-h)+(1-E.b)*(h*i-u*r)+E.b*(i-r))),L>=w&&(w=L)}return w}tolerated(){const r=this.options.gfLow,i=this.options.gfHigh,u=this.depthConverter.surfacePressure,h=this.tissues.ceiling(r);return h>this.lowestCeiling&&(this.lowestCeiling=h),this.toleratedTissues(u,this.lowestCeiling,i,r)}}let ze=(()=>{class x{static#t=this.sixMeters=6;constructor(i){this.options=i,this.averageDepth=0}markAverageDepth(i){const u=i.deepestPart();this.averageDepth=It.averageDepth(u)}ascent(i){return i>x.sixMeters?i>this.averageDepth/2?this.options.ascentSpeed50perc:this.options.ascentSpeed50percTo6m:this.options.ascentSpeed6m}}return x})();class Oe{constructor(r,i,u,h,g){this.gases=r,this.segments=i,this.options=u,this.depthConverter=h,this.ceilings=[],this.runTime=0,this.tissues=ot.createLoaded(g),this.gradients=new dn(h,u,this.tissues);const w=i.last();this.currentGas=w.gas,this.bestGasOptions={currentDepth:this.currentDepth,maxDecoPpO2:this.options.maxDecoPpO2,oxygenNarcotic:this.options.oxygenNarcotic,maxEnd:this.options.maxEND,currentGas:this.currentGas},this.speeds=new ze(this.options),this.levels=new Mt(h,u),this.gasSource=new Xr(r,u)}get ascentSpeed(){return this.speeds.ascent(this.currentDepth)}get currentDepth(){return this.segments.currentDepth}get ambientPressure(){return this.depthConverter.toBar(this.currentDepth)}get addSafetyStop(){return this.levels.addSafetyStop(this.currentDepth,this.segments.maxDepth)}get decoStopDuration(){return this.options.roundStopsToMinutes?V.oneMinute:V.oneSecond}get isAtSurface(){return 0===this.segments.last().endDepth}markAverageDepth(){this.speeds.markAverageDepth(this.segments)}addCeiling(){const r=this.ceiling(),i=new Zr(this.runTime,r);this.ceilings.push(i)}ceiling(){return this.gradients.ceiling()}bestDecoGas(){return this.bestGasOptions.currentDepth=this.currentDepth,this.bestGasOptions.currentGas=this.currentGas,this.gasSource.bestGas(this.bestGasOptions)}createMemento(){return{runTime:this.runTime,tissues:ot.copy(this.tissues.compartments),ceilings:this.ceilings.length,segments:this.segments.length,lowestCeiling:this.gradients.lowestCeiling}}restore(r){this.tissues.restoreFrom(r.tissues),this.gradients.lowestCeiling=r.lowestCeiling,this.runTime=r.runTime,this.ceilings=this.ceilings.slice(0,r.ceilings),this.segments.cutDown(this.segments.length-r.segments)}nextStop(r){return this.levels.nextStop(r)}shouldSwitchTo(r){return r&&!this.currentGas.compositionEquals(r)}addGasSwitchSegment(){return this.addStopSegment(this.options.gasSwitchDuration*V.oneMinute)}addDecoStopSegment(){return this.addStopSegment(0)}addSafetyStopSegment(){return this.addStopSegment(V.safetyStopDuration)}addAscentSegment(r,i){return this.segments.add(r,this.currentGas,i)}addStopSegment(r){return this.segments.addFlat(this.currentGas,r)}}const jn=(x,r)=>x/V.toMinutes(r);class en{constructor(r,i){this.current=r,this.surfaceInterval=i}}class gn{constructor(r,i,u){this.previousTissues=r,this.altitude=i,this.surfaceInterval=u}}class Re{constructor(r,i,u,h){this._segments=r,this._gases=i,this._options=u,this._surface=this.resolveSurfaceParameters(h)}get segments(){return this._segments}get gases(){return this._gases}get options(){return this._options}get surfaceInterval(){return new gn(this._surface.current,this.options.altitude,this._surface.surfaceInterval)}static forSimpleDive(r,i,u,h){const g=new xe;g.add(i);const w=new It,P=jn(r,u.descentSpeed);return w.add(r,i,P),new Re(w,g,u,h)}static forMultilevelDive(r,i,u,h){return new Re(r,i,u,h)}resolveSurfaceParameters(r){if(r&&zt.validCount(r?.current))return r;const i=ot.createLoadedAt(this.options.altitude);return new en(i,Number.POSITIVE_INFINITY)}}class Nt{noDecoLimit({segments:r,gases:i,options:u,surfaceInterval:h}){const g=new yt(u).create(),w=this.applySurfaceInterval(h),P=new Oe(i,r,u,g,w);return this.swimNoDecoLimit(r,i,P)}decompression({segments:r,gases:i,options:u,surfaceInterval:h}){const g=new yt(u).create(),w=r.copy(),P=this.validate(r,i);if(P.length>0){const _t=w.mergeFlat(r.length);return Ue.fromErrors(_t,P)}const E=this.applySurfaceInterval(h),L=new Oe(i,w,u,g,E);this.swimPlan(L),L.markAverageDepth();let K=L.nextStop(L.currentDepth);for(;K>=0&&!L.isAtSurface;)this.tryGasSwitch(L),this.stayAtDecoStop(L,K),this.stayAtSafetyStop(L),this.ascentToNextStop(L,K),K=L.nextStop(K);const Ft=L.segments.mergeFlat(r.length);return Ue.fromProfile(Ft,L.ceilings,L.tissues.finalState())}applySurfaceInterval({previousTissues:r,altitude:i,surfaceInterval:u}){if(!zt.valid(r))throw Error("Provided tissues collection isn`t valid. It needs have valid items of 16 compartments ordered by halftime.");if(i<0)throw Error("Altitude needs to be positive number or 0.");if(u<0)throw Error("Surface interval needs to be positive number or 0.");if(u===Number.POSITIVE_INFINITY)return ot.createLoadedAt(i);const h=new It,g=h.addFlat(Q.air,u),w=new xe;w.add(Q.air);const P=new De(1,1,1.6,1.6,f.salt);P.altitude=i;const E=new yt(P).create(),L=new Oe(w,h,P,E,r);return this.swim(L,g),L.tissues.finalState()}tryGasSwitch(r){const i=r.bestDecoGas();if(r.shouldSwitchTo(i)){r.currentGas=i;const u=r.addGasSwitchSegment();this.swim(r,u)}}stayAtDecoStop(r,i){if(this.needsDecoStop(r,i)){const u=r.createMemento(),h={estimationStep:20*V.oneMinute,initialValue:0,maxValue:V.oneDay,doWork:E=>this.swimDecoStop(r,u,E),meetsCondition:()=>this.needsDecoStop(r,i)},w=(new Ee).search(h)+V.oneSecond,P=B.ceilDistance(w,r.decoStopDuration);this.swimDecoStop(r,u,P)}}swimDecoStop(r,i,u){r.restore(i);const h=r.addDecoStopSegment();h.duration=u,this.swim(r,h)}needsDecoStop(r,i){if(i>=r.ceiling())return!1;const u=r.createMemento();this.ascentToNextStop(r,i);const h=i<r.ceiling();return r.restore(u),h}stayAtSafetyStop(r){if(r.addSafetyStop){const i=r.addSafetyStopSegment();this.swim(r,i)}}ascentToNextStop(r,i){const h=jn(r.currentDepth-i,r.ascentSpeed),g=r.addAscentSegment(i,h);this.swim(r,g)}validate(r,i){const u=Kt.validate(r,i);if(u.length>0)return u;const h=Vr.validate(i);return h.length>0?h:[]}swimPlan(r){r.addCeiling(),r.segments.withAll(i=>{this.swim(r,i)})}swim(r,i){let u=i.startDepth;const h=V.oneSecond;for(let g=0;g<i.duration;g+=h){const w=Bt.depthAt(u,i.speed,h),P=new Bt(u,w,i.gas,h);this.swimPart(r,P),u=P.endDepth}}swimPart(r,i){const u=this.toLoadSegment(r.depthConverter,i);r.tissues.load(u,i.gas),r.runTime+=i.duration,r.addCeiling()}swimNoDecoLimit(r,i,u){if(this.validate(r,i).length>0)return 0;this.swimPlan(u);const g=this.currentNdl(u.ceilings);return g!==Number.POSITIVE_INFINITY?g:this.predictNoDecoLimit(r,u)}predictNoDecoLimit(r,i){const u=r.last(),h=u.endDepth,g=new Bt(h,h,u.gas,V.oneMinute),w=this.toLoadSegment(i.depthConverter,g);let P=1;for(;i.ceiling()<=0&&P>0;)P=i.tissues.load(w,u.gas),i.runTime+=V.oneMinute;return 0===P||0===h?Number.POSITIVE_INFINITY:this.floorNdl(i.runTime)}floorNdl(r){let i=V.toMinutes(r);return i=B.floor(i),i-1}currentNdl(r){for(let i=0;i<r.length;i+=V.oneMinute){const u=r[i];if(u.notAtSurface)return this.floorNdl(u.time)}return Number.POSITIVE_INFINITY}toLoadSegment(r,i){const u=r.toBar(i.speed)-r.surfacePressure;return{startPressure:r.toBar(i.startDepth),duration:i.duration,speed:u}}}class ie{static createPlan(r,i,u,h){const g=new It,w=ie.descentDuration(r,h);g.add(r,u,w);let P=V.toSeconds(i)-w;return P=P<0?0:P,g.addFlat(u,P),g}static descentDuration(r,i){let u=r/i.descentSpeed;return u=B.ceil(u,1),u=V.toSeconds(u),B.ceil(u)}static emergencyAscent(r,i,u){const g=It.fromCollection(r).deepestPart(),w=g.length;ie.addSolvingSegment(g,i.problemSolvingDuration),ie.addUserDefinedAscent(g,r,w);const P=It.fromCollection(g),E=xe.fromTanks(u),L=new Nt,K=Re.forMultilevelDive(P,E,i),_t=L.decompression(K).segments;return _t.slice(w,_t.length)}static addSolvingSegment(r,i){if(0===r.length)return;const h=r[r.length-1],g=h.endDepth,w=new Bt(g,g,h.gas,i*V.oneMinute);r.push(w)}static addUserDefinedAscent(r,i,u){for(let h=u;h<i.length;h++){const g=i[h];if(!g.tank)return;r.push(g)}}}class tr{constructor(){this.remaining=new Map}get(r){return this.remaining.get(r)||0}set(r,i){this.remaining.set(r,i>0?i:0)}}let ge=(()=>{class x{static#t=this.defaultPrimaryReserve=30;static#e=this.defaultStageReserve=20;constructor(i){this.depthConverter=i}static calculateDecompression(i,u,h){const g=xe.fromTanks(u),w=new Nt,P=i.copy(),E=Re.forMultilevelDive(P,g,h);return w.decompression(E)}consumeFromTanks(i,u,h,g){if(i.length<2)throw new Error("Profile needs to contain at least 2 segments.");const w=ie.emergencyAscent(i,u,h);this.consumeFromTanks2(i,w,h,g)}consumeFromTanks2(i,u,h,g){if(i.length<2)throw new Error("Profile needs to contain at least 2 segments.");Xt.resetConsumption(h),this.updateReserve(u,h,g);const w=L=>L.reserve,P=g.diver.rmv;let E=this.toBeConsumedYet(i,P,new tr,L=>!!L.tank);E=this.consumeByTanks(i,E,P,w),E=this.consumeByTanksRemaining(i,E,()=>0),E=this.toBeConsumedYet(i,P,E,L=>!L.tank),E=this.consumeByGases(h,E,w),this.consumeByGases(h,E,()=>0),this.roundTanksConsumedToBars(h)}calculateMaxBottomTime(i,u,h,g){const w=this.createTestProfile(i),P=w.last(),E={estimationStep:40*V.oneMinute,initialValue:0,maxValue:V.oneDay,doWork:_t=>{P.duration=_t,this.consumeFromProfile(w,u,h,g)},meetsCondition:()=>Xt.haveReserve(u)},K=(new Ee).search(E);if(0===K)return 0;const Ft=V.toMinutes(i.duration+K);return B.floor(Ft)}consumeFromProfile(i,u,h,g){const w=x.calculateDecompression(i,u,g);this.consumeFromTanks(w.segments,g,u,h)}createTestProfile(i){const u=i.copy(),h=i.last();return u.addFlat(h.gas,0),u}updateReserve(i,u,h){const g=this.toBeConsumedYet(i,h.diver.teamStressRmv,new tr,()=>!0);for(let w=0;w<=u.length-1;w++){const P=u[w],E=P.gas.contentCode,L=g.get(E);this.updateTankReserve(P,w,h,L),g.set(E,L-P.reserve*P.size)}}updateTankReserve(i,u,h,g){const w=B.ceil(g/i.size);i.reserve=this.ensureMinimalReserve(w>i.startPressure?i.startPressure:w,u,h)}ensureMinimalReserve(i,u,h){const g=0===u?h.primaryTankReserve:h.stageTankReserve;return i<g?g:i}consumeByGases(i,u,h){for(let g=i.length-1;g>=0;g--){const w=i[g],P=w.gas.contentCode;let E=u.get(P),L=this.consumeFromTank(w,E,h);L=L<0?0:L,E-=L,u.set(P,E)}return u}consumeByTanks(i,u,h,g){const w=V.toMinutes(h);return this.consumeBySegmentTank(i,u,g,P=>this.consumedBySegment(P,w))}consumeByTanksRemaining(i,u,h){return this.consumeBySegmentTank(i,u,h,(g,w)=>w)}consumeBySegmentTank(i,u,h,g){return i.forEach(w=>{if(w.tank){const P=w.gas.contentCode;let E=u.get(P);const L=g(w,E);let K=this.consumeFromTank(w.tank,L,h);K=K<0?0:K,E-=K,u.set(P,E)}}),u}consumeFromTank(i,u,h){let g=i.endPressure-h(i);g=g>0?g:0;const w=g*i.size,P=u>w?w:u;return i.consumed+=P/i.size,P}toBeConsumedYet(i,u,h,g){const w=V.toMinutes(u);for(let P=0;P<i.length;P++){const E=i[P];if(g(E)){const K=E.gas.contentCode,Ft=this.consumedBySegment(E,w);let _t=h.get(K);_t+=Ft,h.set(K,_t)}}return h}consumedBySegment(i,u){const h=this.depthConverter.toBar(i.averageDepth);return B.roundTwoDecimals(i.duration)*h*u}roundTanksConsumedToBars(i){i.forEach(u=>u.consumed=B.ceil(u.consumed))}}return x})();class er{constructor(r){this.depthConverter=r,this.minimumPpO2=.5}calculateForProfile(r){let i=0;return r.forEach(u=>{const g=this.calculate(u.gas.fO2,u.startDepth,u.endDepth,u.duration);i+=g}),i}calculate(r,i,u,h){const P=r*this.depthConverter.toBar((i+u)/2);if(P<=this.minimumPpO2)return 0;const E=this.exponentByPpO2(P);return h*Math.exp(E)*100}exponentByPpO2(r){return r<=1.5?1.93873*r-11.7853:9.80829*r-23.6349}}let Ke=(()=>{class x{static#t=this.imperialTankSize=124.1;static#e=this.imperialTankWorkPressure=3442;static#n=this.imperialStageSize=80.1;static#r=this.imperialStageWorkPressure=3e3;static#i=this.mertricTankSize=15;static#s=this.metricStageSize=11.1}return x})();class nn{get available(){return[this.primary,this.stage,{name:"2xLP85",size:165,workingPressure:2640},{name:"S40",size:41.3,workingPressure:3e3},{name:"LP85",size:82.5,workingPressure:2640},{name:"HP80",size:84.4,workingPressure:3442},{name:"HP100",size:106.7,workingPressure:3442}]}get primary(){return{name:"HP117",size:Ke.imperialTankSize,workingPressure:Ke.imperialTankWorkPressure}}get stage(){return{name:"S80",size:Ke.imperialStageSize,workingPressure:Ke.imperialStageWorkPressure}}}class mt{static#t=this.lastStopDepth=15;static#e=this.depthDistance=10;static#n=this.descentSpeed=6*mt.depthDistance;static#r=this.recreSpeed=3*mt.depthDistance;static#i=this.maxEnd=10*mt.depthDistance;get tanks(){return new nn}get lastSpeedLevel(){return 20}get autoStopLevel(){return 33}get stopsDistance(){return mt.depthDistance}get recreationalOptions(){return{ascentSpeed50perc:mt.recreSpeed,ascentSpeed50percTo6m:mt.recreSpeed,ascentSpeed6m:mt.recreSpeed,descentSpeed:mt.descentSpeed,lastStopDepth:mt.lastStopDepth,maxEND:mt.maxEnd}}get recommendedOptions(){return{ascentSpeed50perc:mt.recreSpeed,ascentSpeed50percTo6m:2*mt.depthDistance,ascentSpeed6m:mt.depthDistance,descentSpeed:mt.descentSpeed,lastStopDepth:mt.depthDistance,maxEND:mt.maxEnd}}}let qr=(()=>{class x{static#t=this.defaultSac=20;constructor(i=x.defaultSac,u){this.rmv=i,this.stressRmv=u||1.5*i}get teamStressRmv(){return 2*this.stressRmv}static gasSac(i,u){return i/u}gasSac(i){return x.gasSac(this.rmv,i.size)}loadFrom(i){this.rmv=i.rmv,this.stressRmv=i.stressRmv}}return x})();class vn{constructor(r,i,u){this.gas=r,this.depth=i,this.density=u}static createDefault(){return new vn(Q.air,0,0)}applyHigher(r,i,u){u>this.density&&(this.gas=r,this.density=u,this.depth=i)}}let $e=(()=>{class x{constructor(){this.helium=.179,this.nitrogen=1.251,this.oxygen=1.428}static#t=this.recommendedMaximum=5.7;forGas(i){return this.forContent(i.fO2,i.fHe)}forContent(i,u){return this.nitrogen*(1-i-u)+this.oxygen*i+this.helium*u}}return x})();class ye{constructor(r){this.depthConverter=r,this.density=new $e}forProfile(r){const i=vn.createDefault();return r.forEach(u=>{const h=u.gas,g=this.density.forGas(h);this.applyHigher(i,h,u.startDepth,g),this.applyHigher(i,h,u.endDepth,g)}),i}atDepth(r,i){const u=this.density.forGas(r);return this.fromAtaDensity(u,i)}applyHigher(r,i,u,h){const g=this.fromAtaDensity(h,u);r.applyHigher(i,u,g)}fromAtaDensity(r,i){return r*this.depthConverter.toBar(i)}}let bn=(()=>{class x{static#t=this.dailyLimit=300;constructor(i){this.depthConverter=i,this.minPressure=.5}calculateForProfile(i){let u=0;return i.forEach(h=>{const w=this.calculate(h.duration,h.gas.fO2,h.startDepth,h.endDepth);u+=w}),u}calculate(i,u,h,g){let w=V.toMinutes(i),L=this.depthConverter.toBar(h)*u,K=this.depthConverter.toBar(g)*u;if(L<=this.minPressure&&K<=this.minPressure)return 0;L<=this.minPressure?(w=w*(K-this.minPressure)/(K-L),L=.501):K<=this.minPressure&&(w=w*(L-this.minPressure)/(L-K),K=.501);const Ft=L+K-1;return Math.pow(Ft,5/6)*(1-5*Math.pow(K-L,2)/216/Math.pow(Ft,2))*w}}return x})();class Mn{constructor(r,i,u){this.startDepth=r,this.endDepth=i,this.duration=u}get minDepth(){return Math.min(this.startDepth,this.endDepth)}get maxDepth(){return Math.max(this.startDepth,this.endDepth)}get isDescent(){return this.startDepth<this.endDepth}get isFlat(){return this.startDepth===this.endDepth}get isAscent(){return this.startDepth>this.endDepth}timeAt(r){const i=Bt.speed(this.startDepth,this.endDepth,this.duration),u=Bt.timeAt(this.startDepth,i,r);return B.round(u)}}class Bn{constructor(r){this.simpleDepths=ft.simple(),this.events=new pn,this.elapsed=0,this.index=0,this.fixedMnd=!0,this.profile=r.profile,this.options=r.profileOptions,this.startAscentIndex=r.startAscentIndex,this.maxDensity=r.maxDensity,this.exactDepths=new yt(this.options).create(),this.levels=new Mt(this.exactDepths,this.options),this.densityAtDepth=new ye(this.exactDepths),this.speeds=new ze(this.options);const i=It.fromCollection(this.profile);this._maxDepth=i.maxDepth,this._totalDuration=i.duration,this.speeds.markAverageDepth(i),this._mndBars=this.simpleDepths.toBar(this.options.maxEND)}get maxDepth(){return this._maxDepth}get totalDuration(){return this._totalDuration}get previous(){return this.index>0?this.profile[this.index-1]:null}get isBeforeDecoAscent(){return this.index<this.startAscentIndex}get maxPpo(){return this.isBeforeDecoAscent?this.options.maxPpO2:this.options.maxDecoPpO2}get current(){return this.profile[this.index]}get switchingGas(){return!!this.previous&&!this.current.gas.compositionEquals(this.previous.gas)}get switchingTank(){return!!this.previous&&!!this.previous.tank&&!!this.current.tank&&this.previous.tank!==this.current.tank}get maxMnd(){return this._mndBars}get currentEndTime(){return this.elapsed+this.current.duration}get atSafetyStop(){return this.index===this.profile.length-2&&this.levels.addSafetyStop(this.current.startDepth,this.maxDepth)}gasEnd(r){return this.current.gas.end(r,this.options.oxygenNarcotic)}addElapsed(){this.elapsed=this.currentEndTime}}class rn{static fromProfile(r){const i=new Bn(r),u=new Nn(i.events,i.current);for(i.index=0;i.index<r.profile.length;i.index++){const h=this.toPressureSegment(i.current,i.simpleDepths);this.addHighPpO2(i,h),this.addLowPpO2(i,h),this.addGasSwitch(i),this.addUserTankSwitch(i),this.addHighDescentSpeed(i),this.addHighAscentSpeed(i),this.addSwitchHighN2(i),this.addMndExceeded(i,h),this.addDensityExceeded(i),this.addSafetyStop(i),u.assignSegment(i.current),rn.addBrokenCeiling(u,r.ceilings),i.addElapsed()}return this.addShallowDepth(i),this.addMaximumDepth(i),i.events}static addHighAscentSpeed(r){const i=r.current;let u=V.toSeconds(i.speed);if(u=B.roundTwoDecimals(u),-u>r.speeds.ascent(i.startDepth)){const h=ct.createHighAscentSpeed(r.elapsed,i.startDepth);r.events.add(h)}}static addHighDescentSpeed(r){const i=r.current;if(V.toSeconds(i.speed)>r.options.descentSpeed){const h=ct.createHighDescentSpeed(r.elapsed,i.startDepth);r.events.add(h)}}static addGasSwitch(r){if(r.switchingGas){const i=r.current,u=ct.createGasSwitch(r.elapsed,i.startDepth,i.gas);r.events.add(u)}}static addUserTankSwitch(r){if(r.switchingTank){const i=r.current,u=ct.createGasSwitch(r.elapsed,i.startDepth,i.gas);r.events.add(u)}}static toPressureSegment(r,i){const u=i.toBar(r.startDepth),h=i.toBar(r.endDepth);return new Mn(u,h,r.duration)}static addHighPpO2(r,i){if(i.isDescent||r.isBeforeDecoAscent&&r.switchingGas){const u=r.current.gas.mod(r.maxPpo);if(i.maxDepth>u){let h=i.startDepth,g=r.elapsed;i.startDepth<u&&(h=u,g+=i.timeAt(h));const w=r.simpleDepths.fromBar(h),P=ct.createHighPpO2(g,w);r.events.add(P)}}}static addLowPpO2(r,i){const u=r.current,h=u.gas.ceiling(r.simpleDepths.surfacePressure);if(i.minDepth<h&&r.switchingGas||i.startDepth>h&&h>i.endDepth&&i.isAscent||0===u.startDepth&&i.startDepth<h&&i.isDescent){let w=i.startDepth,P=r.elapsed;i.startDepth>h&&(w=h,P+=i.timeAt(w));const E=r.simpleDepths.fromBar(w),L=ct.createLowPpO2(P,E);r.events.add(L)}}static addBrokenCeiling(r,i){for(;r.lastCeilingIndex<r.currentSegmentEndTime&&r.lastCeilingIndex<i.length-1;){const u=i[r.lastCeilingIndex];r.lastCeilingIndex++,this.addNdlEnd(r,u);const h=r.belowCeiling(u);if(!h&&r.fixedBrokenCeiling){const g=ct.createBrokenCeiling(u.time,u.depth);r.events.add(g),r.fixedBrokenCeiling=!1;break}if(h&&!r.fixedBrokenCeiling&&(r.fixedBrokenCeiling=!0),u.time>r.currentSegmentEndTime)break}}static addNdlEnd(r,i){if(!r.ndlCeilingMarked&&i.depth>0){r.ndlCeilingMarked=!0;const h=r.current.depthAt(i.time-r.currentSegmentStartTime),g=ct.createNoDecoEnd(i.time,h);r.events.add(g)}}static addSwitchHighN2(r){const i=r.current,u=r.previous;if(r.switchingGas&&u&&u.gas.fHe>0&&5*(i.gas.fN2-u.gas.fN2)>-(i.gas.fHe-u.gas.fHe)){const w=ct.createSwitchToHigherN2(r.elapsed,i.startDepth,i.gas);r.events.add(w)}}static addMndExceeded(r,i){const u=r.current,h=r.gasEnd(i.startDepth),g=r.gasEnd(i.endDepth);if(r.maxMnd<h&&r.fixedMnd||r.maxMnd<g&&r.fixedMnd)if(i.startDepth>r.maxMnd)this.addMndEvent(r,r.elapsed,u.startDepth);else{const E=qt.xValueAtAbsolute({start:r.elapsed,end:r.elapsed+u.duration},{start:i.startDepth,end:i.endDepth},r.maxMnd),L=u.depthAt(E-r.elapsed);this.addMndEvent(r,E,L)}r.fixedMnd=g<=r.maxMnd}static addMndEvent(r,i,u){const g=ct.createMaxEndExceeded(i,u,r.current.gas);r.events.add(g),r.fixedMnd=!0}static addDensityExceeded(r){const i=r.current,u=i.gas,g=i.endDepth,w=i.endDepth>i.startDepth,P=r.switchingGas,E=r.densityAtDepth.atDepth(u,i.startDepth),L=r.densityAtDepth.atDepth(u,g);if(P&&E>r.maxDensity||w&&L>r.maxDensity)if(i.startDepth>i.endDepth){const K=ct.createHighDensity(r.elapsed,i.startDepth,i.gas);r.events.add(K)}else{const _t=qt.xValueAtAbsolute({start:r.elapsed,end:r.elapsed+i.duration},{start:E,end:L},r.maxDensity),Ae=i.depthAt(_t-r.elapsed),Ie=ct.createHighDensity(_t,Ae,i.gas);r.events.add(Ie)}}static addSafetyStop(r){const i=r.current;if(r.atSafetyStop&&i.duration>=V.safetyStopDuration){const h=ct.createSafetyStopStart(r.elapsed+i.duration-V.safetyStopDuration,i.endDepth);r.events.add(h)}}static addShallowDepth(r){if(r.maxDepth<9&&r.totalDuration>5*V.oneHour){const i=ct.createShallowDepth(r.maxDepth);r.events.add(i)}}static addMaximumDepth(r){if(r.maxDepth>120){const i=ct.createMaxDepth(r.maxDepth);r.events.add(i)}}}class Nn{constructor(r,i){this.events=r,this.lastCeilingIndex=0,this.currentSegmentStartTime=0,this.currentSegmentEndTime=0,this.fixedBrokenCeiling=!0,this.ndlCeilingMarked=!1,this._current=i}get current(){return this._current}assignSegment(r){this.currentSegmentStartTime=this.currentSegmentEndTime,this.currentSegmentEndTime=this.currentSegmentStartTime+r.duration,this._current=r}belowCeiling(r){return this._current.depthAt(r.time-this.currentSegmentStartTime)>=r.depth}}class Ht{static#t=this.psiRate=14.503773773022;static#e=this.cftRate=28.316846592;static#n=this.lbRate=2.20462262185;static#r=this.footRate=.3048;static#i=this.poundRate=.00220462262;static#s=this.lbPerCuftRate=Ht.poundRate*Ht.cftRate;get name(){return"Imperial"}get lengthShortcut(){return"ft"}get pressureShortcut(){return"psi"}get volumeShortcut(){return"cuft"}get weightShortcut(){return"lb"}get altitudeShortcut(){return"ft.a.s.l"}get densityShortcut(){return"lb/cuft"}toMeters(r){return r*Ht.footRate}fromMeters(r){return r/Ht.footRate}toBar(r){return r/Ht.psiRate}fromBar(r){return r*Ht.psiRate}toLiter(r){return r*Ht.cftRate}fromLiter(r){return r/Ht.cftRate}fromTankLiters(r,i){return this.fromLiter(r)*i}toTankLiters(r,i){return this.toLiter(r)/i}fromGramPerLiter(r){return r*Ht.lbPerCuftRate}toGramPerLiter(r){return r/Ht.lbPerCuftRate}fromKilogram(r){return r*Ht.lbRate}toKilogram(r){return r/Ht.lbRate}}}}]);