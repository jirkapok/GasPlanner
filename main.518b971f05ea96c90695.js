(self.webpackChunkplanner=self.webpackChunkplanner||[]).push([[179],{644:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}let i=!1;const a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t},0)}const s={closed:!0,next(t){},error(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const u=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let d=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:a,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(a)){i&&(this._unsubscribe=void 0);try{a.call(this)}catch(s){e=s instanceof u?h(s.errors):[s]}}if(l(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(c(n))try{n.unsubscribe()}catch(s){e=e||[],s instanceof u?e=e.concat(h(s.errors)):e.push(s)}}}if(e)throw new u(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function h(t){return t.reduce((t,e)=>t.concat(e instanceof u?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends d{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s;break;case 1:if(!t){this.destination=s;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,i){let a;super(),this._parentSubscriber=t;let o=this;r(e)?a=e:e&&(a=e.next,n=e.error,i=e.complete,e!==s&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=a,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||e||n?new p(t,e,n):new p(s)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=b(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?v:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=b(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function b(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const x=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class _ extends d{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class w extends p{constructor(t){super(t),this.destination=t}}let k=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new w(this)}lift(t){const e=new T(this,this);return e.operator=t,e}next(t){if(this.closed)throw new x;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new x;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new x;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new x;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new x;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new _(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new T(t,e),t})();class T extends k{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):d.EMPTY}}function M(t){return t&&"function"==typeof t.schedule}function A(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new C(t,e))}}class C{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new S(t,this.project,this.thisArg))}}class S extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const D=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function O(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const E=O(),L=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function P(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const I=t=>{if(t&&"function"==typeof t[m])return n=t,t=>{const e=n[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(L(t))return D(t);if(P(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e))(t);if(t&&"function"==typeof t[E])return e=t,t=>{const n=e[E]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n};function R(t,e){return new y(n=>{const r=new d;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function N(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new y(n=>{const r=new d;return r.add(e.schedule(()=>{const i=t[m]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(P(t))return function(t,e){return new y(n=>{const r=new d;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(L(t))return R(t,e);if(function(t){return t&&"function"==typeof t[E]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(n=>{const r=new d;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[E](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(I(t))}class F extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class z extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function V(t,e){if(e.closed)return;if(t instanceof y)return t.subscribe(e);let n;try{n=I(t)(e)}catch(r){e.error(r)}return n}function H(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(H((n,r)=>N(t(n,r)).pipe(A((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new j(t,n)))}class j{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new B(t,this.project,this.concurrent))}}class B extends z{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new F(this),n=this.destination;n.add(e);const r=V(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function U(t=Number.POSITIVE_INFINITY){return H(v,t)}function q(t,e){return e?R(t,e):new y(D(t))}function G(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return M(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:U(e)(q(t,n))}function Z(){return function(t){return t.lift(new W(t))}}class W{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new $(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class $ extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Y extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new d,t.add(this.source.subscribe(new Q(this.getSubject(),this))),t.closed&&(this._connection=null,t=d.EMPTY)),t}refCount(){return Z()(this)}}const X=(()=>{const t=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Q extends w{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function K(t,e){return function(n){let r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new J(r,e));const i=Object.create(n,X);return i.source=n,i.subjectFactory=r,i}}class J{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}function tt(){return new k}function et(t){for(let e in t)if(t[e]===et)return e;throw Error("Could not find renamed property on target object.")}function nt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function rt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(rt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function it(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const at=et({__forward_ref__:et});function ot(t){return t.__forward_ref__=ot,t.toString=function(){return rt(this())},t}function st(t){return lt(t)?t():t}function lt(t){return"function"==typeof t&&t.hasOwnProperty(at)&&t.__forward_ref__===ot}class ct extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ut(t){return"string"==typeof t?t:null==t?"":String(t)}function dt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ut(t)}function ht(t,e){const n=e?` in ${e}`:"";throw new ct("201",`No provider for ${dt(t)} found${n}`)}function ft(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function pt(t){return{providers:t.providers||[],imports:t.imports||[]}}function gt(t){return mt(t,yt)||mt(t,xt)}function mt(t,e){return t.hasOwnProperty(e)?t[e]:null}function vt(t){return t&&(t.hasOwnProperty(bt)||t.hasOwnProperty(_t))?t[bt]:null}const yt=et({"\u0275prov":et}),bt=et({"\u0275inj":et}),xt=et({ngInjectableDef:et}),_t=et({ngInjectorDef:et});var wt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let kt;function Tt(t){const e=kt;return kt=t,e}function Mt(t,e,n){const r=gt(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&wt.Optional?null:void 0!==e?e:void ht(rt(t),"Injector")}function At(t){return{toString:t}.toString()}var Ct=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),St=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Dt="undefined"!=typeof globalThis&&globalThis,Ot="undefined"!=typeof window&&window,Et="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Lt="undefined"!=typeof global&&global,Pt=Dt||Lt||Ot||Et,It={},Rt=[],Nt=et({"\u0275cmp":et}),Ft=et({"\u0275dir":et}),zt=et({"\u0275pipe":et}),Vt=et({"\u0275mod":et}),Ht=et({"\u0275loc":et}),jt=et({"\u0275fac":et}),Bt=et({__NG_ELEMENT_ID__:et});let Ut=0;function qt(t){return At(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ct.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Rt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||St.Emulated,id:"c",styles:t.styles||Rt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,a=t.pipes;return n.id+=Ut++,n.inputs=Yt(t.inputs,e),n.outputs=Yt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Gt):null,n.pipeDefs=a?()=>("function"==typeof a?a():a).map(Zt):null,n})}function Gt(t){return Kt(t)||function(t){return t[Ft]||null}(t)}function Zt(t){return function(t){return t[zt]||null}(t)}const Wt={};function $t(t){const e={type:t.type,bootstrap:t.bootstrap||Rt,declarations:t.declarations||Rt,imports:t.imports||Rt,exports:t.exports||Rt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&At(()=>{Wt[t.id]=t.type}),e}function Yt(t,e){if(null==t)return It;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,e&&(e[i]=a)}return n}const Xt=qt;function Qt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Kt(t){return t[Nt]||null}function Jt(t,e){const n=t[Vt]||null;if(!n&&!0===e)throw new Error(`Type ${rt(t)} does not have '\u0275mod' property.`);return n}const te=20,ee=10;function ne(t){return Array.isArray(t)&&"object"==typeof t[1]}function re(t){return Array.isArray(t)&&!0===t[1]}function ie(t){return 0!=(8&t.flags)}function ae(t){return 2==(2&t.flags)}function oe(t){return 1==(1&t.flags)}function se(t){return null!==t.template}function le(t,e){return t.hasOwnProperty(jt)?t[jt]:null}class ce{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ue(){return de}function de(t){return t.type.prototype.ngOnChanges&&(t.setInput=fe),he}function he(){const t=pe(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===It)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function fe(t,e,n,r){const i=pe(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:It,current:null}),a=i.current||(i.current={}),o=i.previous,s=this.declaredInputs[n],l=o[s];a[s]=new ce(l&&l.currentValue,e,o===It),t[r]=e}function pe(t){return t.__ngSimpleChanges__||null}let ge;function me(){return void 0!==ge?ge:"undefined"!=typeof document?document:void 0}function ve(t){return!!t.listen}ue.ngInherit=!0;const ye={createRenderer:(t,e)=>me()};function be(t){for(;Array.isArray(t);)t=t[0];return t}function xe(t,e){return be(e[t])}function _e(t,e){return be(e[t.index])}function we(t,e){return t.data[e]}function ke(t,e){return t[e]}function Te(t,e){const n=e[t];return ne(n)?n:n[0]}function Me(t){return 4==(4&t[2])}function Ae(t){return 128==(128&t[2])}function Ce(t,e){return null==e?null:t[e]}function Se(t){t[18]=0}function De(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Oe={lFrame:tn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ee(){return Oe.bindingsEnabled}function Le(){return Oe.lFrame.lView}function Pe(){return Oe.lFrame.tView}function Ie(t){return Oe.lFrame.contextLView=t,t[8]}function Re(){let t=Ne();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ne(){return Oe.lFrame.currentTNode}function Fe(t,e){const n=Oe.lFrame;n.currentTNode=t,n.isParent=e}function ze(){return Oe.lFrame.isParent}function Ve(){Oe.lFrame.isParent=!1}function He(){return Oe.isInCheckNoChangesMode}function je(t){Oe.isInCheckNoChangesMode=t}function Be(){const t=Oe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ue(){return Oe.lFrame.bindingIndex}function qe(){return Oe.lFrame.bindingIndex++}function Ge(t){const e=Oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ze(t,e){const n=Oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,We(e)}function We(t){Oe.lFrame.currentDirectiveIndex=t}function $e(){return Oe.lFrame.currentQueryIndex}function Ye(t){Oe.lFrame.currentQueryIndex=t}function Xe(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Qe(t,e,n){if(n&wt.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&wt.Host||(r=Xe(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Oe.lFrame=Je();return r.currentTNode=e,r.lView=t,!0}function Ke(t){const e=Je(),n=t[1];Oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Je(){const t=Oe.lFrame,e=null===t?null:t.child;return null===e?tn(t):e}function tn(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function en(){const t=Oe.lFrame;return Oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const nn=en;function rn(){const t=en();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function an(){return Oe.lFrame.selectedIndex}function on(t){Oe.lFrame.selectedIndex=t}function sn(){const t=Oe.lFrame;return we(t.tView,t.selectedIndex)}function ln(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:a,ngAfterViewChecked:o,ngOnDestroy:s}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),a&&(t.viewHooks||(t.viewHooks=[])).push(-n,a),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=s&&(t.destroyHooks||(t.destroyHooks=[])).push(n,s)}}function cn(t,e,n){hn(t,e,3,n)}function un(t,e,n,r){(3&t[2])===n&&hn(t,e,n,r)}function dn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function hn(t,e,n,r){const i=null!=r?r:-1,a=e.length-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<a;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(fn(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function fn(t,e,n,r){const i=n[r]<0,a=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}const pn=-1;class gn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function mn(t,e,n){const r=ve(t);let i=0;for(;i<n.length;){const a=n[i];if("number"==typeof a){if(0!==a)break;i++;const o=n[i++],s=n[i++],l=n[i++];r?t.setAttribute(e,s,l,o):e.setAttributeNS(o,s,l)}else{const o=a,s=n[++i];yn(o)?r&&t.setProperty(e,o,s):r?t.setAttribute(e,o,s):e.setAttribute(o,s),i++}}return i}function vn(t){return 3===t||4===t||6===t}function yn(t){return 64===t.charCodeAt(0)}function bn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||xn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function xn(t,e,n,r,i){let a=0,o=t.length;if(-1===e)o=-1;else for(;a<t.length;){const n=t[a++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=a-1;break}}}for(;a<t.length;){const e=t[a];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[a+1]=i));if(r===t[a+1])return void(t[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(t.splice(o,0,e),a=o+1),t.splice(a++,0,n),null!==r&&t.splice(a++,0,r),null!==i&&t.splice(a++,0,i)}function _n(t){return t!==pn}function wn(t){return 32767&t}function kn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Tn=!0;function Mn(t){const e=Tn;return Tn=t,e}let An=0;function Cn(t,e){const n=Dn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Sn(r.data,t),Sn(e,null),Sn(r.blueprint,null));const i=On(t,e),a=t.injectorIndex;if(_n(i)){const t=wn(i),n=kn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[a+i]=n[t+i]|r[t+i]}return e[a+8]=i,a}function Sn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Dn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function On(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return pn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return pn}function En(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bt)&&(r=n[Bt]),null==r&&(r=n[Bt]=An++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ln(t,e,n){if(n&wt.Optional)return t;ht(e,"NodeInjector")}function Pn(t,e,n,r){if(n&wt.Optional&&void 0===r&&(r=null),0==(n&(wt.Self|wt.Host))){const i=t[9],a=Tt(void 0);try{return i?i.get(e,r,n&wt.Optional):Mt(e,r,n&wt.Optional)}finally{Tt(a)}}return Ln(r,e,n)}function In(t,e,n,r=wt.Default,i){if(null!==t){const a=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Bt)?t[Bt]:void 0;return"number"==typeof e?e>=0?255&e:Nn:e}(n);if("function"==typeof a){if(!Qe(e,t,r))return r&wt.Host?Ln(i,n,r):Pn(e,n,r,i);try{const t=a(r);if(null!=t||r&wt.Optional)return t;ht(n)}finally{nn()}}else if("number"==typeof a){let i=null,o=Dn(t,e),s=pn,l=r&wt.Host?e[16][6]:null;for((-1===o||r&wt.SkipSelf)&&(s=-1===o?On(t,e):e[o+8],s!==pn&&jn(r,!1)?(i=e[1],o=wn(s),e=kn(s,e)):o=-1);-1!==o;){const t=e[1];if(Hn(a,o,t.data)){const t=Fn(o,e,n,i,r,l);if(t!==Rn)return t}s=e[o+8],s!==pn&&jn(r,e[1].data[o+8]===l)&&Hn(a,o,e)?(i=t,o=wn(s),e=kn(s,e)):o=-1}}}return Pn(e,n,r,i)}const Rn={};function Nn(){return new Bn(Re(),Le())}function Fn(t,e,n,r,i,a){const o=e[1],s=o.data[t+8],l=zn(s,o,n,null==r?ae(s)&&Tn:r!=o&&0!=(3&s.type),i&wt.Host&&a===s);return null!==l?Vn(e,o,l,s):Rn}function zn(t,e,n,r,i){const a=t.providerIndexes,o=e.data,s=1048575&a,l=t.directiveStart,c=a>>20,u=i?s+c:t.directiveEnd;for(let d=r?s:s+c;d<u;d++){const t=o[d];if(d<l&&n===t||d>=l&&t.type===n)return d}if(i){const t=o[l];if(t&&se(t)&&t.type===n)return l}return null}function Vn(t,e,n,r){let i=t[n];const a=e.data;if(i instanceof gn){const o=i;o.resolving&&function(t,e){throw new ct("200",`Circular dependency in DI detected for ${t}`)}(dt(a[n]));const s=Mn(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Tt(o.injectImpl):null;Qe(t,r,wt.Default);try{i=t[n]=o.factory(void 0,a,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:a}=e.type.prototype;if(r){const r=de(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a))}(n,a[n],e)}finally{null!==l&&Tt(l),Mn(s),o.resolving=!1,nn()}}return i}function Hn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function jn(t,e){return!(t&wt.Self||t&wt.Host&&e)}class Bn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return In(this._tNode,this._lView,t,void 0,e)}}function Un(t){return At(()=>{const e=t.prototype.constructor,n=e[jt]||qn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[jt]||qn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function qn(t){return lt(t)?()=>{const e=qn(st(t));return e&&e()}:le(t)}const Gn="__parameters__";function Zn(t,e,n){return At(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Gn)?t[Gn]:Object.defineProperty(t,Gn,{value:[]})[Gn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Wn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ft({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $n=new Wn("AnalyzeForEntryComponents"),Yn=Function;function Xn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Xn(r,e)):e!==t&&e.push(r)}return e}function Qn(t,e){t.forEach(t=>Array.isArray(t)?Qn(t,e):e(t))}function Kn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Jn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function tr(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function er(t,e,n){let r=rr(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function nr(t,e){const n=rr(t,e);if(n>=0)return t[1|n]}function rr(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),a=t[n<<1];if(e===a)return n<<1;a>e?i=n:r=n+1}return~(i<<1)}(t,e)}const ir={},ar=/\n/gm,or="__source",sr=et({provide:String,useValue:et});let lr;function cr(t){const e=lr;return lr=t,e}function ur(t,e=wt.Default){if(void 0===lr)throw new Error("inject() must be called from an injection context");return null===lr?Mt(t,void 0,e):lr.get(t,e&wt.Optional?null:void 0,e)}function dr(t,e=wt.Default){return(kt||ur)(st(t),e)}function hr(t){const e=[];for(let n=0;n<t.length;n++){const r=st(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=wt.Default;for(let e=0;e<r.length;e++){const i=r[e],a=i.__NG_DI_FLAG__;"number"==typeof a?-1===a?t=i.token:n|=a:t=i}e.push(dr(t,n))}else e.push(dr(r))}return e}function fr(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const pr=fr(Zn("Inject",t=>({token:t})),-1),gr=fr(Zn("Optional"),8),mr=fr(Zn("SkipSelf"),4);let vr,yr;function br(t){var e;return(null===(e=function(){if(void 0===vr&&(vr=null,Pt.trustedTypes))try{vr=Pt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return vr}())||void 0===e?void 0:e.createHTML(t))||t}function xr(t){var e;return(null===(e=function(){if(void 0===yr&&(yr=null,Pt.trustedTypes))try{yr=Pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return yr}())||void 0===e?void 0:e.createHTML(t))||t}class _r{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class wr extends _r{getTypeName(){return"HTML"}}class kr extends _r{getTypeName(){return"Style"}}class Tr extends _r{getTypeName(){return"Script"}}class Mr extends _r{getTypeName(){return"URL"}}class Ar extends _r{getTypeName(){return"ResourceURL"}}function Cr(t){return t instanceof _r?t.changingThisBreaksApplicationSecurity:t}function Sr(t,e){const n=Dr(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Dr(t){return t instanceof _r&&t.getTypeName()||null}class Or{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(br(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Er{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=br(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=br(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Lr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Pr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ir(t){return(t=String(t)).match(Lr)||t.match(Pr)?t:"unsafe:"+t}function Rr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Nr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Fr=Rr("area,br,col,hr,img,wbr"),zr=Rr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vr=Rr("rp,rt"),Hr=Nr(Vr,zr),jr=Nr(Fr,Nr(zr,Rr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nr(Vr,Rr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hr),Br=Rr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ur=Rr("srcset"),qr=Nr(Br,Ur,Rr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Rr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gr=Rr("script,style,template");class Zr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!jr.hasOwnProperty(e))return this.sanitizedSomething=!0,!Gr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,a=e.toLowerCase();if(!qr.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let o=t.value;Br[a]&&(o=Ir(o)),Ur[a]&&(r=o,o=(r=String(r)).split(",").map(t=>Ir(t.trim())).join(", ")),this.buf.push(" ",e,'="',Yr(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();jr.hasOwnProperty(e)&&!Fr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Yr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Wr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$r=/([^\#-~ |!])/g;function Yr(t){return t.replace(/&/g,"&amp;").replace(Wr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace($r,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xr;function Qr(t,e){let n=null;try{Xr=Xr||function(t){const e=new Er(t);return function(){try{return!!(new window.DOMParser).parseFromString(br(""),"text/html")}catch(t){return!1}}()?new Or(e):e}(t);let r=e?String(e):"";n=Xr.getInertBodyElement(r);let i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=Xr.getInertBodyElement(r)}while(r!==a);return br((new Zr).sanitizeChildren(Kr(n)||n))}finally{if(n){const t=Kr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Kr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Jr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ti(t){const e=ni();return e?xr(e.sanitize(Jr.HTML,t)||""):Sr(t,"HTML")?xr(Cr(t)):Qr(me(),ut(t))}function ei(t){const e=ni();return e?e.sanitize(Jr.URL,t)||"":Sr(t,"URL")?Cr(t):Ir(ut(t))}function ni(){const t=Le();return t&&t[12]}function ri(t,e){t.__ngContext__=e}function ii(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ai(t){return t.ngDebugContext}function oi(t){return t.ngOriginalError}function si(t,...e){t.error(...e)}class li{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||si}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?ai(t)?ai(t):this._findContext(oi(t)):null}_findOriginalError(t){let e=oi(t);for(;e&&oi(e);)e=oi(e);return e}}const ci=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pt))();function ui(t){return t.ownerDocument.defaultView}function di(t){return t instanceof Function?t():t}var hi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function fi(t,e){return(void 0)(t,e)}function pi(t){const e=t[3];return re(e)?e[3]:e}function gi(t){return vi(t[13])}function mi(t){return vi(t[4])}function vi(t){for(;null!==t&&!re(t);)t=t[4];return t}function yi(t,e,n,r,i){if(null!=r){let a,o=!1;re(r)?a=r:ne(r)&&(o=!0,r=r[0]);const s=be(r);0===t&&null!==n?null==i?Ai(e,n,s):Mi(e,n,s,i||null,!0):1===t&&null!==n?Mi(e,n,s,i||null,!0):2===t?function(t,e,n){const r=Si(t,e);r&&function(t,e,n,r){ve(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,s,o):3===t&&e.destroyNode(s),null!=a&&function(t,e,n,r,i){const a=n[7];a!==be(n)&&yi(e,t,r,a,i);for(let o=ee;o<n.length;o++){const i=n[o];Ni(i[1],i,t,e,r,a)}}(e,t,a,n,i)}}function bi(t,e,n){return ve(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function xi(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,De(i,-1)),n.splice(r,1)}function _i(t,e){if(t.length<=ee)return;const n=ee+e,r=t[n];if(r){const a=r[17];null!==a&&a!==t&&xi(a,r),e>0&&(t[n-1][4]=r[4]);const o=Jn(t,ee+e);Ni(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function wi(t,e){if(!(256&e[2])){const n=e[11];ve(n)&&n.destroyNode&&Ni(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ki(t[1],t);for(;e;){let n=null;if(ne(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ne(e)&&ki(e[1],e),e=e[3];null===e&&(e=t),ne(e)&&ki(e[1],e),n=e&&e[4]}e=n}}(e)}}function ki(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof gn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){const t=n[a+1],o="function"==typeof t?t(e):be(e[t]),s=r[i=n[a+2]],l=n[a+3];"boolean"==typeof l?o.removeEventListener(n[a],s,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),a+=2}else{const t=r[i=n[a+1]];n[a].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&ve(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&re(e[3])){n!==e[3]&&xi(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ti(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===St.None||e===St.Emulated)return null}return _e(r,n)}(t,e.parent,n)}function Mi(t,e,n,r,i){ve(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ai(t,e,n){ve(t)?t.appendChild(e,n):e.appendChild(n)}function Ci(t,e,n,r,i){null!==r?Mi(t,e,n,r,i):Ai(t,e,n)}function Si(t,e){return ve(t)?t.parentNode(e):e.parentNode}function Di(t,e,n){return Oi(t,e,n)}let Oi=function(t,e,n){return 40&t.type?_e(t,n):null};function Ei(t,e,n,r){const i=Ti(t,r,e),a=e[11],o=Di(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let s=0;s<n.length;s++)Ci(a,i,n[s],o,!1);else Ci(a,i,n,o,!1)}function Li(t,e){if(null!==e){const n=e.type;if(3&n)return _e(e,t);if(4&n)return Ii(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Li(t,n);{const n=t[e.index];return re(n)?Ii(-1,n):be(n)}}if(32&n)return fi(e,t)()||be(t[e.index]);{const n=Pi(t,e);return null!==n?Array.isArray(n)?n[0]:Li(pi(t[16]),n):Li(t,e.next)}}return null}function Pi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ii(t,e){const n=ee+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Li(t,r)}return e[7]}function Ri(t,e,n,r,i,a,o){for(;null!=n;){const s=r[n.index],l=n.type;if(o&&0===e&&(s&&ri(be(s),r),n.flags|=4),64!=(64&n.flags))if(8&l)Ri(t,e,n.child,r,i,a,!1),yi(e,t,i,s,a);else if(32&l){const o=fi(n,r);let l;for(;l=o();)yi(e,t,i,l,a);yi(e,t,i,s,a)}else 16&l?Fi(t,e,r,n,i,a):yi(e,t,i,s,a);n=o?n.projectionNext:n.next}}function Ni(t,e,n,r,i,a){Ri(n,r,t.firstChild,e,i,a,!1)}function Fi(t,e,n,r,i,a){const o=n[16],s=o[6].projection[r.projection];if(Array.isArray(s))for(let l=0;l<s.length;l++)yi(e,t,i,s[l],a);else Ri(t,e,s,o[3],i,a,!0)}function zi(t,e,n){ve(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Vi(t,e,n){ve(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Hi(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ji="ng-template";function Bi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Hi(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Ui(t){return 4===t.type&&t.value!==ji}function qi(t,e,n){return e===(4!==t.type||n?t.value:ji)}function Gi(t,e,n){let r=4;const i=t.attrs||[],a=function(t){for(let e=0;e<t.length;e++)if(vn(t[e]))return e;return t.length}(i);let o=!1;for(let s=0;s<e.length;s++){const l=e[s];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!qi(t,l,n)||""===l&&1===e.length){if(Zi(r))return!1;o=!0}}else{const c=8&r?l:e[++s];if(8&r&&null!==t.attrs){if(!Bi(t.attrs,c,n)){if(Zi(r))return!1;o=!0}continue}const u=Wi(8&r?"class":l,i,Ui(t),n);if(-1===u){if(Zi(r))return!1;o=!0;continue}if(""!==c){let t;t=u>a?"":i[u+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Hi(e,c,0)||2&r&&c!==t){if(Zi(r))return!1;o=!0}}}}else{if(!o&&!Zi(r)&&!Zi(l))return!1;if(o&&Zi(l))continue;o=!1,r=l|1&r}}return Zi(r)||o}function Zi(t){return 0==(1&t)}function Wi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function $i(t,e,n=!1){for(let r=0;r<e.length;r++)if(Gi(t,e[r],n))return!0;return!1}function Yi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Xi(t,e){return t?":not("+e.trim()+")":e}function Qi(t){let e=t[0],n=1,r=2,i="",a=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Zi(o)||(e+=Xi(a,i),i=""),r=o,a=a||!Zi(r);n++}return""!==i&&(e+=Xi(a,i)),e}const Ki={};function Ji(t){ta(Pe(),Le(),an()+t,He())}function ta(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&cn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&un(e,r,0,n)}on(n)}function ea(t,e){return t<<17|e<<2}function na(t){return t>>17&32767}function ra(t){return 2|t}function ia(t){return(131068&t)>>2}function aa(t,e){return-131069&t|e<<2}function oa(t){return 1|t}function sa(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],a=n[r+1];if(-1!==a){const n=t.data[a];Ye(i),n.contentQueries(2,e[a],a)}}}function la(t,e,n,r,i,a,o,s,l,c){const u=e.blueprint.slice();return u[0]=i,u[2]=140|r,Se(u),u[3]=u[15]=t,u[8]=n,u[10]=o||t&&t[10],u[11]=s||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==e.type?t[16]:u,u}function ca(t,e,n,r,i){let a=t.data[e];if(null===a)a=function(t,e,n,r,i){const a=Ne(),o=ze(),s=t.data[e]=function(t,e,n,r,i,a){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=s),null!==a&&(o?null==a.child&&null!==s.parent&&(a.child=s):null===a.next&&(a.next=s)),s}(t,e,n,r,i),Oe.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;const t=function(){const t=Oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();a.injectorIndex=null===t?-1:t.injectorIndex}return Fe(a,!0),a}function ua(t,e,n,r){if(0===n)return-1;const i=e.length;for(let a=0;a<n;a++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function da(t,e,n){Ke(e);try{const r=t.viewQuery;null!==r&&Ha(1,r,n);const i=t.template;null!==i&&pa(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&sa(t,e),t.staticViewQueries&&Ha(2,t.viewQuery,n);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ra(t,e[n])}(e,a)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,rn()}}function ha(t,e,n,r){const i=e[2];if(256==(256&i))return;Ke(e);const a=He();try{Se(e),Oe.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&pa(t,e,n,2,r);const o=3==(3&i);if(!a)if(o){const n=t.preOrderCheckHooks;null!==n&&cn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&un(e,n,0,null),dn(e,0)}if(function(t){for(let e=gi(t);null!==e;e=mi(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&De(r,1),n[2]|=1024}}}(e),function(t){for(let e=gi(t);null!==e;e=mi(e))for(let t=ee;t<e.length;t++){const n=e[t],r=n[1];Ae(n)&&ha(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&sa(t,e),!a)if(o){const n=t.contentCheckHooks;null!==n&&cn(e,n)}else{const n=t.contentHooks;null!==n&&un(e,n,1),dn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)on(~r);else{const i=r,a=n[++t],o=n[++t];Ze(a,i),o(2,e[i])}}}finally{on(-1)}}(t,e);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Pa(t,e[n])}(e,s);const l=t.viewQuery;if(null!==l&&Ha(2,l,r),!a)if(o){const n=t.viewCheckHooks;null!==n&&cn(e,n)}else{const n=t.viewHooks;null!==n&&un(e,n,2),dn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,De(e[3],-1))}finally{rn()}}function fa(t,e,n,r){const i=e[10],a=!He(),o=Me(e);try{a&&!o&&i.begin&&i.begin(),o&&da(t,e,r),ha(t,e,n,r)}finally{a&&!o&&i.end&&i.end()}}function pa(t,e,n,r,i){const a=an(),o=2&r;try{on(-1),o&&e.length>te&&ta(t,e,te,He()),n(r,i)}finally{on(a)}}function ga(t,e,n){Ee()&&(function(t,e,n,r){const i=n.directiveStart,a=n.directiveEnd;t.firstCreatePass||Cn(n,e),ri(r,e);const o=n.initialInputs;for(let s=i;s<a;s++){const r=t.data[s],a=se(r);a&&Da(e,n,r);const l=Vn(e,t,s,n);ri(l,e),null!==o&&Oa(0,s-i,l,r,0,o),a&&(Te(n.index,e)[8]=l)}}(t,e,n,_e(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,a=n.index,o=Oe.lFrame.currentDirectiveIndex;try{on(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];We(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ta(r,i)}}finally{on(-1),We(o)}}(t,e,n))}function ma(t,e,n=_e){const r=e.localNames;if(null!==r){let i=e.index+1;for(let a=0;a<r.length;a+=2){const o=r[a+1],s=-1===o?n(e,t):t[o];t[i++]=s}}}function va(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ya(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ya(t,e,n,r,i,a,o,s,l,c){const u=te+r,d=u+i,h=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ki);return n}(u,d),f="function"==typeof c?c():c;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:s,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function ba(t,e,n,r){const i=Ba(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Ua(t).push(r,i.length-1))}function xa(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function _a(t,e,n,r,i,a,o,s){const l=_e(e,n);let c,u=e.inputs;var d;!s&&null!=u&&(c=u[r])?(Ga(t,n,c,r,i),ae(e)&&function(t,e){const n=Te(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(d=r)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d,i=null!=o?o(i,e.value||"",r):i,ve(a)?a.setProperty(l,r,i):yn(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function wa(t,e,n,r){let i=!1;if(Ee()){const a=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let a=0;a<r.length;a++){const o=r[a];$i(n,o.selectors,!1)&&(i||(i=[]),En(Cn(n,e),t,o.type),se(o)?(Ma(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==a){i=!0,Ca(n,t.data.length,a.length);for(let t=0;t<a.length;t++){const e=a[t];e.providersResolver&&e.providersResolver(e)}let r=!1,s=!1,l=ua(t,e,a.length,null);for(let i=0;i<a.length;i++){const c=a[i];n.mergedAttrs=bn(n.mergedAttrs,c.hostAttrs),Sa(t,n,e,l,c),Aa(l,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),s||!u.ngOnChanges&&!u.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),s=!0),l++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,a=[];let o=null,s=null;for(let l=e.directiveStart;l<n;l++){const t=r[l],n=t.inputs,c=null===i||Ui(e)?null:Ea(n,i);a.push(c),o=xa(n,l,o),s=xa(t.outputs,l,s)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=a,e.inputs=o,e.outputs=s}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ct("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=bn(n.mergedAttrs,n.attrs),i}function ka(t,e,n,r,i,a){const o=a.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const a=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=a&&n.push(a),n.push(r,i,o)}}function Ta(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ma(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Aa(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;se(e)&&(n[""]=t)}}function Ca(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Sa(t,e,n,r,i){t.data[r]=i;const a=i.factory||(i.factory=le(i.type)),o=new gn(a,se(i),null);t.blueprint[r]=o,n[r]=o,ka(t,e,0,r,ua(t,n,i.hostVars,Ki),i)}function Da(t,e,n){const r=_e(e,t),i=va(n),a=t[10],o=Na(t,la(t,i,null,n.onPush?64:16,r,e,a,a.createRenderer(r,n),null,null));t[e.index]=o}function Oa(t,e,n,r,i,a){const o=a[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],a=o[e++],s=o[e++];null!==t?r.setInput(n,s,i,a):n[a]=s}}}function Ea(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function La(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Pa(t,e){const n=Te(e,t);if(Ae(n)){const t=n[1];80&n[2]?ha(t,n,t.template,n[8]):n[5]>0&&Ia(n)}}function Ia(t){for(let n=gi(t);null!==n;n=mi(n))for(let t=ee;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];ha(t,e,t.template,e[8])}else e[5]>0&&Ia(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Te(e[n],t);Ae(r)&&r[5]>0&&Ia(r)}}function Ra(t,e){const n=Te(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),da(r,n,n[8])}function Na(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Fa(t){for(;t;){t[2]|=64;const e=pi(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function za(t,e,n){const r=e[10];r.begin&&r.begin();try{ha(t,e,t.template,n)}catch(i){throw qa(e,i),i}finally{r.end&&r.end()}}function Va(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=ii(n),i=r[1];fa(i,r,i.template,n)}}(t[8])}function Ha(t,e,n){Ye(0),e(t,n)}const ja=(()=>Promise.resolve(null))();function Ba(t){return t[7]||(t[7]=[])}function Ua(t){return t.cleanup||(t.cleanup=[])}function qa(t,e){const n=t[9],r=n?n.get(li,null):null;r&&r.handleError(e)}function Ga(t,e,n,r,i){for(let a=0;a<n.length;){const o=n[a++],s=n[a++],l=e[o],c=t.data[o];null!==c.setInput?c.setInput(l,i,r,s):l[s]=i}}function Za(t,e,n){const r=xe(e,t);!function(t,e,n){ve(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Wa(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,a=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?a=t:1==a?i=it(i,t):2==a&&(r=it(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const $a=new Wn("INJECTOR",-1);class Ya{get(t,e=ir){if(e===ir){const e=new Error(`NullInjectorError: No provider for ${rt(t)}!`);throw e.name="NullInjectorError",e}return e}}const Xa=new Wn("Set Injector scope."),Qa={},Ka={};let Ja;function to(){return void 0===Ja&&(Ja=new Ya),Ja}function eo(t,e=null,n=null,r){return new no(t,n,e||to(),r)}class no{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Qn(e,n=>this.processProvider(n,t,e)),Qn([t],t=>this.processInjectorType(t,[],i)),this.records.set($a,ao(void 0,this));const a=this.records.get(Xa);this.scope=null!=a?a.value:null,this.source=r||("object"==typeof t?null:rt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ir,n=wt.Default){this.assertNotDestroyed();const r=cr(this);try{if(!(n&wt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Wn)&&gt(t);e=n&&this.injectableDefInScope(n)?ao(ro(t),Qa):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&wt.Self?to():this.parent).get(t,e=n&wt.Optional&&e===ir?null:e)}catch(a){if("NullInjectorError"===a.name){if((a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(rt(t)),r)throw a;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[or]&&i.unshift(e[or]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=rt(e);if(Array.isArray(e))i=e.map(rt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):rt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ar,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(a,t,"R3InjectorError",this.source)}throw a}finally{cr(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(rt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=st(t)))return!1;let r=vt(t);const i=null==r&&t.ngModule||void 0,a=void 0===i?t:i,o=-1!==n.indexOf(a);if(void 0!==i&&(r=vt(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(a);try{Qn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Qn(r,t=>this.processProvider(t,n,r||Rt))}}this.injectorDefTypes.add(a);const s=le(a)||(()=>new a);this.records.set(a,ao(s,Qa));const l=r.providers;if(null!=l&&!o){const e=t;Qn(l,t=>this.processProvider(t,e,l))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=so(t=st(t))?t:st(t&&t.provide);const i=function(t,e,n){return oo(t)?ao(void 0,t.useValue):ao(io(t),Qa)}(t);if(so(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ao(void 0,Qa,!0),e.factory=()=>hr(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Qa&&(e.value=Ka,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=st(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ro(t){const e=gt(t),n=null!==e?e.factory:le(t);if(null!==n)return n;if(t instanceof Wn)throw new Error(`Token ${rt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=tr(e,"?");throw new Error(`Can't resolve all parameters for ${rt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[yt]||t[xt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function io(t,e,n){let r;if(so(t)){const e=st(t);return le(e)||ro(e)}if(oo(t))r=()=>st(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...hr(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>dr(st(t.useExisting));else{const e=st(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return le(e)||ro(e);r=()=>new e(...hr(t.deps))}var i;return r}function ao(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oo(t){return null!==t&&"object"==typeof t&&sr in t}function so(t){return"function"==typeof t}const lo=function(t,e,n){return function(t,e=null,n=null,r){const i=eo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let co=(()=>{class t{static create(t,e){return Array.isArray(t)?lo(t,e,""):lo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=ir,t.NULL=new Ya,t.\u0275prov=ft({token:t,providedIn:"any",factory:()=>dr($a)}),t.__NG_ELEMENT_ID__=-1,t})();function uo(t,e){ln(ii(t)[1],Re())}function ho(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(se(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=fo(t.inputs),e.declaredInputs=fo(t.declaredInputs),e.outputs=fo(t.outputs);const n=i.hostBindings;n&&mo(t,n);const a=i.viewQuery,o=i.contentQueries;if(a&&po(t,a),o&&go(t,o),nt(t.inputs,i.inputs),nt(t.declaredInputs,i.declaredInputs),nt(t.outputs,i.outputs),se(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===ho&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=bn(i.hostAttrs,n=bn(n,i.hostAttrs))}}(r)}function fo(t){return t===It?{}:t===Rt?[]:t}function po(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function go(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function mo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let vo=null;function yo(){if(!vo){const t=Pt.Symbol;if(t&&t.iterator)vo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(vo=n)}}}return vo}class bo{constructor(t){this.wrapped=t}static wrap(t){return new bo(t)}static unwrap(t){return bo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof bo}}function xo(t){return!!_o(t)&&(Array.isArray(t)||!(t instanceof Map)&&yo()in t)}function _o(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wo(t,e,n){return t[e]=n}function ko(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function To(t,e,n,r){const i=ko(t,e,n);return ko(t,e+1,r)||i}function Mo(t,e,n,r){const i=Le();return ko(i,qe(),e)&&(Pe(),function(t,e,n,r,i,a){const o=_e(t,e);!function(t,e,n,r,i,a,o){if(null==a)ve(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const s=null==o?ut(a):o(a,r||"",i);ve(t)?t.setAttribute(e,i,s,n):n?e.setAttributeNS(n,i,s):e.setAttribute(i,s)}}(e[11],o,a,t.value,n,r,i)}(sn(),i,t,e,n,r)),Mo}function Ao(t,e,n,r,i,a,o,s){const l=Le(),c=Pe(),u=t+te,d=c.firstCreatePass?function(t,e,n,r,i,a,o,s,l){const c=e.consts,u=ca(e,t,4,o||null,Ce(c,s));wa(e,n,u,Ce(c,l)),ln(e,u);const d=u.tViews=ya(2,u,r,i,a,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,n,r,i,a,o):c.data[u];Fe(d,!1);const h=l[11].createComment("");Ei(c,l,h,d),ri(h,l),Na(l,l[u]=La(h,l,h,d)),oe(d)&&ga(c,l,d),null!=o&&ma(l,d,s)}function Co(t){return ke(Oe.lFrame.contextLView,te+t)}function So(t,e=wt.Default){const n=Le();return null===n?dr(t,e):In(Re(),n,st(t),e)}function Do(t,e,n){const r=Le();return ko(r,qe(),e)&&_a(Pe(),sn(),r,t,e,r[11],n,!1),Do}function Oo(t,e,n,r,i){const a=i?"class":"style";Ga(t,n,e.inputs[a],a,r)}function Eo(t,e,n,r){const i=Le(),a=Pe(),o=te+t,s=i[11],l=i[o]=bi(s,e,Oe.lFrame.currentNamespace),c=a.firstCreatePass?function(t,e,n,r,i,a,o){const s=e.consts,l=ca(e,t,2,i,Ce(s,a));return wa(e,n,l,Ce(s,o)),null!==l.attrs&&Wa(l,l.attrs,!1),null!==l.mergedAttrs&&Wa(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,a,i,0,e,n,r):a.data[o];Fe(c,!0);const u=c.mergedAttrs;null!==u&&mn(s,l,u);const d=c.classes;null!==d&&Vi(s,l,d);const h=c.styles;null!==h&&zi(s,l,h),64!=(64&c.flags)&&Ei(a,i,l,c),0===Oe.lFrame.elementDepthCount&&ri(l,i),Oe.lFrame.elementDepthCount++,oe(c)&&(ga(a,i,c),function(t,e,n){if(ie(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(a,c,i)),null!==r&&ma(i,c)}function Lo(){let t=Re();ze()?Ve():(t=t.parent,Fe(t,!1));const e=t;Oe.lFrame.elementDepthCount--;const n=Pe();n.firstCreatePass&&(ln(n,t),ie(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Oo(n,e,Le(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Oo(n,e,Le(),e.stylesWithoutHost,!1)}function Po(t,e,n,r){Eo(t,e,n,r),Lo()}function Io(){return Le()}function Ro(t){return!!t&&"function"==typeof t.then}const No=function(t){return!!t&&"function"==typeof t.subscribe};function Fo(t,e,n,r){const i=Le(),a=Pe(),o=Re();return function(t,e,n,r,i,a,o,s){const l=oe(r),c=t.firstCreatePass&&Ua(t),u=Ba(e);let d=!0;if(3&r.type||s){const h=_e(r,e),f=s?s(h):h,p=u.length,g=s?t=>s(be(t[r.index])):r.index;if(ve(n)){let o=null;if(!s&&l&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let a=0;a<i.length-1;a+=2){const t=i[a];if(t===n&&i[a+1]===r){const t=e[7],n=i[a+2];return t.length>n?t[n]:null}"string"==typeof t&&(a+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=a,o.__ngLastListenerFn__=a,d=!1;else{a=Vo(r,e,0,a,!1);const t=n.listen(f,i,a);u.push(a,t),c&&c.push(i,g,p,p+1)}}else a=Vo(r,e,0,a,!0),f.addEventListener(i,a,o),u.push(a),c&&c.push(i,g,p,o)}else a=Vo(r,e,0,a,!1);const h=r.outputs;let f;if(d&&null!==h&&(f=h[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(a),o=u.length;u.push(a,t),c&&c.push(i,r.index,o,-(o+1))}}}(a,i,i[11],o,t,e,!!n,r),Fo}function zo(t,e,n,r){try{return!1!==n(r)}catch(i){return qa(t,i),!1}}function Vo(t,e,n,r,i){return function n(a){if(a===Function)return r;const o=2&t.flags?Te(t.index,e):e;0==(32&e[2])&&Fa(o);let s=zo(e,0,r,a),l=n.__ngNextListenerFn__;for(;l;)s=zo(e,0,l,a)&&s,l=l.__ngNextListenerFn__;return i&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function Ho(t=1){return function(t){return(Oe.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Oe.lFrame.contextLView))[8]}(t)}function jo(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const a=e[i];if("*"!==a){if(null===r?$i(t,a,!0):Yi(r,a))return i}else n=i}return n}function Bo(t){const e=Le()[16][6];if(!e.projection){const n=e.projection=tr(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?jo(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Uo(t,e=0,n){const r=Le(),i=Pe(),a=ca(i,te+t,16,null,n||null);null===a.projection&&(a.projection=e),Ve(),64!=(64&a.flags)&&function(t,e,n){Fi(e[11],0,e,n,Ti(t,n,e),Di(n.parent||e[6],n,e))}(i,r,a)}function qo(t,e,n,r,i){const a=t[n+1],o=null===e;let s=r?na(a):ia(a),l=!1;for(;0!==s&&(!1===l||o);){const n=t[s+1];Go(t[s],e)&&(l=!0,t[s+1]=r?oa(n):ra(n)),s=r?na(n):ia(n)}l&&(t[n+1]=r?ra(a):oa(a))}function Go(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&rr(t,e)>=0}const Zo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wo(t){return t.substring(Zo.key,Zo.keyEnd)}function $o(t,e){const n=Zo.textEnd;return n===e?-1:(e=Zo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Zo.key=e,n),Yo(t,e,n))}function Yo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Xo(t,e,n){return ts(t,e,n,!1),Xo}function Qo(t,e){return ts(t,e,null,!0),Qo}function Ko(t){!function(t,e,n,r){const i=Pe(),a=Ge(2);i.firstUpdatePass&&ns(i,null,a,r);const o=Le();if(n!==Ki&&ko(o,a,n)){const s=i.data[an()];if(ls(s,r)&&!es(i,a)){let t=s.classesWithoutHost;null!==t&&(n=it(t,n||"")),Oo(i,s,o,n,r)}else!function(t,e,n,r,i,a,o,s){i===Ki&&(i=Rt);let l=0,c=0,u=0<i.length?i[0]:null,d=0<a.length?a[0]:null;for(;null!==u||null!==d;){const o=l<i.length?i[l+1]:void 0,h=c<a.length?a[c+1]:void 0;let f,p=null;u===d?(l+=2,c+=2,o!==h&&(p=d,f=h)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,f=h),null!==p&&as(t,e,n,r,p,f,true,s),u=l<i.length?i[l]:null,d=c<a.length?a[c]:null}}(i,s,o,o[11],o[a+1],o[a+1]=function(t,e,n){if(null==n||""===n)return Rt;const r=[],i=Cr(n);if(Array.isArray(i))for(let a=0;a<i.length;a++)t(r,i[a],!0);else if("object"==typeof i)for(const a in i)i.hasOwnProperty(a)&&t(r,a,i[a]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,a)}}(er,Jo,t,!0)}function Jo(t,e){for(let n=function(t){return function(t){Zo.key=0,Zo.keyEnd=0,Zo.value=0,Zo.valueEnd=0,Zo.textEnd=t.length}(t),$o(t,Yo(t,0,Zo.textEnd))}(e);n>=0;n=$o(e,n))er(t,Wo(e),!0)}function ts(t,e,n,r){const i=Le(),a=Pe(),o=Ge(2);a.firstUpdatePass&&ns(a,t,o,r),e!==Ki&&ko(i,o,e)&&as(a,a.data[an()],i,i[11],t,i[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=rt(Cr(t)))),t}(e,n),r,o)}function es(t,e){return e>=t.expandoStartIndex}function ns(t,e,n,r){const i=t.data;if(null===i[n+1]){const a=i[an()],o=es(t,n);ls(a,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Oe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let a=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=is(n=rs(null,t,e,n,r),e.attrs,r),a=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=rs(i,t,e,n,r),null===a){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ia(r))return t[na(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=rs(null,t,e,n[1],r),n=is(n,e.attrs,r),function(t,e,n,r){t[na(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else a=function(t,e,n){let r;const i=e.directiveEnd;for(let a=1+e.directiveStylingLast;a<i;a++)r=is(r,t[a].hostAttrs,n);return is(r,e.attrs,n)}(t,e,r)}return void 0!==a&&(r?e.residualClasses=a:e.residualStyles=a),n}(i,a,e,r),function(t,e,n,r,i,a){let o=a?e.classBindings:e.styleBindings,s=na(o),l=ia(o);t[r]=n;let c,u=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||rr(t,c)>0)&&(u=!0)}else c=n;if(i)if(0!==l){const e=na(t[s+1]);t[r+1]=ea(e,s),0!==e&&(t[e+1]=aa(t[e+1],r)),t[s+1]=131071&t[s+1]|r<<17}else t[r+1]=ea(s,0),0!==s&&(t[s+1]=aa(t[s+1],r)),s=r;else t[r+1]=ea(l,0),0===s?s=r:t[l+1]=aa(t[l+1],r),l=r;u&&(t[r+1]=ra(t[r+1])),qo(t,c,r,!0),qo(t,c,r,!1),function(t,e,n,r,i){const a=i?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof e&&rr(a,e)>=0&&(n[r+1]=oa(n[r+1]))}(e,c,t,r,a),o=ea(s,l),a?e.classBindings=o:e.styleBindings=o}(i,a,e,n,o,r)}}function rs(t,e,n,r,i){let a=null;const o=n.directiveEnd;let s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(a=e[s],r=is(r,a.hostAttrs,i),a!==t);)s++;return null!==t&&(n.directiveStylingLast=s),r}function is(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let a=0;a<e.length;a++){const o=e[a];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),er(t,o,!!n||e[++a]))}return void 0===t?null:t}function as(t,e,n,r,i,a,o,s){if(!(3&e.type))return;const l=t.data,c=l[s+1];ss(1==(1&c)?os(l,e,n,i,ia(c),o):void 0)||(ss(a)||2==(2&c)&&(a=os(l,null,n,i,s,o)),function(t,e,n,r,i){const a=ve(t);if(e)i?a?t.addClass(n,r):n.classList.add(r):a?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:hi.DashCase;if(null==i)a?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),e|=hi.Important),a?t.setStyle(n,r,i,e):n.style.setProperty(r,i,o?"important":"")}}}(r,o,xe(an(),n),i,a))}function os(t,e,n,r,i,a){const o=null===e;let s;for(;i>0;){const e=t[i],a=Array.isArray(e),l=a?e[1]:e,c=null===l;let u=n[i+1];u===Ki&&(u=c?Rt:void 0);let d=c?nr(u,r):l===r?u:void 0;if(a&&!ss(d)&&(d=nr(e,r)),ss(d)&&(s=d,o))return s;const h=t[i+1];i=o?na(h):ia(h)}if(null!==e){let t=a?e.residualClasses:e.residualStyles;null!=t&&(s=nr(t,r))}return s}function ss(t){return void 0!==t}function ls(t,e){return 0!=(t.flags&(e?16:32))}function cs(t,e=""){const n=Le(),r=Pe(),i=t+te,a=r.firstCreatePass?ca(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return ve(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Ei(r,n,o,a),Fe(a,!1)}function us(t){return ds("",t,""),us}function ds(t,e,n){const r=Le(),i=function(t,e,n,r){return ko(t,qe(),n)?e+ut(n)+r:Ki}(r,t,e,n);return i!==Ki&&Za(r,an(),i),ds}function hs(t,e,n,r,i){const a=Le(),o=function(t,e,n,r,i,a){const o=To(t,Ue(),n,i);return Ge(2),o?e+ut(n)+r+ut(i)+a:Ki}(a,t,e,n,r,i);return o!==Ki&&Za(a,an(),o),hs}function fs(t,e,n){const r=Le();return ko(r,qe(),e)&&_a(Pe(),sn(),r,t,e,r[11],n,!0),fs}const ps=void 0;var gs=["en",[["a","p"],["AM","PM"],ps],[["AM","PM"],ps,ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ps,"{1} 'at' {0}",ps],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ms={};function vs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ys(e);if(n)return n;const r=e.split("-")[0];if(n=ys(r),n)return n;if("en"===r)return gs;throw new Error(`Missing locale data for the locale "${t}".`)}function ys(t){return t in ms||(ms[t]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[t]),ms[t]}var bs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const xs="en-US";let _s=xs;function ws(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(_s=t.toLowerCase().replace(/_/g,"-"))}function ks(t,e,n,r,i){if(t=st(t),Array.isArray(t))for(let a=0;a<t.length;a++)ks(t[a],e,n,r,i);else{const a=Pe(),o=Le();let s=so(t)?t:st(t.provide),l=io(t);const c=Re(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(so(t)||!t.multi){const r=new gn(l,i,So),f=As(s,e,i?u:u+h,d);-1===f?(En(Cn(c,o),a,s),Ts(a,t,e.length),e.push(s),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=As(s,e,u+h,d),p=As(s,e,u,u+h),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){En(Cn(c,o),a,s);const u=function(t,e,n,r,i){const a=new gn(t,n,So);return a.multi=[],a.index=e,a.componentProviders=0,Ms(a,i,r&&!n),a}(i?Ss:Cs,n.length,i,r,l);!i&&m&&(n[p].providerFactory=u),Ts(a,t,e.length,0),e.push(s),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(u),o.push(u)}else Ts(a,t,f>-1?f:p,Ms(n[i?p:f],l,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Ts(t,e,n,r){const i=so(e);if(i||e.useClass){const a=(e.useClass||e).prototype.ngOnDestroy;if(a){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,a]):o[t+1].push(r,a)}else o.push(n,a)}}}function Ms(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function As(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Cs(t,e,n,r){return Ds(this.multi,[])}function Ss(t,e,n,r){const i=this.multi;let a;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Vn(n,n[1],this.providerFactory.index,r);a=e.slice(0,t),Ds(i,a);for(let n=t;n<e.length;n++)a.push(e[n])}else a=[],Ds(i,a);return a}function Ds(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Os(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Pe();if(r.firstCreatePass){const i=se(t);ks(n,r.data,r.blueprint,i,!0),ks(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Es{}class Ls{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${rt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ps=(()=>{class t{}return t.NULL=new Ls,t})();function Is(...t){}function Rs(t,e){return new Fs(_e(t,e))}const Ns=function(){return Rs(Re(),Le())};let Fs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ns,t})();function zs(t){return t instanceof Fs?t.nativeElement:t}class Vs{}let Hs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>js(),t})();const js=function(){const t=Le(),e=Te(Re().index,t);return function(t){return t[11]}(ne(e)?e:t)};let Bs=(()=>{class t{}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>null}),t})();class Us{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const qs=new Us("12.0.2");class Gs{constructor(){}supports(t){return xo(t)}create(t){return new Ws(t)}}const Zs=(t,e)=>e;class Ws{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Zs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const a=!n||e&&e.currentIndex<Qs(n,r,i)?e:n,o=Qs(a,r,i),s=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(e=e._next,null==a.previousIndex)r++;else{i||(i=[]);const t=o-r,e=s-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,a=r+n;e<=a&&a<t&&(i[n]=r+1)}i[a.previousIndex]=e-t}}o!==s&&t(a,o,s)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!xo(t))throw new Error(`Error trying to diff '${rt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(a&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),a=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[yo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(a&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),a=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new $s(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Xs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Xs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class $s{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ys{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Xs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ys,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ks{constructor(){}supports(t){return t instanceof Map||_o(t)}create(){return new Js}}class Js{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||_o(t)))throw new Error(`Error trying to diff '${rt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new tl(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class tl{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function el(){return new nl([new Gs])}let nl=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||el()),deps:[[t,new mr,new gr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ft({token:t,providedIn:"root",factory:el}),t})();function rl(){return new il([new Ks])}let il=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||rl()),deps:[[t,new mr,new gr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ft({token:t,providedIn:"root",factory:rl}),t})();function al(t,e,n,r,i=!1){for(;null!==n;){const a=e[n.index];if(null!==a&&r.push(be(a)),re(a))for(let t=ee;t<a.length;t++){const e=a[t],n=e[1].firstChild;null!==n&&al(e[1],e,n,r)}const o=n.type;if(8&o)al(t,e,n.child,r);else if(32&o){const t=fi(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Pi(e,n);if(Array.isArray(t))r.push(...t);else{const n=pi(e[16]);al(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ol{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return al(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(re(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(_i(t,n),Jn(e,n))}this._attachedToViewContainer=!1}wi(this._lView[1],this._lView)}onDestroy(t){ba(this._lView[1],this._lView,null,t)}markForCheck(){Fa(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){za(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){je(!0);try{za(t,e,n)}finally{je(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Ni(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class sl extends ol{constructor(t){super(t),this._view=t}detectChanges(){Va(this._view)}checkNoChanges(){!function(t){je(!0);try{Va(t)}finally{je(!1)}}(this._view)}get context(){return null}}const ll=function(t){return function(t,e,n){if(ae(t)&&!n){const n=Te(t.index,e);return new ol(n,n)}return 47&t.type?new ol(e[16],e):null}(Re(),Le(),16==(16&t))};let cl=(()=>{class t{}return t.__NG_ELEMENT_ID__=ll,t})();const ul=[new Ks],dl=new nl([new Gs]),hl=new il(ul),fl=function(){return vl(Re(),Le())};let pl=(()=>{class t{}return t.__NG_ELEMENT_ID__=fl,t})();const gl=pl,ml=class extends gl{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=la(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),da(e,n,t),new ol(n)}};function vl(t,e){return 4&t.type?new ml(e,t,Rs(t,e)):null}class yl{}class bl{}const xl=function(){return Al(Re(),Le())};let _l=(()=>{class t{}return t.__NG_ELEMENT_ID__=xl,t})();const wl=_l,kl=class extends wl{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Rs(this._hostTNode,this._hostLView)}get injector(){return new Bn(this._hostTNode,this._hostLView)}get parentInjector(){const t=On(this._hostTNode,this._hostLView);if(_n(t)){const e=kn(t,this._hostLView),n=wn(t);return new Bn(e[1].data[n+8],e)}return new Bn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Tl(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ee}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const a=n||this.parentInjector;if(!i&&null==t.ngModule&&a){const t=a.get(yl,null);t&&(i=t)}const o=t.create(a,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(re(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new kl(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),a=this._lContainer;!function(t,e,n,r){const i=ee+r,a=n.length;r>0&&(n[i-1][4]=e),r<a-ee?(e[4]=n[i],Kn(n,ee+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const s=e[19];null!==s&&s.insertView(t),e[2]|=128}(r,n,a,i);const o=Ii(i,a),s=n[11],l=Si(s,a[7]);return null!==l&&function(t,e,n,r,i,a){r[0]=i,r[6]=e,Ni(t,r,n,1,i,a)}(r,a[6],s,n,l,o),t.attachToViewContainerRef(),Kn(Ml(a),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Tl(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=_i(this._lContainer,e);n&&(Jn(Ml(this._lContainer),e),wi(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=_i(this._lContainer,e);return n&&null!=Jn(Ml(this._lContainer),e)?new ol(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Tl(t){return t[8]}function Ml(t){return t[8]||(t[8]=[])}function Al(t,e){let n;const r=e[t.index];if(re(r))n=r;else{let i;if(8&t.type)i=be(r);else{const n=e[11];i=n.createComment("");const r=_e(t,e);Mi(n,Si(n,r),i,function(t,e){return ve(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=La(r,e,i,t),Na(e,n)}return new kl(n,t,e)}const Cl={};class Sl extends Ps{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Kt(t);return new El(e,this.ngModule)}}function Dl(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ol=new Wn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ci});class El extends Es{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Qi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Dl(this.componentDef.inputs)}get outputs(){return Dl(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const a=t.get(n,Cl,i);return a!==Cl||r===Cl?a:e.get(n,r,i)}}}(t,r.injector):t,a=i.get(Vs,ye),o=i.get(Bs,null),s=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(ve(t))return t.selectRootElement(e,n===St.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(s,n,this.componentDef.encapsulation):bi(a.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,d={components:[],scheduler:ci,clean:ja,playerHandler:null,flags:0},h=ya(0,null,null,1,0,null,null,null,null,null),f=la(null,h,d,u,null,null,a,s,o,i);let p,g;Ke(f);try{const t=function(t,e,n,r,i,a){const o=n[1];n[20]=t;const s=ca(o,20,2,"#host",null),l=s.mergedAttrs=e.hostAttrs;null!==l&&(Wa(s,l,!0),null!==t&&(mn(i,t,l),null!==s.classes&&Vi(i,t,s.classes),null!==s.styles&&zi(i,t,s.styles)));const c=r.createRenderer(t,e),u=la(n,va(e),null,e.onPush?64:16,n[20],s,r,c,null,null);return o.firstCreatePass&&(En(Cn(s,n),o,e.type),Ma(o,s),Ca(s,n.length,1)),Na(n,u),n[20]=u}(c,this.componentDef,f,a,s);if(c)if(n)mn(s,c,["ng-version",qs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let a=t[r];if("string"==typeof a)2===i?""!==a&&e.push(a,t[++r]):8===i&&n.push(a);else{if(!Zi(i))break;i=a}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&mn(s,c,t),e&&e.length>0&&Vi(s,c,e.join(" "))}if(g=we(h,te),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const a=n[1],o=function(t,e,n){const r=Re();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Sa(t,r,e,ua(t,e,1,null),n));const i=Vn(e,t,r.directiveStart,r);ri(i,e);const a=_e(r,e);return a&&ri(a,e),i}(a,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Re();e.contentQueries(1,o,t.directiveStart)}const s=Re();return!a.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(on(s.index),ka(n[1],s,0,s.directiveStart,s.directiveEnd,e),Ta(e,o)),o}(t,this.componentDef,f,d,[uo]),da(h,f,null)}finally{rn()}return new Ll(this.componentType,p,Rs(g,f),f,g)}}class Ll extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new sl(r),this.componentType=t}get injector(){return new Bn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Pl=new Map;class Il extends yl{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Sl(this);const n=Jt(t),r=t[Ht]||null;r&&ws(r),this._bootstrapComponents=di(n.bootstrap),this._r3Injector=eo(t,e,[{provide:yl,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],rt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=co.THROW_IF_NOT_FOUND,n=wt.Default){return t===co||t===yl||t===$a?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Rl extends bl{constructor(t){super(),this.moduleType=t,null!==Jt(t)&&function(t){const e=new Set;!function t(n){const r=Jt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${rt(e)} vs ${rt(e.name)}`)}(i,Pl.get(i),n),Pl.set(i,n));const a=di(r.imports);for(const o of a)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Il(this.moduleType,t)}}function Nl(t,e,n){const r=Be()+t,i=Le();return i[r]===Ki?wo(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Fl(t,e,n,r,i){return Hl(Le(),Be(),t,e,n,r,i)}function zl(t,e,n,r,i,a){return function(t,e,n,r,i,a,o,s){const l=e+n;return function(t,e,n,r,i){const a=To(t,e,n,r);return ko(t,e+2,i)||a}(t,l,i,a,o)?wo(t,l+3,s?r.call(s,i,a,o):r(i,a,o)):Vl(t,l+3)}(Le(),Be(),t,e,n,r,i,a)}function Vl(t,e){const n=t[e];return n===Ki?void 0:n}function Hl(t,e,n,r,i,a,o){const s=e+n;return To(t,s,i,a)?wo(t,s+2,o?r.call(o,i,a):r(i,a)):Vl(t,s+2)}function jl(t,e){const n=Pe();let r;const i=t+te;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new ct("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const a=r.factory||(r.factory=le(r.type)),o=Tt(So);try{const t=Mn(!1),e=a();return Mn(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Le(),i,e),e}finally{Tt(o)}}function Bl(t,e,n,r){const i=t+te,a=Le(),o=ke(a,i);return function(t,e){return bo.isWrapped(e)&&(e=bo.unwrap(e),t[Ue()]=Ki),e}(a,function(t,e){return t[1].data[e].pure}(a,i)?Hl(a,Be(),e,o.transform,n,r,o):o.transform(n,r))}function Ul(t){return e=>{setTimeout(t,void 0,e)}}const ql=class extends k{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,i,a;let o=t,s=e||(()=>null),l=n;if(t&&"object"==typeof t){const e=t;o=null===(r=e.next)||void 0===r?void 0:r.bind(e),s=null===(i=e.error)||void 0===i?void 0:i.bind(e),l=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}this.__isAsync&&(s=Ul(s),o&&(o=Ul(o)),l&&(l=Ul(l)));const c=super.subscribe({next:o,error:s,complete:l});return t instanceof d&&t.add(c),c}};function Gl(){return this._results[yo()]()}class Zl{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=yo(),n=Zl.prototype;n[e]||(n[e]=Gl)}get changes(){return this._changes||(this._changes=new ql)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Xn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],a=e[r];if(n&&(i=n(i),a=n(a)),a!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Wl{constructor(t){this.queryList=t,this.matches=null}clone(){return new Wl(this.queryList)}setDirty(){this.queryList.setDirty()}}class $l{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new $l(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==sc(t,e).matches&&this.queries[e].setDirty()}}class Yl{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Xl{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Xl(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ql{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ql(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Kl(e,i)),this.matchTNodeWithReadOption(t,e,zn(e,t,i,!1,!1))}else n===pl?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,zn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Fs||r===_l||r===pl&&4&e.type)this.addMatch(e.index,-2);else{const n=zn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Kl(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Jl(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Rs(t,e):4&t.type?vl(t,e):null}(e,t):-2===n?function(t,e,n){return n===Fs?Rs(e,t):n===pl?vl(e,t):n===_l?Al(e,t):void 0}(t,e,r):Vn(t,t[1],n,e)}function tc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,a=n.matches,o=[];for(let t=0;t<a.length;t+=2){const i=a[t];o.push(i<0?null:Jl(e,r[i],a[t+1],n.metadata.read))}i.matches=o}return i.matches}function ec(t,e,n,r){const i=t.queries.getByIndex(n),a=i.matches;if(null!==a){const o=tc(t,e,i,n);for(let t=0;t<a.length;t+=2){const n=a[t];if(n>0)r.push(o[t/2]);else{const i=a[t+1],o=e[-n];for(let t=ee;t<o.length;t++){const e=o[t];e[17]===e[3]&&ec(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];ec(n[1],n,i,r)}}}}}return r}function nc(t){const e=Le(),n=Pe(),r=$e();Ye(r+1);const i=sc(n,r);if(t.dirty&&Me(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const a=i.crossesNgTemplate?ec(n,e,r,[]):tc(n,e,i,r);t.reset(a,zs),t.notifyOnChanges()}return!0}return!1}function rc(t,e,n,r){const i=Pe();if(i.firstCreatePass){const a=Re();oc(i,new Yl(e,n,r),a.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}ac(i,Le(),n)}function ic(){return t=Le(),e=$e(),t[19].queries[e].queryList;var t,e}function ac(t,e,n){const r=new Zl(4==(4&n));ba(t,e,r,r.destroy),null===e[19]&&(e[19]=new $l),e[19].queries.push(new Wl(r))}function oc(t,e,n){null===t.queries&&(t.queries=new Xl),t.queries.track(new Ql(e,n))}function sc(t,e){return t.queries.getByIndex(e)}const lc=new Wn("Application Initializer");let cc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Is,this.reject=Is,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Ro(e))t.push(e);else if(No(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(dr(lc,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const uc=new Wn("AppId"),dc={provide:uc,useFactory:function(){return`${hc()}${hc()}${hc()}`},deps:[]};function hc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fc=new Wn("Platform Initializer"),pc=new Wn("Platform ID"),gc=new Wn("appBootstrapListener");let mc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const vc=new Wn("LocaleId"),yc=new Wn("DefaultCurrencyCode");class bc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const xc=function(t){return new Rl(t)},_c=xc,wc=function(t){return Promise.resolve(xc(t))},kc=function(t){const e=xc(t),n=di(Jt(t).declarations).reduce((t,e)=>{const n=Kt(e);return n&&t.push(new El(n)),t},[]);return new bc(e,n)},Tc=kc,Mc=function(t){return Promise.resolve(kc(t))};let Ac=(()=>{class t{constructor(){this.compileModuleSync=_c,this.compileModuleAsync=wc,this.compileModuleAndAllComponentsSync=Tc,this.compileModuleAndAllComponentsAsync=Mc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Cc=(()=>Promise.resolve(0))();function Sc(t){"undefined"==typeof Zone?Cc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Dc{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ql(!1),this.onMicrotaskEmpty=new ql(!1),this.onStable=new ql(!1),this.onError=new ql(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=Pt.requestAnimationFrame,e=Pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Pt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Lc(t),t.isCheckStableRunning=!0,Ec(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Lc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,a,o,s)=>{try{return Pc(t),n.invokeTask(i,a,o,s)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&e(),Ic(t)}},onInvoke:(n,r,i,a,o,s,l)=>{try{return Pc(t),n.invoke(i,a,o,s,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ic(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Lc(t),Ec(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Dc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,t,Oc,Is,Is);try{return i.runTask(a,e,n)}finally{i.cancelTask(a)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Oc={};function Ec(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Lc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Pc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ic(t){t._nesting--,Ec(t)}class Rc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ql,this.onMicrotaskEmpty=new ql,this.onStable=new ql,this.onError=new ql}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Nc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dc.assertNotInAngularZone(),Sc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Sc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(dr(Dc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Fc=(()=>{class t{constructor(){this._applications=new Map,Hc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Hc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class zc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Vc,Hc=new zc,jc=!0,Bc=!1;const Uc=new Wn("AllowMultipleToken");class qc{constructor(t,e){this.name=t,this.token=e}}function Gc(t,e,n=[]){const r=`Platform: ${e}`,i=new Wn(r);return(e=[])=>{let a=Zc();if(!a||a.injector.get(Uc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Xa,useValue:"platform"});!function(t){if(Vc&&!Vc.destroyed&&!Vc.injector.get(Uc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Vc=t.get(Wc);const e=t.get(fc,null);e&&e.forEach(t=>t())}(co.create({providers:t,name:r}))}return function(t){const e=Zc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Zc(){return Vc&&!Vc.destroyed?Vc:null}let Wc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Rc:("zone.js"===t?void 0:t)||new Dc({enableLongStackTrace:(Bc=!0,jc),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Dc,useValue:n}];return n.run(()=>{const e=co.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),a=i.injector.get(li,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{a.handleError(t)}});i.onDestroy(()=>{Xc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ro(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,n,()=>{const t=i.injector.get(cc);return t.runInitializers(),t.donePromise.then(()=>(ws(i.injector.get(vc,xs)||xs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=$c({},e);return function(t,e,n){const r=new Rl(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Yc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${rt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(dr(co))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function $c(t,e){return Array.isArray(e)?e.reduce($c,t):Object.assign(Object.assign({},t),e)}let Yc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),o=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Dc.assertNotInAngularZone(),Sc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Dc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=G(a,o.pipe(t=>Z()(K(tt)(t))))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Es?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(yl),i=n.create(co.NULL,[],e||n.selector,r),a=i.location.nativeElement,o=i.injector.get(Nc,null),s=o&&i.injector.get(Fc);return o&&s&&s.registerApplication(a,o),i.onDestroy(()=>{this.detachView(i.hostView),Xc(this.components,i),s&&s.unregisterApplication(a)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Xc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(gc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(dr(Dc),dr(co),dr(li),dr(Ps),dr(cc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function Xc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Qc{}class Kc{}const Jc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let tu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Jc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(566)(e).then(t=>t[r]).then(t=>eu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(566)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>eu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(dr(Ac),dr(Kc,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function eu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const nu=Gc(null,"core",[{provide:pc,useValue:"unknown"},{provide:Wc,deps:[co]},{provide:Fc,deps:[]},{provide:mc,deps:[]}]),ru=[{provide:Yc,useClass:Yc,deps:[Dc,co,li,Ps,cc]},{provide:Ol,deps:[Dc],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:cc,useClass:cc,deps:[[new gr,lc]]},{provide:Ac,useClass:Ac,deps:[]},dc,{provide:nl,useFactory:function(){return dl},deps:[]},{provide:il,useFactory:function(){return hl},deps:[]},{provide:vc,useFactory:function(t){return ws(t=t||"undefined"!=typeof $localize&&$localize.locale||xs),t},deps:[[new pr(vc),new gr,new mr]]},{provide:yc,useValue:"USD"}];let iu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(dr(Yc))},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:ru}),t})(),au=null;function ou(){return au}const su=new Wn("DocumentToken");let lu=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:cu,token:t,providedIn:"platform"}),t})();function cu(){return dr(du)}const uu=new Wn("Location Initialized");let du=(()=>{class t extends lu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ou().getBaseHref(this._doc)}onPopState(t){const e=ou().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=ou().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){hu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){hu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(dr(su))},t.\u0275prov=ft({factory:fu,token:t,providedIn:"platform"}),t})();function hu(){return!!window.history.pushState}function fu(){return new du(dr(su))}function pu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function gu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function mu(t){return t&&"?"!==t[0]?"?"+t:t}let vu=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:yu,token:t,providedIn:"root"}),t})();function yu(t){const e=dr(su).location;return new xu(dr(lu),e&&e.origin||"")}const bu=new Wn("appBaseHref");let xu=(()=>{class t extends vu{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return pu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+mu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+mu(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+mu(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(dr(lu),dr(bu,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),_u=(()=>{class t extends vu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=pu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+mu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+mu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(dr(lu),dr(bu,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),wu=(()=>{class t{constructor(t,e){this._subject=new ql,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=gu(Tu(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+mu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Tu(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(dr(vu),dr(lu))},t.normalizeQueryParams=mu,t.joinWithSlash=pu,t.stripTrailingSlash=gu,t.\u0275prov=ft({factory:ku,token:t,providedIn:"root"}),t})();function ku(){return new wu(dr(vu),dr(lu))}function Tu(t){return t.replace(/\/index.html$/,"")}var Mu=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),Au=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),Cu=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),Su=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),Du=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),Ou=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function Eu(t,e){return Nu(vs(t)[bs.DateFormat],e)}function Lu(t,e){return Nu(vs(t)[bs.TimeFormat],e)}function Pu(t,e){return Nu(vs(t)[bs.DateTimeFormat],e)}function Iu(t,e){const n=vs(t),r=n[bs.NumberSymbols][e];if(void 0===r){if(e===Ou.CurrencyDecimal)return n[bs.NumberSymbols][Ou.Decimal];if(e===Ou.CurrencyGroup)return n[bs.NumberSymbols][Ou.Group]}return r}function Ru(t){if(!t[bs.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[bs.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Nu(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function Fu(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const zu=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vu={},Hu=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ju=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),Bu=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),Uu=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function qu(t,e,n,r){let i=function(t){if(rd(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return Gu(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(zu))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,a=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,s=Number(t[5]||0)-r,l=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return a.call(e,o,s,l,c),e}(n)}const e=new Date(t);if(!rd(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=Zu(n,e)||e;let a,o=[];for(;e;){if(a=Hu.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const t=o.pop();if(!t)break;e=t}}let s=i.getTimezoneOffset();r&&(s=nd(r,s),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(nd(e,r)-r))}(i,r));let l="";return o.forEach(t=>{const e=function(t){if(ed[t])return ed[t];let e;switch(t){case"G":case"GG":case"GGG":e=Xu(Uu.Eras,Su.Abbreviated);break;case"GGGG":e=Xu(Uu.Eras,Su.Wide);break;case"GGGGG":e=Xu(Uu.Eras,Su.Narrow);break;case"y":e=Yu(Bu.FullYear,1,0,!1,!0);break;case"yy":e=Yu(Bu.FullYear,2,0,!0,!0);break;case"yyy":e=Yu(Bu.FullYear,3,0,!1,!0);break;case"yyyy":e=Yu(Bu.FullYear,4,0,!1,!0);break;case"Y":e=td(1);break;case"YY":e=td(2,!0);break;case"YYY":e=td(3);break;case"YYYY":e=td(4);break;case"M":case"L":e=Yu(Bu.Month,1,1);break;case"MM":case"LL":e=Yu(Bu.Month,2,1);break;case"MMM":e=Xu(Uu.Months,Su.Abbreviated);break;case"MMMM":e=Xu(Uu.Months,Su.Wide);break;case"MMMMM":e=Xu(Uu.Months,Su.Narrow);break;case"LLL":e=Xu(Uu.Months,Su.Abbreviated,Cu.Standalone);break;case"LLLL":e=Xu(Uu.Months,Su.Wide,Cu.Standalone);break;case"LLLLL":e=Xu(Uu.Months,Su.Narrow,Cu.Standalone);break;case"w":e=Ju(1);break;case"ww":e=Ju(2);break;case"W":e=Ju(1,!0);break;case"d":e=Yu(Bu.Date,1);break;case"dd":e=Yu(Bu.Date,2);break;case"c":case"cc":e=Yu(Bu.Day,1);break;case"ccc":e=Xu(Uu.Days,Su.Abbreviated,Cu.Standalone);break;case"cccc":e=Xu(Uu.Days,Su.Wide,Cu.Standalone);break;case"ccccc":e=Xu(Uu.Days,Su.Narrow,Cu.Standalone);break;case"cccccc":e=Xu(Uu.Days,Su.Short,Cu.Standalone);break;case"E":case"EE":case"EEE":e=Xu(Uu.Days,Su.Abbreviated);break;case"EEEE":e=Xu(Uu.Days,Su.Wide);break;case"EEEEE":e=Xu(Uu.Days,Su.Narrow);break;case"EEEEEE":e=Xu(Uu.Days,Su.Short);break;case"a":case"aa":case"aaa":e=Xu(Uu.DayPeriods,Su.Abbreviated);break;case"aaaa":e=Xu(Uu.DayPeriods,Su.Wide);break;case"aaaaa":e=Xu(Uu.DayPeriods,Su.Narrow);break;case"b":case"bb":case"bbb":e=Xu(Uu.DayPeriods,Su.Abbreviated,Cu.Standalone,!0);break;case"bbbb":e=Xu(Uu.DayPeriods,Su.Wide,Cu.Standalone,!0);break;case"bbbbb":e=Xu(Uu.DayPeriods,Su.Narrow,Cu.Standalone,!0);break;case"B":case"BB":case"BBB":e=Xu(Uu.DayPeriods,Su.Abbreviated,Cu.Format,!0);break;case"BBBB":e=Xu(Uu.DayPeriods,Su.Wide,Cu.Format,!0);break;case"BBBBB":e=Xu(Uu.DayPeriods,Su.Narrow,Cu.Format,!0);break;case"h":e=Yu(Bu.Hours,1,-12);break;case"hh":e=Yu(Bu.Hours,2,-12);break;case"H":e=Yu(Bu.Hours,1);break;case"HH":e=Yu(Bu.Hours,2);break;case"m":e=Yu(Bu.Minutes,1);break;case"mm":e=Yu(Bu.Minutes,2);break;case"s":e=Yu(Bu.Seconds,1);break;case"ss":e=Yu(Bu.Seconds,2);break;case"S":e=Yu(Bu.FractionalSeconds,1);break;case"SS":e=Yu(Bu.FractionalSeconds,2);break;case"SSS":e=Yu(Bu.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Qu(ju.Short);break;case"ZZZZZ":e=Qu(ju.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Qu(ju.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Qu(ju.Long);break;default:return null}return ed[t]=e,e}(t);l+=e?e(i,n,s):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Gu(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Zu(t,e){const n=function(t){return vs(t)[bs.LocaleId]}(t);if(Vu[n]=Vu[n]||{},Vu[n][e])return Vu[n][e];let r="";switch(e){case"shortDate":r=Eu(t,Du.Short);break;case"mediumDate":r=Eu(t,Du.Medium);break;case"longDate":r=Eu(t,Du.Long);break;case"fullDate":r=Eu(t,Du.Full);break;case"shortTime":r=Lu(t,Du.Short);break;case"mediumTime":r=Lu(t,Du.Medium);break;case"longTime":r=Lu(t,Du.Long);break;case"fullTime":r=Lu(t,Du.Full);break;case"short":const e=Zu(t,"shortTime"),n=Zu(t,"shortDate");r=Wu(Pu(t,Du.Short),[e,n]);break;case"medium":const i=Zu(t,"mediumTime"),a=Zu(t,"mediumDate");r=Wu(Pu(t,Du.Medium),[i,a]);break;case"long":const o=Zu(t,"longTime"),s=Zu(t,"longDate");r=Wu(Pu(t,Du.Long),[o,s]);break;case"full":const l=Zu(t,"fullTime"),c=Zu(t,"fullDate");r=Wu(Pu(t,Du.Full),[l,c])}return r&&(Vu[n][e]=r),r}function Wu(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function $u(t,e,n="-",r,i){let a="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,a=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),a+o}function Yu(t,e,n=0,r=!1,i=!1){return function(a,o){let s=function(t,e){switch(t){case Bu.FullYear:return e.getFullYear();case Bu.Month:return e.getMonth();case Bu.Date:return e.getDate();case Bu.Hours:return e.getHours();case Bu.Minutes:return e.getMinutes();case Bu.Seconds:return e.getSeconds();case Bu.FractionalSeconds:return e.getMilliseconds();case Bu.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,a);if((n>0||s>-n)&&(s+=n),t===Bu.Hours)0===s&&-12===n&&(s=12);else if(t===Bu.FractionalSeconds)return l=e,$u(s,3).substr(0,l);var l;const c=Iu(o,Ou.MinusSign);return $u(s,e,c,r,i)}}function Xu(t,e,n=Cu.Format,r=!1){return function(i,a){return function(t,e,n,r,i,a){switch(n){case Uu.Months:return function(t,e,n){const r=vs(t),i=Nu([r[bs.MonthsFormat],r[bs.MonthsStandalone]],e);return Nu(i,n)}(e,i,r)[t.getMonth()];case Uu.Days:return function(t,e,n){const r=vs(t),i=Nu([r[bs.DaysFormat],r[bs.DaysStandalone]],e);return Nu(i,n)}(e,i,r)[t.getDay()];case Uu.DayPeriods:const o=t.getHours(),s=t.getMinutes();if(a){const t=function(t){const e=vs(t);return Ru(e),(e[bs.ExtraData][2]||[]).map(t=>"string"==typeof t?Fu(t):[Fu(t[0]),Fu(t[1])])}(e),n=function(t,e,n){const r=vs(t);Ru(r);const i=Nu([r[bs.ExtraData][0],r[bs.ExtraData][1]],e)||[];return Nu(i,n)||[]}(e,i,r),a=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=o>=e.hours&&s>=e.minutes,i=o<n.hours||o===n.hours&&s<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===o&&t.minutes===s)return!0;return!1});if(-1!==a)return n[a]}return function(t,e,n){const r=vs(t),i=Nu([r[bs.DayPeriodsFormat],r[bs.DayPeriodsStandalone]],e);return Nu(i,n)}(e,i,r)[o<12?0:1];case Uu.Eras:return function(t,e){return Nu(vs(t)[bs.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,a,t,e,n,r)}}function Qu(t){return function(e,n,r){const i=-1*r,a=Iu(n,Ou.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case ju.Short:return(i>=0?"+":"")+$u(o,2,a)+$u(Math.abs(i%60),2,a);case ju.ShortGMT:return"GMT"+(i>=0?"+":"")+$u(o,1,a);case ju.Long:return"GMT"+(i>=0?"+":"")+$u(o,2,a)+":"+$u(Math.abs(i%60),2,a);case ju.Extended:return 0===r?"Z":(i>=0?"+":"")+$u(o,2,a)+":"+$u(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${t}"`)}}}function Ku(t){return Gu(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Ju(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=Ku(n),e=function(t){const e=Gu(t,0,1).getDay();return Gu(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return $u(i,t,Iu(r,Ou.MinusSign))}}function td(t,e=!1){return function(n,r){return $u(Ku(n).getFullYear(),t,Iu(r,Ou.MinusSign),e)}}const ed={};function nd(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function rd(t){return t instanceof Date&&!isNaN(t.valueOf())}const id=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ad=".",od="0";function sd(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class ld{}let cd=(()=>{class t extends ld{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return vs(t)[bs.PluralCase]}(e||this.locale)(t)){case Au.Zero:return"zero";case Au.One:return"one";case Au.Two:return"two";case Au.Few:return"few";case Au.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(dr(vc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),ud=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(xo(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${rt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(So(nl),So(il),So(Fs),So(Hs))},t.\u0275dir=Xt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class dd{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hd=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new dd(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new fd(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const a=new fd(t,i);e.push(a)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(So(_l),So(pl),So(nl))},t.\u0275dir=Xt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class fd{constructor(t,e){this.record=t,this.view=e}}let pd=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new gd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){md("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){md("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(So(_l),So(pl))},t.\u0275dir=Xt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class gd{constructor(){this.$implicit=null,this.ngIf=null}}function md(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${rt(e)}'.`)}function vd(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${rt(t)}'`)}let yd=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,i){if(null==e||""===e||e!=e)return null;try{return qu(e,n,i||this.locale,r)}catch(a){throw vd(t,a.message)}}}return t.\u0275fac=function(e){return new(e||t)(So(vc,16))},t.\u0275pipe=Qt({name:"date",type:t,pure:!0}),t})(),bd=(()=>{class t{constructor(t){this._locale=t}transform(e,n,r){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;r=r||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,a,o=!1){let s="",l=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,a,o=Math.abs(t)+"",s=0;for((n=o.indexOf(ad))>-1&&(o=o.replace(ad,"")),(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length),r=0;o.charAt(r)===od;r++);if(r===(a=o.length))e=[0],n=1;else{for(a--;o.charAt(a)===od;)a--;for(n-=r,e=[],i=0;r<=a;r++,i++)e[i]=Number(o.charAt(r))}return n>22&&(e=e.splice(0,21),s=n-1,n=1),{digits:e,exponent:s,integerLen:n}}(t);o&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(a){const t=a.match(id);if(null===t)throw new Error(`${a} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(u=sd(e)),null!=n&&(d=sd(n)),null!=r?h=sd(r):null!=n&&d>h&&(h=d)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const a=Math.min(Math.max(e,i),n);let o=a+t.integerLen,s=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let t=o;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=a+1),r[0]=0;for(let t=1;t<o;t++)r[t]=0}if(s>=5)if(o-1<0){for(let e=0;e>o;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,a);i++)r.push(0);let l=0!==a;const c=e+t.integerLen,u=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,l&&(0===r[n]&&n>=c?r.pop():l=!1),e>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}(c,d,h);let f=c.digits,p=c.integerLen;const g=c.exponent;let m=[];for(l=f.every(t=>!t);p<u;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const v=[];for(f.length>=e.lgSize&&v.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)v.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&v.unshift(f.join("")),s=v.join(Iu(n,r)),m.length&&(s+=Iu(n,i)+m.join("")),g&&(s+=Iu(n,Ou.Exponential)+"+"+g)}else s=Iu(n,Ou.Infinity);return s=t<0&&!l?e.negPre+s+e.negSuf:e.posPre+s+e.posSuf,s}(t,function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],a=r[1],o=-1!==i.indexOf(ad)?i.split(ad):[i.substring(0,i.lastIndexOf(od)+1),i.substring(i.lastIndexOf(od)+1)],s=o[0],l=o[1]||"";n.posPre=s.substr(0,s.indexOf("#"));for(let u=0;u<l.length;u++){const t=l.charAt(u);t===od?n.minFrac=n.maxFrac=u+1:"#"===t?n.maxFrac=u+1:n.posSuf+=t}const c=s.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const t=i.length-n.posPre.length-n.posSuf.length,e=a.indexOf("#");n.negPre=a.substr(0,e).replace(/'/g,""),n.negSuf=a.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return vs(t)[bs.NumberFormats][e]}(e,Mu.Decimal),Iu(e,Ou.MinusSign)),e,Ou.Group,Ou.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),r,n)}catch(i){throw vd(t,i.message)}}}return t.\u0275fac=function(e){return new(e||t)(So(vc,16))},t.\u0275pipe=Qt({name:"number",type:t,pure:!0}),t})(),xd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:[{provide:ld,useClass:cd}]}),t})();function _d(t){return"browser"===t}let wd=(()=>{class t{}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>new kd(dr(su),window)}),t})();class kd{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Td(this.window.history)||Td(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Td(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Md extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new Md,au||(au=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Cd=Cd||document.querySelector("base"),Cd?Cd.getAttribute("href"):null);return null==e?null:function(t){Ad=Ad||document.createElement("a"),Ad.setAttribute("href",t);const e=Ad.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Cd=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Ad,Cd=null;const Sd=new Wn("TRANSITION_ID"),Dd=[{provide:lc,useFactory:function(t,e,n){return()=>{n.get(cc).donePromise.then(()=>{const n=ou();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Sd,su,co],multi:!0}];class Od{static init(){var t;t=new Od,Hc=t}addToWindow(t){Pt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Pt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Pt.getAllAngularRootElements=()=>t.getAllRootElements(),Pt.frameworkStabilizers||(Pt.frameworkStabilizers=[]),Pt.frameworkStabilizers.push(t=>{const e=Pt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?ou().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Ed=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Ld=new Wn("EventManagerPlugins");let Pd=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(dr(Ld),dr(Dc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class Id{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=ou().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Rd=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Nd=(()=>{class t extends Rd{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Fd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Fd))}}return t.\u0275fac=function(e){return new(e||t)(dr(su))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function Fd(t){ou().remove(t)}const zd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Vd=/%COMP%/g;function Hd(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Hd(t,i,n):(i=i.replace(Vd,t),n.push(i))}return n}function jd(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Bd=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Ud(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case St.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new qd(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case St.ShadowDom:return new Gd(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Hd(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(dr(Pd),dr(Nd),dr(uc))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class Ud{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(zd[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=zd[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=zd[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(hi.DashCase|hi.Important)?t.style.setProperty(e,n,r&hi.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&hi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,jd(n)):this.eventManager.addEventListener(t,e,jd(n))}}class qd extends Ud{constructor(t,e,n,r){super(t),this.component=n;const i=Hd(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Vd,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Vd,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Gd extends Ud{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Hd(r.id,r.styles,[]);for(let a=0;a<i.length;a++){const t=document.createElement("style");t.textContent=i[a],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Zd=(()=>{class t extends Id{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(dr(su))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Wd=["alt","control","meta","shift"],$d={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yd={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Xd={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Qd=(()=>{class t extends Id{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),a=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ou().onAndCancel(e,i.domEventName,a))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let a="";if(Wd.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),a+=t+".")}),a+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=a,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Yd.hasOwnProperty(e)&&(e=Yd[e]))}return $d[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Wd.forEach(r=>{r!=n&&(0,Xd[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(dr(su))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Kd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return dr(th)},token:t,providedIn:"root"}),t})();function Jd(t){return new th(t.get(su))}let th=(()=>{class t extends Kd{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Jr.NONE:return e;case Jr.HTML:return Sr(e,"HTML")?Cr(e):Qr(this._doc,String(e)).toString();case Jr.STYLE:return Sr(e,"Style")?Cr(e):e;case Jr.SCRIPT:if(Sr(e,"Script"))return Cr(e);throw new Error("unsafe value used in a script context");case Jr.URL:return Dr(e),Sr(e,"URL")?Cr(e):Ir(String(e));case Jr.RESOURCE_URL:if(Sr(e,"ResourceURL"))return Cr(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new wr(t)}bypassSecurityTrustStyle(t){return new kr(t)}bypassSecurityTrustScript(t){return new Tr(t)}bypassSecurityTrustUrl(t){return new Mr(t)}bypassSecurityTrustResourceUrl(t){return new Ar(t)}}return t.\u0275fac=function(e){return new(e||t)(dr(su))},t.\u0275prov=ft({factory:function(){return Jd(dr($a))},token:t,providedIn:"root"}),t})();const eh=Gc(nu,"browser",[{provide:pc,useValue:"browser"},{provide:fc,useValue:function(){Md.makeCurrent(),Od.init()},multi:!0},{provide:su,useFactory:function(){return function(t){ge=t}(document),document},deps:[]}]),nh=[[],{provide:Xa,useValue:"root"},{provide:li,useFactory:function(){return new li},deps:[]},{provide:Ld,useClass:Zd,multi:!0,deps:[su,Dc,pc]},{provide:Ld,useClass:Qd,multi:!0,deps:[su]},[],{provide:Bd,useClass:Bd,deps:[Pd,Nd,uc]},{provide:Vs,useExisting:Bd},{provide:Rd,useExisting:Nd},{provide:Nd,useClass:Nd,deps:[su]},{provide:Nc,useClass:Nc,deps:[Dc]},{provide:Pd,useClass:Pd,deps:[Ld,Dc]},{provide:class{},useClass:Ed,deps:[]},[]];let rh=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:uc,useValue:e.appId},{provide:Sd,useExisting:uc},Dd]}}}return t.\u0275fac=function(e){return new(e||t)(dr(t,12))},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:nh,imports:[xd,iu]}),t})();function ih(t,e){return new y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let a=0,o=0;for(let s=0;s<r;s++){const l=N(t[s]);let c=!1;n.add(l.subscribe({next:t=>{c||(c=!0,o++),i[s]=t},error:t=>n.error(t),complete:()=>{a++,a!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}"undefined"!=typeof window&&window;let ah=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(So(Hs),So(Fs))},t.\u0275dir=Xt({type:t}),t})(),oh=(()=>{class t extends ah{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Un(t)))(n||t)}}(),t.\u0275dir=Xt({type:t,features:[ho]}),t})();const sh=new Wn("NgValueAccessor"),lh={provide:sh,useExisting:ot(()=>uh),multi:!0},ch=new Wn("CompositionEventMode");let uh=(()=>{class t extends ah{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=ou()?ou().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(So(Hs),So(Fs),So(ch,8))},t.\u0275dir=Xt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Fo("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[Os([lh]),ho]}),t})();function dh(t){return null==t||0===t.length}function hh(t){return null!=t&&"number"==typeof t.length}const fh=new Wn("NgValidators"),ph=new Wn("NgAsyncValidators"),gh=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class mh{static min(t){return vh(t)}static max(t){return yh(t)}static required(t){return bh(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return dh(t.value)||gh.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>dh(e.value)||!hh(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>hh(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return xh;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(dh(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Ah(t)}static composeAsync(t){return Sh(t)}}function vh(t){return e=>{if(dh(e.value)||dh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function yh(t){return e=>{if(dh(e.value)||dh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function bh(t){return dh(t.value)?{required:!0}:null}function xh(t){return null}function _h(t){return null!=t}function wh(t){const e=Ro(t)?N(t):t;return No(e),e}function kh(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Th(t,e){return e.map(e=>e(t))}function Mh(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Ah(t){if(!t)return null;const e=t.filter(_h);return 0==e.length?null:function(t){return kh(Th(t,e))}}function Ch(t){return null!=t?Ah(Mh(t)):null}function Sh(t){if(!t)return null;const e=t.filter(_h);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(l(e))return ih(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return ih(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return ih(t=1===t.length&&l(t[0])?t[0]:t,null).pipe(A(t=>e(...t)))}return ih(t,null)}(Th(t,e).map(wh)).pipe(A(kh))}}function Dh(t){return null!=t?Sh(Mh(t)):null}function Oh(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Eh=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Ch(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Dh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t}),t})(),Lh=(()=>{class t extends Eh{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Un(t)))(n||t)}}(),t.\u0275dir=Xt({type:t,features:[ho]}),t})();class Ph extends Eh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ih{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Rh=(()=>{class t extends Ih{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(So(Ph,2))},t.\u0275dir=Xt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Qo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[ho]}),t})(),Nh=(()=>{class t extends Ih{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(So(Lh,10))},t.\u0275dir=Xt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&Qo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[ho]}),t})();function Fh(t,e){Vh(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Hh(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Hh(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function zh(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Vh(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Oh(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Oh(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();zh(e._rawValidators,i),zh(e._rawAsyncValidators,i)}function Hh(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function jh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Bh="VALID",Uh="INVALID",qh="PENDING",Gh="DISABLED";function Zh(t){return(Xh(t)?t.validators:t)||null}function Wh(t){return Array.isArray(t)?Ch(t):t||null}function $h(t,e){return(Xh(e)?e.asyncValidators:t)||null}function Yh(t){return Array.isArray(t)?Dh(t):t||null}function Xh(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Qh{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Wh(this._rawValidators),this._composedAsyncValidatorFn=Yh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Bh}get invalid(){return this.status===Uh}get pending(){return this.status==qh}get disabled(){return this.status===Gh}get enabled(){return this.status!==Gh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Wh(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Yh(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=qh,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Gh,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Bh,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Bh&&this.status!==qh||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gh:Bh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=qh,this._hasOwnPendingAsyncValidator=!0;const e=wh(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Jh?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof tf&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ql,this.statusChanges=new ql}_calculateStatus(){return this._allControlsDisabled()?Gh:this.errors?Uh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qh)?qh:this._anyControlsHaveStatus(Uh)?Uh:Bh}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Xh(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Kh extends Qh{constructor(t=null,e,n){super(Zh(e),$h(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){jh(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){jh(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Jh extends Qh{constructor(t,e,n){super(Zh(e),$h(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Kh?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class tf extends Qh{constructor(t,e,n){super(Zh(e),$h(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Kh?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const ef={provide:Lh,useExisting:ot(()=>rf)},nf=(()=>Promise.resolve(null))();let rf=(()=>{class t extends Lh{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new ql,this.form=new Jh({},Ch(t),Dh(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){nf.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Fh(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){nf.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),jh(this._directives,t)})}addFormGroup(t){nf.then(()=>{const e=this._findContainer(t.path),n=new Jh({});(function(t,e){Vh(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){nf.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){nf.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(So(fh,10),So(ph,10))},t.\u0275dir=Xt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Fo("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Os([ef]),ho]}),t})();const af={provide:Ph,useExisting:ot(()=>sf)},of=(()=>Promise.resolve(null))();let sf=(()=>{class t extends Ph{constructor(t,e,n,r){super(),this.control=new Kh,this._registered=!1,this.update=new ql,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===uh?n=t:Object.getPrototypeOf(t.constructor)===oh?r=t:i=t}),i||r||n||null}(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Fh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){of.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;of.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(So(Lh,9),So(fh,10),So(ph,10),So(sh,10))},t.\u0275dir=Xt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Os([af]),ho,ue]}),t})(),lf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const cf={provide:sh,useExisting:ot(()=>uf),multi:!0};let uf=(()=>{class t extends oh{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Un(t)))(n||t)}}(),t.\u0275dir=Xt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Fo("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[Os([cf]),ho]}),t})(),df=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})(),hf=(()=>{class t{constructor(){this._validator=xh}handleChanges(t){if(this.inputName in t){const e=this.normalizeInput(t[this.inputName].currentValue);this._validator=this.createValidator(e),this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t}),t})();const ff={provide:fh,useExisting:ot(()=>pf),multi:!0};let pf=(()=>{class t extends hf{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>parseFloat(t),this.createValidator=t=>yh(t)}ngOnChanges(t){this.handleChanges(t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Un(t)))(n||t)}}(),t.\u0275dir=Xt({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Mo("max",e.max?e.max:null)},inputs:{max:"max"},features:[Os([ff]),ho,ue]}),t})();const gf={provide:fh,useExisting:ot(()=>mf),multi:!0};let mf=(()=>{class t extends hf{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>parseFloat(t),this.createValidator=t=>vh(t)}ngOnChanges(t){this.handleChanges(t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Un(t)))(n||t)}}(),t.\u0275dir=Xt({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Mo("min",e.min?e.min:null)},inputs:{min:"min"},features:[Os([gf]),ho,ue]}),t})();const vf={provide:fh,useExisting:ot(()=>yf),multi:!0};let yf=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?bh(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&Mo("required",e.required?"":null)},inputs:{required:"required"},features:[Os([vf])]}),t})(),bf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[df]]}),t})(),xf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[bf]}),t})();const _f=new y(t=>t.complete());function wf(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):_f}function kf(...t){let e=t[t.length-1];return M(e)?(t.pop(),R(t,e)):q(t)}function Tf(t,e,n,i){return r(n)&&(i=n,n=void 0),i?Tf(t,e,n).pipe(A(t=>l(t)?i(...t):i(t))):new y(r=>{Mf(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function Mf(t,e,n,r,i){let a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),a=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),a=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),a=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let a=0,o=t.length;a<o;a++)Mf(t[a],e,n,r,i)}r.add(a)}class Af extends d{constructor(t,e){super()}schedule(t,e=0){return this}}class Cf extends Af{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let Sf=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Df extends Sf{constructor(t,e=Sf.now){super(t,()=>Df.delegate&&Df.delegate!==this?Df.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Df.delegate&&Df.delegate!==this?Df.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Of=new Df(Cf);function Ef(t){return!l(t)&&t-parseFloat(t)+1>=0}function Lf(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}class Pf extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class If extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Rf(t,e,n,r,i=new If(t,n,r)){if(!i.closed)return e instanceof y?e.subscribe(i):I(e)(i)}function Nf(...t){if(1===t.length){if(!l(t[0]))return t[0];t=t[0]}return q(t,void 0).lift(new Ff)}class Ff{call(t,e){return e.subscribe(new zf(t))}}class zf extends Pf{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=Rf(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}class Vf extends k{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new x;return this._value}next(t){super.next(this._value=t)}}const Hf={};class jf{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Bf(t,this.resultSelector))}}class Bf extends Pf{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Hf),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Rf(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Hf?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Uf(){}const qf=new y(Uf);function Gf(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),q(t,void 0).lift(new Zf(e))}class Zf{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Wf(t,this.resultSelector))}}class Wf extends p{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;l(t)?e.push(new Yf(t)):e.push("function"==typeof t[E]?new $f(t[E]()):new Xf(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let a=0;a<e;a++){let e=t[a];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let a=0;a<e;a++){let e=t[a],o=e.next();if(e.hasCompleted()&&(r=!0),o.done)return void n.complete();i.push(o.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class $f{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class Yf{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[E](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Xf extends z{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[E](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return V(this.observable,new F(this))}}function Qf(...t){return U(1)(kf(...t))}function Kf(t){return e=>e.lift(new Jf(t))}class Jf{constructor(t){this.notifier=t}call(t,e){const n=new tp(t),r=V(this.notifier,new F(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class tp extends z{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function ep(t,e){return function(n){return n.lift(new np(t,e))}}class np{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new rp(t,this.predicate,this.thisArg))}}class rp extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const ip=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function ap(t){return e=>0===t?wf():e.lift(new op(t))}class op{constructor(t){if(this.total=t,this.total<0)throw new ip}call(t,e){return e.subscribe(new sp(t,this.total))}}class sp extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function lp(t,e){return"function"==typeof e?n=>n.pipe(lp((n,r)=>N(t(n,r)).pipe(A((t,i)=>e(n,t,r,i))))):e=>e.lift(new cp(t))}class cp{constructor(t){this.project=t}call(t,e){return e.subscribe(new up(t,this.project))}}class up extends z{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new F(this),r=this.destination;r.add(n),this.innerSubscription=V(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function dp(t,e,n){return function(r){return r.lift(new hp(t,e,n))}}class hp{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new fp(t,this.nextOrObserver,this.error,this.complete))}}class fp extends p{constructor(t,e,n,i){super(t),this._tapNext=Uf,this._tapError=Uf,this._tapComplete=Uf,this._tapError=n||Uf,this._tapComplete=i||Uf,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Uf,this._tapError=e.error||Uf,this._tapComplete=e.complete||Uf)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function pp(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new gp(t,n))}}class gp{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new mp(t,this.observables,this.project))}}class mp extends Pf{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Rf(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function vp(t,e){return new y(e?n=>e.schedule(yp,0,{error:t,subscriber:n}):e=>e.error(t))}function yp({error:t,subscriber:e}){e.error(t)}let bp=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return kf(this.value);case"E":return vp(this.error);case"C":return wf()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function xp(t,e=Of){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new _p(r,e))}class _p{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new wp(t,this.delay,this.scheduler))}}class wp extends p{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(wp.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new kp(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(bp.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(bp.createComplete()),this.unsubscribe()}}class kp{constructor(t,e){this.time=t,this.notification=e}}const Tp=["*"],Mp=["dialog"];function Ap(t){return null!=t}function Cp(t){return(t||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const Sp={animation:!0,transitionTimerDelayMs:5};let Dp=(()=>{class t{constructor(){this.animation=Sp.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Op=()=>{},{transitionTimerDelayMs:Ep}=Sp,Lp=new Map,Pp=(t,e,n,r)=>{let i=r.context||{};const a=Lp.get(e);if(a)switch(r.runningTransition){case"continue":return _f;case"stop":t.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),Lp.delete(e)}const o=n(e,r.animation,i)||Op;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>o()),kf(void 0).pipe(function(t){return e=>new y(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const s=new k,l=new k,c=s.pipe(function(...t){return e=>Qf(e,kf(...t))}(!0));Lp.set(e,{transition$:s,complete:()=>{l.next(),l.complete()},context:i});const u=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=Tf(e,"transitionend").pipe(Kf(c),ep(({target:t})=>t===e));Nf(function(t=0,e,n){let r=-1;return Ef(e)?r=Number(e)<1?1:Number(e):M(e)&&(n=e),M(n)||(n=Of),new y(e=>{const i=Ef(t)?t:+t-n.now();return n.schedule(Lf,i,{index:0,period:r,subscriber:e})})}(u+Ep).pipe(Kf(c)),n,l).pipe(Kf(c)).subscribe(()=>{Lp.delete(e),t.run(()=>{o(),s.next(),s.complete()})})}),s.asObservable()},Ip=(t,e,n)=>{let{direction:r,maxHeight:i}=n;const{classList:a}=t;function o(){a.add("collapse"),"show"===r?a.add("show"):a.remove("show")}if(e)return i||(i=function(t){if("undefined"==typeof navigator)return"0px";const{classList:e}=t,n=e.contains("show");n||e.add("show"),t.style.height="";const r=t.getBoundingClientRect().height+"px";return n||e.remove("show"),r}(t),n.maxHeight=i,t.style.height="show"!==r?i:"0px",a.remove("collapse"),a.remove("collapsing"),a.remove("show"),Cp(t),a.add("collapsing")),t.style.height="show"===r?i:"0px",()=>{o(),a.remove("collapsing"),t.style.height=""};o()};let Rp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),Np=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),Fp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})(),zp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),Vp=(()=>{class t{constructor(t){this._ngbConfig=t}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(dr(Dp))},t.\u0275prov=ft({factory:function(){return new t(dr(Dp))},token:t,providedIn:"root"}),t})(),Hp=(()=>{class t{constructor(t,e,n){this._element=t,this._zone=n,this.collapsed=!1,this.ngbCollapseChange=new ql,this.shown=new ql,this.hidden=new ql,this.animation=e.animation}ngOnInit(){this._runTransition(this.collapsed,!1)}ngOnChanges({collapsed:t}){t.firstChange||this._runTransitionWithEvents(this.collapsed,this.animation)}toggle(t=this.collapsed){this.collapsed=!t,this.ngbCollapseChange.next(this.collapsed),this._runTransitionWithEvents(this.collapsed,this.animation)}_runTransition(t,e){return Pp(this._zone,this._element.nativeElement,Ip,{animation:e,runningTransition:"stop",context:{direction:t?"hide":"show"}})}_runTransitionWithEvents(t,e){this._runTransition(t,e).subscribe(()=>{t?this.hidden.emit():this.shown.emit()})}}return t.\u0275fac=function(e){return new(e||t)(So(Fs),So(Vp),So(Dc))},t.\u0275dir=Xt({type:t,selectors:[["","ngbCollapse",""]],inputs:{collapsed:["ngbCollapse","collapsed"],animation:"animation"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],features:[ue]}),t})(),jp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();var Bp=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});const Up=(t,e)=>!!e&&e.some(e=>e.contains(t)),qp=(t,e)=>!e||null!=function(t,e){return e?void 0===t.closest?null:t.closest(e):null}(t,e),Gp="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Zp=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Wp(t){const e=Array.from(t.querySelectorAll(Zp)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const $p=/\s+/,Yp=new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let a={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(a.height=Math.round(a.height),a.width=Math.round(a.width),a.top=Math.round(a.top),a.bottom=Math.round(a.bottom),a.left=Math.round(a.left),a.right=Math.round(a.right)),a}positionElements(t,e,n,r){const[i="top",a="center"]=n.split("-"),o=r?this.offset(t,!1):this.position(t,!1),s=this.getAllStyles(e),l=parseFloat(s.marginTop),c=parseFloat(s.marginBottom),u=parseFloat(s.marginLeft),d=parseFloat(s.marginRight);let h=0,f=0;switch(i){case"top":h=o.top-(e.offsetHeight+l+c);break;case"bottom":h=o.top+o.height;break;case"left":f=o.left-(e.offsetWidth+u+d);break;case"right":f=o.left+o.width}switch(a){case"top":h=o.top;break;case"bottom":h=o.top+o.height-e.offsetHeight;break;case"left":f=o.left;break;case"right":f=o.left+o.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=o.left+o.width/2-e.offsetWidth/2:h=o.top+o.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(h)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,v=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=v&&p.bottom<=m}};new Date(1882,10,12),new Date(2174,10,25);let Xp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd,xf]]}),t})(),Qp=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Kp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["",8,"navbar"]]}),t})(),Jp=(()=>{class t{constructor(t){this.elementRef=t,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(So(Fs))},t.\u0275dir=Xt({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(t,e){2&t&&Qo("disabled",e.disabled)},inputs:{disabled:"disabled"}}),t})(),tg=(()=>{class t{constructor(t,e){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=e.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(So(ot(()=>rg)),So(Fs))},t.\u0275dir=Xt({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,e,n){if(1&t&&rc(n,Jp,4),2&t){let t;nc(t=ic())&&(e.menuItems=t)}},hostVars:5,hostBindings:function(t,e){1&t&&Fo("keydown.ArrowUp",function(t){return e.dropdown.onKeyDown(t)})("keydown.ArrowDown",function(t){return e.dropdown.onKeyDown(t)})("keydown.Home",function(t){return e.dropdown.onKeyDown(t)})("keydown.End",function(t){return e.dropdown.onKeyDown(t)})("keydown.Enter",function(t){return e.dropdown.onKeyDown(t)})("keydown.Space",function(t){return e.dropdown.onKeyDown(t)})("keydown.Tab",function(t){return e.dropdown.onKeyDown(t)})("keydown.Shift.Tab",function(t){return e.dropdown.onKeyDown(t)}),2&t&&(Mo("x-placement",e.placement),Qo("dropdown-menu",!0)("show",e.dropdown.isOpen()))}}),t})(),eg=(()=>{class t{constructor(t,e){this.dropdown=t,this.nativeElement=e.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(So(ot(()=>rg)),So(Fs))},t.\u0275dir=Xt({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){2&t&&Mo("aria-expanded",e.dropdown.isOpen())}}),t})(),ng=(()=>{class t extends eg{constructor(t,e){super(t,e)}}return t.\u0275fac=function(e){return new(e||t)(So(ot(()=>rg)),So(Fs))},t.\u0275dir=Xt({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){1&t&&Fo("click",function(){return e.dropdown.toggle()})("keydown.ArrowUp",function(t){return e.dropdown.onKeyDown(t)})("keydown.ArrowDown",function(t){return e.dropdown.onKeyDown(t)})("keydown.Home",function(t){return e.dropdown.onKeyDown(t)})("keydown.End",function(t){return e.dropdown.onKeyDown(t)})("keydown.Tab",function(t){return e.dropdown.onKeyDown(t)})("keydown.Shift.Tab",function(t){return e.dropdown.onKeyDown(t)}),2&t&&Mo("aria-expanded",e.dropdown.isOpen())},features:[Os([{provide:eg,useExisting:ot(()=>t)}]),ho]}),t})(),rg=(()=>{class t{constructor(t,e,n,r,i,a,o){this._changeDetector=t,this._document=n,this._ngZone=r,this._elementRef=i,this._renderer=a,this._closed$=new k,this._bodyContainer=null,this._open=!1,this.openChange=new ql,this.placement=e.placement,this.container=e.container,this.autoClose=e.autoClose,this.display=o?"static":"dynamic",this._zoneSubscription=r.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(ap(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.isFirstChange&&this._applyPlacementClasses(),t.dropdownClass){const{currentValue:e,previousValue:n}=t.dropdownClass;this._applyCustomDropdownClass(e,n)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){!function(t,e,n,r,i,a,o,s){var l;n&&t.runOutsideAngular((l=()=>{const l=Tf(e,"keydown").pipe(Kf(i),ep(t=>t.which===Bp.Escape),dp(t=>t.preventDefault())),c=Tf(e,"mousedown").pipe(A(t=>{const e=t.target;return 2!==t.button&&!Up(e,o)&&("inside"===n?Up(e,a)&&qp(e,s):"outside"===n?!Up(e,a):qp(e,s)||!Up(e,a))}),Kf(i)),u=Tf(e,"mouseup").pipe(pp(c),ep(([t,e])=>e),xp(0),Kf(i));Nf([l.pipe(A(t=>0)),u.pipe(A(t=>1))]).subscribe(e=>t.run(()=>r(e)))},Gp?()=>setTimeout(()=>l(),100):l))}(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(t){const e=t.which,n=this._getMenuElements();let r=-1,i=null;const a=this._isEventFromToggle(t);if(!a&&n.length&&n.forEach((e,n)=>{e.contains(t.target)&&(i=e),e===this._document.activeElement&&(r=n)}),e!==Bp.Space&&e!==Bp.Enter){if(e!==Bp.Tab){if(a||i){if(this.open(),n.length){switch(e){case Bp.ArrowDown:r=Math.min(r+1,n.length-1);break;case Bp.ArrowUp:if(this._isDropup()&&-1===r){r=n.length-1;break}r=Math.max(r-1,0);break;case Bp.Home:r=0;break;case Bp.End:r=n.length-1}n[r].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const e=this._menu.nativeElement.querySelectorAll(Zp);t.shiftKey&&t.target===e[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):t.shiftKey||t.target!==e[e.length-1]||(this._anchor.nativeElement.focus(),this.close())}else Tf(t.target,"focusout").pipe(ap(1)).subscribe(({relatedTarget:t})=>{this._elementRef.nativeElement.contains(t)||this.close()})}}else!i||!0!==this.autoClose&&"inside"!==this.autoClose||Tf(i,"click").pipe(ap(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(t=>!t.disabled).map(t=>t.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&this._applyPlacementClasses("dynamic"===this.display?function(t,e,n,r,i){let a=Array.isArray(n)?n:n.split($p);const o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],s=t=>{const[e,n]=t.split("-"),r=[];return r};let l=a.findIndex(t=>"auto"===t);l>=0&&o.forEach(function(t){null==a.find(e=>-1!==e.search("^"+t))&&a.splice(l++,1,t)});const c=e.style;c.position="absolute",c.top="0",c.left="0",c["will-change"]="transform";let u=null,d=!1;for(u of a){s(u);if(Yp.positionElements(t,e,u,r)){d=!0;break}}return d||(u=a[0],s(u),Yp.positionElements(t,e,u,r)),u}(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;if(this._menu){const e=this._menu.nativeElement;t.appendChild(this._elementRef.nativeElement,e),t.removeStyle(e,"position"),t.removeStyle(e,"transform")}this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const t=this._renderer,e=this._menu.nativeElement,n=this._bodyContainer=this._bodyContainer||t.createElement("div");t.setStyle(n,"position","absolute"),t.setStyle(e,"position","static"),t.setStyle(n,"z-index","1050"),t.appendChild(n,e),t.appendChild(this._document.body,n)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,e){const n="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;n&&(e&&this._renderer.removeClass(n,e),t&&this._renderer.addClass(n,t))}_applyPlacementClasses(t){const e=this._menu;if(e){t||(t=this._getFirstPlacement(this.placement));const n=this._renderer,r=this._elementRef.nativeElement;n.removeClass(r,"dropup"),n.removeClass(r,"dropdown"),e.placement="static"===this.display?null:t;const i=-1!==t.search("^top")?"dropup":"dropdown";n.addClass(r,i);const a=this._bodyContainer;a&&(n.removeClass(a,"dropup"),n.removeClass(a,"dropdown"),n.addClass(a,i))}}}return t.\u0275fac=function(e){return new(e||t)(So(cl),So(Qp),So(su),So(Dc),So(Fs),So(Hs),So(Kp,8))},t.\u0275dir=Xt({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(t,e,n){if(1&t&&(rc(n,tg,5),rc(n,eg,5)),2&t){let t;nc(t=ic())&&(e._menu=t.first),nc(t=ic())&&(e._anchor=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&Qo("show",e.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display",dropdownClass:"dropdownClass"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[ue]}),t})(),ig=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})(),ag=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(dr(Dp))},t.\u0275prov=ft({factory:function(){return new t(dr(Dp))},token:t,providedIn:"root"}),t})();class og{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const sg=()=>{};let lg=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):sg}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(dr(su))},t.\u0275prov=ft({factory:function(){return new t(dr(su))},token:t,providedIn:"root"}),t})(),cg=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(ap(1)).subscribe(()=>{Pp(this._zone,this._el.nativeElement,(t,e)=>{e&&Cp(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Pp(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(So(Fs),So(Dc))},t.\u0275cmp=qt({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(Ko("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),Qo("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class ug{close(t){}dismiss(t){}}class dg{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new k,this._dismissed=new k,this._hidden=new k,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Kf(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Kf(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():kf(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Gf(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var hg=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let fg=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new k,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ql,this.shown=new k,this.hidden=new k}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ap(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=Gf(Pp(this._zone,t,()=>t.classList.remove("show"),e),Pp(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};Gf(Pp(this._zone,this._elRef.nativeElement,(t,e)=>{e&&Cp(t),t.classList.add("show")},t),Pp(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Tf(t,"keydown").pipe(Kf(this._closed$),ep(t=>t.which===Bp.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(hg.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;Tf(this._dialogEl.nativeElement,"mousedown").pipe(Kf(this._closed$),dp(()=>e=!1),lp(()=>Tf(t,"mouseup").pipe(Kf(this._closed$),ap(1))),ep(({target:e})=>t===e)).subscribe(()=>{e=!0}),Tf(t,"click").pipe(Kf(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(hg.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=Wp(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Pp(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(So(su),So(Fs),So(Dc))},t.\u0275cmp=qt({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&function(t,e,n){const r=Pe();r.firstCreatePass&&(oc(r,new Yl(t,7,void 0),-1),r.staticViewQueries=!0),ac(r,Le(),7)}(Mp),2&t){let t;nc(t=ic())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(Mo("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),Ko("modal d-block"+(e.windowClass?" "+e.windowClass:"")),Qo("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Tp,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(Bo(),Eo(0,"div",0,1),Eo(2,"div",2),Uo(3),Lo(),Lo()),2&t&&Ko("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":"")+(e.modalDialogClass?" "+e.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),pg=(()=>{class t{constructor(t,e,n,r,i,a){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=r,this._rendererFactory=i,this._ngZone=a,this._activeWindowCmptHasChanged=new k,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new ql,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=Tf(e,"focusin").pipe(Kf(n),A(t=>t.target));Tf(e,"keydown").pipe(Kf(n),ep(t=>t.which===Bp.Tab),pp(t)).subscribe(([t,n])=>{const[r,i]=Wp(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&Tf(e,"click").pipe(Kf(n),pp(t),A(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:Ap(r.container)?this._document.querySelector(r.container):this._document.body,a=this._rendererFactory.createRenderer(null,null),o=this._scrollBar.compensate(),s=()=>{this._modalRefs.length||(a.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const l=new ug,c=this._getContentRef(t,r.injector||e,n,l,r);let u=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,d=this._attachWindowComponent(t,i,c),h=new dg(d,c,u,r.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.result.then(o,o),h.result.then(s,s),l.close=t=>{h.close(t)},l.dismiss=t=>{h.dismiss(t)},this._applyWindowOptions(d.instance,r),1===this._modalRefs.length&&a.addClass(this._document.body,"modal-open"),u&&u.instance&&(this._applyBackdropOptions(u.instance,r),u.changeDetectorRef.detectChanges()),d.changeDetectorRef.detectChanges(),h}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(cg).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(fg).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{Ap(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{Ap(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,r,i){return n?n instanceof pl?this._createFromTemplateRef(n,r):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,r,i):new og([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new og([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new og([[e]])}_createFromComponent(t,e,n,r,i){const a=t.resolveComponentFactory(n),o=co.create({providers:[{provide:ug,useValue:r}],parent:e}),s=a.create(o),l=s.location.nativeElement;return i.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(s.hostView),new og([[l]],s.hostView,s)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(dr(Yc),dr(co),dr(su),dr(lg),dr(Vs),dr(Dc))},t.\u0275prov=ft({factory:function(){return new t(dr(Yc),dr($a),dr(su),dr(lg),dr(Vs),dr(Dc))},token:t,providedIn:"root"}),t})(),gg=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(dr(Ps),dr(co),dr(pg),dr(ag))},t.\u0275prov=ft({factory:function(){return new t(dr(Ps),dr($a),dr(pg),dr(ag))},token:t,providedIn:"root"}),t})(),mg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:[gg]}),t})(),vg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),yg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),bg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),xg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),_g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),wg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),kg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})(),Tg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();new Wn("live announcer delay",{providedIn:"root",factory:function(){return 100}});let Mg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[xd]]}),t})();const Ag=[Rp,Np,Fp,zp,jp,Xp,ig,mg,vg,yg,bg,xg,_g,wg,kg,Tg,Mg];let Cg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[Ag,Rp,Np,Fp,zp,jp,Xp,ig,mg,vg,yg,bg,xg,_g,wg,kg,Tg,Mg]}),t})();function Sg(t){return null!=t}const Dg=t=>e=>Sg(t)?Sg(mh.required(e))||+e.value<=+t?null:{max:{value:t}}:null,Og={provide:fh,useExisting:ot(()=>Eg),multi:!0};let Eg=(()=>{class t{ngOnInit(){this.validator=Dg(this.maxVal)}ngOnChanges(t){for(const e in t)"max"===e&&(this.validator=Dg(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","maxVal","","formControlName",""],["","maxVal","","formControl",""],["","maxVal","","ngModel",""]],inputs:{maxVal:"maxVal"},features:[Os([Og]),ue]}),t})();const Lg=t=>e=>Sg(t)?Sg(mh.required(e))||+e.value>=+t?null:{min:{value:t}}:null,Pg={provide:fh,useExisting:ot(()=>Ig),multi:!0};let Ig=(()=>{class t{ngOnInit(){this.validator=Lg(this.minVal)}ngOnChanges(t){for(const e in t)"minVal"===e&&(this.validator=Lg(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","minVal","","formControlName",""],["","minVal","","formControl",""],["","minVal","","ngModel",""]],inputs:{minVal:"minVal"},features:[Os([Pg]),ue]}),t})();const Rg=t=>e=>{if(!Sg(t))return null;if(Sg(mh.required(e)))return null;const n=+e.value;return n>=t[0]&&n<=t[1]?null:{range:{value:t}}},Ng={provide:fh,useExisting:ot(()=>Fg),multi:!0};let Fg=(()=>{class t{ngOnInit(){this.validator=Rg(this.rangeVal)}ngOnChanges(t){for(const e in t)"range"===e&&(this.validator=Rg(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","rangeVal","","formControlName",""],["","rangeVal","","formControl",""],["","rangeVal","","ngModel",""]],inputs:{rangeVal:"rangeVal"},features:[Os([Ng]),ue]}),t})(),zg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();function Vg(t){return(Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Hg(t,e,n[e])})}return t}function Bg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ug={},qg={};try{"undefined"!=typeof window&&(Ug=window),"undefined"!=typeof document&&(qg=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(aT){}var Gg=(Ug.navigator||{}).userAgent,Zg=void 0===Gg?"":Gg,Wg=Ug,$g=qg,Yg=!!$g.documentElement&&!!$g.head&&"function"==typeof $g.addEventListener&&"function"==typeof $g.createElement,Xg=(~Zg.indexOf("MSIE")||Zg.indexOf("Trident/"),"svg-inline--fa"),Qg=[1,2,3,4,5,6,7,8,9,10],Kg=Qg.concat([11,12,13,14,15,16,17,18,19,20]),Jg={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},tm=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Jg.GROUP,Jg.SWAP_OPACITY,Jg.PRIMARY,Jg.SECONDARY].concat(Qg.map(function(t){return"".concat(t,"x")})).concat(Kg.map(function(t){return"w-".concat(t)})),Wg.FontAwesomeConfig||{});$g&&"function"==typeof $g.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(t){var e=Bg(t,2),n=e[1],r=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=$g.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(e[0]));null!=r&&(tm[n]=r)});var em=jg({},{familyPrefix:"fa",replacementClass:Xg,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},tm);em.autoReplaceSvg||(em.observeMutations=!1);var nm=jg({},em);Wg.FontAwesomeConfig=nm;var rm=Wg||{};rm.___FONT_AWESOME___||(rm.___FONT_AWESOME___={}),rm.___FONT_AWESOME___.styles||(rm.___FONT_AWESOME___.styles={}),rm.___FONT_AWESOME___.hooks||(rm.___FONT_AWESOME___.hooks={}),rm.___FONT_AWESOME___.shims||(rm.___FONT_AWESOME___.shims=[]);var im=rm.___FONT_AWESOME___,am=[];Yg&&(($g.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test($g.readyState)||$g.addEventListener("DOMContentLoaded",function t(){$g.removeEventListener("DOMContentLoaded",t),am.map(function(t){return t()})}));var om,sm="pending",lm="settled",cm="fulfilled",um="rejected",dm=function(){},hm="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,fm="undefined"==typeof setImmediate?setTimeout:setImmediate,pm=[];function gm(){for(var t=0;t<pm.length;t++)pm[t][0](pm[t][1]);pm=[],om=!1}function mm(t,e){pm.push([t,e]),om||(om=!0,fm(gm,0))}function vm(t){var e=t.owner,n=e._state,r=e._data,i=t[n],a=t.then;if("function"==typeof i){n=cm;try{r=i(r)}catch(aT){_m(a,aT)}}ym(a,r)||(n===cm&&bm(a,r),n===um&&_m(a,r))}function ym(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===Vg(e))){var r=e.then;if("function"==typeof r)return r.call(e,function(r){n||(n=!0,e===r?xm(t,r):bm(t,r))},function(e){n||(n=!0,_m(t,e))}),!0}}catch(aT){return n||_m(t,aT),!0}return!1}function bm(t,e){t!==e&&ym(t,e)||xm(t,e)}function xm(t,e){t._state===sm&&(t._state=lm,t._data=e,mm(km,t))}function _m(t,e){t._state===sm&&(t._state=lm,t._data=e,mm(Tm,t))}function wm(t){t._then=t._then.forEach(vm)}function km(t){t._state=cm,wm(t)}function Tm(t){t._state=um,wm(t),!t._handled&&hm&&global.process.emit("unhandledRejection",t._data,t)}function Mm(t){global.process.emit("rejectionHandled",t)}function Am(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof Am==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(t,e){function n(t){_m(e,t)}try{t(function(t){bm(e,t)},n)}catch(aT){n(aT)}}(t,this)}Am.prototype={constructor:Am,_state:sm,_then:null,_data:void 0,_handled:!1,then:function(t,e){var n={owner:this,then:new this.constructor(dm),fulfilled:t,rejected:e};return!e&&!t||this._handled||(this._handled=!0,this._state===um&&hm&&mm(Mm,this)),this._state===cm||this._state===um?mm(vm,n):this._then.push(n),n.then},catch:function(t){return this.then(null,t)}},Am.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new Am(function(e,n){var r=[],i=0;function a(t){return i++,function(n){r[t]=n,--i||e(r)}}for(var o,s=0;s<t.length;s++)(o=t[s])&&"function"==typeof o.then?o.then(a(s),n):r[s]=o;i||e(r)})},Am.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new Am(function(e,n){for(var r,i=0;i<t.length;i++)(r=t[i])&&"function"==typeof r.then?r.then(e,n):e(r)})},Am.resolve=function(t){return t&&"object"===Vg(t)&&t.constructor===Am?t:new Am(function(e){e(t)})},Am.reject=function(t){return new Am(function(e,n){n(t)})};var Cm={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Sm(){for(var t=12,e="";t-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function Dm(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Om(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n],";")},"")}function Em(t){return t.size!==Cm.size||t.x!==Cm.x||t.y!==Cm.y||t.rotate!==Cm.rotate||t.flipX||t.flipY}function Lm(t){var e=t.transform,n=t.iconWidth,r={transform:"translate(".concat(t.containerWidth/2," 256)")},i="translate(".concat(32*e.x,", ").concat(32*e.y,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),o="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(i," ").concat(a," ").concat(o)},path:{transform:"translate(".concat(n/2*-1," -256)")}}}var Pm={x:0,y:0,width:"100%",height:"100%"};function Im(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function Rm(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,a=t.iconName,o=t.transform,s=t.symbol,l=t.title,c=t.maskId,u=t.titleId,d=t.extra,h=t.watchable,f=void 0!==h&&h,p=r.found?r:n,g=p.width,m=p.height,v="fak"===i,y=v?"":"fa-w-".concat(Math.ceil(g/m*16)),b=[nm.replacementClass,a?"".concat(nm.familyPrefix,"-").concat(a):"",y].filter(function(t){return-1===d.classes.indexOf(t)}).filter(function(t){return""!==t||!!t}).concat(d.classes).join(" "),x={children:[],attributes:jg({},d.attributes,{"data-prefix":i,"data-icon":a,class:b,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(m)})},_=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(g/m*16*.0625,"em")}:{};f&&(x.attributes["data-fa-i2svg"]=""),l&&x.children.push({tag:"title",attributes:{id:x.attributes["aria-labelledby"]||"title-".concat(u||Sm())},children:[l]});var w=jg({},x,{prefix:i,iconName:a,main:n,mask:r,maskId:c,transform:o,symbol:s,styles:jg({},_,d.styles)}),k=r.found&&n.found?function(t){var e,n=t.children,r=t.attributes,i=t.main,a=t.mask,o=t.maskId,s=i.icon,l=a.icon,c=Lm({transform:t.transform,containerWidth:a.width,iconWidth:i.width}),u={tag:"rect",attributes:jg({},Pm,{fill:"white"})},d=s.children?{children:s.children.map(Im)}:{},h={tag:"g",attributes:jg({},c.inner),children:[Im(jg({tag:s.tag,attributes:jg({},s.attributes,c.path)},d))]},f={tag:"g",attributes:jg({},c.outer),children:[h]},p="mask-".concat(o||Sm()),g="clip-".concat(o||Sm()),m={tag:"mask",attributes:jg({},Pm,{id:p,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[u,f]},v={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(e=l,"g"===e.tag?e.children:[e])},m]};return n.push(v,{tag:"rect",attributes:jg({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(p,")")},Pm)}),{children:n,attributes:r}}(w):function(t){var e=t.children,n=t.attributes,r=t.main,i=t.transform,a=Om(t.styles);if(a.length>0&&(n.style=a),Em(i)){var o=Lm({transform:i,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:jg({},o.outer),children:[{tag:"g",attributes:jg({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:jg({},r.icon.attributes,o.path)}]}]})}else e.push(r.icon);return{children:e,attributes:n}}(w),T=k.attributes;return w.children=k.children,w.attributes=T,s?function(t){var e=t.iconName,n=t.children,r=t.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:jg({},t.attributes,{id:!0===r?"".concat(t.prefix,"-").concat(nm.familyPrefix,"-").concat(e):r}),children:n}]}]}(w):function(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,a=t.styles,o=t.transform;if(Em(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=Om(jg({},a,{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}(w)}var Nm=function(t,e,n,r){var i,a,o,s=Object.keys(t),l=s.length,c=void 0!==r?function(t,e){return function(n,r,i,a){return t.call(e,n,r,i,a)}}(e,r):e;for(void 0===n?(i=1,o=t[s[0]]):(i=0,o=n);i<l;i++)o=c(o,t[a=s[i]],a,t);return o};function Fm(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,a=Object.keys(e).reduce(function(t,n){var r=e[n];return r.icon?t[r.iconName]=r.icon:t[n]=r,t},{});"function"!=typeof im.hooks.addPack||i?im.styles[t]=jg({},im.styles[t]||{},a):im.hooks.addPack(t,a),"fas"===t&&Fm("fa",e)}var zm=im.styles,Vm=im.shims,Hm=function(){var t=function(t){return Nm(zm,function(e,n,r){return e[r]=Nm(n,t,{}),e},{})};t(function(t,e,n){return e[3]&&(t[e[3]]=n),t}),t(function(t,e,n){var r=e[2];return t[n]=n,r.forEach(function(e){t[e]=n}),t});var e="far"in zm;Nm(Vm,function(t,n){var r=n[1];return"far"!==r||e||(r="fas"),t[n[0]]={prefix:r,iconName:n[2]},t},{})};function jm(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function Bm(t){var e=t.tag,n=t.attributes,r=void 0===n?{}:n,i=t.children,a=void 0===i?[]:i;return"string"==typeof t?Dm(t):"<".concat(e," ").concat(function(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(Dm(t[n]),'" ')},"").trim()}(r),">").concat(a.map(Bm).join(""),"</").concat(e,">")}function Um(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}Hm(),(Um.prototype=Object.create(Error.prototype)).constructor=Um;var qm={fill:"currentColor"},Gm={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Zm=(jg({},qm,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),jg({},Gm,{attributeName:"opacity"}));function Wm(t){var e=t[0],n=t[1],r=Bg(t.slice(4),1)[0];return{found:!0,width:e,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(nm.familyPrefix,"-").concat(Jg.GROUP)},children:[{tag:"path",attributes:{class:"".concat(nm.familyPrefix,"-").concat(Jg.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(nm.familyPrefix,"-").concat(Jg.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}function $m(){nm.autoAddCss&&!Jm&&(function(t){if(t&&Yg){var e=$g.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=$g.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}$g.head.insertBefore(e,r)}}(function(){var t="fa",e=Xg,n=nm.familyPrefix,r=nm.replacementClass,i='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(n!==t||r!==e){var a=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),s=new RegExp("\\.".concat(e),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return i}()),Jm=!0)}function Ym(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(t){return Bm(t)})}}),Object.defineProperty(t,"node",{get:function(){if(Yg){var e=$g.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function Xm(t){var e=t.prefix,n=void 0===e?"fa":e,r=t.iconName;if(r)return jm(Km.definitions,n,r)||jm(im.styles,n,r)}jg({},qm,{cx:"256",cy:"364",r:"28"}),jg({},Gm,{attributeName:"r",values:"28;14;28;28;14;28;"}),jg({},Zm,{values:"1;0;1;1;0;1;"}),jg({},qm,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),jg({},Zm,{values:"1;0;0;0;0;1;"}),jg({},qm,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),jg({},Zm,{values:"0;0;1;1;0;0;"});var Qm,Km=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e;return(e=[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(function(e){t.definitions[e]=jg({},t.definitions[e]||{},i[e]),Fm(e,i[e]),Hm()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var n=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(n).map(function(e){var r=n[e],i=r.prefix,a=r.iconName,o=r.icon;t[i]||(t[i]={}),t[i][a]=o}),t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()),Jm=!1,tv=(Qm=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,r=void 0===n?Cm:n,i=e.symbol,a=void 0!==i&&i,o=e.mask,s=void 0===o?null:o,l=e.maskId,c=void 0===l?null:l,u=e.title,d=void 0===u?null:u,h=e.titleId,f=void 0===h?null:h,p=e.classes,g=void 0===p?[]:p,m=e.attributes,v=void 0===m?{}:m,y=e.styles,b=void 0===y?{}:y;if(t){var x=t.prefix,_=t.iconName,w=t.icon;return Ym(jg({type:"icon"},t),function(){return $m(),nm.autoA11y&&(d?v["aria-labelledby"]="".concat(nm.replacementClass,"-title-").concat(f||Sm()):(v["aria-hidden"]="true",v.focusable="false")),Rm({icons:{main:Wm(w),mask:s?Wm(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:_,transform:jg({},Cm,r),symbol:a,title:d,maskId:c,titleId:f,extra:{attributes:v,styles:b,classes:g}})})}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t||{}).icon?t:Xm(t||{}),r=e.mask;return r&&(r=(r||{}).icon?r:Xm(r||{})),Qm(n,jg({},e,{mask:r}))});const ev=["*"];let nv=(()=>{class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null,this.globalLibrary=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})(),rv=(()=>{class t{constructor(){this.definitions={}}addIcons(...t){for(const e of t)e.prefix in this.definitions||(this.definitions[e.prefix]={}),this.definitions[e.prefix][e.iconName]=e}addIconPacks(...t){for(const e of t){const t=Object.keys(e).map(t=>e[t]);this.addIcons(...t)}}getIconDefinition(t,e){return t in this.definitions&&e in this.definitions[t]?this.definitions[t][e]:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})();const iv=t=>{const e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-inverse":t.inverse,"fa-layers-counter":t.counter,"fa-flip-horizontal":"horizontal"===t.flip||"both"===t.flip,"fa-flip-vertical":"vertical"===t.flip||"both"===t.flip,[`fa-${t.size}`]:null!==t.size,[`fa-rotate-${t.rotate}`]:null!==t.rotate,[`fa-pull-${t.pull}`]:null!==t.pull,[`fa-stack-${t.stackItemSize}`]:null!=t.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let av=(()=>{class t{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[ue]}),t})(),ov=(()=>{class t{constructor(t,e){this.renderer=t,this.elementRef=e}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return t.\u0275fac=function(e){return new(e||t)(So(Hs),So(Fs))},t.\u0275cmp=qt({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},features:[ue],ngContentSelectors:ev,decls:1,vars:0,template:function(t,e){1&t&&(Bo(),Uo(0))},encapsulation:2}),t})(),sv=(()=>{class t{constructor(t,e,n,r,i){this.sanitizer=t,this.config=e,this.iconLibrary=n,this.stackItem=r,this.classes=[],null!=i&&null==r&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let e=null;if(e=null==this.icon?this.config.fallbackIcon:this.icon,t){const t=this.findIconDefinition(e);if(null!=t){const e=this.buildParams();this.renderIcon(t,e)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const e=((t,e)=>{return void 0!==(n=t).prefix&&void 0!==n.iconName?t:Array.isArray(t)&&2===t.length?{prefix:t[0],iconName:t[1]}:"string"==typeof t?{prefix:e,iconName:t}:void 0;var n})(t,this.config.defaultPrefix);if("icon"in e)return e;const n=this.iconLibrary.getIconDefinition(e.prefix,e.iconName);if(null!=n)return n;const r=Xm(e);if(null!=r){const t="Global icon library is deprecated. Consult https://github.com/FortAwesome/angular-fontawesome/blob/master/UPGRADING.md for the migration instructions.";if("unset"===this.config.globalLibrary)console.error("FontAwesome: "+t);else if(!this.config.globalLibrary)throw new Error(t);return r}return(t=>{throw new Error(`Could not find icon with iconName=${t.iconName} and prefix=${t.prefix} in the icon library.`)})(e),null}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},e="string"==typeof this.transform?function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t?t.toLowerCase().split(" ").reduce(function(t,e){var n=e.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return t.flipX=!0,t;if(r&&"v"===i)return t.flipY=!0,t;if(i=parseFloat(i),isNaN(i))return t;switch(r){case"grow":t.size=t.size+i;break;case"shrink":t.size=t.size-i;break;case"left":t.x=t.x-i;break;case"right":t.x=t.x+i;break;case"up":t.y=t.y-i;break;case"down":t.y=t.y+i;break;case"rotate":t.rotate=t.rotate+i}return t},e):e}(this.transform):this.transform;return{title:this.title,transform:e,classes:[...iv(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,e){const n=tv(t,e);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(n.html.join("\n"))}}return t.\u0275fac=function(e){return new(e||t)(So(Kd),So(nv),So(rv),So(av,8),So(ov,8))},t.\u0275cmp=qt({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,e){2&t&&(fs("innerHTML",e.renderedIconHTML,ti),Mo("title",e.title))},inputs:{classes:"classes",icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",transform:"transform",a11yRole:"a11yRole"},features:[ue],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),lv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();function cv(t){return new y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?N(n):wf()).subscribe(e)})}const uv="Service workers are disabled or not supported by this browser";class dv{constructor(t){if(this.serviceWorker=t,t){const e=Tf(t,"controllerchange").pipe(A(()=>t.controller)),n=Qf(cv(()=>kf(t.controller)),e);this.worker=n.pipe(ep(t=>!!t)),this.registration=this.worker.pipe(lp(()=>t.getRegistration()));const r=Tf(t,"message").pipe(A(t=>t.data)).pipe(ep(t=>t&&t.type)).pipe(K(new k));r.connect(),this.events=r}else this.worker=this.events=this.registration=cv(()=>vp(new Error("Service workers are disabled or not supported by this browser")))}postMessage(t,e){return this.worker.pipe(ap(1),dp(n=>{n.postMessage(Object.assign({action:t},e))})).toPromise().then(()=>{})}postMessageWithStatus(t,e,n){const r=this.waitForStatus(n),i=this.postMessage(t,e);return Promise.all([r,i]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){return this.events.pipe(ep(e=>e.type===t))}nextEventOfType(t){return this.eventsOfType(t).pipe(ap(1))}waitForStatus(t){return this.eventsOfType("STATUS").pipe(ep(e=>e.nonce===t),ap(1),A(t=>{if(!t.status)throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let hv=(()=>{class t{constructor(t){if(this.sw=t,this.subscriptionChanges=new k,!t.isEnabled)return this.messages=qf,this.notificationClicks=qf,void(this.subscription=qf);this.messages=this.sw.eventsOfType("PUSH").pipe(A(t=>t.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(A(t=>t.data)),this.pushManager=this.sw.registration.pipe(A(t=>t.pushManager));const e=this.pushManager.pipe(lp(t=>t.getSubscription()));this.subscription=G(e,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(uv));const e={userVisibleOnly:!0};let n=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return e.applicationServerKey=r,this.pushManager.pipe(lp(t=>t.subscribe(e)),ap(1)).toPromise().then(t=>(this.subscriptionChanges.next(t),t))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ap(1),lp(t=>{if(null===t)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then(t=>{if(!t)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(uv))}decodeBase64(t){return atob(t)}}return t.\u0275fac=function(e){return new(e||t)(dr(dv))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),fv=(()=>{class t{constructor(t){if(this.sw=t,!t.isEnabled)return this.available=qf,this.activated=qf,void(this.unrecoverable=qf);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(uv));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(uv));const t=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:t},t)}}return t.\u0275fac=function(e){return new(e||t)(dr(dv))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class pv{}const gv=new Wn("NGSW_REGISTER_SCRIPT");function mv(t,e,n,r){return()=>{if(!_d(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)i=n.registrationStrategy();else{const[e,...r]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(e){case"registerImmediately":i=kf(null);break;case"registerWithDelay":i=vv(+r[0]||0);break;case"registerWhenStable":i=r[0]?G(yv(t),vv(+r[0])):yv(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(Dc).runOutsideAngular(()=>i.pipe(ap(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(t=>console.error("Service worker registration failed with:",t))))}}function vv(t){return kf(null).pipe(xp(t))}function yv(t){return t.get(Yc).isStable.pipe(ep(t=>t))}function bv(t,e){return new dv(_d(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let xv=(()=>{class t{static register(e,n={}){return{ngModule:t,providers:[{provide:gv,useValue:e},{provide:pv,useValue:n},{provide:dv,useFactory:bv,deps:[pv,pc]},{provide:lc,useFactory:mv,deps:[co,gv,pv,pc],multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({providers:[hv,fv]}),t})(),_v=(()=>{class t{}return t.fresh=1e3,t.salt=1030,t})(),wv=(()=>{class t{}return t.standard=9.80665,t})(),kv=(()=>{class t{static pascalToBar(e){return e/t.coefficient}static barToPascal(e){return e*t.coefficient}}return t.coefficient=1e5,t})(),Tv=(()=>{class t{static atAltitude(t){const e=288.15;return kv.barToPascal(this.standard)*Math.pow(e/(e+-.0065*t),.0289644*wv.standard/-.05404308)}}return t.standard=1.01325,t})();class Mv{constructor(t){this.options=t}create(){return this.options.isFreshWater?Av.forFreshWater(this.options.altitude):Av.forSaltWater(this.options.altitude)}}let Av=(()=>{class t{constructor(t,e){this.density=t;const n=Tv.atAltitude(e);this._surfacePressure=kv.pascalToBar(n)}static forSaltWater(e=0){return new t(_v.salt,e)}static forFreshWater(e=0){return new t(_v.fresh,e)}get surfacePressure(){return this._surfacePressure}toBar(t){return kv.pascalToBar(t*(this.density*wv.standard))+this._surfacePressure}fromBar(t){if(t<this._surfacePressure)throw new Error("Lower pressure than altitude isn`t convertible to depth.");const e=this.density*wv.standard;return kv.barToPascal(t-this._surfacePressure)/e}toDecoStop(e){const n=this.fromBar(e);return Math.round(n/t.decoStopDistance)*t.decoStopDistance}}return t.decoStopDistance=3,t})();class Cv{constructor(t,e,n,r,i,a){this._n2HalfTime=t,this._n2A=e,this._n2B=n,this._heHalfTime=r,this._heA=i,this._heB=a}get n2HalfTime(){return this._n2HalfTime}get n2A(){return this._n2A}get n2B(){return this._n2B}get heHalfTime(){return this._heHalfTime}get heA(){return this._heA}get heB(){return this._heB}}let Sv=(()=>{class t{}return t.Buhlmann_ZHL16C=[new Cv(5,1.1696,.5578,1.88,1.6189,.477),new Cv(8,1,.6514,3.02,1.383,.5747),new Cv(12.5,.8618,.7222,4.72,1.1919,.6527),new Cv(18.5,.7562,.7826,6.99,1.0458,.7223),new Cv(27,.62,.8125,10.21,.922,.7582),new Cv(38.3,.5043,.8434,14.48,.8205,.7957),new Cv(54.3,.441,.8693,20.53,.7305,.8279),new Cv(77,.4,.891,29.11,.6502,.8553),new Cv(109,.375,.9092,41.2,.595,.8757),new Cv(146,.35,.9222,55.19,.5545,.8903),new Cv(187,.3295,.9319,70.69,.5333,.8997),new Cv(239,.3065,.9403,90.34,.5189,.9073),new Cv(305,.2835,.9477,115.29,.5181,.9122),new Cv(390,.261,.9544,147.42,.5176,.9171),new Cv(498,.248,.9602,188.24,.5172,.9217),new Cv(635,.2327,.9653,240.03,.5119,.9267)],t})();var Dv=function(t){return t[t.noAction=0]="noAction",t[t.error=1]="error",t[t.gasSwitch=2]="gasSwitch",t[t.reachedNoDeco=3]="reachedNoDeco",t[t.lowPpO2=3]="lowPpO2",t[t.highPpO2=4]="highPpO2",t[t.highAscentSpeed=5]="highAscentSpeed",t[t.highDescentSpeed=6]="highDescentSpeed",t[t.brokenCeiling=7]="brokenCeiling",t}({});class Ov{static createGasSwitch(t,e,n){return{timeStamp:t,depth:e,type:Dv.gasSwitch,data:n}}static createError(t){return{timeStamp:0,depth:0,type:Dv.error,message:t}}static createLowPpO2(t,e){return{timeStamp:t,depth:e,type:Dv.lowPpO2}}static createHighPpO2(t,e){return{timeStamp:t,depth:e,type:Dv.highPpO2}}static createHighAscentSpeed(t,e){return{timeStamp:t,depth:e,type:Dv.highAscentSpeed}}static createHighDescentSpeed(t,e){return{timeStamp:t,depth:e,type:Dv.highDescentSpeed}}static createBrokenCeiling(t,e){return{timeStamp:t,depth:e,type:Dv.brokenCeiling}}}class Ev{constructor(){this.items=[]}add(t){this.items.push(t)}}class Lv{constructor(t,e,n){this.seg=t,this.ceil=e,this.err=n}get segments(){return this.seg}get ceilings(){return this.ceil}get errors(){return this.err}static fromErrors(t,e){return new Lv(t,[],e)}static fromProfile(t,e){return new Lv(t,e,[])}}class Pv{constructor(){this.decoGases=[],this.bottomGases=[]}static fromTanks(t){const e=new Pv;return e.addBottomGas(t[0].gas),t.slice(1,t.length).forEach(t=>{e.addDecoGas(t.gas)}),e}static bestGas(t,e,n){const r=e.toBar(n.currentDepth);let i=n.currentGas;return t.forEach((a,o)=>{const s=t[o],l=s.mod(n.maxDecoPpO2),c=e.toDecoStop(l),u=s.end(r);n.currentDepth<=c&&u<=n.maxEndPressure&&(!i||i.fO2<s.fO2)&&(i=s)}),i}bestDecoGas(t,e){const n=Pv.bestGas(this.decoGases,t,e);return n!==e.currentGas?n:Pv.bestGas(this.bottomGases,t,e)}get all(){return this.bottomGases.concat(this.decoGases)}get hasBottomGas(){return this.bottomGases.length>=1}addBottomGas(t){this.bottomGases.push(t)}addDecoGas(t){this.decoGases.push(t)}isRegistered(t){return this.bottomGases.includes(t)||this.decoGases.includes(t)}}class Iv{static partialPressure(t,e){return t*e}static mod(t,e){return t/e}static bestMix(t,e,n){const r=t/n.toBar(e);return r>1?1:r}static ead(t,e){const n=(1-t)*(e+10)/.79-10;return n<0?0:n}static end(t,e,n){return n*(t+e)}static ceiling(t,e){const n=.18/t*e;return n<e?e:n}}class Rv{constructor(t,e){this.fO2=t,this.fHe=e}get fN2(){return 1-this.fO2-this.fHe}copy(){return new Rv(this.fO2,this.fHe)}mod(t){return Iv.mod(t,this.fO2)}end(t){return Iv.end(this.fO2,this.fN2,t)}ceiling(t){return Iv.ceiling(this.fO2,t)}compositionEquals(t){return!!t&&this.fO2===t.fO2&&this.fHe===t.fHe}contentCode(){const t=1e4;return Math.round(this.fO2*t)*t+Math.round(this.fHe*t)}}let Nv=(()=>{class t{static gasNames(){return Array.from(t.map.keys())}static nameFor(e,n=0){const r=Math.round(100*e),i=Math.round(100*n);return r<=0?"":i<=0?r>=100?t.oxygenName:21===r?t.airName:"EAN"+r.toString():r.toString()+"/"+i.toString()}static byName(e){if(t.map.has(e)){const n=t.map.get(e);return null!=n?n:null}const n=t.namesRegEx.exec(e);if(n){if(n[1]){const t=Number(n[1])/100;if(t>0)return new Rv(t,0)}if(n[2]&&n[3]){const t=Number(n[2])/100,e=Number(n[3])/100;if(t>0&&e>0)return new Rv(t,e)}}return null}}return t.o2InAir=.209,t.air=new Rv(t.o2InAir,0),t.ean32=new Rv(.32,0),t.ean36=new Rv(.36,0),t.ean38=new Rv(.38,0),t.ean50=new Rv(.5,0),t.trimix1835=new Rv(.18,.35),t.trimix2135=new Rv(.21,.35),t.trimix1555=new Rv(.15,.55),t.trimix1070=new Rv(.1,.7),t.oxygen=new Rv(1,0),t.airName="Air",t.oxygenName="Oxygen",t.namesRegEx=/[EAN](?<fO2>\d{2})|(?<fO2b>\d{2})\/(?<fHe>\d{2})/i,t.map=new Map([[t.airName,t.air],["EAN32",t.ean32],["EAN36",t.ean36],["EAN38",t.ean38],["EAN50",t.ean50],[t.oxygenName,t.oxygen]]),t})();class Fv extends Cv{constructor(t,e){super(t.n2HalfTime,t.n2A,t.n2B,t.heHalfTime,t.heA,t.heB),this._pN2=0,this._pHe=0,this._pTotal=0,this._a=0,this._b=0,this._pN2=Iv.partialPressure(e,.79)-.0627,this._pHe=0,this._pTotal=this.pN2+this.pHe}get pN2(){return this._pN2}get pHe(){return this._pHe}get pTotal(){return this._pTotal}get a(){return this._a}get b(){return this._b}ceiling(t){return(this.pTotal-this.a*t)/(t/this.b+1-t)}load(t,e){this._pN2=this.loadGas(t,e.fN2,this.pN2,this.n2HalfTime),this._pHe=this.loadGas(t,e.fHe,this.pHe,this.heHalfTime);const n=this.pTotal;return this._pTotal=this.pN2+this.pHe,this._a=(this.n2A*this.pN2+this.heA*this.pHe)/this.pTotal,this._b=(this.n2B*this.pN2+this.heB*this.pHe)/this.pTotal,this.pTotal-n}loadGas(t,e,n,r){return this.schreinerEquation(n,t.startPressure*e,t.duration,r,t.speed*e)}schreinerEquation(t,e,n,r,i){const a=.01155245301/r;return e+i*(n-1/a)-(e-t-i/a)*Math.exp(-a*n)}}class zv{constructor(t){this.compartments=[];for(let e=0;e<Sv.Buhlmann_ZHL16C.length;e++){const n=new Fv(Sv.Buhlmann_ZHL16C[e],t);this.compartments.push(n)}}ceiling(t){let e=0;for(let n=0;n<this.compartments.length;n++){const r=this.compartments[n].ceiling(t);r>e&&(e=r)}return e}load(t,e){let n=0;for(let r=0;r<this.compartments.length;r++)n+=this.compartments[r].load(t,e);return n}}let Vv=(()=>{class t{static toSeconds(e){return e*t.oneMinute}static toMinutes(e){return e/t.oneMinute}static toDate(t){return new Date(1970,1,1,0,0,t,0)}static secondsFromDate(e){const n=new Date(e);let r=n.getSeconds();return r+=n.getMinutes()*t.oneMinute,r+=n.getHours()*Math.pow(t.oneMinute,2),r}}return t.oneSecond=1,t.oneMinute=60,t.oneDay=1440*t.oneMinute,t})();class Hv{static validate(t,e){const n=[];if(!t.any()){const t=Ov.createError("There needs to be at least one segment at depth.");n.push(t)}return t.withAll(t=>{Hv.validateRegisteredGas(n,e,t)}),n}static validateRegisteredGas(t,e,n){if(!e.isRegistered(n.gas)){const e=Ov.createError(`Segment ${n.startDepth}-${n.endDepth} has gas not registered in gases.`);t.push(e)}}}class jv{constructor(t,e,n,r){this.startDepth=t,this.endDepth=e,this._gas=n,this.duration=r}static from(t){return new jv(t.startDepth,t.endDepth,t._gas,t.duration)}static depthAt(t,e,n){return t+e*n}get gas(){return this._gas}get tank(){return this._tank}set tank(t){this._tank=t,t&&(this._gas=t.gas)}contentEquals(t){return this.speed===t.speed&&this._gas===t._gas}get speed(){return(this.endDepth-this.startDepth)/this.duration}depthAt(t){return jv.depthAt(this.startDepth,this.speed,t)}mergeFrom(t){this.duration+=t.duration,this.endDepth=t.endDepth}}class Bv{constructor(){this.segments=[],this._maxDepth=0}static from(t){const e=new Bv;return e._maxDepth=t._maxDepth,e.segments=[],t.segments.forEach(t=>{const n=jv.from(t);e.segments.push(n)}),e}static averageDepth(t){if(t.length<=0)return 0;let e=0,n=0;return t.forEach(t=>{if(t.duration>0){const r=(t.endDepth+t.startDepth)/2*t.duration+n*e;n+=t.duration,e=r/n}}),e}get length(){return this.segments.length}get items(){return this.segments.slice()}get maxDepth(){return this._maxDepth}get currentDepth(){return this.any()?this.last().endDepth:0}get duration(){let t=0;for(let e=0;e<this.segments.length;e++)t+=this.segments[e].duration;return t}add(t,e,n,r){const i=new jv(t,e,n,r);return this.segments.push(i),this.updateMaxDepth(i),i}addFlat(t,e,n){return this.add(t,t,e,n)}addChangeTo(t,e,n){return this.add(this.currentDepth,t,e,n)}mergeFlat(t=0){if(t<0)return this.segments;const e=[];for(let n=this.segments.length-1;n>t;n--){const t=this.segments[n-1],r=this.segments[n];t.contentEquals(r)&&(t.mergeFrom(r),e.push(r))}return this.segments=this.segments.filter(t=>!e.includes(t)),this.segments}remove(t){this.segments=this.segments.filter(e=>e!==t),this.fixStartDepths()}withAll(t){for(let e=0;e<this.segments.length;e++)t(this.segments[e])}any(){return 0!==this.segments.length}last(){return this.segments[this.segments.length-1]}copy(){return Bv.from(this)}fixStartDepths(){this.any()&&(this.segments[0].startDepth=0);for(let t=0;t<this.segments.length-1;t++){const e=this.segments[t+1];e.startDepth=this.segments[t].endDepth,this.updateMaxDepth(e)}}updateMaxDepth(t){t.endDepth>this._maxDepth&&(this._maxDepth=t.endDepth)}}class Uv{static createForPlan(t,e,n,r){const i=new Bv,a=Uv.descentDuration(t,r);i.add(0,t,n.gas,a).tank=n;let o=Vv.toSeconds(e)-a;return o=o<0?0:o,i.addFlat(t,n.gas,o).tank=n,i}static descentDuration(t,e){return Vv.toSeconds(t/e.descentSpeed)}static ascent(t,e){return t.slice(e,t.length)}static timeToSurface(t){const e=2*Vv.oneMinute;let n=0;for(const r of t)n+=r.duration;return Vv.toMinutes(e+n)}}class qv{constructor(t,e,n){this.depthConverter=t,this.options=e,this.tissues=n,this.lowestCeiling=0,this.lowestCeiling=this.depthConverter.surfacePressure+1}toleratedTissues(t,e,n,r){const i=this.tissues.compartments;let a=0;for(let o=0;o<i.length;o++){const s=i[o];let l=a;(t/s.b+s.a-t)*n+t<(e/s.b+s.a-e)*r+e&&(l=(-s.a*s.b*(n*e-r*t)-(1-s.b)*(n-r)*e*t+s.b*(e-t)*s.pTotal)/(-s.a*s.b*(n-r)+(1-s.b)*(r*e-n*t)+s.b*(e-t))),l>=a&&(a=l)}return a}tolerated(){const t=this.options.gfLow,e=this.options.gfHigh,n=this.depthConverter.surfacePressure,r=this.tissues.ceiling(t);return r>this.lowestCeiling&&(this.lowestCeiling=r),this.toleratedTissues(n,this.lowestCeiling,e,t)}ceiling(){let t=this.tolerated();return t<this.depthConverter.surfacePressure&&(t=this.depthConverter.surfacePressure),this.depthConverter.fromBar(t)}}class Gv{static firstStop(t){if(t<=Av.decoStopDistance)return 0;const e=Math.floor(t/Av.decoStopDistance)*Av.decoStopDistance;return e===t?t-Av.decoStopDistance:e}static nextStop(t){return t-Av.decoStopDistance}}class Zv{constructor(t,e,n,r){this.gases=t,this.segments=e,this.options=n,this.depthConverter=r,this.ceilings=[],this.runTime=0,this.tissues=new zv(r.surfacePressure),this.gradients=new qv(r,n,this.tissues);const i=e.last();this.currentGas=i.gas,this.bestGasOptions={currentDepth:this.currentDepth,maxDecoPpO2:this.options.maxDecoPpO2,maxEndPressure:this.depthConverter.toBar(this.options.maxEND),currentGas:this.currentGas}}get currentDepth(){return this.segments.currentDepth}get ambientPressure(){return this.depthConverter.toBar(this.currentDepth)}addCeiling(){const t=this.ceiling();this.ceilings.push({time:this.runTime,depth:t})}ceiling(){return this.gradients.ceiling()}get decoStopDuration(){return this.options.roundStopsToMinutes?Vv.oneMinute:Vv.oneSecond}bestDecoGas(){return this.bestGasOptions.currentDepth=this.currentDepth,this.bestGasOptions.currentGas=this.currentGas,this.gases.bestDecoGas(this.depthConverter,this.bestGasOptions)}}class Wv{calculateDecompression(t,e,n){const r=new Mv(t).create(),i=n.copy(),a=this.validate(i,e,t,r);if(a.length>0){const t=i.mergeFlat(n.length);return Lv.fromErrors(t,a)}const o=new Zv(e,i,t,r);this.swimPlan(o);let s=Gv.firstStop(o.currentDepth);for(;s>=0&&0!==i.last().endDepth;){this.tryGasSwitch(o);let e=0;for(;s<o.ceiling()&&e<Vv.oneDay;){const t=o.decoStopDuration,n=o.segments.add(o.currentDepth,o.currentDepth,o.currentGas,t);this.swim(o,n),e+=t}if(t.addSafetyStop&&o.currentDepth===Av.decoStopDistance){const t=o.segments.add(o.currentDepth,o.currentDepth,o.currentGas,3*Vv.oneMinute);this.swim(o,t)}const n=this.duration(o.currentDepth-s,t.ascentSpeed/Vv.oneMinute),r=o.segments.add(o.currentDepth,s,o.currentGas,n);this.swim(o,r),s=Gv.nextStop(s)}const l=i.mergeFlat(n.length);return Lv.fromProfile(l,o.ceilings)}validate(t,e,n,r){const i=Hv.validate(t,e);if(i.length>0)return i;const a=class{static validate(t,e,n){const r=[];if(!t.hasBottomGas){const t=Ov.createError("At least one bottom gas has to be defined.");return r.push(t),r}return this.validateAllDepths(t.all,e,n,r),r}static validateAllDepths(t,e,n,r){t.sort((t,n)=>n.mod(e.maxPpO2)-t.mod(e.maxPpO2));for(let i=0;i<t.length-1;i++)if(t.length>i){const a=t[i+1],o=t[i].ceiling(n);if(a.mod(e.maxPpO2)<o){const t=Ov.createError("Gases don`t cover all depths.");r.push(t);break}}}}.validate(e,n,r.surfacePressure);return a.length>0?a:[]}tryGasSwitch(t){const e=t.bestDecoGas();if(!e||t.currentGas.compositionEquals(e))return;t.currentGas=e;const n=t.segments.add(t.currentDepth,t.currentDepth,t.currentGas,t.options.gasSwitchDuration*Vv.oneMinute);this.swim(t,n)}duration(t,e){return t/e}swimPlan(t){t.addCeiling(),t.segments.withAll(e=>{this.swim(t,e)})}swim(t,e){let n=e.startDepth;const r=Vv.oneSecond;for(let i=0;i<e.duration;i+=r){const i=jv.depthAt(n,e.speed,r),a=new jv(n,i,e.gas,r);this.swimPart(t,a),n=a.endDepth}}swimPart(t,e){const n=this.toLoadSegment(t.depthConverter,e);t.tissues.load(n,e.gas),t.runTime+=e.duration,t.addCeiling()}noDecoLimit(t,e,n){const r=new Pv;r.addBottomGas(e);const i=new Bv,a=this.duration(t,n.descentSpeed/Vv.oneMinute);i.add(0,t,e,a);const o=new Mv(n).create(),s=new Zv(r,i,n,o);return this.swimNoDecoLimit(i,r,s,n)}noDecoLimitMultiLevel(t,e,n){const r=new Mv(n).create(),i=new Zv(e,t,n,r);return this.swimNoDecoLimit(t,e,i,n)}swimNoDecoLimit(t,e,n,r){if(this.validate(t,e,r,n.depthConverter).length>0)return 0;this.swimPlan(n);const i=this.currentNdl(n.ceilings);return i!==Number.POSITIVE_INFINITY?i:this.predictNoDecoLimit(t,n)}predictNoDecoLimit(t,e){const n=t.last(),r=n.endDepth,i=new jv(r,r,n.gas,Vv.oneMinute),a=this.toLoadSegment(e.depthConverter,i);let o=1;for(;e.ceiling()<=0&&o>0;)o=e.tissues.load(a,n.gas),e.runTime+=Vv.oneMinute;return 0===o||0===r?Number.POSITIVE_INFINITY:this.floorNdl(e.runTime)}floorNdl(t){let e=Vv.toMinutes(t);return e=Math.floor(e),e-1}currentNdl(t){for(let e=0;e<t.length;e+=Vv.oneMinute){const n=t[e];if(n.depth>0)return this.floorNdl(n.time)}return Number.POSITIVE_INFINITY}toLoadSegment(t,e){const n=t.toBar(e.speed)-t.surfacePressure;return{startPressure:t.toBar(e.startDepth),duration:e.duration,speed:n}}}class $v{constructor(t){this.depthConverter=t}calculateSac(t,e,n,r){const i=this.depthConverter.toBar(t);return Math.ceil(e*n/r/i*100)/100}calculateDuration(t,e,n,r){const i=this.depthConverter.toBar(t);return Math.ceil(e*n/r/i)}calculateUsed(t,e,n,r){const i=this.depthConverter.toBar(t);return Math.ceil(n*i*r/e)}}class Yv{constructor(t){this.depthConverter=t}static ead(t,e){const n=Iv.ead(t/100,e);return Math.ceil(100*n)/100}bestMix(t,e){const n=100*Iv.bestMix(t,e,this.depthConverter);return Math.floor(100*n)/100}mod(t,e){let n=Iv.mod(t,e/100);return n=this.depthConverter.fromBar(n),Math.floor(100*n)/100}gasSwitch(t,e){const n=Iv.mod(t,e/100);return this.depthConverter.toDecoStop(n)}partialPressure(t,e){const n=this.depthConverter.toBar(e),r=Iv.partialPressure(n,t)/100;return Math.ceil(100*r)/100}}class Xv{constructor(t,e){this.startDepth=t,this.endDepth=e}get minDepth(){return Math.min(this.startDepth,this.endDepth)}get maxDepth(){return Math.max(this.startDepth,this.endDepth)}get isDescent(){return this.startDepth<this.endDepth}get isFlat(){return this.startDepth===this.endDepth}get isAscent(){return this.startDepth>this.endDepth}}class Qv{constructor(t,e,n,r){this.userSegments=t,this.profile=e,this.depthConverter=n,this.options=r,this.events=new Ev,this.elapsed=0,this.index=0}get previous(){return this.index>0?this.profile[this.index-1]:null}get isUserSegment(){return this.index<this.userSegments}get maxPpo(){return this.isUserSegment?this.options.maxPpO2:this.options.maxDecoPpO2}get current(){return this.profile[this.index]}get switchingGas(){return!!this.previous&&!this.current.gas.compositionEquals(this.previous.gas)}}class Kv{static fromProfile(t,e,n,r){const i=new Mv(r).create(),a=new Qv(t,e,i,r),o=new Jv(a.events);for(a.index=0;a.index<e.length;a.index++){const t=this.toPressureSegment(a.current,i);this.addHighPpO2(a,t),this.addLowPpO2(a,t),this.addGasSwitch(a),this.addHighDescentSpeed(a),this.addHighAscentSpeed(a),a.elapsed+=a.current.duration,o.added||(o.assignSegment(a.current),Kv.validateBrokenCeiling(o,n,a.current))}return a.events}static addHighAscentSpeed(t){const e=t.current;if(-Vv.toSeconds(e.speed)>t.options.ascentSpeed){const n=Ov.createHighAscentSpeed(t.elapsed,e.startDepth);t.events.add(n)}}static addHighDescentSpeed(t){const e=t.current;if(Vv.toSeconds(e.speed)>t.options.descentSpeed){const n=Ov.createHighDescentSpeed(t.elapsed,e.startDepth);t.events.add(n)}}static addGasSwitch(t){if(t.switchingGas){const e=t.current,n=Ov.createGasSwitch(t.elapsed,e.startDepth,e.gas);t.events.add(n)}}static toPressureSegment(t,e){const n=e.toBar(t.startDepth),r=e.toBar(t.endDepth);return new Xv(n,r)}static addHighPpO2(t,e){if(e.isDescent||t.isUserSegment&&t.switchingGas){const n=t.current.gas.mod(t.maxPpo);if(e.maxDepth>n){const e=t.depthConverter.fromBar(n),r=Ov.createHighPpO2(t.elapsed,e);t.events.add(r)}}}static addLowPpO2(t,e){const n=t.current.gas.ceiling(t.depthConverter.surfacePressure);if(e.minDepth<n&&t.switchingGas||e.startDepth>n&&n>e.endDepth&&e.isAscent||0===t.current.startDepth&&e.startDepth<n&&e.isDescent){const e=t.depthConverter.fromBar(n),r=Ov.createLowPpO2(t.elapsed,e);t.events.add(r)}}static validateBrokenCeiling(t,e,n){for(;t.lastCeilingIndex<e.length-1;){const r=e[t.lastCeilingIndex];if(t.lastCeilingIndex++,t.ceilingIsBroken(r,n)){const e=Ov.createBrokenCeiling(r.time,r.depth);t.add(e);break}if(r.time>t.currentSegmentEndTime)break}}}class Jv{constructor(t){this.events=t,this.lastCeilingIndex=0,this.currentSegmentStartTime=0,this.currentSegmentEndTime=0,this.added=!1}assignSegment(t){this.currentSegmentStartTime=this.currentSegmentEndTime,this.currentSegmentEndTime+=t.duration}ceilingIsBroken(t,e){const n=e.depthAt(t.time-this.currentSegmentStartTime);return t.depth>n}add(t){this.events.add(t),this.added=!0}}class ty{static haveReserve(t){for(let e=0;e<t.length;e++)if(!t[e].hasReserve)return!1;return!0}}class ey{constructor(t,e,n){this.size=t,this.startPressure=e,this.consumed=0,this.reserve=0,this._gas=Nv.air.copy(),this.o2=n}static createDefault(){return new ey(15,200,100*Nv.o2InAir)}static resetConsumption(t){t.forEach(t=>{t.consumed=0,t.reserve=0})}get gas(){return this._gas}get o2(){const t=100*this._gas.fO2;return this.isInAirRange(t)?Math.round(100*this.gas.fO2):t}set o2(t){this.isInAirRange(t)?this.gas.fO2=Nv.o2InAir:this._gas.fO2=t/100}get volume(){return this.size*this.startPressure}get name(){return Nv.nameFor(this._gas.fO2)}assignStandardGas(t){const e=Nv.byName(t);e&&(this._gas.fO2=e.fO2,this._gas.fHe=e.fHe)}get endPressure(){const t=this.startPressure-this.consumed;return t>0?t:0}get percentsRemaining(){return this.endPressure/this.startPressure*100}get percentsReserve(){const t=this.reserve/this.startPressure*100;return t>100?100:t}get hasReserve(){return this.endPressure>=this.reserve}loadFrom(t){this.startPressure=t.startPressure,this.size=t.size,this.o2=t.o2}isInAirRange(t){return 20.9<=t&&t<=21&&0===this.gas.fHe}}class ny{constructor(t,e,n=0){this.duration=t,this.startTime=0,this.endTime=0,this._startDepth=0,this._endDepth=0,this.endTime=Math.round(100*t)/100,this._endDepth=e,this._startDepth=n}static fromSegment(t){return new ny(t.duration,t.endDepth,t.startDepth)}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}get averageDepth(){return(this.startDepth+this.endDepth)/2}}let ry=(()=>{class t{constructor(t){this.depthConverter=t}static calculateDecompression(t,e,n){const r=new Pv;r.addBottomGas(e[0].gas),e.slice(1,e.length).forEach(t=>{r.addDecoGas(t.gas)});const i=new Wv,a=t.copy();return i.calculateDecompression(n,r,a)}consumeFromTanks(t,e,n,r){if(t.length<3)throw new Error("Profile needs to contain at least three segments.");ey.resetConsumption(n);const i=this.consumeByTanks(t,r.sac);this.consumeByGases(t,n,r.sac,i);const a=Uv.ascent(t,e);this.updateReserve(a,n,r.stressSac)}calculateMaxBottomTime(t,e,n,r){const i=this.createTestProfile(t),a=i.last(),o=this.findRightUpperInterval(i,a,e,n,r),s=this.findMaximalAddedDuration(i,a,e,n,r,o);if(0===s)return 0;const l=Vv.toMinutes(t.duration+s);return Math.floor(l)}findRightUpperInterval(t,e,n,r,i){const a=40*Vv.oneMinute;for(this.consumeFromProfile(t,n,r,i);ty.haveReserve(n);)e.duration+=a,this.consumeFromProfile(t,n,r,i);let o=e.duration-a;return o=o<0?0:o,{left:o,right:e.duration}}findMaximalAddedDuration(t,e,n,r,i,a){for(;a.right-a.left>Vv.oneSecond;){const o=a.left+(a.right-a.left)/2;e.duration=o,this.consumeFromProfile(t,n,r,i),ty.haveReserve(n)?a.left=o:a.right=o}return a.left}consumeFromProfile(e,n,r,i){const a=t.calculateDecompression(e,n,i);this.consumeFromTanks(a.segments,e.length,n,r)}createTestProfile(t){const e=t.copy(),n=t.last();return e.addFlat(n.endDepth,n.gas,0),e}updateReserve(e,n,r){const i=e.slice();this.addSolvingSegment(i);const a=this.toBeConsumed(i,r,t=>!0);for(let t=0;t<=n.length-1;t++){const e=n[t],r=e.gas.contentCode();let i=a.get(r)||0;i=this.addReserveToTank(e,i),a.set(r,i)}n[0].reserve<t.minimumRockBottom&&(n[0].reserve=t.minimumRockBottom)}addReserveToTank(t,e){const n=Math.ceil(e/t.size),r=n+t.reserve>t.startPressure?t.startPressure-t.reserve:n;return t.reserve+=r,this.extractRemaining(e,r,t.size)}addSolvingSegment(t){if(0===t.length)return;const e=t[0].startDepth,n=new jv(e,e,t[0].gas,2*Vv.oneMinute);t.unshift(n)}consumeByGases(t,e,n,r){const i=this.toBeConsumedYet(t,n,r,t=>!t.tank);for(let a=e.length-1;a>=0;a--){const t=e[a],n=t.gas.contentCode();let r=i.get(n)||0;r=this.consumeFromTank(t,r),i.set(n,r)}}consumeByTanks(t,e){const n=new Map,r=Vv.toMinutes(e);return t.forEach(t=>{if(t.tank){const e=t.tank,i=t.gas.contentCode(),a=ny.fromSegment(t),o=this.consumedBySegment(a,r),s=this.consumeFromTank(e,o);let l=n.get(i)||0;l+=s,n.set(i,l)}}),n}consumeFromTank(t,e){const n=Math.ceil(e/t.size),r=n>t.endPressure?t.endPressure:n;return t.consumed+=r,this.extractRemaining(e,r,t.size)}extractRemaining(t,e,n){return(t-=e*n)<0?0:t}toBeConsumed(t,e,n){const r=new Map;return this.toBeConsumedYet(t,e,r,n)}toBeConsumedYet(t,e,n,r){const i=Vv.toMinutes(e);for(let a=0;a<t.length;a++){const e=t[a];if(r(e)){const t=e.gas.contentCode(),r=ny.fromSegment(e),a=this.consumedBySegment(r,i);let o=n.get(t)||0;o+=a,n.set(t,o)}}return n}consumedBySegment(t,e){const n=this.depthConverter.toBar(t.averageDepth);return t.duration*n*e}}return t.minimumRockBottom=30,t})(),iy=(()=>{class t{constructor(t,e){this.sac=t,this.maxPpO2=e,this.maxDecoPpO2=1.6}get stressSac(){return 3*this.sac}static gasSac(t,e){return t/e}gasSac(e){return t.gasSac(this.sac,e.size)}loadFrom(t){this.sac=t.sac}}return t.descSpeed=20,t.ascSpeed=10,t})();class ay{constructor(t,e,n,r,i,a,o,s,l,c){this.gfLow=t,this.gfHigh=e,this.maxPpO2=n,this.maxDecoPpO2=r,this.maxEND=i,this.isFreshWater=a,this.altitude=0,this.roundStopsToMinutes=!0,this.gasSwitchDuration=1,this.gfLow=t||.4,this.gfHigh=e||.85,this.maxPpO2=n||1.4,this.maxDecoPpO2=r||1.6,this.maxEND=i||30,this.isFreshWater=a||!1,this.addSafetyStop=o||!1,this.ascentSpeed=s||10,this.descentSpeed=l||20,this.altitude=c||0}}var oy=function(t){return t[t.ALL=1]="ALL",t[t.HALF=2]="HALF",t[t.THIRD=3]="THIRD",t}({});class sy{constructor(t){this.segment=t}static tankLabel(t){return t?`${t.startPressure}/${t.size}/${t.name}`:""}get duration(){return Vv.toMinutes(this.segment.duration)}set duration(t){this.segment.duration=Vv.toSeconds(t)}get startDepth(){return this.segment.startDepth}get endDepth(){return this.segment.endDepth}set endDepth(t){this.segment.endDepth=t}get tank(){return this.segment.tank}set tank(t){this.segment.tank=t}get tankLabel(){return sy.tankLabel(this.segment.tank)}}let ly=(()=>{class t{constructor(t,e,n,r,i){this.strategy=t,this.noDecoTime=0,this._segments=new Bv,this.onChanged=new k,this.reset(e,n,r,i),this.changed=this.onChanged.asObservable()}get length(){return this._segments.length}get minimumSegments(){return this.length>1}get notEnoughTime(){return 2===this.length&&0===this.segments[1].duration}copySegments(){return this._segments.copy()}get segments(){return this._segments.items}setSimple(t,e,n,r){this.reset(t,e,n,r),this.onChanged.next()}get maxDepth(){return this._segments.maxDepth}assignDepth(t,e,n){this._segments=Uv.createForPlan(t,this.duration,e,n),this.onChanged.next()}get duration(){return Vv.toMinutes(this._segments.duration)}assignDuration(t,e,n){this._segments=Uv.createForPlan(this.maxDepth,t,e,n),this.onChanged.next()}addSegment(e){const n=this._segments.last();this._segments.addChangeTo(n.endDepth,e.gas,t.defaultDuration).tank=e,this.onChanged.next()}removeSegment(t){this._segments.remove(t),this.onChanged.next()}fixDepths(){this._segments.fixStartDepths()}get availablePressureRatio(){return this.strategy===oy.THIRD?2/3:1}get needsReturn(){return this.strategy!==oy.ALL}get noDecoExceeded(){return this.duration>this.noDecoTime}loadFrom(t){this.strategy=t.strategy,this._segments=Bv.from(t._segments),this.onChanged.next()}reset(t,e,n,r){this._segments=Uv.createForPlan(t,e,n,r)}}return t.defaultDuration=10*Vv.oneMinute,t})();class cy{constructor(){this.calculated=!1,this.maxTime=0,this.timeToSurface=0,this.turnPressure=0,this.turnTime=0,this.needsReturn=!1,this.notEnoughGas=!1,this.notEnoughTime=!1,this.noDecoExceeded=!1,this.averageDepth=0,this.wayPoints=[],this.ceilings=[],this.events=[]}get totalDuration(){return 0===this.wayPoints.length?0:this.wayPoints[this.wayPoints.length-1].endTime}get hasErrors(){return this.calculated&&this.notEnoughTime}}var uy=function(t){return t[t.hover=0]="hover",t[t.ascent=1]="ascent",t[t.descent=2]="descent",t[t.switch=3]="switch",t}({});class dy{constructor(t,e,n=0){this.duration=t,this.selected=!1,this.startTime=0,this.endTime=0,this._startDepth=0,this._endDepth=0,this.action=uy.hover,this._gasName="",this.endTime=Math.round(100*t)/100,this._endDepth=e,this._startDepth=n,this.updateSwimAction()}get gasName(){return this._gasName}static fromSegment(t){const e=new dy(t.duration,t.endDepth),n=Nv.nameFor(t.gas.fO2,t.gas.fHe);return e._gasName=n,e}asGasSwitch(){this.action=uy.switch}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}get averageDepth(){return(this.startDepth+this.endDepth)/2}get swimAction(){return this.action}get label(){if(this.startDepth!==this.endDepth)return"";const t=`${this.endDepth} m`;let e=Math.round(this.duration).toString();return e+=" min.",`${t},${e}`}toLevel(t){const e=dy.fromSegment(t);return e.startTime=this.endTime,e.endTime=Math.round(100*(this.endTime+t.duration))/100,e._startDepth=this.endDepth,e.updateSwimAction(),e}fits(t){return this.startTime<=t&&t<this.endTime}updateSwimAction(){this.action=uy.hover,this.startDepth<this.endDepth&&(this.action=uy.descent),this.startDepth>this.endDepth&&(this.action=uy.ascent)}}class hy{constructor(t,e,n,r){this.origin=t,this.wayPoints=e,this.ceilings=n,this.events=r}static newEmpty(t){return new hy([],[],[],t)}get endsOnSurface(){const t=this.wayPoints.length;return t>0&&0===this.wayPoints[t-1].endDepth}}let fy=(()=>{class t{constructor(){this.isComplex=!1,this.diver=new iy(20,1.4),this.tanks=[ey.createDefault()],this.dive=new cy,this.options=new ay(.4,.85,1.4,1.6,30,!0,!0),this.onCalculated=new k,this.depthConverterFactory=new Mv(this.options),this.depthConverter=this.depthConverterFactory.create(),this.nitroxCalculator=new Yv(this.depthConverter),this.calculated=this.onCalculated.asObservable(),this.plan=new ly(oy.ALL,30,12,this.firstTank,this.options)}get firstTank(){return this.tanks[0]}resetToSimple(){this.tanks=this.tanks.slice(0,1),this.plan.setSimple(this.plan.maxDepth,this.plan.duration,this.firstTank,this.options)}addTank(){const t=ey.createDefault();t.size=11,this.tanks.push(t),this.calculate()}removeTank(t){this.tanks=this.tanks.filter(e=>e!==t),this.calculate()}addSegment(){this.plan.addSegment(this.firstTank),this.calculate()}removeSegment(t){this.plan.removeSegment(t),this.calculate()}changeWaterType(t){this.options.isFreshWater=t,this.calculate()}bestNitroxMix(){const t=this.nitroxCalculator.bestMix(this.options.maxPpO2,this.plan.maxDepth);return Math.round(t)}get gasMod(){return this.modForGas(this.firstTank)}switchDepth(t){return this.nitroxCalculator.gasSwitch(this.diver.maxDecoPpO2,t.o2)}modForGas(t){return this.nitroxCalculator.mod(this.diver.maxPpO2,t.o2)}noDecoTime(){const t=new Wv,e=Pv.fromTanks(this.tanks),n=this.plan.copySegments();return t.noDecoLimitMultiLevel(n,e,this.options)}assignDuration(t){this.plan.assignDuration(t,this.firstTank,this.options),this.calculate()}assignDepth(t){this.plan.assignDepth(t,this.firstTank,this.options),this.calculate()}calculate(){this.measureMethod("Planner calculate",()=>{this.options.maxPpO2=this.diver.maxPpO2,this.options.maxDecoPpO2=this.diver.maxDecoPpO2,this.depthConverter=this.depthConverterFactory.create(),this.nitroxCalculator=new Yv(this.depthConverter);const t=class{static calculateWayPoints(t,e,n){const r=[],i=this.calculateDecompression(t,e,n);if(i.errors.length>0)return hy.newEmpty(i.errors);const a=Kv.fromProfile(t.length,i.segments,i.ceilings,n);let o=dy.fromSegment(i.segments[0]);return r.push(o),i.segments.slice(1).forEach(t=>{const e=this.toWayPoint(t,o,a.items);o=e,r.push(e)}),new hy(i.segments,r,i.ceilings,a.items)}static toWayPoint(t,e,n){const r=e.toLevel(t);return n.find(t=>t.type===Dv.gasSwitch&&r.fits(t.timeStamp))&&r.asGasSwitch(),r}static calculateDecompression(t,e,n){const r=Pv.fromTanks(e),i=t.copySegments();return(new Wv).calculateDecompression(n,r,i)}}.calculateWayPoints(this.plan,this.tanks,this.options);this.dive.wayPoints=t.wayPoints,this.dive.ceilings=t.ceilings,this.dive.events=t.events,this.dive.averageDepth=Bv.averageDepth(t.origin);const e=this.plan.length;if(t.endsOnSurface){const n=new ry(this.depthConverter);this.plan.noDecoTime=this.noDecoTime(),this.measureMethod("Max bottom time",()=>{const t=this.plan.copySegments();this.dive.maxTime=n.calculateMaxBottomTime(t,this.tanks,this.diver,this.options)}),this.measureMethod("Consumption",()=>{const r=Uv.ascent(t.origin,e);this.dive.timeToSurface=Uv.timeToSurface(r),n.consumeFromTanks(t.origin,e,this.tanks,this.diver),this.dive.notEnoughTime=this.plan.notEnoughTime})}this.dive.turnPressure=this.calculateTurnPressure(),this.dive.turnTime=Math.floor(this.plan.duration/2),this.dive.needsReturn=this.plan.needsReturn&&1===this.tanks.length,this.dive.notEnoughGas=!ty.haveReserve(this.tanks),this.dive.noDecoExceeded=this.plan.noDecoExceeded,this.dive.calculated=!0}),this.onCalculated.next()}loadFrom(t){t&&(this.plan.loadFrom(t.plan),this.diver.loadFrom(t.diver),t.tanks.length>0&&this.firstTank.loadFrom(t.tanks[0]))}measureMethod(t,e){const n=performance.now();e();const r=performance.now(),i=Math.round(r-n);console.log(t+`: ${i} ms`)}calculateTurnPressure(){return this.firstTank.startPressure-Math.floor(this.firstTank.consumed/2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),py=(()=>{class t{constructor(t){this.planner=t}loadDefaults(){const e=localStorage.getItem(t.storageKey);if(!e)return;const n=JSON.parse(e);this.planner.loadFrom(n)}saveDefaults(){const e=JSON.stringify(this.planner);localStorage.setItem(t.storageKey,e)}disableDisclaimer(){localStorage.setItem(t.disclaimerKey,t.disclaimerValue)}disclaimerEnabled(){return localStorage.getItem(t.disclaimerKey)!==t.disclaimerValue}}return t.disclaimerValue="confirmed",t.storageKey="preferences",t.disclaimerKey="disclaimer",t.\u0275fac=function(e){return new(e||t)(dr(fy))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const gy=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function my(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new vy(t,e,n))}}class vy{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new yy(t,this.accumulator,this.seed,this.hasSeed))}}class yy extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function by(t){return function(e){const n=new xy(t),r=e.lift(n);return n.caught=r}}class xy{constructor(t){this.selector=t}call(t,e){return e.subscribe(new _y(t,this.selector,this.caught))}}class _y extends z{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new F(this);this.add(r);const i=V(n,r);i!==r&&this.add(i)}}}function wy(t,e){return H(t,e,1)}function ky(t){return function(e){return 0===t?wf():e.lift(new Ty(t))}}class Ty{constructor(t){if(this.total=t,this.total<0)throw new ip}call(t,e){return e.subscribe(new My(t,this.total))}}class My extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ay(t=Dy){return e=>e.lift(new Cy(t))}class Cy{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Sy(t,this.errorFactory))}}class Sy extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(aT){t=aT}this.destination.error(t)}}}function Dy(){return new gy}function Oy(t=null){return e=>e.lift(new Ey(t))}class Ey{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ly(t,this.defaultValue))}}class Ly extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Py(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ep((e,n)=>t(e,n,r)):v,ap(1),n?Oy(e):Ay(()=>new gy))}class Iy{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Ry(t,this.callback))}}class Ry extends p{constructor(t,e){super(t),this.add(new d(e))}}class Ny{constructor(t,e){this.id=t,this.url=e}}class Fy extends Ny{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zy extends Ny{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vy extends Ny{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Hy extends Ny{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jy extends Ny{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class By extends Ny{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uy extends Ny{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qy extends Ny{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gy extends Ny{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zy{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wy{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $y{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yy{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xy{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qy{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ky{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Jy="primary";class tb{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function eb(t){return new tb(t)}function nb(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function rb(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let a=0;a<r.length;a++){const e=r[a],n=t[a];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ib(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let a=0;a<n.length;a++)if(i=n[a],!ab(t[i],e[i]))return!1;return!0}function ab(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function ob(t){return Array.prototype.concat.apply([],t)}function sb(t){return t.length>0?t[t.length-1]:null}function lb(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function cb(t){return No(t)?t:Ro(t)?N(Promise.resolve(t)):kf(t)}const ub={exact:function t(e,n,r){if(!bb(e.segments,n.segments))return!1;if(!gb(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:fb},db={exact:function(t,e){return ib(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ab(t[n],e[n]))},ignored:()=>!0};function hb(t,e,n){return ub[n.paths](t.root,e.root,n.matrixParams)&&db[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function fb(t,e,n){return pb(t,e,e.segments,n)}function pb(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!bb(i,n)&&!e.hasChildren()&&!!gb(i,n,r)}if(t.segments.length===n.length){if(!bb(t.segments,n))return!1;if(!gb(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!fb(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),a=n.slice(t.segments.length);return!!bb(t.segments,i)&&!!gb(t.segments,i,r)&&!!t.children.primary&&pb(t.children.primary,e,a,r)}}function gb(t,e,n){return e.every((e,r)=>db[n](t[r].parameters,e.parameters))}class mb{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eb(this.queryParams)),this._queryParamMap}toString(){return wb.serialize(this)}}class vb{constructor(t,e){this.segments=t,this.children=e,this.parent=null,lb(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kb(this)}}class yb{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=eb(this.parameters)),this._parameterMap}toString(){return Ob(this)}}function bb(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class xb{}class _b{parse(t){const e=new Rb(t);return new mb(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Tb(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Ab(e)}=${Ab(t)}`).join("&"):`${Ab(e)}=${Ab(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const wb=new _b;function kb(t){return t.segments.map(t=>Ob(t)).join("/")}function Tb(t,e){if(!t.hasChildren())return kb(t);if(e){const e=t.children.primary?Tb(t.children.primary,!1):"",n=[];return lb(t.children,(t,e)=>{e!==Jy&&n.push(`${e}:${Tb(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return lb(t.children,(t,r)=>{r===Jy&&(n=n.concat(e(t,r)))}),lb(t.children,(t,r)=>{r!==Jy&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Jy?[Tb(t.children.primary,!1)]:[`${n}:${Tb(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${kb(t)}/${e[0]}`:`${kb(t)}/(${e.join("//")})`}}function Mb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ab(t){return Mb(t).replace(/%3B/gi,";")}function Cb(t){return Mb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sb(t){return decodeURIComponent(t)}function Db(t){return Sb(t.replace(/\+/g,"%20"))}function Ob(t){return`${Cb(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Cb(t)}=${Cb(e[t])}`).join("")}`;var e}const Eb=/^[^\/()?;=#]+/;function Lb(t){const e=t.match(Eb);return e?e[0]:""}const Pb=/^[^=?&#]+/,Ib=/^[^?&#]+/;class Rb{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vb([],{}):new vb([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new vb(t,e)),n}parseSegment(){const t=Lb(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new yb(Sb(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Lb(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Lb(this.remaining);t&&(n=t,this.capture(n))}t[Sb(e)]=Sb(n)}parseQueryParam(t){const e=function(t){const e=t.match(Pb);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ib);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Db(e),i=Db(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Lb(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Jy);const a=this.parseChildren();e[i]=1===Object.keys(a).length?a.primary:new vb([],a),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Nb{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Fb(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Fb(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=zb(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return zb(t,this._root).map(t=>t.value)}}function Fb(t,e){if(t===e.value)return e;for(const n of e.children){const e=Fb(t,n);if(e)return e}return null}function zb(t,e){if(t===e.value)return[e];for(const n of e.children){const r=zb(t,n);if(r.length)return r.unshift(e),r}return[]}class Vb{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Hb(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class jb extends Nb{constructor(t,e){super(t),this.snapshot=e,Wb(this,t)}toString(){return this.snapshot.toString()}}function Bb(t,e){const n=function(t,e){const n=new Gb([],{},{},"",{},Jy,e,null,t.root,-1,{});return new Zb("",new Vb(n,[]))}(t,e),r=new Vf([new yb("",{})]),i=new Vf({}),a=new Vf({}),o=new Vf({}),s=new Vf(""),l=new Ub(r,i,o,s,a,Jy,e,n.root);return l.snapshot=n.root,new jb(new Vb(l,[]),n)}class Ub{constructor(t,e,n,r,i,a,o,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=a,this.component=o,this._futureSnapshot=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(A(t=>eb(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(A(t=>eb(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qb(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Gb{constructor(t,e,n,r,i,a,o,s,l,c,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=a,this.component=o,this.routeConfig=s,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=eb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zb extends Nb{constructor(t,e){super(e),this.url=t,Wb(this,e)}toString(){return $b(this._root)}}function Wb(t,e){e.value._routerState=t,e.children.forEach(e=>Wb(t,e))}function $b(t){const e=t.children.length>0?` { ${t.children.map($b).join(", ")} } `:"";return`${t.value}${e}`}function Yb(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ib(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ib(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ib(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ib(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Xb(t,e){var n,r;return ib(t.params,e.params)&&bb(n=t.url,r=e.url)&&n.every((t,e)=>ib(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Xb(t.parent,e.parent))}function Qb(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Qb(t,e,r);return Qb(t,e)})}(t,e,n);return new Vb(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Kb(e,t),t}}const n=new Ub(new Vf((r=e.value).url),new Vf(r.params),new Vf(r.queryParams),new Vf(r.fragment),new Vf(r.data),r.outlet,r.component,r),i=e.children.map(e=>Qb(t,e));return new Vb(n,i)}var r}function Kb(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Kb(t.children[n],e.children[n])}function Jb(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function tx(t){return"object"==typeof t&&null!=t&&t.outlets}function ex(t,e,n,r,i){let a={};return r&&lb(r,(t,e)=>{a[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new mb(n.root===t?e:nx(n.root,t,e),a,i)}function nx(t,e,n){const r={};return lb(t.children,(t,i)=>{r[i]=t===e?n:nx(t,e,n)}),new vb(t.segments,r)}class rx{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Jb(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(tx);if(r&&r!==sb(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ix{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ax(t,e,n){if(t||(t=new vb([],{})),0===t.segments.length&&t.hasChildren())return ox(t,e,n);const r=function(t,e,n){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return a;const e=t.segments[i],o=n[r];if(tx(o))break;const s=`${o}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&l&&"object"==typeof l&&void 0===l.outlets){if(!ux(s,l,e))return a;r+=2}else{if(!ux(s,{},e))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new vb(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new vb(t.segments.slice(r.pathIndex),t.children),ox(e,0,i)}return r.match&&0===i.length?new vb(t.segments,{}):r.match&&!t.hasChildren()?sx(t,e,n):r.match?ox(t,0,i):sx(t,e,n)}function ox(t,e,n){if(0===n.length)return new vb(t.segments,{});{const r=function(t){return tx(t[0])?t[0].outlets:{[Jy]:t}}(n),i={};return lb(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=ax(t.children[r],e,n))}),lb(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new vb(t.segments,i)}}function sx(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const a=n[i];if(tx(a)){const t=lx(a.outlets);return new vb(r,t)}if(0===i&&Jb(n[0])){r.push(new yb(t.segments[e].path,cx(n[0]))),i++;continue}const o=tx(a)?a.outlets.primary:`${a}`,s=i<n.length-1?n[i+1]:null;o&&s&&Jb(s)?(r.push(new yb(o,cx(s))),i+=2):(r.push(new yb(o,{})),i++)}return new vb(r,{})}function lx(t){const e={};return lb(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=sx(new vb([],{}),0,t))}),e}function cx(t){const e={};return lb(t,(t,n)=>e[n]=`${t}`),e}function ux(t,e,n){return t==n.path&&ib(e,n.parameters)}class dx{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Yb(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Hb(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),lb(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Hb(t);for(const a of Object.keys(i))this.deactivateRouteAndItsChildren(i[a],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Hb(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Qy(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Yy(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Yb(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),hx(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function hx(t){Yb(t.value),t.children.forEach(hx)}class fx{constructor(t,e){this.routes=t,this.module=e}}function px(t){return"function"==typeof t}function gx(t){return t instanceof mb}const mx=Symbol("INITIAL_VALUE");function vx(){return lp(t=>function(...t){let e,n;return M(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),q(t,n).lift(new jf(e))}(t.map(t=>t.pipe(ap(1),function(...t){const e=t[t.length-1];return M(e)?(t.pop(),n=>Qf(t,n,e)):e=>Qf(t,e)}(mx)))).pipe(my((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==mx)return t;if(r===mx&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||gx(r))return r}return t},t)},mx),ep(t=>t!==mx),A(t=>gx(t)?t:!0===t),ap(1)))}let yx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Po(0,"router-outlet")},directives:function(){return[p_]},encapsulation:2}),t})();function bx(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];xx(r,_x(e,r))}}function xx(t,e){t.children&&bx(t.children,e)}function _x(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function wx(t){const e=t.children&&t.children.map(wx),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Jy&&(n.component=yx),n}function kx(t){return t.outlet||Jy}function Tx(t,e){const n=t.filter(t=>kx(t)===e);return n.push(...t.filter(t=>kx(t)!==e)),n}const Mx={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ax(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Mx):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||rb)(n,t,e);if(!i)return Object.assign({},Mx);const a={};lb(i.posParams,(t,e)=>{a[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Cx(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Sx(t,e,n)&&kx(n)!==Jy)}(t,n,r)){const i=new vb(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const a of n)if(""===a.path&&kx(a)!==Jy){const n=new vb([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[kx(a)]=n}return i}(t,e,r,new vb(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Sx(t,e,n))}(t,n,r)){const a=new vb(t.segments,function(t,e,n,r,i,a){const o={};for(const s of r)if(Sx(t,n,s)&&!i[kx(s)]){const n=new vb([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===a?t.segments.length:e.length,o[kx(s)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}const a=new vb(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}function Sx(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Dx(t,e,n,r){return!!(kx(t)===r||r!==Jy&&Sx(e,n,t))&&("**"===t.path||Ax(e,t,n).matched)}function Ox(t,e,n){return 0===e.length&&!t.children[n]}class Ex{constructor(t){this.segmentGroup=t||null}}class Lx{constructor(t){this.urlTree=t}}function Px(t){return new y(e=>e.error(new Ex(t)))}function Ix(t){return new y(e=>e.error(new Lx(t)))}function Rx(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Nx{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(yl)}apply(){const t=Cx(this.urlTree.root,[],[],this.config).segmentGroup,e=new vb(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Jy).pipe(A(t=>this.createUrlTree(Fx(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(by(t=>{if(t instanceof Lx)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Ex)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Jy).pipe(A(e=>this.createUrlTree(Fx(e),t.queryParams,t.fragment))).pipe(by(t=>{if(t instanceof Ex)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new vb([],{[Jy]:t}):t;return new mb(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(A(t=>new vb([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return N(r).pipe(wy(r=>{const i=n.children[r],a=Tx(e,r);return this.expandSegmentGroup(t,a,i,r).pipe(A(t=>({segment:t,outlet:r})))}),my((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ep((e,n)=>t(e,n,r)):v,ky(1),n?Oy(e):Ay(()=>new gy))}())}expandSegment(t,e,n,r,i,a){return N(n).pipe(wy(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,a).pipe(by(t=>{if(t instanceof Ex)return kf(null);throw t}))),Py(t=>!!t),by((t,n)=>{if(t instanceof gy||"EmptyError"===t.name){if(Ox(e,r,i))return kf(new vb([],{}));throw new Ex(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,a,o){return Dx(r,e,i,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,a):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a):Px(e):Px(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ix(i):this.lineralizeSegments(n,i).pipe(H(n=>{const i=new vb(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,a){const{matched:o,consumedSegments:s,lastChild:l,positionalParamSegments:c}=Ax(e,r,i);if(!o)return Px(e);const u=this.applyRedirectCommands(s,r.redirectTo,c);return r.redirectTo.startsWith("/")?Ix(u):this.lineralizeSegments(r,u).pipe(H(r=>this.expandSegment(t,e,n,r.concat(i.slice(l)),a,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?kf(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(A(t=>(n._loadedConfig=t,new vb(r,{})))):kf(new vb(r,{}));const{matched:a,consumedSegments:o,lastChild:s}=Ax(e,n,r);if(!a)return Px(e);const l=r.slice(s);return this.getChildConfig(t,n,r).pipe(H(t=>{const r=t.module,a=t.routes,{segmentGroup:s,slicedSegments:c}=Cx(e,o,l,a),u=new vb(s.segments,s.children);if(0===c.length&&u.hasChildren())return this.expandChildren(r,a,u).pipe(A(t=>new vb(o,t)));if(0===a.length&&0===c.length)return kf(new vb(o,{}));const d=kx(n)===i;return this.expandSegment(r,u,a,c,d?Jy:i,!0).pipe(A(t=>new vb(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?kf(new fx(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?kf(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(H(n=>n?this.configLoader.load(t.injector,e).pipe(A(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error(nb(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):kf(new fx([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?kf(r.map(r=>{const i=t.get(r);let a;if(function(t){return t&&px(t.canLoad)}(i))a=i.canLoad(e,n);else{if(!px(i))throw new Error("Invalid CanLoad guard");a=i(e,n)}return cb(a)})).pipe(vx(),dp(t=>{if(!gx(t))return;const e=nb(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),A(t=>!0===t)):kf(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return kf(n);if(r.numberOfChildren>1||!r.children.primary)return Rx(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new mb(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return lb(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let a={};return lb(e.children,(e,i)=>{a[i]=this.createSegmentGroup(t,e,n,r)}),new vb(i,a)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Fx(t){const e={};for(const n of Object.keys(t.children)){const r=Fx(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new vb(t.segments.concat(e.segments),e.children)}return t}(new vb(t.segments,e))}class zx{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Vx{constructor(t,e){this.component=t,this.route=e}}function Hx(t,e,n){const r=t._root;return Bx(r,e?e._root:null,n,[r.value])}function jx(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Bx(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Hb(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,o=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!bb(t.url,e.url);case"pathParamsOrQueryParamsChange":return!bb(t.url,e.url)||!ib(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xb(t,e)||!ib(t.queryParams,e.queryParams);case"paramsChange":default:return!Xb(t,e)}}(o,a,a.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new zx(r)):(a.data=o.data,a._resolvedData=o._resolvedData),Bx(t,e,a.component?s?s.children:null:n,r,i),l&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new Vx(s.outlet.component,o))}else o&&Ux(e,s,i),i.canActivateChecks.push(new zx(r)),Bx(t,null,a.component?s?s.children:null:n,r,i)}(t,a[t.value.outlet],n,r.concat([t.value]),i),delete a[t.value.outlet]}),lb(a,(t,e)=>Ux(t,n.getContext(e),i)),i}function Ux(t,e,n){const r=Hb(t),i=t.value;lb(r,(t,r)=>{Ux(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Vx(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class qx{}function Gx(t){return new y(e=>e.error(t))}class Zx{constructor(t,e,n,r,i,a){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=a}recognize(){const t=Cx(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Jy);if(null===e)return null;const n=new Gb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Jy,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Vb(n,e),i=new Zb(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=qb(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],a=Tx(t,i),o=this.processSegmentGroup(a,r,i);if(null===o)return null;n.push(...o)}const r=$x(n);return r.sort((t,e)=>t.value.outlet===Jy?-1:e.value.outlet===Jy?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Ox(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Dx(t,e,n,r))return null;let i,a=[],o=[];if("**"===t.path){const r=n.length>0?sb(n).parameters:{};i=new Gb(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qx(t),kx(t),t.component,t,Yx(e),Xx(e)+n.length,Kx(t))}else{const r=Ax(e,t,n);if(!r.matched)return null;a=r.consumedSegments,o=n.slice(r.lastChild),i=new Gb(a,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qx(t),kx(t),t.component,t,Yx(e),Xx(e)+a.length,Kx(t))}const s=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:c}=Cx(e,a,o,s.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const t=this.processChildren(s,l);return null===t?null:[new Vb(i,t)]}if(0===s.length&&0===c.length)return[new Vb(i,[])];const u=kx(t)===r,d=this.processSegment(s,l,c,u?Jy:r);return null===d?null:[new Vb(i,d)]}}function Wx(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function $x(t){const e=[],n=new Set;for(const r of t){if(!Wx(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=$x(r.children);e.push(new Vb(r.value,t))}return e.filter(t=>!n.has(t))}function Yx(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Xx(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Qx(t){return t.data||{}}function Kx(t){return t.resolve||{}}function Jx(t){return lp(e=>{const n=t(e);return n?N(n).pipe(A(()=>e)):kf(e)})}class t_ extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const e_=new Wn("ROUTES");class n_{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(A(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new fx(ob(r.injector.get(e_,void 0,wt.Self|wt.Optional)).map(wx),r)}),by(t=>{throw e._loader$=void 0,t}));return e._loader$=new Y(n,()=>new k).pipe(Z()),e._loader$}loadModuleFactory(t){return"string"==typeof t?N(this.loader.load(t)):cb(t()).pipe(H(t=>t instanceof bl?kf(t):N(this.compiler.compileModuleAsync(t))))}}class r_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new i_,this.attachRef=null}}class i_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new r_,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class a_{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function o_(t){throw t}function s_(t,e,n){return e.parse("/")}function l_(t,e){return kf(null)}const c_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},u_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let d_=(()=>{class t{constructor(t,e,n,r,i,a,o,s){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=s,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new k,this.errorHandler=o_,this.malformedUriErrorHandler=s_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:l_,afterPreactivation:l_},this.urlHandlingStrategy=new a_,this.routeReuseStrategy=new t_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=i.get(yl),this.console=i.get(mc);const l=i.get(Dc);this.isNgZoneEnabled=l instanceof Dc&&Dc.isInAngularZone(),this.resetConfig(s),this.currentUrlTree=new mb(new vb([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new n_(a,o,t=>this.triggerEvent(new Zy(t)),t=>this.triggerEvent(new Wy(t))),this.routerState=Bb(this.currentUrlTree,this.rootComponentType),this.transitions=new Vf({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ep(t=>0!==t.id),A(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),lp(t=>{let n=!1,r=!1;return kf(t).pipe(dp(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lp(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return kf(t).pipe(lp(t=>{const n=this.transitions.getValue();return e.next(new Fy(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?_f:Promise.resolve(t)}),function(t,e,n,r){return lp(i=>function(t,e,n,r,i){return new Nx(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(A(t=>Object.assign(Object.assign({},i),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),dp(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return H(a=>function(t,e,n,r,i="emptyOnly",a="legacy"){try{const o=new Zx(t,e,n,r,i,a).recognize();return null===o?Gx(new qx):kf(o)}catch(aT){return Gx(aT)}}(t,e,a.urlAfterRedirects,n(a.urlAfterRedirects),r,i).pipe(A(t=>Object.assign(Object.assign({},a),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),dp(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new jy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:a,extras:o}=t,s=new Fy(n,this.serializeUrl(r),i,a);e.next(s);const l=Bb(r,this.rootComponentType).snapshot;return kf(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),_f}),Jx(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:a,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!a,replaceUrl:!!o})}),dp(t=>{const e=new By(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),A(t=>Object.assign(Object.assign({},t),{guards:Hx(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return H(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:o}}=n;return 0===o.length&&0===a.length?kf(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return N(t).pipe(H(t=>function(t,e,n,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?kf(a.map(a=>{const o=jx(a,e,i);let s;if(function(t){return t&&px(t.canDeactivate)}(o))s=cb(o.canDeactivate(t,e,n,r));else{if(!px(o))throw new Error("Invalid CanDeactivate guard");s=cb(o(t,e,n,r))}return s.pipe(Py())})).pipe(vx()):kf(!0)}(t.component,t.route,n,e,r)),Py(t=>!0!==t,!0))}(o,r,i,t).pipe(H(n=>n&&"boolean"==typeof n?function(t,e,n,r){return N(e).pipe(wy(e=>Qf(function(t,e){return null!==t&&e&&e(new $y(t)),kf(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Xy(t)),kf(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>cv(()=>kf(e.guards.map(i=>{const a=jx(i,e.node,n);let o;if(function(t){return t&&px(t.canActivateChild)}(a))o=cb(a.canActivateChild(r,t));else{if(!px(a))throw new Error("Invalid CanActivateChild guard");o=cb(a(r,t))}return o.pipe(Py())})).pipe(vx())));return kf(i).pipe(vx())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?kf(r.map(r=>cv(()=>{const i=jx(r,e,n);let a;if(function(t){return t&&px(t.canActivate)}(i))a=cb(i.canActivate(e,t));else{if(!px(i))throw new Error("Invalid CanActivate guard");a=cb(i(e,t))}return a.pipe(Py())}))).pipe(vx()):kf(!0)}(t,e.route,n))),Py(t=>!0!==t,!0))}(r,a,t,e):kf(n)),A(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),dp(t=>{if(gx(t.guardsResult)){const e=nb(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Uy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ep(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Vy(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Jx(t=>{if(t.guards.canActivateChecks.length)return kf(t).pipe(dp(t=>{const e=new qy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),lp(t=>{let n=!1;return kf(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,H(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return kf(t);let a=0;return N(n).pipe(wy(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return kf({});const a={};return N(i).pipe(H(i=>function(t,e,n,r){const i=jx(t,e,r);return cb(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(dp(t=>{a[i]=t}))),ky(1),H(()=>Object.keys(a).length===i.length?kf(a):_f))}(t._resolve,t,e,r).pipe(A(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),qb(t,n).resolve),null)))}(t.route,e,r,i)),dp(()=>a++),ky(1),H(e=>a===n.length?kf(t):_f))})),dp({next:()=>n=!0,complete:()=>{if(!n){const n=new Vy(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),dp(t=>{const e=new Gy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Jx(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:a,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!a,replaceUrl:!!o})}),A(t=>{const e=function(t,e,n){const r=Qb(t,e._root,n?n._root:void 0);return new jb(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),dp(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(a=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),A(t=>(new dx(o,t.targetRouterState,t.currentRouterState,s).activate(a),t))),dp({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Vy(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Iy(i))),by(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=gx(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Vy(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Hy(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(a){t.reject(a)}}var i;return _f}));var i,a,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){bx(t),this.config=t.map(wx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:a,preserveFragment:o}=e,s=n||this.routerState.root,l=o?this.currentUrlTree.fragment:i;let c=null;switch(a){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return ex(e.root,e.root,e,r,i);const a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new rx(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return lb(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new rx(n,e,r)}(n);if(a.toRoot())return ex(e.root,new vb([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new ix(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new ix(t,t===e.root,0)}const r=Jb(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,a=n;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ix(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(a,e,t),s=o.processChildren?ox(o.segmentGroup,o.index,a.commands):ax(o.segmentGroup,o.index,a.commands);return ex(o.segmentGroup,s,e,r,i)}(s,this.currentUrlTree,t,c,null!=l?l:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=gx(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(aT){e=this.malformedUriErrorHandler(aT,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},c_):!1===e?Object.assign({},u_):e,gx(t))return hb(this.currentUrlTree,t,n);const r=this.parseUrl(t);return hb(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new zy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),o="imperative"!==e&&"imperative"===(null==a?void 0:a.source),s=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(o&&s)return Promise.resolve(!0);let l,c,u;i?(l=i.resolve,c=i.reject,u=i.promise):u=new Promise((t,e)=>{l=t,c=e});const d=++this.navigationId;return this.setTransition({id:d,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(dr(Yn),dr(xb),dr(i_),dr(wu),dr(co),dr(Qc),dr(Ac),dr(void 0))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),h_=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new k,this.subscription=t.events.subscribe(t=>{t instanceof zy&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const a={skipLocationChange:f_(this.skipLocationChange),replaceUrl:f_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:f_(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(So(d_),So(Ub),So(vu))},t.\u0275dir=Xt({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Fo("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(fs("href",e.href,ei),Mo("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[ue]}),t})();function f_(t){return""===t||!!t}let p_=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new ql,this.deactivateEvents=new ql,this.name=r||Jy,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new g_(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(So(i_),So(_l),So(Ps),("name",function(t,e){const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(vn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Re(),"name")),So(cl))},t.\u0275dir=Xt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class g_{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ub?this.route:t===i_?this.childContexts:this.parent.get(t,e)}}class m_{}class v_{preload(t,e){return kf(null)}}let y_=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new n_(e,n,e=>t.triggerEvent(new Zy(e)),e=>t.triggerEvent(new Wy(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ep(t=>t instanceof zy),wy(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(yl);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return N(n).pipe(U(),A(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?kf(e._loadedConfig):this.loader.load(t.injector,e)).pipe(H(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(dr(d_),dr(Qc),dr(Ac),dr(co),dr(m_))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),b_=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Fy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zy&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ky&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ky(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(dr(d_),dr(wd),dr(void 0))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const x_=new Wn("ROUTER_CONFIGURATION"),__=new Wn("ROUTER_FORROOT_GUARD"),w_=[wu,{provide:xb,useClass:_b},{provide:d_,useFactory:function(t,e,n,r,i,a,o,s={},l,c){const u=new d_(null,t,e,n,r,i,a,ob(o));return l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(s,u),s.enableTracing&&u.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),u},deps:[xb,i_,wu,co,Qc,Ac,e_,x_,[class{},new gr],[class{},new gr]]},i_,{provide:Ub,useFactory:function(t){return t.routerState.root},deps:[d_]},{provide:Qc,useClass:tu},y_,v_,class{preload(t,e){return e().pipe(by(()=>kf(null)))}},{provide:x_,useValue:{enableTracing:!1}}];function k_(){return new qc("Router",d_)}let T_=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[w_,S_(e),{provide:__,useFactory:C_,deps:[[d_,new gr,new mr]]},{provide:x_,useValue:n||{}},{provide:vu,useFactory:A_,deps:[lu,[new pr(bu),new gr],x_]},{provide:b_,useFactory:M_,deps:[d_,wd,x_]},{provide:m_,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:v_},{provide:qc,multi:!0,useFactory:k_},[D_,{provide:lc,multi:!0,useFactory:O_,deps:[D_]},{provide:L_,useFactory:E_,deps:[D_]},{provide:gc,multi:!0,useExisting:L_}]]}}static forChild(e){return{ngModule:t,providers:[S_(e)]}}}return t.\u0275fac=function(e){return new(e||t)(dr(__,8),dr(d_,8))},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({}),t})();function M_(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new b_(t,e,n)}function A_(t,e,n={}){return n.useHash?new _u(t,e):new xu(t,e)}function C_(t){return"guarded"}function S_(t){return[{provide:$n,multi:!0,useValue:t},{provide:e_,multi:!0,useValue:t}]}let D_=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new k}appInitializer(){return this.injector.get(uu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(d_),r=this.injector.get(x_);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?kf(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(x_),n=this.injector.get(y_),r=this.injector.get(b_),i=this.injector.get(d_),a=this.injector.get(Yc);t===a.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(dr(co))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function O_(t){return t.appInitializer.bind(t)}function E_(t){return t.bootstrapListener.bind(t)}const L_=new Wn("Router Initializer");function P_(t,e){if(1&t){const t=Io();Eo(0,"button",18),Fo("click",function(){return Ie(t),Ho().addToHomeScreen()}),cs(1,"Add to Home screen"),Lo()}}let I_=(()=>{class t{constructor(t){this.preferences=t,this.isNavbarCollapsed=!0,this.showInstallButton=!1}saveDefaults(){this.preferences.saveDefaults()}loadDefaults(){this.preferences.loadDefaults()}onbeforeinstallprompt(t){t.preventDefault(),this.deferredPrompt=t,this.showInstallButton=!0}addToHomeScreen(){this.showInstallButton=!1,this.deferredPrompt&&(this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(t=>{this.deferredPrompt=null}))}}return t.\u0275fac=function(e){return new(e||t)(So(py))},t.\u0275cmp=qt({type:t,selectors:[["app-mainmenu"]],hostBindings:function(t,e){1&t&&Fo("beforeinstallprompt",function(t){return e.onbeforeinstallprompt(t)},!1,ui)},decls:30,vars:2,consts:[[1,"navbar","navbar-expand-md","navbar-dark","bg-primary","fixed-top"],["routerLink","/",1,"navbar-brand","ps-3"],["type","button","data-target","#navbarsDefault","aria-controls","navbarsDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","hidden-sm-up",3,"click"],[1,"navbar-toggler-icon"],["id","navbarsDefault",1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav","mr-auto"],["ngbDropdown","",1,"nav-item","dropdown"],["id","id01","ngbDropdownToggle","",1,"nav-link","dropdown-toggle"],["aria-labelledby","id01","ngbDropdownMenu","",1,"dropdown-menu"],["routerLink","/sac",1,"dropdown-item"],["routerLink","/nitrox",1,"dropdown-item"],["id","id02","ngbDropdownToggle","",1,"nav-link","dropdown-toggle"],["aria-labelledby","id02","ngbDropdownMenu","",1,"dropdown-menu"],["routerLink","/diver",1,"dropdown-item"],[1,"dropdown-item",3,"click"],["routerLink","/about",1,"nav-link"],[1,"nav","navbar-nav","navbar-right"],["class","btn btn-success btn-small mr-auto",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-small","mr-auto",3,"click"]],template:function(t,e){1&t&&(Eo(0,"nav",0),Eo(1,"a",1),cs(2,"Gas planner"),Lo(),Eo(3,"button",2),Fo("click",function(){return e.isNavbarCollapsed=!e.isNavbarCollapsed}),Po(4,"span",3),Lo(),Eo(5,"div",4),Eo(6,"ul",5),Eo(7,"li",6),Eo(8,"a",7),cs(9,"Calculators"),Lo(),Eo(10,"div",8),Eo(11,"a",9),cs(12,"Sac"),Lo(),Eo(13,"a",10),cs(14,"Nitrox"),Lo(),Lo(),Lo(),Eo(15,"li",6),Eo(16,"a",11),cs(17,"Settings"),Lo(),Eo(18,"div",12),Eo(19,"a",13),cs(20,"Edit"),Lo(),Eo(21,"a",14),Fo("click",function(){return e.saveDefaults()}),cs(22,"Save defaults"),Lo(),Eo(23,"a",14),Fo("click",function(){return e.loadDefaults()}),cs(24,"Reload defaults"),Lo(),Lo(),Lo(),Eo(25,"a",15),cs(26,"About"),Lo(),Lo(),Eo(27,"ul",16),Eo(28,"li"),Ao(29,P_,2,0,"button",17),Lo(),Lo(),Lo(),Lo()),2&t&&(Ji(5),Do("ngbCollapse",e.isNavbarCollapsed),Ji(24),Do("ngIf",e.showInstallButton))},directives:[Kp,h_,Hp,rg,ng,tg,pd],styles:[""]}),t})(),R_=(()=>{class t{constructor(){this.appVersion="0.1.10"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["app-footer"]],decls:5,vars:1,consts:[[1,"mt-5"],[1,"page-footer","font-small","bg-light","fixed-bottom","d-none","d-lg-block"],[1,"footer-copyright","text-center","py-2"],[1,"text-muted"]],template:function(t,e){1&t&&(Po(0,"div",0),Eo(1,"footer",1),Eo(2,"div",2),Eo(3,"span",3),cs(4),Lo(),Lo(),Lo()),2&t&&(Ji(4),ds("\xa9 2020 JIRI POKORNY, Version ",e.appVersion,""))},styles:[""]}),t})(),N_=(()=>{class t{constructor(t,e){e.calculate(),t.available.subscribe(e=>{t.activateUpdate().then(()=>{document.location.reload()})})}}return t.\u0275fac=function(e){return new(e||t)(So(fv),So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(t,e){1&t&&(Po(0,"app-mainmenu"),Po(1,"router-outlet"),Po(2,"app-footer"))},directives:[I_,p_,R_],styles:[""]}),t})();function F_(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(r,i)}function z_(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){F_(a,r,i,o,s,"next",t)}function s(t){F_(a,r,i,o,s,"throw",t)}o(void 0)})}}var V_={prefix:"fas",iconName:"arrow-down",icon:[448,512,[],"f063","M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"]},H_={prefix:"fas",iconName:"arrow-right",icon:[448,512,[],"f061","M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"]},j_={prefix:"fas",iconName:"arrow-up",icon:[448,512,[],"f062","M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"]},B_={prefix:"fas",iconName:"battery-half",icon:[640,512,[],"f242","M544 160v64h32v64h-32v64H64V160h480m16-64H48c-26.51 0-48 21.49-48 48v224c0 26.51 21.49 48 48 48h512c26.51 0 48-21.49 48-48v-16h8c13.255 0 24-10.745 24-24V184c0-13.255-10.745-24-24-24h-8v-16c0-26.51-21.49-48-48-48zm-240 96H96v128h224V192z"]},U_={prefix:"fas",iconName:"calculator",icon:[448,512,[],"f1ec","M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"]},q_={prefix:"fas",iconName:"chart-area",icon:[512,512,[],"f1fe","M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5L288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z"]},G_={prefix:"fas",iconName:"cog",icon:[512,512,[],"f013","M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"]},Z_={prefix:"fas",iconName:"exclamation-circle",icon:[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"]},W_={prefix:"fas",iconName:"exclamation-triangle",icon:[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"]},$_={prefix:"fas",iconName:"layer-group",icon:[512,512,[],"f5fd","M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"]},Y_={prefix:"fas",iconName:"plus-square",icon:[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"]},X_={prefix:"fas",iconName:"random",icon:[512,512,[],"f074","M504.971 359.029c9.373 9.373 9.373 24.569 0 33.941l-80 79.984c-15.01 15.01-40.971 4.49-40.971-16.971V416h-58.785a12.004 12.004 0 0 1-8.773-3.812l-70.556-75.596 53.333-57.143L352 336h32v-39.981c0-21.438 25.943-31.998 40.971-16.971l80 79.981zM12 176h84l52.781 56.551 53.333-57.143-70.556-75.596A11.999 11.999 0 0 0 122.785 96H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12zm372 0v39.984c0 21.46 25.961 31.98 40.971 16.971l80-79.984c9.373-9.373 9.373-24.569 0-33.941l-80-79.981C409.943 24.021 384 34.582 384 56.019V96h-58.785a12.004 12.004 0 0 0-8.773 3.812L96 336H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h110.785c3.326 0 6.503-1.381 8.773-3.812L352 176h32z"]},Q_={prefix:"fas",iconName:"sliders-h",icon:[512,512,[],"f1de","M496 384H160v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h80v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h336c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160h-80v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h336v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h80c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160H288V48c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16C7.2 64 0 71.2 0 80v32c0 8.8 7.2 16 16 16h208v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h208c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16z"]},K_={prefix:"fas",iconName:"tasks",icon:[512,512,[],"f0ae","M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"]},J_={prefix:"fas",iconName:"trash-alt",icon:[448,512,[],"f2ed","M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"]},tw={prefix:"fas",iconName:"user-cog",icon:[640,512,[],"f4fe","M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"]};function ew(t,e){1&t&&(Eo(0,"div",19),cs(1,"Needs to be number 5-90 L/min."),Lo())}function nw(t,e){1&t&&(Eo(0,"div",19),cs(1,"Needs to be number 0.21-3"),Lo())}function rw(t,e){1&t&&(Eo(0,"div",19),cs(1,"Needs to be number 0.21-3"),Lo())}const iw=function(){return[5,90]},aw=function(){return[.21,3]};let ow=(()=>{class t{constructor(t,e){this.planer=t,this.router=e,this.icon=tw,this.diver=this.planer.diver}goBack(){var t=this;return z_(function*(){return yield t.router.navigateByUrl("/")})()}}return t.\u0275fac=function(e){return new(e||t)(So(fy),So(d_))},t.\u0275cmp=qt({type:t,selectors:[["app-diver"]],decls:30,vars:25,consts:[[1,"mt-5"],[1,"row"],[1,"col-lg-3","col-md-6","mt-3"],[1,"card"],[1,"card-header"],[1,"me-3",3,"icon"],[1,"card-body"],["for","sac"],["name","sac","id","sac","type","number","required","","min","5","max","90","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["sac","ngModel"],["class","text-danger",4,"ngIf"],["for","maxPpO2"],["name","maxPpO2","id","maxPpO2","type","number","required","","min",".21","max","3","step",".1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["maxPpO2","ngModel"],["for","maxDecoPpO2"],["name","maxDecoPpO2","id","maxDecoPpO2","type","number","required","","step",".1","min",".21","max","3",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["maxDecoPpO2","ngModel"],[1,"form-group","mt-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger"]],template:function(t,e){if(1&t&&(Eo(0,"div",0),Eo(1,"div",1),Eo(2,"div",2),Eo(3,"div",3),Eo(4,"div",4),Po(5,"fa-icon",5),Eo(6,"span"),cs(7,"Diver"),Lo(),Lo(),Eo(8,"div",6),Eo(9,"div"),Eo(10,"label",7),cs(11,"Surface air consumption [L/min.]: "),Eo(12,"input",8,9),Fo("ngModelChange",function(t){return e.diver.sac=t}),Lo(),Lo(),Ao(14,ew,2,0,"div",10),Lo(),Eo(15,"div"),Eo(16,"label",11),cs(17,"Maximum ppO2: "),Eo(18,"input",12,13),Fo("ngModelChange",function(t){return e.diver.maxPpO2=t}),Lo(),Lo(),Ao(20,nw,2,0,"div",10),Lo(),Eo(21,"div"),Eo(22,"label",14),cs(23,"Maximum deco ppO2: "),Eo(24,"input",15,16),Fo("ngModelChange",function(t){return e.diver.maxDecoPpO2=t}),Lo(),Lo(),Ao(26,rw,2,0,"div",10),Lo(),Lo(),Lo(),Eo(27,"div",17),Eo(28,"button",18),Fo("click",function(){return e.goBack()}),cs(29,"Back"),Lo(),Lo(),Lo(),Lo(),Lo()),2&t){const t=Co(13),n=Co(19),r=Co(25);Ji(5),Do("icon",e.icon),Ji(7),Qo("is-invalid",t.invalid&&(t.dirty||t.touched)),Do("ngModel",e.diver.sac)("rangeVal",Nl(22,iw))("minVal",5)("maxVal",90),Ji(2),Do("ngIf",t.invalid&&(t.dirty||t.touched)),Ji(4),Qo("is-invalid",n.invalid&&(n.dirty||n.touched)),Do("ngModel",e.diver.maxPpO2)("rangeVal",Nl(23,aw))("minVal",.21)("maxVal",3),Ji(2),Do("ngIf",n.invalid&&(n.dirty||n.touched)),Ji(4),Qo("is-invalid",r.invalid&&(r.dirty||r.touched)),Do("ngModel",e.diver.maxDecoPpO2)("rangeVal",Nl(24,aw))("minVal",.21)("maxVal",3),Ji(2),Do("ngIf",r.invalid&&(r.dirty||r.touched))}},directives:[sv,mf,pf,uf,uh,yf,Rh,sf,Fg,Ig,Eg,pd],styles:[""]}),t})();function sw(t,e){if(1&t&&(Eo(0,"span"),cs(1),Lo()),2&t){const t=Ho();Ji(1),ds("",t.gas.name," ")}}let lw=(()=>{class t{constructor(t){this.planer=t,this.gas=ey.createDefault(),this.showName=!0}get gasMod(){return this.planer.modForGas(this.gas)}get gasDecoMod(){return this.planer.switchDepth(this.gas)}}return t.\u0275fac=function(e){return new(e||t)(So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-gaslabel"]],inputs:{gas:"gas",showName:"showName"},decls:5,vars:9,consts:[[1,"text-muted"],[4,"ngIf"]],template:function(t,e){1&t&&(Eo(0,"small",0),Ao(1,sw,2,1,"span",1),cs(2),jl(3,"number"),jl(4,"number"),Lo()),2&t&&(Ji(1),Do("ngIf",e.showName),Ji(1),hs("MOD: ",Bl(3,3,e.gasMod,"1.0-0")," m, switch ",Bl(4,6,e.gasDecoMod,"1.0-0")," m"))},directives:[pd],pipes:[bd],styles:[""]}),t})();function cw(t,e){1&t&&(Eo(0,"span"),cs(1,"Bottom gas tank"),Lo())}function uw(t,e){1&t&&(Eo(0,"span"),cs(1,"Tanks"),Lo())}function dw(t,e){1&t&&(Eo(0,"div",34),cs(1,"Needs to be number 1-50 L "),Lo())}function hw(t,e){1&t&&(Eo(0,"div",34),cs(1,"Needs to be number 30-350 bar"),Lo())}function fw(t,e){if(1&t){const t=Io();Eo(0,"button",35),Fo("click",function(){const e=Ie(t).$implicit,n=Ho().$implicit;return Ho(2).assignStandardGas(n,e)}),cs(1),Lo()}if(2&t){const t=e.$implicit;Ji(1),us(t)}}function pw(t,e){1&t&&(Eo(0,"div",34),cs(1,"Needs to be number 21-100%"),Lo())}function gw(t,e){if(1&t){const t=Io();Eo(0,"button",36),Fo("click",function(){Ie(t);const e=Ho().$implicit;return Ho(2).removeTank(e)}),Po(1,"fa-icon",13),Lo()}if(2&t){const t=Ho(3);Ji(1),Do("icon",t.trashIcon)}}const mw=function(){return[1,50]},vw=function(){return[30,350]},yw=function(){return[21,100]};function bw(t,e){if(1&t){const t=Io();Eo(0,"tr"),Eo(1,"td",15),Eo(2,"div",16),Eo(3,"div",9),Eo(4,"input",17,18),Fo("ngModelChange",function(t){return e.$implicit.size=t})("change",function(){return Ie(t),Ho(2).gasChanged()}),Lo(),Ao(6,dw,2,0,"div",19),Lo(),Eo(7,"div",10),Eo(8,"input",20,21),Fo("ngModelChange",function(t){return e.$implicit.startPressure=t})("change",function(){return Ie(t),Ho(2).gasChanged()}),Lo(),Ao(10,hw,2,0,"div",19),Lo(),Eo(11,"div",11),Eo(12,"div",22),Eo(13,"input",23,24),Fo("ngModelChange",function(t){return e.$implicit.o2=t})("change",function(){return Ie(t),Ho(2).gasChanged()}),Lo(),Eo(15,"div",25),Po(16,"button",26),Eo(17,"div",27),Ao(18,fw,2,1,"button",28),Lo(),Lo(),Lo(),Ao(19,pw,2,0,"div",19),Lo(),Lo(),Eo(20,"div",29),Eo(21,"small",30),cs(22),jl(23,"number"),Lo(),Po(24,"app-gaslabel",31),Lo(),Lo(),Eo(25,"td",32),Ao(26,gw,2,1,"button",33),Lo(),Lo()}if(2&t){const t=e.$implicit,n=Co(5),r=Co(9),i=Co(14),a=Ho(2);Ji(4),Qo("is-invalid",n.invalid&&(n.dirty||n.touched)),Do("ngModel",t.size)("rangeVal",Nl(28,mw))("minVal",1)("maxVal",50),Ji(2),Do("ngIf",n.invalid&&(n.dirty||n.touched)),Ji(2),Qo("is-invalid",r.invalid&&(r.dirty||r.touched)),Do("ngModel",t.startPressure)("rangeVal",Nl(29,vw))("minVal",30)("maxVal",350),Ji(2),Do("ngIf",r.invalid&&(r.dirty||r.touched)),Ji(3),Qo("is-invalid",i.invalid&&(i.dirty||i.touched)),Do("ngModel",t.o2)("rangeVal",Nl(30,yw))("minVal",21)("maxVal",100),Ji(5),Do("ngForOf",a.gasNames),Ji(1),Do("ngIf",i.invalid&&(i.dirty||i.touched)),Ji(3),ds("SAC: ",Bl(23,25,a.gasSac(t),"1.0-2")," bar/min."),Ji(2),Do("gas",t),Ji(2),Do("ngIf",a.planner.firstTank!==t)}}function xw(t,e){if(1&t){const t=Io();Eo(0,"div",5),Eo(1,"table",6),Eo(2,"tr"),Eo(3,"th",7),Eo(4,"div",8),Eo(5,"div",9),cs(6,"Size [L]"),Lo(),Eo(7,"div",10),cs(8,"Pressure [bar]"),Lo(),Eo(9,"div",11),cs(10,"Percent O2"),Lo(),Lo(),Lo(),Eo(11,"th"),Eo(12,"button",12),Fo("click",function(){return Ie(t),Ho().addTank()}),Po(13,"fa-icon",13),Lo(),Lo(),Lo(),Ao(14,bw,27,31,"tr",14),Lo(),Lo()}if(2&t){const t=Ho();Ji(13),Do("icon",t.plusIcon),Ji(1),Do("ngForOf",t.tanks)}}function _w(t,e){1&t&&(Eo(0,"div",47),cs(1,"Needs to be number 1-50 L"),Lo())}function ww(t,e){1&t&&(Eo(0,"div",47),cs(1,"Needs to be number 30-350 bar"),Lo())}function kw(t,e){if(1&t){const t=Io();Eo(0,"button",35),Fo("click",function(){const e=Ie(t).$implicit,n=Ho(2);return n.assignStandardGas(n.firstTank,e)}),cs(1),Lo()}if(2&t){const t=e.$implicit;Ji(1),us(t)}}function Tw(t,e){1&t&&(Eo(0,"div",34),cs(1,"Needs to be number 21-100%"),Lo())}function Mw(t,e){if(1&t){const t=Io();Eo(0,"div",5),Eo(1,"div",37),Eo(2,"label",38),cs(3,"Size [L]:"),Lo(),Eo(4,"input",39,18),Fo("ngModelChange",function(e){return Ie(t),Ho().firstTank.size=e})("change",function(){return Ie(t),Ho().gasChanged()}),Lo(),Eo(6,"small",30),cs(7),jl(8,"number"),Lo(),Ao(9,_w,2,0,"div",40),Lo(),Eo(10,"div",37),Eo(11,"label",41),cs(12,"Start pressure [bar]:"),Lo(),Eo(13,"input",42,21),Fo("ngModelChange",function(e){return Ie(t),Ho().firstTank.startPressure=e})("change",function(){return Ie(t),Ho().gasChanged()}),Lo(),Ao(15,ww,2,0,"div",40),Lo(),Eo(16,"div",43),Eo(17,"label",44),cs(18,"Percent O2:"),Lo(),Eo(19,"div",45),Eo(20,"input",23,24),Fo("ngModelChange",function(e){return Ie(t),Ho().o2=e})("change",function(){return Ie(t),Ho().gasChanged()}),Lo(),Eo(22,"div",25),Po(23,"button",26),Eo(24,"div",27),Eo(25,"button",35),Fo("click",function(){return Ie(t),Ho().assignBestMix()}),cs(26,"Best mix"),Lo(),Ao(27,kw,2,1,"button",28),Lo(),Lo(),Lo(),Po(28,"app-gaslabel",46),Ao(29,Tw,2,0,"div",19),Lo(),Lo()}if(2&t){const t=Co(5),e=Co(14),n=Co(21),r=Ho();Ji(4),Qo("is-invalid",t.invalid&&(t.dirty||t.touched)),Do("ngModel",r.firstTank.size)("rangeVal",Nl(27,mw))("minVal",1)("maxVal",50),Ji(3),ds("SAC: ",Bl(8,24,r.gasSac(r.firstTank),"1.0-2")," bar/min."),Ji(2),Do("ngIf",t.invalid&&(t.dirty||t.touched)),Ji(4),Qo("is-invalid",e.invalid&&(e.dirty||e.touched)),Do("ngModel",r.firstTank.startPressure)("rangeVal",Nl(28,vw))("minVal",30)("maxVal",350),Ji(2),Do("ngIf",e.invalid&&(e.dirty||e.touched)),Ji(5),Qo("is-invalid",n.invalid&&(n.dirty||n.touched)),Do("ngModel",r.o2)("rangeVal",Nl(29,yw))("minVal",21)("maxVal",100),Ji(7),Do("ngForOf",r.gasNames),Ji(1),Do("gas",r.firstTank),Ji(1),Do("ngIf",n.invalid&&(n.dirty||n.touched))}}let Aw=(()=>{class t{constructor(t){this.planner=t,this.icon=B_,this.plusIcon=Y_,this.trashIcon=J_,this.firstTank=this.planner.firstTank,this.diver=this.planner.diver,this.gasNames=Nv.gasNames()}get tanks(){return this.planner.tanks}get isComplex(){return this.planner.isComplex}get o2(){return this.firstTank.o2}set o2(t){this.firstTank.o2=t}gasSac(t){return this.diver.gasSac(t)}addTank(){this.planner.addTank()}removeTank(t){this.planner.removeTank(t)}assignBestMix(){this.o2=this.planner.bestNitroxMix()}gasChanged(){this.planner.calculate()}assignStandardGas(t,e){t.assignStandardGas(e),this.gasChanged()}}return t.\u0275fac=function(e){return new(e||t)(So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-tanks"]],decls:7,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"me-3",3,"icon"],[4,"ngIf"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"table","table-borderless"],["colspan","3"],[1,"d-flex","flex-row","justify-content-around"],[1,"me-1"],[1,"mx-1"],[1,"ms-1"],["type","button",1,"btn","btn-sm","m-0","p-0",3,"click"],[3,"icon"],[4,"ngFor","ngForOf"],["colspan","3",1,"align-top"],[1,"d-flex","flex-row","justify-content-between","py-0"],["name","size","type","number","required","","min","1","max","50","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange","change"],["size","ngModel"],["class","text-danger",4,"ngIf"],["name","startPressure","type","number","required","","min","30","max","350","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange","change"],["startPressure","ngModel"],[1,"input-group"],["name","gasO2","type","number","required","","min","21","max","100","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange","change"],["gasO2","ngModel"],["ngbDropdown","","placement","bottom-right",1,"input-group-append","d-inline-block"],["id","o2Menu","type","button","ngbDropdownToggle","",1,"btn","btn-default","border"],["ngbDropdownMenu","","aria-labelledby","o2Menu","aria-expanded","false"],["type","button","class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"pt-0"],[1,"form-text","text-muted"],[1,"text-nowrap","float-end",3,"gas"],[1,"align-top"],["type","button","class","btn btn-sm m-0 p-0 align-top",3,"click",4,"ngIf"],[1,"text-danger"],["type","button",1,"dropdown-item",3,"click"],["type","button",1,"btn","btn-sm","m-0","p-0","align-top",3,"click"],[1,"mb-3"],["for","size",1,"form-label"],["name","size","type","number","required","","min","1","max","50","step","1",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange","change"],["class","text-danger form-text",4,"ngIf"],["for","startPressure",1,"form-label"],["name","startPressure","type","number","required","","min","30","max","350","step","1",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange","change"],[1,"mb-3","col-auto"],["for","gasO2",1,"form-label"],[1,"input-group","col-auto","o2-max-width"],[3,"gas"],[1,"text-danger","form-text"]],template:function(t,e){1&t&&(Eo(0,"div",0),Eo(1,"div",1),Po(2,"fa-icon",2),Ao(3,cw,2,0,"span",3),Ao(4,uw,2,0,"span",3),Lo(),Ao(5,xw,15,2,"div",4),Ao(6,Mw,30,30,"div",4),Lo()),2&t&&(Ji(2),Do("icon",e.icon),Ji(1),Do("ngIf",!e.isComplex),Ji(1),Do("ngIf",e.isComplex),Ji(1),Do("ngIf",e.isComplex),Ji(1),Do("ngIf",!e.isComplex))},directives:[sv,pd,hd,mf,pf,uf,uh,yf,Rh,sf,Fg,Ig,Eg,rg,ng,tg,lw],pipes:[bd],styles:[".o2-max-width[_ngcontent-%COMP%]{max-width:170px}"]}),t})();function Cw(t,e){1&t&&(Eo(0,"span"),cs(1,"Depth"),Lo())}function Sw(t,e){1&t&&(Eo(0,"span"),cs(1,"Depths"),Lo())}function Dw(t,e){1&t&&(Eo(0,"div",15),cs(1,"Needs to be number > 0 min."),Lo())}function Ow(t,e){1&t&&(Eo(0,"div",15),cs(1,"Needs to be number 1 - 350 m"),Lo())}const Ew=function(){return[1,1440]},Lw=function(){return[1,350]};function Pw(t,e){if(1&t){const t=Io();Eo(0,"div",5),Eo(1,"div",6),Eo(2,"label",7),cs(3,"Bottom time [min.]:"),Lo(),Eo(4,"input",8,9),Fo("ngModelChange",function(e){return Ie(t),Ho().planDuration=e}),Lo(),Ao(6,Dw,2,0,"div",10),Lo(),Eo(7,"div",6),Eo(8,"label",11),cs(9,"Depth [m]:"),Lo(),Eo(10,"input",12,13),Fo("ngModelChange",function(e){return Ie(t),Ho().plannedDepth=e}),Lo(),Eo(12,"div"),Eo(13,"small",14),cs(14),jl(15,"number"),Lo(),Lo(),Eo(16,"div"),Eo(17,"small",14),cs(18),Lo(),Lo(),Ao(19,Ow,2,0,"div",10),Lo(),Lo()}if(2&t){const t=Co(5),e=Co(11),n=Ho();Ji(4),Qo("is-invalid",t.invalid&&(t.dirty||t.touched)),Do("ngModel",n.planDuration)("rangeVal",Nl(19,Ew))("minVal",1)("maxVal",1440),Ji(2),Do("ngIf",t.invalid&&(t.dirty||t.touched)),Ji(4),Qo("is-invalid",e.invalid&&(e.dirty||e.touched)),Do("ngModel",n.plannedDepth)("rangeVal",Nl(20,Lw))("minVal",1)("maxVal",350),Ji(4),ds("No deco limit ",Bl(15,16,n.noDecoTime,"1.0-0")," min."),Ji(4),ds("Best mix is ",n.bestMix,""),Ji(1),Do("ngIf",e.invalid&&(e.dirty||e.touched))}}function Iw(t,e){1&t&&(Eo(0,"div",32),cs(1,"Needs to be number 0-350 m"),Lo())}function Rw(t,e){1&t&&(Eo(0,"div",32),cs(1,"Needs to be number 0-1440 min"),Lo())}function Nw(t,e){if(1&t){const t=Io();Eo(0,"button",33),Fo("click",function(){const e=Ie(t).$implicit,n=Ho().$implicit;return Ho(2).assignTank(n,e)}),cs(1),Lo()}if(2&t){const t=e.$implicit,n=Ho(3);Ji(1),us(n.tankLabel(t))}}function Fw(t,e){if(1&t){const t=Io();Eo(0,"button",17),Fo("click",function(){Ie(t);const e=Ho().$implicit;return Ho(2).removeSegment(e)}),Po(1,"fa-icon",18),Lo()}if(2&t){const t=Ho(3);Ji(1),Do("icon",t.removeIcon)}}const zw=function(){return[0,350]};function Vw(t,e){if(1&t){const t=Io();Eo(0,"tr"),Eo(1,"td"),cs(2),jl(3,"number"),Lo(),Eo(4,"td"),Eo(5,"div",20),Eo(6,"input",21,22),Fo("ngModelChange",function(t){return e.$implicit.endDepth=t})("change",function(){return Ie(t),Ho(2).depthChanged()}),Lo(),Ao(8,Iw,2,0,"div",23),Lo(),Lo(),Eo(9,"td"),Eo(10,"div",20),Eo(11,"input",24,25),Fo("ngModelChange",function(t){return e.$implicit.duration=t})("change",function(){return Ie(t),Ho(2).durationChanged()}),Lo(),Ao(13,Rw,2,0,"div",23),Lo(),Lo(),Eo(14,"td"),Eo(15,"div",20),Po(16,"input",26),Eo(17,"div",27),Po(18,"button",28),Eo(19,"div",29),Ao(20,Nw,2,1,"button",30),Lo(),Lo(),Lo(),Lo(),Eo(21,"td"),Ao(22,Fw,2,1,"button",31),Lo(),Lo()}if(2&t){const t=e.$implicit,n=Co(7),r=Co(12),i=Ho(2);Ji(2),us(Bl(3,18,t.startDepth,"1.0-0")),Ji(4),Qo("is-invalid",n.invalid&&(n.dirty||n.touched)),Do("ngModel",t.endDepth)("rangeVal",Nl(21,zw))("minVal",0)("maxVal",350),Ji(2),Do("ngIf",n.invalid&&(n.dirty||n.touched)),Ji(3),Qo("is-invalid",r.invalid&&(r.dirty||r.touched)),Do("ngModel",t.duration)("rangeVal",Nl(22,Ew))("minVal",1)("maxVal",1440),Ji(2),Do("ngIf",r.invalid&&(r.dirty||r.touched)),Ji(3),Do("ngModel",t.tankLabel),Ji(4),Do("ngForOf",i.tanks),Ji(2),Do("ngIf",i.minimumSegments)}}function Hw(t,e){if(1&t){const t=Io();Eo(0,"div",5),Eo(1,"table",16),Eo(2,"tr"),Eo(3,"th"),cs(4,"From [m]"),Lo(),Eo(5,"th"),cs(6,"To [m]"),Lo(),Eo(7,"th"),cs(8,"Duration [min]"),Lo(),Eo(9,"th"),cs(10,"Tank"),Lo(),Eo(11,"th"),Eo(12,"button",17),Fo("click",function(){return Ie(t),Ho().addSegment()}),Po(13,"fa-icon",18),Lo(),Lo(),Lo(),Ao(14,Vw,23,23,"tr",19),Lo(),Lo()}if(2&t){const t=Ho();Ji(13),Do("icon",t.addIcon),Ji(1),Do("ngForOf",t.levels)}}let jw=(()=>{class t{constructor(t){this.planner=t,this._levels=[],this.formValid=!0,this.cardIcon=$_,this.addIcon=Y_,this.removeIcon=J_,this.plan=this.planner.plan,this.updateLevels(),this.subscription=this.planner.calculated.subscribe(()=>{this.updateLevels()})}ngOnDestroy(){this.subscription.unsubscribe()}updateLevels(){const t=[];this.plan.segments.forEach(e=>{const n=new sy(e);t.push(n)}),this._levels=t}get isComplex(){return this.planner.isComplex}get planDuration(){return this.plan.duration}set planDuration(t){this.planner.assignDuration(t)}get minimumSegments(){return this.plan.minimumSegments}get levels(){return this._levels}get tanks(){return this.planner.tanks}tankLabel(t){return sy.tankLabel(t)}addSegment(){this.planner.addSegment()}removeSegment(t){this.planner.removeSegment(t.segment)}depthChanged(){this.plan.fixDepths(),this.planner.calculate()}durationChanged(){this.planner.calculate()}assignTank(t,e){t.tank=e,this.planner.calculate()}get plannedDepth(){return this.plan.maxDepth}set plannedDepth(t){this.planner.assignDepth(t)}get noDecoTime(){const t=this.plan.noDecoTime;return t>=1e3?1/0:t}get bestMix(){const t=this.planner.bestNitroxMix()/100;return Nv.nameFor(t)}}return t.\u0275fac=function(e){return new(e||t)(So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-depths"]],inputs:{formValid:"formValid",plannedDepth:"plannedDepth"},decls:7,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"me-3",3,"icon"],[4,"ngIf"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"mb-3"],["for","duration",1,"form-label"],["id","duration","name","duration","type","number","required","","min","1","max","1440","step","1",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["duration","ngModel"],["class","text-danger form-text",4,"ngIf"],["for","depth",1,"form-label"],["id","depth","name","depth","type","number","required","","min","1","max","350","step","1",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["depth","ngModel"],[1,"text-muted","form-text"],[1,"text-danger","form-text"],[1,"table","table-borderless"],["type","button",1,"btn","btn-sm","m-0","p-0",3,"click"],[3,"icon"],[4,"ngFor","ngForOf"],[1,"input-group"],["name","endDepth","type","number","required","","min","0","max","350","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange","change"],["endDepth","ngModel"],["class","text-danger",4,"ngIf"],["name","duration2","type","number","required","","min","1","max","1440","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange","change"],["duration2","ngModel"],["id","tanks","type","text","readonly","",1,"form-control",3,"ngModel"],["ngbDropdown","","placement","bottom-right",1,"input-group-append","d-inline-block"],["id","tankMenu","type","button","ngbDropdownToggle","",1,"btn","btn-default","border"],["ngbDropdownMenu","","aria-labelledby","tankMenu","aria-expanded","false"],["type","button","class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["type","button","class","btn btn-sm m-0 p-0",3,"click",4,"ngIf"],[1,"text-danger"],["type","button",1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(Eo(0,"div",0),Eo(1,"div",1),Po(2,"fa-icon",2),Ao(3,Cw,2,0,"span",3),Ao(4,Sw,2,0,"span",3),Lo(),Ao(5,Pw,20,21,"div",4),Ao(6,Hw,15,2,"div",4),Lo()),2&t&&(Ji(2),Do("icon",e.cardIcon),Ji(1),Do("ngIf",!e.isComplex),Ji(1),Do("ngIf",e.isComplex),Ji(1),Do("ngIf",!e.isComplex),Ji(1),Do("ngIf",e.isComplex))},directives:[sv,pd,mf,pf,uf,uh,yf,Rh,sf,Fg,Ig,Eg,hd,rg,ng,tg],pipes:[bd],styles:[""]}),t})();function Bw(t,e){1&t&&(Eo(0,"div",25),cs(1," Needs to be number 0 - 4000 m "),Lo())}const Uw=function(){return[0,4e3]};function qw(t,e){if(1&t){const t=Io();Eo(0,"div"),Eo(1,"div",10),Eo(2,"div",11),Eo(3,"label",12),cs(4,"Conservatism (Gradient factors):"),Lo(),Eo(5,"div",13),Eo(6,"input",14),Fo("ngModelChange",function(e){return Ie(t),Ho().conservatism=e}),Lo(),Eo(7,"div",15),Po(8,"button",16),Eo(9,"div",17),Eo(10,"button",18),Fo("click",function(){return Ie(t),Ho().lowConservatism()}),cs(11),Lo(),Eo(12,"button",18),Fo("click",function(){return Ie(t),Ho().mediumConservatism()}),cs(13),Lo(),Eo(14,"button",18),Fo("click",function(){return Ie(t),Ho().highConservatism()}),cs(15),Lo(),Lo(),Lo(),Lo(),Lo(),Eo(16,"div",11),Eo(17,"label",19),cs(18,"Altitude [m.a.s.l.]:"),Lo(),Eo(19,"input",20,21),Fo("ngModelChange",function(e){return Ie(t),Ho().plannedAltitude=e}),Lo(),Ao(21,Bw,2,0,"div",22),Lo(),Eo(22,"div",5),Eo(23,"input",23),Fo("change",function(){Ie(t);const e=Ho();return e.isFreshWater=!e.isFreshWater}),Lo(),Eo(24,"label",24),cs(25,"Salt water"),Lo(),Lo(),Lo(),Lo()}if(2&t){const t=Co(20),e=Ho();Ji(6),Do("ngModel",e.conservatism),Ji(5),us(e.lowName),Ji(2),us(e.mediumName),Ji(2),us(e.highName),Ji(4),Qo("is-invalid",t.invalid&&(t.dirty||t.touched)),Do("ngModel",e.plannedAltitude)("rangeVal",Nl(12,Uw))("minVal",0)("maxVal",4e3),Ji(2),Do("ngIf",t.invalid&&(t.dirty||t.touched)),Ji(2),Do("checked",!e.isFreshWater)}}function Gw(t,e){1&t&&(Eo(0,"div",25),cs(1," Needs to be number 0 - 4000 m "),Lo())}function Zw(t,e){1&t&&(Eo(0,"div",25),cs(1," Needs to be number 10 - 100 lower than gradient high"),Lo())}function Ww(t,e){1&t&&(Eo(0,"div",25),cs(1," Needs to be number 10 - 100 higher than gradient low "),Lo())}function $w(t,e){1&t&&(Eo(0,"div",25),cs(1," Needs to be number 1 - 10 "),Lo())}function Yw(t,e){1&t&&(Eo(0,"div",25),cs(1," Needs to be number 1 - 100 "),Lo())}function Xw(t,e){1&t&&(Eo(0,"div",25),cs(1," Needs to be number 1 - 100 "),Lo())}const Qw=function(){return[10,100]},Kw=function(){return[1,10]},Jw=function(){return[1,100]};function tk(t,e){if(1&t){const t=Io();Eo(0,"div"),Eo(1,"ul",26),Eo(2,"li",27),Eo(3,"button",28),cs(4,"Environment"),Lo(),Lo(),Eo(5,"li",27),Eo(6,"button",29),cs(7,"Conservatism"),Lo(),Lo(),Eo(8,"li",27),Eo(9,"button",30),cs(10,"Stops"),Lo(),Lo(),Eo(11,"li",27),Eo(12,"button",31),cs(13,"Speeds"),Lo(),Lo(),Lo(),Eo(14,"div",32),Eo(15,"div",33),Eo(16,"div",10),Eo(17,"div",11),Eo(18,"label",19),cs(19,"Altitude [m.a.s.l.]:"),Lo(),Eo(20,"input",34,21),Fo("ngModelChange",function(e){return Ie(t),Ho().plannedAltitude=e}),Lo(),Ao(22,Gw,2,0,"div",22),Lo(),Eo(23,"div",5),Eo(24,"input",23),Fo("change",function(){Ie(t);const e=Ho();return e.isFreshWater=!e.isFreshWater}),Lo(),Eo(25,"label",24),cs(26,"Salt water"),Lo(),Lo(),Lo(),Lo(),Eo(27,"div",35),Eo(28,"div",36),Eo(29,"div",11),Eo(30,"label",37),cs(31,"Gradient low: "),Lo(),Eo(32,"div",13),Eo(33,"input",38,39),Fo("ngModelChange",function(e){return Ie(t),Ho().plannedGfLow=e}),Lo(),Eo(35,"div",15),Po(36,"button",40),Eo(37,"div",41),Eo(38,"button",18),Fo("click",function(){return Ie(t),Ho().lowConservatism()}),cs(39),Lo(),Eo(40,"button",18),Fo("click",function(){return Ie(t),Ho().mediumConservatism()}),cs(41),Lo(),Eo(42,"button",18),Fo("click",function(){return Ie(t),Ho().highConservatism()}),cs(43),Lo(),Lo(),Lo(),Lo(),Ao(44,Zw,2,0,"div",22),Lo(),Eo(45,"div",11),Eo(46,"label",42),cs(47,"Gradient high:"),Lo(),Eo(48,"input",43,44),Fo("ngModelChange",function(e){return Ie(t),Ho().plannedGfHigh=e}),Lo(),Ao(50,Ww,2,0,"div",22),Lo(),Lo(),Lo(),Eo(51,"div",45),Eo(52,"div",46),Eo(53,"div",11),Eo(54,"label",47),cs(55,"Gas switch duration [min.]:"),Lo(),Eo(56,"input",48,49),Fo("ngModelChange",function(e){return Ie(t),Ho().gasSwitchDuration=e}),Lo(),Ao(58,$w,2,0,"div",22),Lo(),Eo(59,"div",50),Eo(60,"input",51),Fo("change",function(){Ie(t);const e=Ho();return e.safetyStopEnabled=!e.safetyStopEnabled}),Lo(),Eo(61,"label",52),cs(62,"Add safety stop 3 min."),Lo(),Lo(),Eo(63,"div",50),Eo(64,"input",53),Fo("change",function(){Ie(t);const e=Ho();return e.roundDecoStops=!e.roundDecoStops}),Lo(),Eo(65,"label",54),cs(66,"Round deco stops to minutes"),Lo(),Lo(),Lo(),Lo(),Eo(67,"div",55),Eo(68,"div",36),Eo(69,"div",11),Eo(70,"label",56),cs(71,"Descent speed [m/min.]:"),Lo(),Eo(72,"input",57,58),Fo("ngModelChange",function(e){return Ie(t),Ho().descentSpeed=e}),Lo(),Ao(74,Yw,2,0,"div",22),Lo(),Eo(75,"div",11),Eo(76,"label",59),cs(77,"Ascent speed [m/min.]:"),Lo(),Eo(78,"input",60,61),Fo("ngModelChange",function(e){return Ie(t),Ho().ascentSpeed=e}),Lo(),Ao(80,Xw,2,0,"div",22),Lo(),Lo(),Lo(),Lo(),Lo()}if(2&t){const t=Co(21),e=Co(34),n=Co(49),r=Co(57),i=Co(73),a=Co(79),o=Ho();Ji(20),Qo("is-invalid",t.invalid&&(t.dirty||t.touched)),Do("ngModel",o.plannedAltitude)("rangeVal",Nl(48,Uw))("minVal",0)("maxVal",4e3),Ji(2),Do("ngIf",t.invalid&&(t.dirty||t.touched)),Ji(2),Do("checked",!o.isFreshWater),Ji(9),Qo("is-invalid",e.invalid&&(e.dirty||e.touched)),Do("ngModel",o.plannedGfLow)("rangeVal",Nl(49,Qw))("minVal",10)("maxVal",100),Ji(6),us(o.lowName),Ji(2),us(o.mediumName),Ji(2),us(o.highName),Ji(1),Do("ngIf",e.invalid&&(e.dirty||e.touched)),Ji(4),Qo("is-invalid",n.invalid&&(n.dirty||n.touched)),Do("ngModel",o.plannedGfHigh)("rangeVal",Nl(50,Qw))("minVal",10)("maxVal",100),Ji(2),Do("ngIf",n.invalid&&(n.dirty||n.touched)),Ji(6),Qo("is-invalid",r.invalid&&(r.dirty||r.touched)),Do("ngModel",o.gasSwitchDuration)("rangeVal",Nl(51,Kw))("minVal",1)("maxVal",10),Ji(2),Do("ngIf",r.invalid&&(r.dirty||r.touched)),Ji(2),Do("checked",o.safetyStopEnabled),Ji(4),Do("checked",o.roundDecoStops),Ji(8),Qo("is-invalid",i.invalid&&(i.dirty||i.touched)),Do("ngModel",o.descentSpeed)("rangeVal",Nl(52,Jw))("minVal",1)("maxVal",100),Ji(2),Do("ngIf",i.invalid&&(i.dirty||i.touched)),Ji(4),Qo("is-invalid",a.invalid&&(a.dirty||a.touched)),Do("ngModel",o.ascentSpeed)("rangeVal",Nl(53,Jw))("minVal",1)("maxVal",100),Ji(2),Do("ngIf",a.invalid&&(a.dirty||a.touched))}}let ek=(()=>{class t{constructor(t){this.planner=t,this.formValid=!0,this.allUsableName="All usable",this.halfUsableName="Half usable",this.thirdUsableName="Thirds usable",this.lowName="Low (45/95)",this.mediumName="Medium (40/85)",this.highName="High (30/75)",this.conservatism=this.mediumName,this.strategy=this.allUsableName,this.icon=G_,this.plan=this.planner.plan}reset(){switch(this.plan.strategy){case oy.HALF:this.halfUsable();break;case oy.THIRD:this.thirdUsable();break;default:this.allUsable()}}lowConservatism(){this.conservatism=this.lowName,this.plannedGfLow=45,this.plannedGfHigh=95}mediumConservatism(){this.conservatism=this.mediumName,this.plannedGfLow=40,this.plannedGfHigh=85}highConservatism(){this.conservatism=this.highName,this.plannedGfLow=30,this.plannedGfHigh=75}allUsable(){this.setAllUsable(),this.planner.calculate()}setAllUsable(){this.plan.strategy=oy.ALL,this.strategy=this.allUsableName}halfUsable(){this.plan.strategy=oy.HALF,this.strategy=this.halfUsableName,this.planner.calculate()}thirdUsable(){this.plan.strategy=oy.THIRD,this.strategy=this.thirdUsableName,this.planner.calculate()}get plannedDepth(){return this.plan.maxDepth}set plannedDepth(t){this.planner.assignDepth(t)}get isComplex(){return this.planner.isComplex}set isComplex(t){this.planner.isComplex=t,this.planner.isComplex||(this.setAllUsable(),this.mediumConservatism(),this.setAscentSpeed(iy.ascSpeed),this.setDescentSpeed(iy.descSpeed),this.setRoundDecoStops(!0),this.setSafetyStopEnabled(!0),this.setGasSwitchDuration(1),this.planner.resetToSimple()),this.planner.calculate()}setRoundDecoStops(t){this.planner.options.roundStopsToMinutes=t}get roundDecoStops(){return this.planner.options.roundStopsToMinutes}set roundDecoStops(t){this.setRoundDecoStops(t),this.planner.calculate()}setGasSwitchDuration(t){this.planner.options.gasSwitchDuration=t}get gasSwitchDuration(){return this.planner.options.gasSwitchDuration}set gasSwitchDuration(t){this.setGasSwitchDuration(t),this.planner.calculate()}get plannedGfHigh(){return 100*this.planner.options.gfHigh}set plannedGfHigh(t){this.planner.options.gfHigh=t/100,this.planner.calculate()}get plannedGfLow(){return 100*this.planner.options.gfLow}set plannedGfLow(t){this.planner.options.gfLow=t/100,this.planner.calculate()}get isFreshWater(){return this.planner.options.isFreshWater}set isFreshWater(t){this.planner.changeWaterType(t)}setSafetyStopEnabled(t){this.planner.options.addSafetyStop=t}get safetyStopEnabled(){return this.planner.options.addSafetyStop}set safetyStopEnabled(t){this.setSafetyStopEnabled(t),this.planner.calculate()}get plannedAltitude(){return this.planner.options.altitude}set plannedAltitude(t){this.planner.options.altitude=t,this.planner.calculate()}setAscentSpeed(t){this.planner.options.ascentSpeed=t}get ascentSpeed(){return this.planner.options.ascentSpeed}set ascentSpeed(t){t<1||(this.setAscentSpeed(t),this.planner.calculate())}setDescentSpeed(t){this.planner.options.descentSpeed=t}get descentSpeed(){return this.planner.options.descentSpeed}set descentSpeed(t){t<1||(this.setDescentSpeed(t),this.planner.calculate())}}return t.\u0275fac=function(e){return new(e||t)(So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-diveoptions"]],inputs:{formValid:"formValid",plannedDepth:"plannedDepth"},decls:14,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"float-start"],[1,"me-3",3,"icon"],[1,"float-end"],[1,"form-check","form-switch"],["type","checkbox","id","isComplex","mdbCheckbox","",1,"form-check-input",3,"checked","change"],["for","isComplex",1,"custom-control-label"],[1,"card-body"],[4,"ngIf"],[1,"mt-3"],[1,"mb-3"],["for","conservatism",1,"form-label"],[1,"input-group","gradients-max-width"],["id","conservatism","type","text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["ngbDropdown","","placement","bottom-right",1,"input-group-append","d-inline-block"],["type","button","id","conservatismMenu","ngbDropdownToggle","",1,"btn","btn-default","border"],["ngbDropdownMenu","","aria-labelledby","conservatismMenu","aria-expanded","false"],["type","button",1,"dropdown-item",3,"click"],["for","altitude",1,"form-label"],["id","altitude","name","altitude","type","number","required","","min","0","max","4000","step","1",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["altitude","ngModel"],["class","text-danger form-text",4,"ngIf"],["type","checkbox","id","isFreshWater","mdbCheckbox","",1,"form-check-input",3,"checked","change"],["for","isFreshWater",1,"form-label"],[1,"text-danger","form-text"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","environment-tab","data-bs-toggle","tab","data-bs-target","#environment","type","button","role","tab","aria-controls","environment","aria-selected","true",1,"nav-link","active"],["id","conservatism-tab","data-bs-toggle","tab","data-bs-target","#conservatism","type","button","role","tab","aria-controls","conservatism","aria-selected","false",1,"nav-link"],["id","stops-tab","data-bs-toggle","tab","data-bs-target","#stops","type","button","role","tab","aria-controls","stops","aria-selected","false",1,"nav-link"],["id","speeds-tab","data-bs-toggle","tab","data-bs-target","#speeds","type","button","role","tab","aria-controls","speeds","aria-selected","false",1,"nav-link"],["id","myTabContent",1,"tab-content"],["id","environment","role","tabpanel","aria-labelledby","environment-tab",1,"tab-pane","fade","show","active"],["id","altitude","name","altitude","type","number","required","","step","1","min","0","max","4000",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["id","conservatism","role","tabpanel","aria-labelledby","conservatism-tab",1,"tab-pane","fade"],[1,"col-sm","mt-3"],["for","gfLow",1,"form-label"],["id","gfLow","name","gfLow","type","number","required","","step","1","min","10","max","100",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["gfLow","ngModel"],["type","button","id","conservatismMenu2","ngbDropdownToggle","",1,"btn","btn-default","border"],["ngbDropdownMenu","","aria-labelledby","conservatismMenu2","aria-expanded","false"],["for","gfHigh",1,"form-label"],["id","gfHigh","name","gfHigh","type","number","required","","step","1","min","10","max","100",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["gfHigh","ngModel"],["id","stops","role","tabpanel","aria-labelledby","stops-tab",1,"tab-pane","fade"],[1,"col","mt-3"],["for","switchDuration",1,"form-label"],["id","switchDuration","name","switchDuration","type","number","required","","step","1","min","1","max","10",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["switchDuration","ngModel"],[1,"form-check","form-switch","pb-1"],["type","checkbox","id","safetyStop","mdbCheckbox","",1,"form-check-input",3,"checked","change"],["for","safetyStop",1,"form-check-label"],["type","checkbox","id","roundStops","mdbCheckbox","",1,"form-check-input",3,"checked","change"],["for","roundStops",1,"form-check-label"],["id","speeds","role","tabpanel","aria-labelledby","speeds-tab",1,"tab-pane","fade"],["for","descSpeed",1,"form-label"],["id","descSpeed","name","descSpeed","type","number","required","","step","1","min","1","max","100",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["descSpeed","ngModel"],["for","ascSpeed",1,"form-label"],["id","ascSpeed","name","ascSpeed","type","number","required","","step","1","min","1","max","100",1,"form-control","col-auto",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["ascSpeed","ngModel"]],template:function(t,e){1&t&&(Eo(0,"div",0),Eo(1,"div",1),Eo(2,"div",2),Po(3,"fa-icon",3),Eo(4,"span"),cs(5,"Options"),Lo(),Lo(),Eo(6,"div",4),Eo(7,"div",5),Eo(8,"input",6),Fo("change",function(){return e.isComplex=!e.isComplex}),Lo(),Eo(9,"label",7),cs(10,"Extended"),Lo(),Lo(),Lo(),Lo(),Eo(11,"div",8),Ao(12,qw,26,13,"div",9),Ao(13,tk,81,54,"div",9),Lo(),Lo()),2&t&&(Ji(3),Do("icon",e.icon),Ji(5),Do("checked",e.isComplex),Ji(4),Do("ngIf",!e.isComplex),Ji(1),Do("ngIf",e.isComplex))},directives:[sv,pd,uh,Rh,sf,rg,ng,tg,mf,pf,uf,yf,Fg,Ig,Eg],styles:[".gradients-max-width[_ngcontent-%COMP%]{max-width:180px}"]}),t})();class nk{static hasHoursRuntime(t){return Vv.toDate(t).getHours()>0}static selectChartTimeFormat(t){return nk.hasHoursRuntime(t)?"%H:%M:%S":"%M:%S"}static selectTimeFormat(t){return nk.hasHoursRuntime(t)?"H:mm:ss":"m:ss"}}const rk=function(t,e){return{"progress-bar rounded-progress":!0,"bg-success":t,"bg-danger":e}};let ik=(()=>{class t{constructor(){this.tank=ey.createDefault()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["app-tankchart"]],inputs:{tank:"tank"},decls:26,vars:35,consts:[[1,"my-4"],[1,"d-flex","flex-row","justify-content-between"],[1,"text-start"],[1,"text-end",3,"gas","showName"],[1,"text-start","text-muted"],[1,"text-end","text-muted"],[1,"progress","gas-bar","mt-1","mb-2"],[1,"combined_wrapper"],["role","progressbar","aria-valuemin","0",1,"reserve-bar","rounded-progress"],[1,"reserve-overlay"],[1,"reserve-value"],["role","progressbar","aria-valuemin","0",3,"ngClass"]],template:function(t,e){1&t&&(Eo(0,"div",0),Eo(1,"div",1),Eo(2,"strong",2),cs(3),Lo(),Po(4,"app-gaslabel",3),Lo(),Eo(5,"div",1),Eo(6,"small",4),cs(7),jl(8,"number"),jl(9,"number"),Lo(),Eo(10,"small",5),cs(11,"Rock bottom: "),Eo(12,"strong"),cs(13),jl(14,"number"),Lo(),cs(15," bar"),Lo(),Lo(),Eo(16,"div",6),Eo(17,"div",7),Eo(18,"div",8),Eo(19,"div",9),Eo(20,"div",10),cs(21),jl(22,"number"),Lo(),Lo(),Lo(),Eo(23,"div",11),cs(24),jl(25,"number"),Lo(),Lo(),Lo(),Lo()),2&t&&(Ji(3),us(e.tank.name),Ji(1),Do("gas",e.tank)("showName",!1),Ji(3),hs("Gas remaining: ",Bl(8,17,e.tank.endPressure,"1.0-0"),"/",Bl(9,20,e.tank.startPressure,"1.0-0")," bar"),Ji(6),us(Bl(14,23,e.tank.reserve,"1.0-0")),Ji(5),Xo("width",e.tank.percentsReserve+"%"),Mo("aria-valuemax",e.tank.startPressure)("aria-valuenow",e.tank.reserve),Ji(3),us(Bl(22,26,e.tank.reserve,"1.0-0")),Ji(2),Xo("width",e.tank.percentsRemaining+"%"),Do("ngClass",Fl(32,rk,e.tank.hasReserve,!e.tank.hasReserve)),Mo("aria-valuemax",e.tank.startPressure)("aria-valuenow",e.tank.endPressure),Ji(1),ds(" ",Bl(25,29,e.tank.endPressure,"1.0-0"),""))},directives:[lw,ud],pipes:[bd],styles:[".gas-bar[_ngcontent-%COMP%]{padding:5px 8px;height:2em;font-size:1em;border:1px solid #a1a1a1;border-radius:.5em;background:transparent;box-shadow:none;overflow:visible;position:static}.rounded-progress[_ngcontent-%COMP%]{height:100%}.reserve-overlay[_ngcontent-%COMP%]{position:relative}.reserve-value[_ngcontent-%COMP%]{bottom:-3.75em;right:3px}.reserve-bar[_ngcontent-%COMP%], .reserve-value[_ngcontent-%COMP%]{position:absolute;text-align:right}.reserve-bar[_ngcontent-%COMP%]{padding:0;height:4em;top:-.1em;left:0;font-size:.75em;border-right:2px solid #ff8c00}.combined_wrapper[_ngcontent-%COMP%]{position:relative;width:100%}"]}),t})();function ak(t,e){1&t&&(Eo(0,"div",4),cs(1,"Not calculated yet"),Lo())}function ok(t,e){if(1&t&&(Eo(0,"tr"),Eo(1,"td"),cs(2,"Maximum bottom time [min.]:"),Lo(),Eo(3,"td",11),Eo(4,"strong"),cs(5),jl(6,"number"),Lo(),Lo(),Lo()),2&t){const t=Ho(3);Ji(5),us(Bl(6,1,t.dive.maxTime,"1.0-0"))}}function sk(t,e){if(1&t&&(Eo(0,"tr"),Eo(1,"td"),cs(2,"Turn time [min]:"),Lo(),Eo(3,"td",11),Eo(4,"strong"),cs(5),jl(6,"number"),Lo(),Lo(),Lo()),2&t){const t=Ho(3);Ji(5),us(Bl(6,1,t.dive.turnTime,"1.0-0"))}}function lk(t,e){if(1&t&&(Eo(0,"tr"),Eo(1,"td"),cs(2,"Turn pressure [bar]:"),Lo(),Eo(3,"td",11),Eo(4,"strong"),cs(5),jl(6,"number"),Lo(),Lo(),Lo()),2&t){const t=Ho(3);Ji(5),us(Bl(6,1,t.dive.turnPressure,"1.0-0"))}}function ck(t,e){1&t&&Po(0,"app-tankchart",14),2&t&&Do("tank",e.$implicit)}function uk(t,e){if(1&t&&(Eo(0,"div",9),Eo(1,"table",10),Eo(2,"tbody"),Eo(3,"tr"),Eo(4,"td"),cs(5,"Time to surface [min.]:"),Lo(),Eo(6,"td",11),Eo(7,"strong"),cs(8),jl(9,"number"),Lo(),Lo(),Lo(),Eo(10,"tr"),Eo(11,"td"),cs(12,"No decompression time [min.]:"),Lo(),Eo(13,"td",11),Eo(14,"strong"),cs(15),jl(16,"number"),Lo(),Lo(),Lo(),Eo(17,"tr"),Eo(18,"td"),cs(19,"Average depth [m]:"),Lo(),Eo(20,"td",11),Eo(21,"strong"),cs(22),jl(23,"number"),Lo(),Lo(),Lo(),Ao(24,ok,7,4,"tr",12),Ao(25,sk,7,4,"tr",12),Ao(26,lk,7,4,"tr",12),Lo(),Lo(),Ao(27,ck,1,1,"app-tankchart",13),Lo()),2&t){const t=Ho(2);Ji(8),us(Bl(9,7,t.dive.timeToSurface,"1.0-0")),Ji(7),us(Bl(16,10,t.noDeco,"1.0-0")),Ji(7),us(Bl(23,13,t.dive.averageDepth,"1.0-1")),Ji(2),Do("ngIf",t.showMaxBottomTime),Ji(1),Do("ngIf",t.dive.needsReturn),Ji(1),Do("ngIf",t.dive.needsReturn),Ji(1),Do("ngForOf",t.tanks)}}function dk(t,e){if(1&t&&(Eo(0,"div",15),Po(1,"fa-icon",16),Eo(2,"span"),cs(3),jl(4,"number"),Lo(),Lo()),2&t){const t=Ho(2);Ji(1),Do("icon",t.exclamation),Ji(2),ds("Not enough gas to realize the dive! Maximum bottom time for current amount of gas is ",Bl(4,2,t.dive.maxTime,"1.0-0")," min.")}}function hk(t,e){if(1&t&&(Eo(0,"div",15),Po(1,"fa-icon",16),Eo(2,"span"),cs(3),jl(4,"number"),Lo(),Lo()),2&t){const t=Ho(2);Ji(1),Do("icon",t.exclamation),Ji(2),ds("Not enough time to realize the dive (duration needs to be at least ",Bl(4,2,t.minimumDuration,"1.0-0")," min.)!")}}function fk(t,e){if(1&t&&(Eo(0,"div",17),Po(1,"fa-icon",16),Eo(2,"span"),cs(3),jl(4,"number"),Lo(),Lo()),2&t){const t=Ho(2);Ji(1),Do("icon",t.warning),Ji(2),ds("No decompression time for current depth exceeded (Bottom time needs to be maximum ",Bl(4,2,t.noDeco,"1.0-0")," min.)!")}}function pk(t,e){if(1&t&&(Eo(0,"div",17),Po(1,"fa-icon",16),Eo(2,"span"),cs(3),jl(4,"number"),Lo(),Lo()),2&t){const t=Ho().$implicit,e=Ho(2);Ji(1),Do("icon",e.warning),Ji(2),ds("High partial pressure of oxygen reached at depth ",Bl(4,2,t.depth,"1.0-0")," m (maximum depth exceeded)!")}}function gk(t,e){if(1&t&&(Eo(0,"div"),Ao(1,pk,5,5,"div",18),Lo()),2&t){const t=e.$implicit,n=Ho(2);Ji(1),Do("ngIf",n.isHighPpO2(t))}}function mk(t,e){if(1&t&&(Eo(0,"div",17),Po(1,"fa-icon",16),Eo(2,"span"),cs(3),jl(4,"date"),Lo(),Lo()),2&t){const t=Ho().$implicit,e=Ho(2);Ji(1),Do("icon",e.warning),Ji(2),ds("High descent speed at ",Bl(4,2,e.timeStampToString(t.timeStamp),e.durationFormat(t.timeStamp))," min.!")}}function vk(t,e){if(1&t&&(Eo(0,"div"),Ao(1,mk,5,5,"div",18),Lo()),2&t){const t=e.$implicit,n=Ho(2);Ji(1),Do("ngIf",n.isHighDescentSpeed(t))}}function yk(t,e){if(1&t&&(Eo(0,"div",17),Po(1,"fa-icon",16),Eo(2,"span"),cs(3),jl(4,"date"),Lo(),Lo()),2&t){const t=Ho().$implicit,e=Ho(2);Ji(1),Do("icon",e.warning),Ji(2),ds("High ascent speed at ",Bl(4,2,e.timeStampToString(t.timeStamp),e.durationFormat(t.timeStamp))," min.!")}}function bk(t,e){if(1&t&&(Eo(0,"div"),Ao(1,yk,5,5,"div",18),Lo()),2&t){const t=e.$implicit,n=Ho(2);Ji(1),Do("ngIf",n.isHighAscentSpeed(t))}}function xk(t,e){if(1&t&&(Eo(0,"div",17),Po(1,"fa-icon",16),Eo(2,"span"),cs(3),jl(4,"number"),jl(5,"date"),Lo(),Lo()),2&t){const t=Ho().$implicit,e=Ho(2);Ji(1),Do("icon",e.warning),Ji(2),hs("Ceiling depth ",Bl(4,3,t.depth,"1.0-0")," m broken at ",Bl(5,6,e.timeStampToString(t.timeStamp),e.durationFormat(t.timeStamp))," min.!")}}function _k(t,e){if(1&t&&(Eo(0,"div"),Ao(1,xk,6,9,"div",18),Lo()),2&t){const t=e.$implicit,n=Ho(2);Ji(1),Do("ngIf",n.isBrokenCeiling(t))}}function wk(t,e){if(1&t&&(Eo(0,"div",4),Ao(1,uk,28,16,"div",5),Ao(2,dk,5,5,"div",6),Ao(3,hk,5,5,"div",6),Ao(4,fk,5,5,"div",7),Ao(5,gk,2,1,"div",8),Ao(6,vk,2,1,"div",8),Ao(7,bk,2,1,"div",8),Ao(8,_k,2,1,"div",8),Lo()),2&t){const t=Ho();Ji(1),Do("ngIf",!t.dive.hasErrors),Ji(1),Do("ngIf",t.dive.notEnoughGas),Ji(1),Do("ngIf",t.dive.notEnoughTime),Ji(1),Do("ngIf",t.dive.noDecoExceeded),Ji(1),Do("ngForOf",t.dive.events),Ji(1),Do("ngForOf",t.dive.events),Ji(1),Do("ngForOf",t.dive.events),Ji(1),Do("ngForOf",t.dive.events)}}let kk=(()=>{class t{constructor(t){this.planer=t,this.exclamation=Z_,this.warning=W_,this.icon=Q_,this.dive=this.planer.dive}get tanks(){return this.planer.tanks}get showMaxBottomTime(){return this.dive.maxTime>0}get needsReturn(){return this.planer.plan.needsReturn}get noDeco(){return this.planer.plan.noDecoTime}get minimumDuration(){return this.planer.plan.duration+1}timeStampToString(t){return Vv.toDate(t)}durationFormat(t){return nk.selectTimeFormat(t)}isHighPpO2(t){return t.type===Dv.highPpO2}isHighAscentSpeed(t){return t.type===Dv.highAscentSpeed}isHighDescentSpeed(t){return t.type===Dv.highDescentSpeed}isBrokenCeiling(t){return t.type===Dv.brokenCeiling}}return t.\u0275fac=function(e){return new(e||t)(So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-consumption"]],decls:7,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"me-3",3,"icon"],["class","card-body",4,"ngIf"],[1,"card-body"],["class","pb-3",4,"ngIf"],["class","alert  alert-danger",4,"ngIf"],["class","alert  alert-warning",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"pb-3"],[1,"table"],[1,"table-active"],[4,"ngIf"],[3,"tank",4,"ngFor","ngForOf"],[3,"tank"],[1,"alert","alert-danger"],[1,"me-1",3,"icon"],[1,"alert","alert-warning"],["class","alert alert-warning",4,"ngIf"]],template:function(t,e){1&t&&(Eo(0,"div",0),Eo(1,"div",1),Po(2,"fa-icon",2),Eo(3,"span"),cs(4,"Dive info"),Lo(),Lo(),Ao(5,ak,2,0,"div",3),Ao(6,wk,9,8,"div",3),Lo()),2&t&&(Ji(2),Do("icon",e.icon),Ji(3),Do("ngIf",!e.dive.calculated),Ji(1),Do("ngIf",e.dive.calculated))},directives:[sv,pd,hd,ik],pipes:[bd,yd],styles:[""]}),t})();var Tk=n(425);let Mk=(()=>{class t{constructor(t){this.planer=t,this.icon=q_,this.elementName="diveplot",this.options={displaylogo:!1,displayModeBar:!1,responsive:!0,autosize:!0,scrollZoom:!1,editable:!1},this.chartHover=new ql,this.dive=this.planer.dive,this.layout={autosize:!0,showlegend:!1,xaxis:{fixedrange:!0,title:{text:"Time [minutes]"}},yaxis:{fixedrange:!0,autorange:"reversed",title:{text:"Depth [meters]"}},margin:{l:40,r:10,b:40,t:10}},this.updateLayoutThickFormat(),this.subscription=this.planer.calculated.subscribe(()=>{this.plotCharts()})}ngOnInit(){this.plotCharts();const t=document.getElementById(this.elementName);t.on("plotly_hover",t=>this.plotlyHover(t)),t.on("plotly_click",t=>this.plotlyHover(t))}ngOnDestroy(){this.subscription.unsubscribe()}scaleWidth(t,e){return t*e/this.dive.totalDuration}scaleHeight(t,e){return t*(e-10)/this.planer.plan.maxDepth}get noDecoTime(){return this.planer.plan.noDecoTime}plotlyHover(t){this.chartHover.emit(t.points[0].x)}plotCharts(){this.updateLayoutThickFormat(),this.plotAverageDepth(),this.plotDepths(),this.plotCeilings(),this.plotEvents()}updateLayoutThickFormat(){this.layout.xaxis.tickformat=nk.selectChartTimeFormat(this.dive.totalDuration)}plotAverageDepth(){const t=[],e=[];if(this.dive.wayPoints.length>0){const n=this.dive.wayPoints[this.dive.wayPoints.length-1],r=this.dive.averageDepth;[new dy(0,r,r),new dy(n.endTime,r,r)].forEach((n,r,i)=>{this.resampleToSeconds(t,e,n)})}Tk.react(this.elementName,[{x:t,y:e,type:"scatter",line:{dash:"dot"},name:"Average depth",marker:{color:"rgb(62, 157, 223)"}}],this.layout,this.options)}plotDepths(){const t=[],e=[],n=[{x:t,y:e,type:"scatter",name:"Dive",marker:{color:"rgb(31, 119, 180)"}}];this.dive.wayPoints.forEach((n,r,i)=>{this.resampleToSeconds(t,e,n)}),Tk.plot(this.elementName,n,this.layout,this.options)}plotCeilings(){const t=[],e=[];this.dive.ceilings.forEach((n,r,i)=>{t.push(Vv.toDate(n.time));const a=this.roundDepth(n.depth);e.push(a)}),Tk.plot(this.elementName,[{x:t,y:e,type:"scatter",fill:"tozeroy",name:"Ceilings",marker:{color:"rgb(255, 160, 73)"}}],this.layout,this.options)}plotEvents(){const t=[],e=[],n=[],r=[{x:t,y:e,labels:n,text:n,type:"scatter",mode:"text+markers",fill:"tozeroy",name:"events",hovertemplate:"%{x}<br>%{text} at %{y}m",texttemplate:"%{text}",textposition:"top left",fillcolor:"rgba(0, 0, 0, 0)",marker:{color:"rgba(31, 119, 180, 0.5)",size:8,line:{color:"rgba(31, 119, 180, 0.7)",width:2}},showlegend:!1}];this.convertEvents(t,e,n),Tk.plot(this.elementName,r,{xaxis:{showgrid:!1,showline:!1},fig_bgcolor:"rgb(255, 255, 255)",plot_bgcolor:"rgba(0, 0, 0, 0)",paper_bgcolor:"rgba(0, 0, 0, 0)"})}convertEvents(t,e,n){this.dive.events.forEach((r,i,a)=>{if(r.type===Dv.gasSwitch){t.push(Vv.toDate(r.timeStamp)),e.push(r.depth);const i=Nv.nameFor(r.data.fO2);n.push(`Switch to ${i}`)}})}roundDepth(t){return Math.round(100*t)/100}resampleToSeconds(t,e,n){const r=(n.endDepth-n.startDepth)/n.duration;for(let i=n.startTime;i<n.endTime;i++){t.push(Vv.toDate(i));let a=n.startDepth+(i-n.startTime)*r;a=this.roundDepth(a),e.push(a)}t.push(Vv.toDate(n.endTime)),e.push(n.endDepth)}}return t.\u0275fac=function(e){return new(e||t)(So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-profilechart"]],outputs:{chartHover:"chartHover"},decls:7,vars:1,consts:[[1,"card"],[1,"card-header"],["flip","vertical",1,"me-3",3,"icon"],[1,"card-body"],["id","diveplot"]],template:function(t,e){1&t&&(Eo(0,"div",0),Eo(1,"div",1),Po(2,"fa-icon",2),Eo(3,"span"),cs(4,"Profile chart"),Lo(),Lo(),Eo(5,"div",3),Po(6,"div",4),Lo(),Lo()),2&t&&(Ji(2),Do("icon",e.icon))},directives:[sv],styles:[".dive-level[_ngcontent-%COMP%]{stroke:#4169e1;stroke-width:2}.dive-surface[_ngcontent-%COMP%]{stroke:navy;stroke-width:4}.dive-waypoint[_ngcontent-%COMP%]{text-anchor:end}.dive-nodeco[_ngcontent-%COMP%]{fill:red;r:6}"]}),t})();function Ak(t,e){1&t&&(Eo(0,"th"),cs(1,"Gas"),Lo())}function Ck(t,e){if(1&t&&(Eo(0,"td"),cs(1),Lo()),2&t){const t=Ho().$implicit;Ji(1),us(t.gasName)}}const Sk=function(t){return{"table-active":t}};function Dk(t,e){if(1&t&&(Eo(0,"tr",7),Eo(1,"td"),Po(2,"fa-icon",8),Lo(),Eo(3,"td"),cs(4),Lo(),Eo(5,"td"),cs(6),jl(7,"date"),Lo(),Eo(8,"td"),cs(9),jl(10,"date"),Lo(),Ao(11,Ck,2,1,"td",5),Lo()),2&t){const t=e.$implicit,o=Ho();Do("ngClass",(n=14,r=Sk,i=t.selected,function(t,e,n,r,i,a){const o=e+n;return ko(t,o,i)?wo(t,o+1,a?r.call(a,i):r(i)):Vl(t,o+1)}(Le(),Be(),n,r,i,a))),Ji(2),Do("icon",o.swimActionIcon(t))("ngClass",o.iconClasses(t))("title",o.iconTitle(t)),Ji(2),us(t.endDepth),Ji(2),us(Bl(7,8,o.durationToString(t.duration),o.durationFormat())),Ji(3),us(Bl(10,11,o.durationToString(t.endTime),o.durationFormat())),Ji(2),Do("ngIf",o.isComplex)}var n,r,i,a}let Ok=(()=>{class t{constructor(t){this.planner=t,this.down=V_,this.up=j_,this.hover=H_,this.tasks=K_,this.switch=X_,this.dive=this.planner.dive}get isComplex(){return this.planner.isComplex}durationFormat(){return nk.selectTimeFormat(this.dive.totalDuration)}set selectedTimeStamp(t){if(this.lastSelected&&(this.lastSelected.selected=!1),t){const e=Vv.secondsFromDate(t);this.lastSelected=this.dive.wayPoints.find(t=>t.fits(e)),this.lastSelected&&(this.lastSelected.selected=!0)}}swimActionIcon(t){switch(t.swimAction){case uy.ascent:return this.up;case uy.descent:return this.down;case uy.switch:return this.switch;default:return this.hover}}iconTitle(t){switch(t.swimAction){case uy.ascent:return"ascent";case uy.descent:return"descent";case uy.switch:return"switch";default:return"hover"}}durationToString(t){return Vv.toDate(t)}iconClasses(t){return{"swim-down":t.swimAction===uy.descent,"swim-up":t.swimAction===uy.ascent,"swim-hover":t.swimAction===uy.hover||t.swimAction===uy.switch}}}return t.\u0275fac=function(e){return new(e||t)(So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-waypoints"]],inputs:{selectedTimeStamp:"selectedTimeStamp"},decls:18,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"me-3",3,"icon"],[1,"card-body"],[1,"table"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"icon","ngClass","title"]],template:function(t,e){1&t&&(Eo(0,"div",0),Eo(1,"div",1),Po(2,"fa-icon",2),Eo(3,"span"),cs(4,"Dive way points"),Lo(),Lo(),Eo(5,"div",3),Eo(6,"table",4),Eo(7,"tbody"),Eo(8,"tr"),Po(9,"th"),Eo(10,"th"),cs(11,"Depth [m]"),Lo(),Eo(12,"th"),cs(13,"Duration [min.]"),Lo(),Eo(14,"th"),cs(15,"Run [min.]"),Lo(),Ao(16,Ak,2,0,"th",5),Lo(),Ao(17,Dk,12,16,"tr",6),Lo(),Lo(),Lo(),Lo()),2&t&&(Ji(2),Do("icon",e.tasks),Ji(14),Do("ngIf",e.isComplex),Ji(1),Do("ngForOf",e.dive.wayPoints))},directives:[sv,pd,hd,ud],pipes:[yd],styles:[".swim-down[_ngcontent-%COMP%]{color:#deb887}.swim-up[_ngcontent-%COMP%]{color:#8a2be2}.swim-hover[_ngcontent-%COMP%]{color:#1e90ff}"]}),t})();function Ek(t,e){if(1&t){const t=Io();Eo(0,"div",11),Po(1,"fa-icon",12),Eo(2,"span"),Eo(3,"strong"),cs(4,"Disclaimer:"),Lo(),cs(5," None of the authors, contributors, administrators, or anyone else connected with this project can be responsible for your use of the information provided by this application or linked from these web pages. Use the results at your own risk."),Lo(),Eo(6,"button",13),Fo("click",function(){return Ie(t),Ho().stopDisclaimer()}),Lo(),Lo()}if(2&t){const t=Ho();Ji(1),Do("icon",t.exclamation)}}const Lk=function(t,e){return{"col-lg-12":t,"col-lg-8":e}};function Pk(t,e){if(1&t){const t=Io();Eo(0,"div",14),Eo(1,"app-profilechart",15),Fo("chartHover",function(e){return Ie(t),Ho().chartHover(e)}),Lo(),Lo()}if(2&t){const t=Ho();Do("ngClass",Fl(1,Lk,!t.isComplex,t.isComplex))}}function Ik(t,e){if(1&t&&(Eo(0,"div",10),Po(1,"app-waypoints",16),Lo()),2&t){const t=Ho();Ji(1),Do("selectedTimeStamp",t.selectedTimeStamp)}}const Rk=function(t,e,n){return{"col-md-4":t,"col-sm-6":e,"col-md-6":n}},Nk=function(t,e){return{"col-md-4":t,"col-sm-12":e}};let Fk=(()=>{class t{constructor(t,e){this.preferences=t,this.planner=e,this.showDisclaimer=!0,this.exclamation=W_,this.selectedTimeStamp="",this.dive=e.dive}get showResults(){return this.dive.calculated&&!this.dive.hasErrors}get isComplex(){return this.planner.isComplex}ngOnInit(){this.showDisclaimer=this.preferences.disclaimerEnabled()}stopDisclaimer(){this.showDisclaimer=!1,this.preferences.disableDisclaimer()}chartHover(t){this.selectedTimeStamp=t}}return t.\u0275fac=function(e){return new(e||t)(So(py),So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-dashboard"]],decls:16,vars:17,consts:[["name","form","novalidate",""],["f","ngForm"],[1,"mt-5"],[1,"row"],["class","alert alert-warning alert-dismissible fade show mt-4","role","alert",4,"ngIf"],[1,"col-12","col-xxl-4","mt-4",3,"ngClass"],[3,"validate"],[1,"col-12","col-lg-4","mt-4",3,"ngClass"],["class","col-12 col-xxl-6 mt-4",3,"ngClass",4,"ngIf"],["class","col-md-6 col-xxl-3 mt-4",4,"ngIf"],[1,"col-md-6","col-xxl-3","mt-4"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show","mt-4"],[1,"me-2","fa-lg",3,"icon"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"],[1,"col-12","col-xxl-6","mt-4",3,"ngClass"],[3,"chartHover"],[3,"selectedTimeStamp"]],template:function(t,e){if(1&t){const t=Io();Eo(0,"form",0,1),Eo(2,"div",2),Eo(3,"div",3),Eo(4,"div"),Ao(5,Ek,7,1,"div",4),Lo(),Eo(6,"div",5),Eo(7,"app-tanks",6),Fo("validate",function(){return Ie(t),Co(1).form.updateValueAndValidity()}),Lo(),Lo(),Eo(8,"div",5),Po(9,"app-depths"),Lo(),Eo(10,"div",7),Po(11,"app-diveoptions"),Lo(),Ao(12,Pk,2,4,"div",8),Ao(13,Ik,2,1,"div",9),Eo(14,"div",10),Po(15,"app-consumption"),Lo(),Lo(),Lo(),Lo()}2&t&&(Ji(5),Do("ngIf",e.showDisclaimer),Ji(1),Do("ngClass",zl(6,Rk,!e.isComplex,!e.isComplex,e.isComplex)),Ji(2),Do("ngClass",zl(10,Rk,!e.isComplex,!e.isComplex,e.isComplex)),Ji(2),Do("ngClass",Fl(14,Nk,!e.isComplex,!e.isComplex)),Ji(2),Do("ngIf",e.showResults),Ji(1),Do("ngIf",e.showResults))},directives:[lf,Nh,rf,pd,ud,Aw,jw,ek,kk,sv,Mk,Ok],styles:[""]}),t})();var zk=function(t){return t[t.sac=0]="sac",t[t.used=1]="used",t[t.duration=2]="duration",t}({});let Vk=(()=>{class t{constructor(){this._depth=15,this._tank=15,this._used=150,this._duration=45,this._sac=0,this._calculation=zk.sac,this.calculate=this.calculateSac,this.options={isFreshWater:!0,altitude:0},this.depthConverterFactory=new Mv(this.options);const t=this.depthConverterFactory.create();this.sacCalculator=new $v(t),this.calculate()}get depth(){return this._depth}set depth(t){this._depth=t,this.calculate()}get tank(){return this._tank}set tank(t){this._tank=t,this.calculate()}get sac(){return this._sac}set sac(t){this._sac=t,this.calculate()}get duration(){return this._duration}set duration(t){this._duration=t,this.calculate()}get used(){return this._used}set used(t){this._used=t,this.calculate()}get calculation(){return this._calculation}set calculation(t){switch(this._calculation=t,t){case zk.duration:this.calculate=this.calculateDuration;break;case zk.used:this.calculate=this.calculateUsed;break;default:this.calculate=this.calculateSac}}calculateSac(){this._sac=this.sacCalculator.calculateSac(this.depth,this.tank,this.used,this.duration)}calculateDuration(){this._duration=this.sacCalculator.calculateDuration(this.depth,this.tank,this.used,this.sac)}calculateUsed(){this._used=this.sacCalculator.calculateUsed(this.depth,this.tank,this.duration,this.sac)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Hk(t,e){1&t&&(Eo(0,"div",30),cs(1,"Needs to be number 1-350 m"),Lo())}function jk(t,e){1&t&&(Eo(0,"div",30),cs(1,"Needs to be number 1-350 L"),Lo())}function Bk(t,e){1&t&&(Eo(0,"div",30),cs(1,"Needs to be number, at least 1 min."),Lo())}function Uk(t,e){1&t&&(Eo(0,"div",30),cs(1,"Needs to be number 1-350 bar"),Lo())}function qk(t,e){1&t&&(Eo(0,"div",30),cs(1,"Needs to be number 5-90 L/min."),Lo())}const Gk=function(){return[1,350]},Zk=function(){return[5,90]};let Wk=(()=>{class t{constructor(t,e,n){this.router=t,this.planer=e,this.calc=n,this.calcIcon=U_}get inDuration(){return this.calc.calculation===zk.duration}get inUsed(){return this.calc.calculation===zk.used}get inSac(){return this.calc.calculation===zk.sac}toDuration(){this.calc.calculation=zk.duration}toUsed(){this.calc.calculation=zk.used}toSac(){this.calc.calculation=zk.sac}goBack(){var t=this;return z_(function*(){return yield t.router.navigateByUrl("/")})()}use(){var t=this;return z_(function*(){return t.planer.diver.sac=t.calc.sac,yield t.router.navigateByUrl("/")})()}}return t.\u0275fac=function(e){return new(e||t)(So(d_),So(fy),So(Vk))},t.\u0275cmp=qt({type:t,selectors:[["app-sac"]],decls:63,vars:56,consts:[[1,"mt-5"],[1,"row"],[1,"col-lg-3","col-md-6","mt-3"],[1,"card"],[1,"card-header"],[1,"me-3",3,"icon"],[1,"card-body"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["for","depth"],["name","depth","id","depth","type","number","required","","min","1","max","350","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["depth","ngModel"],["class","text-danger",4,"ngIf"],["for","tank"],["name","tank","id","tank","type","number","required","","min","1","max","350","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["tank","ngModel"],[3,"hidden"],["for","duration"],["name","duration","id","duration","type","number","required","","min","1","max","350","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["duration","ngModel"],["for","used"],["name","used","id","used","type","number","required","","min","1","max","350","sstep","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["used","ngModel"],["for","sac"],["name","sac","id","sac","type","number","required","","min","5","max","90","sstep","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["sac","ngModel"],["readonly","",1,"form-control",3,"ngModel"],[1,"form-group","mt-2"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger"]],template:function(t,e){if(1&t&&(Eo(0,"div",0),Eo(1,"div",1),Eo(2,"div",2),Eo(3,"div",3),Eo(4,"div",4),Po(5,"fa-icon",5),Eo(6,"span"),cs(7,"Surface air consumption"),Lo(),Lo(),Eo(8,"div",6),Eo(9,"div",7),Eo(10,"button",8),Fo("click",function(){return e.toSac()}),cs(11,"SAC"),Lo(),Eo(12,"button",8),Fo("click",function(){return e.toUsed()}),cs(13,"Used"),Lo(),Eo(14,"button",8),Fo("click",function(){return e.toDuration()}),cs(15,"Duration"),Lo(),Lo(),Eo(16,"div"),Eo(17,"label",9),cs(18,"Average depth [m]: "),Eo(19,"input",10,11),Fo("ngModelChange",function(t){return e.calc.depth=t}),Lo(),Lo(),Ao(21,Hk,2,0,"div",12),Lo(),Eo(22,"div"),Eo(23,"label",13),cs(24,"Tank size [L]: "),Eo(25,"input",14,15),Fo("ngModelChange",function(t){return e.calc.tank=t}),Lo(),Lo(),Ao(27,jk,2,0,"div",12),Lo(),Eo(28,"div",16),Eo(29,"label",17),cs(30,"Dive time [min.]: "),Eo(31,"input",18,19),Fo("ngModelChange",function(t){return e.calc.duration=t}),Lo(),Lo(),Ao(33,Bk,2,0,"div",12),Lo(),Eo(34,"div",16),Eo(35,"label",20),cs(36,"Gas consumed [bar]: "),Eo(37,"input",21,22),Fo("ngModelChange",function(t){return e.calc.used=t}),Lo(),Lo(),Ao(39,Uk,2,0,"div",12),Lo(),Eo(40,"div",16),Eo(41,"label",23),cs(42,"Sac [L/min.]: "),Eo(43,"input",24,25),Fo("ngModelChange",function(t){return e.calc.sac=t}),Lo(),Lo(),Ao(45,qk,2,0,"div",12),Lo(),Eo(46,"div",16),Eo(47,"label",23),cs(48,"Sac [L/min.]: "),Po(49,"input",26),Lo(),Lo(),Eo(50,"div",16),Eo(51,"label",23),cs(52,"Gas consumed [bar]: "),Po(53,"input",26),Lo(),Lo(),Eo(54,"div",16),Eo(55,"label",23),cs(56,"Dive time [min.]: "),Po(57,"input",26),Lo(),Lo(),Lo(),Lo(),Eo(58,"div",27),Eo(59,"button",28),Fo("click",function(){return e.use()}),cs(60,"Use"),Lo(),Eo(61,"button",29),Fo("click",function(){return e.goBack()}),cs(62,"Back"),Lo(),Lo(),Lo(),Lo(),Lo()),2&t){const t=Co(20),n=Co(26),r=Co(32),i=Co(38),a=Co(44);Ji(5),Do("icon",e.calcIcon),Ji(5),Qo("btn-primary",e.inSac),Ji(2),Qo("btn-primary",e.inUsed),Ji(2),Qo("btn-primary",e.inDuration),Ji(5),Qo("is-invalid",t.invalid&&(t.dirty||t.touched)),Do("ngModel",e.calc.depth)("rangeVal",Nl(51,Gk))("minVal",1)("maxVal",350),Ji(2),Do("ngIf",t.invalid&&(t.dirty||t.touched)),Ji(4),Qo("is-invalid",n.invalid&&(n.dirty||n.touched)),Do("ngModel",e.calc.tank)("rangeVal",Nl(52,Gk))("minVal",1)("maxVal",350),Ji(2),Do("ngIf",n.invalid&&(n.dirty||n.touched)),Ji(1),Do("hidden",e.inDuration),Ji(3),Qo("is-invalid",r.invalid&&(r.dirty||r.touched)),Do("ngModel",e.calc.duration)("rangeVal",Nl(53,Gk))("minVal",1)("maxVal",350),Ji(2),Do("ngIf",r.invalid&&(r.dirty||r.touched)),Ji(1),Do("hidden",e.inUsed),Ji(3),Qo("is-invalid",i.invalid&&(i.dirty||i.touched)),Do("ngModel",e.calc.used)("rangeVal",Nl(54,Gk))("minVal",1)("maxVal",350),Ji(2),Do("ngIf",i.invalid&&(i.dirty||i.touched)),Ji(1),Do("hidden",e.inSac),Ji(3),Qo("is-invalid",a.invalid&&(a.dirty||a.touched)),Do("ngModel",e.calc.sac)("rangeVal",Nl(55,Zk))("minVal",5)("maxVal",90),Ji(2),Do("ngIf",a.invalid&&(a.dirty||a.touched)),Ji(1),Do("hidden",!e.inSac),Ji(3),Do("ngModel",e.calc.sac),Ji(1),Do("hidden",!e.inUsed),Ji(3),Do("ngModel",e.calc.used),Ji(1),Do("hidden",!e.inDuration),Ji(3),Do("ngModel",e.calc.duration)}},directives:[sv,mf,pf,uf,uh,yf,Rh,sf,Fg,Ig,Eg,pd],styles:[""]}),t})();var $k=function(t){return t[t.Mod=0]="Mod",t[t.BestMix=1]="BestMix",t[t.PO2=2]="PO2",t}({});let Yk=(()=>{class t{constructor(){this._pO2=1.6,this._fO2=50,this._mod=22.43,this._calculation=$k.Mod,this.calculate=this.calculateCurrentMod,this.nitroxCalculator=new Yv(Av.forFreshWater())}get calculation(){return this._calculation}set calculation(t){switch(this._calculation=t,t){case $k.BestMix:this.calculate=this.calculateBestMix;break;case $k.PO2:this.calculate=this.calculatePartial;break;default:this.calculate=this.calculateCurrentMod}}get pO2(){return this._pO2}set pO2(t){this._pO2=t,this.calculate()}get fO2(){return this._fO2}set fO2(t){this._fO2=t,this.calculate()}get ead(){return Yv.ead(this._fO2,this._mod)}get mod(){return this._mod}set mod(t){this._mod=t,this.calculate()}calculateCurrentMod(){this._mod=this.nitroxCalculator.mod(this._pO2,this._fO2)}calculateBestMix(){this._fO2=this.nitroxCalculator.bestMix(this._pO2,this._mod)}calculatePartial(){this._pO2=this.nitroxCalculator.partialPressure(this._fO2,this._mod)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Xk(t,e){1&t&&(Eo(0,"div",25),cs(1,"Needs to be number 0.21-3 bar"),Lo())}function Qk(t,e){1&t&&(Eo(0,"div",25),cs(1,"Needs to be number 21-100 %"),Lo())}function Kk(t,e){1&t&&(Eo(0,"div",25),cs(1,"Needs to be number 3-350 m"),Lo())}const Jk=function(){return[.21,3]},tT=function(){return[21,100]},eT=function(){return[1,350]},nT=[{path:"",component:Fk},{path:"diver",component:ow},{path:"sac",component:Wk},{path:"nitrox",component:(()=>{class t{constructor(t,e,n){this.calc=t,this.router=e,this.planer=n,this.calcIcon=U_}get inMod(){return this.calc.calculation===$k.Mod}get inBestMix(){return this.calc.calculation===$k.BestMix}get inPO2(){return this.calc.calculation===$k.PO2}toMod(){this.calc.calculation=$k.Mod}toBestMix(){this.calc.calculation=$k.BestMix}toPO2(){this.calc.calculation=$k.PO2}goBack(){var t=this;return z_(function*(){return yield t.router.navigateByUrl("/")})()}use(){var t=this;return z_(function*(){return t.planer.firstTank.o2=t.calc.fO2,t.planer.diver.maxPpO2=t.calc.pO2,yield t.router.navigateByUrl("/")})()}}return t.\u0275fac=function(e){return new(e||t)(So(Yk),So(d_),So(fy))},t.\u0275cmp=qt({type:t,selectors:[["app-nitrox"]],decls:55,vars:42,consts:[[1,"mt-5"],[1,"row"],[1,"col-lg-3","col-md-6","mt-3"],[1,"card"],[1,"card-header"],[1,"me-3",3,"icon"],[1,"card-body"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],[3,"hidden"],["for","pO2"],["name","pO2","id","pO2","type","number","required","","min","0.21","max","3","step","0.1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["pO2","ngModel"],["class","text-danger",4,"ngIf"],["for","fO2"],["name","fO2","id","fO2","type","number","required","","min","21","max","100","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["fO2","ngModel"],["for","mod"],["name","mod","id","mod","type","number","required","","min","1","max","350","step","1",1,"form-control",3,"ngModel","rangeVal","minVal","maxVal","ngModelChange"],["mod","ngModel"],[1,"form-text","text-muted"],["readonly","",1,"form-control",3,"ngModel"],[1,"form-group","mt-2"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger"]],template:function(t,e){if(1&t&&(Eo(0,"div",0),Eo(1,"div",1),Eo(2,"div",2),Eo(3,"div",3),Eo(4,"div",4),Po(5,"fa-icon",5),Eo(6,"span"),cs(7,"Nitrox calculator"),Lo(),Lo(),Eo(8,"div",6),Eo(9,"div",7),Eo(10,"button",8),Fo("click",function(){return e.toMod()}),cs(11,"MOD"),Lo(),Eo(12,"button",8),Fo("click",function(){return e.toBestMix()}),cs(13,"Best mix"),Lo(),Eo(14,"button",8),Fo("click",function(){return e.toPO2()}),cs(15,"ppO2"),Lo(),Lo(),Eo(16,"div",9),Eo(17,"label",10),cs(18,"ppO2 [bar]: "),Eo(19,"input",11,12),Fo("ngModelChange",function(t){return e.calc.pO2=t}),Lo(),Lo(),Ao(21,Xk,2,0,"div",13),Lo(),Eo(22,"div",9),Eo(23,"label",14),cs(24,"Percent O2: "),Eo(25,"input",15,16),Fo("ngModelChange",function(t){return e.calc.fO2=t}),Lo(),Lo(),Ao(27,Qk,2,0,"div",13),Lo(),Eo(28,"div",9),Eo(29,"label",17),cs(30,"MOD [m]: "),Eo(31,"input",18,19),Fo("ngModelChange",function(t){return e.calc.mod=t}),Lo(),Eo(33,"small",20),cs(34),Lo(),Lo(),Ao(35,Kk,2,0,"div",13),Lo(),Eo(36,"div",9),Eo(37,"label",17),cs(38,"MOD [m]: "),Po(39,"input",21),Eo(40,"small",20),cs(41),Lo(),Lo(),Lo(),Eo(42,"div",9),Eo(43,"label",17),cs(44,"Percent O2: "),Po(45,"input",21),Lo(),Lo(),Eo(46,"div",9),Eo(47,"label",17),cs(48,"ppO2 [bar]: "),Po(49,"input",21),Lo(),Lo(),Lo(),Lo(),Eo(50,"div",22),Eo(51,"button",23),Fo("click",function(){return e.use()}),cs(52,"Use"),Lo(),Eo(53,"button",24),Fo("click",function(){return e.goBack()}),cs(54,"Back"),Lo(),Lo(),Lo(),Lo(),Lo()),2&t){const t=Co(20),n=Co(26),r=Co(32);Ji(5),Do("icon",e.calcIcon),Ji(5),Qo("btn-primary",e.inMod),Ji(2),Qo("btn-primary",e.inBestMix),Ji(2),Qo("btn-primary",e.inPO2),Ji(2),Do("hidden",e.inPO2),Ji(3),Qo("is-invalid",t.invalid&&(t.dirty||t.touched)),Do("ngModel",e.calc.pO2)("rangeVal",Nl(39,Jk))("minVal",.21)("maxVal",3),Ji(2),Do("ngIf",t.invalid&&(t.dirty||t.touched)),Ji(1),Do("hidden",e.inBestMix),Ji(3),Qo("is-invalid",n.invalid&&(n.dirty||n.touched)),Do("ngModel",e.calc.fO2)("rangeVal",Nl(40,tT))("minVal",21)("maxVal",100),Ji(2),Do("ngIf",n.invalid&&(n.dirty||n.touched)),Ji(1),Do("hidden",e.inMod),Ji(3),Qo("is-invalid",r.invalid&&(r.dirty||r.touched)),Do("ngModel",e.calc.mod)("rangeVal",Nl(41,eT))("minVal",1)("maxVal",350),Ji(3),ds("EAD: ",e.calc.ead," m"),Ji(1),Do("ngIf",r.invalid&&(r.dirty||r.touched)),Ji(1),Do("hidden",!e.inMod),Ji(3),Do("ngModel",e.calc.mod),Ji(2),ds("EAD: ",e.calc.ead," m"),Ji(1),Do("hidden",!e.inBestMix),Ji(3),Do("ngModel",e.calc.fO2),Ji(1),Do("hidden",!e.inPO2),Ji(3),Do("ngModel",e.calc.pO2)}},directives:[sv,mf,pf,uf,uh,yf,Rh,sf,Fg,Ig,Eg,pd],styles:[""]}),t})()},{path:"about",component:(()=>{class t{constructor(){this.exclamation=W_}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["app-about"]],decls:16,vars:1,consts:[[1,"jumbotron","m-4","pt-5"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show","mt-4"],[1,"me-2","fa-lg",3,"icon"],[1,"mt-4"],["href","https://github.com/jirkapok/GasPlanner","target","_blank",1,"btn","btn-primary","btn-lg"]],template:function(t,e){1&t&&(Eo(0,"div",0),Eo(1,"h1"),cs(2,"About Gas Planner"),Lo(),Eo(3,"p"),cs(4,"Open source Scuba diving application to help divers plan their dives."),Po(5,"br"),cs(6," Plan your dive and dive your plan!"),Lo(),Eo(7,"div",1),Po(8,"fa-icon",2),Eo(9,"span"),Eo(10,"strong"),cs(11,"Disclaimer:"),Lo(),cs(12," None of the authors, contributors, administrators, or anyone else connected with this project can be responsible for your use of the information provided by this application or linked from these web pages. Use the results at your own risk."),Lo(),Lo(),Eo(13,"div",3),Eo(14,"a",4),cs(15,"Github project"),Lo(),Lo(),Lo()),2&t&&(Ji(8),Do("icon",e.exclamation))},directives:[sv],styles:[""]}),t})()}];let rT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=pt({imports:[[T_.forRoot(nT)],T_]}),t})(),iT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t,bootstrap:[N_]}),t.\u0275inj=pt({providers:[fy,py],imports:[[rh,xf,Cg,rT,zg,lv,xv.register("ngsw-worker.js",{enabled:!0})]]}),t})();(function(){if(Bc)throw new Error("Cannot enable prod mode after platform setup.");jc=!1})(),eh().bootstrapModule(iT).catch(t=>console.error(t))},425:t=>{t.exports=function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){return i(e[o][1][t]||t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";var r=t("../src/lib"),i={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var a in i){var o=a.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(o,i[a])}},{"../src/lib":202}],2:[function(t,e,n){"use strict";e.exports=t("../src/traces/bar")},{"../src/traces/bar":308}],3:[function(t,e,n){"use strict";e.exports=t("../src/core")},{"../src/core":183}],4:[function(t,e,n){"use strict";var r=t("./core");r.register([t("./bar"),t("./pie")]),e.exports=r},{"./bar":2,"./core":3,"./pie":5}],5:[function(t,e,n){"use strict";e.exports=t("../src/traces/pie")},{"../src/traces/pie":323}],6:[function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(t,e){return new Promise(function(n,r){function i(){void 0!==a&&t.removeListener("error",a),n([].slice.call(arguments))}var a;"error"!==e&&(a=function(n){t.removeListener(e,i),r(n)},t.once("error",a)),t.once(e,i)})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function d(t,e,n,r){var i,a,o;if(c(n),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),o=a[e]),void 0===o)o=a[e]=n,++t._eventsCount;else if("function"==typeof o?o=a[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=u(t))>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,console&&console.warn&&console.warn(s)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[t];if(void 0===l)return!1;if("function"==typeof l)a(l,this,e);else{var c=l.length,u=m(l,c);for(n=0;n<c;++n)a(u[n],this,e)}return!0},s.prototype.on=s.prototype.addListener=function(t,e){return d(this,t,e,!1)},s.prototype.prependListener=function(t,e){return d(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,f(this,t,e)),this},s.prototype.off=s.prototype.removeListener=function(t,e){var n,r,i,a,o;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},{}],7:[function(t,e,n){var r,i;r=this,i=function(t,e){"use strict";function n(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function i(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function a(t){var a=t.dateTime,o=t.date,l=t.time,c=t.periods,u=t.days,d=t.shortDays,h=t.months,yt=t.shortMonths,bt=f(c),xt=p(c),_t=f(u),wt=p(u),kt=f(d),Tt=p(d),Mt=f(h),At=p(h),Ct=f(yt),St=p(yt),Dt={a:function(t){return d[t.getDay()]},A:function(t){return u[t.getDay()]},b:function(t){return yt[t.getMonth()]},B:function(t){return h[t.getMonth()]},c:null,d:R,e:R,f:H,H:N,I:F,j:z,L:V,m:j,M:B,p:function(t){return c[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:mt,s:vt,S:U,u:q,U:G,V:Z,w:W,W:$,x:null,X:null,y:Y,Y:X,Z:Q,"%":gt},Ot={a:function(t){return d[t.getUTCDay()]},A:function(t){return u[t.getUTCDay()]},b:function(t){return yt[t.getUTCMonth()]},B:function(t){return h[t.getUTCMonth()]},c:null,d:K,e:K,f:rt,H:J,I:tt,j:et,L:nt,m:it,M:at,p:function(t){return c[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:mt,s:vt,S:ot,u:st,U:lt,V:ct,w:ut,W:dt,x:null,X:null,y:ht,Y:ft,Z:pt,"%":gt},Et={a:function(t,e,n){var r=kt.exec(e.slice(n));return r?(t.w=Tt[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=_t.exec(e.slice(n));return r?(t.w=wt[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=Ct.exec(e.slice(n));return r?(t.m=St[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=Mt.exec(e.slice(n));return r?(t.m=At[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return It(t,a,e,n)},d:M,e:M,f:E,H:C,I:C,j:A,L:O,m:T,M:S,p:function(t,e,n){var r=bt.exec(e.slice(n));return r?(t.p=xt[r[0].toLowerCase()],n+r[0].length):-1},q:k,Q:P,s:I,S:D,u:m,U:v,V:y,w:g,W:b,x:function(t,e,n){return It(t,o,e,n)},X:function(t,e,n){return It(t,l,e,n)},y:_,Y:x,Z:w,"%":L};function Lt(t,e){return function(n){var r,i,a,o=[],l=-1,c=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++l<u;)37===t.charCodeAt(l)&&(o.push(t.slice(c,l)),null!=(i=s[r=t.charAt(++l)])?r=t.charAt(++l):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),c=l+1);return o.push(t.slice(c,l)),o.join("")}}function Pt(t,a){return function(o){var s,l,c=i(1900,void 0,1);if(It(c,t,o+="",0)!=o.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(a&&!("Z"in c)&&(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(l=(s=r(i(c.y,0,1))).getUTCDay(),s=l>4||0===l?e.utcMonday.ceil(s):e.utcMonday(s),s=e.utcDay.offset(s,7*(c.V-1)),c.y=s.getUTCFullYear(),c.m=s.getUTCMonth(),c.d=s.getUTCDate()+(c.w+6)%7):(l=(s=n(i(c.y,0,1))).getDay(),s=l>4||0===l?e.timeMonday.ceil(s):e.timeMonday(s),s=e.timeDay.offset(s,7*(c.V-1)),c.y=s.getFullYear(),c.m=s.getMonth(),c.d=s.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),l="Z"in c?r(i(c.y,0,1)).getUTCDay():n(i(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(l+5)%7:c.w+7*c.U-(l+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,r(c)):n(c)}}function It(t,e,n,r){for(var i,a,o=0,l=e.length,c=n.length;o<l;){if(r>=c)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=Et[i in s?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return Dt.x=Lt(o,Dt),Dt.X=Lt(l,Dt),Dt.c=Lt(a,Dt),Ot.x=Lt(o,Ot),Ot.X=Lt(l,Ot),Ot.c=Lt(a,Ot),{format:function(t){var e=Lt(t+="",Dt);return e.toString=function(){return t},e},parse:function(t){var e=Pt(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=Lt(t+="",Ot);return e.toString=function(){return t},e},utcParse:function(t){var e=Pt(t+="",!0);return e.toString=function(){return t},e}}}var o,s={"-":"",_:" ",0:"0"},l=/^\s*\d+/,c=/^%/,u=/[\\^$*+?|[\]().{}]/g;function d(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function h(t){return t.replace(u,"\\$&")}function f(t){return new RegExp("^(?:"+t.map(h).join("|")+")","i")}function p(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function g(t,e,n){var r=l.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function m(t,e,n){var r=l.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function v(t,e,n){var r=l.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function y(t,e,n){var r=l.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function b(t,e,n){var r=l.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function x(t,e,n){var r=l.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function _(t,e,n){var r=l.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function w(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function k(t,e,n){var r=l.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function T(t,e,n){var r=l.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function M(t,e,n){var r=l.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function A(t,e,n){var r=l.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function C(t,e,n){var r=l.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function S(t,e,n){var r=l.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function D(t,e,n){var r=l.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function O(t,e,n){var r=l.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function E(t,e,n){var r=l.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function L(t,e,n){var r=c.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function P(t,e,n){var r=l.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function I(t,e,n){var r=l.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function R(t,e){return d(t.getDate(),e,2)}function N(t,e){return d(t.getHours(),e,2)}function F(t,e){return d(t.getHours()%12||12,e,2)}function z(t,n){return d(1+e.timeDay.count(e.timeYear(t),t),n,3)}function V(t,e){return d(t.getMilliseconds(),e,3)}function H(t,e){return V(t,e)+"000"}function j(t,e){return d(t.getMonth()+1,e,2)}function B(t,e){return d(t.getMinutes(),e,2)}function U(t,e){return d(t.getSeconds(),e,2)}function q(t){var e=t.getDay();return 0===e?7:e}function G(t,n){return d(e.timeSunday.count(e.timeYear(t)-1,t),n,2)}function Z(t,n){var r=t.getDay();return t=r>=4||0===r?e.timeThursday(t):e.timeThursday.ceil(t),d(e.timeThursday.count(e.timeYear(t),t)+(4===e.timeYear(t).getDay()),n,2)}function W(t){return t.getDay()}function $(t,n){return d(e.timeMonday.count(e.timeYear(t)-1,t),n,2)}function Y(t,e){return d(t.getFullYear()%100,e,2)}function X(t,e){return d(t.getFullYear()%1e4,e,4)}function Q(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+d(e/60|0,"0",2)+d(e%60,"0",2)}function K(t,e){return d(t.getUTCDate(),e,2)}function J(t,e){return d(t.getUTCHours(),e,2)}function tt(t,e){return d(t.getUTCHours()%12||12,e,2)}function et(t,n){return d(1+e.utcDay.count(e.utcYear(t),t),n,3)}function nt(t,e){return d(t.getUTCMilliseconds(),e,3)}function rt(t,e){return nt(t,e)+"000"}function it(t,e){return d(t.getUTCMonth()+1,e,2)}function at(t,e){return d(t.getUTCMinutes(),e,2)}function ot(t,e){return d(t.getUTCSeconds(),e,2)}function st(t){var e=t.getUTCDay();return 0===e?7:e}function lt(t,n){return d(e.utcSunday.count(e.utcYear(t)-1,t),n,2)}function ct(t,n){var r=t.getUTCDay();return t=r>=4||0===r?e.utcThursday(t):e.utcThursday.ceil(t),d(e.utcThursday.count(e.utcYear(t),t)+(4===e.utcYear(t).getUTCDay()),n,2)}function ut(t){return t.getUTCDay()}function dt(t,n){return d(e.utcMonday.count(e.utcYear(t)-1,t),n,2)}function ht(t,e){return d(t.getUTCFullYear()%100,e,2)}function ft(t,e){return d(t.getUTCFullYear()%1e4,e,4)}function pt(){return"+0000"}function gt(){return"%"}function mt(t){return+t}function vt(t){return Math.floor(+t/1e3)}function yt(e){return o=a(e),t.timeFormat=o.format,t.timeParse=o.parse,t.utcFormat=o.utcFormat,t.utcParse=o.utcParse,o}yt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var bt=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),xt=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");t.isoFormat=bt,t.isoParse=xt,t.timeFormatDefaultLocale=yt,t.timeFormatLocale=a,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-time")):i((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":8}],8:[function(t,e,n){!function(t,r){!function(t){"use strict";var e=new Date,n=new Date;function r(t,i,a,o){function s(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return t(e=new Date(+e)),e},s.ceil=function(e){return t(e=new Date(e-1)),i(e,1),t(e),e},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return i(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(e,n,r){var a,o=[];if(e=s.ceil(e),r=null==r?1:Math.floor(r),!(e<n&&r>0))return o;do{o.push(a=new Date(+e)),i(e,r),t(e)}while(a<e&&e<n);return o},s.filter=function(e){return r(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;i(t,-1),!e(t););else for(;--n>=0;)for(;i(t,1),!e(t););})},a&&(s.count=function(r,i){return e.setTime(+r),n.setTime(+i),t(e),t(n),Math.floor(a(e,n))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(o?function(e){return o(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var i=r(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):i:null};var a=i.range,o=r(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),s=o.range,l=r(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()}),c=l.range,u=r(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),d=u.range,h=r(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1}),f=h.range;function p(t){return r(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var g=p(0),m=p(1),v=p(2),y=p(3),b=p(4),x=p(5),_=p(6),w=g.range,k=m.range,T=v.range,M=y.range,A=b.range,C=x.range,S=_.range,D=r(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),O=D.range,E=r(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});E.every=function(t){return isFinite(t=Math.floor(t))&&t>0?r(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var L=E.range,P=r(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}),I=P.range,R=r(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),N=R.range,F=r(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),z=F.range;function V(t){return r(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var H=V(0),j=V(1),B=V(2),U=V(3),q=V(4),G=V(5),Z=V(6),W=H.range,$=j.range,Y=B.range,X=U.range,Q=q.range,K=G.range,J=Z.range,tt=r(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),et=tt.range,nt=r(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});nt.every=function(t){return isFinite(t=Math.floor(t))&&t>0?r(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var rt=nt.range;t.timeDay=h,t.timeDays=f,t.timeFriday=x,t.timeFridays=C,t.timeHour=u,t.timeHours=d,t.timeInterval=r,t.timeMillisecond=i,t.timeMilliseconds=a,t.timeMinute=l,t.timeMinutes=c,t.timeMonday=m,t.timeMondays=k,t.timeMonth=D,t.timeMonths=O,t.timeSaturday=_,t.timeSaturdays=S,t.timeSecond=o,t.timeSeconds=s,t.timeSunday=g,t.timeSundays=w,t.timeThursday=b,t.timeThursdays=A,t.timeTuesday=v,t.timeTuesdays=T,t.timeWednesday=y,t.timeWednesdays=M,t.timeWeek=g,t.timeWeeks=w,t.timeYear=E,t.timeYears=L,t.utcDay=F,t.utcDays=z,t.utcFriday=G,t.utcFridays=K,t.utcHour=R,t.utcHours=N,t.utcMillisecond=i,t.utcMilliseconds=a,t.utcMinute=P,t.utcMinutes=I,t.utcMonday=j,t.utcMondays=$,t.utcMonth=tt,t.utcMonths=et,t.utcSaturday=Z,t.utcSaturdays=J,t.utcSecond=o,t.utcSeconds=s,t.utcSunday=H,t.utcSundays=W,t.utcThursday=q,t.utcThursdays=Q,t.utcTuesday=B,t.utcTuesdays=Y,t.utcWednesday=U,t.utcWednesdays=X,t.utcWeek=H,t.utcWeeks=W,t.utcYear=nt,t.utcYears=rt,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:(t=t||self).d3=t.d3||{})}(this)},{}],9:[function(t,e,n){!function(){var t={version:"3.5.17"},n=[].slice,r=function(t){return n.call(t)},i=this.document;function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(i)try{r(i.documentElement.childNodes)}catch(t){r=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var s=this.Element.prototype,l=s.setAttribute,c=s.setAttributeNS,u=this.CSSStyleDeclaration.prototype,d=u.setProperty;s.setAttribute=function(t,e){l.call(this,t,e+"")},s.setAttributeNS=function(t,e,n){c.call(this,t,e,n+"")},u.setProperty=function(t,e,n){d.call(this,t,e+"",n)}}function h(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function f(t){return null===t?NaN:+t}function p(t){return!isNaN(t)}function g(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}t.ascending=h,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},t.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},t.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},t.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)p(n=+t[a])&&(r+=n);else for(;++a<i;)p(n=+e.call(t,t[a],a))&&(r+=n);return r},t.mean=function(t,e){var n,r=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)p(n=f(t[a]))?r+=n:--o;else for(;++a<i;)p(n=f(e.call(t,t[a],a)))?r+=n:--o;if(o)return r/o},t.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},t.median=function(e,n){var r,i=[],a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)p(r=f(e[o]))&&i.push(r);else for(;++o<a;)p(r=f(n.call(e,e[o],o)))&&i.push(r);if(i.length)return t.quantile(i.sort(h),.5)},t.variance=function(t,e){var n,r,i=t.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)p(n=f(t[s]))&&(o+=(r=n-a)*(n-(a+=r/++l)));else for(;++s<i;)p(n=f(e.call(t,t[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++l)));if(l>1)return o/(l-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var m=g(h);function v(t){return t.length}t.bisectLeft=m.left,t.bisect=t.bisectRight=m.right,t.bisector=function(t){return g(1===t.length?function(e,n){return h(t(e),n)}:t)},t.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},t.transpose=function(e){if(!(a=e.length))return[];for(var n=-1,r=t.min(e,v),i=new Array(r);++n<r;)for(var a,o=-1,s=i[n]=new Array(a);++o<a;)s[o]=e[o][n];return i},t.zip=function(){return t.transpose(arguments)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n};var y=Math.abs;function b(t){for(var e=1;t*e%1;)e*=10;return e}function x(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function _(){this._=Object.create(null)}function w(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function k(t){return"\0"===(t+="")[0]?t.slice(1):t}function T(t){return w(t)in this._}function M(t){return(t=w(t))in this._&&delete this._[t]}function A(){var t=[];for(var e in this._)t.push(k(e));return t}function C(){var t=0;for(var e in this._)++t;return t}function S(){for(var t in this._)return!1;return!0}function D(){this._=Object.create(null)}function O(t){return t}function E(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function L(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=P.length;n<r;++n){var i=P[n]+e;if(i in t)return i}}t.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],a=b(y(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},t.map=function(t,e){var n=new _;if(t instanceof _)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n},x(_,{has:T,get:function(t){return this._[w(t)]},set:function(t,e){return this._[w(t)]=e},remove:M,keys:A,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:k(e),value:this._[e]});return t},size:C,empty:S,forEach:function(t){for(var e in this._)t.call(this,k(e),this._[e])}}),t.nest=function(){var e,n,r={},i=[],a=[];function o(t,a,s){if(s>=i.length)return n?n.call(r,a):e?a.sort(e):a;for(var l,c,u,d,h=-1,f=a.length,p=i[s++],g=new _;++h<f;)(d=g.get(l=p(c=a[h])))?d.push(c):g.set(l,[c]);return t?(c=t(),u=function(e,n){c.set(e,o(t,n,s))}):(c={},u=function(e,n){c[e]=o(t,n,s)}),g.forEach(u),c}return r.map=function(t,e){return o(e,t,0)},r.entries=function(e){return function t(e,n){if(n>=i.length)return e;var r=[],o=a[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),o?r.sort(function(t,e){return o(t.key,e.key)}):r}(o(t.map,e,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return a[i.length-1]=t,r},r.sortValues=function(t){return e=t,r},r.rollup=function(t){return n=t,r},r},t.set=function(t){var e=new D;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},x(D,{has:T,add:function(t){return this._[w(t+="")]=!0,t},remove:M,values:A,size:C,empty:S,forEach:function(t){for(var e in this._)t.call(this,k(e))}}),t.behavior={},t.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=E(t,e,e[n]);return t};var P=["webkit","ms","moz","Moz","o","O"];function I(){}function R(){}function N(t){var e=[],n=new _;function r(){for(var n,r=e,i=-1,a=r.length;++i<a;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var a,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,a=e.indexOf(o)).concat(e.slice(a+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function F(){t.event.preventDefault()}function z(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function V(e){for(var n=new R,r=0,i=arguments.length;++r<i;)n[arguments[r]]=N(n);return n.of=function(r,i){return function(a){try{var o=a.sourceEvent=t.event;a.target=e,t.event=a,n[a.type].apply(r,i)}finally{t.event=o}}},n}t.dispatch=function(){for(var t=new R,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=N(t);return t},R.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},t.event=null,t.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,j={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function B(t){return j(t,Z),t}var U=function(t,e){return e.querySelector(t)},q=function(t,e){return e.querySelectorAll(t)},G=function(t,e){var n=t.matches||t[L(t,"matchesSelector")];return(G=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(U=function(t,e){return Sizzle(t,e)[0]||null},q=Sizzle,G=Sizzle.matchesSelector),t.selection=function(){return t.select(i.documentElement)};var Z=t.selection.prototype=[];function W(t){return"function"==typeof t?t:function(){return U(t,this)}}function $(t){return"function"==typeof t?t:function(){return q(t,this)}}Z.select=function(t){var e,n,r,i,a=[];t=W(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return B(a)},Z.selectAll=function(t){var e,n,i=[];t=$(t);for(var a=-1,o=this.length;++a<o;)for(var s=this[a],l=-1,c=s.length;++l<c;)(n=s[l])&&(i.push(e=r(t.call(n,n.__data__,l,a))),e.parentNode=n);return B(i)};var Y="http://www.w3.org/1999/xhtml",X={svg:"http://www.w3.org/2000/svg",xhtml:Y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q(e,n){return e=t.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function K(t){return t.trim().replace(/\s+/g," ")}function J(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function tt(t){return(t+"").trim().split(/^|\s+/)}function et(t,e){var n=(t=tt(t).map(nt)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function nt(t){var e=J(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",K(i+" "+t))):n.setAttribute("class",K(i.replace(e," ")))}}function rt(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function it(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function at(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Y&&t.documentElement.namespaceURI===Y?t.createElement(e):t.createElementNS(n,e)}}function ot(){var t=this.parentNode;t&&t.removeChild(this)}function st(t){return{__data__:t}}function lt(t){return function(){return G(this,t)}}function ct(t){return arguments.length||(t=h),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function ut(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,a=t[n],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,n);return t}function dt(t){return j(t,ht),t}t.ns={prefix:X,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),X.hasOwnProperty(n)?{space:X[n],local:t}:t}},Z.attr=function(e,n){if(arguments.length<2){if("string"==typeof e){var r=this.node();return(e=t.ns.qualify(e)).local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e)this.each(Q(n,e[n]));return this}return this.each(Q(e,n))},Z.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=tt(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!J(t[i]).test(e))return!1;return!0}for(e in t)this.each(et(e,t[e]));return this}return this.each(et(t,e))},Z.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(rt(n,t[n],e));return this}if(r<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(rt(t,e,n))},Z.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(it(e,t[e]));return this}return this.each(it(t,e))},Z.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Z.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Z.append=function(t){return t=at(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Z.insert=function(t,e){return t=at(t),e=W(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Z.remove=function(){return this.each(ot)},Z.data=function(t,e){var n,r,i=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++i<a;)(r=n[i])&&(t[i]=r.__data__);return t}function o(t,n){var r,i,a,o=t.length,u=n.length,d=Math.min(o,u),h=new Array(u),f=new Array(u),p=new Array(o);if(e){var g,m=new _,v=new Array(o);for(r=-1;++r<o;)(i=t[r])&&(m.has(g=e.call(i,i.__data__,r))?p[r]=i:m.set(g,i),v[r]=g);for(r=-1;++r<u;)(i=m.get(g=e.call(n,a=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=a):f[r]=st(a),m.set(g,!0);for(r=-1;++r<o;)r in v&&!0!==m.get(v[r])&&(p[r]=t[r])}else{for(r=-1;++r<d;)a=n[r],(i=t[r])?(i.__data__=a,h[r]=i):f[r]=st(a);for(;r<u;++r)f[r]=st(n[r]);for(;r<o;++r)p[r]=t[r]}f.update=h,f.parentNode=h.parentNode=p.parentNode=t.parentNode,s.push(f),l.push(h),c.push(p)}var s=dt([]),l=B([]),c=B([]);if("function"==typeof t)for(;++i<a;)o(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<a;)o(n=this[i],t);return l.enter=function(){return s},l.exit=function(){return c},l},Z.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Z.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=lt(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return B(i)},Z.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Z.sort=function(t){t=ct.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Z.each=function(t){return ut(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Z.call=function(t){var e=r(arguments);return t.apply(e[0]=this,e),this},Z.empty=function(){return!this.node()},Z.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},Z.size=function(){var t=0;return ut(this,function(){++t}),t};var ht=[];function ft(t){var e,n;return function(r,i,a){var o,s=t[a].update,l=s.length;for(a!=n&&(n=a,e=0),i>=e&&(e=i+1);!(o=s[e])&&++e<l;);return o}}function pt(e,n,i){var a="__on"+e,o=e.indexOf("."),s=mt;o>0&&(e=e.slice(0,o));var l=gt.get(e);function c(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}return l&&(e=l,s=vt),o?n?function(){var t=s(n,r(arguments));c.call(this),this.addEventListener(e,this[a]=t,t.$=i),t._=n}:c:n?I:function(){var n,r=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var i in this)if(n=i.match(r)){var a=this[i];this.removeEventListener(n[1],a,a.$),delete this[i]}}}t.selection.enter=dt,t.selection.enter.prototype=ht,ht.append=Z.append,ht.empty=Z.empty,ht.node=Z.node,ht.call=Z.call,ht.size=Z.size,ht.select=function(t){for(var e,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(a=i[c])?(e.push(r[c]=n=t.call(i.parentNode,a.__data__,c,s)),n.__data__=a.__data__):e.push(null)}return B(o)},ht.insert=function(t,e){return arguments.length<2&&(e=ft(this)),Z.insert.call(this,t,e)},t.select=function(t){var e;return"string"==typeof t?(e=[U(t,i)]).parentNode=i.documentElement:(e=[t]).parentNode=a(t),B([e])},t.selectAll=function(t){var e;return"string"==typeof t?(e=r(q(t,i))).parentNode=i.documentElement:(e=r(t)).parentNode=null,B([e])},Z.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(pt(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(pt(t,e,n))};var gt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function mt(e,n){return function(r){var i=t.event;t.event=r,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function vt(t,e){var n=mt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}i&&gt.forEach(function(t){"on"+t in i&&gt.remove(t)});var yt,bt=0;function xt(e){var n=".dragsuppress-"+ ++bt,r="click"+n,i=t.select(o(e)).on("touchmove"+n,F).on("dragstart"+n,F).on("selectstart"+n,F);if(null==yt&&(yt=!("onselectstart"in e)&&L(e.style,"userSelect")),yt){var s=a(e).style,l=s[yt];s[yt]="none"}return function(t){if(i.on(n,null),yt&&(s[yt]=l),t){var e=function(){i.on(r,null)};i.on(r,function(){F(),e()},!0),setTimeout(e,0)}}}t.mouse=function(t){return wt(t,z())};var _t=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function wt(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(_t<0){var a=o(e);if(a.scrollX||a.scrollY){var s=(r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_t=!(s.f||s.e),r.remove()}}return _t?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var l=e.getBoundingClientRect();return[n.clientX-l.left-e.clientLeft,n.clientY-l.top-e.clientTop]}function kt(){return t.event.changedTouches[0].identifier}t.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=z().changedTouches),e)for(var r,i=0,a=e.length;i<a;++i)if((r=e[i]).identifier===n)return wt(t,r)},t.behavior.drag=function(){var e=V(a,"drag","dragstart","dragend"),n=null,r=s(I,t.mouse,o,"mousemove","mouseup"),i=s(kt,t.touch,O,"touchmove","touchend");function a(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function s(r,i,a,o,s){return function(){var l,c=this,u=t.event.target.correspondingElement||t.event.target,d=c.parentNode,h=e.of(c,arguments),f=0,p=r(),g=".drag"+(null==p?"":"-"+p),m=t.select(a(u)).on(o+g,b).on(s+g,x),v=xt(u),y=i(d,p);function b(){var t,e,n=i(d,p);n&&(f|=(t=n[0]-y[0])|(e=n[1]-y[1]),y=n,h({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e}))}function x(){i(d,p)&&(m.on(o+g,null).on(s+g,null),v(f),h({type:"dragend"}))}l=n?[(l=n.apply(c,arguments)).x-y[0],l.y-y[1]]:[0,0],h({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(n=t,a):n},t.rebind(a,e,"on")},t.touches=function(t,e){return arguments.length<2&&(e=z().touches),e?r(e).map(function(e){var n=wt(t,e);return n.identifier=e.identifier,n}):[]};var Tt=1e-6,Mt=1e-12,At=Math.PI,Ct=2*At,St=Ct-Tt,Dt=At/2,Ot=At/180,Et=180/At;function Lt(t){return t>0?1:t<0?-1:0}function Pt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function It(t){return t>1?0:t<-1?At:Math.acos(t)}function Rt(t){return t>1?Dt:t<-1?-Dt:Math.asin(t)}function Nt(t){return((t=Math.exp(t))+1/t)/2}function Ft(t){return(t=Math.sin(t/2))*t}var zt=Math.SQRT2;t.interpolateZoom=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[2],l=e[0]-i,c=e[1]-a,u=l*l+c*c;if(u<Mt)r=Math.log(s/o)/zt,n=function(t){return[i+t*l,a+t*c,o*Math.exp(zt*t*r)]};else{var d=Math.sqrt(u),h=(s*s-o*o+4*u)/(2*o*2*d),f=(s*s-o*o-4*u)/(2*s*2*d),p=Math.log(Math.sqrt(h*h+1)-h),g=Math.log(Math.sqrt(f*f+1)-f);r=(g-p)/zt,n=function(t){var e,n=t*r,s=Nt(p),u=o/(2*d)*(s*(e=zt*n+p,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(p));return[i+u*l,a+u*c,o*s/Nt(zt*n+p)]}}return n.duration=1e3*r,n},t.behavior.zoom=function(){var e,n,r,a,s,l,c,u,d,h={x:0,y:0,k:1},f=[960,500],p=jt,g=250,m=0,v="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",_=V(w,"zoomstart","zoom","zoomend");function w(t){t.on(v,E).on(Ht+".zoom",P).on("dblclick.zoom",I).on(x,L)}function k(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function T(t){h.k=Math.max(p[0],Math.min(p[1],t))}function M(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function A(e,r,i,a){e.__chart__={x:h.x,y:h.y,k:h.k},T(Math.pow(2,a)),M(n=r,i),e=t.select(e),g>0&&(e=e.transition().duration(g)),e.call(w.event)}function C(){c&&c.domain(l.range().map(function(t){return(t-h.x)/h.k}).map(l.invert)),d&&d.domain(u.range().map(function(t){return(t-h.y)/h.k}).map(u.invert))}function S(t){m++||t({type:"zoomstart"})}function D(t){C(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function O(t){--m||(t({type:"zoomend"}),n=null)}function E(){var e=this,n=_.of(e,arguments),r=0,i=t.select(o(e)).on(y,l).on(b,c),a=k(t.mouse(e)),s=xt(e);function l(){r=1,M(t.mouse(e),a),D(n)}function c(){i.on(y,null).on(b,null),s(r),O(n)}vs.call(e),S(n)}function L(){var e,n=this,r=_.of(n,arguments),i={},a=0,o=".zoom-"+t.event.changedTouches[0].identifier,l="touchmove"+o,c="touchend"+o,u=[],d=t.select(n),f=xt(n);function p(){var r=t.touches(n);return e=h.k,r.forEach(function(t){t.identifier in i&&(i[t.identifier]=k(t))}),r}function g(){var e=t.event.target;t.select(e).on(l,m).on(c,y),u.push(e);for(var r=t.event.changedTouches,o=0,d=r.length;o<d;++o)i[r[o].identifier]=null;var f=p(),g=Date.now();if(1===f.length){if(g-s<500){var v=f[0];A(n,v,i[v.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),F()}s=g}else if(f.length>1){var b=f[1],x=(v=f[0])[0]-b[0],_=v[1]-b[1];a=x*x+_*_}}function m(){var o,l,c,u,d=t.touches(n);vs.call(n);for(var h=0,f=d.length;h<f;++h,u=null)if(u=i[(c=d[h]).identifier]){if(l)break;o=c,l=u}if(u){var p=(p=c[0]-o[0])*p+(p=c[1]-o[1])*p,g=a&&Math.sqrt(p/a);o=[(o[0]+c[0])/2,(o[1]+c[1])/2],l=[(l[0]+u[0])/2,(l[1]+u[1])/2],T(g*e)}s=null,M(o,l),D(r)}function y(){if(t.event.touches.length){for(var e=t.event.changedTouches,n=0,a=e.length;n<a;++n)delete i[e[n].identifier];for(var s in i)return void p()}t.selectAll(u).on(o,null),d.on(v,E).on(x,L),f(),O(r)}g(),S(r),d.on(v,null).on(x,g)}function P(){var i=_.of(this,arguments);a?clearTimeout(a):(vs.call(this),e=k(n=r||t.mouse(this)),S(i)),a=setTimeout(function(){a=null,O(i)},50),F(),T(Math.pow(2,.002*Vt())*h.k),M(n,e),D(i)}function I(){var e=t.mouse(this),n=Math.log(h.k)/Math.LN2;A(this,e,k(e),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return Ht||(Ht="onwheel"in i?(Vt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Vt=function(){return t.event.wheelDelta},"mousewheel"):(Vt=function(){return-t.event.detail},"MozMousePixelScroll")),w.event=function(e){e.each(function(){var e=_.of(this,arguments),r=h;xs?t.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},S(e)}).tween("zoom:zoom",function(){var i=f[0],a=n?n[0]:i/2,o=n?n[1]:f[1]/2,s=t.interpolateZoom([(a-h.x)/h.k,(o-h.y)/h.k,i/h.k],[(a-r.x)/r.k,(o-r.y)/r.k,i/r.k]);return function(t){var n=s(t),r=i/n[2];this.__chart__=h={x:a-n[0]*r,y:o-n[1]*r,k:r},D(e)}}).each("interrupt.zoom",function(){O(e)}).each("end.zoom",function(){O(e)}):(this.__chart__=h,S(e),D(e),O(e))})},w.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},C(),w):[h.x,h.y]},w.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},T(+t),C(),w):h.k},w.scaleExtent=function(t){return arguments.length?(p=null==t?jt:[+t[0],+t[1]],w):p},w.center=function(t){return arguments.length?(r=t&&[+t[0],+t[1]],w):r},w.size=function(t){return arguments.length?(f=t&&[+t[0],+t[1]],w):f},w.duration=function(t){return arguments.length?(g=+t,w):g},w.x=function(t){return arguments.length?(c=t,l=t.copy(),h={x:0,y:0,k:1},w):c},w.y=function(t){return arguments.length?(d=t,u=t.copy(),h={x:0,y:0,k:1},w):d},t.rebind(w,_,"on")};var Vt,Ht,jt=[0,1/0];function Bt(){}function Ut(t,e,n){return this instanceof Ut?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Ut?new Ut(t.h,t.s,t.l):le(""+t,ce,Ut):new Ut(t,e,n)}t.color=Bt,Bt.prototype.toString=function(){return this.rgb()+""},t.hsl=Ut;var qt=Ut.prototype=new Bt;function Gt(t,e,n){var r,i;function a(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new re(a(t+120),a(t),a(t-120))}function Zt(e,n,r){return this instanceof Zt?(this.h=+e,this.c=+n,void(this.l=+r)):arguments.length<2?e instanceof Zt?new Zt(e.h,e.c,e.l):Jt(e instanceof Yt?e.l:(e=ue((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Zt(e,n,r)}qt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ut(this.h,this.s,this.l/t)},qt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ut(this.h,this.s,t*this.l)},qt.rgb=function(){return Gt(this.h,this.s,this.l)},t.hcl=Zt;var Wt=Zt.prototype=new Bt;function $t(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Yt(n,Math.cos(t*=Ot)*e,Math.sin(t)*e)}function Yt(t,e,n){return this instanceof Yt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Yt?new Yt(t.l,t.a,t.b):t instanceof Zt?$t(t.h,t.c,t.l):ue((t=re(t)).r,t.g,t.b):new Yt(t,e,n)}Wt.brighter=function(t){return new Zt(this.h,this.c,Math.min(100,this.l+Xt*(arguments.length?t:1)))},Wt.darker=function(t){return new Zt(this.h,this.c,Math.max(0,this.l-Xt*(arguments.length?t:1)))},Wt.rgb=function(){return $t(this.h,this.c,this.l).rgb()},t.lab=Yt;var Xt=18,Qt=Yt.prototype=new Bt;function Kt(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return new re(ne(3.2404542*(i=.95047*te(i))-1.5371385*(r=1*te(r))-.4985314*(a=1.08883*te(a))),ne(-.969266*i+1.8760108*r+.041556*a),ne(.0556434*i-.2040259*r+1.0572252*a))}function Jt(t,e,n){return t>0?new Zt(Math.atan2(n,e)*Et,Math.sqrt(e*e+n*n),t):new Zt(NaN,NaN,t)}function te(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ee(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ne(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function re(t,e,n){return this instanceof re?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof re?new re(t.r,t.g,t.b):le(""+t,re,Gt):new re(t,e,n)}function ie(t){return new re(t>>16,t>>8&255,255&t)}function ae(t){return ie(t)+""}Qt.brighter=function(t){return new Yt(Math.min(100,this.l+Xt*(arguments.length?t:1)),this.a,this.b)},Qt.darker=function(t){return new Yt(Math.max(0,this.l-Xt*(arguments.length?t:1)),this.a,this.b)},Qt.rgb=function(){return Kt(this.l,this.a,this.b)},t.rgb=re;var oe=re.prototype=new Bt;function se(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function le(t,e,n){var r,i,a,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(he(i[0]),he(i[1]),he(i[2]))}return(a=fe.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),e(o,s,l))}function ce(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new Ut(r,i,l)}function ue(t,e,n){var r=ee((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(n=de(n)))/.95047),i=ee((.2126729*t+.7151522*e+.072175*n)/1);return Yt(116*i-16,500*(r-i),200*(i-ee((.0193339*t+.119192*e+.9503041*n)/1.08883)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function he(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}oe.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new re(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new re(i,i,i)},oe.darker=function(t){return new re((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},oe.hsl=function(){return ce(this.r,this.g,this.b)},oe.toString=function(){return"#"+se(this.r)+se(this.g)+se(this.b)};var fe=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function pe(t){return"function"==typeof t?t:function(){return t}}function ge(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),me(e,n,t,r)}}function me(e,n,i,a){var o={},s=t.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;function d(){var t,e=c.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||e>=200&&e<300||304===e){try{t=i.call(o,c)}catch(t){return void s.error.call(o,t)}s.load.call(o,t)}else s.error.call(o,c)}return this.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(e)&&(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=d:c.onreadystatechange=function(){c.readyState>3&&d()},c.onprogress=function(e){var n=t.event;t.event=e;try{s.progress.call(o,c)}finally{t.event=n}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return i=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(r(arguments)))}}),o.send=function(t,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(t,e,!0),null==n||"accept"in l||(l.accept=n+",*/*"),c.setRequestHeader)for(var a in l)c.setRequestHeader(a,l[a]);return null!=n&&c.overrideMimeType&&c.overrideMimeType(n),null!=u&&(c.responseType=u),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),s.beforesend.call(o,c),c.send(null==r?null:r),o},o.abort=function(){return c.abort(),o},t.rebind(o,s,"on"),null==a?o:o.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(a))}fe.forEach(function(t,e){fe.set(t,ie(e))}),t.functor=pe,t.xhr=ge(O),t.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=me(t,e,null==n?a:o(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?a:o(t)):n},i}function a(t){return i.parse(t.responseText)}function o(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})},i.parseRows=function(t,e){var n,i,a={},o={},s=[],l=t.length,c=0,u=0;function d(){if(c>=l)return o;if(i)return i=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return c=n+2,13===(s=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++c):10===s&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<l;){var s,u=1;if(10===(s=t.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(s!==r)continue;return t.slice(e,c-u)}return t.slice(e)}for(;(n=d())!==o;){for(var h=[];n!==a&&n!==o;)h.push(n),n=d();e&&null==(h=e(h,u++))||s.push(h)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new D,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(l).join(t)].concat(e.map(function(e){return r.map(function(t){return l(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var ve,ye,be,xe,_e=this[L(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function we(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,n:null};return ye?ye.n=i:ve=i,ye=i,be||(xe=clearTimeout(xe),be=1,_e(ke)),i}function ke(){var t=Te(),e=Me()-t;e>24?(isFinite(e)&&(clearTimeout(xe),xe=setTimeout(ke,e)),be=0):(be=1,_e(ke))}function Te(){for(var t=Date.now(),e=ve;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Me(){for(var t,e=ve,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ve=e.n;return ye=t,n}function Ae(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.timer=function(){we.apply(this,arguments)},t.timer.flush=function(){Te(),Me()},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ce=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*y(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});function Se(e){var n=e.decimal,r=e.thousands,i=e.grouping,a=e.currency,o=i&&r?function(t,e){for(var n=t.length,a=[],o=0,s=i[0],l=0;n>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),a.push(t.substring(n-=s,n+s)),!((l+=s+1)>e));)s=i[o=(o+1)%i.length];return a.reverse().join(r)}:O;return function(e){var r=De.exec(e),i=r[1]||" ",s=r[2]||">",l=r[3]||"-",c=r[4]||"",u=r[5],d=+r[6],h=r[7],f=r[8],p=r[9],g=1,m="",v="",y=!1,b=!0;switch(f&&(f=+f.substring(1)),(u||"0"===i&&"="===s)&&(u=i="0",s="="),p){case"n":h=!0,p="g";break;case"%":g=100,v="%",p="f";break;case"p":g=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===c&&(m="0"+p.toLowerCase());case"c":b=!1;case"d":y=!0,f=0;break;case"s":g=-1,p="r"}"$"===c&&(m=a[0],v=a[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=Oe.get(p)||Ee;var x=u&&h;return function(e){var r=v;if(y&&e%1)return"";var a=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===l?"":l;if(g<0){var c=t.formatPrefix(e,f);e=c.scale(e),r=c.symbol+v}else e*=g;var _,w,k=(e=p(e,f)).lastIndexOf(".");if(k<0){var T=b?e.lastIndexOf("e"):-1;T<0?(_=e,w=""):(_=e.substring(0,T),w=e.substring(T))}else _=e.substring(0,k),w=n+e.substring(k+1);!u&&h&&(_=o(_,1/0));var M=m.length+_.length+w.length+(x?0:a.length),A=M<d?new Array(M=d-M+1).join(i):"";return x&&(_=o(A+_,A.length?d-w.length:1/0)),a+=m,e=_+w,("<"===s?a+e+A:">"===s?A+a+e:"^"===s?A.substring(0,M>>=1)+a+e+A.substring(M):a+(x?e:A+e))+r}}}t.formatPrefix=function(e,n){var r=0;return(e=+e)&&(e<0&&(e*=-1),n&&(e=t.round(e,Ae(e,n))),r=1+Math.floor(1e-12+Math.log(e)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),Ce[8+r/3]};var De=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Oe=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(e,n){return(e=t.round(e,Ae(e,n))).toFixed(Math.max(0,Math.min(20,Ae(e*(1+1e-15),n))))}});function Ee(t){return t+""}var Le=t.time={},Pe=Date;function Ie(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ie.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Re.setUTCDate.apply(this._,arguments)},setDay:function(){Re.setUTCDay.apply(this._,arguments)},setFullYear:function(){Re.setUTCFullYear.apply(this._,arguments)},setHours:function(){Re.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Re.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Re.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Re.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Re.setUTCSeconds.apply(this._,arguments)},setTime:function(){Re.setTime.apply(this._,arguments)}};var Re=Date.prototype;function Ne(t,e,n){function r(e){var n=t(e),r=a(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Pe(n-1)),1),n}function a(t,n){return e(t=new Pe(+t),n),t}function o(t,r,a){var o=i(t),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;o<r;)s.push(new Date(+o)),e(o,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var s=t.utc=Fe(t);return s.floor=s,s.round=Fe(r),s.ceil=Fe(i),s.offset=Fe(a),s.range=function(t,e,n){try{Pe=Ie;var r=new Ie;return r._=t,o(r,e,n)}finally{Pe=Date}},t}function Fe(t){return function(e,n){try{Pe=Ie;var r=new Ie;return r._=e,t(r,n)._}finally{Pe=Date}}}function ze(e){var n=e.dateTime,r=e.date,i=e.time,a=e.periods,o=e.days,s=e.shortDays,l=e.months,c=e.shortMonths;function u(t){var e=t.length;function n(n){for(var r,i,a,o=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(i=Ve[r=t.charAt(++s)])&&(r=t.charAt(++s)),(a=_[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),l=s+1);return o.push(t.slice(l,s)),o.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Pe!==Ie,i=new(r?Ie:Pe);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return t},n}function d(t,e,n,r){for(var i,a,o,s=0,l=e.length,c=n.length;s<l;){if(r>=c)return-1;if(37===(i=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=w[o in Ve?e.charAt(s++):o])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}u.utc=function(t){var e=u(t);function n(t){try{var n=new(Pe=Ie);return n._=t,e(n)}finally{Pe=Date}}return n.parse=function(t){try{Pe=Ie;var n=e.parse(t);return n&&n._}finally{Pe=Date}},n.toString=e.toString,n},u.multi=u.utc.multi=sn;var h=t.map(),f=Ue(o),p=qe(o),g=Ue(s),m=qe(s),v=Ue(l),y=qe(l),b=Ue(c),x=qe(c);a.forEach(function(t,e){h.set(t.toLowerCase(),e)});var _={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:u(n),d:function(t,e){return Be(t.getDate(),e,2)},e:function(t,e){return Be(t.getDate(),e,2)},H:function(t,e){return Be(t.getHours(),e,2)},I:function(t,e){return Be(t.getHours()%12||12,e,2)},j:function(t,e){return Be(1+Le.dayOfYear(t),e,3)},L:function(t,e){return Be(t.getMilliseconds(),e,3)},m:function(t,e){return Be(t.getMonth()+1,e,2)},M:function(t,e){return Be(t.getMinutes(),e,2)},p:function(t){return a[+(t.getHours()>=12)]},S:function(t,e){return Be(t.getSeconds(),e,2)},U:function(t,e){return Be(Le.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Be(Le.mondayOfYear(t),e,2)},x:u(r),X:u(i),y:function(t,e){return Be(t.getFullYear()%100,e,2)},Y:function(t,e){return Be(t.getFullYear()%1e4,e,4)},Z:an,"%":function(){return"%"}},w={a:function(t,e,n){g.lastIndex=0;var r=g.exec(e.slice(n));return r?(t.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){f.lastIndex=0;var r=f.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return d(t,_.c.toString(),e,n)},d:Ke,e:Ke,H:tn,I:tn,j:Je,L:rn,m:Qe,M:en,p:function(t,e,n){var r=h.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:nn,U:Ze,w:Ge,W:We,x:function(t,e,n){return d(t,_.x.toString(),e,n)},X:function(t,e,n){return d(t,_.X.toString(),e,n)},y:Ye,Y:$e,Z:Xe,"%":on};return u}Le.year=Ne(function(t){return(t=Le.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Le.years=Le.year.range,Le.years.utc=Le.year.utc.range,Le.day=Ne(function(t){var e=new Pe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Le.days=Le.day.range,Le.days.utc=Le.day.utc.range,Le.dayOfYear=function(t){var e=Le.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Le[t]=Ne(function(t){return(t=Le.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Le[t+"s"]=n.range,Le[t+"s"].utc=n.utc.range,Le[t+"OfYear"]=function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)}}),Le.week=Le.sunday,Le.weeks=Le.sunday.range,Le.weeks.utc=Le.sunday.utc.range,Le.weekOfYear=Le.sundayOfYear;var Ve={"-":"",_:" ",0:"0"},He=/^\s*\d+/,je=/^%/;function Be(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ue(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function qe(t){for(var e=new _,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ge(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ze(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function We(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function $e(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ye(t,e,n){He.lastIndex=0;var r,i=He.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function Xe(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Qe(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ke(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Je(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function tn(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function en(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function nn(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function rn(t,e,n){He.lastIndex=0;var r=He.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function an(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=y(e)/60|0,i=y(e)%60;return n+Be(r,"0",2)+Be(i,"0",2)}function on(t,e,n){je.lastIndex=0;var r=je.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function sn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}t.locale=function(t){return{numberFormat:Se(t),timeFormat:ze(t)}};var ln=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cn(){}t.format=ln.numberFormat,t.geo={},cn.prototype={s:0,t:0,add:function(t){dn(t,this.t,un),dn(un.s,this.s,this),this.s?this.t+=un.t:this.s=un.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var un=new cn;function dn(t,e,n){var r=n.s=t+e,i=r-t;n.t=t-(r-i)+(e-i)}function hn(t,e){t&&pn.hasOwnProperty(t.type)&&pn[t.type](t,e)}t.geo.stream=function(t,e){t&&fn.hasOwnProperty(t.type)?fn[t.type](t,e):hn(t,e)};var fn={Feature:function(t,e){hn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)hn(n[r].geometry,e)}},pn={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){gn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)gn(n[r],e,0)},Polygon:function(t,e){mn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)mn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)hn(n[r],e)}};function gn(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function mn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)gn(t[n],e,1);e.polygonEnd()}t.geo.area=function(e){return vn=0,t.geo.stream(e,On),vn};var vn,yn,bn,xn,_n,wn,kn,Tn,Mn,An,Cn,Sn,Dn=new cn,On={sphere:function(){vn+=4*At},point:I,lineStart:I,lineEnd:I,polygonStart:function(){Dn.reset(),On.lineStart=En},polygonEnd:function(){var t=2*Dn;vn+=t<0?4*At+t:t,On.lineStart=On.lineEnd=On.point=I}};function En(){var t,e,n,r,i;function a(t,e){e=e*Ot/2+At/4;var a=(t*=Ot)-n,o=a>=0?1:-1,s=o*a,l=Math.cos(e),c=Math.sin(e),u=i*c,d=r*l+u*Math.cos(s),h=u*o*Math.sin(s);Dn.add(Math.atan2(h,d)),n=t,r=l,i=c}On.point=function(o,s){On.point=a,n=(t=o)*Ot,r=Math.cos(s=(e=s)*Ot/2+At/4),i=Math.sin(s)},On.lineEnd=function(){a(t,e)}}function Ln(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Pn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function In(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Rn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Nn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Fn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zn(t){return[Math.atan2(t[1],t[0]),Rt(t[2])]}function Vn(t,e){return y(t[0]-e[0])<Tt&&y(t[1]-e[1])<Tt}t.geo.bounds=function(){var e,n,r,i,a,o,s,l,c,u,d,h={point:f,lineStart:g,lineEnd:m,polygonStart:function(){h.point=v,h.lineStart=b,h.lineEnd=x,c=0,On.polygonStart()},polygonEnd:function(){On.polygonEnd(),h.point=f,h.lineStart=g,h.lineEnd=m,Dn<0?(e=-(r=180),n=-(i=90)):c>Tt?i=90:c<-Tt&&(n=-90),d[0]=e,d[1]=r}};function f(t,a){u.push(d=[e=t,r=t]),a<n&&(n=a),a>i&&(i=a)}function p(t,o){var s=Ln([t*Ot,o*Ot]);if(l){var c=In(l,s),u=In([c[1],-c[0],0],c);Fn(u),u=zn(u);var d=t-a,h=d>0?1:-1,p=u[0]*Et*h,g=y(d)>180;if(g^(h*a<p&&p<h*t))(m=u[1]*Et)>i&&(i=m);else if(g^(h*a<(p=(p+360)%360-180)&&p<h*t)){var m;(m=-u[1]*Et)<n&&(n=m)}else o<n&&(n=o),o>i&&(i=o);g?t<a?_(e,t)>_(e,r)&&(r=t):_(t,r)>_(e,r)&&(e=t):r>=e?(t<e&&(e=t),t>r&&(r=t)):t>a?_(e,t)>_(e,r)&&(r=t):_(t,r)>_(e,r)&&(e=t)}else f(t,o);l=s,a=t}function g(){h.point=p}function m(){d[0]=e,d[1]=r,h.point=f,l=null}function v(t,e){if(l){var n=t-a;c+=y(n)>180?n+(n>0?360:-360):n}else o=t,s=e;On.point(t,e),p(t,e)}function b(){On.lineStart()}function x(){v(o,s),On.lineEnd(),y(c)>Tt&&(e=-(r=180)),d[0]=e,d[1]=r,l=null}function _(t,e){return(e-=t)<0?e+360:e}function w(t,e){return t[0]-e[0]}function k(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(a){if(i=r=-(e=n=1/0),u=[],t.geo.stream(a,h),c=u.length){u.sort(w);for(var o=1,s=[g=u[0]];o<c;++o)k((f=u[o])[0],g)||k(f[1],g)?(_(g[0],f[1])>_(g[0],g[1])&&(g[1]=f[1]),_(f[0],g[1])>_(g[0],g[1])&&(g[0]=f[0])):s.push(g=f);for(var l,c,f,p=-1/0,g=(o=0,s[c=s.length-1]);o<=c;g=f,++o)(l=_(g[1],(f=s[o])[0]))>p&&(p=l,e=f[0],r=g[1])}return u=d=null,e===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,n],[r,i]]}}(),t.geo.centroid=function(e){yn=bn=xn=_n=wn=kn=Tn=Mn=An=Cn=Sn=0,t.geo.stream(e,Hn);var n=An,r=Cn,i=Sn,a=n*n+r*r+i*i;return a<Mt&&(n=kn,r=Tn,i=Mn,bn<Tt&&(n=xn,r=_n,i=wn),(a=n*n+r*r+i*i)<Mt)?[NaN,NaN]:[Math.atan2(r,n)*Et,Rt(i/Math.sqrt(a))*Et]};var Hn={sphere:I,point:jn,lineStart:Un,lineEnd:qn,polygonStart:function(){Hn.lineStart=Gn},polygonEnd:function(){Hn.lineStart=Un}};function jn(t,e){t*=Ot;var n=Math.cos(e*=Ot);Bn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Bn(t,e,n){++yn,xn+=(t-xn)/yn,_n+=(e-_n)/yn,wn+=(n-wn)/yn}function Un(){var t,e,n;function r(r,i){r*=Ot;var a=Math.cos(i*=Ot),o=a*Math.cos(r),s=a*Math.sin(r),l=Math.sin(i),c=Math.atan2(Math.sqrt((c=e*l-n*s)*c+(c=n*o-t*l)*c+(c=t*s-e*o)*c),t*o+e*s+n*l);bn+=c,kn+=c*(t+(t=o)),Tn+=c*(e+(e=s)),Mn+=c*(n+(n=l)),Bn(t,e,n)}Hn.point=function(i,a){i*=Ot;var o=Math.cos(a*=Ot);t=o*Math.cos(i),e=o*Math.sin(i),n=Math.sin(a),Hn.point=r,Bn(t,e,n)}}function qn(){Hn.point=jn}function Gn(){var t,e,n,r,i;function a(t,e){t*=Ot;var a=Math.cos(e*=Ot),o=a*Math.cos(t),s=a*Math.sin(t),l=Math.sin(e),c=r*l-i*s,u=i*o-n*l,d=n*s-r*o,h=Math.sqrt(c*c+u*u+d*d),f=n*o+r*s+i*l,p=h&&-It(f)/h,g=Math.atan2(h,f);An+=p*c,Cn+=p*u,Sn+=p*d,bn+=g,kn+=g*(n+(n=o)),Tn+=g*(r+(r=s)),Mn+=g*(i+(i=l)),Bn(n,r,i)}Hn.point=function(o,s){t=o,e=s,Hn.point=a,o*=Ot;var l=Math.cos(s*=Ot);n=l*Math.cos(o),r=l*Math.sin(o),i=Math.sin(s),Bn(n,r,i)},Hn.lineEnd=function(){a(t,e),Hn.lineEnd=qn,Hn.point=jn}}function Zn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Wn(){return!0}function $n(t,e,n,r,i){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Vn(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd()}else{var l=new Xn(n,t,null,!0),c=new Xn(n,null,l,!1);l.o=c,a.push(l),o.push(c),l=new Xn(r,t,null,!1),c=new Xn(r,null,l,!0),l.o=c,a.push(l),o.push(c)}}}),o.sort(e),Yn(a),Yn(o),a.length){for(var s=0,l=n,c=o.length;s<c;++s)o[s].e=l=!l;for(var u,d,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;u=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,c=u.length;s<c;++s)i.point((d=u[s])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(s=(u=f.p.z).length-1;s>=0;--s)i.point((d=u[s])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function Yn(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Xn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Qn(e,n,r,i){return function(a,o){var s,l=n(o),c=a.invert(i[0],i[1]),u={point:d,lineStart:f,lineEnd:p,polygonStart:function(){u.point=x,u.lineStart=_,u.lineEnd=w,s=[],g=[]},polygonEnd:function(){u.point=d,u.lineStart=f,u.lineEnd=p,s=t.merge(s);var e=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Dn.reset();for(var s=0,l=e.length;s<l;++s){var c=e[s],u=c.length;if(u)for(var d=c[0],h=d[0],f=d[1]/2+At/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===u&&(m=0);var v=(t=c[m])[0],y=t[1]/2+At/4,b=Math.sin(y),x=Math.cos(y),_=v-h,w=_>=0?1:-1,k=w*_,T=k>At,M=p*b;if(Dn.add(Math.atan2(M*w*Math.sin(k),g*x+M*Math.cos(k))),a+=T?_+w*Ct:_,T^h>=n^v>=n){var A=In(Ln(d),Ln(t));Fn(A);var C=In(i,A);Fn(C);var S=(T^_>=0?-1:1)*Rt(C[2]);(r>S||r===S&&(A[0]||A[1]))&&(o+=T^_>=0?1:-1)}if(!m++)break;h=v,p=b,g=x,d=t}}return(a<-Tt||a<Tt&&Dn<-Tt)^1&o}(c,g);s.length?(b||(o.polygonStart(),b=!0),$n(s,tr,e,r,o)):e&&(b||(o.polygonStart(),b=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),s=g=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function d(t,n){var r=a(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function h(t,e){var n=a(t,e);l.point(n[0],n[1])}function f(){u.point=h,l.lineStart()}function p(){u.point=d,l.lineEnd()}var g,m,v=Jn(),y=n(v),b=!1;function x(t,e){m.push([t,e]);var n=a(t,e);y.point(n[0],n[1])}function _(){y.lineStart(),m=[]}function w(){x(m[0][0],m[0][1]),y.lineEnd();var t,e=y.clean(),n=v.buffer(),r=n.length;if(m.pop(),g.push(m),m=null,r)if(1&e){var i,a=-1;if((r=(t=n[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(Kn))}return u}}function Kn(t){return t.length>1}function Jn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:I,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function tr(t,e){return((t=t.x)[0]<0?t[1]-Dt-Tt:Dt-t[1])-((e=e.x)[0]<0?e[1]-Dt-Tt:Dt-e[1])}var er=Qn(Wn,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?At:-At,l=y(a-n);y(l-At)<Tt?(t.point(n,r=(r+o)/2>0?Dt:-Dt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&l>=At&&(y(n-i)<Tt&&(n-=i*Tt),y(a-s)<Tt&&(a-=s*Tt),r=function(t,e,n,r){var i,a,o=Math.sin(t-n);return y(o)>Tt?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-At,i=n*Dt),r.point(0,i),r.point(At,i),r.point(At,0),r.point(At,-i),r.point(0,-i),r.point(-At,-i),r.point(-At,0),r.point(-At,i);else if(y(t[0]-e[0])>Tt){var a=t[0]<e[0]?At:-At;r.point(-a,i=n*a/2),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-At,-At/2]);function nr(t){var e=Math.cos(t),n=e>0,r=y(e)>Tt;return Qn(i,function(t){var e,s,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,h){var f,p=[d,h],g=i(d,h),m=n?g?0:o(d,h):g?o(d+(d<0?At:-At),h):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(f=a(e,p),(Vn(e,f)||Vn(p,f))&&(p[0]+=Tt,p[1]+=Tt,g=i(p[0],p[1]))),g!==l)u=0,g?(t.lineStart(),f=a(p,e),t.point(f[0],f[1])):(f=a(e,p),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(r&&e&&n^g){var v;m&s||!(v=a(p,e,!0))||(u=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&Vn(e,p)||t.point(p[0],p[1]),e=p,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}},zr(t,6*Ot),n?[0,-t]:[-At,t-At]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function a(t,n,r){var i=[1,0,0],a=In(Ln(t),Ln(n)),o=Pn(a,a),s=a[0],l=o-s*s;if(!l)return!r&&t;var c=e*o/l,u=-e*s/l,d=In(i,a),h=Nn(i,c);Rn(h,Nn(a,u));var f=d,p=Pn(h,f),g=Pn(f,f),m=p*p-g*(Pn(h,h)-1);if(!(m<0)){var v=Math.sqrt(m),b=Nn(f,(-p-v)/g);if(Rn(b,h),b=zn(b),!r)return b;var x,_=t[0],w=n[0],k=t[1],T=n[1];w<_&&(x=_,_=w,w=x);var M=w-_,A=y(M-At)<Tt;if(!A&&T<k&&(x=k,k=T,T=x),A||M<Tt?A?k+T>0^b[1]<(y(b[0]-_)<Tt?k:T):k<=b[1]&&b[1]<=T:M>At^(_<=b[0]&&b[0]<=w)){var C=Nn(f,(-p+v)/g);return Rn(C,h),[b,zn(C)]}}}function o(e,r){var i=n?t:At-t,a=0;return e<-i?a|=1:e>i&&(a|=2),r<-i?a|=4:r>i&&(a|=8),a}}function rr(t,e,n,r){return function(i){var a,o=i.a,s=i.b,l=o.x,c=o.y,u=0,d=1,h=s.x-l,f=s.y-c;if(a=t-l,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<d&&(d=a)}else if(h>0){if(a>d)return;a>u&&(u=a)}if(a=n-l,h||!(a<0)){if(a/=h,h<0){if(a>d)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<d&&(d=a)}if(a=e-c,f||!(a>0)){if(a/=f,f<0){if(a<u)return;a<d&&(d=a)}else if(f>0){if(a>d)return;a>u&&(u=a)}if(a=r-c,f||!(a<0)){if(a/=f,f<0){if(a>d)return;a>u&&(u=a)}else if(f>0){if(a<u)return;a<d&&(d=a)}return u>0&&(i.a={x:l+u*h,y:c+u*f}),d<1&&(i.b={x:l+d*h,y:c+d*f}),i}}}}}}function ir(e,n,r,i){return function(l){var c,u,d,h,f,p,g,m,v,y,b,x=l,_=Jn(),w=rr(e,n,r,i),k={point:A,lineStart:function(){k.point=C,u&&u.push(d=[]),y=!0,v=!1,g=m=NaN},lineEnd:function(){c&&(C(h,f),p&&v&&_.rejoin(),c.push(_.buffer())),k.point=A,v&&l.lineEnd()},polygonStart:function(){l=_,c=[],u=[],b=!0},polygonEnd:function(){l=x,c=t.merge(c);var n=function(t){for(var e=0,n=u.length,r=t[1],i=0;i<n;++i)for(var a,o=1,s=u[i],l=s.length,c=s[0];o<l;++o)a=s[o],c[1]<=r?a[1]>r&&Pt(c,a,t)>0&&++e:a[1]<=r&&Pt(c,a,t)<0&&--e,c=a;return 0!==e}([e,i]),r=b&&n,a=c.length;(r||a)&&(l.polygonStart(),r&&(l.lineStart(),T(null,null,1,l),l.lineEnd()),a&&$n(c,o,n,T,l),l.polygonEnd()),c=u=d=null}};function T(t,o,l,c){var u=0,d=0;if(null==t||(u=a(t,l))!==(d=a(o,l))||s(t,o)<0^l>0)do{c.point(0===u||3===u?e:r,u>1?i:n)}while((u=(u+l+4)%4)!==d);else c.point(o[0],o[1])}function M(t,a){return e<=t&&t<=r&&n<=a&&a<=i}function A(t,e){M(t,e)&&l.point(t,e)}function C(t,e){var n=M(t=Math.max(-1e9,Math.min(1e9,t)),e=Math.max(-1e9,Math.min(1e9,e)));if(u&&d.push([t,e]),y)h=t,f=e,p=n,y=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&v)l.point(t,e);else{var r={a:{x:g,y:m},b:{x:t,y:e}};w(r)?(v||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),b=!1):n&&(l.lineStart(),l.point(t,e),b=!1)}g=t,m=e,v=n}return k};function a(t,i){return y(t[0]-e)<Tt?i>0?0:3:y(t[0]-r)<Tt?i>0?2:1:y(t[1]-n)<Tt?i>0?1:0:i>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function ar(t){var e=0,n=At/3,r=Or(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*At/180,n=t[1]*At/180):[e/At*180,n/At*180]},i}function or(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),a-n*Math.cos(t)]}return o.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,Rt((i-(t*t+n*n)*r*r)/(2*r))]},o}t.geo.clipExtent=function(){var t,e,n,r,i,a,o={stream:function(t){return i&&(i.valid=!1),(i=a(t)).valid=!0,i},extent:function(s){return arguments.length?(a=ir(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[t,e],[n,r]]}};return o.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return ar(or)}).raw=or,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){var e,n,r,i,a=t.geo.albers(),o=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};function c(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(r(a,o),e)||i(a,o),e}return c.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(t)},c.stream=function(t){var e=a.stream(t),n=o.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},c.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),c):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),u=+t[0],d=+t[1];return n=a.translate(t).clipExtent([[u-.455*e,d-.238*e],[u+.455*e,d+.238*e]]).stream(l).point,r=o.translate([u-.307*e,d+.201*e]).clipExtent([[u-.425*e+Tt,d+.12*e+Tt],[u-.214*e-Tt,d+.234*e-Tt]]).stream(l).point,i=s.translate([u-.205*e,d+.212*e]).clipExtent([[u-.214*e+Tt,d+.166*e+Tt],[u-.115*e-Tt,d+.234*e-Tt]]).stream(l).point,c},c.scale(1070)};var sr,lr,cr,ur,dr,hr,fr={point:I,lineStart:I,lineEnd:I,polygonStart:function(){lr=0,fr.lineStart=pr},polygonEnd:function(){fr.lineStart=fr.lineEnd=fr.point=I,sr+=y(lr/2)}};function pr(){var t,e,n,r;function i(t,e){lr+=r*t-n*e,n=t,r=e}fr.point=function(a,o){fr.point=i,t=n=a,e=r=o},fr.lineEnd=function(){i(t,e)}}var gr={point:function(t,e){t<cr&&(cr=t),t>dr&&(dr=t),e<ur&&(ur=e),e>hr&&(hr=e)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I};function mr(){var t=vr(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=vr(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=a}function a(t,n){e.push("L",t,",",n)}function o(){n.point=r}function s(){e.push("Z")}return n}function vr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var yr,br={point:xr,lineStart:_r,lineEnd:wr,polygonStart:function(){br.lineStart=kr},polygonEnd:function(){br.point=xr,br.lineStart=_r,br.lineEnd=wr}};function xr(t,e){xn+=t,_n+=e,++wn}function _r(){var t,e;function n(n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a);kn+=o*(t+n)/2,Tn+=o*(e+r)/2,Mn+=o,xr(t=n,e=r)}br.point=function(r,i){br.point=n,xr(t=r,e=i)}}function wr(){br.point=xr}function kr(){var t,e,n,r;function i(t,e){var i=t-n,a=e-r,o=Math.sqrt(i*i+a*a);kn+=o*(n+t)/2,Tn+=o*(r+e)/2,Mn+=o,An+=(o=r*t-n*e)*(n+t),Cn+=o*(r+e),Sn+=3*o,xr(n=t,r=e)}br.point=function(a,o){br.point=i,xr(t=n=a,e=r=o)},br.lineEnd=function(){i(t,e)}}function Tr(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=t,n},result:I};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,Ct)}function i(e,r){t.moveTo(e,r),n.point=a}function a(e,n){t.lineTo(e,n)}function o(){n.point=r}function s(){t.closePath()}return n}function Mr(t){var e=.5,n=Math.cos(30*Ot),r=16;function i(t){return(r?o:a)(t)}function a(e){return Sr(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function o(e){var n,i,a,o,l,c,u,d,h,f,p,g,m={point:v,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=_},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){d=NaN,m.point=b,e.lineStart()}function b(n,i){var a=Ln([n,i]),o=t(n,i);s(d,h,u,f,p,g,d=o[0],h=o[1],u=n,f=a[0],p=a[1],g=a[2],r,e),e.point(d,h)}function x(){m.point=v,e.lineEnd()}function _(){y(),m.point=w,m.lineEnd=k}function w(t,e){b(n=t,e),i=d,a=h,o=f,l=p,c=g,m.point=b}function k(){s(d,h,u,f,p,g,i,a,n,o,l,c,r,e),m.lineEnd=x,x()}return m}function s(r,i,a,o,l,c,u,d,h,f,p,g,m,v){var b=u-r,x=d-i,_=b*b+x*x;if(_>4*e&&m--){var w=o+f,k=l+p,T=c+g,M=Math.sqrt(w*w+k*k+T*T),A=Math.asin(T/=M),C=y(y(T)-1)<Tt||y(a-h)<Tt?(a+h)/2:Math.atan2(k,w),S=t(C,A),D=S[0],O=S[1],E=D-r,L=O-i,P=x*E-b*L;(P*P/_>e||y((b*E+x*L)/_-.5)>.3||o*f+l*p+c*g<n)&&(s(r,i,a,o,l,c,D,O,C,w/=M,k/=M,T,m,v),v.point(D,O),s(D,O,C,w,k,T,u,d,h,f,p,g,m,v))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Ar(t){var e=Mr(function(e,n){return t([e*Et,n*Et])});return function(t){return Er(e(t))}}function Cr(t){this.stream=t}function Sr(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Dr(t){return Or(function(){return t})()}function Or(e){var n,r,i,a,o,s,l=Mr(function(t,e){return[(t=n(t,e))[0]*c+a,o-t[1]*c]}),c=150,u=480,d=250,h=0,f=0,p=0,g=0,m=0,v=er,y=O,b=null,x=null;function _(t){return[(t=i(t[0]*Ot,t[1]*Ot))[0]*c+a,o-t[1]*c]}function w(t){return(t=i.invert((t[0]-a)/c,(o-t[1])/c))&&[t[0]*Et,t[1]*Et]}function k(){i=Zn(r=Ir(p,g,m),n);var t=n(h,f);return a=u-t[0]*c,o=d+t[1]*c,T()}function T(){return s&&(s.valid=!1,s=null),_}return _.stream=function(t){return s&&(s.valid=!1),(s=Er(v(r,l(y(t))))).valid=!0,s},_.clipAngle=function(t){return arguments.length?(v=null==t?(b=t,er):nr((b=+t)*Ot),T()):b},_.clipExtent=function(t){return arguments.length?(x=t,y=t?ir(t[0][0],t[0][1],t[1][0],t[1][1]):O,T()):x},_.scale=function(t){return arguments.length?(c=+t,k()):c},_.translate=function(t){return arguments.length?(u=+t[0],d=+t[1],k()):[u,d]},_.center=function(t){return arguments.length?(h=t[0]%360*Ot,f=t[1]%360*Ot,k()):[h*Et,f*Et]},_.rotate=function(t){return arguments.length?(p=t[0]%360*Ot,g=t[1]%360*Ot,m=t.length>2?t[2]%360*Ot:0,k()):[p*Et,g*Et,m*Et]},t.rebind(_,l,"precision"),function(){return n=e.apply(this,arguments),_.invert=n.invert&&w,k()}}function Er(t){return Sr(t,function(e,n){t.point(e*Ot,n*Ot)})}function Lr(t,e){return[t,e]}function Pr(t,e){return[t>At?t-Ct:t<-At?t+Ct:t,e]}function Ir(t,e,n){return t?e||n?Zn(Nr(t),Fr(e,n)):Nr(t):e||n?Fr(e,n):Pr}function Rr(t){return function(e,n){return[(e+=t)>At?e-Ct:e<-At?e+Ct:e,n]}}function Nr(t){var e=Rr(t);return e.invert=Rr(-t),e}function Fr(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),a=Math.sin(e);function o(t,e){var o=Math.cos(e),s=Math.cos(t)*o,l=Math.sin(t)*o,c=Math.sin(e),u=c*n+s*r;return[Math.atan2(l*i-u*a,s*n-c*r),Rt(u*i+l*a)]}return o.invert=function(t,e){var o=Math.cos(e),s=Math.cos(t)*o,l=Math.sin(t)*o,c=Math.sin(e),u=c*i-l*a;return[Math.atan2(l*i+c*a,s*n+u*r),Rt(u*n-s*r)]},o}function zr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,s){var l=o*e;null!=i?(i=Vr(n,i),a=Vr(n,a),(o>0?i<a:i>a)&&(i+=o*Ct)):(i=t+o*Ct,a=t-.5*l);for(var c,u=i;o>0?u>a:u<a;u-=l)s.point((c=zn([n,-r*Math.cos(u),-r*Math.sin(u)]))[0],c[1])}}function Vr(t,e){var n=Ln(e);n[0]-=t,Fn(n);var r=It(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Tt)%(2*Math.PI)}function Hr(e,n,r){var i=t.range(e,n-Tt,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function jr(e,n,r){var i=t.range(e,n-Tt,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function Br(t){return t.source}function Ur(t){return t.target}t.geo.path=function(){var e,n,r,i,a,o=4.5;function s(e){return e&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=r(i)),t.geo.stream(e,a)),i.result()}function l(){return a=null,s}return s.area=function(e){return sr=0,t.geo.stream(e,r(fr)),sr},s.centroid=function(e){return xn=_n=wn=kn=Tn=Mn=An=Cn=Sn=0,t.geo.stream(e,r(br)),Sn?[An/Sn,Cn/Sn]:Mn?[kn/Mn,Tn/Mn]:wn?[xn/wn,_n/wn]:[NaN,NaN]},s.bounds=function(e){return dr=hr=-(cr=ur=1/0),t.geo.stream(e,r(gr)),[[cr,ur],[dr,hr]]},s.projection=function(t){return arguments.length?(r=(e=t)?t.stream||Ar(t):O,l()):e},s.context=function(t){return arguments.length?(i=null==(n=t)?new mr:new Tr(t),"function"!=typeof o&&i.pointRadius(o),l()):n},s.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),s):o},s.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(t){return{stream:function(e){var n=new Cr(e);for(var r in t)n[r]=t[r];return n}}},Cr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=Dr,t.geo.projectionMutator=Or,(t.geo.equirectangular=function(){return Dr(Lr)}).raw=Lr.invert=Lr,t.geo.rotation=function(t){function e(e){return(e=t(e[0]*Ot,e[1]*Ot))[0]*=Et,e[1]*=Et,e}return t=Ir(t[0]%360*Ot,t[1]*Ot,t.length>2?t[2]*Ot:0),e.invert=function(e){return(e=t.invert(e[0]*Ot,e[1]*Ot))[0]*=Et,e[1]*=Et,e},e},Pr.invert=Lr,t.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"==typeof n?n.apply(this,arguments):n,r=Ir(-t[0]*Ot,-t[1]*Ot,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=Et,t[1]*=Et}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=zr((t=+n)*Ot,r*Ot),i):t},i.precision=function(n){return arguments.length?(e=zr(t*Ot,(r=+n)*Ot),i):r},i.angle(90)},t.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Ot,i=t[1]*Ot,a=e[1]*Ot,o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),c=Math.cos(i),u=Math.sin(a),d=Math.cos(a);return Math.atan2(Math.sqrt((n=d*o)*n+(n=c*u-l*d*s)*n),l*u+c*d*s)},t.geo.graticule=function(){var e,n,r,i,a,o,s,l,c,u,d,h,f=10,p=f,g=90,m=360,v=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return t.range(Math.ceil(i/g)*g,r,g).map(d).concat(t.range(Math.ceil(l/m)*m,s,m).map(h)).concat(t.range(Math.ceil(n/f)*f,e,f).filter(function(t){return y(t%g)>Tt}).map(c)).concat(t.range(Math.ceil(o/p)*p,a,p).filter(function(t){return y(t%m)>Tt}).map(u))}return b.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},b.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(h(s).slice(1),d(r).reverse().slice(1),h(l).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.majorExtent(t).minorExtent(t):b.minorExtent()},b.majorExtent=function(t){return arguments.length?(l=+t[0][1],s=+t[1][1],(i=+t[0][0])>(r=+t[1][0])&&(t=i,i=r,r=t),l>s&&(t=l,l=s,s=t),b.precision(v)):[[i,l],[r,s]]},b.minorExtent=function(t){return arguments.length?(o=+t[0][1],a=+t[1][1],(n=+t[0][0])>(e=+t[1][0])&&(t=n,n=e,e=t),o>a&&(t=o,o=a,a=t),b.precision(v)):[[n,o],[e,a]]},b.step=function(t){return arguments.length?b.majorStep(t).minorStep(t):b.minorStep()},b.majorStep=function(t){return arguments.length?(g=+t[0],m=+t[1],b):[g,m]},b.minorStep=function(t){return arguments.length?(f=+t[0],p=+t[1],b):[f,p]},b.precision=function(t){return arguments.length?(v=+t,c=Hr(o,a,90),u=jr(n,e,v),d=Hr(l,s,90),h=jr(i,r,v),b):v},b.majorExtent([[-180,-90+Tt],[180,90-Tt]]).minorExtent([[-180,-80-Tt],[180,80+Tt]])},t.geo.greatArc=function(){var e,n,r=Br,i=Ur;function a(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}return a.distance=function(){return t.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},a.source=function(t){return arguments.length?(r=t,e="function"==typeof t?null:t,a):r},a.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,a):i},a.precision=function(){return arguments.length?a:0},a},t.geo.interpolate=function(t,e){return n=t[0]*Ot,r=t[1]*Ot,i=e[0]*Ot,a=e[1]*Ot,o=Math.cos(r),s=Math.sin(r),l=Math.cos(a),c=Math.sin(a),u=o*Math.cos(n),d=o*Math.sin(n),h=l*Math.cos(i),f=l*Math.sin(i),p=2*Math.asin(Math.sqrt(Ft(a-r)+o*l*Ft(i-n))),g=1/Math.sin(p),(m=p?function(t){var e=Math.sin(t*=p)*g,n=Math.sin(p-t)*g,r=n*u+e*h,i=n*d+e*f,a=n*s+e*c;return[Math.atan2(i,r)*Et,Math.atan2(a,Math.sqrt(r*r+i*i))*Et]}:function(){return[n*Et,r*Et]}).distance=p,m;var n,r,i,a,o,s,l,c,u,d,h,f,p,g,m},t.geo.length=function(e){return yr=0,t.geo.stream(e,qr),yr};var qr={sphere:I,point:I,lineStart:function(){var t,e,n;function r(r,i){var a=Math.sin(i*=Ot),o=Math.cos(i),s=y((r*=Ot)-t),l=Math.cos(s);yr+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-e*o*l)*s),e*a+n*o*l),t=r,e=a,n=o}qr.point=function(i,a){t=i*Ot,e=Math.sin(a*=Ot),n=Math.cos(a),qr.point=r},qr.lineEnd=function(){qr.point=qr.lineEnd=I}},lineEnd:I,polygonStart:I,polygonEnd:I};function Gr(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]},n}var Zr=Gr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(t.geo.azimuthalEqualArea=function(){return Dr(Zr)}).raw=Zr;var Wr=Gr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},O);function $r(t,e){var n=Math.cos(t),r=function(t){return Math.tan(At/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),a=n*Math.pow(r(t),i)/i;if(!i)return Qr;function o(t,e){a>0?e<-Dt+Tt&&(e=-Dt+Tt):e>Dt-Tt&&(e=Dt-Tt);var n=a/Math.pow(r(e),i);return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}return o.invert=function(t,e){var n=a-e,r=Lt(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Dt]},o}function Yr(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(y(r)<Tt)return Lr;function a(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return a.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-Lt(r)*Math.sqrt(t*t+n*n)]},a}(t.geo.azimuthalEquidistant=function(){return Dr(Wr)}).raw=Wr,(t.geo.conicConformal=function(){return ar($r)}).raw=$r,(t.geo.conicEquidistant=function(){return ar(Yr)}).raw=Yr;var Xr=Gr(function(t){return 1/t},Math.atan);function Qr(t,e){return[t,Math.log(Math.tan(At/4+e/2))]}function Kr(t){var e,n=Dr(t),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=At*r(),l=i();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}(t.geo.gnomonic=function(){return Dr(Xr)}).raw=Xr,Qr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Dt]},(t.geo.mercator=function(){return Kr(Qr)}).raw=Qr;var Jr=Gr(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Dr(Jr)}).raw=Jr;var ti=Gr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function ei(t,e){return[Math.log(Math.tan(At/4+e/2)),-t]}function ni(t){return t[0]}function ri(t){return t[1]}function ii(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Pt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ai(t,e){return t[0]-e[0]||t[1]-e[1]}(t.geo.stereographic=function(){return Dr(ti)}).raw=ti,ei.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Dt]},(t.geo.transverseMercator=function(){var t=Kr(ei),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ei,t.geom={},t.geom.hull=function(t){var e=ni,n=ri;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=pe(e),a=pe(n),o=t.length,s=[],l=[];for(r=0;r<o;r++)s.push([+i.call(this,t[r],r),+a.call(this,t[r],r),r]);for(s.sort(ai),r=0;r<o;r++)l.push([s[r][0],-s[r][1]]);var c=ii(s),u=ii(l),d=u[0]===c[0],h=u[u.length-1]===c[c.length-1],f=[];for(r=c.length-1;r>=0;--r)f.push(t[s[c[r]][2]]);for(r=+d;r<u.length-h;++r)f.push(t[s[u[r]][2]]);return f}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},t.geom.polygon=function(t){return j(t,oi),t};var oi=t.geom.polygon.prototype=[];function si(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function li(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,l=t[1],c=n[1],u=e[1]-l,d=r[1]-c,h=(s*(l-c)-d*(i-a))/(d*o-s*u);return[i+h*o,l+h*u]}function ci(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}oi.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)i+=(t=r)[1]*(r=this[e])[0]-t[0]*r[1];return.5*i},oi.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)a+=((e=s)[0]+(s=this[r])[0])*(n=e[0]*s[1]-s[0]*e[1]),o+=(e[1]+s[1])*n;return[a*t,o*t]},oi.clip=function(t){for(var e,n,r,i,a,o,s=ci(t),l=-1,c=this.length-ci(this),u=this[c-1];++l<c;){for(e=t.slice(),t.length=0,i=this[l],a=e[(r=e.length-s)-1],n=-1;++n<r;)si(o=e[n],u,i)?(si(a,u,i)||t.push(li(a,o,u,i)),t.push(o)):si(a,u,i)&&t.push(li(a,o,u,i)),a=o;s&&t.push(t[0]),u=i}return t};var ui,di,hi,fi,pi,gi=[],mi=[];function vi(){Ni(this),this.edge=this.site=this.circle=null}function yi(t){var e=gi.pop()||new vi;return e.site=t,e}function bi(t){Si(t),hi.remove(t),gi.push(t),Ni(t)}function xi(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];bi(t);for(var l=a;l.circle&&y(n-l.circle.x)<Tt&&y(r-l.circle.cy)<Tt;)a=l.P,s.unshift(l),bi(l),l=a;s.unshift(l),Si(l);for(var c=o;c.circle&&y(n-c.circle.x)<Tt&&y(r-c.circle.cy)<Tt;)o=c.N,s.push(c),bi(c),c=o;s.push(c),Si(c);var u,d=s.length;for(u=1;u<d;++u)Pi((c=s[u]).edge,(l=s[u-1]).site,c.site,i);(c=s[d-1]).edge=Ei((l=s[0]).site,c.site,null,i),Ci(l),Ci(c)}function _i(t){for(var e,n,r,i,a=t.x,o=t.y,s=hi._;s;)if((r=wi(s,o)-a)>Tt)s=s.L;else{if(!((i=a-ki(s,o))>Tt)){r>-Tt?(e=s.P,n=s):i>-Tt?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=yi(t);if(hi.insert(e,l),e||n){if(e===n)return Si(e),n=yi(e.site),hi.insert(l,n),l.edge=n.edge=Ei(e.site,l.site),Ci(e),void Ci(n);if(n){Si(e),Si(n);var c=e.site,u=c.x,d=c.y,h=t.x-u,f=t.y-d,p=n.site,g=p.x-u,m=p.y-d,v=2*(h*m-f*g),y=h*h+f*f,b=g*g+m*m,x={x:(m*y-f*b)/v+u,y:(h*b-g*y)/v+d};Pi(n.edge,c,p,x),l.edge=Ei(c,t,null,x),n.edge=Ei(t,p,null,x),Ci(e),Ci(n)}else l.edge=Ei(e.site,l.site)}}function wi(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,c=l-e;if(!c)return s;var u=s-r,d=1/a-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+i-a/2)))/d+r:(r+s)/2}function ki(t,e){var n=t.N;if(n)return wi(n,e);var r=t.site;return r.y===e?r.x:1/0}function Ti(t){this.site=t,this.edges=[]}function Mi(t,e){return e.angle-t.angle}function Ai(){Ni(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ci(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,c=r.y-s,u=a.x-o,d=2*(l*(m=a.y-s)-c*u);if(!(d>=-Mt)){var h=l*l+c*c,f=u*u+m*m,p=(m*h-c*f)/d,g=(l*f-u*h)/d,m=g+s,v=mi.pop()||new Ai;v.arc=t,v.site=i,v.x=p+o,v.y=m+Math.sqrt(p*p+g*g),v.cy=m,t.circle=v;for(var y=null,b=pi._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}pi.insert(y,v),y||(fi=v)}}}}function Si(t){var e=t.circle;e&&(e.P||(fi=e.N),pi.remove(e),mi.push(e),Ni(e),t.circle=null)}function Di(t,e){var n=t.b;if(n)return!0;var r,i,a=t.a,o=e[0][0],s=e[1][0],l=e[0][1],c=e[1][1],u=t.l,d=t.r,h=u.x,f=u.y,p=d.x,g=d.y,m=(h+p)/2;if(g===f){if(m<o||m>=s)return;if(h>p){if(a){if(a.y>=c)return}else a={x:m,y:l};n={x:m,y:c}}else{if(a){if(a.y<l)return}else a={x:m,y:c};n={x:m,y:l}}}else if(i=(f+g)/2-(r=(h-p)/(g-f))*m,r<-1||r>1)if(h>p){if(a){if(a.y>=c)return}else a={x:(l-i)/r,y:l};n={x:(c-i)/r,y:c}}else{if(a){if(a.y<l)return}else a={x:(c-i)/r,y:c};n={x:(l-i)/r,y:l}}else if(f<g){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return t.a=a,t.b=n,!0}function Oi(t,e){this.l=t,this.r=e,this.a=this.b=null}function Ei(t,e,n,r){var i=new Oi(t,e);return ui.push(i),n&&Pi(i,t,e,n),r&&Pi(i,e,t,r),di[t.i].edges.push(new Ii(i,t,e)),di[e.i].edges.push(new Ii(i,e,t)),i}function Li(t,e,n){var r=new Oi(t,null);return r.a=e,r.b=n,ui.push(r),r}function Pi(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Ii(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Ri(){this._=null}function Ni(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Fi(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function zi(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Vi(t){for(;t.L;)t=t.L;return t}function Hi(t,e){var n,r,i,a=t.sort(ji).pop();for(ui=[],di=new Array(t.length),hi=new Ri,pi=new Ri;;)if(i=fi,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(di[a.i]=new Ti(a),_i(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;xi(i.arc)}e&&(function(t){for(var e,n=ui,r=rr(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Di(e=n[i],t)||!r(e)||y(e.a.x-e.b.x)<Tt&&y(e.a.y-e.b.y)<Tt)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,a,o,s,l,c,u,d=t[0][0],h=t[1][0],f=t[0][1],p=t[1][1],g=di,m=g.length;m--;)if((a=g[m])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)r=(u=s[o].end()).x,i=u.y,e=(c=s[++o%l].start()).x,n=c.y,(y(r-e)>Tt||y(i-n)>Tt)&&(s.splice(o,0,new Ii(Li(a.site,u,y(r-d)<Tt&&p-i>Tt?{x:d,y:y(e-d)<Tt?n:p}:y(i-p)<Tt&&h-r>Tt?{x:y(n-p)<Tt?e:h,y:p}:y(r-h)<Tt&&i-f>Tt?{x:h,y:y(e-h)<Tt?n:f}:y(i-f)<Tt&&r-d>Tt?{x:y(n-f)<Tt?e:d,y:f}:null),a.site,null)),++l)}(e));var o={cells:di,edges:ui};return hi=pi=ui=di=null,o}function ji(t,e){return e.y-t.y||e.x-t.x}Ti.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Mi),e.length},Ii.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ri.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Vi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Fi(this,n),n=(t=n).U),n.C=!1,r.C=!0,zi(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(zi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Fi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?Vi(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Fi(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,zi(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Fi(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,zi(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Fi(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,zi(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},t.geom.voronoi=function(t){var e=ni,n=ri,r=e,i=n,a=Bi;if(t)return o(t);function o(t){var e=new Array(t.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];return Hi(s(t),a).cells.forEach(function(a,s){var l=a.edges,c=a.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=n&&c.x<=i&&c.y>=r&&c.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/Tt)*Tt,y:Math.round(i(t,e)/Tt)*Tt,i:e}})}return o.links=function(t){return Hi(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},o.triangles=function(t){var e=[];return Hi(s(t)).cells.forEach(function(n,r){for(var i,a,o,s,l=n.site,c=n.edges.sort(Mi),u=-1,d=c.length,h=c[d-1].edge,f=h.l===l?h.r:h.l;++u<d;)i=f,f=(h=c[u].edge).l===l?h.r:h.l,r<i.i&&r<f.i&&((a=l).x-(s=f).x)*((o=i).y-a.y)-(a.x-o.x)*(s.y-a.y)<0&&e.push([t[r],t[i.i],t[f.i]])}),e},o.x=function(t){return arguments.length?(r=pe(e=t),o):e},o.y=function(t){return arguments.length?(i=pe(n=t),o):n},o.clipExtent=function(t){return arguments.length?(a=null==t?Bi:t,o):a===Bi?null:a},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):a===Bi?null:a&&a[1]},o};var Bi=[[-1e6,-1e6],[1e6,1e6]];function Ui(t){return t.x}function qi(t){return t.y}function Gi(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),l=e.nodes;l[0]&&Gi(t,l[0],n,r,o,s),l[1]&&Gi(t,l[1],o,r,i,s),l[2]&&Gi(t,l[2],n,s,o,a),l[3]&&Gi(t,l[3],o,s,i,a)}}function Zi(t,e,n,r,i,a,o){var s,l=1/0;return function t(c,u,d,h,f){if(!(u>a||d>o||h<r||f<i)){if(p=c.point){var p,g=e-c.x,m=n-c.y,v=g*g+m*m;if(v<l){var y=Math.sqrt(l=v);r=e-y,i=n-y,a=e+y,o=n+y,s=p}}for(var b=c.nodes,x=.5*(u+h),_=.5*(d+f),w=(n>=_)<<1|e>=x,k=w+4;w<k;++w)if(c=b[3&w])switch(3&w){case 0:t(c,u,d,x,_);break;case 1:t(c,x,d,h,_);break;case 2:t(c,u,_,x,f);break;case 3:t(c,x,_,h,f)}}}(t,r,i,a,o),s}function Wi(e,n){e=t.rgb(e),n=t.rgb(n);var r=e.r,i=e.g,a=e.b,o=n.r-r,s=n.g-i,l=n.b-a;return function(t){return"#"+se(Math.round(r+o*t))+se(Math.round(i+s*t))+se(Math.round(a+l*t))}}function $i(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Ji(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Yi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Xi(t,e){var n,r,i,a=Qi.lastIndex=Ki.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=Qi.exec(t))&&(r=Ki.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:Yi(n,r)})),a=Ki.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(t,e,n,r,i){var a,o=ni,s=ri;if(a=arguments.length)return o=Ui,s=qi,3===a&&(i=n,r=e,n=e=0),l(t);function l(t){var l,c,u,d,h,f,p,g,m,v=pe(o),b=pe(s);if(null!=e)f=e,p=n,g=r,m=i;else if(g=m=-(f=p=1/0),c=[],u=[],h=t.length,a)for(d=0;d<h;++d)(l=t[d]).x<f&&(f=l.x),l.y<p&&(p=l.y),l.x>g&&(g=l.x),l.y>m&&(m=l.y),c.push(l.x),u.push(l.y);else for(d=0;d<h;++d){var x=+v(l=t[d],d),_=+b(l,d);x<f&&(f=x),_<p&&(p=_),x>g&&(g=x),_>m&&(m=_),c.push(x),u.push(_)}var w=g-f,k=m-p;function T(t,e,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(y(l-n)+y(c-r)<.01)M(t,e,n,r,i,a,o,s);else{var u=t.point;t.x=t.y=t.point=null,M(t,u,l,c,i,a,o,s),M(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else M(t,e,n,r,i,a,o,s)}function M(t,e,n,r,i,a,o,s){var l=.5*(i+o),c=.5*(a+s),u=n>=l,d=r>=c,h=d<<1|u;t.leaf=!1,u?i=l:o=l,d?a=c:s=c,T(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,r,i,a,o,s)}w>k?m=p+w:g=f+k;var A={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){T(A,t,+v(t,++d),+b(t,d),f,p,g,m)},visit:function(t){Gi(t,A,f,p,g,m)},find:function(t){return Zi(A,t[0],t[1],f,p,g,m)}};if(d=-1,null==e){for(;++d<h;)T(A,t[d],c[d],u[d],f,p,g,m);--d}else t.forEach(A.add);return c=u=t=l=null,A}return l.x=function(t){return arguments.length?(o=t,l):o},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),l):null==e?null:[[e,n],[r,i]]},l.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),l):null==e?null:[r-e,i-n]},l},t.interpolateRgb=Wi,t.interpolateObject=$i,t.interpolateNumber=Yi,t.interpolateString=Xi;var Qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ki=new RegExp(Qi.source,"g");function Ji(e,n){for(var r,i=t.interpolators.length;--i>=0&&!(r=t.interpolators[i](e,n)););return r}function ta(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(Ji(t[n],e[n]));for(;n<a;++n)i[n]=t[n];for(;n<o;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}t.interpolate=Ji,t.interpolators=[function(t,e){var n=typeof e;return("string"===n?fe.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Wi:Xi:e instanceof Bt?Wi:Array.isArray(e)?ta:"object"===n&&isNaN(e)?$i:Yi)(t,e)}],t.interpolateArray=ta;var ea=function(){return O},na=t.map({linear:ea,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return sa},cubic:function(){return la},sin:function(){return ua},exp:function(){return da},circle:function(){return ha},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Ct*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Ct/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return fa}}),ra=t.map({in:O,out:aa,"in-out":oa,"out-in":function(t){return oa(aa(t))}});function ia(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function aa(t){return function(e){return 1-t(1-e)}}function oa(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function sa(t){return t*t}function la(t){return t*t*t}function ca(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function ua(t){return 1-Math.cos(t*Dt)}function da(t){return Math.pow(2,10*(t-1))}function ha(t){return 1-Math.sqrt(1-t*t)}function fa(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function pa(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ga(t){var e,n,r,i=[t.a,t.b],a=[t.c,t.d],o=va(i),s=ma(i,a),l=va(((e=a)[0]+=(r=-s)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*Et,this.translate=[t.e,t.f],this.scale=[o,l],this.skew=l?Math.atan2(s,l)*Et:0}function ma(t,e){return t[0]*e[0]+t[1]*e[1]}function va(t){var e=Math.sqrt(ma(t,t));return e&&(t[0]/=e,t[1]/=e),e}t.ease=function(t){var e=t.indexOf("-"),r=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return r=na.get(r)||ea,ia((i=ra.get(i)||O)(r.apply(null,n.call(arguments,1))))},t.interpolateHcl=function(e,n){e=t.hcl(e),n=t.hcl(n);var r=e.h,i=e.c,a=e.l,o=n.h-r,s=n.c-i,l=n.l-a;return isNaN(s)&&(s=0,i=isNaN(i)?n.c:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(t){return $t(r+o*t,i+s*t,a+l*t)+""}},t.interpolateHsl=function(e,n){e=t.hsl(e),n=t.hsl(n);var r=e.h,i=e.s,a=e.l,o=n.h-r,s=n.s-i,l=n.l-a;return isNaN(s)&&(s=0,i=isNaN(i)?n.s:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(t){return Gt(r+o*t,i+s*t,a+l*t)+""}},t.interpolateLab=function(e,n){e=t.lab(e),n=t.lab(n);var r=e.l,i=e.a,a=e.b,o=n.l-r,s=n.a-i,l=n.b-a;return function(t){return Kt(r+o*t,i+s*t,a+l*t)+""}},t.interpolateRound=pa,t.transform=function(e){var n=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new ga(e?e.matrix:ya)})(e)},ga.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ya={a:1,b:0,c:0,d:1,e:0,f:0};function ba(t){return t.length?t.pop()+",":""}function xa(e,n){var r=[],i=[];return e=t.transform(e),n=t.transform(n),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Yi(t[0],e[0])},{i:i-2,x:Yi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(e.translate,n.translate,r,i),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(ba(n)+"rotate(",null,")")-2,x:Yi(t,e)})):e&&n.push(ba(n)+"rotate("+e+")")}(e.rotate,n.rotate,r,i),function(t,e,n,r){t!==e?r.push({i:n.push(ba(n)+"skewX(",null,")")-2,x:Yi(t,e)}):e&&n.push(ba(n)+"skewX("+e+")")}(e.skew,n.skew,r,i),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(ba(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Yi(t[0],e[0])},{i:i-2,x:Yi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(ba(n)+"scale("+e+")")}(e.scale,n.scale,r,i),e=n=null,function(t){for(var e,n=-1,a=i.length;++n<a;)r[(e=i[n]).i]=e.x(t);return r.join("")}}function _a(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function wa(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function ka(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;for(var n=Ta(t),r=Ta(e),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}(e,n),i=[e];e!==r;)i.push(e=e.parent);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Ta(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Ma(t){t.fixed|=2}function Aa(t){t.fixed&=-7}function Ca(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Sa(t){t.fixed&=-5}t.interpolateTransform=xa,t.layout={},t.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(ka(t[n]));return e}},t.layout.chord=function(){var e,n,r,i,a,o,s,l={},c=0;function u(){var l,u,h,f,p,g={},m=[],v=t.range(i),y=[];for(e=[],n=[],l=0,f=-1;++f<i;){for(u=0,p=-1;++p<i;)u+=r[f][p];m.push(u),y.push(t.range(i)),l+=u}for(a&&v.sort(function(t,e){return a(m[t],m[e])}),o&&y.forEach(function(t,e){t.sort(function(t,n){return o(r[e][t],r[e][n])})}),l=(Ct-c*i)/l,u=0,f=-1;++f<i;){for(h=u,p=-1;++p<i;){var b=v[f],x=y[b][p],_=r[b][x],w=u,k=u+=_*l;g[b+"-"+x]={index:b,subindex:x,startAngle:w,endAngle:k,value:_}}n[b]={index:b,startAngle:h,endAngle:u,value:m[b]},u+=c}for(f=-1;++f<i;)for(p=f-1;++p<i;){var T=g[f+"-"+p],M=g[p+"-"+f];(T.value||M.value)&&e.push(T.value<M.value?{source:M,target:T}:{source:T,target:M})}s&&d()}function d(){e.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return l.matrix=function(t){return arguments.length?(i=(r=t)&&r.length,e=n=null,l):r},l.padding=function(t){return arguments.length?(c=t,e=n=null,l):c},l.sortGroups=function(t){return arguments.length?(a=t,e=n=null,l):a},l.sortSubgroups=function(t){return arguments.length?(o=t,e=null,l):o},l.sortChords=function(t){return arguments.length?(s=t,e&&d(),l):s},l.chords=function(){return e||u(),e},l.groups=function(){return n||u(),n},l},t.layout.force=function(){var e,n,r,i,a,o,s={},l=t.dispatch("start","tick","end"),c=[1,1],u=.9,d=Da,h=Oa,f=-30,p=Ea,g=.1,m=.64,v=[],y=[];function b(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-n,l=a*a+o*o;if(s*s/m<l){if(l<p){var c=e.charge/l;t.px-=a*c,t.py-=o*c}return!0}e.point&&l&&l<p&&(t.px-=a*(c=e.pointCharge/l),t.py-=o*c)}return!e.charge}}function x(e){e.px=t.event.x,e.py=t.event.y,s.resume()}return s.tick=function(){if((r*=.99)<.005)return e=null,l.end({type:"end",alpha:r=0}),!0;var n,s,d,h,p,m,x,_,w,k=v.length,T=y.length;for(s=0;s<T;++s)h=(d=y[s]).source,(m=(_=(p=d.target).x-h.x)*_+(w=p.y-h.y)*w)&&(_*=m=r*a[s]*((m=Math.sqrt(m))-i[s])/m,w*=m,p.x-=_*(x=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=w*x,h.x+=_*(x=1-x),h.y+=w*x);if((x=r*g)&&(_=c[0]/2,w=c[1]/2,s=-1,x))for(;++s<k;)(d=v[s]).x+=(_-d.x)*x,d.y+=(w-d.y)*x;if(f)for(function t(e,n,r){var i=0,a=0;if(e.charge=0,!e.leaf)for(var o,s=e.nodes,l=s.length,c=-1;++c<l;)null!=(o=s[c])&&(t(o,n,r),e.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=n*r[e.point.index];e.charge+=e.pointCharge=u,i+=u*e.point.x,a+=u*e.point.y}e.cx=i/e.charge,e.cy=a/e.charge}(n=t.geom.quadtree(v),r,o),s=-1;++s<k;)(d=v[s]).fixed||n.visit(b(d));for(s=-1;++s<k;)(d=v[s]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*u,d.y-=(d.py-(d.py=d.y))*u);l.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(u=+t,s):u},s.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:r=0})):t>0&&(l.start({type:"start",alpha:r=t}),e=we(s.tick)),s):r},s.start=function(){var t,e,n,r=v.length,l=y.length,u=c[0],p=c[1];for(t=0;t<r;++t)(n=v[t]).index=t,n.weight=0;for(t=0;t<l;++t)"number"==typeof(n=y[t]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<r;++t)n=v[t],isNaN(n.x)&&(n.x=g("x",u)),isNaN(n.y)&&(n.y=g("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof d)for(t=0;t<l;++t)i[t]=+d.call(this,y[t],t);else for(t=0;t<l;++t)i[t]=d;if(a=[],"function"==typeof h)for(t=0;t<l;++t)a[t]=+h.call(this,y[t],t);else for(t=0;t<l;++t)a[t]=h;if(o=[],"function"==typeof f)for(t=0;t<r;++t)o[t]=+f.call(this,v[t],t);else for(t=0;t<r;++t)o[t]=f;function g(n,i){if(!e){for(e=new Array(r),c=0;c<r;++c)e[c]=[];for(c=0;c<l;++c){var a=y[c];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var o,s=e[t],c=-1,u=s.length;++c<u;)if(!isNaN(o=s[c][n]))return o;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=t.behavior.drag().origin(O).on("dragstart.force",Ma).on("drag.force",x).on("dragend.force",Aa)),!arguments.length)return n;this.on("mouseover.force",Ca).on("mouseout.force",Sa).call(n)},t.rebind(s,l,"on")};var Da=20,Oa=1,Ea=1/0;function La(e,n){return t.rebind(e,n,"sort","children","value"),e.nodes=e,e.links=za,e}function Pa(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ia(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function Ra(t){return t.children}function Na(t){return t.value}function Fa(t,e){return e.value-t.value}function za(e){return t.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}t.layout.hierarchy=function(){var t=Fa,e=Ra,n=Na;function r(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(c=e.call(r,a,a.depth))&&(l=c.length)){for(var l,c,u;--l>=0;)o.push(u=c[l]),u.parent=a,u.depth=a.depth+1;n&&(a.value=0),a.children=c}else n&&(a.value=+n.call(r,a,a.depth)||0),delete a.children;return Ia(i,function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)}),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Pa(t,function(t){t.children&&(t.value=0)}),Ia(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function r(t,r){var i=e.call(this,t,r);return function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,l,c=-1;for(r=e.value?r/e.value:0;++c<o;)t(s=a[c],n,l=s.value*r,i),n+=l}}(i[0],0,n[0],n[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}(i[0])),i}return r.size=function(t){return arguments.length?(n=t,r):n},La(r,e)},t.layout.pie=function(){var e=Number,n=Va,r=0,i=Ct,a=0;function o(s){var l,c=s.length,u=s.map(function(t,n){return+e.call(o,t,n)}),d=+("function"==typeof r?r.apply(this,arguments):r),h=("function"==typeof i?i.apply(this,arguments):i)-d,f=Math.min(Math.abs(h)/c,+("function"==typeof a?a.apply(this,arguments):a)),p=f*(h<0?-1:1),g=t.sum(u),m=g?(h-c*p)/g:0,v=t.range(c),y=[];return null!=n&&v.sort(n===Va?function(t,e){return u[e]-u[t]}:function(t,e){return n(s[t],s[e])}),v.forEach(function(t){y[t]={data:s[t],value:l=u[t],startAngle:d,endAngle:d+=l*m+p,padAngle:f}}),y}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(t){return arguments.length?(n=t,o):n},o.startAngle=function(t){return arguments.length?(r=t,o):r},o.endAngle=function(t){return arguments.length?(i=t,o):i},o.padAngle=function(t){return arguments.length?(a=t,o):a},o};var Va={};function Ha(t){return t.x}function ja(t){return t.y}function Ba(t,e,n){t.y0=e,t.y=n}t.layout.stack=function(){var e=O,n=Ga,r=Za,i=Ba,a=Ha,o=ja;function s(l,c){if(!(f=l.length))return l;var u=l.map(function(t,n){return e.call(s,t,n)}),d=u.map(function(t){return t.map(function(t,e){return[a.call(s,t,e),o.call(s,t,e)]})}),h=n.call(s,d,c);u=t.permute(u,h),d=t.permute(d,h);var f,p,g,m,v=r.call(s,d,c),y=u[0].length;for(g=0;g<y;++g)for(i.call(s,u[0][g],m=v[g],d[0][g][1]),p=1;p<f;++p)i.call(s,u[p][g],m+=d[p-1][g][1],d[p][g][1]);return l}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(t){return arguments.length?(n="function"==typeof t?t:Ua.get(t)||Ga,s):n},s.offset=function(t){return arguments.length?(r="function"==typeof t?t:qa.get(t)||Za,s):r},s.x=function(t){return arguments.length?(a=t,s):a},s.y=function(t){return arguments.length?(o=t,s):o},s.out=function(t){return arguments.length?(i=t,s):i},s};var Ua=t.map({"inside-out":function(e){var n,r,i=e.length,a=e.map(Wa),o=e.map($a),s=t.range(i).sort(function(t,e){return a[t]-a[e]}),l=0,c=0,u=[],d=[];for(n=0;n<i;++n)r=s[n],l<c?(l+=o[r],u.push(r)):(c+=o[r],d.push(r));return d.reverse().concat(u)},reverse:function(e){return t.range(e.length).reverse()},default:Ga}),qa=t.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,l=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,r,i,a,o,s,l,c,u=t.length,d=t[0],h=d.length,f=[];for(f[0]=l=c=0,n=1;n<h;++n){for(e=0,i=0;e<u;++e)i+=t[e][n][1];for(e=0,a=0,s=d[n][0]-d[n-1][0];e<u;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}f[n]=l-=i?a/i*s:0,l<c&&(c=l)}for(n=0;n<h;++n)f[n]-=c;return f},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:Za});function Ga(e){return t.range(e.length)}function Za(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Wa(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function $a(t){return t.reduce(Ya,0)}function Ya(t,e){return t+e[1]}function Xa(t,e){return Qa(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Qa(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function Ka(e){return[t.min(e),t.max(e)]}function Ja(t,e){return t.value-e.value}function to(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function eo(t,e){t._pack_next=e,e._pack_prev=t}function no(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function ro(t){if((e=t.children)&&(l=e.length)){var e,n,r,i,a,o,s,l,c=1/0,u=-1/0,d=1/0,h=-1/0;if(e.forEach(io),(n=e[0]).x=-n.r,n.y=0,b(n),l>1&&((r=e[1]).x=r.r,r.y=0,b(r),l>2))for(oo(n,r,i=e[2]),b(i),to(n,i),n._pack_prev=i,to(i,r),r=n._pack_next,a=3;a<l;a++){oo(n,r,i=e[a]);var f=0,p=1,g=1;for(o=r._pack_next;o!==r;o=o._pack_next,p++)if(no(o,i)){f=1;break}if(1==f)for(s=n._pack_prev;s!==o._pack_prev&&!no(s,i);s=s._pack_prev,g++);f?(p<g||p==g&&r.r<n.r?eo(n,r=o):eo(n=s,r),a--):(to(n,i),r=i,b(i))}var m=(c+u)/2,v=(d+h)/2,y=0;for(a=0;a<l;a++)(i=e[a]).x-=m,i.y-=v,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(ao)}function b(t){c=Math.min(t.x-t.r,c),u=Math.max(t.x+t.r,u),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}}function io(t){t._pack_next=t._pack_prev=t}function ao(t){delete t._pack_next,delete t._pack_prev}function oo(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a,l=.5+((r*=r)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+l*i+c*a,n.y=t.y+l*a-c*i}else n.x=t.x+r,n.y=t.y}function so(t,e){return t.parent==e.parent?1:2}function lo(t){var e=t.children;return e.length?e[0]:t.t}function co(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function uo(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function ho(t,e,n){return t.a.parent===e.parent?t.a:n}function fo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function po(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function go(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function mo(t){return t.rangeExtent?t.rangeExtent():go(t.range())}function vo(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function yo(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function bo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:xo}t.layout.histogram=function(){var e=!0,n=Number,r=Ka,i=Xa;function a(a,o){for(var s,l,c=[],u=a.map(n,this),d=r.call(this,u,o),h=i.call(this,d,u,o),f=(o=-1,u.length),p=h.length-1,g=e?1:1/f;++o<p;)(s=c[o]=[]).dx=h[o+1]-(s.x=h[o]),s.y=0;if(p>0)for(o=-1;++o<f;)(l=u[o])>=d[0]&&l<=d[1]&&((s=c[t.bisect(h,l,1,p)-1]).y+=g,s.push(a[o]));return c}return a.value=function(t){return arguments.length?(n=t,a):n},a.range=function(t){return arguments.length?(r=pe(t),a):r},a.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Qa(e,t)}:pe(t),a):i},a.frequency=function(t){return arguments.length?(e=!!t,a):e},a},t.layout.pack=function(){var e,n=t.layout.hierarchy().sort(Ja),r=0,i=[1,1];function a(t,a){var o=n.call(this,t,a),s=o[0],l=i[0],c=i[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Ia(s,function(t){t.r=+u(t.value)}),Ia(s,ro),r){var d=r*(e?1:Math.max(2*s.r/l,2*s.r/c))/2;Ia(s,function(t){t.r+=d}),Ia(s,ro),Ia(s,function(t){t.r-=d})}return function t(e,n,r,i){var a=e.children;if(e.x=n+=i*e.x,e.y=r+=i*e.y,e.r*=i,a)for(var o=-1,s=a.length;++o<s;)t(a[o],n,r,i)}(s,l/2,c/2,e?1:1/Math.max(2*s.r/l,2*s.r/c)),o}return a.size=function(t){return arguments.length?(i=t,a):i},a.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,a):e},a.padding=function(t){return arguments.length?(r=+t,a):r},La(a,n)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=so,r=[1,1],i=null;function a(t,a){var c=e.call(this,t,a),u=c[0],d=function(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,a=e.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(u);if(Ia(d,o),d.parent.m=-d.z,Pa(d,s),i)Pa(u,l);else{var h=u,f=u,p=u;Pa(u,function(t){t.x<h.x&&(h=t),t.x>f.x&&(f=t),t.depth>p.depth&&(p=t)});var g=n(h,f)/2-h.x,m=r[0]/(f.x+n(f,h)/2+g),v=r[1]/(p.depth||1);Pa(u,function(t){t.x=(t.x+g)*m,t.y=t.depth*v})}return c}function o(t){var e=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+n(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+n(t._,i._));t.parent.A=function(t,e,r){if(e){for(var i,a=t,o=t,s=e,l=a.parent.children[0],c=a.m,u=o.m,d=s.m,h=l.m;s=co(s),a=lo(a),s&&a;)l=lo(l),(o=co(o)).a=t,(i=s.z+d-a.z-c+n(s._,a._))>0&&(uo(ho(s,t,r),t,i),c+=i,u+=i),d+=s.m,c+=a.m,h+=l.m,u+=o.m;s&&!co(o)&&(o.t=s,o.m+=d-u),a&&!lo(l)&&(l.t=a,l.m+=c-h,r=t)}return r}(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=r[0],t.y=t.depth*r[1]}return a.separation=function(t){return arguments.length?(n=t,a):n},a.size=function(t){return arguments.length?(i=null==(r=t)?l:null,a):i?null:r},a.nodeSize=function(t){return arguments.length?(i=null==(r=t)?null:l,a):i?r:null},La(a,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=so,r=[1,1],i=!1;function a(a,o){var s,l=e.call(this,a,o),c=l[0],u=0;Ia(c,function(e){var r=e.children;r&&r.length?(e.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(r),e.y=function(e){return 1+t.max(e,function(t){return t.y})}(r)):(e.x=s?u+=n(e,s):0,e.y=0,s=e)});var d=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(c),h=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(c),f=d.x-n(d,h)/2,p=h.x+n(h,d)/2;return Ia(c,i?function(t){t.x=(t.x-c.x)*r[0],t.y=(c.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=(1-(c.y?t.y/c.y:1))*r[1]}),l}return a.separation=function(t){return arguments.length?(n=t,a):n},a.size=function(t){return arguments.length?(i=null==(r=t),a):i?null:r},a.nodeSize=function(t){return arguments.length?(i=null!=(r=t),a):i?r:null},La(a,e)},t.layout.treemap=function(){var e,n=t.layout.hierarchy(),r=Math.round,i=[1,1],a=null,o=fo,s=!1,l="squarify",c=.5*(1+Math.sqrt(5));function u(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function d(t){var e=t.children;if(e&&e.length){var n,r,i,a=o(t),s=[],c=e.slice(),h=1/0,g="slice"===l?a.dx:"dice"===l?a.dy:"slice-dice"===l?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(u(c,a.dx*a.dy/t.value),s.area=0;(i=c.length)>0;)s.push(n=c[i-1]),s.area+=n.area,"squarify"!==l||(r=f(s,g))<=h?(c.pop(),h=r):(s.area-=s.pop().area,p(s,g,a,!1),g=Math.min(a.dx,a.dy),s.length=s.area=0,h=1/0);s.length&&(p(s,g,a,!0),s.length=s.area=0),e.forEach(d)}}function h(t){var e=t.children;if(e&&e.length){var n,r=o(t),i=e.slice(),a=[];for(u(i,r.dx*r.dy/t.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(p(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);e.forEach(h)}}function f(t,e){for(var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*c/r,r/(e*a*c)):1/0}function p(t,e,n,i){var a,o=-1,s=t.length,l=n.x,c=n.y,u=e?r(t.area/e):0;if(e==n.dx){for((i||u>n.dy)&&(u=n.dy);++o<s;)(a=t[o]).x=l,a.y=c,a.dy=u,l+=a.dx=Math.min(n.x+n.dx-l,u?r(a.area/u):0);a.z=!0,a.dx+=n.x+n.dx-l,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++o<s;)(a=t[o]).x=l,a.y=c,a.dx=u,c+=a.dy=Math.min(n.y+n.dy-c,u?r(a.area/u):0);a.z=!1,a.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function g(t){var r=e||n(t),a=r[0];return a.x=a.y=0,a.value?(a.dx=i[0],a.dy=i[1]):a.dx=a.dy=0,e&&n.revalue(a),u([a],a.dx*a.dy/a.value),(e?h:d)(a),s&&(e=r),r}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return a;function e(e){var n=t.call(g,e,e.depth);return null==n?fo(e):po(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return po(e,t)}var r;return o=null==(a=t)?fo:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,g},g.round=function(t){return arguments.length?(r=t?Math.round:Number,g):r!=Number},g.sticky=function(t){return arguments.length?(s=t,e=null,g):s},g.ratio=function(t){return arguments.length?(c=t,g):c},g.mode=function(t){return arguments.length?(l=t+"",g):l},La(g,n)},t.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},t.scale={};var xo={floor:O,ceil:O};function _o(e,n,r,i){var a=[],o=[],s=0,l=Math.min(e.length,n.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<=l;)a.push(r(e[s-1],e[s])),o.push(i(n[s-1],n[s]));return function(n){var r=t.bisect(e,n,1,l)-1;return o[r](a[r](n))}}function wo(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function ko(t,e){return yo(t,bo(To(t,e)[2])),yo(t,bo(To(t,e)[2])),t}function To(t,e){null==e&&(e=10);var n=go(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Mo(e,n){return t.range.apply(t,To(e,n))}function Ao(e,n,r){var i=To(e,n);if(r){var a=De.exec(r);if(a.shift(),"s"===a[8]){var o=t.formatPrefix(Math.max(y(i[0]),y(i[1])));return a[7]||(a[7]="."+So(o.scale(i[2]))),a[8]="f",r=t.format(a.join("")),function(t){return r(o.scale(t))+o.symbol}}a[7]||(a[7]="."+function(t,e){var n=So(e[2]);return t in Co?Math.abs(n-So(Math.max(y(e[0]),y(e[1]))))+ +("e"!==t):n-2*("%"===t)}(a[8],i)),r=a.join("")}else r=",."+So(i[2])+"f";return t.format(r)}t.scale.linear=function(){return function t(e,n,r,i){var a,o;function s(){var t=Math.min(e.length,n.length)>2?_o:vo,s=i?wa:_a;return a=t(e,n,s,r),o=t(n,e,s,Ji),l}function l(t){return a(t)}return l.invert=function(t){return o(t)},l.domain=function(t){return arguments.length?(e=t.map(Number),s()):e},l.range=function(t){return arguments.length?(n=t,s()):n},l.rangeRound=function(t){return l.range(t).interpolate(pa)},l.clamp=function(t){return arguments.length?(i=t,s()):i},l.interpolate=function(t){return arguments.length?(r=t,s()):r},l.ticks=function(t){return Mo(e,t)},l.tickFormat=function(t,n){return Ao(e,t,n)},l.nice=function(t){return ko(e,t),s()},l.copy=function(){return t(e,n,r,i)},s()}([0,1],[0,1],Ji,!1)};var Co={s:1,g:1,p:1,r:1,e:1};function So(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}t.scale.log=function(){return function e(n,r,i,a){function o(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(r)}function s(t){return i?Math.pow(r,t):-Math.pow(r,-t)}function l(t){return n(o(t))}return l.invert=function(t){return s(n.invert(t))},l.domain=function(t){return arguments.length?(i=t[0]>=0,n.domain((a=t.map(Number)).map(o)),l):a},l.base=function(t){return arguments.length?(r=+t,n.domain(a.map(o)),l):r},l.nice=function(){var t=yo(a.map(o),i?Math:Oo);return n.domain(t),a=t.map(s),l},l.ticks=function(){var t=go(a),e=[],n=t[0],l=t[1],c=Math.floor(o(n)),u=Math.ceil(o(l)),d=r%1?2:r;if(isFinite(u-c)){if(i){for(;c<u;c++)for(var h=1;h<d;h++)e.push(s(c)*h);e.push(s(c))}else for(e.push(s(c));c++<u;)for(h=d-1;h>0;h--)e.push(s(c)*h);for(c=0;e[c]<n;c++);for(u=e.length;e[u-1]>l;u--);e=e.slice(c,u)}return e},l.tickFormat=function(e,n){if(!arguments.length)return Do;arguments.length<2?n=Do:"function"!=typeof n&&(n=t.format(n));var i=Math.max(1,r*e/l.ticks().length);return function(t){var e=t/s(Math.round(o(t)));return e*r<r-.5&&(e*=r),e<=i?n(t):""}},l.copy=function(){return e(n.copy(),r,i,a)},wo(l,n)}(t.scale.linear().domain([0,1]),10,!0,[1,10])};var Do=t.format(".0e"),Oo={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Eo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}t.scale.pow=function(){return function t(e,n,r){var i=Eo(n),a=Eo(1/n);function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),o):r},o.ticks=function(t){return Mo(r,t)},o.tickFormat=function(t,e){return Ao(r,t,e)},o.nice=function(t){return o.domain(ko(r,t))},o.exponent=function(t){return arguments.length?(i=Eo(n=t),a=Eo(1/n),e.domain(r.map(i)),o):n},o.copy=function(){return t(e.copy(),n,r)},wo(o,e)}(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return function e(n,r){var i,a,o;function s(t){return a[((i.get(t)||("range"===r.t?i.set(t,n.push(t)):NaN))-1)%a.length]}function l(e,r){return t.range(n.length).map(function(t){return e+r*t})}return s.domain=function(t){if(!arguments.length)return n;n=[],i=new _;for(var e,a=-1,o=t.length;++a<o;)i.has(e=t[a])||i.set(e,n.push(e));return s[r.t].apply(s,r.a)},s.range=function(t){return arguments.length?(a=t,o=0,r={t:"range",a:arguments},s):a},s.rangePoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],c=t[1],u=n.length<2?(i=(i+c)/2,0):(c-i)/(n.length-1+e);return a=l(i+u*e/2,u),o=0,r={t:"rangePoints",a:arguments},s},s.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],c=t[1],u=n.length<2?(i=c=Math.round((i+c)/2),0):(c-i)/(n.length-1+e)|0;return a=l(i+Math.round(u*e/2+(c-i-(n.length-1+e)*u)/2),u),o=0,r={t:"rangeRoundPoints",a:arguments},s},s.rangeBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var c=t[1]<t[0],u=t[c-0],d=(t[1-c]-u)/(n.length-e+2*i);return a=l(u+d*i,d),c&&a.reverse(),o=d*(1-e),r={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var c=t[1]<t[0],u=t[c-0],d=t[1-c],h=Math.floor((d-u)/(n.length-e+2*i));return a=l(u+Math.round((d-u-(n.length-e)*h)/2),h),c&&a.reverse(),o=Math.round(h*(1-e)),r={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return o},s.rangeExtent=function(){return go(r.a[0])},s.copy=function(){return e(n,r)},s.domain(n)}([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(Lo)},t.scale.category20=function(){return t.scale.ordinal().range(Po)},t.scale.category20b=function(){return t.scale.ordinal().range(Io)},t.scale.category20c=function(){return t.scale.ordinal().range(Ro)};var Lo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ae),Po=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ae),Io=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ae),Ro=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ae);function No(){return 0}t.scale.quantile=function(){return function e(n,r){var i;function a(){var e=0,a=r.length;for(i=[];++e<a;)i[e-1]=t.quantile(n,e/a);return o}function o(e){if(!isNaN(e=+e))return r[t.bisect(i,e)]}return o.domain=function(t){return arguments.length?(n=t.map(f).filter(p).sort(h),a()):n},o.range=function(t){return arguments.length?(r=t,a()):r},o.quantiles=function(){return i},o.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},o.copy=function(){return e(n,r)},a()}([],[])},t.scale.quantize=function(){return function t(e,n,r){var i,a;function o(t){return r[Math.max(0,Math.min(a,Math.floor(i*(t-e))))]}function s(){return i=r.length/(n-e),a=r.length-1,o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]},o.range=function(t){return arguments.length?(r=t,s()):r},o.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+e,t+1/i]},o.copy=function(){return t(e,n,r)},s()}(0,1,[0,1])},t.scale.threshold=function(){return function e(n,r){function i(e){if(e<=e)return r[t.bisect(n,e)]}return i.domain=function(t){return arguments.length?(n=t,i):n},i.range=function(t){return arguments.length?(r=t,i):r},i.invertExtent=function(t){return t=r.indexOf(t),[n[t-1],n[t]]},i.copy=function(){return e(n,r)},i}([.5],[0,1])},t.scale.identity=function(){return function t(e){function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e},n.ticks=function(t){return Mo(e,t)},n.tickFormat=function(t,n){return Ao(e,t,n)},n.copy=function(){return t(e)},n}([0,1])},t.svg={},t.svg.arc=function(){var t=zo,e=Vo,n=No,r=Fo,i=Ho,a=jo,o=Bo;function s(){var s=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),u=i.apply(this,arguments)-Dt,d=a.apply(this,arguments)-Dt,h=Math.abs(d-u),f=u>d?0:1;if(c<s&&(p=c,c=s,s=p),h>=St)return l(c,f)+(s?l(s,1-f):"")+"Z";var p,g,m,v,y,b,x,_,w,k,T,M,A=0,C=0,S=[];if((v=(+o.apply(this,arguments)||0)/2)&&(m=r===Fo?Math.sqrt(s*s+c*c):+r.apply(this,arguments),f||(C*=-1),c&&(C=Rt(m/c*Math.sin(v))),s&&(A=Rt(m/s*Math.sin(v)))),c){y=c*Math.cos(u+C),b=c*Math.sin(u+C),x=c*Math.cos(d-C),_=c*Math.sin(d-C);var D=Math.abs(d-u-2*C)<=At?0:1;if(C&&Uo(y,b,x,_)===f^D){var O=(u+d)/2;y=c*Math.cos(O),b=c*Math.sin(O),x=_=null}}else y=b=0;if(s){w=s*Math.cos(d-A),k=s*Math.sin(d-A),T=s*Math.cos(u+A),M=s*Math.sin(u+A);var E=Math.abs(u-d+2*A)<=At?0:1;if(A&&Uo(w,k,T,M)===1-f^E){var L=(u+d)/2;w=s*Math.cos(L),k=s*Math.sin(L),T=M=null}}else w=k=0;if(h>Tt&&(p=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){g=s<c^f?0:1;var P=p,I=p;if(h<At){var R=null==T?[w,k]:null==x?[y,b]:li([y,b],[T,M],[x,_],[w,k]),N=y-R[0],F=b-R[1],z=x-R[0],V=_-R[1],H=1/Math.sin(Math.acos((N*z+F*V)/(Math.sqrt(N*N+F*F)*Math.sqrt(z*z+V*V)))/2),j=Math.sqrt(R[0]*R[0]+R[1]*R[1]);I=Math.min(p,(s-j)/(H-1)),P=Math.min(p,(c-j)/(H+1))}if(null!=x){var B=qo(null==T?[w,k]:[T,M],[y,b],c,P,f),U=qo([x,_],[w,k],c,P,f);p===P?S.push("M",B[0],"A",P,",",P," 0 0,",g," ",B[1],"A",c,",",c," 0 ",1-f^Uo(B[1][0],B[1][1],U[1][0],U[1][1]),",",f," ",U[1],"A",P,",",P," 0 0,",g," ",U[0]):S.push("M",B[0],"A",P,",",P," 0 1,",g," ",U[0])}else S.push("M",y,",",b);if(null!=T){var q=qo([y,b],[T,M],s,-I,f),G=qo([w,k],null==x?[y,b]:[x,_],s,-I,f);p===I?S.push("L",G[0],"A",I,",",I," 0 0,",g," ",G[1],"A",s,",",s," 0 ",f^Uo(G[1][0],G[1][1],q[1][0],q[1][1]),",",1-f," ",q[1],"A",I,",",I," 0 0,",g," ",q[0]):S.push("L",G[0],"A",I,",",I," 0 0,",g," ",q[0])}else S.push("L",w,",",k)}else S.push("M",y,",",b),null!=x&&S.push("A",c,",",c," 0 ",D,",",f," ",x,",",_),S.push("L",w,",",k),null!=T&&S.push("A",s,",",s," 0 ",E,",",1-f," ",T,",",M);return S.push("Z"),S.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=pe(e),s):t},s.outerRadius=function(t){return arguments.length?(e=pe(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=pe(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==Fo?Fo:pe(t),s):r},s.startAngle=function(t){return arguments.length?(i=pe(t),s):i},s.endAngle=function(t){return arguments.length?(a=pe(t),s):a},s.padAngle=function(t){return arguments.length?(o=pe(t),s):o},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Dt;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Fo="auto";function zo(t){return t.innerRadius}function Vo(t){return t.outerRadius}function Ho(t){return t.startAngle}function jo(t){return t.endAngle}function Bo(t){return t&&t.padAngle}function Uo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function qo(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,c=-s*a,u=t[0]+l,d=t[1]+c,h=e[0]+l,f=e[1]+c,p=(u+h)/2,g=(d+f)/2,m=h-u,v=f-d,y=m*m+v*v,b=n-r,x=u*f-h*d,_=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),w=(x*v-m*_)/y,k=(-x*m-v*_)/y,T=(x*v+m*_)/y,M=(-x*m+v*_)/y,A=w-p,C=k-g,S=T-p,D=M-g;return A*A+C*C>S*S+D*D&&(w=T,k=M),[[w-l,k-c],[w*n/b,k*n/b]]}function Go(t){var e=ni,n=ri,r=Wn,i=Wo,a=i.key,o=.7;function s(a){var s,l=[],c=[],u=-1,d=a.length,h=pe(e),f=pe(n);function p(){l.push("M",i(t(c),o))}for(;++u<d;)r.call(this,s=a[u],u)?c.push([+h.call(this,s,u),+f.call(this,s,u)]):c.length&&(p(),c=[]);return c.length&&p(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(a="function"==typeof t?i=t:(i=Zo.get(t)||Wo).key,s):a},s.tension=function(t){return arguments.length?(o=t,s):o},s}t.svg.line=function(){return Go(O)};var Zo=t.map({linear:Wo,"linear-closed":$o,step:function(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":Yo,"step-after":Xo,basis:Jo,"basis-open":function(t){if(t.length<4)return Wo(t);for(var e,n=[],r=-1,i=t.length,a=[0],o=[0];++r<3;)a.push((e=t[r])[0]),o.push(e[1]);for(n.push(ts(rs,a)+","+ts(rs,o)),--r;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),is(n,a,o);return n.join("")},"basis-closed":function(t){for(var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];++r<4;)o.push((n=t[r%i])[0]),s.push(n[1]);for(e=[ts(rs,o),",",ts(rs,s)],--r;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),is(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,c=-1;++c<=n;)(r=t[c])[0]=e*r[0]+(1-e)*(a+(i=c/n)*s),r[1]=e*r[1]+(1-e)*(o+i*l);return Jo(t)},cardinal:function(t,e){return t.length<3?Wo(t):t[0]+Qo(t,Ko(t,e))},"cardinal-open":function(t,e){return t.length<4?Wo(t):t[1]+Qo(t.slice(1,-1),Ko(t,e))},"cardinal-closed":function(t,e){return t.length<3?$o(t):t[0]+Qo((t.push(t[0]),t),Ko([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Wo(t):t[0]+Qo(t,function(t){for(var e,n,r,i,a=[],o=function(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=as(i,a);++e<n;)r[e]=(o+(o=as(i=a,a=t[e+1])))/2;return r[e]=o,r}(t),s=-1,l=t.length-1;++s<l;)e=as(t[s],t[s+1]),y(e)<Tt?o[s]=o[s+1]=0:(i=(n=o[s]/e)*n+(r=o[s+1]/e)*r)>9&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r);for(s=-1;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(t))}});function Wo(t){return t.length>1?t.join("L"):t+"Z"}function $o(t){return t.join("L")+"Z"}function Yo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Xo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Qo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Wo(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],l=2),e.length>1){a=t[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-(s=e[1])[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,l++)r+="S"+((a=t[l])[0]-(s=e[c])[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var u=t[l];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+u[0]+","+u[1]}return r}function Ko(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,r.push([i*((o=t[s])[0]-n[0]),i*(o[1]-n[1])]);return r}function Jo(t){if(t.length<3)return Wo(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",ts(rs,o),",",ts(rs,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),is(l,o,s);return t.pop(),l.push("L",r),l.join("")}function ts(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Zo.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var es=[0,2/3,1/3,0],ns=[0,1/3,2/3,0],rs=[0,1/6,2/3,1/6];function is(t,e,n){t.push("C",ts(es,e),",",ts(es,n),",",ts(ns,e),",",ts(ns,n),",",ts(rs,e),",",ts(rs,n))}function as(t,e){return(e[1]-t[1])/(e[0]-t[0])}function os(t){for(var e,n,r,i=-1,a=t.length;++i<a;)n=(e=t[i])[0],r=e[1]-Dt,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function ss(t){var e=ni,n=ni,r=0,i=ri,a=Wn,o=Wo,s=o.key,l=o,c="L",u=.7;function d(s){var d,h,f,p=[],g=[],m=[],v=-1,y=s.length,b=pe(e),x=pe(r),_=e===n?function(){return h}:pe(n),w=r===i?function(){return f}:pe(i);function k(){p.push("M",o(t(m),u),c,l(t(g.reverse()),u),"Z")}for(;++v<y;)a.call(this,d=s[v],v)?(g.push([h=+b.call(this,d,v),f=+x.call(this,d,v)]),m.push([+_.call(this,d,v),+w.call(this,d,v)])):g.length&&(k(),g=[],m=[]);return g.length&&k(),p.length?p.join(""):null}return d.x=function(t){return arguments.length?(e=n=t,d):n},d.x0=function(t){return arguments.length?(e=t,d):e},d.x1=function(t){return arguments.length?(n=t,d):n},d.y=function(t){return arguments.length?(r=i=t,d):i},d.y0=function(t){return arguments.length?(r=t,d):r},d.y1=function(t){return arguments.length?(i=t,d):i},d.defined=function(t){return arguments.length?(a=t,d):a},d.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=Zo.get(t)||Wo).key,l=o.reverse||o,c=o.closed?"M":"L",d):s},d.tension=function(t){return arguments.length?(u=t,d):u},d}function ls(t){return t.radius}function cs(t){return[t.x,t.y]}function us(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Dt;return[n*Math.cos(r),n*Math.sin(r)]}}function ds(){return 64}function hs(){return"circle"}function fs(t){var e=Math.sqrt(t/At);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}t.svg.line.radial=function(){var t=Go(os);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Yo.reverse=Xo,Xo.reverse=Yo,t.svg.area=function(){return ss(O)},t.svg.area.radial=function(){var t=ss(os);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},t.svg.chord=function(){var t=Br,e=Ur,n=ls,r=Ho,i=jo;function a(n,r){var i,a,c=o(this,t,n,r),u=o(this,e,n,r);return"M"+c.p0+s(c.r,c.p1,c.a1-c.a0)+((i=c).a0==(a=u).a0&&i.a1==a.a1?l(0,0,0,c.p0):l(0,0,0,u.p0)+s(u.r,u.p1,u.a1-u.a0)+l(0,0,0,c.p0))+"Z"}function o(t,e,a,o){var s=e.call(t,a,o),l=n.call(t,s,o),c=r.call(t,s,o)-Dt,u=i.call(t,s,o)-Dt;return{r:l,a0:c,a1:u,p0:[l*Math.cos(c),l*Math.sin(c)],p1:[l*Math.cos(u),l*Math.sin(u)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>At)+",1 "+e}function l(t,e,n,r){return"Q 0,0 "+r}return a.radius=function(t){return arguments.length?(n=pe(t),a):n},a.source=function(e){return arguments.length?(t=pe(e),a):t},a.target=function(t){return arguments.length?(e=pe(t),a):e},a.startAngle=function(t){return arguments.length?(r=pe(t),a):r},a.endAngle=function(t){return arguments.length?(i=pe(t),a):i},a},t.svg.diagonal=function(){var t=Br,e=Ur,n=cs;function r(r,i){var a=t.call(this,r,i),o=e.call(this,r,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(e){return arguments.length?(t=pe(e),r):t},r.target=function(t){return arguments.length?(e=pe(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=cs,r=e.projection;return e.projection=function(t){return arguments.length?r(us(n=t)):n},e},t.svg.symbol=function(){var t=hs,e=ds;function n(n,r){return(ps.get(t.call(this,n,r))||fs)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=pe(e),n):t},n.size=function(t){return arguments.length?(e=pe(t),n):e},n};var ps=t.map({circle:fs,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ms)),n=e*ms;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/gs),n=e*gs/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/gs),n=e*gs/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});t.svg.symbolTypes=ps.keys();var gs=Math.sqrt(3),ms=Math.tan(30*Ot);Z.transition=function(t){for(var e,n,r=xs||++ks,i=As(t),a=[],o=_s||{time:Date.now(),ease:ca,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&Cs(n,u,i,r,o),e.push(n)}return bs(a,i,r)},Z.interrupt=function(t){return this.each(null==t?vs:ys(As(t)))};var vs=ys(As());function ys(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function bs(t,e,n){return j(t,ws),t.namespace=e,t.id=n,t}var xs,_s,ws=[],ks=0;function Ts(t,e,n,r){var i=t.id,a=t.namespace;return ut(t,"function"==typeof n?function(t,o,s){t[a][i].tween.set(e,r(n.call(t,t.__data__,o,s)))}:(n=r(n),function(t){t[a][i].tween.set(e,n)}))}function Ms(t){return null==t&&(t=""),function(){this.textContent=t}}function As(t){return null==t?"__transition__":"__transition_"+t+"__"}function Cs(t,e,n,r,i){var a,o,s,l,c,u=t[n]||(t[n]={active:0,count:0}),d=u[r];function h(n){var i=u.active,h=u[i];for(var p in h&&(h.timer.c=null,h.timer.t=NaN,--u.count,delete u[i],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),u)if(+p<r){var g=u[p];g.timer.c=null,g.timer.t=NaN,--u.count,delete u[p]}o.c=f,we(function(){return o.c&&f(n||1)&&(o.c=null,o.t=NaN),1},0,a),u.active=r,d.event&&d.event.start.call(t,t.__data__,e),c=[],d.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&c.push(r)}),l=d.ease,s=d.duration}function f(i){for(var a=i/s,o=l(a),h=c.length;h>0;)c[--h].call(t,o);if(a>=1)return d.event&&d.event.end.call(t,t.__data__,e),--u.count?delete u[r]:delete t[n],1}d||(o=we(function(t){var e=d.delay;if(o.t=e+a,e<=t)return h(t-e);o.c=h},0,a=i.time),d=u[r]={tween:new _,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++u.count)}ws.call=Z.call,ws.empty=Z.empty,ws.node=Z.node,ws.size=Z.size,t.transition=function(e,n){return e&&e.transition?xs?e.transition(n):e:t.selection().transition(e)},t.transition.prototype=ws,ws.select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=W(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=t.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),Cs(n,u,a,i,r[a][i]),e.push(n)):e.push(null)}return bs(o,a,i)},ws.selectAll=function(t){var e,n,r,i,a,o=this.id,s=this.namespace,l=[];t=$(t);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],h=-1,f=d.length;++h<f;)if(r=d[h]){a=r[s][o],n=t.call(r,r.__data__,h,c),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Cs(i,p,s,o,a),e.push(i)}return bs(l,s,o)},ws.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=lt(t));for(var i=0,a=this.length;i<a;i++){r.push(e=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(n=o[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return bs(r,this.namespace,this.id)},ws.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):ut(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},ws.attr=function(e,n){if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var r="transform"==e?xa:Ji,i=t.ns.qualify(e);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function s(t){return null==t?a:(t+="",function(){var e,n=this.getAttribute(i);return n!==t&&(e=r(n,t),function(t){this.setAttribute(i,e(t))})})}function l(t){return null==t?o:(t+="",function(){var e,n=this.getAttributeNS(i.space,i.local);return n!==t&&(e=r(n,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}return Ts(this,"attr."+e,n,i.local?l:s)},ws.attrTween=function(e,n){var r=t.ns.qualify(e);return this.tween("attr."+e,r.local?function(t,e){var i=n.call(this,t,e,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}:function(t,e){var i=n.call(this,t,e,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}})},ws.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}function a(e){return null==e?i:(e+="",function(){var r,i=o(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Ji(i,e),function(e){this.style.setProperty(t,r(e),n)})})}return Ts(this,"style."+t,e,a)},ws.styleTween=function(t,e,n){function r(r,i){var a=e.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},ws.text=function(t){return Ts(this,"text",t,Ms)},ws.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},ws.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),ut(this,function(t){t[r][n].ease=e}))},ws.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:ut(this,"function"==typeof t?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))},ws.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:ut(this,"function"==typeof t?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},ws.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var a=_s,o=xs;try{xs=r,ut(this,function(t,n,a){_s=t[i][r],e.call(t,t.__data__,n,a)})}finally{_s=a,xs=o}}else ut(this,function(a){var o=a[i][r];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,n)});return this},ws.transition=function(){for(var t,e,n,r=this.id,i=++ks,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(t=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(e=c[u])&&Cs(e,u,a,i,{time:(n=e[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return bs(o,a,i)},t.svg.axis=function(){var e,n=t.scale.linear(),i=Ss,a=6,o=6,s=3,l=[10],c=null;function u(r){r.each(function(){var r,u=t.select(this),d=this.__chart__||n,h=this.__chart__=n.copy(),f=null==c?h.ticks?h.ticks.apply(h,l):h.domain():c,p=null==e?h.tickFormat?h.tickFormat.apply(h,l):O:e,g=u.selectAll(".tick").data(f,h),m=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Tt),v=t.transition(g.exit()).style("opacity",Tt).remove(),y=t.transition(g.order()).style("opacity",1),b=Math.max(a,0)+s,x=mo(h),_=u.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),t.transition(_));m.append("line"),m.append("text");var k,T,M,A,C=m.select("line"),S=y.select("line"),D=g.select("text").text(p),E=m.select("text"),L=y.select("text"),P="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(r=Os,k="x",M="y",T="x2",A="y2",D.attr("dy",P<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+P*o+"V0H"+x[1]+"V"+P*o)):(r=Es,k="y",M="x",T="y2",A="x2",D.attr("dy",".32em").style("text-anchor",P<0?"end":"start"),w.attr("d","M"+P*o+","+x[0]+"H0V"+x[1]+"H"+P*o)),C.attr(A,P*a),E.attr(M,P*b),S.attr(T,0).attr(A,P*a),L.attr(k,0).attr(M,P*b),h.rangeBand){var I=h,R=I.rangeBand()/2;d=h=function(t){return I(t)+R}}else d.rangeBand?d=h:v.call(r,h,d);m.call(r,d,h),y.call(r,h,h)})}return u.scale=function(t){return arguments.length?(n=t,u):n},u.orient=function(t){return arguments.length?(i=t in Ds?t+"":Ss,u):i},u.ticks=function(){return arguments.length?(l=r(arguments),u):l},u.tickValues=function(t){return arguments.length?(c=t,u):c},u.tickFormat=function(t){return arguments.length?(e=t,u):e},u.tickSize=function(t){var e=arguments.length;return e?(a=+t,o=+arguments[e-1],u):a},u.innerTickSize=function(t){return arguments.length?(a=+t,u):a},u.outerTickSize=function(t){return arguments.length?(o=+t,u):o},u.tickPadding=function(t){return arguments.length?(s=+t,u):s},u.tickSubdivide=function(){return arguments.length&&u},u};var Ss="bottom",Ds={top:1,right:1,bottom:1,left:1};function Os(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Es(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}t.svg.brush=function(){var e,n,r=V(h,"brushstart","brush","brushend"),i=null,a=null,s=[0,0],l=[0,0],c=!0,u=!0,d=Ps[0];function h(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(d,O);r.exit().remove(),r.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ls[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",h.empty()?"none":null);var o,s=t.transition(e),l=t.transition(n);i&&(o=mo(i),l.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),a&&(o=mo(a),l.attr("y",o[0]).attr("height",o[1]-o[0]),g(s)),f(s)})}function f(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+s[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function g(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function m(){var d,m,v=this,y=t.select(t.event.target),b=r.of(v,arguments),x=t.select(v),_=y.datum(),w=!/^(n|s)$/.test(_)&&i,k=!/^(e|w)$/.test(_)&&a,T=y.classed("extent"),M=xt(v),A=t.mouse(v),C=t.select(o(v)).on("keydown.brush",O).on("keyup.brush",E);if(t.event.changedTouches?C.on("touchmove.brush",L).on("touchend.brush",I):C.on("mousemove.brush",L).on("mouseup.brush",I),x.interrupt().selectAll("*").interrupt(),T)A[0]=s[0]-A[0],A[1]=l[0]-A[1];else if(_){var S=+/w$/.test(_),D=+/^n/.test(_);m=[s[1-S]-A[0],l[1-D]-A[1]],A[0]=s[S],A[1]=l[D]}else t.event.altKey&&(d=A.slice());function O(){32==t.event.keyCode&&(T||(d=null,A[0]-=s[1],A[1]-=l[1],T=2),F())}function E(){32==t.event.keyCode&&2==T&&(A[0]+=s[1],A[1]+=l[1],T=0,F())}function L(){var e=t.mouse(v),n=!1;m&&(e[0]+=m[0],e[1]+=m[1]),T||(t.event.altKey?(d||(d=[(s[0]+s[1])/2,(l[0]+l[1])/2]),A[0]=s[+(e[0]<d[0])],A[1]=l[+(e[1]<d[1])]):d=null),w&&P(e,i,0)&&(p(x),n=!0),k&&P(e,a,1)&&(g(x),n=!0),n&&(f(x),b({type:"brush",mode:T?"move":"resize"}))}function P(t,r,i){var a,o,h=mo(r),f=h[0],p=h[1],g=A[i],m=i?l:s,v=m[1]-m[0];if(T&&(f-=g,p-=v+g),a=(i?u:c)?Math.max(f,Math.min(p,t[i])):t[i],T?o=(a+=g)+v:(d&&(g=Math.max(f,Math.min(p,2*d[i]-a))),g<a?(o=a,a=g):o=g),m[0]!=a||m[1]!=o)return i?n=null:e=null,m[0]=a,m[1]=o,!0}function I(){L(),x.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),t.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),L()}return h.event=function(i){i.each(function(){var i=r.of(this,arguments),a={x:s,y:l,i:e,j:n},o=this.__chart__||a;this.__chart__=a,xs?t.select(this).transition().each("start.brush",function(){e=o.i,n=o.j,s=o.x,l=o.y,i({type:"brushstart"})}).tween("brush:brush",function(){var t=ta(s,a.x),r=ta(l,a.y);return e=n=null,function(e){s=a.x=t(e),l=a.y=r(e),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=a.i,n=a.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},h.x=function(t){return arguments.length?(d=Ps[!(i=t)<<1|!a],h):i},h.y=function(t){return arguments.length?(d=Ps[!i<<1|!(a=t)],h):a},h.clamp=function(t){return arguments.length?(i&&a?(c=!!t[0],u=!!t[1]):i?c=!!t:a&&(u=!!t),h):i&&a?[c,u]:i?c:a?u:null},h.extent=function(t){var r,o,c,u,d;return arguments.length?(i&&(r=t[0],o=t[1],a&&(r=r[0],o=o[0]),e=[r,o],i.invert&&(r=i(r),o=i(o)),o<r&&(d=r,r=o,o=d),r==s[0]&&o==s[1]||(s=[r,o])),a&&(c=t[0],u=t[1],i&&(c=c[1],u=u[1]),n=[c,u],a.invert&&(c=a(c),u=a(u)),u<c&&(d=c,c=u,u=d),c==l[0]&&u==l[1]||(l=[c,u])),h):(i&&(e?(r=e[0],o=e[1]):(r=s[0],o=s[1],i.invert&&(r=i.invert(r),o=i.invert(o)),o<r&&(d=r,r=o,o=d))),a&&(n?(c=n[0],u=n[1]):(c=l[0],u=l[1],a.invert&&(c=a.invert(c),u=a.invert(u)),u<c&&(d=c,c=u,u=d))),i&&a?[[r,c],[o,u]]:i?[r,o]:a&&[c,u])},h.clear=function(){return h.empty()||(s=[0,0],l=[0,0],e=n=null),h},h.empty=function(){return!!i&&s[0]==s[1]||!!a&&l[0]==l[1]},t.rebind(h,r,"on")};var Ls={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ps=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Is=Le.format=ln.timeFormat,Rs=Is.utc,Ns=Rs("%Y-%m-%dT%H:%M:%S.%LZ");function Fs(t){return t.toISOString()}function zs(e,n,r){function i(t){return e(t)}function a(e,r){var i=(e[1]-e[0])/r,a=t.bisect(Hs,i);return a==Hs.length?[n.year,To(e.map(function(t){return t/31536e6}),r)[2]]:a?n[i/Hs[a-1]<Hs[a]/i?a-1:a]:[Us,To(e,r)[2]]}return i.invert=function(t){return Vs(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Vs)},i.nice=function(t,e){var n=i.domain(),r=go(n),o=null==t?a(r,10):"number"==typeof t&&a(r,t);function s(n){return!isNaN(n)&&!t.range(n,Vs(+n+1),e).length}return o&&(t=o[0],e=o[1]),i.domain(yo(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Vs(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Vs(+e+1);return e}}:t))},i.ticks=function(t,e){var n=go(i.domain()),r=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return r&&(t=r[0],e=r[1]),t.range(n[0],Vs(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return r},i.copy=function(){return zs(e.copy(),n,r)},wo(i,e)}function Vs(t){return new Date(t)}Is.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Fs:Ns,Fs.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Fs.toString=Ns.toString,Le.second=Ne(function(t){return new Pe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Le.seconds=Le.second.range,Le.seconds.utc=Le.second.utc.range,Le.minute=Ne(function(t){return new Pe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Le.minutes=Le.minute.range,Le.minutes.utc=Le.minute.utc.range,Le.hour=Ne(function(t){var e=t.getTimezoneOffset()/60;return new Pe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Le.hours=Le.hour.range,Le.hours.utc=Le.hour.utc.range,Le.month=Ne(function(t){return(t=Le.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Le.months=Le.month.range,Le.months.utc=Le.month.utc.range;var Hs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],js=[[Le.second,1],[Le.second,5],[Le.second,15],[Le.second,30],[Le.minute,1],[Le.minute,5],[Le.minute,15],[Le.minute,30],[Le.hour,1],[Le.hour,3],[Le.hour,6],[Le.hour,12],[Le.day,1],[Le.day,2],[Le.week,1],[Le.month,1],[Le.month,3],[Le.year,1]],Bs=Is.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Wn]]),Us={range:function(e,n,r){return t.range(Math.ceil(e/r)*r,+n,r).map(Vs)},floor:O,ceil:O};js.year=Le.year,Le.scale=function(){return zs(t.scale.linear(),js,Bs)};var qs=js.map(function(t){return[t[0].utc,t[1]]}),Gs=Rs.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Wn]]);function Zs(t){return JSON.parse(t.responseText)}function Ws(t){var e=i.createRange();return e.selectNode(i.body),e.createContextualFragment(t.responseText)}qs.year=Le.year.utc,Le.scale.utc=function(){return zs(t.scale.linear(),qs,Gs)},t.text=ge(function(t){return t.responseText}),t.json=function(t,e){return me(t,"application/json",Zs,e)},t.html=function(t,e){return me(t,"text/html",Ws,e)},t.xml=ge(function(t){return t.responseXML}),"object"==typeof e&&e.exports?e.exports=t:this.d3=t}()},{}],10:[function(t,e,n){(function(r,i){(function(){!function(t,r){"object"==typeof n&&void 0!==e?e.exports=r():t.ES6Promise=r()}(this,function(){"use strict";function e(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=0,o=void 0,s=void 0,l=function(t,e){g[a]=t,g[a+1]=e,2===(a+=2)&&(s?s(m):_())},c="undefined"!=typeof window?window:void 0,u=c||{},d=u.MutationObserver||u.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(m,1)}}var g=new Array(1e3);function m(){for(var t=0;t<a;t+=2)(0,g[t])(g[t+1]),g[t]=void 0,g[t+1]=void 0;a=0}var v,y,b,x,_=void 0;function w(t,e){var n=this,r=new this.constructor(M);void 0===r[T]&&R(r);var i=n._state;if(i){var a=arguments[i-1];l(function(){return P(i,r,a,n._result)})}else E(n,r,t,e);return r}function k(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(M);return C(e,t),e}h?_=function(){return r.nextTick(m)}:d?(y=0,b=new d(m),x=document.createTextNode(""),b.observe(x,{characterData:!0}),_=function(){x.data=y=++y%2}):f?((v=new MessageChannel).port1.onmessage=m,_=function(){return v.port2.postMessage(0)}):_=void 0===c&&"function"==typeof t?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(m)}:p()}catch(t){return p()}}():p();var T=Math.random().toString(36).substring(2);function M(){}function A(t,n,r){n.constructor===t.constructor&&r===w&&n.constructor.resolve===k?function(t,e){1===e._state?D(t,e._result):2===e._state?O(t,e._result):E(e,void 0,function(e){return C(t,e)},function(e){return O(t,e)})}(t,n):void 0===r?D(t,n):e(r)?function(t,e,n){l(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?C(t,n):D(t,n))},function(e){r||(r=!0,O(t,e))});!r&&i&&(r=!0,O(t,i))},t)}(t,n,r):D(t,n)}function C(t,e){if(t===e)O(t,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=e),null===r||"object"!==i&&"function"!==i)D(t,e);else{var n=void 0;try{n=e.then}catch(e){return void O(t,e)}A(t,e,n)}var r,i}function S(t){t._onerror&&t._onerror(t._result),L(t)}function D(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&l(L,t))}function O(t,e){void 0===t._state&&(t._state=2,t._result=e,l(S,t))}function E(t,e,n,r){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+1]=n,i[a+2]=r,0===a&&t._state&&l(L,t)}function L(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,a=t._result,o=0;o<e.length;o+=3)i=e[o+n],(r=e[o])?P(n,r,i,a):i(a);t._subscribers.length=0}}function P(t,n,r,i){var a=e(r),o=void 0,s=void 0,l=!0;if(a){try{o=r(i)}catch(t){l=!1,s=t}if(n===o)return void O(n,new TypeError("A promises callback cannot return that same promise."))}else o=i;void 0!==n._state||(a&&l?C(n,o):!1===l?O(n,s):1===t?D(n,o):2===t&&O(n,o))}var I=0;function R(t){t[T]=I++,t._state=void 0,t._result=void 0,t._subscribers=[]}var N=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(M),this.promise[T]||R(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&D(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===k){var i=void 0,a=void 0,o=!1;try{i=t.then}catch(t){o=!0,a=t}if(i===w&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===F){var s=new n(M);o?O(s,a):A(s,t,i),this._willSettleAt(s,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===t?O(r,n):this._result[e]=n),0===this._remaining&&D(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(1,e,t)},function(t){return n._settledAt(2,e,t)})},t}(),F=function(){function t(e){this[T]=I++,this._result=this._state=void 0,this._subscribers=[],M!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){C(t,e)},function(e){O(t,e)})}catch(e){O(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return F.prototype.then=w,F.all=function(t){return new N(this,t).promise},F.race=function(t){var e=this;return n(t)?new e(function(n,r){for(var i=t.length,a=0;a<i;a++)e.resolve(t[a]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},F.resolve=k,F.reject=function(t){var e=new this(M);return O(e,t),e},F._setScheduler=function(t){s=t},F._setAsap=function(t){l=t},F._asap=l,F.polyfill=function(){var t=void 0;if(void 0!==i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=F},F.Promise=F,F})}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:57}],11:[function(t,e,n){"use strict";var r=t("is-string-blank");e.exports=function(t){var e=typeof t;if("string"===e){var n=t;if(0==(t=+t)&&r(n))return!1}else if("number"!==e)return!1;return t-t<1}},{"is-string-blank":46}],12:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15];return t[0]=s*(h*v-f*m)-d*(l*v-c*m)+g*(l*f-c*h),t[1]=-(r*(h*v-f*m)-d*(i*v-a*m)+g*(i*f-a*h)),t[2]=r*(l*v-c*m)-s*(i*v-a*m)+g*(i*c-a*l),t[3]=-(r*(l*f-c*h)-s*(i*f-a*h)+d*(i*c-a*l)),t[4]=-(o*(h*v-f*m)-u*(l*v-c*m)+p*(l*f-c*h)),t[5]=n*(h*v-f*m)-u*(i*v-a*m)+p*(i*f-a*h),t[6]=-(n*(l*v-c*m)-o*(i*v-a*m)+p*(i*c-a*l)),t[7]=n*(l*f-c*h)-o*(i*f-a*h)+u*(i*c-a*l),t[8]=o*(d*v-f*g)-u*(s*v-c*g)+p*(s*f-c*d),t[9]=-(n*(d*v-f*g)-u*(r*v-a*g)+p*(r*f-a*d)),t[10]=n*(s*v-c*g)-o*(r*v-a*g)+p*(r*c-a*s),t[11]=-(n*(s*f-c*d)-o*(r*f-a*d)+u*(r*c-a*s)),t[12]=-(o*(d*m-h*g)-u*(s*m-l*g)+p*(s*h-l*d)),t[13]=n*(d*m-h*g)-u*(r*m-i*g)+p*(r*h-i*d),t[14]=-(n*(s*m-l*g)-o*(r*m-i*g)+p*(r*l-i*s)),t[15]=n*(s*h-l*d)-o*(r*h-i*d)+u*(r*l-i*s),t}},{}],13:[function(t,e,n){e.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],14:[function(t,e,n){e.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],15:[function(t,e,n){e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],16:[function(t,e,n){e.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*o-n*a)*(d*m-h*g)-(e*s-r*a)*(u*m-h*p)+(e*l-i*a)*(u*g-d*p)+(n*s-r*o)*(c*m-h*f)-(n*l-i*o)*(c*g-d*f)+(r*l-i*s)*(c*p-u*f)}},{}],17:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,d=r*s,h=i*o,f=i*s,p=i*l,g=a*o,m=a*s,v=a*l;return t[0]=1-d-p,t[1]=u+v,t[2]=h-m,t[3]=0,t[4]=u-v,t[5]=1-c-p,t[6]=f+g,t[7]=0,t[8]=h+m,t[9]=f-g,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],18:[function(t,e,n){e.exports=function(t,e,n){var r,i,a,o=n[0],s=n[1],l=n[2],c=Math.sqrt(o*o+s*s+l*l);return Math.abs(c)<1e-6?null:(o*=c=1/c,s*=c,l*=c,r=Math.sin(e),i=Math.cos(e),t[0]=o*o*(a=1-i)+i,t[1]=s*o*a+l*r,t[2]=l*o*a-s*r,t[3]=0,t[4]=o*s*a-l*r,t[5]=s*s*a+i,t[6]=l*s*a+o*r,t[7]=0,t[8]=o*l*a+s*r,t[9]=s*l*a-o*r,t[10]=l*l*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}},{}],19:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,l=i+i,c=a+a,u=r*s,d=r*l,h=r*c,f=i*l,p=i*c,g=a*c,m=o*s,v=o*l,y=o*c;return t[0]=1-(f+g),t[1]=d+y,t[2]=h-v,t[3]=0,t[4]=d-y,t[5]=1-(u+g),t[6]=p+m,t[7]=0,t[8]=h+v,t[9]=p-m,t[10]=1-(u+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}},{}],20:[function(t,e,n){e.exports=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],21:[function(t,e,n){e.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},{}],22:[function(t,e,n){e.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],23:[function(t,e,n){e.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],24:[function(t,e,n){e.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],25:[function(t,e,n){e.exports=function(t,e,n,r,i,a,o){var s=1/(n-e),l=1/(i-r),c=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}},{}],26:[function(t,e,n){e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],27:[function(t,e,n){e.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotation:t("./fromRotation"),fromRotationTranslation:t("./fromRotationTranslation"),fromScaling:t("./fromScaling"),fromTranslation:t("./fromTranslation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":12,"./clone":13,"./copy":14,"./create":15,"./determinant":16,"./fromQuat":17,"./fromRotation":18,"./fromRotationTranslation":19,"./fromScaling":20,"./fromTranslation":21,"./fromXRotation":22,"./fromYRotation":23,"./fromZRotation":24,"./frustum":25,"./identity":26,"./invert":28,"./lookAt":29,"./multiply":30,"./ortho":31,"./perspective":32,"./perspectiveFromFieldOfView":33,"./rotate":34,"./rotateX":35,"./rotateY":36,"./rotateZ":37,"./scale":38,"./str":39,"./translate":40,"./transpose":41}],28:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*s-r*o,b=n*l-i*o,x=n*c-a*o,_=r*l-i*s,w=r*c-a*s,k=i*c-a*l,T=u*g-d*p,M=u*m-h*p,A=u*v-f*p,C=d*m-h*g,S=d*v-f*g,D=h*v-f*m,O=y*D-b*S+x*C+_*A-w*M+k*T;return O?(t[0]=(s*D-l*S+c*C)*(O=1/O),t[1]=(i*S-r*D-a*C)*O,t[2]=(g*k-m*w+v*_)*O,t[3]=(h*w-d*k-f*_)*O,t[4]=(l*A-o*D-c*M)*O,t[5]=(n*D-i*A+a*M)*O,t[6]=(m*x-p*k-v*b)*O,t[7]=(u*k-h*x+f*b)*O,t[8]=(o*S-s*A+c*T)*O,t[9]=(r*A-n*S-a*T)*O,t[10]=(p*w-g*x+v*y)*O,t[11]=(d*x-u*w-f*y)*O,t[12]=(s*M-o*C-l*T)*O,t[13]=(n*C-r*M+i*T)*O,t[14]=(g*b-p*_-m*y)*O,t[15]=(u*_-d*b+h*y)*O,t):null}},{}],29:[function(t,e,n){var r=t("./identity");e.exports=function(t,e,n,i){var a,o,s,l,c,u,d,h,f,p,g=e[0],m=e[1],v=e[2],y=i[0],b=i[1],x=i[2],_=n[0],w=n[1],k=n[2];return Math.abs(g-_)<1e-6&&Math.abs(m-w)<1e-6&&Math.abs(v-k)<1e-6?r(t):(d=g-_,h=m-w,f=v-k,a=b*(f*=p=1/Math.sqrt(d*d+h*h+f*f))-x*(h*=p),o=x*(d*=p)-y*f,s=y*h-b*d,(p=Math.sqrt(a*a+o*o+s*s))?(a*=p=1/p,o*=p,s*=p):(a=0,o=0,s=0),l=h*s-f*o,c=f*a-d*s,u=d*o-h*a,(p=Math.sqrt(l*l+c*c+u*u))?(l*=p=1/p,c*=p,u*=p):(l=0,c=0,u=0),t[0]=a,t[1]=l,t[2]=d,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=u,t[10]=f,t[11]=0,t[12]=-(a*g+o*m+s*v),t[13]=-(l*g+c*m+u*v),t[14]=-(d*g+h*m+f*v),t[15]=1,t)}},{"./identity":26}],30:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=n[0],x=n[1],_=n[2],w=n[3];return t[0]=b*r+x*s+_*d+w*g,t[1]=b*i+x*l+_*h+w*m,t[2]=b*a+x*c+_*f+w*v,t[3]=b*o+x*u+_*p+w*y,t[4]=(b=n[4])*r+(x=n[5])*s+(_=n[6])*d+(w=n[7])*g,t[5]=b*i+x*l+_*h+w*m,t[6]=b*a+x*c+_*f+w*v,t[7]=b*o+x*u+_*p+w*y,t[8]=(b=n[8])*r+(x=n[9])*s+(_=n[10])*d+(w=n[11])*g,t[9]=b*i+x*l+_*h+w*m,t[10]=b*a+x*c+_*f+w*v,t[11]=b*o+x*u+_*p+w*y,t[12]=(b=n[12])*r+(x=n[13])*s+(_=n[14])*d+(w=n[15])*g,t[13]=b*i+x*l+_*h+w*m,t[14]=b*a+x*c+_*f+w*v,t[15]=b*o+x*u+_*p+w*y,t}},{}],31:[function(t,e,n){e.exports=function(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(o+a)*c,t[15]=1,t}},{}],32:[function(t,e,n){e.exports=function(t,e,n,r,i){var a=1/Math.tan(e/2),o=1/(r-i);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*o,t[15]=0,t}},{}],33:[function(t,e,n){e.exports=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*l*.5,t[9]=(i-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}},{}],34:[function(t,e,n){e.exports=function(t,e,n,r){var i,a,o,s,l,c,u,d,h,f,p,g,m,v,y,b,x,_,w,k,T,M,A,C,S=r[0],D=r[1],O=r[2],E=Math.sqrt(S*S+D*D+O*O);return Math.abs(E)<1e-6?null:(S*=E=1/E,D*=E,O*=E,i=Math.sin(n),a=Math.cos(n),l=e[1],c=e[2],u=e[3],h=e[5],f=e[6],p=e[7],m=e[9],v=e[10],y=e[11],w=S*D*(o=1-a)-O*i,k=D*D*o+a,T=O*D*o+S*i,M=S*O*o+D*i,A=D*O*o-S*i,C=O*O*o+a,t[0]=(s=e[0])*(b=S*S*o+a)+(d=e[4])*(x=D*S*o+O*i)+(g=e[8])*(_=O*S*o-D*i),t[1]=l*b+h*x+m*_,t[2]=c*b+f*x+v*_,t[3]=u*b+p*x+y*_,t[4]=s*w+d*k+g*T,t[5]=l*w+h*k+m*T,t[6]=c*w+f*k+v*T,t[7]=u*w+p*k+y*T,t[8]=s*M+d*A+g*C,t[9]=l*M+h*A+m*C,t[10]=c*M+f*A+v*C,t[11]=u*M+p*A+y*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}},{}],35:[function(t,e,n){e.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*r,t[5]=o*i+u*r,t[6]=s*i+d*r,t[7]=l*i+h*r,t[8]=c*i-a*r,t[9]=u*i-o*r,t[10]=d*i-s*r,t[11]=h*i-l*r,t}},{}],36:[function(t,e,n){e.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*r,t[1]=o*i-u*r,t[2]=s*i-d*r,t[3]=l*i-h*r,t[8]=a*r+c*i,t[9]=o*r+u*i,t[10]=s*r+d*i,t[11]=l*r+h*i,t}},{}],37:[function(t,e,n){e.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*r,t[1]=o*i+u*r,t[2]=s*i+d*r,t[3]=l*i+h*r,t[4]=c*i-a*r,t[5]=u*i-o*r,t[6]=d*i-s*r,t[7]=h*i-l*r,t}},{}],38:[function(t,e,n){e.exports=function(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],39:[function(t,e,n){e.exports=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},{}],40:[function(t,e,n){e.exports=function(t,e,n){var r,i,a,o,s,l,c,u,d,h,f,p,g=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=r=e[0],t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=r*g+s*m+d*v+e[12],t[13]=i*g+l*m+h*v+e[13],t[14]=a*g+c*m+f*v+e[14],t[15]=o*g+u*m+p*v+e[15]),t}},{}],41:[function(t,e,n){e.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},{}],42:[function(t,e,n){(function(n){(function(){"use strict";var r,i=t("is-browser");r="function"==typeof n.matchMedia?!n.matchMedia("(hover: none)").matches:i,e.exports=r}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":44}],43:[function(t,e,n){"use strict";var r=t("is-browser");e.exports=r&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":44}],44:[function(t,e,n){e.exports=!0},{}],45:[function(t,e,n){"use strict";e.exports=a,e.exports.isMobile=a,e.exports.default=a;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(t){t||(t={});var e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var n=t.tablet?i.test(e):r.test(e);return!n&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(n=!0),n}},{}],46:[function(t,e,n){"use strict";e.exports=function(t){for(var e,n=t.length,r=0;r<n;r++)if(((e=t.charCodeAt(r))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},{}],47:[function(t,e,n){var r={left:0,top:0};e.exports=function(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var i,a=t.clientX||0,o=t.clientY||0,s=(i=e)===window||i===document||i===document.body?r:i.getBoundingClientRect();return n[0]=a-s.left,n[1]=o-s.top,n}},{}],48:[function(t,e,n){e.exports=function(t){var e=[];return t.replace(i,function(t,n,i){var o=n.toLowerCase();for(i=function(t){var e=t.match(a);return e?e.map(Number):[]}(i),"m"==o&&i.length>2&&(e.push([n].concat(i.splice(0,2))),o="l",n="m"==n?"l":"L");;){if(i.length==r[o])return i.unshift(n),e.push(i);if(i.length<r[o])throw new Error("malformed path data");e.push([n].concat(i.splice(0,r[o])))}}),e};var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],49:[function(t,e,n){var r,i=t("./lib/build-log"),a=t("./lib/epsilon"),o=t("./lib/intersecter"),s=t("./lib/segment-chainer"),l=t("./lib/segment-selector"),c=t("./lib/geojson"),u=!1,d=a();function h(t,e,n){var i=r.segments(t),a=r.segments(e),o=n(r.combine(i,a));return r.polygon(o)}r={buildLog:function(t){return!0===t?u=i():!1===t&&(u=!1),!1!==u&&u.list},epsilon:function(t){return d.epsilon(t)},segments:function(t){var e=o(!0,d,u);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:o(!1,d,u).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:l.union(t.combined,u),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:l.intersect(t.combined,u),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:l.difference(t.combined,u),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:l.differenceRev(t.combined,u),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:l.xor(t.combined,u),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:s(t.segments,d,u),inverted:t.inverted}},polygonFromGeoJSON:function(t){return c.toPolygon(r,t)},polygonToGeoJSON:function(t){return c.fromPolygon(r,d,t)},union:function(t,e){return h(t,e,r.selectUnion)},intersect:function(t,e){return h(t,e,r.selectIntersect)},difference:function(t,e){return h(t,e,r.selectDifference)},differenceRev:function(t,e){return h(t,e,r.selectDifferenceRev)},xor:function(t,e){return h(t,e,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),e.exports=r},{"./lib/build-log":50,"./lib/epsilon":51,"./lib/geojson":52,"./lib/intersecter":53,"./lib/segment-chainer":55,"./lib/segment-selector":56}],50:[function(t,e,n){e.exports=function(){var t,e=0,n=!1;function r(e,n){return t.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return r("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return r("div_seg",{seg:t,pt:e}),r("chop",{seg:t,pt:e})},statusRemove:function(t){return r("pop_seg",{seg:t})},segmentUpdate:function(t){return r("seg_update",{seg:t})},segmentNew:function(t,e){return r("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return r("rem_seg",{seg:t})},tempStatus:function(t,e,n){return r("temp_status",{seg:t,above:e,below:n})},rewind:function(t){return r("rewind",{seg:t})},status:function(t,e,n){return r("status",{seg:t,above:e,below:n})},vert:function(e){return e===n?t:(n=e,r("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),r("log",{txt:t})},reset:function(){return r("reset")},selected:function(t){return r("selected",{segs:t})},chainStart:function(t){return r("chain_start",{seg:t})},chainRemoveHead:function(t,e){return r("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return r("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return r("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return r("chain_match",{index:t})},chainClose:function(t){return r("chain_close",{index:t})},chainAddHead:function(t,e){return r("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return r("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return r("chain_con",{index1:t,index2:e})},chainReverse:function(t){return r("chain_rev",{index:t})},chainJoin:function(t,e){return r("chain_join",{index1:t,index2:e})},done:function(){return r("done")}}}},{}],51:[function(t,e,n){e.exports=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,n,r){var i=n[0],a=n[1];return(r[0]-i)*(e[1]-a)-(r[1]-a)*(e[0]-i)>=-t},pointBetween:function(e,n,r){var i=r[0]-n[0],a=r[1]-n[1],o=(e[0]-n[0])*i+(e[1]-n[1])*a;return!(o<t||o-(i*i+a*a)>-t)},pointsSameX:function(e,n){return Math.abs(e[0]-n[0])<t},pointsSameY:function(e,n){return Math.abs(e[1]-n[1])<t},pointsSame:function(t,n){return e.pointsSameX(t,n)&&e.pointsSameY(t,n)},pointsCompare:function(t,n){return e.pointsSameX(t,n)?e.pointsSameY(t,n)?0:t[1]<n[1]?-1:1:t[0]<n[0]?-1:1},pointsCollinear:function(e,n,r){return Math.abs((e[0]-n[0])*(n[1]-r[1])-(n[0]-r[0])*(e[1]-n[1]))<t},linesIntersect:function(e,n,r,i){var a=n[0]-e[0],o=n[1]-e[1],s=i[0]-r[0],l=i[1]-r[1],c=a*l-o*s;if(Math.abs(c)<t)return!1;var u=e[0]-r[0],d=e[1]-r[1],h=(s*d-l*u)/c,f=(a*d-o*u)/c,p={alongA:0,alongB:0,pt:[e[0]+h*a,e[1]+h*o]};return p.alongA=h<=-t?-2:h<t?-1:h-1<=-t?0:h-1<t?1:2,p.alongB=f<=-t?-2:f<t?-1:f-1<=-t?0:f-1<t?1:2,p},pointInsideRegion:function(e,n){for(var r=e[0],i=e[1],a=n[n.length-1][0],o=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var c=n[l][0],u=n[l][1];u-i>t!=o-i>t&&(a-c)*(i-u)/(o-u)+c-r>t&&(s=!s),a=c,o=u}return s}};return e}},{}],52:[function(t,e,n){var r={toPolygon:function(t,e){function n(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function n(e){var n=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[n]})}for(var r=n(e[0]),i=1;i<e.length;i++)r=t.selectDifference(t.combine(r,n(e[i])));return r}if("Polygon"===e.type)return t.polygon(n(e.coordinates));if("MultiPolygon"===e.type){for(var r=t.segments({inverted:!1,regions:[]}),i=0;i<e.coordinates.length;i++)r=t.selectUnion(t.combine(r,n(e.coordinates[i])));return t.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,n){function r(t,n){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],n)}function i(t){return{region:t,children:[]}}n=t.polygon(t.segments(n));var a=i(null);function o(t,e){for(var n=0;n<t.children.length;n++)if(r(e,(s=t.children[n]).region))return void o(s,e);var a=i(e);for(n=0;n<t.children.length;n++){var s;r((s=t.children[n]).region,e)&&(a.children.push(s),t.children.splice(n,1),n--)}t.children.push(a)}for(var s=0;s<n.regions.length;s++){var l=n.regions[s];l.length<3||o(a,l)}function c(t,e){for(var n=0,r=t[t.length-1][0],i=t[t.length-1][1],a=[],o=0;o<t.length;o++){var s=t[o][0],l=t[o][1];a.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==e&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var u=[];function d(t){var e=[c(t.region,!1)];u.push(e);for(var n=0;n<t.children.length;n++)e.push(h(t.children[n]))}function h(t){for(var e=0;e<t.children.length;e++)d(t.children[e]);return c(t.region,!0)}for(s=0;s<a.children.length;s++)d(a.children[s]);return u.length<=0?{type:"Polygon",coordinates:[]}:1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}};e.exports=r},{}],53:[function(t,e,n){var r=t("./linked-list");e.exports=function(t,e,n){function i(t,e,r){return{id:n?n.segmentId():-1,start:t,end:e,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var a=r.create();function o(t,n){a.insertBefore(t,function(r){return function(t,n,r,i,a,o){var s=e.pointsCompare(n,a);return 0!==s?s:e.pointsSame(r,o)?0:t!==i?t?1:-1:e.pointAboveOrOnLine(r,i?a:o,i?o:a)?1:-1}(t.isStart,t.pt,n,r.isStart,r.pt,r.other.pt)<0})}function s(t,e){var n=function(t,e){var n=r.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return o(n,t.end),n}(t,e);return function(t,e,n){var i=r.node({isStart:!1,pt:e.end,seg:e,primary:n,other:t,status:null});t.other=i,o(i,t.pt)}(n,t,e),n}function l(t,e){var r=i(e,t.seg.end,t.seg);return function(t,e){n&&n.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,o(t.other,t.pt)}(t,e),s(r,t.primary)}function c(i,o){var s=r.create();function c(t){return s.findTransition(function(n){var r,i,a,o,s,l;return o=(r=t).seg.end,(e.pointsCollinear(a=r.seg.start,s=(i=n.ev).seg.start,l=i.seg.end)?e.pointsCollinear(o,s,l)||e.pointAboveOrOnLine(o,s,l)?1:-1:e.pointAboveOrOnLine(a,s,l)?1:-1)>0})}function u(t,r){var i=t.seg,a=r.seg,o=i.start,s=i.end,c=a.start,u=a.end;n&&n.checkIntersection(i,a);var d=e.linesIntersect(o,s,c,u);if(!1===d){if(!e.pointsCollinear(o,s,c))return!1;if(e.pointsSame(o,u)||e.pointsSame(s,c))return!1;var h=e.pointsSame(o,c),f=e.pointsSame(s,u);if(h&&f)return r;var p=!h&&e.pointBetween(o,c,u),g=!f&&e.pointBetween(s,c,u);if(h)return g?l(r,s):l(t,u),r;p&&(f||(g?l(r,s):l(t,u)),l(r,o))}else 0===d.alongA&&(-1===d.alongB?l(t,c):0===d.alongB?l(t,d.pt):1===d.alongB&&l(t,u)),0===d.alongB&&(-1===d.alongA?l(r,o):0===d.alongA?l(r,d.pt):1===d.alongA&&l(r,s));return!1}for(var d=[];!a.isEmpty();){var h=a.getHead();if(n&&n.vert(h.pt[0]),h.isStart){n&&n.segmentNew(h.seg,h.primary);var f=c(h),p=f.before?f.before.ev:null,g=f.after?f.after.ev:null;function m(){if(p){var t=u(h,p);if(t)return t}return!!g&&u(h,g)}n&&n.tempStatus(h.seg,!!p&&p.seg,!!g&&g.seg);var v,y,b=m();if(b&&(t?(y=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below)&&(b.seg.myFill.above=!b.seg.myFill.above):b.seg.otherFill=h.seg.myFill,n&&n.segmentUpdate(b.seg),h.other.remove(),h.remove()),a.getHead()!==h){n&&n.rewind(h.seg);continue}t?(y=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below,h.seg.myFill.below=g?g.seg.myFill.above:i,h.seg.myFill.above=y?!h.seg.myFill.below:h.seg.myFill.below):null===h.seg.otherFill&&(h.seg.otherFill={above:v=g?h.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:h.primary?o:i,below:v}),n&&n.status(h.seg,!!p&&p.seg,!!g&&g.seg),h.other.status=f.insert(r.node({ev:h}))}else{var x=h.status;if(null===x)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(x.prev)&&s.exists(x.next)&&u(x.prev.ev,x.next.ev),n&&n.statusRemove(x.ev.seg),x.remove(),!h.primary){var _=h.seg.myFill;h.seg.myFill=h.seg.otherFill,h.seg.otherFill=_}d.push(h.seg)}a.getHead().remove()}return n&&n.done(),d}return t?{addRegion:function(t){for(var r,i,a,o=t[t.length-1],l=0;l<t.length;l++){var c=e.pointsCompare(r=o,o=t[l]);0!==c&&s((i=c<0?r:o,a=c<0?o:r,{id:n?n.segmentId():-1,start:i,end:a,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return c(t,!1)}}:{calculate:function(t,e,n,r){return t.forEach(function(t){s(i(t.start,t.end,t),!0)}),n.forEach(function(t){s(i(t.start,t.end,t),!1)}),c(e,r)}}}},{"./linked-list":54}],54:[function(t,e,n){e.exports={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,n){for(var r=t.root,i=t.root.next;null!==i;){if(n(i))return e.prev=i.prev,e.next=i,i.prev.next=e,void(i.prev=e);r=i,i=i.next}r.next=e,e.prev=r,e.next=null},findTransition:function(e){for(var n=t.root,r=t.root.next;null!==r&&!e(r);)n=r,r=r.next;return{before:n===t.root?null:n,after:r,insert:function(t){return t.prev=n,t.next=r,n.next=t,null!==r&&(r.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}}},{}],55:[function(t,e,n){e.exports=function(t,e,n){var r=[],i=[];return t.forEach(function(t){var a=t.start,o=t.end;if(e.pointsSame(a,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(t);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<r.length;u++){var d=(m=r[u])[0],h=m[m.length-1];if(e.pointsSame(d,a)){if(T(u,!0,!0))break}else if(e.pointsSame(d,o)){if(T(u,!0,!1))break}else if(e.pointsSame(h,a)){if(T(u,!1,!0))break}else if(e.pointsSame(h,o)&&T(u,!1,!1))break}if(c===s)return r.push([a,o]),void(n&&n.chainNew(a,o));if(c===l){n&&n.chainMatch(s.index);var f=s.index,p=s.matches_pt1?o:a,g=s.matches_head,m=r[f],v=g?m[0]:m[m.length-1],y=g?m[1]:m[m.length-2],b=g?m[m.length-1]:m[0],x=g?m[m.length-2]:m[1];return e.pointsCollinear(y,v,p)&&(g?(n&&n.chainRemoveHead(s.index,p),m.shift()):(n&&n.chainRemoveTail(s.index,p),m.pop()),v=y),e.pointsSame(b,p)?(r.splice(f,1),e.pointsCollinear(x,b,v)&&(g?(n&&n.chainRemoveTail(s.index,v),m.pop()):(n&&n.chainRemoveHead(s.index,v),m.shift())),n&&n.chainClose(s.index),void i.push(m)):void(g?(n&&n.chainAddHead(s.index,p),m.unshift(p)):(n&&n.chainAddTail(s.index,p),m.push(p)))}var _=s.index,w=l.index;n&&n.chainConnect(_,w);var k=r[_].length<r[w].length;s.matches_head?l.matches_head?k?(M(_),A(_,w)):(M(w),A(w,_)):A(w,_):l.matches_head?A(_,w):k?(M(_),A(w,_)):(M(w),A(_,w))}function T(t,e,n){return c.index=t,c.matches_head=e,c.matches_pt1=n,c===s?(c=l,!1):(c=null,!0)}function M(t){n&&n.chainReverse(t),r[t].reverse()}function A(t,i){var a=r[t],o=r[i],s=a[a.length-1],l=a[a.length-2],c=o[0],u=o[1];e.pointsCollinear(l,s,c)&&(n&&n.chainRemoveTail(t,s),a.pop(),s=l),e.pointsCollinear(s,c,u)&&(n&&n.chainRemoveHead(i,c),o.shift()),n&&n.chainJoin(t,i),r[t]=a.concat(o),r.splice(i,1)}}),i}},{}],56:[function(t,e,n){function r(t,e,n){var r=[];return t.forEach(function(t){var i=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[i]&&r.push({id:n?n.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[i],below:2===e[i]},otherFill:null})}),n&&n.selected(r),r}e.exports={union:function(t,e){return r(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return r(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return r(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return r(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return r(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}}},{}],57:[function(t,e,n){var r,i,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var c,u=[],d=!1,h=-1;function f(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!d){var t=l(f);d=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new g(t,e)),1!==u.length||d||l(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],58:[function(t,e,n){!function(t){var n=/^\s+/,r=/\s+$/,i=0,a=t.round,o=t.min,s=t.max,l=t.random;function c(e,l){if(l=l||{},(e=e||"")instanceof c)return e;if(!(this instanceof c))return new c(e,l);var u=function(e){var i,a,l={r:0,g:0,b:0},c=1,u=null,d=null,h=null,f=!1,p=!1;return"string"==typeof e&&(e=function(t){t=t.replace(n,"").replace(r,"").toLowerCase();var e,i=!1;if(C[t])t=C[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=H.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=H.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=H.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=H.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=H.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=H.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=H.hex8.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),a:N(e[4]),format:i?"name":"hex8"}:(e=H.hex6.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),format:i?"name":"hex"}:(e=H.hex4.exec(t))?{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),a:N(e[4]+""+e[4]),format:i?"name":"hex8"}:!!(e=H.hex3.exec(t))&&{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),format:i?"name":"hex"}}(e)),"object"==typeof e&&(j(e.r)&&j(e.g)&&j(e.b)?(i=e.g,a=e.b,l={r:255*O(e.r,255),g:255*O(i,255),b:255*O(a,255)},f=!0,p="%"===String(e.r).substr(-1)?"prgb":"rgb"):j(e.h)&&j(e.s)&&j(e.v)?(u=I(e.s),d=I(e.v),l=function(e,n,r){e=6*O(e,360),n=O(n,100),r=O(r,100);var i=t.floor(e),a=e-i,o=r*(1-n),s=r*(1-a*n),l=r*(1-(1-a)*n),c=i%6;return{r:255*[r,s,o,o,l,r][c],g:255*[l,r,r,s,o,o][c],b:255*[o,o,l,r,r,s][c]}}(e.h,u,d),f=!0,p="hsv"):j(e.h)&&j(e.s)&&j(e.l)&&(u=I(e.s),h=I(e.l),l=function(t,e,n){var r,i,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=O(t,360),e=O(e,100),n=O(n,100),0===e)r=i=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;r=o(l,s,t+1/3),i=o(l,s,t),a=o(l,s,t-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,u,h),f=!0,p="hsl"),e.hasOwnProperty("a")&&(c=e.a)),c=D(c),{ok:f,format:e.format||p,r:o(255,s(l.r,0)),g:o(255,s(l.g,0)),b:o(255,s(l.b,0)),a:c}}(e);this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=a(100*this._a)/100,this._format=l.format||u.format,this._gradientType=l.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=u.ok,this._tc_id=i++}function u(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,a=s(t,e,n),l=o(t,e,n),c=(a+l)/2;if(a==l)r=i=0;else{var u=a-l;switch(i=c>.5?u/(2-a-l):u/(a+l),a){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:c}}function d(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,a=s(t,e,n),l=o(t,e,n),c=a,u=a-l;if(i=0===a?0:u/a,a==l)r=0;else{switch(a){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:c}}function h(t,e,n,r){var i=[P(a(t).toString(16)),P(a(e).toString(16)),P(a(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function f(t,e,n,r){return[P(R(r)),P(a(t).toString(16)),P(a(e).toString(16)),P(a(n).toString(16))].join("")}function p(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.s-=e/100,n.s=E(n.s),c(n)}function g(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.s+=e/100,n.s=E(n.s),c(n)}function m(t){return c(t).desaturate(100)}function v(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.l+=e/100,n.l=E(n.l),c(n)}function y(t,e){e=0===e?0:e||10;var n=c(t).toRgb();return n.r=s(0,o(255,n.r-a(-e/100*255))),n.g=s(0,o(255,n.g-a(-e/100*255))),n.b=s(0,o(255,n.b-a(-e/100*255))),c(n)}function b(t,e){e=0===e?0:e||10;var n=c(t).toHsl();return n.l-=e/100,n.l=E(n.l),c(n)}function x(t,e){var n=c(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,c(n)}function _(t){var e=c(t).toHsl();return e.h=(e.h+180)%360,c(e)}function w(t){var e=c(t).toHsl(),n=e.h;return[c(t),c({h:(n+120)%360,s:e.s,l:e.l}),c({h:(n+240)%360,s:e.s,l:e.l})]}function k(t){var e=c(t).toHsl(),n=e.h;return[c(t),c({h:(n+90)%360,s:e.s,l:e.l}),c({h:(n+180)%360,s:e.s,l:e.l}),c({h:(n+270)%360,s:e.s,l:e.l})]}function T(t){var e=c(t).toHsl(),n=e.h;return[c(t),c({h:(n+72)%360,s:e.s,l:e.l}),c({h:(n+216)%360,s:e.s,l:e.l})]}function M(t,e,n){e=e||6,n=n||30;var r=c(t).toHsl(),i=360/n,a=[c(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,a.push(c(r));return a}function A(t,e){e=e||6;for(var n=c(t).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/e;e--;)o.push(c({h:r,s:i,v:a})),a=(a+s)%1;return o}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,n,r,i=this.toRgb();return n=i.g/255,r=i.b/255,.2126*((e=i.r/255)<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=D(t),this._roundA=a(100*this._a)/100,this},toHsv:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=d(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),r=a(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),r=a(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[P(a(t).toString(16)),P(a(e).toString(16)),P(a(n).toString(16)),P(R(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*O(this._r,255))+"%",g:a(100*O(this._g,255))+"%",b:a(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*O(this._r,255))+"%, "+a(100*O(this._g,255))+"%, "+a(100*O(this._b,255))+"%)":"rgba("+a(100*O(this._r,255))+"%, "+a(100*O(this._g,255))+"%, "+a(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=c(t);n="#"+f(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1;return e||!(this._a<1&&this._a>=0)||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},c.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:I(t[r]));t=n}return c(t,e)},c.equals=function(t,e){return!(!t||!e)&&c(t).toRgbString()==c(e).toRgbString()},c.random=function(){return c.fromRatio({r:l(),g:l(),b:l()})},c.mix=function(t,e,n){n=0===n?0:n||50;var r=c(t).toRgb(),i=c(e).toRgb(),a=n/100;return c({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},c.readability=function(e,n){var r=c(e),i=c(n);return(t.max(r.getLuminance(),i.getLuminance())+.05)/(t.min(r.getLuminance(),i.getLuminance())+.05)},c.isReadable=function(t,e,n){var r,i,a=c.readability(t,e);switch(i=!1,(r=function(t){var e,n;return"AA"!==(e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==e&&(e="AA"),"small"!==(n=(t.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},c.mostReadable=function(t,e,n){var r,i,a,o,s=null,l=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var u=0;u<e.length;u++)(r=c.readability(t,e[u]))>l&&(l=r,s=c(e[u]));return c.isReadable(t,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,c.mostReadable(t,["#fff","#000"],n))};var C=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=c.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(C);function D(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function O(e,n){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(e)&&(e="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(e);return e=o(n,s(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function E(t){return o(1,s(0,t))}function L(t){return parseInt(t,16)}function P(t){return 1==t.length?"0"+t:""+t}function I(t){return t<=1&&(t=100*t+"%"),t}function R(e){return t.round(255*parseFloat(e)).toString(16)}function N(t){return L(t)/255}var F,z,V,H=(z="[\\s|\\(]+("+(F="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",V="[\\s|\\(]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",{CSS_UNIT:new RegExp(F),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+V),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+V),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+V),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function j(t){return!!H.CSS_UNIT.exec(t)}void 0!==e&&e.exports?e.exports=c:window.tinycolor=c}(Math)},{}],59:[function(t,e,n){"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],60:[function(t,e,n){"use strict";var r=t("./arrow_paths"),i=t("../../plots/font_attributes"),a=t("../../plots/cartesian/constants"),o=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),e.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":178,"../../plot_api/plot_template":237,"../../plots/cartesian/constants":254,"../../plots/font_attributes":276,"./arrow_paths":59}],61:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("./draw").draw;function o(t){r.filterVisible(t._fullLayout.annotations).forEach(function(e){var n=i.getFromId(t,e.xref),r=i.getFromId(t,e.yref),a=i.getRefType(e.xref),o=i.getRefType(e.yref);e._extremes={},"range"===a&&s(e,n),"range"===o&&s(e,r)})}function s(t,e){var n,r=e._id,a=r.charAt(0),o=t[a],s=t["a"+a],l=t["_"+a+"padplus"],c=t["_"+a+"padminus"],u={x:1,y:-1}[a]*t[a+"shift"],d=3*t.arrowsize*t.arrowwidth||0,h=d+u,f=d-u,p=3*t.startarrowsize*t.arrowwidth||0,g=p+u,m=p-u;if(t["a"+a+"ref"]===t[a+"ref"]){var v=i.findExtremes(e,[e.r2c(o)],{ppadplus:h,ppadminus:f}),y=i.findExtremes(e,[e.r2c(s)],{ppadplus:Math.max(l,g),ppadminus:Math.max(c,m)});n={min:[v.min[0],y.min[0]],max:[v.max[0],y.max[0]]}}else g=s?g+s:g,m=s?m-s:m,n=i.findExtremes(e,[e.r2c(o)],{ppadplus:Math.max(l,h,g),ppadminus:Math.max(c,f,m)});t._extremes[r]=n}e.exports=function(t){if(r.filterVisible(t._fullLayout.annotations).length&&t._fullData.length)return r.syncOrAsync([a,o],t)}},{"../../lib":202,"../../plots/cartesian/axes":248,"./draw":66}],62:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry"),a=t("../../plot_api/plot_template").arrayEditor;function o(t,e){var n,r,i,a,o,l,c,u=t._fullLayout.annotations,d=[],h=[],f=[],p=(e||[]).length;for(n=0;n<u.length;n++)if(a=(i=u[n]).clicktoshow){for(r=0;r<p;r++)if(l=(o=e[r]).xaxis,c=o.yaxis,l._id===i.xref&&c._id===i.yref&&l.d2r(o.x)===s(i._xclick,l)&&c.d2r(o.y)===s(i._yclick,c)){(i.visible?"onout"===a?h:f:d).push(n);break}r===p&&i.visible&&"onout"===a&&h.push(n)}return{on:d,off:h,explicitOff:f}}function s(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}e.exports={hasClickToShow:function(t,e){var n=o(t,e);return n.on.length>0||n.explicitOff.length>0},onClick:function(t,e){var n,s,l=o(t,e),c=l.on,u=l.off.concat(l.explicitOff),d={},h=t._fullLayout.annotations;if(c.length||u.length){for(n=0;n<c.length;n++)(s=a(t.layout,"annotations",h[c[n]])).modifyItem("visible",!0),r.extendFlat(d,s.getUpdateObj());for(n=0;n<u.length;n++)(s=a(t.layout,"annotations",h[u[n]])).modifyItem("visible",!1),r.extendFlat(d,s.getUpdateObj());return i.call("update",t,{},d)}}}},{"../../lib":202,"../../plot_api/plot_template":237,"../../registry":290}],63:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../color");e.exports=function(t,e,n,a){a("opacity");var o=a("bgcolor"),s=a("bordercolor"),l=i.opacity(s);a("borderpad");var c=a("borderwidth"),u=a("showarrow");if(a("text",u?" ":n._dfltTitle.annotation),a("textangle"),r.coerceFont(a,"font",n.font),a("width"),a("align"),a("height")&&a("valign"),u){var d,h,f=a("arrowside");-1!==f.indexOf("end")&&(d=a("arrowhead"),h=a("arrowsize")),-1!==f.indexOf("start")&&(a("startarrowhead",d),a("startarrowsize",h)),a("arrowcolor",l?e.bordercolor:i.defaultLine),a("arrowwidth",2*(l&&c||1)),a("standoff"),a("startstandoff")}var p=a("hovertext"),g=n.hoverlabel||{};if(p){var m=a("hoverlabel.bgcolor",g.bgcolor||(i.opacity(o)?i.rgb(o):i.defaultLine)),v=a("hoverlabel.bordercolor",g.bordercolor||i.contrast(m));r.coerceFont(a,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||v})}a("captureevents",!!p)}},{"../../lib":202,"../color":75}],64:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib/to_log_range");e.exports=function(t,e,n,a){e=e||{};var o="log"===n&&"linear"===e.type;if(o||"linear"===n&&"log"===e.type)for(var s,l,c=t._fullLayout.annotations,u=e._id.charAt(0),d=0;d<c.length;d++)l="annotations["+d+"].",(s=c[d])[u+"ref"]===e._id&&h(u),s["a"+u+"ref"]===e._id&&h("a"+u);function h(t){var n=s[t],c=null;c=o?i(n,e.range):Math.pow(10,n),r(c)||(c=null),a(l+t,c)}}},{"../../lib/to_log_range":226,"fast-isnumeric":11}],65:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("./common_defaults"),s=t("./attributes");function l(t,e,n){function a(n,i){return r.coerce(t,e,s,n,i)}var l=a("visible"),c=a("clicktoshow");if(l||c){o(t,e,n,a);for(var u=e.showarrow,d=["x","y"],h=[-10,-30],f={_fullLayout:n},p=0;p<2;p++){var g=d[p],m=i.coerceRef(t,e,f,g,"","paper");if("paper"!==m&&i.getFromId(f,m)._annIndices.push(e._index),i.coercePosition(e,f,a,m,g,.5),u){var v="a"+g,y=i.coerceRef(t,e,f,v,"pixel",["pixel","paper"]);"pixel"!==y&&y!==m&&(y=e[v]="pixel"),i.coercePosition(e,f,a,y,v,"pixel"===y?h[p]:.4)}a(g+"anchor"),a(g+"shift")}if(r.noneOrAll(t,e,["x","y"]),u&&r.noneOrAll(t,e,["ax","ay"]),c){var b=a("xclick"),x=a("yclick");e._xclick=void 0===b?e.x:i.cleanPosition(b,f,e.xref),e._yclick=void 0===x?e.y:i.cleanPosition(x,f,e.yref)}}}e.exports=function(t,e){a(t,e,{name:"annotations",handleItemDefaults:l})}},{"../../lib":202,"../../plots/array_container_defaults":243,"../../plots/cartesian/axes":248,"./attributes":60,"./common_defaults":63}],66:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../plots/plots"),o=t("../../lib"),s=o.strTranslate,l=t("../../plots/cartesian/axes"),c=t("../color"),u=t("../drawing"),d=t("../fx"),h=t("../../lib/svg_text_utils"),f=t("../../lib/setcursor"),p=t("../dragelement"),g=t("../../plot_api/plot_template").arrayEditor,m=t("./draw_arrow_head");function v(t,e){var n=t._fullLayout.annotations[e]||{},r=l.getFromId(t,n.xref),i=l.getFromId(t,n.yref);r&&r.setScale(),i&&i.setScale(),b(t,n,e,!1,r,i)}function y(t,e,n,r,i){var a=i[n],o=i[n+"ref"],s=-1!==n.indexOf("y"),c="domain"===l.getRefType(o),u=s?r.h:r.w;return t?c?a+(s?-e:e)/t._length:t.p2r(t.r2p(a)+e):a+(s?-e:e)/u}function b(t,e,n,a,v,b){var x,_,w=t._fullLayout,k=t._fullLayout._size,T=t._context.edits;a?(x="annotation-"+a,_=a+".annotations"):(x="annotation",_="annotations");var M=g(t.layout,_,e),A=M.modifyBase,C=M.modifyItem,S=M.getUpdateObj;w._infolayer.selectAll("."+x+'[data-index="'+n+'"]').remove();var D="clip"+w._uid+"_ann"+n;if(e._input&&!1!==e.visible){var O={x:{},y:{}},E=+e.textangle||0,L=w._infolayer.append("g").classed(x,!0).attr("data-index",String(n)).style("opacity",e.opacity),P=L.append("g").classed("annotation-text-g",!0),I=T[e.showarrow?"annotationTail":"annotationPosition"],R=e.captureevents||T.annotationText||I,N=P.append("g").style("pointer-events",R?"all":null).call(f,"pointer").on("click",function(){t._dragging=!1,t.emit("plotly_clickannotation",G(r.event))});e.hovertext&&N.on("mouseover",function(){var n=e.hoverlabel,r=n.font,i=this.getBoundingClientRect(),a=t.getBoundingClientRect();d.loneHover({x0:i.left-a.left,x1:i.right-a.left,y:(i.top+i.bottom)/2-a.top,text:e.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:r.family,fontSize:r.size,fontColor:r.color},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:t})}).on("mouseout",function(){d.loneUnhover(w._hoverlayer.node())});var F=e.borderwidth,z=F+e.borderpad,V=N.append("rect").attr("class","bg").style("stroke-width",F+"px").call(c.stroke,e.bordercolor).call(c.fill,e.bgcolor),H=e.width||e.height,j=w._topclips.selectAll("#"+D).data(H?[0]:[]);j.enter().append("clipPath").classed("annclip",!0).attr("id",D).append("rect"),j.exit().remove();var B=e.font,U=w._meta?o.templateString(e.text,w._meta):e.text,q=N.append("text").classed("annotation-text",!0).text(U);T.annotationText?q.call(h.makeEditable,{delegate:N,gd:t}).call(Z).on("edit",function(n){e.text=n,this.call(Z),C("text",n),v&&v.autorange&&A(v._name+".autorange",!0),b&&b.autorange&&A(b._name+".autorange",!0),i.call("_guiRelayout",t,S())}):q.call(Z)}else r.selectAll("#"+D).remove();function G(t){var r={index:n,annotation:e._input,fullAnnotation:e,event:t};return a&&(r.subplotId=a),r}function Z(n){return n.call(u.font,B).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),h.convertToTspans(n,t,W),n}function W(){var n=q.selectAll("a");1===n.size()&&n.text()===q.text()&&N.insert("a",":first-child").attr({"xlink:xlink:href":n.attr("xlink:href"),"xlink:xlink:show":n.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(V.node());var r=N.select(".annotation-text-math-group"),d=!r.empty(),g=u.bBox((d?r:q).node()),x=g.width,_=g.height,M=e.width||x,R=e.height||_,B=Math.round(M+2*z),U=Math.round(R+2*z);function Z(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}for(var W=!1,$=["x","y"],Y=0;Y<$.length;Y++){var X,Q,K,J,tt,et=$[Y],nt=e[et+"ref"]||et,rt=e["a"+et+"ref"],it={x:v,y:b}[et],at=(E+("x"===et?0:-90))*Math.PI/180,ot=B*Math.cos(at),st=U*Math.sin(at),lt=Math.abs(ot)+Math.abs(st),ct=e[et+"anchor"],ut=e[et+"shift"]*("x"===et?1:-1),dt=O[et],ht=l.getRefType(nt);if(it&&"domain"!==ht){var ft=it.r2fraction(e[et]);(ft<0||ft>1)&&(rt===nt?((ft=it.r2fraction(e["a"+et]))<0||ft>1)&&(W=!0):W=!0),X=it._offset+it.r2p(e[et]),J=.5}else{var pt="domain"===ht;"x"===et?(K=e[et],X=pt?it._offset+it._length*K:X=k.l+k.w*K):(K=1-e[et],X=pt?it._offset+it._length*K:X=k.t+k.h*K),J=e.showarrow?.5:K}if(e.showarrow){dt.head=X;var gt=e["a"+et];if(tt=ot*Z(.5,e.xanchor)-st*Z(.5,e.yanchor),rt===nt){var mt=l.getRefType(rt);"domain"===mt?("y"===et&&(gt=1-gt),dt.tail=it._offset+it._length*gt):dt.tail="paper"===mt?"y"===et?k.t+k.h*(gt=1-gt):k.l+k.w*gt:it._offset+it.r2p(gt),Q=tt}else dt.tail=X+gt,Q=tt+gt;dt.text=dt.tail+tt;var vt=w["x"===et?"width":"height"];if("paper"===nt&&(dt.head=o.constrain(dt.head,1,vt-1)),"pixel"===rt){var yt=-Math.max(dt.tail-3,dt.text),bt=Math.min(dt.tail+3,dt.text)-vt;yt>0?(dt.tail+=yt,dt.text+=yt):bt>0&&(dt.tail-=bt,dt.text-=bt)}dt.tail+=ut,dt.head+=ut}else Q=tt=lt*Z(J,ct),dt.text=X+tt;dt.text+=ut,tt+=ut,e["_"+et+"padplus"]=lt/2+(Q+=ut),e["_"+et+"padminus"]=lt/2-Q,e["_"+et+"size"]=lt,e["_"+et+"shift"]=tt}if(W)N.remove();else{var xt=0,_t=0;"left"!==e.align&&(xt=(M-x)*("center"===e.align?.5:1)),"top"!==e.valign&&(_t=(R-_)*("middle"===e.valign?.5:1)),d?r.select("svg").attr({x:z+xt-1,y:z+_t}).call(u.setClipUrl,H?D:null,t):q.call(h.positionText,z+xt-g.left,z+_t-g.top).call(u.setClipUrl,H?D:null,t),j.select("rect").call(u.setRect,z,z,M,R),V.call(u.setRect,F/2,F/2,B-F,U-F),N.call(u.setTranslate,Math.round(O.x.text-B/2),Math.round(O.y.text-U/2)),P.attr({transform:"rotate("+E+","+O.x.text+","+O.y.text+")"});var wt,kt=function(n,r){L.selectAll(".annotation-arrow-g").remove();var l=O.x.head,d=O.y.head,h=O.x.tail+n,f=O.y.tail+r,g=O.x.text+n,x=O.y.text+r,_=o.rotationXYMatrix(E,g,x),w=o.apply2DTransform(_),M=o.apply2DTransform2(_),D=+V.attr("width"),I=+V.attr("height"),R=g-.5*D,F=R+D,z=x-.5*I,H=z+I,j=[[R,z,R,H],[R,H,F,H],[F,H,F,z],[F,z,R,z]].map(M);if(!j.reduce(function(t,e){return t^!!o.segmentsIntersect(l,d,l+1e6,d+1e6,e[0],e[1],e[2],e[3])},!1)){j.forEach(function(t){var e=o.segmentsIntersect(h,f,l,d,t[0],t[1],t[2],t[3]);e&&(h=e.x,f=e.y)});var B=e.arrowwidth,U=e.arrowcolor,q=e.arrowside,G=L.append("g").style({opacity:c.opacity(U)}).classed("annotation-arrow-g",!0),Z=G.append("path").attr("d","M"+h+","+f+"L"+l+","+d).style("stroke-width",B+"px").call(c.stroke,c.rgb(U));if(m(Z,q,e),T.annotationPosition&&Z.node().parentNode&&!a){var W=l,$=d;if(e.standoff){var Y=Math.sqrt(Math.pow(l-h,2)+Math.pow(d-f,2));W+=e.standoff*(h-l)/Y,$+=e.standoff*(f-d)/Y}var X,Q,K=G.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(h-W)+","+(f-$),transform:s(W,$)}).style("stroke-width",B+6+"px").call(c.stroke,"rgba(0,0,0,0)").call(c.fill,"rgba(0,0,0,0)");p.init({element:K.node(),gd:t,prepFn:function(){var t=u.getTranslate(N);X=t.x,Q=t.y,v&&v.autorange&&A(v._name+".autorange",!0),b&&b.autorange&&A(b._name+".autorange",!0)},moveFn:function(t,n){var r=w(X,Q),i=r[0]+t,a=r[1]+n;N.call(u.setTranslate,i,a),C("x",y(v,t,"x",k,e)),C("y",y(b,n,"y",k,e)),e.axref===e.xref&&C("ax",y(v,t,"ax",k,e)),e.ayref===e.yref&&C("ay",y(b,n,"ay",k,e)),G.attr("transform",s(t,n)),P.attr({transform:"rotate("+E+","+i+","+a+")"})},doneFn:function(){i.call("_guiRelayout",t,S());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};e.showarrow&&kt(0,0),I&&p.init({element:N.node(),gd:t,prepFn:function(){wt=P.attr("transform")},moveFn:function(t,n){var r="pointer";if(e.showarrow)C("ax",e.axref===e.xref?y(v,t,"ax",k,e):e.ax+t),C("ay",e.ayref===e.yref?y(b,n,"ay",k.w,e):e.ay+n),kt(t,n);else{if(a)return;var i,o;if(v)i=y(v,t,"x",k,e);else{var l=e._xsize/k.w;i=p.align(e.x+(e._xshift-e.xshift)/k.w-l/2+t/k.w,l,0,1,e.xanchor)}if(b)o=y(b,n,"y",k,e);else{var c=e._ysize/k.h;o=p.align(e.y-(e._yshift+e.yshift)/k.h-c/2-n/k.h,c,0,1,e.yanchor)}C("x",i),C("y",o),v&&b||(r=p.getCursor(v?.5:i,b?.5:o,e.xanchor,e.yanchor))}P.attr({transform:s(t,n)+wt}),f(N,r)},clickFn:function(n,r){e.captureevents&&t.emit("plotly_clickannotation",G(r))},doneFn:function(){f(N),i.call("_guiRelayout",t,S());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}}e.exports={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var n=0;n<e.annotations.length;n++)e.annotations[n].visible&&v(t,n);return a.previousPromises(t)},drawOne:v,drawRaw:b}},{"../../lib":202,"../../lib/setcursor":222,"../../lib/svg_text_utils":224,"../../plot_api/plot_template":237,"../../plots/cartesian/axes":248,"../../plots/plots":282,"../../registry":290,"../color":75,"../dragelement":94,"../drawing":97,"../fx":115,"./draw_arrow_head":67,d3:9}],67:[function(t,e,n){"use strict";var r=t("d3"),i=t("../color"),a=t("./arrow_paths"),o=t("../../lib"),s=o.strScale,l=o.strRotate,c=o.strTranslate;e.exports=function(t,e,n){var o,u,d,h,f=t.node(),p=a[n.arrowhead||0],g=a[n.startarrowhead||0],m=(n.arrowwidth||1)*(n.arrowsize||1),v=(n.arrowwidth||1)*(n.startarrowsize||1),y=e.indexOf("start")>=0,b=e.indexOf("end")>=0,x=p.backoff*m+n.standoff,_=g.backoff*v+n.startstandoff;if("line"===f.nodeName){o={x:+t.attr("x1"),y:+t.attr("y1")},u={x:+t.attr("x2"),y:+t.attr("y2")};var w=o.x-u.x,k=o.y-u.y;if(h=(d=Math.atan2(k,w))+Math.PI,x&&_&&x+_>Math.sqrt(w*w+k*k))return void I();if(x){if(x*x>w*w+k*k)return void I();var T=x*Math.cos(d),M=x*Math.sin(d);u.x+=T,u.y+=M,t.attr({x2:u.x,y2:u.y})}if(_){if(_*_>w*w+k*k)return void I();var A=_*Math.cos(d),C=_*Math.sin(d);o.x-=A,o.y-=C,t.attr({x1:o.x,y1:o.y})}}else if("path"===f.nodeName){var S=f.getTotalLength(),D="";if(S<x+_)return void I();var O=f.getPointAtLength(0),E=f.getPointAtLength(.1);d=Math.atan2(O.y-E.y,O.x-E.x),o=f.getPointAtLength(Math.min(_,S)),D="0px,"+_+"px,";var L=f.getPointAtLength(S),P=f.getPointAtLength(S-.1);h=Math.atan2(L.y-P.y,L.x-P.x),u=f.getPointAtLength(Math.max(0,S-x)),t.style("stroke-dasharray",D+=S-(D?_+x:x)+"px,"+S+"px")}function I(){t.style("stroke-dasharray","0px,100px")}function R(e,a,o,u){e.path&&(e.noRotate&&(o=0),r.select(f.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:c(a.x,a.y)+l(180*o/Math.PI)+s(u)}).style({fill:i.rgb(n.arrowcolor),"stroke-width":0}))}y&&R(g,o,d,v),b&&R(p,u,h,m)}},{"../../lib":202,"../color":75,"./arrow_paths":59,d3:9}],68:[function(t,e,n){"use strict";var r=t("./draw"),i=t("./click");e.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":260,"./attributes":60,"./calc_autorange":61,"./click":62,"./convert_coords":64,"./defaults":65,"./draw":66}],69:[function(t,e,n){"use strict";var r=t("../annotations/attributes"),i=t("../../plot_api/edit_types").overrideAll,a=t("../../plot_api/plot_template").templatedArray;e.exports=i(a("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":230,"../../plot_api/plot_template":237,"../annotations/attributes":60}],70:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes");function a(t,e){var n=e.fullSceneLayout.domain,a=e.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},r.extendFlat(t._xa,o),i.setConvert(t._xa),t._xa._offset=a.l+n.x[0]*a.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*a.w*(n.x[1]-n.x[0])},t._ya={},r.extendFlat(t._ya,o),i.setConvert(t._ya),t._ya._offset=a.t+(1-n.y[1])*a.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*a.h*(n.y[1]-n.y[0])}}e.exports=function(t){for(var e=t.fullSceneLayout.annotations,n=0;n<e.length;n++)a(e[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()}},{"../../lib":202,"../../plots/cartesian/axes":248}],71:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("../annotations/common_defaults"),s=t("./attributes");function l(t,e,n,a){function l(n,i){return r.coerce(t,e,s,n,i)}function c(t){var r=t+"axis",a={_fullLayout:{}};return a._fullLayout[r]=n[r],i.coercePosition(e,a,l,t,t,.5)}l("visible")&&(o(t,e,a.fullLayout,l),c("x"),c("y"),c("z"),r.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",l("ax",-10),l("ay",-30),r.noneOrAll(t,e,["ax","ay"])))}e.exports=function(t,e,n){a(t,e,{name:"annotations",handleItemDefaults:l,fullLayout:n.fullLayout})}},{"../../lib":202,"../../plots/array_container_defaults":243,"../../plots/cartesian/axes":248,"../annotations/common_defaults":63,"./attributes":69}],72:[function(t,e,n){"use strict";var r=t("../annotations/draw").drawRaw,i=t("../../plots/gl3d/project"),a=["x","y","z"];e.exports=function(t){for(var e=t.fullSceneLayout,n=t.dataScale,o=e.annotations,s=0;s<o.length;s++){for(var l=o[s],c=!1,u=0;u<3;u++){var d=a[u],h=e[d+"axis"].r2fraction(l[d]);if(h<0||h>1){c=!0;break}}c?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove():(l._pdata=i(t.glplot.cameraParams,[e.xaxis.r2l(l.x)*n[0],e.yaxis.r2l(l.y)*n[1],e.zaxis.r2l(l.z)*n[2]]),r(t.graphDiv,l,s,t.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":279,"../annotations/draw":66}],73:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib");e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:function(t,e){var n=r.subplotsRegistry.gl3d;if(n)for(var a=n.attrRegex,o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];a.test(l)&&(t[l].annotations||[]).length&&(i.pushUnique(e._basePlotModules,n),i.pushUnique(e._subplots.gl3d,l))}},convert:t("./convert"),draw:t("./draw")}},{"../../lib":202,"../../registry":290,"./attributes":69,"./convert":70,"./defaults":71,"./draw":72}],74:[function(t,e,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],75:[function(t,e,n){"use strict";var r=t("tinycolor2"),i=t("fast-isnumeric"),a=e.exports={},o=t("./attributes");a.defaults=o.defaults;var s=a.defaultLine=o.defaultLine;a.lightLine=o.lightLine;var l=a.background=o.background;function c(t){if(i(t)||"string"!=typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var n=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return t;var r=n[1].trim().split(/\s*[\s,]\s*/),a="a"===e.charAt(3)&&4===r.length;if(!a&&3!==r.length)return t;for(var o=0;o<r.length;o++){if(!r[o].length)return t;if(r[o]=Number(r[o]),!(r[o]>=0))return t;if(3===o)r[o]>1&&(r[o]=1);else if(r[o]>=1)return t}var s=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return a?"rgba("+s+", "+r[3]+")":"rgb("+s+")"}a.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},a.rgb=function(t){return a.tinyRGB(r(t))},a.opacity=function(t){return t?r(t).getAlpha():0},a.addOpacity=function(t,e){var n=r(t).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+e+")"},a.combine=function(t,e){var n=r(t).toRgb();if(1===n.a)return r(t).toRgbString();var i=r(e||l).toRgb(),a=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a};return r({r:a.r*(1-n.a)+n.r*n.a,g:a.g*(1-n.a)+n.g*n.a,b:a.b*(1-n.a)+n.b*n.a}).toRgbString()},a.contrast=function(t,e,n){var i=r(t);return 1!==i.getAlpha()&&(i=r(a.combine(t,l))),(i.isDark()?e?i.lighten(e):l:n?i.darken(n):s).toString()},a.stroke=function(t,e){var n=r(e);t.style({stroke:a.tinyRGB(n),"stroke-opacity":n.getAlpha()})},a.fill=function(t,e){var n=r(e);t.style({fill:a.tinyRGB(n),"fill-opacity":n.getAlpha()})},a.clean=function(t){if(t&&"object"==typeof t){var e,n,r,i,o=Object.keys(t);for(e=0;e<o.length;e++)if(i=t[r=o[e]],"color"===r.substr(r.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=c(i[n]);else t[r]=c(i);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=c(i[n][1]));else if(Array.isArray(i)){var s=i[0];if(!Array.isArray(s)&&s&&"object"==typeof s)for(n=0;n<i.length;n++)a.clean(i[n])}else i&&"object"==typeof i&&a.clean(i)}}},{"./attributes":74,"fast-isnumeric":11,tinycolor2:58}],76:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/layout_attributes"),i=t("../../plots/font_attributes"),a=t("../../lib/extend").extendFlat,o=t("../../plot_api/edit_types").overrideAll;e.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:a({},r.ticks,{dflt:""}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:i({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:i({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:i({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":196,"../../plot_api/edit_types":230,"../../plots/cartesian/layout_attributes":262,"../../plots/font_attributes":276}],77:[function(t,e,n){"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],78:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plot_api/plot_template"),a=t("../../plots/cartesian/tick_value_defaults"),o=t("../../plots/cartesian/tick_mark_defaults"),s=t("../../plots/cartesian/tick_label_defaults"),l=t("./attributes");e.exports=function(t,e,n){var c=i.newContainer(e,"colorbar"),u=t.colorbar||{};function d(t,e){return r.coerce(u,c,l,t,e)}var h=d("thicknessmode");d("thickness","fraction"===h?30/(n.width-n.margin.l-n.margin.r):30);var f=d("lenmode");d("len","fraction"===f?1:n.height-n.margin.t-n.margin.b),d("x"),d("xanchor"),d("xpad"),d("y"),d("yanchor"),d("ypad"),r.noneOrAll(u,c,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var p=d("ticklabelposition");a(u,c,d,"linear");var g={outerTicks:!1,font:n.font};-1!==p.indexOf("inside")&&(g.bgColor="black"),s(u,c,d,"linear",g),o(u,c,d,"linear",g),d("title.text",n._dfltTitle.colorbar),r.coerceFont(d,"title.font",n.font),d("title.side")}},{"../../lib":202,"../../plot_api/plot_template":237,"../../plots/cartesian/tick_label_defaults":269,"../../plots/cartesian/tick_mark_defaults":270,"../../plots/cartesian/tick_value_defaults":271,"./attributes":76}],79:[function(t,e,n){"use strict";var r=t("d3"),i=t("tinycolor2"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../plots/cartesian/axes"),l=t("../dragelement"),c=t("../../lib"),u=c.strTranslate,d=t("../../lib/extend").extendFlat,h=t("../../lib/setcursor"),f=t("../drawing"),p=t("../color"),g=t("../titles"),m=t("../../lib/svg_text_utils"),v=t("../colorscale/helpers").flipScale,y=t("../../plots/cartesian/axis_defaults"),b=t("../../plots/cartesian/position_defaults"),x=t("../../plots/cartesian/layout_attributes"),_=t("../../constants/alignment"),w=_.LINE_SPACING,k=_.FROM_TL,T=_.FROM_BR,M=t("./constants").cn;e.exports={draw:function(t){var e=t._fullLayout._infolayer.selectAll("g."+M.colorbar).data(function(t){var e,n,r,i,a=t._fullLayout,o=t.calcdata,s=[];function l(t){return d(t,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof i.calc?i.calc(t,r,e):(e._fillgradient=n.reversescale?v(n.colorscale):n.colorscale,e._zrange=[n[i.min],n[i.max]])}for(var u=0;u<o.length;u++){var h=(r=o[u][0].trace)._module.colorbar;if(!0===r.visible&&h)for(var f=Array.isArray(h),p=f?h:[h],g=0;g<p.length;g++){var m=(i=p[g]).container;(n=m?r[m]:r)&&n.showscale&&((e=l(n.colorbar))._id="cb"+r.uid+(f&&m?"-"+m:""),e._traceIndex=r.index,e._propPrefix=(m?m+".":"")+"colorbar.",e._meta=r._meta,c(),s.push(e))}}for(var y in a._colorAxes)if((n=a[y]).showscale){var b=a._colorAxes[y];(e=l(n.colorbar))._id="cb"+y,e._propPrefix=y+".colorbar.",e._meta=a._meta,i={min:"cmin",max:"cmax"},"heatmap"!==b[0]&&(i.calc=(r=b[1])._module.colorbar.calc),c(),s.push(e)}return s}(t),function(t){return t._id});e.enter().append("g").attr("class",function(t){return t._id}).classed(M.colorbar,!0),e.each(function(e){var n=r.select(this);c.ensureSingle(n,"rect",M.cbbg),c.ensureSingle(n,"g",M.cbfills),c.ensureSingle(n,"g",M.cblines),c.ensureSingle(n,"g",M.cbaxis,function(t){t.classed(M.crisp,!0)}),c.ensureSingle(n,"g",M.cbtitleunshift,function(t){t.append("g").classed(M.cbtitle,!0)}),c.ensureSingle(n,"rect",M.cboutline);var v=function(t,e,n){var o=n._fullLayout,l=o._size,h=e._fillcolor,v=e._line,_=e.title,A=_.side,C=e._zrange||r.extent(("function"==typeof h?h:v.color).domain()),S="function"==typeof v.color?v.color:function(){return v.color},D="function"==typeof h?h:function(){return h},O=e._levels,E=function(t,e,n){var r,i,a=e._levels,o=[],s=[],l=a.end+a.size/100,c=a.size,u=1.001*n[0]-.001*n[1],d=1.001*n[1]-.001*n[0];for(i=0;i<1e5&&(r=a.start+i*c,!(c>0?r>=l:r<=l));i++)r>u&&r<d&&o.push(r);if(e._fillgradient)s=[0];else if("function"==typeof e._fillcolor){var h=e._filllevels;if(h)for(l=h.end+h.size/100,c=h.size,i=0;i<1e5&&(r=h.start+i*c,!(c>0?r>=l:r<=l));i++)r>n[0]&&r<n[1]&&s.push(r);else(s=o.map(function(t){return t-a.size/2})).push(s[s.length-1]+a.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(s=[0]);return a.size<0&&(o.reverse(),s.reverse()),{line:o,fill:s}}(0,e,C),L=E.fill,P=E.line,I=Math.round(e.thickness*("fraction"===e.thicknessmode?l.w:1)),R=I/l.w,N=Math.round(e.len*("fraction"===e.lenmode?l.h:1)),F=N/l.h,z=e.xpad/l.w,V=(e.borderwidth+e.outlinewidth)/2,H=e.ypad/l.h,j=Math.round(e.x*l.w+e.xpad),B=e.x-R*({middle:.5,right:1}[e.xanchor]||0),U=e.y+F*(({top:-.5,bottom:.5}[e.yanchor]||0)-.5),q=Math.round(l.h*(1-U)),G=q-N;e._lenFrac=F,e._thickFrac=R,e._xLeftFrac=B,e._yBottomFrac=U;var Z=e._axis=function(t,e,n){var r=t._fullLayout,i={type:"linear",range:n,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,ticklabelposition:e.ticklabelposition,tickfont:e.tickfont,tickangle:e.tickangle,tickformat:e.tickformat,exponentformat:e.exponentformat,minexponent:e.minexponent,separatethousands:e.separatethousands,showexponent:e.showexponent,showtickprefix:e.showtickprefix,tickprefix:e.tickprefix,showticksuffix:e.showticksuffix,ticksuffix:e.ticksuffix,title:e.title,showline:!0,anchor:"free",side:"right",position:1},a={type:"linear",_id:"y"+e._id},o={letter:"y",font:r.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:r.calendar};function s(t,e){return c.coerce(i,a,x,t,e)}return y(i,a,s,o,r),b(i,a,s,o),a}(n,e,C);if(Z.position=e.x+z+R,-1!==["top","bottom"].indexOf(A)&&(Z.title.side=A,Z.titlex=e.x+z,Z.titley=U+("top"===_.side?F-H:H)),v.color&&"auto"===e.tickmode){Z.tickmode="linear",Z.tick0=O.start;var W=O.size,$=c.constrain((q-G)/50,4,15)+1,Y=(C[1]-C[0])/((e.nticks||$)*W);if(Y>1){var X=Math.pow(10,Math.floor(Math.log(Y)/Math.LN10));W*=X*c.roundUp(Y/X,[2,5,10]),(Math.abs(O.start)/O.size+1e-6)%1<2e-6&&(Z.tick0=0)}Z.dtick=W}Z.domain=[U+H,U+F-H],Z.setScale(),t.attr("transform",u(Math.round(l.l),Math.round(l.t)));var Q,K=t.select("."+M.cbtitleunshift).attr("transform",u(-Math.round(l.l),-Math.round(l.t))),J=t.select("."+M.cbaxis),tt=0;function et(r,i){var a={propContainer:Z,propName:e._propPrefix+"title",traceIndex:e._traceIndex,_meta:e._meta,placeholder:o._dfltTitle.colorbar,containerGroup:t.select("."+M.cbtitle)},s="h"===r.charAt(0)?r.substr(1):"h"+r;t.selectAll("."+s+",."+s+"-math-group").remove(),g.draw(n,r,d(a,i||{}))}return c.syncOrAsync([a.previousPromises,function(){if(-1!==["top","bottom"].indexOf(A)){var t=Z.title.font.size;et(Z._id+"title",{attributes:{x:l.l+(e.x+z)*l.w,y:"top"===A?(1-(U+F-H))*l.h+l.t+3+.75*t:(1-(U+H))*l.h+l.t-3-.25*t,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(A)){var a=t.select("."+M.cbtitle),o=a.select("text"),d=[-e.outlinewidth/2,e.outlinewidth/2],h=a.select(".h"+Z._id+"title-math-group").node(),p=15.6;if(o.node()&&(p=parseInt(o.node().style.fontSize,10)*w),h?(tt=f.bBox(h).height)>p&&(d[1]-=(tt-p)/2):o.node()&&!o.classed(M.jsPlaceholder)&&(tt=f.bBox(o.node()).height),tt){if(tt+=5,"top"===A)Z.domain[1]-=tt/l.h,d[1]*=-1;else{Z.domain[0]+=tt/l.h;var g=m.lineCount(o);d[1]+=(1-g)*p}a.attr("transform",u(d[0],d[1])),Z.setScale()}}t.selectAll("."+M.cbfills+",."+M.cblines).attr("transform",u(0,Math.round(l.h*(1-Z.domain[1])))),J.attr("transform",u(0,Math.round(-l.t)));var y=t.select("."+M.cbfills).selectAll("rect."+M.cbfill).attr("style","").data(L);y.enter().append("rect").classed(M.cbfill,!0).style("stroke","none"),y.exit().remove();var b=C.map(Z.c2p).map(Math.round).sort(function(t,e){return t-e});y.each(function(t,a){var o=[0===a?C[0]:(L[a]+L[a-1])/2,a===L.length-1?C[1]:(L[a]+L[a+1])/2].map(Z.c2p).map(Math.round);o[1]=c.constrain(o[1]+(o[1]>o[0])?1:-1,b[0],b[1]);var s=r.select(this).attr({x:j,width:Math.max(I,2),y:r.min(o),height:Math.max(r.max(o)-r.min(o),2)});if(e._fillgradient)f.gradient(s,n,e._id,"vertical",e._fillgradient,"fill");else{var l=D(t).replace("e-","");s.attr("fill",i(l).toHexString())}});var x=t.select("."+M.cblines).selectAll("path."+M.cbline).data(v.color&&v.width?P:[]);x.enter().append("path").classed(M.cbline,!0),x.exit().remove(),x.each(function(t){r.select(this).attr("d","M"+j+","+(Math.round(Z.c2p(t))+v.width/2%1)+"h"+I).call(f.lineGroupStyle,v.width,S(t),v.dash)}),J.selectAll("g."+Z._id+"tick,path").remove();var _=j+I+(e.outlinewidth||0)/2-("outside"===e.ticks?1:0),k=s.calcTicks(Z),T=s.getTickSigns(Z)[2];return s.drawTicks(n,Z,{vals:"inside"===Z.ticks?s.clipEnds(Z,k):k,layer:J,path:s.makeTickPath(Z,_,T),transFn:s.makeTransTickFn(Z)}),s.drawLabels(n,Z,{vals:k,layer:J,transFn:s.makeTransTickLabelFn(Z),labelFns:s.makeLabelFns(Z,_)})},function(){if(-1===["top","bottom"].indexOf(A)){var t=Z.title.font.size,e=Z._offset+Z._length/2,i=l.l+(Z.position||0)*l.w+("right"===Z.side?10+t*(Z.showticklabels?1:.5):-10-t*(Z.showticklabels?.5:0));et("h"+Z._id+"title",{avoid:{selection:r.select(n).selectAll("g."+Z._id+"tick"),side:A,offsetLeft:l.l,offsetTop:0,maxShift:o.width},attributes:{x:i,y:e,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},a.previousPromises,function(){var r=I+e.outlinewidth/2;if(-1===Z.ticklabelposition.indexOf("inside")&&(r+=f.bBox(J.node()).width),(Q=K.select("text")).node()&&!Q.classed(M.jsPlaceholder)){var i,o=K.select(".h"+Z._id+"title-math-group").node();i=o&&-1!==["top","bottom"].indexOf(A)?f.bBox(o).width:f.bBox(K.node()).right-j-l.l,r=Math.max(r,i)}var s=2*e.xpad+r+e.borderwidth+e.outlinewidth/2,c=q-G;t.select("."+M.cbbg).attr({x:j-e.xpad-(e.borderwidth+e.outlinewidth)/2,y:G-V,width:Math.max(s,2),height:Math.max(c+2*V,2)}).call(p.fill,e.bgcolor).call(p.stroke,e.bordercolor).style("stroke-width",e.borderwidth),t.selectAll("."+M.cboutline).attr({x:j,y:G+e.ypad+("top"===A?tt:0),width:Math.max(I,2),height:Math.max(c-2*e.ypad-tt,2)}).call(p.stroke,e.outlinecolor).style({fill:"none","stroke-width":e.outlinewidth}),t.attr("transform",u(l.l-({center:.5,right:1}[e.xanchor]||0)*s,l.t));var d={},h=k[e.yanchor],g=T[e.yanchor];"pixels"===e.lenmode?(d.y=e.y,d.t=c*h,d.b=c*g):(d.t=d.b=0,d.yt=e.y+e.len*h,d.yb=e.y-e.len*g);var m=k[e.xanchor],v=T[e.xanchor];if("pixels"===e.thicknessmode)d.x=e.x,d.l=s*m,d.r=s*v;else{var y=s-I;d.l=y*m,d.r=y*v,d.xl=e.x-e.thickness*m,d.xr=e.x+e.thickness*v}a.autoMargin(n,e._id,d)}],n)}(n,e,t);v&&v.then&&(t._promises||[]).push(v),t._context.edits.colorbarPosition&&function(t,e,n){var r,i,a,s=n._fullLayout._size;l.init({element:t.node(),gd:n,prepFn:function(){r=t.attr("transform"),h(t)},moveFn:function(n,o){t.attr("transform",r+u(n,o)),i=l.align(e._xLeftFrac+n/s.w,e._thickFrac,0,1,e.xanchor),a=l.align(e._yBottomFrac-o/s.h,e._lenFrac,0,1,e.yanchor);var c=l.getCursor(i,a,e.xanchor,e.yanchor);h(t,c)},doneFn:function(){if(h(t),void 0!==i&&void 0!==a){var r={};r[e._propPrefix+"x"]=i,r[e._propPrefix+"y"]=a,void 0!==e._traceIndex?o.call("_guiRestyle",n,r,e._traceIndex):o.call("_guiRelayout",n,r)}}})}(n,e,t)}),e.exit().each(function(e){a.autoMargin(t,e._id)}).remove(),e.order()}}},{"../../constants/alignment":177,"../../lib":202,"../../lib/extend":196,"../../lib/setcursor":222,"../../lib/svg_text_utils":224,"../../plots/cartesian/axes":248,"../../plots/cartesian/axis_defaults":250,"../../plots/cartesian/layout_attributes":262,"../../plots/cartesian/position_defaults":265,"../../plots/plots":282,"../../registry":290,"../color":75,"../colorscale/helpers":86,"../dragelement":94,"../drawing":97,"../titles":170,"./constants":77,d3:9,tinycolor2:58}],80:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t){return r.isPlainObject(t.colorbar)}},{"../../lib":202}],81:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":76,"./defaults":78,"./draw":79,"./has_colorbar":80}],82:[function(t,e,n){"use strict";var r=t("../colorbar/attributes"),i=t("../../lib/regex").counter,a=t("./scales.js").scales;function o(t){return"`"+t+"`"}Object.keys(a),e.exports=function(t,e){t=t||"";var n,s=(e=e||{}).cLetter||"c",l=("onlyIfNumerical"in e||Boolean(t),"noScale"in e?e.noScale:"marker.line"===t),c="showScaleDflt"in e?e.showScaleDflt:"z"===s,u="string"==typeof e.colorscaleDflt?a[e.colorscaleDflt]:null,d=e.editTypeOverride||"",h=t?t+".":"";"colorAttr"in e?n=e.colorAttr:o(h+(n={z:"z",c:"color"}[s]));var f=s+"auto",p=s+"min",g=s+"max",m=s+"mid",v=(o(h+f),o(h+p),o(h+g),{});v[p]=v[g]=void 0;var y={};y[f]=!1;var b={};return"color"===n&&(b.color={valType:"color",arrayOk:!0,editType:d||"style"},e.anim&&(b.color.anim=!0)),b[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:v},b[p]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:y},b[g]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:y},b[m]={valType:"number",dflt:null,editType:"calc",impliedEdits:v},b.colorscale={valType:"colorscale",editType:"calc",dflt:u,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:!1!==e.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},l||(b.showscale={valType:"boolean",dflt:c,editType:"calc"},b.colorbar=r),e.noColorAxis||(b.coloraxis={valType:"subplotid",regex:i("coloraxis"),dflt:null,editType:"calc"}),b}},{"../../lib/regex":218,"../colorbar/attributes":76,"./scales.js":90}],83:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("./helpers").extractOpts;e.exports=function(t,e,n){var o=t._fullLayout,s=n.vals,l=n.containerStr,c=l?i.nestedProperty(e,l).get():e,u=a(c),d=!1!==u.auto,h=u.min,f=u.max,p=u.mid,g=function(){return i.aggNums(Math.min,null,s)},m=function(){return i.aggNums(Math.max,null,s)};void 0===h?h=g():d&&(h=c._colorAx&&r(h)?Math.min(h,g()):g()),void 0===f?f=m():d&&(f=c._colorAx&&r(f)?Math.max(f,m()):m()),d&&void 0!==p&&(f-p>p-h?h=p-(f-p):f-p<p-h&&(f=p+(p-h))),h===f&&(h-=.5,f+=.5),u._sync("min",h),u._sync("max",f),u.autocolorscale&&u._sync("colorscale",h*f<0?o.colorscale.diverging:h>=0?o.colorscale.sequential:o.colorscale.sequentialminus)}},{"../../lib":202,"./helpers":86,"fast-isnumeric":11}],84:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./helpers").hasColorscale,a=t("./helpers").extractOpts;e.exports=function(t,e){function n(t,e){var n=t["_"+e];void 0!==n&&(t[e]=n)}function o(t,i){var o=i.container?r.nestedProperty(t,i.container).get():t;if(o)if(o.coloraxis)o._colorAx=e[o.coloraxis];else{var s=a(o),l=s.auto;(l||void 0===s.min)&&n(o,i.min),(l||void 0===s.max)&&n(o,i.max),s.autocolorscale&&n(o,"colorscale")}}for(var s=0;s<t.length;s++){var l=t[s],c=l._module.colorbar;if(c)if(Array.isArray(c))for(var u=0;u<c.length;u++)o(l,c[u]);else o(l,c);i(l,"marker.line")&&o(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var d in e._colorAxes)o(e[d],{min:"cmin",max:"cmax"})}},{"../../lib":202,"./helpers":86}],85:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../colorbar/has_colorbar"),o=t("../colorbar/defaults"),s=t("./scales").isValid,l=t("../../registry").traceIs;function c(t,e){var n=e.slice(0,e.length-1);return e?i.nestedProperty(t,n).get()||{}:t}e.exports=function t(e,n,u,d,h){var f=h.prefix,p=h.cLetter,g="_module"in n,m=c(e,f),v=c(n,f),y=c(n._template||{},f)||{},b=function(){return delete e.coloraxis,delete n.coloraxis,t(e,n,u,d,h)};if(g){var x=u._colorAxes||{},_=d(f+"coloraxis");if(_){var w=l(n,"contour")&&i.nestedProperty(n,"contours.coloring").get()||"heatmap",k=x[_];return void(k?(k[2].push(b),k[0]!==w&&(k[0]=!1,i.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[_]=[w,n,[b]])}}var T=m[p+"min"],M=m[p+"max"],A=r(T)&&r(M)&&T<M;d(f+p+"auto",!A)?d(f+p+"mid"):(d(f+p+"min"),d(f+p+"max"));var C,S,D=m.colorscale,O=y.colorscale;void 0!==D&&(C=!s(D)),void 0!==O&&(C=!s(O)),d(f+"autocolorscale",C),d(f+"colorscale"),d(f+"reversescale"),"marker.line."!==f&&(f&&g&&(S=a(m)),d(f+"showscale",S)&&(f&&y&&(v._template=y),o(m,v,u)))}},{"../../lib":202,"../../registry":290,"../colorbar/defaults":78,"../colorbar/has_colorbar":80,"./scales":90,"fast-isnumeric":11}],86:[function(t,e,n){"use strict";var r=t("d3"),i=t("tinycolor2"),a=t("fast-isnumeric"),o=t("../../lib"),s=t("../color"),l=t("./scales").isValid,c=["showscale","autocolorscale","colorscale","reversescale","colorbar"],u=["min","max","mid","auto"];function d(t){var e,n,r,i=t._colorAx,a=i||t,o={};for(n=0;n<c.length;n++)o[r=c[n]]=a[r];if(i)for(e="c",n=0;n<u.length;n++)o[r=u[n]]=a["c"+r];else{var s;for(n=0;n<u.length;n++)((s="c"+(r=u[n]))in a||(s="z"+r)in a)&&(o[r]=a[s]);e=s.charAt(0)}return o._sync=function(t,n){var r=-1!==u.indexOf(t)?e+t:t;a[r]=a["_"+r]=n},o}function h(t){for(var e=d(t),n=e.min,r=e.max,i=e.reversescale?f(e.colorscale):e.colorscale,a=i.length,o=new Array(a),s=new Array(a),l=0;l<a;l++){var c=i[l];o[l]=n+c[0]*(r-n),s[l]=c[1]}return{domain:o,range:s}}function f(t){for(var e=t.length,n=new Array(e),r=e-1,i=0;r>=0;r--,i++){var a=t[r];n[i]=[1-a[0],a[1]]}return n}function p(t,e){e=e||{};for(var n=t.domain,o=t.range,l=o.length,c=new Array(l),u=0;u<l;u++){var d=i(o[u]).toRgb();c[u]=[d.r,d.g,d.b,d.a]}var h,f=r.scale.linear().domain(n).range(c).clamp(!0),p=e.noNumericCheck,m=e.returnArray;return(h=p&&m?f:p?function(t){return g(f(t))}:m?function(t){return a(t)?f(t):i(t).isValid()?t:s.defaultLine}:function(t){return a(t)?g(f(t)):i(t).isValid()?t:s.defaultLine}).domain=f.domain,h.range=function(){return o},h}function g(t){return i({r:t[0],g:t[1],b:t[2],a:t[3]}).toRgbString()}e.exports={hasColorscale:function(t,e,n){var r=e?o.nestedProperty(t,e).get()||{}:t,i=r[n||"color"],s=!1;if(o.isArrayOrTypedArray(i))for(var c=0;c<i.length;c++)if(a(i[c])){s=!0;break}return o.isPlainObject(r)&&(s||!0===r.showscale||a(r.cmin)&&a(r.cmax)||l(r.colorscale)||o.isPlainObject(r.colorbar))},extractOpts:d,extractScale:h,flipScale:f,makeColorScaleFunc:p,makeColorScaleFuncFromTrace:function(t,e){return p(h(t),e)}}},{"../../lib":202,"../color":75,"./scales":90,d3:9,"fast-isnumeric":11,tinycolor2:58}],87:[function(t,e,n){"use strict";var r=t("./scales"),i=t("./helpers");e.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:i.hasColorscale,extractOpts:i.extractOpts,extractScale:i.extractScale,flipScale:i.flipScale,makeColorScaleFunc:i.makeColorScaleFunc,makeColorScaleFuncFromTrace:i.makeColorScaleFuncFromTrace}},{"./attributes":82,"./calc":83,"./cross_trace_defaults":84,"./defaults":85,"./helpers":86,"./layout_attributes":88,"./layout_defaults":89,"./scales":90}],88:[function(t,e,n){"use strict";var r=t("../../lib/extend").extendFlat,i=t("./attributes"),a=t("./scales").scales;e.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:a.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":196,"./attributes":82,"./scales":90}],89:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plot_api/plot_template"),a=t("./layout_attributes"),o=t("./defaults");e.exports=function(t,e){function n(n,i){return r.coerce(t,e,a,n,i)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var s,l,c=e._colorAxes;function u(t,e){return r.coerce(s,l,a.coloraxis,t,e)}for(var d in c){var h=c[d];if(h[0])s=t[d]||{},(l=i.newContainer(e,d,"coloraxis"))._name=d,o(s,l,e,u,{prefix:"",cLetter:"c"});else{for(var f=0;f<h[2].length;f++)h[2][f]();delete e._colorAxes[d]}}}},{"../../lib":202,"../../plot_api/plot_template":237,"./defaults":85,"./layout_attributes":88}],90:[function(t,e,n){"use strict";var r=t("tinycolor2"),i={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=i.RdBu;function o(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var n=0;n<t.length;n++){var i=t[n];if(2!==i.length||+i[0]<e||!r(i[1]).isValid())return!1;e=+i[0]}return!0}e.exports={scales:i,defaultScale:a,get:function(t,e){if(e||(e=a),!t)return e;function n(){try{t=i[t]||JSON.parse(t)}catch(n){t=e}}return"string"==typeof t&&(n(),"string"==typeof t&&n()),o(t)?t:e},isValid:function(t){return void 0!==i[t]||o(t)}}},{tinycolor2:58}],91:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){var a=(t-n)/(r-n),o=a+e/(r-n),s=(a+o)/2;return"left"===i||"bottom"===i?a:"center"===i||"middle"===i?s:"right"===i||"top"===i?o:a<2/3-s?a:o>4/3-s?o:s}},{}],92:[function(t,e,n){"use strict";var r=t("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(t,e,n,a){return t="left"===n?0:"center"===n?1:"right"===n?2:r.constrain(Math.floor(3*t),0,2),e="bottom"===a?0:"middle"===a?1:"top"===a?2:r.constrain(Math.floor(3*e),0,2),i[e][t]}},{"../../lib":202}],93:[function(t,e,n){"use strict";n.selectMode=function(t){return"lasso"===t||"select"===t},n.drawMode=function(t){return"drawclosedpath"===t||"drawopenpath"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},n.openMode=function(t){return"drawline"===t||"drawopenpath"===t},n.rectMode=function(t){return"select"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},n.freeMode=function(t){return"lasso"===t||"drawclosedpath"===t||"drawopenpath"===t},n.selectingOrDrawing=function(t){return n.freeMode(t)||n.rectMode(t)}},{}],94:[function(t,e,n){"use strict";var r=t("mouse-event-offset"),i=t("has-hover"),a=t("has-passive-events"),o=t("../../lib").removeElement,s=t("../../plots/cartesian/constants"),l=e.exports={};l.align=t("./align"),l.getCursor=t("./cursor");var c=t("./unhover");function u(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function d(t){return r(t.changedTouches?t.changedTouches[0]:t,document.body)}l.unhover=c.wrapped,l.unhoverRaw=c.raw,l.init=function(t){var e,n,r,c,h,f,p,g,m=t.gd,v=1,y=m._context.doubleClickDelay,b=t.element;m._mouseDownTime||(m._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=_,a?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=_,b.addEventListener("touchstart",_,{passive:!1})):b.ontouchstart=_;var x=t.clampFn||function(t,e,n){return Math.abs(t)<n&&(t=0),Math.abs(e)<n&&(e=0),[t,e]};function _(a){m._dragged=!1,m._dragging=!0;var o=d(a);e=o[0],n=o[1],p=a.target,f=a,g=2===a.buttons||a.ctrlKey,void 0===a.clientX&&void 0===a.clientY&&(a.clientX=e,a.clientY=n),(r=(new Date).getTime())-m._mouseDownTime<y?v+=1:(v=1,m._mouseDownTime=r),t.prepFn&&t.prepFn(a,e,n),i&&!g?(h=u()).style.cursor=window.getComputedStyle(b).cursor:i||(h=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),!1!==t.dragmode&&(a.preventDefault(),document.addEventListener("mousemove",w),document.addEventListener("touchmove",w,{passive:!1}))}function w(r){r.preventDefault();var i=d(r),a=x(i[0]-e,i[1]-n,t.minDrag||s.MINDRAG),o=a[0],c=a[1];(o||c)&&(m._dragged=!0,l.unhover(m)),m._dragged&&t.moveFn&&!g&&(m._dragdata={element:b,dx:o,dy:c},t.moveFn(o,c))}function k(e){if(delete m._dragdata,!1!==t.dragmode&&(e.preventDefault(),document.removeEventListener("mousemove",w),document.removeEventListener("touchmove",w)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),i?o(h):c&&(h.documentElement.style.cursor=c,c=null),m._dragging){if(m._dragging=!1,(new Date).getTime()-m._mouseDownTime>y&&(v=Math.max(v-1,1)),m._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(v,f),!g){var n;try{n=new MouseEvent("click",e)}catch(t){var r=d(e);(n=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,r[0],r[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}p.dispatchEvent(n)}m._dragging=!1,m._dragged=!1}else m._dragged=!1}},l.coverSlip=u},{"../../lib":202,"../../plots/cartesian/constants":254,"./align":91,"./cursor":92,"./unhover":95,"has-hover":42,"has-passive-events":43,"mouse-event-offset":47}],95:[function(t,e,n){"use strict";var r=t("../../lib/events"),i=t("../../lib/throttle"),a=t("../../lib/dom").getGraphDiv,o=t("../fx/constants"),s=e.exports={};s.wrapped=function(t,e,n){(t=a(t))._fullLayout&&i.clear(t._fullLayout._uid+o.HOVERID),s.raw(t,e,n)},s.raw=function(t,e){var n=t._fullLayout,i=t._hoverdata;e||(e={}),e.target&&!1===r.triggerHandler(t,"plotly_beforehover",e)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&i&&t.emit("plotly_unhover",{event:e,points:i}))}},{"../../lib/dom":194,"../../lib/events":195,"../../lib/throttle":225,"../fx/constants":109}],96:[function(t,e,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],97:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("tinycolor2"),o=t("../../registry"),s=t("../color"),l=t("../colorscale"),c=t("../../lib"),u=c.strTranslate,d=t("../../lib/svg_text_utils"),h=t("../../constants/xmlns_namespaces"),f=t("../../constants/alignment").LINE_SPACING,p=t("../../constants/interactions").DESELECTDIM,g=t("../../traces/scatter/subtypes"),m=t("../../traces/scatter/make_bubble_size_func"),v=t("../../components/fx/helpers").appendArrayPointValue,y=e.exports={};y.font=function(t,e,n,r){c.isPlainObject(e)&&(r=e.color,n=e.size,e=e.family),e&&t.style("font-family",e),n+1&&t.style("font-size",n+"px"),r&&t.call(s.fill,r)},y.setPosition=function(t,e,n){t.attr("x",e).attr("y",n)},y.setSize=function(t,e,n){t.attr("width",e).attr("height",n)},y.setRect=function(t,e,n,r,i){t.call(y.setPosition,e,n).call(y.setSize,r,i)},y.translatePoint=function(t,e,n,r){var a=n.c2p(t.x),o=r.c2p(t.y);return!!(i(a)&&i(o)&&e.node())&&("text"===e.node().nodeName?e.attr("x",a).attr("y",o):e.attr("transform",u(a,o)),!0)},y.translatePoints=function(t,e,n){t.each(function(t){var i=r.select(this);y.translatePoint(t,i,e,n)})},y.hideOutsideRangePoint=function(t,e,n,r,i,a){e.attr("display",n.isPtWithinRange(t,i)&&r.isPtWithinRange(t,a)?null:"none")},y.hideOutsideRangePoints=function(t,e){if(e._hasClipOnAxisFalse){var n=e.xaxis,i=e.yaxis;t.each(function(e){var a=e[0].trace,s=a.xcalendar,l=a.ycalendar,c=o.traceIs(a,"bar-like")?".bartext":".point,.textpoint";t.selectAll(c).each(function(t){y.hideOutsideRangePoint(t,r.select(this),n,i,s,l)})})}},y.crispRound=function(t,e,n){return e&&i(e)?t._context.staticPlot?e:e<1?1:Math.round(e):n||0},y.singleLineStyle=function(t,e,n,r,i){e.style("fill","none");var a=(((t||[])[0]||{}).trace||{}).line||{},o=n||a.width||0,l=i||a.dash||"";s.stroke(e,r||a.color),y.dashLine(e,l,o)},y.lineGroupStyle=function(t,e,n,i){t.style("fill","none").each(function(t){var a=(((t||[])[0]||{}).trace||{}).line||{},o=e||a.width||0,l=i||a.dash||"";r.select(this).call(s.stroke,n||a.color).call(y.dashLine,l,o)})},y.dashLine=function(t,e,n){e=y.dashStyle(e,n=+n||0),t.style({"stroke-dasharray":e,"stroke-width":n+"px"})},y.dashStyle=function(t,e){e=+e||1;var n=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=n+"px,"+n+"px":"dash"===t?t=3*n+"px,"+3*n+"px":"longdash"===t?t=5*n+"px,"+5*n+"px":"dashdot"===t?t=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===t&&(t=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),t},y.singleFillStyle=function(t){var e=(((r.select(t.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;e&&t.call(s.fill,e)},y.fillGroupStyle=function(t){t.style("stroke-width",0).each(function(t){var e=r.select(this);t[0].trace&&e.call(s.fill,t[0].trace.fillcolor)})};var b=t("./symbol_defs");y.symbolNames=[],y.symbolFuncs=[],y.symbolNeedLines={},y.symbolNoDot={},y.symbolNoFill={},y.symbolList=[],Object.keys(b).forEach(function(t){var e=b[t],n=e.n;y.symbolList.push(n,String(n),t,n+100,String(n+100),t+"-open"),y.symbolNames[n]=t,y.symbolFuncs[n]=e.f,e.needLine&&(y.symbolNeedLines[n]=!0),e.noDot?y.symbolNoDot[n]=!0:y.symbolList.push(n+200,String(n+200),t+"-dot",n+300,String(n+300),t+"-open-dot"),e.noFill&&(y.symbolNoFill[n]=!0)});var x=y.symbolNames.length;function _(t,e){return y.symbolFuncs[t%100](e)+(t>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}y.symbolNumber=function(t){if(i(t))t=+t;else if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=y.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=x||t>=400?0:Math.floor(Math.max(t,0))};var w={x1:1,x2:0,y1:0,y2:0},k={x1:0,x2:0,y1:1,y2:0},T=r.format("~.1f"),M={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:k},verticalreversed:{node:"linearGradient",attrs:k,reversed:!0}};y.gradient=function(t,e,n,i,o,l){for(var u=o.length,d=M[i],h=new Array(u),f=0;f<u;f++)d.reversed?h[u-1-f]=[T(100*(1-o[f][0])),o[f][1]]:h[f]=[T(100*o[f][0]),o[f][1]];var p=e._fullLayout,g="g"+p._uid+"-"+n,m=p._defs.select(".gradients").selectAll("#"+g).data([i+h.join(";")],c.identity);m.exit().remove(),m.enter().append(d.node).each(function(){var t=r.select(this);d.attrs&&t.attr(d.attrs),t.attr("id",g);var e=t.selectAll("stop").data(h);e.exit().remove(),e.enter().append("stop"),e.each(function(t){var e=a(t[1]);r.select(this).attr({offset:t[0]+"%","stop-color":s.tinyRGB(e),"stop-opacity":e.getAlpha()})})}),t.style(l,I(g,e)).style(l+"-opacity",null);var v=function(t){return"."+t.attr("class").replace(/\s/g,".")},y=v(r.select(t.node().parentNode))+">"+v(t);p._gradientUrlQueryParts[y]=1},y.initGradients=function(t){var e=t._fullLayout;c.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),e._gradientUrlQueryParts={}},y.pointStyle=function(t,e,n){if(t.size()){var i=y.makePointStyleFns(e);t.each(function(t){y.singlePointStyle(t,r.select(this),e,i,n)})}},y.singlePointStyle=function(t,e,n,r,i){var a=n.marker,o=a.line;if(e.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(t):void 0===t.mo?a.opacity:t.mo),r.ms2mrc){var l;l="various"===t.ms||"various"===a.size?3:r.ms2mrc(t.ms),t.mrc=l,r.selectedSizeFn&&(l=t.mrc=r.selectedSizeFn(t));var u=y.symbolNumber(t.mx||a.symbol)||0;t.om=u%200>=100,e.attr("d",_(u,l))}var d,h,f,p=!1;if(t.so?(f=o.outlierwidth,h=o.outliercolor,d=a.outliercolor):(f=(t.mlw+1||(o||{}).width+1||(t.trace?(t.trace.marker.line||{}).width:0)+1)-1||0,h="mlc"in t?t.mlcc=r.lineScale(t.mlc):c.isArrayOrTypedArray(o.color)?s.defaultLine:o.color,c.isArrayOrTypedArray(a.color)&&(d=s.defaultLine,p=!0),d="mc"in t?t.mcc=r.markerScale(t.mc):a.color||"rgba(0,0,0,0)",r.selectedColorFn&&(d=r.selectedColorFn(t))),t.om)e.call(s.stroke,d).style({"stroke-width":(f||1)+"px",fill:"none"});else{e.style("stroke-width",(t.isBlank?0:f)+"px");var g=a.gradient,m=t.mgt;if(m?p=!0:m=g&&g.type,Array.isArray(m)&&(M[m=m[0]]||(m=0)),m&&"none"!==m){var v=t.mgc;v?p=!0:v=g.color;var b=n.uid;p&&(b+="-"+t.i),y.gradient(e,i,b,m,[[0,v],[1,d]],"fill")}else s.fill(e,d);f&&s.stroke(e,h)}},y.makePointStyleFns=function(t){var e={},n=t.marker;return e.markerScale=y.tryColorscale(n,""),e.lineScale=y.tryColorscale(n,"line"),o.traceIs(t,"symbols")&&(e.ms2mrc=g.isBubble(t)?m(t):function(){return(n.size||6)/2}),t.selectedpoints&&c.extendFlat(e,y.makeSelectedPointStyleFns(t)),e},y.makeSelectedPointStyleFns=function(t){var e={},n=t.marker||{},r=(t.selected||{}).marker||{},i=(t.unselected||{}).marker||{},a=r.opacity,s=i.opacity,l=void 0!==a,u=void 0!==s;(c.isArrayOrTypedArray(n.opacity)||l||u)&&(e.selectedOpacityFn=function(t){var e=void 0===t.mo?n.opacity:t.mo;return t.selected?l?a:e:u?s:p*e});var d=n.color,h=r.color,f=i.color;(h||f)&&(e.selectedColorFn=function(t){var e=t.mcc||d;return t.selected?h||e:f||e});var g=n.size,m=r.size,v=i.size,y=void 0!==m,b=void 0!==v;return o.traceIs(t,"symbols")&&(y||b)&&(e.selectedSizeFn=function(t){var e=t.mrc||g/2;return t.selected?y?m/2:e:b?v/2:e}),e},y.makeSelectedTextStyleFns=function(t){var e={},n=(t.textfont||{}).color,r=((t.selected||{}).textfont||{}).color,i=((t.unselected||{}).textfont||{}).color;return e.selectedTextColorFn=function(t){var e=t.tc||n;return t.selected?r||e:i||(r?e:s.addOpacity(e,p))},e},y.selectedPointStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=y.makeSelectedPointStyleFns(e),i=e.marker||{},a=[];n.selectedOpacityFn&&a.push(function(t,e){t.style("opacity",n.selectedOpacityFn(e))}),n.selectedColorFn&&a.push(function(t,e){s.fill(t,n.selectedColorFn(e))}),n.selectedSizeFn&&a.push(function(t,e){var r=e.mx||i.symbol||0,a=n.selectedSizeFn(e);t.attr("d",_(y.symbolNumber(r),a)),e.mrc2=a}),a.length&&t.each(function(t){for(var e=r.select(this),n=0;n<a.length;n++)a[n](e,t)})}},y.tryColorscale=function(t,e){var n=e?c.nestedProperty(t,e).get():t;return n&&(n.colorscale||n._colorAx)&&c.isArrayOrTypedArray(n.color)?l.makeColorScaleFuncFromTrace(n):c.identity};var A={start:1,end:-1,middle:0,bottom:1,top:-1};function C(t,e,n,i){var a=r.select(t.node().parentNode),o=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",s=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",l=i?i/.8+1:0,c=(d.lineCount(t)-1)*f+1,h=A[s]*l,p=.75*n+A[o]*l+(A[o]-1)*c*n/2;t.attr("text-anchor",s),a.attr("transform",u(h,p))}function S(t,e){var n=t.ts||e.textfont.size;return i(n)&&n>0?n:0}function D(t,e,n,i){var a=t[0]-e[0],o=t[1]-e[1],s=n[0]-e[0],l=n[1]-e[1],c=Math.pow(a*a+o*o,.25),u=Math.pow(s*s+l*l,.25),d=(u*u*a-c*c*s)*i,h=(u*u*o-c*c*l)*i,f=3*u*(c+u),p=3*c*(c+u);return[[r.round(e[0]+(f&&d/f),2),r.round(e[1]+(f&&h/f),2)],[r.round(e[0]-(p&&d/p),2),r.round(e[1]-(p&&h/p),2)]]}y.textPointStyle=function(t,e,n){if(t.size()){var i;if(e.selectedpoints){var a=y.makeSelectedTextStyleFns(e);i=a.selectedTextColorFn}var o=e.texttemplate,s=n._fullLayout;t.each(function(t){var a=r.select(this),l=o?c.extractOption(t,e,"txt","texttemplate"):c.extractOption(t,e,"tx","text");if(l||0===l){if(o){var u=e._module.formatLabels?e._module.formatLabels(t,e,s):{},h={};v(h,e,t.i),l=c.texttemplateString(l,u,s._d3locale,h,t,e._meta||{})}var f=t.tp||e.textposition,p=S(t,e),g=i?i(t):t.tc||e.textfont.color;a.call(y.font,t.tf||e.textfont.family,p,g).text(l).call(d.convertToTspans,n).call(C,f,p,t.mrc)}else a.remove()})}},y.selectedTextStyle=function(t,e){if(t.size()&&e.selectedpoints){var n=y.makeSelectedTextStyleFns(e);t.each(function(t){var i=r.select(this),a=n.selectedTextColorFn(t),o=t.tp||e.textposition,l=S(t,e);s.fill(i,a),C(i,o,l,t.mrc2||t.mrc)})}},y.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var n,r="M"+t[0],i=[];for(n=1;n<t.length-1;n++)i.push(D(t[n-1],t[n],t[n+1],e));for(r+="Q"+i[0][0]+" "+t[1],n=2;n<t.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+t[n];return r+"Q"+i[t.length-3][1]+" "+t[t.length-1]},y.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var n,r="M"+t[0],i=t.length-1,a=[D(t[i],t[0],t[1],e)];for(n=1;n<i;n++)a.push(D(t[n-1],t[n],t[n+1],e));for(a.push(D(t[i-1],t[i],t[0],e)),n=1;n<=i;n++)r+="C"+a[n-1][1]+" "+a[n][0]+" "+t[n];return r+"C"+a[i][1]+" "+a[0][0]+" "+t[0]+"Z"};var O={hv:function(t,e){return"H"+r.round(e[0],2)+"V"+r.round(e[1],2)},vh:function(t,e){return"V"+r.round(e[1],2)+"H"+r.round(e[0],2)},hvh:function(t,e){return"H"+r.round((t[0]+e[0])/2,2)+"V"+r.round(e[1],2)+"H"+r.round(e[0],2)},vhv:function(t,e){return"V"+r.round((t[1]+e[1])/2,2)+"H"+r.round(e[0],2)+"V"+r.round(e[1],2)}},E=function(t,e){return"L"+r.round(e[0],2)+","+r.round(e[1],2)};y.steps=function(t){var e=O[t]||E;return function(t){for(var n="M"+r.round(t[0][0],2)+","+r.round(t[0][1],2),i=1;i<t.length;i++)n+=e(t[i-1],t[i]);return n}},y.makeTester=function(){var t=c.ensureSingleById(r.select("body"),"svg","js-plotly-tester",function(t){t.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),e=c.ensureSingle(t,"path","js-reference-point",function(t){t.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});y.tester=t,y.testref=e},y.savedBBoxes={};var L=0;function P(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}function I(t,e){if(!t)return null;var n=e._context;return"url('"+(n._exportedPlot?"":n._baseUrl||"")+"#"+t+"')"}y.bBox=function(t,e,n){var i,a,o;if(n||(n=P(t)),n){if(i=y.savedBBoxes[n])return c.extendFlat({},i)}else if(1===t.childNodes.length){var s=t.childNodes[0];if(n=P(s)){var l=+s.getAttribute("x")||0,u=+s.getAttribute("y")||0,h=s.getAttribute("transform");if(!h){var f=y.bBox(s,!1,n);return l&&(f.left+=l,f.right+=l),u&&(f.top+=u,f.bottom+=u),f}if(i=y.savedBBoxes[n+="~"+l+"~"+u+"~"+h])return c.extendFlat({},i)}}e?a=t:(o=y.tester.node(),a=t.cloneNode(!0),o.appendChild(a)),r.select(a).attr("transform",null).call(d.positionText,0,0);var p=a.getBoundingClientRect(),g=y.testref.node().getBoundingClientRect();e||o.removeChild(a);var m={height:p.height,width:p.width,left:p.left-g.left,top:p.top-g.top,right:p.right-g.left,bottom:p.bottom-g.top};return L>=1e4&&(y.savedBBoxes={},L=0),n&&(y.savedBBoxes[n]=m),L++,c.extendFlat({},m)},y.setClipUrl=function(t,e,n){t.attr("clip-path",I(e,n))},y.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},y.setTranslate=function(t,e,n){var r=t.attr?"attr":"setAttribute",i=t[t.attr?"attr":"getAttribute"]("transform")||"";return e=e||0,n=n||0,i=i.replace(/(\btranslate\(.*?\);?)/,"").trim(),i=(i+=u(e,n)).trim(),t[r]("transform",i),i},y.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(t,e,n){return[e,n].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},y.setScale=function(t,e,n){var r=t.attr?"attr":"setAttribute",i=t[t.attr?"attr":"getAttribute"]("transform")||"";return e=e||1,n=n||1,i=i.replace(/(\bscale\(.*?\);?)/,"").trim(),i=(i+="scale("+e+","+n+")").trim(),t[r]("transform",i),i};var R=/\s*sc.*/;y.setPointGroupScale=function(t,e,n){if(e=e||1,n=n||1,t){var r=1===e&&1===n?"":"scale("+e+","+n+")";t.each(function(){var t=(this.getAttribute("transform")||"").replace(R,"");t=(t+=r).trim(),this.setAttribute("transform",t)})}};var N=/translate\([^)]*\)\s*$/;y.setTextPointsScale=function(t,e,n){t&&t.each(function(){var t,i=r.select(this),a=i.select("text");if(a.node()){var o=parseFloat(a.attr("x")||0),s=parseFloat(a.attr("y")||0),l=(i.attr("transform")||"").match(N);t=1===e&&1===n?[]:[u(o,s),"scale("+e+","+n+")",u(-o,-s)],l&&t.push(l),i.attr("transform",t.join(""))}})}},{"../../components/fx/helpers":111,"../../constants/alignment":177,"../../constants/interactions":180,"../../constants/xmlns_namespaces":182,"../../lib":202,"../../lib/svg_text_utils":224,"../../registry":290,"../../traces/scatter/make_bubble_size_func":347,"../../traces/scatter/subtypes":355,"../color":75,"../colorscale":87,"./symbol_defs":98,d3:9,"fast-isnumeric":11,tinycolor2:58}],98:[function(t,e,n){"use strict";var r=t("d3");e.exports={circle:{n:0,f:function(t){var e=r.round(t,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(t){var e=r.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(t){var e=r.round(.4*t,2),n=r.round(1.2*t,2);return"M"+n+","+e+"H"+e+"V"+n+"H-"+e+"V"+e+"H-"+n+"V-"+e+"H-"+e+"V-"+n+"H"+e+"V-"+e+"H"+n+"Z"}},x:{n:4,f:function(t){var e=r.round(.8*t/Math.sqrt(2),2),n="l"+e+","+e,i="l"+e+",-"+e,a="l-"+e+",-"+e,o="l-"+e+","+e;return"M0,"+e+n+i+a+i+a+o+a+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(t){var e=r.round(2*t/Math.sqrt(3),2);return"M-"+e+","+r.round(t/2,2)+"H"+e+"L0,-"+r.round(t,2)+"Z"}},"triangle-down":{n:6,f:function(t){var e=r.round(2*t/Math.sqrt(3),2);return"M-"+e+",-"+r.round(t/2,2)+"H"+e+"L0,"+r.round(t,2)+"Z"}},"triangle-left":{n:7,f:function(t){var e=r.round(2*t/Math.sqrt(3),2);return"M"+r.round(t/2,2)+",-"+e+"V"+e+"L-"+r.round(t,2)+",0Z"}},"triangle-right":{n:8,f:function(t){var e=r.round(2*t/Math.sqrt(3),2);return"M-"+r.round(t/2,2)+",-"+e+"V"+e+"L"+r.round(t,2)+",0Z"}},"triangle-ne":{n:9,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M-"+n+",-"+e+"H"+e+"V"+n+"Z"}},"triangle-se":{n:10,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M"+e+",-"+n+"V"+e+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M"+n+","+e+"H-"+e+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(t){var e=r.round(.6*t,2),n=r.round(1.2*t,2);return"M-"+e+","+n+"V-"+e+"H"+n+"Z"}},pentagon:{n:13,f:function(t){var e=r.round(.951*t,2),n=r.round(.588*t,2),i=r.round(-t,2),a=r.round(-.309*t,2);return"M"+e+","+a+"L"+n+","+r.round(.809*t,2)+"H-"+n+"L-"+e+","+a+"L0,"+i+"Z"}},hexagon:{n:14,f:function(t){var e=r.round(t,2),n=r.round(t/2,2),i=r.round(t*Math.sqrt(3)/2,2);return"M"+i+",-"+n+"V"+n+"L0,"+e+"L-"+i+","+n+"V-"+n+"L0,-"+e+"Z"}},hexagon2:{n:15,f:function(t){var e=r.round(t,2),n=r.round(t/2,2),i=r.round(t*Math.sqrt(3)/2,2);return"M-"+n+","+i+"H"+n+"L"+e+",0L"+n+",-"+i+"H-"+n+"L-"+e+",0Z"}},octagon:{n:16,f:function(t){var e=r.round(.924*t,2),n=r.round(.383*t,2);return"M-"+n+",-"+e+"H"+n+"L"+e+",-"+n+"V"+n+"L"+n+","+e+"H-"+n+"L-"+e+","+n+"V-"+n+"Z"}},star:{n:17,f:function(t){var e=1.4*t,n=r.round(.225*e,2),i=r.round(.951*e,2),a=r.round(.363*e,2),o=r.round(.588*e,2),s=r.round(-e,2),l=r.round(-.309*e,2),c=r.round(.118*e,2),u=r.round(.809*e,2);return"M"+n+","+l+"H"+i+"L"+a+","+c+"L"+o+","+u+"L0,"+r.round(.382*e,2)+"L-"+o+","+u+"L-"+a+","+c+"L-"+i+","+l+"H-"+n+"L0,"+s+"Z"}},hexagram:{n:18,f:function(t){var e=r.round(.66*t,2),n=r.round(.38*t,2),i=r.round(.76*t,2);return"M-"+i+",0l-"+n+",-"+e+"h"+i+"l"+n+",-"+e+"l"+n+","+e+"h"+i+"l-"+n+","+e+"l"+n+","+e+"h-"+i+"l-"+n+","+e+"l-"+n+",-"+e+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(t){var e=r.round(t*Math.sqrt(3)*.8,2),n=r.round(.8*t,2),i=r.round(1.6*t,2),a=r.round(4*t,2),o="A "+a+","+a+" 0 0 1 ";return"M-"+e+","+n+o+e+","+n+o+"0,-"+i+o+"-"+e+","+n+"Z"}},"star-triangle-down":{n:20,f:function(t){var e=r.round(t*Math.sqrt(3)*.8,2),n=r.round(.8*t,2),i=r.round(1.6*t,2),a=r.round(4*t,2),o="A "+a+","+a+" 0 0 1 ";return"M"+e+",-"+n+o+"-"+e+",-"+n+o+"0,"+i+o+e+",-"+n+"Z"}},"star-square":{n:21,f:function(t){var e=r.round(1.1*t,2),n=r.round(2*t,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+e+",-"+e+i+"-"+e+","+e+i+e+","+e+i+e+",-"+e+i+"-"+e+",-"+e+"Z"}},"star-diamond":{n:22,f:function(t){var e=r.round(1.4*t,2),n=r.round(1.9*t,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+e+",0"+i+"0,"+e+i+e+",0"+i+"0,-"+e+i+"-"+e+",0Z"}},"diamond-tall":{n:23,f:function(t){var e=r.round(.7*t,2),n=r.round(1.4*t,2);return"M0,"+n+"L"+e+",0L0,-"+n+"L-"+e+",0Z"}},"diamond-wide":{n:24,f:function(t){var e=r.round(1.4*t,2),n=r.round(.7*t,2);return"M0,"+n+"L"+e+",0L0,-"+n+"L-"+e+",0Z"}},hourglass:{n:25,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(t){var e=r.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t){var e=r.round(t,2),n=r.round(t/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t){var e=r.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t){var e=r.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t){var e=r.round(1.3*t,2),n=r.round(.65*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t){var e=r.round(1.4*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t){var e=r.round(1.2*t,2),n=r.round(.85*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t){var e=r.round(t/2,2),n=r.round(t,2);return"M"+e+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+e+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M-"+e+","+i+"L0,0M"+e+","+i+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M-"+e+",-"+i+"L0,0M"+e+",-"+i+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M"+i+","+e+"L0,0M"+i+",-"+e+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t){var e=r.round(1.2*t,2),n=r.round(1.6*t,2),i=r.round(.8*t,2);return"M-"+i+","+e+"L0,0M-"+i+",-"+e+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t){var e=r.round(1.4*t,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t){var e=r.round(1.4*t,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t){var e=r.round(t,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t){var e=r.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(t){var e=r.round(t,2);return"M0,0L-"+e+","+r.round(2*t,2)+"H"+e+"Z"},noDot:!0},"arrow-down":{n:46,f:function(t){var e=r.round(t,2);return"M0,0L-"+e+",-"+r.round(2*t,2)+"H"+e+"Z"},noDot:!0},"arrow-left":{n:47,f:function(t){var e=r.round(2*t,2),n=r.round(t,2);return"M0,0L"+e+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-right":{n:48,f:function(t){var e=r.round(2*t,2),n=r.round(t,2);return"M0,0L-"+e+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(t){var e=r.round(t,2);return"M-"+e+",0H"+e+"M0,0L-"+e+","+r.round(2*t,2)+"H"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(t){var e=r.round(t,2);return"M-"+e+",0H"+e+"M0,0L-"+e+",-"+r.round(2*t,2)+"H"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(t){var e=r.round(2*t,2),n=r.round(t,2);return"M0,-"+n+"V"+n+"M0,0L"+e+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(t){var e=r.round(2*t,2),n=r.round(t,2);return"M0,-"+n+"V"+n+"M0,0L-"+e+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0}}},{d3:9}],99:[function(t,e,n){"use strict";e.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],100:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../registry"),a=t("../../plots/cartesian/axes"),o=t("../../lib"),s=t("./compute_error");function l(t,e,n,i){var l=e["error_"+i]||{},c=[];if(l.visible&&-1!==["linear","log"].indexOf(n.type)){for(var u=s(l),d=0;d<t.length;d++){var h=t[d],f=h.i;if(void 0===f)f=d;else if(null===f)continue;var p=h[i];if(r(n.c2l(p))){var g=u(p,f);if(r(g[0])&&r(g[1])){var m=h[i+"s"]=p-g[0],v=h[i+"h"]=p+g[1];c.push(m,v)}}}var y=e._extremes[n._id],b=a.findExtremes(n,c,o.extendFlat({tozero:y.opts.tozero},{padded:!0}));y.min=y.min.concat(b.min),y.max=y.max.concat(b.max)}}e.exports=function(t){for(var e=t.calcdata,n=0;n<e.length;n++){var r=e[n],o=r[0].trace;if(!0===o.visible&&i.traceIs(o,"errorBarsOK")){var s=a.getFromId(t,o.xaxis),c=a.getFromId(t,o.yaxis);l(r,o,s,"x"),l(r,o,c,"y")}}}},{"../../lib":202,"../../plots/cartesian/axes":248,"../../registry":290,"./compute_error":101,"fast-isnumeric":11}],101:[function(t,e,n){"use strict";function r(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}e.exports=function(t){var e=t.type,n=t.symmetric;if("data"===e){var i=t.array||[];if(n)return function(t,e){var n=+i[e];return[n,n]};var a=t.arrayminus||[];return function(t,e){var n=+i[e],r=+a[e];return isNaN(n)&&isNaN(r)?[NaN,NaN]:[r||0,n||0]}}var o=r(e,t.value),s=r(e,t.valueminus);return n||void 0===t.valueminus?function(t){var e=o(t);return[e,e]}:function(t){return[s(t),o(t)]}}},{}],102:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../registry"),a=t("../../lib"),o=t("../../plot_api/plot_template"),s=t("./attributes");e.exports=function(t,e,n,l){var c="error_"+l.axis,u=o.newContainer(e,c),d=t[c]||{};function h(t,e){return a.coerce(d,u,s,t,e)}if(!1!==h("visible",void 0!==d.array||void 0!==d.value||"sqrt"===d.type)){var f=h("type","array"in d?"data":"percent"),p=!0;"sqrt"!==f&&(p=h("symmetric",!(("data"===f?"arrayminus":"valueminus")in d))),"data"===f?(h("array"),h("traceref"),p||(h("arrayminus"),h("tracerefminus"))):"percent"!==f&&"constant"!==f||(h("value"),p||h("valueminus"));var g="copy_"+l.inherit+"style";l.inherit&&(e["error_"+l.inherit]||{}).visible&&h(g,!(d.color||r(d.thickness)||r(d.width))),l.inherit&&u[g]||(h("color",n),h("thickness"),h("width",i.traceIs(e,"gl3d")?0:4))}}},{"../../lib":202,"../../plot_api/plot_template":237,"../../registry":290,"./attributes":99,"fast-isnumeric":11}],103:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plot_api/edit_types").overrideAll,a=t("./attributes"),o={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a)};delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle;var s={error_x:r.extendFlat({},a),error_y:r.extendFlat({},a),error_z:r.extendFlat({},a)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,e.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:i(s,"calc","nested"),scattergl:i(o,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:function(t,e,n){(e.error_y||{}).visible&&(n.yerr=t.yh-t.y,e.error_y.symmetric||(n.yerrneg=t.y-t.ys)),(e.error_x||{}).visible&&(n.xerr=t.xh-t.x,e.error_x.symmetric||(n.xerrneg=t.x-t.xs))}}},{"../../lib":202,"../../plot_api/edit_types":230,"./attributes":99,"./calc":100,"./compute_error":101,"./defaults":102,"./plot":104,"./style":105}],104:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../drawing"),o=t("../../traces/scatter/subtypes");e.exports=function(t,e,n,s){var l=n.xaxis,c=n.yaxis,u=s&&s.duration>0;e.each(function(e){var d,h=e[0].trace,f=h.error_x||{},p=h.error_y||{};h.ids&&(d=function(t){return t.id});var g=o.hasMarkers(h)&&h.marker.maxdisplayed>0;p.visible||f.visible||(e=[]);var m=r.select(this).selectAll("g.errorbar").data(e,d);if(m.exit().remove(),e.length){f.visible||m.selectAll("path.xerror").remove(),p.visible||m.selectAll("path.yerror").remove(),m.style("opacity",1);var v=m.enter().append("g").classed("errorbar",!0);u&&v.style("opacity",0).transition().duration(s.duration).style("opacity",1),a.setClipUrl(m,n.layerClipId,t),m.each(function(t){var e=r.select(this),n=function(t,e,n){var r={x:e.c2p(t.x),y:n.c2p(t.y)};return void 0!==t.yh&&(r.yh=n.c2p(t.yh),r.ys=n.c2p(t.ys),i(r.ys)||(r.noYS=!0,r.ys=n.c2p(t.ys,!0))),void 0!==t.xh&&(r.xh=e.c2p(t.xh),r.xs=e.c2p(t.xs),i(r.xs)||(r.noXS=!0,r.xs=e.c2p(t.xs,!0))),r}(t,l,c);if(!g||t.vis){var a,o=e.select("path.yerror");if(p.visible&&i(n.x)&&i(n.yh)&&i(n.ys)){var d=p.width;a="M"+(n.x-d)+","+n.yh+"h"+2*d+"m-"+d+",0V"+n.ys,n.noYS||(a+="m-"+d+",0h"+2*d),o.size()?u&&(o=o.transition().duration(s.duration).ease(s.easing)):o=e.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),o.attr("d",a)}else o.remove();var h=e.select("path.xerror");if(f.visible&&i(n.y)&&i(n.xh)&&i(n.xs)){var m=(f.copy_ystyle?p:f).width;a="M"+n.xh+","+(n.y-m)+"v"+2*m+"m0,-"+m+"H"+n.xs,n.noXS||(a+="m0,-"+m+"v"+2*m),h.size()?u&&(h=h.transition().duration(s.duration).ease(s.easing)):h=e.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),h.attr("d",a)}else h.remove()}})}})}},{"../../traces/scatter/subtypes":355,"../drawing":97,d3:9,"fast-isnumeric":11}],105:[function(t,e,n){"use strict";var r=t("d3"),i=t("../color");e.exports=function(t){t.each(function(t){var e=t[0].trace,n=e.error_y||{},a=e.error_x||{},o=r.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(i.stroke,n.color),a.copy_ystyle&&(a=n),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(i.stroke,a.color)})}},{"../color":75,d3:9}],106:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("./layout_attributes").hoverlabel,a=t("../../lib/extend").extendFlat;e.exports={hoverlabel:{bgcolor:a({},i.bgcolor,{arrayOk:!0}),bordercolor:a({},i.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:a({},i.align,{arrayOk:!0}),namelength:a({},i.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":196,"../../plots/font_attributes":276,"./layout_attributes":116}],107:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry");function a(t,e,n,i){i=i||r.identity,Array.isArray(t)&&(e[0][n]=i(t))}e.exports=function(t){var e=t.calcdata,n=t._fullLayout;function o(t){return function(e){return r.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}for(var s=0;s<e.length;s++){var l=e[s],c=l[0].trace;if(!i.traceIs(c,"pie-like")){var u=i.traceIs(c,"2dMap")?a:r.fillArray;u(c.hoverinfo,l,"hi",o(c)),c.hovertemplate&&u(c.hovertemplate,l,"ht"),c.hoverlabel&&(u(c.hoverlabel.bgcolor,l,"hbg"),u(c.hoverlabel.bordercolor,l,"hbc"),u(c.hoverlabel.font.size,l,"hts"),u(c.hoverlabel.font.color,l,"htc"),u(c.hoverlabel.font.family,l,"htf"),u(c.hoverlabel.namelength,l,"hnl"),u(c.hoverlabel.align,l,"hta"))}}}},{"../../lib":202,"../../registry":290}],108:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./hover").hover;e.exports=function(t,e,n){var a=r.getComponentMethod("annotations","onClick")(t,t._hoverdata);function o(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==n&&i(t,e,n,!0),t._hoverdata&&e&&e.target&&(a&&a.then?a.then(o):o(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":290,"./hover":112}],109:[function(t,e,n){"use strict";e.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],110:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./attributes"),a=t("./hoverlabel_defaults");e.exports=function(t,e,n,o){var s=r.extendFlat({},o.hoverlabel);e.hovertemplate&&(s.namelength=-1),a(t,e,function(n,a){return r.coerce(t,e,i,n,a)},s)}},{"../../lib":202,"./attributes":106,"./hoverlabel_defaults":113}],111:[function(t,e,n){"use strict";var r=t("../../lib");n.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},n.isTraceInSubplots=function(t,e){if("splom"===t.type){for(var r=t.xaxes||[],i=t.yaxes||[],a=0;a<r.length;a++)for(var o=0;o<i.length;o++)if(-1!==e.indexOf(r[a]+i[o]))return!0;return!1}return-1!==e.indexOf(n.getSubplot(t))},n.flat=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=e;return n},n.p2c=function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].p2c(e);return n},n.getDistanceFunction=function(t,e,r,i){return"closest"===t?i||n.quadrature(e,r):"x"===t.charAt(0)?e:r},n.getClosest=function(t,e,n){if(!1!==n.index)n.index>=0&&n.index<t.length?n.distance=0:n.index=!1;else for(var r=0;r<t.length;r++){var i=e(t[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},n.inbox=function(t,e,n){return t*e<0||0===t?n:1/0},n.quadrature=function(t,e){return function(n){var r=t(n),i=e(n);return Math.sqrt(r*r+i*i)}},n.makeEventData=function(t,e,r){var i="index"in t?t.index:t.pointNumber,a={data:e._input,fullData:e,curveNumber:e.index,pointNumber:i};if(e._indexToPoints){var o=e._indexToPoints[i];1===o.length?a.pointIndex=o[0]:a.pointIndices=o}else a.pointIndex=i;return e._module.eventData?a=e._module.eventData(a,t,e,r,i):("xVal"in t?a.x=t.xVal:"x"in t&&(a.x=t.x),"yVal"in t?a.y=t.yVal:"y"in t&&(a.y=t.y),t.xa&&(a.xaxis=t.xa),t.ya&&(a.yaxis=t.ya),void 0!==t.zLabelVal&&(a.z=t.zLabelVal)),n.appendArrayPointValue(a,e,i),a},n.appendArrayPointValue=function(t,e,n){var i=e._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],c=a(l);if(void 0===t[c]){var u=o(r.nestedProperty(e,l).get(),n);void 0!==u&&(t[c]=u)}}},n.appendArrayMultiPointValues=function(t,e,n){var i=e._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],c=a(l);if(void 0===t[c]){for(var u=r.nestedProperty(e,l).get(),d=new Array(n.length),h=0;h<n.length;h++)d[h]=o(u,n[h]);t[c]=d}}};var i={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function a(t){return i[t]||t}function o(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}var s={x:!0,y:!0},l={"x unified":!0,"y unified":!0};n.isUnifiedHover=function(t){return"string"==typeof t&&!!l[t]},n.isXYhover=function(t){return"string"==typeof t&&!!s[t]}},{"../../lib":202}],112:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("tinycolor2"),o=t("../../lib"),s=o.strTranslate,l=o.strRotate,c=t("../../lib/events"),u=t("../../lib/svg_text_utils"),d=t("../../lib/override_cursor"),h=t("../drawing"),f=t("../color"),p=t("../dragelement"),g=t("../../plots/cartesian/axes"),m=t("../../registry"),v=t("./helpers"),y=t("./constants"),b=t("../legend/defaults"),x=t("../legend/draw"),_=y.YANGLE,w=Math.PI*_/180,k=1/Math.sin(w),T=Math.cos(w),M=Math.sin(w),A=y.HOVERARROWSIZE,C=y.HOVERTEXTPAD;function S(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa,t.ya||""].join(",")}n.hover=function(t,e,n,a){t=o.getGraphDiv(t),o.throttle(t._fullLayout._uid+y.HOVERID,y.HOVERMINTIME,function(){!function(t,e,n,a){n||(n="xy");var s=Array.isArray(n)?n:[n],l=t._fullLayout,u=l._plots||[],h=u[n],g=l._has("cartesian");if(h){var y=h.overlays.map(function(t){return t.id});s=s.concat(y)}for(var b=s.length,x=new Array(b),_=new Array(b),w=!1,T=0;T<b;T++){var M=s[T];if(u[M])w=!0,x[T]=u[M].xaxis,_[T]=u[M].yaxis;else{if(!l[M]||!l[M]._subplot)return void o.warn("Unrecognized subplot: "+M);var A=l[M]._subplot;x[T]=A.xaxis,_[T]=A.yaxis}}var C=e.hovermode||l.hovermode;if(C&&!w&&(C="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(C)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return p.unhoverRaw(t,e);var D,E,N,F,z,V,H,j,B,U,q,G,Z,W=-1===l.hoverdistance?1/0:l.hoverdistance,$=-1===l.spikedistance?1/0:l.spikedistance,Y=[],X=[],Q={hLinePoint:null,vLinePoint:null},K=!1;if(Array.isArray(e))for(C="array",N=0;N<e.length;N++)(z=t.calcdata[e[N].curveNumber||0])&&(V=z[0].trace,"skip"!==z[0].trace.hoverinfo&&(X.push(z),"h"===V.orientation&&(K=!0)));else{for(F=0;F<t.calcdata.length;F++)"skip"!==(V=(z=t.calcdata[F])[0].trace).hoverinfo&&v.isTraceInSubplots(V,s)&&(X.push(z),"h"===V.orientation&&(K=!0));var J,tt;if(e.target){if(!1===c.triggerHandler(t,"plotly_beforehover",e))return;var et=e.target.getBoundingClientRect();J=e.clientX-et.left,tt=e.clientY-et.top,l._calcInverseTransform(t);var nt=o.apply3DTransform(l._invTransform)(J,tt);if(tt=nt[1],(J=nt[0])<0||J>x[0]._length||tt<0||tt>_[0]._length)return p.unhoverRaw(t,e)}else J="xpx"in e?e.xpx:x[0]._length/2,tt="ypx"in e?e.ypx:_[0]._length/2;if(e.pointerX=J+x[0]._offset,e.pointerY=tt+_[0]._offset,D="xval"in e?v.flat(s,e.xval):v.p2c(x,J),E="yval"in e?v.flat(s,e.yval):v.p2c(_,tt),!i(D[0])||!i(E[0]))return o.warn("Fx.hover failed",e,t),p.unhoverRaw(t,e)}var rt=1/0;function it(t,n){for(F=0;F<X.length;F++)if((z=X[F])&&z[0]&&z[0].trace&&!0===(V=z[0].trace).visible&&0!==V._length&&-1===["carpet","contourcarpet"].indexOf(V._module.name)){if("splom"===V.type?H=s[j=0]:(H=v.getSubplot(V),j=s.indexOf(H)),v.isUnifiedHover(B=C)&&(B=B.charAt(0)),G={cd:z,trace:V,xa:x[j],ya:_[j],maxHoverDistance:W,maxSpikeDistance:$,index:!1,distance:Math.min(rt,W),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:f.defaultLine,name:V.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},l[H]&&(G.subplot=l[H]._subplot),l._splomScenes&&l._splomScenes[V.uid]&&(G.scene=l._splomScenes[V.uid]),Z=Y.length,"array"===B){var r=e[F];"pointNumber"in r?(G.index=r.pointNumber,B="closest"):(B="","xval"in r&&(U=r.xval,B="x"),"yval"in r&&(q=r.yval,B=B?"closest":"y"))}else void 0!==t&&void 0!==n?(U=t,q=n):(U=D[j],q=E[j]);if(0!==W)if(V._module&&V._module.hoverPoints){var a=V._module.hoverPoints(G,U,q,B,l._hoverlayer);if(a)for(var c,u=0;u<a.length;u++)i((c=a[u]).x0)&&i(c.y0)&&Y.push(P(c,C))}else o.log("Unrecognized trace type in hover:",V);if("closest"===C&&Y.length>Z&&(Y.splice(0,Z),rt=Y[0].distance),g&&0!==$&&0===Y.length){G.distance=$,G.index=!1;var d=V._module.hoverPoints(G,U,q,"closest",l._hoverlayer);if(d&&(d=d.filter(function(t){return t.spikeDistance<=$})),d&&d.length){var h,p=d.filter(function(t){return t.xa.showspikes&&"hovered data"!==t.xa.spikesnap});if(p.length){var m=p[0];i(m.x0)&&i(m.y0)&&(h=ot(m),(!Q.vLinePoint||Q.vLinePoint.spikeDistance>h.spikeDistance)&&(Q.vLinePoint=h))}var y=d.filter(function(t){return t.ya.showspikes&&"hovered data"!==t.ya.spikesnap});if(y.length){var b=y[0];i(b.x0)&&i(b.y0)&&(h=ot(b),(!Q.hLinePoint||Q.hLinePoint.spikeDistance>h.spikeDistance)&&(Q.hLinePoint=h))}}}}}function at(t,e){for(var n,r=null,i=1/0,a=0;a<t.length;a++)(n=t[a].spikeDistance)<=i&&n<=e&&(r=t[a],i=n);return r}function ot(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}it();var st={fullLayout:l,container:l._hoverlayer,outerContainer:l._paperdiv,event:e},lt=t._spikepoints;if(t._spikepoints={vLinePoint:Q.vLinePoint,hLinePoint:Q.hLinePoint},g&&0!==$&&0!==Y.length){var ct=at(Y.filter(function(t){return t.ya.showspikes}),$);Q.hLinePoint=ot(ct);var ut=at(Y.filter(function(t){return t.xa.showspikes}),$);Q.vLinePoint=ot(ut)}if(0===Y.length){var dt=p.unhoverRaw(t,e);return!g||null===Q.hLinePoint&&null===Q.vLinePoint||R(lt)&&I(t,Q,st),dt}if(g&&R(lt)&&I(t,Q,st),Y.sort(function(t,e){return t.distance-e.distance}),v.isXYhover(B)&&0!==Y[0].length&&"splom"!==Y[0].trace.type){var ht=Y[0],ft=ht.cd[ht.index],pt="group"===l.boxmode||"group"===l.violinmode,gt=ht.xVal,mt=ht.xa;"category"===mt.type&&(gt=mt._categoriesMap[gt]),"date"===mt.type&&(gt=mt.d2c(gt)),ft&&ft.t&&ft.t.posLetter===mt._id&&pt&&(gt+=ft.t.dPos);var vt=ht.yVal;"category"===(mt=ht.ya).type&&(vt=mt._categoriesMap[vt]),"date"===mt.type&&(vt=mt.d2c(vt)),ft&&ft.t&&ft.t.posLetter===mt._id&&pt&&(vt+=ft.t.dPos),it(gt,vt);var yt={};Y=Y.filter(function(t){var e=S(t);if(!yt[e])return yt[e]=!0,yt[e]})}var bt=t._hoverdata,xt=[];for(N=0;N<Y.length;N++){var _t=Y[N],wt=v.makeEventData(_t,_t.trace,_t.cd);if(!1!==_t.hovertemplate){var kt=!1;_t.cd[_t.index]&&_t.cd[_t.index].ht&&(kt=_t.cd[_t.index].ht),_t.hovertemplate=kt||_t.trace.hovertemplate||!1}_t.eventData=[wt],xt.push(wt)}t._hoverdata=xt;var Tt="y"===C&&(X.length>1||Y.length>1)||"closest"===C&&K&&Y.length>1,Mt=f.combine(l.plot_bgcolor||f.background,l.paper_bgcolor),At=O(Y,{hovermode:C,rotateLabels:Tt,bgColor:Mt,container:l._hoverlayer,outerContainer:l._paperdiv,commonLabelOpts:l.hoverlabel,hoverdistance:l.hoverdistance},t);if(v.isUnifiedHover(C)||(function(t,e,n){var r,i,a,o,s,l,c,u=0,d=1,h=t.size(),f=new Array(h),p=0;function g(t){var e=t[0],n=t[t.length-1];if(a=n.pos+n.dp+n.size-e.pmax,(i=e.pmin-e.pos-e.dp+e.size)>.01){for(s=t.length-1;s>=0;s--)t[s].dp+=i;r=!1}if(!(a<.01)){if(i<-.01){for(s=t.length-1;s>=0;s--)t[s].dp-=a;r=!1}if(r){var c=0;for(o=0;o<t.length;o++)(l=t[o]).pos+l.dp+l.size>e.pmax&&c++;for(o=t.length-1;o>=0&&!(c<=0);o--)(l=t[o]).pos>e.pmax-1&&(l.del=!0,c--);for(o=0;o<t.length&&!(c<=0);o++)if((l=t[o]).pos<e.pmin+1)for(l.del=!0,c--,a=2*l.size,s=t.length-1;s>=0;s--)t[s].dp-=a;for(o=t.length-1;o>=0&&!(c<=0);o--)(l=t[o]).pos+l.dp+l.size>e.pmax&&(l.del=!0,c--)}}}for(t.each(function(t){var r=t[e],i="x"===r._id.charAt(0),a=r.range;0===p&&a&&a[0]>a[1]!==i&&(d=-1),f[p++]=[{datum:t,traceIndex:t.trace.index,dp:0,pos:t.pos,posref:t.posref,size:t.by*(i?k:1)/2,pmin:0,pmax:i?n.width:n.height}]}),f.sort(function(t,e){return t[0].posref-e[0].posref||d*(e[0].traceIndex-t[0].traceIndex)});!r&&u<=h;){for(u++,r=!0,o=0;o<f.length-1;){var m=f[o],v=f[o+1],y=m[m.length-1],b=v[0];if((i=y.pos+y.dp+y.size-b.pos-b.dp+b.size)>.01&&y.pmin===b.pmin&&y.pmax===b.pmax){for(s=v.length-1;s>=0;s--)v[s].dp+=i;for(m.push.apply(m,v),f.splice(o+1,1),c=0,s=m.length-1;s>=0;s--)c+=m[s].dp;for(a=c/m.length,s=m.length-1;s>=0;s--)m[s].dp-=a;r=!1}else o++}f.forEach(g)}for(o=f.length-1;o>=0;o--){var x=f[o];for(s=x.length-1;s>=0;s--){var _=x[s],w=_.datum;w.offset=_.dp,w.del=_.del}}}(At,Tt?"xa":"ya",l),L(At,Tt,l._invScaleX,l._invScaleY)),e.target&&e.target.tagName){var Ct=m.getComponentMethod("annotations","hasClickToShow")(t,xt);d(r.select(e.target),Ct?"pointer":"")}e.target&&!a&&function(t,e,n){if(!n||n.length!==t._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],a=t._hoverdata[r];if(i.curveNumber!==a.curveNumber||String(i.pointNumber)!==String(a.pointNumber)||String(i.pointNumbers)!==String(a.pointNumbers))return!0}return!1}(t,0,bt)&&(bt&&t.emit("plotly_unhover",{event:e,points:bt}),t.emit("plotly_hover",{event:e,points:t._hoverdata,xaxes:x,yaxes:_,xvals:D,yvals:E}))}(t,e,n,a)})},n.loneHover=function(t,e){var n=!0;Array.isArray(t)||(n=!1,t=[t]);var i=t.map(function(t){return{color:t.color||f.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,nameLength:t.nameLength,textAlign:t.textAlign,trace:t.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:t.hovertemplate||!1,eventData:t.eventData||!1,hovertemplateLabels:t.hovertemplateLabels||!1}}),a=r.select(e.container),o=e.outerContainer?r.select(e.outerContainer):a,s={hovermode:"closest",rotateLabels:!1,bgColor:e.bgColor||f.background,container:a,outerContainer:o},l=O(i,s,e.gd),c=0,u=0;return l.sort(function(t,e){return t.y0-e.y0}).each(function(t,n){var r=t.y0-t.by/2;t.offset=r-5<c?c-r+5:0,c=r+t.by+t.offset,n===e.anchorIndex&&(u=t.offset)}).each(function(t){t.offset-=u}),L(l,s.rotateLabels,e.gd._fullLayout._invScaleX,e.gd._fullLayout._invScaleY),n?l:l.node()};var D=/<extra>([\s\S]*)<\/extra>/;function O(t,e,n){var i=n._fullLayout,a=e.hovermode,c=e.rotateLabels,d=e.bgColor,p=e.container,g=e.outerContainer,m=e.commonLabelOpts||{},w=e.fontFamily||y.HOVERFONT,k=e.fontSize||y.HOVERFONTSIZE,T=t[0],M=T.xa,D=T.ya,O="y"===a.charAt(0)?"yLabel":"xLabel",L=T[O],P=(String(L)||"").split(" ")[0],I=g.node().getBoundingClientRect(),R=I.top,N=I.width,F=I.height,z=void 0!==L&&T.distance<=e.hoverdistance&&("x"===a||"y"===a);if(z){var V,H,j=!0;for(V=0;V<t.length;V++)if(j&&void 0===t[V].zLabel&&(j=!1),H=t[V].hoverinfo||t[V].trace.hoverinfo){var B=Array.isArray(H)?H:H.split("+");if(-1===B.indexOf("all")&&-1===B.indexOf(a)){z=!1;break}}j&&(z=!1)}var U=p.selectAll("g.axistext").data(z?[0]:[]);function q(t){return t.filter(function(t){return void 0!==t.zLabelVal||(t[O]||"").split(" ")[0]===P})}if(U.enter().append("g").classed("axistext",!0),U.exit().remove(),U.each(function(){var e=r.select(this),l=o.ensureSingle(e,"path","",function(t){t.style({"stroke-width":"1px"})}),c=o.ensureSingle(e,"text","",function(t){t.attr("data-notex",1)}),d=m.bgcolor||f.defaultLine,p=m.bordercolor||f.contrast(d),g=f.contrast(d),v={family:m.font.family||w,size:m.font.size||k,color:m.font.color||g};l.style({fill:d,stroke:p}),c.text(L).call(h.font,v).call(u.positionText,0,0).call(u.convertToTspans,n),e.attr("transform","");var y,b,x=c.node().getBoundingClientRect();if("x"===a){var _="top"===M.side?"-":"";c.attr("text-anchor","middle").call(u.positionText,0,"top"===M.side?R-x.bottom-A-C:R-x.top+A+C),b=D._offset+("top"===M.side?0:D._length);var S=x.width/2+C;(y=M._offset+(T.x0+T.x1)/2)<S?(y=S,l.attr("d","M-"+(S-A)+",0L-"+(S-2*A)+","+_+A+"H"+(C+x.width/2)+"v"+_+(2*C+x.height)+"H-"+S+"V"+_+A+"Z")):y>i.width-S?(y=i.width-S,l.attr("d","M"+(S-A)+",0L"+S+","+_+A+"v"+_+(2*C+x.height)+"H-"+S+"V"+_+A+"H"+(S-2*A)+"Z")):l.attr("d","M0,0L"+A+","+_+A+"H"+(C+x.width/2)+"v"+_+(2*C+x.height)+"H-"+(C+x.width/2)+"V"+_+A+"H-"+A+"Z")}else{var O,E,P;"right"===D.side?(O="start",E=1,P="",y=M._offset+M._length):(O="end",E=-1,P="-",y=M._offset),b=D._offset+(T.y0+T.y1)/2,c.attr("text-anchor",O),l.attr("d","M0,0L"+P+A+","+A+"V"+(C+x.height/2)+"h"+P+(2*C+x.width)+"V-"+(C+x.height/2)+"H"+P+A+"V-"+A+"Z");var I,N=x.height/2,F=R-x.top-N,z="clip"+i._uid+"commonlabel"+D._id;if(y<x.width+2*C+A){I="M-"+(A+C)+"-"+N+"h-"+(x.width-C)+"V"+N+"h"+(x.width-C)+"Z";var V=x.width-y+C;u.positionText(c,V,F),"end"===O&&c.selectAll("tspan").each(function(){var t=r.select(this),e=h.tester.append("text").text(t.text()).call(h.font,v),n=e.node().getBoundingClientRect();Math.round(n.width)<Math.round(x.width)&&t.attr("x",V-n.width),e.remove()})}else u.positionText(c,E*(C+A),F),I=null;var H=i._topclips.selectAll("#"+z).data(I?[0]:[]);H.enter().append("clipPath").attr("id",z).append("path"),H.exit().remove(),H.select("path").attr("d",I),h.setClipUrl(c,I?z:null,n)}e.attr("transform",s(y,b)),t=q(t)}),v.isUnifiedHover(a)){if(p.selectAll("g.hovertext").remove(),void 0!==L&&T.distance<=e.hoverdistance&&(t=q(t)),0===t.length)return;var G={};b({showlegend:!0,legend:{title:{text:L,font:i.hoverlabel.font},font:i.hoverlabel.font,bgcolor:i.hoverlabel.bgcolor,bordercolor:i.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},G,n._fullData);var Z=G.legend;Z.entries=[];for(var W=0;W<t.length;W++){var $=E(t[W],!0,a,i,L),Y=$[0],X=$[1],Q=t[W];Q.name=X,Q.text=""!==X?X+" : "+Y:Y;var K=Q.cd[Q.index];K&&(K.mc&&(Q.mc=K.mc),K.mcc&&(Q.mc=K.mcc),K.mlc&&(Q.mlc=K.mlc),K.mlcc&&(Q.mlc=K.mlcc),K.mlw&&(Q.mlw=K.mlw),K.mrc&&(Q.mrc=K.mrc),K.dir&&(Q.dir=K.dir)),Q._distinct=!0,Z.entries.push([Q])}Z.entries.sort(function(t,e){return t[0].trace.index-e[0].trace.index}),Z.layer=p,x(n,Z);var J=o.mean(t.map(function(t){return(t.y0+t.y1)/2})),tt=o.mean(t.map(function(t){return(t.x0+t.x1)/2})),et=p.select("g.legend"),nt=et.node().getBoundingClientRect(),rt=nt.width+2*C;!((tt+=M._offset)+rt<=N)&&tt-rt>=0?tt-=rt:tt+=2*C;var it=nt.height+2*C,at=(J+=D._offset-nt.height/2)+it>=F;return it<=F&&(J<=R?J=D._offset+2*C:at&&(J=F-it)),et.attr("transform",s(tt,J)),et}var ot=p.selectAll("g.hovertext").data(t,function(t){return S(t)});return ot.enter().append("g").classed("hovertext",!0).each(function(){var t=r.select(this);t.append("rect").call(f.fill,f.addOpacity(d,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(h.font,w,k)}),ot.exit().remove(),ot.each(function(t){var e=r.select(this).attr("transform",""),o=t.color;Array.isArray(o)&&(o=o[t.eventData[0].pointNumber]);var p=t.bgcolor||o,g=f.combine(f.opacity(p)?p:f.defaultLine,d),m=f.combine(f.opacity(o)?o:f.defaultLine,d),v=t.borderColor||f.contrast(g),y=E(t,z,a,i,L,e),b=y[0],x=y[1],T=e.select("text.nums").call(h.font,t.fontFamily||w,t.fontSize||k,t.fontColor||v).text(b).attr("data-notex",1).call(u.positionText,0,0).call(u.convertToTspans,n),M=e.select("text.name"),S=0,D=0;if(x&&x!==b){M.call(h.font,t.fontFamily||w,t.fontSize||k,m).text(x).attr("data-notex",1).call(u.positionText,0,0).call(u.convertToTspans,n);var O=M.node().getBoundingClientRect();S=O.width+2*C,D=O.height+2*C}else M.remove(),e.select("rect").remove();e.select("path").style({fill:g,stroke:v});var P,I,V=T.node().getBoundingClientRect(),H=t.xa._offset+(t.x0+t.x1)/2,j=t.ya._offset+(t.y0+t.y1)/2,B=Math.abs(t.x1-t.x0),U=Math.abs(t.y1-t.y0),q=V.width+A+C+S;if(t.ty0=R-V.top,t.bx=V.width+2*C,t.by=Math.max(V.height+2*C,D),t.anchor="start",t.txwidth=V.width,t.tx2width=S,t.offset=0,c)t.pos=H,P=j+U/2+q<=F,I=j-U/2-q>=0,"top"!==t.idealAlign&&P||!I?P?(j+=U/2,t.anchor="start"):t.anchor="middle":(j-=U/2,t.anchor="end");else if(t.pos=j,P=H+B/2+q<=N,I=H-B/2-q>=0,"left"!==t.idealAlign&&P||!I)if(P)H+=B/2,t.anchor="start";else{t.anchor="middle";var G=q/2,Z=H+G-N,W=H-G;Z>0&&(H-=Z),W<0&&(H+=-W)}else H-=B/2,t.anchor="end";T.attr("text-anchor",t.anchor),S&&M.attr("text-anchor",t.anchor),e.attr("transform",s(H,j)+(c?l(_):""))}),ot}function E(t,e,n,r,i,a){var s="",l="";void 0!==t.nameOverride&&(t.name=t.nameOverride),t.name&&(t.trace._meta&&(t.name=o.templateString(t.name,t.trace._meta)),s=N(t.name,t.nameLength)),void 0!==t.zLabel?(void 0!==t.xLabel&&(l+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(l+="y: "+t.yLabel+"<br>"),"choropleth"!==t.trace.type&&"choroplethmapbox"!==t.trace.type&&(l+=(l?"z: ":"")+t.zLabel)):e&&t[n.charAt(0)+"Label"]===i?l=t[("x"===n.charAt(0)?"y":"x")+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&"scattercarpet"!==t.trace.type&&(l=t.yLabel):l=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",!t.text&&0!==t.text||Array.isArray(t.text)||(l+=(l?"<br>":"")+t.text),void 0!==t.extraText&&(l+=(l?"<br>":"")+t.extraText),a&&""===l&&!t.hovertemplate&&(""===s&&a.remove(),l=s);var c=t.hovertemplate||!1;return c&&(l=(l=o.hovertemplateString(c,t.hovertemplateLabels||t,r._d3locale,t.eventData[0]||{},t.trace._meta)).replace(D,function(e,n){return s=N(n,t.nameLength),""})),[l,s]}function L(t,e,n,i){var a=function(t){return t*n},o=function(t){return t*i};t.each(function(t){var n=r.select(this);if(t.del)return n.remove();var i=n.select("text.nums"),s=t.anchor,l="end"===s?-1:1,c={start:1,end:-1,middle:0}[s],d=c*(A+C),f=d+c*(t.txwidth+C),p=0,g=t.offset,m="middle"===s;m&&(d-=t.tx2width/2,f+=t.txwidth/2+C),e&&(g*=-M,p=t.offset*T),n.select("path").attr("d",m?"M-"+a(t.bx/2+t.tx2width/2)+","+o(g-t.by/2)+"h"+a(t.bx)+"v"+o(t.by)+"h-"+a(t.bx)+"Z":"M0,0L"+a(l*A+p)+","+o(A+g)+"v"+o(t.by/2-A)+"h"+a(l*t.bx)+"v-"+o(t.by)+"H"+a(l*A+p)+"V"+o(g-A)+"Z");var v=p+d,y=g+t.ty0-t.by/2+C,b=t.textAlign||"auto";"auto"!==b&&("left"===b&&"start"!==s?(i.attr("text-anchor","start"),v=m?-t.bx/2-t.tx2width/2+C:-t.bx-C):"right"===b&&"end"!==s&&(i.attr("text-anchor","end"),v=m?t.bx/2-t.tx2width/2-C:t.bx+C)),i.call(u.positionText,a(v),o(y)),t.tx2width&&(n.select("text.name").call(u.positionText,a(f+c*C+p),o(g+t.ty0-t.by/2+C)),n.select("rect").call(h.setRect,a(f+(c-1)*t.tx2width/2+p),o(g-t.by/2-1),a(t.tx2width),o(t.by+2)))})}function P(t,e){var n=t.index,r=t.trace||{},a=t.cd[0],s=t.cd[n]||{};function l(t){return t||i(t)&&0===t}var c=Array.isArray(n)?function(t,e){var i=o.castOption(a,n,t);return l(i)?i:o.extractOption({},r,"",e)}:function(t,e){return o.extractOption(s,r,t,e)};function u(e,n,r){var i=c(n,r);l(i)&&(t[e]=i)}if(u("hoverinfo","hi","hoverinfo"),u("bgcolor","hbg","hoverlabel.bgcolor"),u("borderColor","hbc","hoverlabel.bordercolor"),u("fontFamily","htf","hoverlabel.font.family"),u("fontSize","hts","hoverlabel.font.size"),u("fontColor","htc","hoverlabel.font.color"),u("nameLength","hnl","hoverlabel.namelength"),u("textAlign","hta","hoverlabel.align"),t.posref="y"===e||"closest"===e&&"h"===r.orientation?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=o.constrain(t.x0,0,t.xa._length),t.x1=o.constrain(t.x1,0,t.xa._length),t.y0=o.constrain(t.y0,0,t.ya._length),t.y1=o.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:g.hoverLabelText(t.xa,t.xLabelVal),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:g.hoverLabelText(t.ya,t.yLabelVal),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var d=g.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;t.xLabel+=void 0!==t.xerrneg?" +"+d+" / -"+g.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:" \xb1 "+d,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var h=g.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;t.yLabel+=void 0!==t.yerrneg?" +"+h+" / -"+g.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:" \xb1 "+h,"y"===e&&(t.distance+=1)}var f=t.hoverinfo||t.trace.hoverinfo;return f&&"all"!==f&&(-1===(f=Array.isArray(f)?f:f.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===f.indexOf("y")&&(t.yLabel=void 0),-1===f.indexOf("z")&&(t.zLabel=void 0),-1===f.indexOf("text")&&(t.text=void 0),-1===f.indexOf("name")&&(t.name=void 0)),t}function I(t,e,n){var r,i,o=n.container,s=n.fullLayout,l=s._size,c=n.event,u=!!e.hLinePoint,d=!!e.vLinePoint;if(o.selectAll(".spikeline").remove(),d||u){var p=f.combine(s.plot_bgcolor,s.paper_bgcolor);if(u){var m,v,y=e.hLinePoint;r=y&&y.xa,"cursor"===(i=y&&y.ya).spikesnap?(m=c.pointerX,v=c.pointerY):(m=r._offset+y.x,v=i._offset+y.y);var b,x,_=a.readability(y.color,p)<1.5?f.contrast(p):y.color,w=i.spikemode,k=i.spikethickness,T=i.spikecolor||_,M=g.getPxPosition(t,i);if(-1!==w.indexOf("toaxis")||-1!==w.indexOf("across")){if(-1!==w.indexOf("toaxis")&&(b=M,x=m),-1!==w.indexOf("across")){var A=i._counterDomainMin,C=i._counterDomainMax;"free"===i.anchor&&(A=Math.min(A,i.position),C=Math.max(C,i.position)),b=l.l+A*l.w,x=l.l+C*l.w}o.insert("line",":first-child").attr({x1:b,x2:x,y1:v,y2:v,"stroke-width":k,stroke:T,"stroke-dasharray":h.dashStyle(i.spikedash,k)}).classed("spikeline",!0).classed("crisp",!0),o.insert("line",":first-child").attr({x1:b,x2:x,y1:v,y2:v,"stroke-width":k+2,stroke:p}).classed("spikeline",!0).classed("crisp",!0)}-1!==w.indexOf("marker")&&o.insert("circle",":first-child").attr({cx:M+("right"!==i.side?k:-k),cy:v,r:k,fill:T}).classed("spikeline",!0)}if(d){var S,D,O=e.vLinePoint;i=O&&O.ya,"cursor"===(r=O&&O.xa).spikesnap?(S=c.pointerX,D=c.pointerY):(S=r._offset+O.x,D=i._offset+O.y);var E,L,P=a.readability(O.color,p)<1.5?f.contrast(p):O.color,I=r.spikemode,R=r.spikethickness,N=r.spikecolor||P,F=g.getPxPosition(t,r);if(-1!==I.indexOf("toaxis")||-1!==I.indexOf("across")){if(-1!==I.indexOf("toaxis")&&(E=F,L=D),-1!==I.indexOf("across")){var z=r._counterDomainMin,V=r._counterDomainMax;"free"===r.anchor&&(z=Math.min(z,r.position),V=Math.max(V,r.position)),E=l.t+(1-V)*l.h,L=l.t+(1-z)*l.h}o.insert("line",":first-child").attr({x1:S,x2:S,y1:E,y2:L,"stroke-width":R,stroke:N,"stroke-dasharray":h.dashStyle(r.spikedash,R)}).classed("spikeline",!0).classed("crisp",!0),o.insert("line",":first-child").attr({x1:S,x2:S,y1:E,y2:L,"stroke-width":R+2,stroke:p}).classed("spikeline",!0).classed("crisp",!0)}-1!==I.indexOf("marker")&&o.insert("circle",":first-child").attr({cx:S,cy:F-("top"!==r.side?R:-R),r:R,fill:N}).classed("spikeline",!0)}}}function R(t,e){return!e||e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint}function N(t,e){return u.plainText(t||"",{len:e,allowedTags:["br","sub","sup","b","i","em"]})}},{"../../lib":202,"../../lib/events":195,"../../lib/override_cursor":213,"../../lib/svg_text_utils":224,"../../plots/cartesian/axes":248,"../../registry":290,"../color":75,"../dragelement":94,"../drawing":97,"../legend/defaults":127,"../legend/draw":128,"./constants":109,"./helpers":111,d3:9,"fast-isnumeric":11,tinycolor2:58}],113:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../color"),a=t("./helpers").isUnifiedHover;e.exports=function(t,e,n,o){function s(t){o.font[t]||(o.font[t]=e.legend?e.legend.font[t]:e.font[t])}o=o||{},e&&a(e.hovermode)&&(o.font||(o.font={}),s("size"),s("family"),s("color"),e.legend?(o.bgcolor||(o.bgcolor=i.combine(e.legend.bgcolor,e.paper_bgcolor)),o.bordercolor||(o.bordercolor=e.legend.bordercolor)):o.bgcolor||(o.bgcolor=e.paper_bgcolor)),n("hoverlabel.bgcolor",o.bgcolor),n("hoverlabel.bordercolor",o.bordercolor),n("hoverlabel.namelength",o.namelength),r.coerceFont(n,"hoverlabel.font",o.font),n("hoverlabel.align",o.align)}},{"../../lib":202,"../color":75,"./helpers":111}],114:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e,n){function a(n,a){return void 0!==e[n]?e[n]:r.coerce(t,e,i,n,a)}var o,s=a("clickmode");return e._has("cartesian")?s.indexOf("select")>-1?o="closest":(e._isHoriz=function(t,e){for(var n=e._scatterStackOpts||{},r=0;r<t.length;r++){var i=t[r];if("h"!==i.orientation&&"h"!==((n[i.xaxis+i.yaxis]||{})[i.stackgroup]||{}).orientation)return!1}return!0}(n,e),o=e._isHoriz?"y":"x"):o="closest",a("hovermode",o)}},{"../../lib":202,"./layout_attributes":116}],115:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib"),a=t("../dragelement"),o=t("./helpers"),s=t("./layout_attributes"),l=t("./hover");e.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:s},attributes:t("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(t,e,n){return i.castOption(t,e,"hoverlabel."+n)},castHoverinfo:function(t,e,n){return i.castOption(t,n,"hoverinfo",function(n){return i.coerceHoverinfo({hoverinfo:n},{_module:t._module},e)})},hover:l.hover,unhover:a.unhover,loneHover:l.loneHover,loneUnhover:function(t){var e=i.isD3Selection(t)?t:r.select(t);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:t("./click")}},{"../../lib":202,"../dragelement":94,"./attributes":106,"./calc":107,"./click":108,"./constants":109,"./defaults":110,"./helpers":111,"./hover":112,"./layout_attributes":116,"./layout_defaults":117,"./layout_global_defaults":118,d3:9}],116:[function(t,e,n){"use strict";var r=t("./constants"),i=t("../../plots/font_attributes")({editType:"none"});i.family.dflt=r.HOVERFONT,i.size.dflt=r.HOVERFONTSIZE,e.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:i,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":276,"./constants":109}],117:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./helpers").isUnifiedHover,a=t("./layout_attributes"),o=t("./hovermode_defaults"),s=t("./hoverlabel_defaults");e.exports=function(t,e,n){function l(n,i){return r.coerce(t,e,a,n,i)}var c=o(t,e,n);c&&(l("hoverdistance"),l("spikedistance",i(c)?-1:void 0)),"select"===l("dragmode")&&l("selectdirection");var u=e._has("mapbox"),d=e._has("geo"),h=e._basePlotModules.length;"zoom"===e.dragmode&&((u||d)&&1===h||u&&d&&2===h)&&(e.dragmode="pan"),s(t,e,l)}},{"../../lib":202,"./helpers":111,"./hoverlabel_defaults":113,"./hovermode_defaults":114,"./layout_attributes":116}],118:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./hoverlabel_defaults"),a=t("./layout_attributes");e.exports=function(t,e){i(t,e,function(n,i){return r.coerce(t,e,a,n,i)})}},{"../../lib":202,"./hoverlabel_defaults":113,"./layout_attributes":116}],119:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../lib/regex").counter,a=t("../../plots/domain").attributes,o=t("../../plots/cartesian/constants").idRegex,s=t("../../plot_api/plot_template"),l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[i("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function c(t,e,n){var r=e[n+"axes"],i=Object.keys((t._splomAxes||{})[n]||{});return Array.isArray(r)?r:i.length?i:void 0}function u(t,e,n,r,i,a){var o=e(t+"gap",n),s=e("domain."+t);e(t+"side",r);for(var l=new Array(i),c=s[0],u=(s[1]-c)/(i-o),d=u*(1-o),h=0;h<i;h++){var f=c+u*h;l[a?i-1-h:h]=[f,f+d]}return l}function d(t,e,n,r,i){var a,o=new Array(n);function s(t,n){-1!==e.indexOf(n)&&void 0===r[n]?(o[t]=n,r[n]=t):o[t]=""}if(Array.isArray(t))for(a=0;a<n;a++)s(a,t[a]);else for(s(0,i),a=1;a<n;a++)s(a,i+(a+1));return o}e.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(t,e){var n=t.grid||{},i=c(e,n,"x"),a=c(e,n,"y");if(t.grid||i||a){var o,d,h=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),f=Array.isArray(i),p=Array.isArray(a),g=f&&i!==n.xaxes&&p&&a!==n.yaxes;h?(o=n.subplots.length,d=n.subplots[0].length):(p&&(o=a.length),f&&(d=i.length));var m=s.newContainer(e,"grid"),v=k("rows",o),y=k("columns",d);if(v*y>1){h||f||p||"independent"===k("pattern")&&(h=!0),m._hasSubplotGrid=h;var b,x,_="top to bottom"===k("roworder"),w=h?.3:.1;g&&e._splomGridDflt&&(b=e._splomGridDflt.xside,x=e._splomGridDflt.yside),m._domains={x:u("x",k,h?.2:.1,b,y),y:u("y",k,w,x,v,_)}}else delete e.grid}function k(t,e){return r.coerce(n,m,l,t,e)}},contentDefaults:function(t,e){var n=e.grid;if(n&&n._domains){var r,i,a,o,s,l,u,h=t.grid||{},f=e._subplots,p=n._hasSubplotGrid,g=n.rows,m=n.columns,v="independent"===n.pattern,y=n._axisMap={};if(p){var b=h.subplots||[];l=n.subplots=new Array(g);var x=1;for(r=0;r<g;r++){var _=l[r]=new Array(m),w=b[r]||[];for(i=0;i<m;i++)if(v?(s=1===x?"xy":"x"+x+"y"+x,x++):s=w[i],_[i]="",-1!==f.cartesian.indexOf(s)){if(u=s.indexOf("y"),a=s.slice(0,u),o=s.slice(u),void 0!==y[a]&&y[a]!==i||void 0!==y[o]&&y[o]!==r)continue;_[i]=s,y[a]=i,y[o]=r}}}else{var k=c(e,h,"x"),T=c(e,h,"y");n.xaxes=d(k,f.xaxis,m,y,"x"),n.yaxes=d(T,f.yaxis,g,y,"y")}var M=n._anchors={},A="top to bottom"===n.roworder;for(var C in y){var S,D,O,E=C.charAt(0),L=n[E+"side"];if(L.length<8)M[C]="free";else if("x"===E){if("t"===L.charAt(0)===A?(S=0,D=1,O=g):(S=g-1,D=-1,O=-1),p){var P=y[C];for(r=S;r!==O;r+=D)if((s=l[r][P])&&(u=s.indexOf("y"),s.slice(0,u)===C)){M[C]=s.slice(u);break}}else for(r=S;r!==O;r+=D)if(-1!==f.cartesian.indexOf(C+(o=n.yaxes[r]))){M[C]=o;break}}else if("l"===L.charAt(0)?(S=0,D=1,O=m):(S=m-1,D=-1,O=-1),p){var I=y[C];for(r=S;r!==O;r+=D)if((s=l[I][r])&&(u=s.indexOf("y"),s.slice(u)===C)){M[C]=s.slice(0,u);break}}else for(r=S;r!==O;r+=D)if(-1!==f.cartesian.indexOf((a=n.xaxes[r])+C)){M[C]=a;break}}}}}},{"../../lib":202,"../../lib/regex":218,"../../plot_api/plot_template":237,"../../plots/cartesian/constants":254,"../../plots/domain":275}],120:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/constants"),i=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),e.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":178,"../../plot_api/plot_template":237,"../../plots/cartesian/constants":254}],121:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib/to_log_range");e.exports=function(t,e,n,a){e=e||{};var o="log"===n&&"linear"===e.type;if(o||"linear"===n&&"log"===e.type)for(var s,l,c=t._fullLayout.images,u=e._id.charAt(0),d=0;d<c.length;d++)if(l="images["+d+"].",(s=c[d])[u+"ref"]===e._id){var h=s[u],f=s["size"+u],p=null,g=null;if(o){p=i(h,e.range);var m=f/Math.pow(10,p)/2;g=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else g=(p=Math.pow(10,h))*(Math.pow(10,f/2)-Math.pow(10,-f/2));r(p)?r(g)||(g=null):(p=null,g=null),a(l+u,p),a(l+"size"+u,g)}}},{"../../lib/to_log_range":226,"fast-isnumeric":11}],122:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("./attributes");function s(t,e,n){function a(n,i){return r.coerce(t,e,o,n,i)}var s=a("source");if(!a("visible",!!s))return e;a("layer"),a("xanchor"),a("yanchor"),a("sizex"),a("sizey"),a("sizing"),a("opacity");for(var l={_fullLayout:n},c=["x","y"],u=0;u<2;u++){var d=c[u],h=i.coerceRef(t,e,l,d,"paper",void 0);"paper"!==h&&i.getFromId(l,h)._imgIndices.push(e._index),i.coercePosition(e,l,a,h,d,0)}return e}e.exports=function(t,e){a(t,e,{name:"images",handleItemDefaults:s})}},{"../../lib":202,"../../plots/array_container_defaults":243,"../../plots/cartesian/axes":248,"./attributes":120}],123:[function(t,e,n){"use strict";var r=t("d3"),i=t("../drawing"),a=t("../../plots/cartesian/axes"),o=t("../../plots/cartesian/axis_ids"),s=t("../../constants/xmlns_namespaces");e.exports=function(t){var e,n,l=t._fullLayout,c=[],u={},d=[];for(n=0;n<l.images.length;n++){var h=l.images[n];if(h.visible)if("below"===h.layer&&"paper"!==h.xref&&"paper"!==h.yref){e=o.ref2id(h.xref)+o.ref2id(h.yref);var f=l._plots[e];if(!f){d.push(h);continue}f.mainplot&&(e=f.mainplot.id),u[e]||(u[e]=[]),u[e].push(h)}else"above"===h.layer?c.push(h):d.push(h)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},g={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function m(e){var n=r.select(this);if(this._imgSrc!==e.source)if(n.attr("xmlns",s.svg),e.source&&"data:"===e.source.slice(0,5))n.attr("xlink:href",e.source),this._imgSrc=e.source;else{var i=new Promise((function(t){var r=new Image;function i(){n.remove(),t()}this.img=r,r.setAttribute("crossOrigin","anonymous"),r.onerror=i,r.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var r=e.toDataURL("image/png");n.attr("xlink:href",r),t()},n.on("error",i),r.src=e.source,this._imgSrc=e.source}).bind(this));t._promises.push(i)}}function v(e){var n,o,s=r.select(this),c=a.getFromId(t,e.xref),u=a.getFromId(t,e.yref),d="domain"===a.getRefType(e.xref),h="domain"===a.getRefType(e.yref),f=l._size;n=void 0!==c?"string"==typeof e.xref&&d?c._length*e.sizex:Math.abs(c.l2p(e.sizex)-c.l2p(0)):e.sizex*f.w,o=void 0!==u?"string"==typeof e.yref&&h?u._length*e.sizey:Math.abs(u.l2p(e.sizey)-u.l2p(0)):e.sizey*f.h;var m,v,y=n*p[e.xanchor].offset,b=o*g[e.yanchor].offset,x=p[e.xanchor].sizing+g[e.yanchor].sizing;switch(m=void 0!==c?"string"==typeof e.xref&&d?c._length*e.x+c._offset:c.r2p(e.x)+c._offset:e.x*f.w+f.l,m+=y,v=void 0!==u?"string"==typeof e.yref&&h?u._length*(1-e.y)+u._offset:u.r2p(e.y)+u._offset:f.h-e.y*f.h+f.t,v+=b,e.sizing){case"fill":x+=" slice";break;case"stretch":x="none"}s.attr({x:m,y:v,width:n,height:o,preserveAspectRatio:x,opacity:e.opacity});var _=(c&&"domain"!==a.getRefType(e.xref)?c._id:"")+(u&&"domain"!==a.getRefType(e.yref)?u._id:"");i.setClipUrl(s,_?"clip"+l._uid+_:null,t)}var y=l._imageLowerLayer.selectAll("image").data(d),b=l._imageUpperLayer.selectAll("image").data(c);y.enter().append("image"),b.enter().append("image"),y.exit().remove(),b.exit().remove(),y.each(function(t){m.bind(this)(t),v.bind(this)(t)}),b.each(function(t){m.bind(this)(t),v.bind(this)(t)});var x=Object.keys(l._plots);for(n=0;n<x.length;n++){var _=l._plots[e=x[n]];if(_.imagelayer){var w=_.imagelayer.selectAll("image").data(u[e]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(t){m.bind(this)(t),v.bind(this)(t)})}}}},{"../../constants/xmlns_namespaces":182,"../../plots/cartesian/axes":248,"../../plots/cartesian/axis_ids":251,"../drawing":97,d3:9}],124:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":260,"./attributes":120,"./convert_coords":121,"./defaults":122,"./draw":123}],125:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes");e.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":276,"../color/attributes":74}],126:[function(t,e,n){"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],127:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib"),a=t("../../plot_api/plot_template"),o=t("./attributes"),s=t("../../plots/layout_attributes"),l=t("./helpers");e.exports=function(t,e,n){for(var c=t.legend||{},u=0,d=!1,h="normal",f=0;f<n.length;f++){var p=n[f];p.visible&&((p.showlegend||p._dfltShowLegend&&!(p._module&&p._module.attributes&&p._module.attributes.showlegend&&!1===p._module.attributes.showlegend.dflt))&&(u++,p.showlegend&&(d=!0,(r.traceIs(p,"pie-like")||!0===p._input.showlegend)&&u++)),(r.traceIs(p,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(p.fill))&&(h=l.isGrouped({traceorder:h})?"grouped+reversed":"reversed"),void 0!==p.legendgroup&&""!==p.legendgroup&&(h=l.isReversed({traceorder:h})?"reversed+grouped":"grouped"))}var g=i.coerce(t,e,s,"showlegend",d&&u>1);if(!1!==g||c.uirevision){var m=a.newContainer(e,"legend");if(_("uirevision",e.uirevision),!1!==g){_("bgcolor",e.paper_bgcolor),_("bordercolor"),_("borderwidth"),i.coerceFont(_,"font",e.font);var v,y,b,x=_("orientation");"h"===x?(v=0,r.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(y=1.1,b="bottom"):(y=-.1,b="top")):(v=1.02,y=1,b="auto"),_("traceorder",h),l.isGrouped(e.legend)&&_("tracegroupgap"),_("itemsizing"),_("itemwidth"),_("itemclick"),_("itemdoubleclick"),_("x",v),_("xanchor"),_("y",y),_("yanchor",b),_("valign"),i.noneOrAll(c,m,["x","y"]),_("title.text")&&(_("title.side","h"===x?"left":"top"),i.coerceFont(_,"title.font",e.font))}}function _(t,e){return i.coerce(c,m,o,t,e)}}},{"../../lib":202,"../../plot_api/plot_template":237,"../../plots/layout_attributes":280,"../../registry":290,"./attributes":125,"./helpers":131}],128:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../lib/events"),l=t("../dragelement"),c=t("../drawing"),u=t("../color"),d=t("../../lib/svg_text_utils"),h=t("./handle_click"),f=t("./constants"),p=t("../../constants/alignment"),g=p.LINE_SPACING,m=p.FROM_TL,v=p.FROM_BR,y=t("./get_legend_data"),b=t("./style"),x=t("./helpers");function _(t,e,n,r,i){var a=n.data()[0][0].trace,l={event:i,node:n.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:t.data,layout:t.layout,frames:t._transitionData._frames,config:t._context,fullData:t._fullData,fullLayout:t._fullLayout};a._group&&(l.group=a._group),o.traceIs(a,"pie-like")&&(l.label=n.datum()[0].label),!1!==s.triggerHandler(t,"plotly_legendclick",l)&&(1===r?e._clickTimeout=setTimeout(function(){h(n,t,r)},t._context.doubleClickDelay):2===r&&(e._clickTimeout&&clearTimeout(e._clickTimeout),t._legendMouseDownTime=0,!1!==s.triggerHandler(t,"plotly_legenddoubleclick",l)&&h(n,t,r)))}function w(t,e,n){var r,a=t.data()[0][0],s=a.trace,l=o.traceIs(s,"pie-like"),u=s.index,h=n._main&&e._context.edits.legendText&&!l,p=n._maxNameLength;n.entries?r=a.text:(r=l?a.label:s.name,s._meta&&(r=i.templateString(r,s._meta)));var g=i.ensureSingle(t,"text","legendtext");g.attr("text-anchor","start").call(c.font,n.font).text(h?k(r,p):r),d.positionText(g,n.itemwidth+2*f.itemGap,0),h?g.call(d.makeEditable,{gd:e,text:r}).call(M,t,e,n).on("edit",function(r){this.text(k(r,p)).call(M,t,e,n);var s=a.trace._fullInput||{},l={};if(o.hasTransform(s,"groupby")){var c=o.getTransformIndices(s,"groupby"),d=i.keyedContainer(s,"transforms["+c[c.length-1]+"].styles","target","value.name");d.set(a.trace._group,r),l=d.constructUpdate()}else l.name=r;return o.call("_guiRestyle",e,l,u)}):M(g,t,e,n)}function k(t,e){var n=Math.max(4,e);if(t&&t.trim().length>=n/2)return t;for(var r=n-(t=t||"").length;r>0;r--)t+=" ";return t}function T(t,e){var n,a=e._context.doubleClickDelay,o=1,s=i.ensureSingle(t,"rect","legendtoggle",function(t){e._context.staticPlot||t.style("cursor","pointer").attr("pointer-events","all"),t.call(u.fill,"rgba(0,0,0,0)")});e._context.staticPlot||(s.on("mousedown",function(){(n=(new Date).getTime())-e._legendMouseDownTime<a?o+=1:(o=1,e._legendMouseDownTime=n)}),s.on("mouseup",function(){if(!e._dragged&&!e._editing){var n=e._fullLayout.legend;(new Date).getTime()-e._legendMouseDownTime>a&&(o=Math.max(o-1,1)),_(e,n,t,o,r.event)}}))}function M(t,e,n,r){r._main||t.attr("data-notex",!0),d.convertToTspans(t,n,function(){!function(t,e,n){var r=t.data()[0][0];if(n._main&&r&&!r.trace.showlegend)t.remove();else{var i=t.select("g[class*=math-group]"),a=i.node();n||(n=e._fullLayout.legend);var o,s,l=n.borderwidth,u=(r?n:n.title).font.size*g;if(a){var h=c.bBox(a);o=h.height,s=h.width,r?c.setTranslate(i,0,.25*o):c.setTranslate(i,l,.75*o+l)}else{var p=t.select(r?".legendtext":".legendtitletext"),m=d.lineCount(p),v=p.node();o=u*m,s=v?c.bBox(v).width:0,r?d.positionText(p,n.itemwidth+2*f.itemGap,-u*((m-1)/2-.3)):d.positionText(p,f.titlePad+l,u+l)}r?(r.lineHeight=u,r.height=Math.max(o,16)+3,r.width=s):(n._titleWidth=s,n._titleHeight=o)}}(e,n,r)})}function A(t){return i.isRightAnchor(t)?"right":i.isCenterAnchor(t)?"center":"left"}function C(t){return i.isBottomAnchor(t)?"bottom":i.isMiddleAnchor(t)?"middle":"top"}e.exports=function(t,e){var n,s=t._fullLayout,d="legend"+s._uid;if(e?(n=e.layer,d+="-hover"):((e=s.legend||{})._main=!0,n=s._infolayer),n){var h;if(t._legendMouseDownTime||(t._legendMouseDownTime=0),e._main){if(!t.calcdata)return;h=s.showlegend&&y(t.calcdata,e)}else{if(!e.entries)return;h=y(e.entries,e)}var p=s.hiddenlabels||[];if(e._main&&(!s.showlegend||!h.length))return n.selectAll(".legend").remove(),s._topdefs.select("#"+d).remove(),a.autoMargin(t,"legend");var g=i.ensureSingle(n,"g","legend",function(t){e._main&&t.attr("pointer-events","all")}),k=i.ensureSingleById(s._topdefs,"clipPath",d,function(t){t.append("rect")}),S=i.ensureSingle(g,"rect","bg",function(t){t.attr("shape-rendering","crispEdges")});S.call(u.stroke,e.bordercolor).call(u.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px");var D=i.ensureSingle(g,"g","scrollbox"),O=e.title;if(e._titleWidth=0,e._titleHeight=0,O.text){var E=i.ensureSingle(D,"text","legendtitletext");E.attr("text-anchor","start").call(c.font,O.font).text(O.text),M(E,D,t,e)}else D.selectAll(".legendtitletext").remove();var L=i.ensureSingle(g,"rect","scrollbar",function(t){t.attr(f.scrollBarEnterAttrs).call(u.fill,f.scrollBarColor)}),P=D.selectAll("g.groups").data(h);P.enter().append("g").attr("class","groups"),P.exit().remove();var I=P.selectAll("g.traces").data(i.identity);I.enter().append("g").attr("class","traces"),I.exit().remove(),I.style("opacity",function(t){var e=t[0].trace;return o.traceIs(e,"pie-like")?-1!==p.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1}).each(function(){r.select(this).call(w,t,e)}).call(b,t,e).each(function(){e._main&&r.select(this).call(T,t)}),i.syncOrAsync([a.previousPromises,function(){return function(t,e,n,i){var a=t._fullLayout;i||(i=a.legend);var o=a._size,s=x.isVertical(i),l=x.isGrouped(i),u=i.borderwidth,d=2*u,h=f.itemGap,p=i.itemwidth+2*h,g=2*(u+h),m=C(i),v=i.y<0||0===i.y&&"top"===m,y=i.y>1||1===i.y&&"bottom"===m;i._maxHeight=Math.max(v||y?a.height/2:o.h,30);var b=0;i._width=0,i._height=0;var _=function(t){var e=0,n=0,r=t.title.side;return r&&(-1!==r.indexOf("left")&&(e=t._titleWidth),-1!==r.indexOf("top")&&(n=t._titleHeight)),[e,n]}(i);if(s)n.each(function(t){var e=t[0].height;c.setTranslate(this,u+_[0],u+_[1]+i._height+e/2+h),i._height+=e,i._width=Math.max(i._width,t[0].width)}),b=p+i._width,i._width+=h+p+d,i._height+=g,l&&(e.each(function(t,e){c.setTranslate(this,0,e*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var w=A(i),k=y||v,T=a.width/2;i._maxWidth=Math.max(i.x<0||0===i.x&&"right"===w?k&&"left"===w?o.l+o.w:T:i.x>1||1===i.x&&"left"===w?k&&"right"===w?o.r+o.w:T:o.w,2*p);var M=0,S=0;n.each(function(t){var e=t[0].width+p;M=Math.max(M,e),S+=e}),b=null;var D=0;if(l){var O=0,E=0,L=0;e.each(function(){var t=0,e=0;r.select(this).selectAll("g.traces").each(function(n){var r=n[0].height;c.setTranslate(this,_[0],_[1]+u+h+r/2+e),e+=r,t=Math.max(t,p+n[0].width)}),O=Math.max(O,e);var n=t+h;n+u+E>i._maxWidth&&(D=Math.max(D,E),E=0,L+=O+i.tracegroupgap,O=e),c.setTranslate(this,E,L),E+=n}),i._width=Math.max(D,E)+u,i._height=L+O+g}else{var P=n.size(),I=S+d+(P-1)*h<i._maxWidth,R=0,N=0,F=0,z=0;n.each(function(t){var e=t[0].height,n=p+t[0].width,r=(I?n:M)+h;r+u+N-h>=i._maxWidth&&(D=Math.max(D,z),N=0,F+=R,i._height+=R,R=0),c.setTranslate(this,_[0]+u+N,_[1]+u+F+e/2+h),z=N+n+h,N+=r,R=Math.max(R,e)}),I?(i._width=N+d,i._height=R+g):(i._width=Math.max(D,z)+d,i._height+=R+g)}}i._width=Math.ceil(Math.max(i._width+_[0],i._titleWidth+2*(u+f.titlePad))),i._height=Math.ceil(Math.max(i._height+_[1],i._titleHeight+2*(u+f.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var V=t._context.edits,H=V.legendText||V.legendPosition;n.each(function(t){var e=r.select(this).select(".legendtoggle"),n=t[0].height,i=H?p:b||p+t[0].width;s||(i+=h/2),c.setRect(e,0,-n/2,i,n)})}(t,P,I,e)},function(){if(!e._main||!function(t){var e=t._fullLayout.legend,n=A(e),r=C(e);return a.autoMargin(t,"legend",{x:e.x,y:e.y,l:e._width*m[n],r:e._width*v[n],b:e._effHeight*v[r],t:e._effHeight*m[r]})}(t)){var u,h,p,y,b=s._size,x=e.borderwidth,w=b.l+b.w*e.x-m[A(e)]*e._width,T=b.t+b.h*(1-e.y)-m[C(e)]*e._effHeight;if(e._main&&s.margin.autoexpand){var M=w,O=T;w=i.constrain(w,0,s.width-e._width),T=i.constrain(T,0,s.height-e._effHeight),w!==M&&i.log("Constrain legend.x to make legend fit inside graph"),T!==O&&i.log("Constrain legend.y to make legend fit inside graph")}if(e._main&&c.setTranslate(g,w,T),L.on(".drag",null),g.on("wheel",null),!e._main||e._height<=e._maxHeight||t._context.staticPlot){var E=e._effHeight;e._main||(E=e._height),S.attr({width:e._width-x,height:E-x,x:x/2,y:x/2}),c.setTranslate(D,0,0),k.select("rect").attr({width:e._width-2*x,height:E-2*x,x:x,y:x}),c.setClipUrl(D,d,t),c.setRect(L,0,0,0,0),delete e._scrollY}else{var P,I,R=Math.max(f.scrollBarMinHeight,e._effHeight*e._effHeight/e._height),N=e._effHeight-R-2*f.scrollBarMargin,F=e._height-e._effHeight,z=N/F,V=Math.min(e._scrollY||0,F);S.attr({width:e._width-2*x+f.scrollBarWidth+f.scrollBarMargin,height:e._effHeight-x,x:x/2,y:x/2}),k.select("rect").attr({width:e._width-2*x+f.scrollBarWidth+f.scrollBarMargin,height:e._effHeight-2*x,x:x,y:x+V}),c.setClipUrl(D,d,t),B(V,R,z),g.on("wheel",function(){B(V=i.constrain(e._scrollY+r.event.deltaY/N*F,0,F),R,z),0!==V&&V!==F&&r.event.preventDefault()});var H=r.behavior.drag().on("dragstart",function(){var t=r.event.sourceEvent;P="touchstart"===t.type?t.changedTouches[0].clientY:t.clientY,I=V}).on("drag",function(){var t=r.event.sourceEvent;2===t.buttons||t.ctrlKey||B(V=function(t,e,n){return i.constrain((n-e)/z+t,0,F)}(I,P,"touchmove"===t.type?t.changedTouches[0].clientY:t.clientY),R,z)});L.call(H);var j=r.behavior.drag().on("dragstart",function(){var t=r.event.sourceEvent;"touchstart"===t.type&&(P=t.changedTouches[0].clientY,I=V)}).on("drag",function(){var t=r.event.sourceEvent;"touchmove"===t.type&&B(V=function(t,e,n){return i.constrain((e-n)/z+t,0,F)}(I,P,t.changedTouches[0].clientY),R,z)});D.call(j)}t._context.edits.legendPosition&&(g.classed("cursor-move",!0),l.init({element:g.node(),gd:t,prepFn:function(){var t=c.getTranslate(g);p=t.x,y=t.y},moveFn:function(t,n){var r=p+t,i=y+n;c.setTranslate(g,r,i),u=l.align(r,0,b.l,b.l+b.w,e.xanchor),h=l.align(i,0,b.t+b.h,b.t,e.yanchor)},doneFn:function(){void 0!==u&&void 0!==h&&o.call("_guiRelayout",t,{"legend.x":u,"legend.y":h})},clickFn:function(e,r){var i=n.selectAll("g.traces").filter(function(){var t=this.getBoundingClientRect();return r.clientX>=t.left&&r.clientX<=t.right&&r.clientY>=t.top&&r.clientY<=t.bottom});i.size()>0&&_(t,g,i,e,r)}}))}function B(n,r,i){e._scrollY=t._fullLayout.legend._scrollY=n,c.setTranslate(D,0,-n),c.setRect(L,e._width,f.scrollBarMargin+n*i,f.scrollBarWidth,r),k.select("rect").attr("y",x+n)}}],t)}}},{"../../constants/alignment":177,"../../lib":202,"../../lib/events":195,"../../lib/svg_text_utils":224,"../../plots/plots":282,"../../registry":290,"../color":75,"../dragelement":94,"../drawing":97,"./constants":126,"./get_legend_data":129,"./handle_click":130,"./helpers":131,"./style":133,d3:9}],129:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./helpers");e.exports=function(t,e){var n,a,o={},s=[],l=!1,c={},u=0,d=0,h=e._main;function f(t,n){if(""!==t&&i.isGrouped(e))-1===s.indexOf(t)?(s.push(t),l=!0,o[t]=[[n]]):o[t].push([n]);else{var r="~~i"+u;s.push(r),o[r]=[[n]],u++}}for(n=0;n<t.length;n++){var p=t[n],g=p[0],m=g.trace,v=m.legendgroup;if(!h||m.visible&&m.showlegend)if(r.traceIs(m,"pie-like"))for(c[v]||(c[v]={}),a=0;a<p.length;a++){var y=p[a].label;c[v][y]||(f(v,{label:y,color:p[a].color,i:p[a].i,trace:m,pts:p[a].pts}),c[v][y]=!0,d=Math.max(d,(y||"").length))}else f(v,g),d=Math.max(d,(m.name||"").length)}if(!s.length)return[];var b,x,_=s.length;if(l&&i.isGrouped(e))for(x=new Array(_),n=0;n<_;n++)b=o[s[n]],x[n]=i.isReversed(e)?b.reverse():b;else{for(x=[new Array(_)],n=0;n<_;n++)b=o[s[n]][0],x[0][i.isReversed(e)?_-n-1:n]=b;_=1}return e._lgroupsLength=_,e._maxNameLength=d,x}},{"../../registry":290,"./helpers":131}],130:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry"),a=!0;e.exports=function(t,e,n){var o=e._fullLayout;if(!e._dragged&&!e._editing){var s,l=o.legend.itemclick,c=o.legend.itemdoubleclick;if(1===n&&"toggle"===l&&"toggleothers"===c&&a&&e.data&&e._context.showTips?(r.notifier(r._(e,"Double-click on legend to isolate one trace"),"long"),a=!1):a=!1,1===n?s=l:2===n&&(s=c),s){var u,d,h,f,p,g=o.hiddenlabels?o.hiddenlabels.slice():[],m=t.data()[0][0],v=e._fullData,y=m.trace,b=y.legendgroup,x={},_=[],w=[],k=[];if(i.traceIs(y,"pie-like")){var T=m.label,M=g.indexOf(T);"toggle"===s?-1===M?g.push(T):g.splice(M,1):"toggleothers"===s&&(g=[],e.calcdata[0].forEach(function(t){T!==t.label&&g.push(t.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===g.length&&-1===M&&(g=[])),i.call("_guiRelayout",e,"hiddenlabels",g)}else{var A,C=b&&b.length,S=[];if(C)for(u=0;u<v.length;u++)(A=v[u]).visible&&A.legendgroup===b&&S.push(u);if("toggle"===s){var D;switch(y.visible){case!0:D="legendonly";break;case!1:D=!1;break;case"legendonly":D=!0}if(C)for(u=0;u<v.length;u++)!1!==v[u].visible&&v[u].legendgroup===b&&R(v[u],D);else R(y,D)}else if("toggleothers"===s){var O,E=!0;for(u=0;u<v.length;u++)if(O=!0!==v[u].showlegend,!(v[u]===y||O||C&&v[u].legendgroup===b||!0!==v[u].visible||i.traceIs(v[u],"notLegendIsolatable"))){E=!1;break}for(u=0;u<v.length;u++)if(!1!==v[u].visible&&!i.traceIs(v[u],"notLegendIsolatable"))switch(y.visible){case"legendonly":R(v[u],!0);break;case!0:O=!0!==v[u].showlegend&&!v[u].legendgroup,R(v[u],!!(v[u]===y||C&&v[u].legendgroup===b||O)||!!E||"legendonly")}}for(u=0;u<w.length;u++)if(h=w[u]){var L=h.constructUpdate(),P=Object.keys(L);for(d=0;d<P.length;d++)(x[f=P[d]]=x[f]||[])[k[u]]=L[f]}for(p=Object.keys(x),u=0;u<p.length;u++)for(f=p[u],d=0;d<_.length;d++)x[f].hasOwnProperty(d)||(x[f][d]=void 0);i.call("_guiRestyle",e,x,_)}}}function I(t,e,n){var r=_.indexOf(t),i=x[e];return i||(i=x[e]=[]),-1===_.indexOf(t)&&(_.push(t),r=_.length-1),i[r]=n,r}function R(t,e){var n=t._fullInput;if(i.hasTransform(n,"groupby")){var a=w[n.index];if(!a){var o=i.getTransformIndices(n,"groupby");a=r.keyedContainer(n,"transforms["+o[o.length-1]+"].styles","target","value.visible"),w[n.index]=a}var s=a.get(t._group);void 0===s&&(s=!0),!1!==s&&a.set(t._group,e),k[n.index]=I(n.index,"visible",!1!==n.visible)}else I(n.index,"visible",!1!==n.visible&&e)}}},{"../../lib":202,"../../registry":290}],131:[function(t,e,n){"use strict";n.isGrouped=function(t){return-1!==(t.traceorder||"").indexOf("grouped")},n.isVertical=function(t){return"h"!==t.orientation},n.isReversed=function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},{}],132:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":125,"./defaults":127,"./draw":128,"./style":133}],133:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../lib"),o=a.strTranslate,s=t("../drawing"),l=t("../color"),c=t("../colorscale/helpers").extractOpts,u=t("../../traces/scatter/subtypes"),d=t("../../traces/pie/style_one"),h=t("../../traces/pie/helpers").castOption,f=t("./constants");function p(t,e){return(e?"radial":"horizontal")+(t?"":"reversed")}e.exports=function(t,e,n){n||(n=e._fullLayout.legend);var g="constant"===n.itemsizing,m=n.itemwidth,v=o((m+2*f.itemGap)/2,0),y=function(t,e,n,r){var i;if(t+1)i=t;else{if(!(e&&e.width>0))return 0;i=e.width}return g?r:Math.min(i,n)};function b(t,e,n){var a=t[0].trace,o=a.marker||{},s=o.line||{},c=n?a.visible&&a.type===n:i.traceIs(a,"bar"),u=r.select(e).select("g.legendpoints").selectAll("path.legend"+n).data(c?[t]:[]);u.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),u.exit().remove(),u.each(function(t){var e=r.select(this),n=t[0],i=y(n.mlw,o.line,5,2);e.style("stroke-width",i+"px").call(l.fill,n.mc||o.color),i&&l.stroke(e,n.mlc||s.color)})}function x(t,e,n){var o=t[0],s=o.trace,l=n?s.visible&&s.type===n:i.traceIs(s,n),c=r.select(e).select("g.legendpoints").selectAll("path.legend"+n).data(l?[t]:[]);if(c.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),c.exit().remove(),c.size()){var u=(s.marker||{}).line,f=y(h(u.width,o.pts),u,5,2),p=a.minExtend(s,{marker:{line:{width:f}}});p.marker.line.color=u.color;var g=a.minExtend(o,{trace:p});d(c,g,p)}}t.each(function(t){var e=r.select(this),i=a.ensureSingle(e,"g","layers");i.style("opacity",t[0].trace.opacity);var s=n.valign,l=t[0].lineHeight,c=t[0].height;i.attr("transform","middle"!==s&&l&&c?o(0,{top:1,bottom:-1}[s]*(.5*(l-c+3))):null),i.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0),i.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",!0);var u=i.selectAll("g.legendsymbols").data([t]);u.enter().append("g").classed("legendsymbols",!0),u.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)}).each(function(t){var n,i=t[0].trace,o=[];if(i.visible)switch(i.type){case"histogram2d":case"heatmap":o=[["M-15,-2V4H15V-2Z"]],n=!0;break;case"choropleth":case"choroplethmapbox":o=[["M-6,-6V6H6V-6Z"]],n=!0;break;case"densitymapbox":o=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],n="radial";break;case"cone":o=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],n=!1;break;case"streamtube":o=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],n=!1;break;case"surface":o=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],n=!0;break;case"mesh3d":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!1;break;case"volume":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],n=!0;break;case"isosurface":o=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],n=!1}var u=r.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(o);u.enter().append("path").classed("legend3dandfriends",!0).attr("transform",v).style("stroke-miterlimit",1),u.exit().remove(),u.each(function(t,o){var u,d=r.select(this),h=c(i),f=h.colorscale,g=h.reversescale;if(f){if(!n){var m=f.length;u=0===o?f[g?m-1:0][1]:1===o?f[g?0:m-1][1]:f[Math.floor((m-1)/2)][1]}}else{var v=i.vertexcolor||i.facecolor||i.color;u=a.isArrayOrTypedArray(v)?v[o]||v[0]:v}d.attr("d",t[0]),u?d.call(l.fill,u):d.call(function(t){t.size()&&s.gradient(t,e,"legendfill-"+i.uid,p(g,"radial"===n),f,"fill")})})}).each(function(t){var e=t[0].trace,n="waterfall"===e.type;if(t[0]._distinct&&n){var i=t[0].trace[t[0].dir].marker;return t[0].mc=i.color,t[0].mlw=i.line.width,t[0].mlc=i.line.color,b(t,this,"waterfall")}var a=[];e.visible&&n&&(a=t[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var o=r.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(a);o.enter().append("path").classed("legendwaterfall",!0).attr("transform",v).style("stroke-miterlimit",1),o.exit().remove(),o.each(function(t){var n=r.select(this),i=e[t[0]].marker,a=y(void 0,i.line,5,2);n.attr("d",t[1]).style("stroke-width",a+"px").call(l.fill,i.color),a&&n.call(l.stroke,i.line.color)})}).each(function(t){b(t,this,"funnel")}).each(function(t){b(t,this)}).each(function(t){var n=t[0].trace,o=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&i.traceIs(n,"box-violin")?[t]:[]);o.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),o.exit().remove(),o.each(function(){var t=r.select(this);if("all"!==n.boxpoints&&"all"!==n.points||0!==l.opacity(n.fillcolor)||0!==l.opacity((n.line||{}).color)){var i=y(void 0,n.line,5,2);t.style("stroke-width",i+"px").call(l.fill,n.fillcolor),i&&l.stroke(t,n.line.color)}else{var c=a.minExtend(n,{marker:{size:g?12:a.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});o.call(s.pointStyle,c,e)}})}).each(function(t){x(t,this,"funnelarea")}).each(function(t){x(t,this,"pie")}).each(function(t){var n,i,o=t[0],l=o.trace,d=l.visible&&l.fill&&"none"!==l.fill,h=u.hasLines(l),f=l.contours,g=!1,v=!1,b=c(l),x=b.colorscale,_=b.reversescale;if(f){var w=f.coloring;"lines"===w?g=!0:h="none"===w||"heatmap"===w||f.showlines,"constraint"===f.type?d="="!==f._operation:"fill"!==w&&"heatmap"!==w||(v=!0)}var k=u.hasMarkers(l)||u.hasText(l)||!d&&!v?"M5,0":h||g?"M5,-2":"M5,-3",T=r.select(this),M=T.select(".legendfill").selectAll("path").data(d||v?[t]:[]);if(M.enter().append("path").classed("js-fill",!0),M.exit().remove(),M.attr("d",k+"h"+m+"v6h-"+m+"z").call(d?s.fillGroupStyle:function(t){t.size()&&s.gradient(t,e,"legendfill-"+l.uid,p(_),x,"fill")}),h||g){var A=y(void 0,l.line,10,5);i=a.minExtend(l,{line:{width:A}}),n=[a.minExtend(o,{trace:i})]}var C=T.select(".legendlines").selectAll("path").data(h||g?[n]:[]);C.enter().append("path").classed("js-line",!0),C.exit().remove(),C.attr("d",k+(g?"l"+m+",0.0001":"h"+m)).call(h?s.lineGroupStyle:function(t){if(t.size()){var n="legendline-"+l.uid;s.lineGroupStyle(t),s.gradient(t,e,n,p(_),x,"stroke")}})}).each(function(t){var n,i,o=t[0],l=o.trace,c=u.hasMarkers(l),d=u.hasText(l),h=u.hasLines(l);function f(t,e,n,r){var i=a.nestedProperty(l,t).get(),o=a.isArrayOrTypedArray(i)&&e?e(i):i;if(g&&o&&void 0!==r&&(o=r),n){if(o<n[0])return n[0];if(o>n[1])return n[1]}return o}function p(t){return o._distinct&&o.index&&t[o.index]?t[o.index]:t[0]}if(c||d||h){var m={},y={};if(c){m.mc=f("marker.color",p),m.mx=f("marker.symbol",p),m.mo=f("marker.opacity",a.mean,[.2,1]),m.mlc=f("marker.line.color",p),m.mlw=f("marker.line.width",a.mean,[0,5],2),y.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var b=f("marker.size",a.mean,[2,16],12);m.ms=b,y.marker.size=b}h&&(y.line={width:f("line.width",p,[0,10],5)}),d&&(m.tx="Aa",m.tp=f("textposition",p),m.ts=10,m.tc=f("textfont.color",p),m.tf=f("textfont.family",p)),n=[a.minExtend(o,m)],(i=a.minExtend(l,y)).selectedpoints=null,i.texttemplate=null}var x=r.select(this).select("g.legendpoints"),_=x.selectAll("path.scatterpts").data(c?n:[]);_.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",v),_.exit().remove(),_.call(s.pointStyle,i,e),c&&(n[0].mrc=3);var w=x.selectAll("g.pointtext").data(d?n:[]);w.enter().append("g").classed("pointtext",!0).append("text").attr("transform",v),w.exit().remove(),w.selectAll("text").call(s.textPointStyle,i,e)}).each(function(t){var e=t[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(e.visible&&"candlestick"===e.type?[t,t]:[]);n.enter().append("path").classed("legendcandle",!0).attr("d",function(t,e){return e?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",v).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(t,n){var i=r.select(this),a=e[n?"increasing":"decreasing"],o=y(void 0,a.line,5,2);i.style("stroke-width",o+"px").call(l.fill,a.fillcolor),o&&l.stroke(i,a.line.color)})}).each(function(t){var e=t[0].trace,n=r.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(e.visible&&"ohlc"===e.type?[t,t]:[]);n.enter().append("path").classed("legendohlc",!0).attr("d",function(t,e){return e?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",v).style("stroke-miterlimit",1),n.exit().remove(),n.each(function(t,n){var i=r.select(this),a=e[n?"increasing":"decreasing"],o=y(void 0,a.line,5,2);i.style("fill","none").call(s.dashLine,a.line.dash,o),o&&l.stroke(i,a.line.color)})})}},{"../../lib":202,"../../registry":290,"../../traces/pie/helpers":322,"../../traces/pie/style_one":328,"../../traces/scatter/subtypes":355,"../color":75,"../colorscale/helpers":86,"../drawing":97,"./constants":126,d3:9}],134:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../plots/plots"),a=t("../../plots/cartesian/axis_ids"),o=t("../../fonts/ploticon"),s=t("../shapes/draw").eraseActiveShape,l=t("../../lib"),c=l._,u=e.exports={};function d(t,e){var n,i,o=e.currentTarget,s=o.getAttribute("data-attr"),l=o.getAttribute("data-val")||!0,c=t._fullLayout,u={},d=a.list(t,null,!0),h=c._cartesianSpikesEnabled;if("zoom"===s){var f,p="in"===l?.5:2,g=(1+p)/2,m=(1-p)/2;for(i=0;i<d.length;i++)if(!(n=d[i]).fixedrange)if(f=n._name,"auto"===l)u[f+".autorange"]=!0;else if("reset"===l){if(void 0===n._rangeInitial)u[f+".autorange"]=!0;else{var v=n._rangeInitial.slice();u[f+".range[0]"]=v[0],u[f+".range[1]"]=v[1]}void 0!==n._showSpikeInitial&&(u[f+".showspikes"]=n._showSpikeInitial,"on"!==h||n._showSpikeInitial||(h="off"))}else{var y=[n.r2l(n.range[0]),n.r2l(n.range[1])],b=[g*y[0]+m*y[1],g*y[1]+m*y[0]];u[f+".range[0]"]=n.l2r(b[0]),u[f+".range[1]"]=n.l2r(b[1])}}else"hovermode"!==s||"x"!==l&&"y"!==l||o.setAttribute("data-val",l=c._isHoriz?"y":"x"),u[s]=l;c._cartesianSpikesEnabled=h,r.call("_guiRelayout",t,u)}function h(t,e){for(var n=e.currentTarget,i=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=t._fullLayout._subplots.gl3d||[],s={},l=i.split("."),c=0;c<o.length;c++)s[o[c]+"."+l[1]]=a;s.dragmode="pan"===a?a:"zoom",r.call("_guiRelayout",t,s)}function f(t,e){for(var n=e.currentTarget.getAttribute("data-attr"),i="resetLastSave"===n,a="resetDefault"===n,o=t._fullLayout,s=o._subplots.gl3d||[],l={},c=0;c<s.length;c++){var u,d=s[c],h=d+".camera",f=d+".aspectratio",p=d+".aspectmode",g=o[d]._scene;i?(l[h+".up"]=g.viewInitial.up,l[h+".eye"]=g.viewInitial.eye,l[h+".center"]=g.viewInitial.center,u=!0):a&&(l[h+".up"]=null,l[h+".eye"]=null,l[h+".center"]=null,u=!0),u&&(l[f+".x"]=g.viewInitial.aspectratio.x,l[f+".y"]=g.viewInitial.aspectratio.y,l[f+".z"]=g.viewInitial.aspectratio.z,l[p]=g.viewInitial.aspectmode)}r.call("_guiRelayout",t,l)}function p(t,e){var n=e.currentTarget,r=n._previousVal,i=t._fullLayout,a=i._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],s={},l={};if(r)l=r,n._previousVal=null;else{for(var c=0;c<a.length;c++){var u=a[c],d=i[u],h=u+".hovermode";s[h]=d.hovermode,l[h]=!1;for(var f=0;f<3;f++){var p=o[f],g=u+"."+p+".showspikes";l[g]=!1,s[g]=d[p].showspikes}}n._previousVal=s}return l}function g(t,e){for(var n=e.currentTarget,i=n.getAttribute("data-attr"),a=n.getAttribute("data-val")||!0,o=t._fullLayout,s=o._subplots.geo||[],l=0;l<s.length;l++){var c=s[l];if("zoom"===i){var u=o[c].projection.scale;r.call("_guiRelayout",t,c+".projection.scale","in"===a?2*u:.5*u)}}"reset"===i&&b(t,"geo")}function m(t){var e=t._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function v(t){var e=m(t);r.call("_guiRelayout",t,"hovermode",e)}function y(t,e){for(var n=e.currentTarget.getAttribute("data-val"),i=t._fullLayout,a=i._subplots.mapbox||[],o={},s=0;s<a.length;s++){var l=a[s],c=i[l].zoom;o[l+".zoom"]="in"===n?1.05*c:c/1.05}r.call("_guiRelayout",t,o)}function b(t,e){for(var n=t._fullLayout,i=n._subplots[e]||[],a={},o=0;o<i.length;o++)for(var s=i[o],l=n[s]._subplot.viewInitial,c=Object.keys(l),u=0;u<c.length;u++){var d=c[u];a[s+"."+d]=l[d]}r.call("_guiRelayout",t,a)}u.toImage={name:"toImage",title:function(t){return c(t,"png"===((t._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:o.camera,click:function(t){var e=t._context.toImageButtonOptions,n={format:e.format||"png"};l.notifier(c(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==n.format&&l.isIE()&&(l.notifier(c(t,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach(function(t){t in e&&(n[t]=e[t])}),r.call("downloadImage",t,n).then(function(e){l.notifier(c(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){l.notifier(c(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},u.sendDataToCloud={name:"sendDataToCloud",title:function(t){return c(t,"Edit in Chart Studio")},icon:o.disk,click:function(t){i.sendDataToCloud(t)}},u.editInChartStudio={name:"editInChartStudio",title:function(t){return c(t,"Edit in Chart Studio")},icon:o.pencil,click:function(t){i.sendDataToCloud(t)}},u.zoom2d={name:"zoom2d",title:function(t){return c(t,"Zoom")},attr:"dragmode",val:"zoom",icon:o.zoombox,click:d},u.pan2d={name:"pan2d",title:function(t){return c(t,"Pan")},attr:"dragmode",val:"pan",icon:o.pan,click:d},u.select2d={name:"select2d",title:function(t){return c(t,"Box Select")},attr:"dragmode",val:"select",icon:o.selectbox,click:d},u.lasso2d={name:"lasso2d",title:function(t){return c(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:o.lasso,click:d},u.drawclosedpath={name:"drawclosedpath",title:function(t){return c(t,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:o.drawclosedpath,click:d},u.drawopenpath={name:"drawopenpath",title:function(t){return c(t,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:o.drawopenpath,click:d},u.drawline={name:"drawline",title:function(t){return c(t,"Draw line")},attr:"dragmode",val:"drawline",icon:o.drawline,click:d},u.drawrect={name:"drawrect",title:function(t){return c(t,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:o.drawrect,click:d},u.drawcircle={name:"drawcircle",title:function(t){return c(t,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:o.drawcircle,click:d},u.eraseshape={name:"eraseshape",title:function(t){return c(t,"Erase active shape")},icon:o.eraseshape,click:s},u.zoomIn2d={name:"zoomIn2d",title:function(t){return c(t,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:d},u.zoomOut2d={name:"zoomOut2d",title:function(t){return c(t,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:d},u.autoScale2d={name:"autoScale2d",title:function(t){return c(t,"Autoscale")},attr:"zoom",val:"auto",icon:o.autoscale,click:d},u.resetScale2d={name:"resetScale2d",title:function(t){return c(t,"Reset axes")},attr:"zoom",val:"reset",icon:o.home,click:d},u.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(t){return c(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:o.tooltip_basic,gravity:"ne",click:d},u.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(t){return c(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:o.tooltip_compare,gravity:"ne",click:d},u.zoom3d={name:"zoom3d",title:function(t){return c(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:o.zoombox,click:h},u.pan3d={name:"pan3d",title:function(t){return c(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:o.pan,click:h},u.orbitRotation={name:"orbitRotation",title:function(t){return c(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:o["3d_rotate"],click:h},u.tableRotation={name:"tableRotation",title:function(t){return c(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:o["z-axis"],click:h},u.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(t){return c(t,"Reset camera to default")},attr:"resetDefault",icon:o.home,click:f},u.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(t){return c(t,"Reset camera to last save")},attr:"resetLastSave",icon:o.movie,click:f},u.hoverClosest3d={name:"hoverClosest3d",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:function(t,e){var n=p(t,e);r.call("_guiRelayout",t,n)}},u.zoomInGeo={name:"zoomInGeo",title:function(t){return c(t,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:g},u.zoomOutGeo={name:"zoomOutGeo",title:function(t){return c(t,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:g},u.resetGeo={name:"resetGeo",title:function(t){return c(t,"Reset")},attr:"reset",val:null,icon:o.autoscale,click:g},u.hoverClosestGeo={name:"hoverClosestGeo",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:v},u.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:v},u.hoverClosestPie={name:"hoverClosestPie",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:o.tooltip_basic,gravity:"ne",click:v},u.resetViewSankey={name:"resetSankeyGroup",title:function(t){return c(t,"Reset view")},icon:o.home,click:function(t){for(var e={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<t._fullData.length;n++){var i=t._fullData[n]._viewInitial;e["node.groups"].push(i.node.groups.slice()),e["node.x"].push(i.node.x.slice()),e["node.y"].push(i.node.y.slice())}r.call("restyle",t,e)}},u.toggleHover={name:"toggleHover",title:function(t){return c(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:o.tooltip_basic,gravity:"ne",click:function(t,e){var n=p(t,e);n.hovermode=m(t),r.call("_guiRelayout",t,n)}},u.resetViews={name:"resetViews",title:function(t){return c(t,"Reset views")},icon:o.home,click:function(t,e){var n=e.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),d(t,e),n.setAttribute("data-attr","resetLastSave"),f(t,e),b(t,"geo"),b(t,"mapbox")}},u.toggleSpikelines={name:"toggleSpikelines",title:function(t){return c(t,"Toggle Spike Lines")},icon:o.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout;e._cartesianSpikesEnabled="on"===e._cartesianSpikesEnabled?"off":"on",r.call("_guiRelayout",t,function(t){for(var e="on"===t._fullLayout._cartesianSpikesEnabled,n=a.list(t,null,!0),r={},i=0;i<n.length;i++){var o=n[i];r[o._name+".showspikes"]=!!e||o._showSpikeInitial}return r}(t))}},u.resetViewMapbox={name:"resetViewMapbox",title:function(t){return c(t,"Reset view")},attr:"reset",icon:o.home,click:function(t){b(t,"mapbox")}},u.zoomInMapbox={name:"zoomInMapbox",title:function(t){return c(t,"Zoom in")},attr:"zoom",val:"in",icon:o.zoom_plus,click:y},u.zoomOutMapbox={name:"zoomOutMapbox",title:function(t){return c(t,"Zoom out")},attr:"zoom",val:"out",icon:o.zoom_minus,click:y}},{"../../fonts/ploticon":185,"../../lib":202,"../../plots/cartesian/axis_ids":251,"../../plots/plots":282,"../../registry":290,"../shapes/draw":156}],135:[function(t,e,n){"use strict";n.manage=t("./manage")},{"./manage":136}],136:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axis_ids"),i=t("../../traces/scatter/subtypes"),a=t("../../registry"),o=t("../fx/helpers").isUnifiedHover,s=t("./modebar"),l=t("./buttons");e.exports=function(t){var e=t._fullLayout,n=t._context,u=e._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var d,h=n.modeBarButtons;d=Array.isArray(h)&&h.length?function(t){for(var e=0;e<t.length;e++)for(var n=t[e],r=0;r<n.length;r++){var i=n[r];if("string"==typeof i){if(void 0===l[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][r]=l[i]}}return t}(h):!n.displayModeBar&&n.watermark?[]:function(t){var e=t._fullLayout,n=t._fullData,s=t._context,u=s.modeBarButtonsToRemove,d=s.modeBarButtonsToAdd,h=e._has("cartesian"),f=e._has("gl3d"),p=e._has("geo"),g=e._has("pie"),m=e._has("funnelarea"),v=e._has("gl2d"),y=e._has("ternary"),b=e._has("mapbox"),x=e._has("polar"),_=e._has("sankey"),w=function(t){for(var e=r.list({_fullLayout:t},null,!0),n=0;n<e.length;n++)if(!e[n].fixedrange)return!1;return!0}(e),k=o(e.hovermode),T=[];function M(t){if(t.length){for(var e=[],n=0;n<t.length;n++){var r=t[n];-1===u.indexOf(r)&&e.push(l[r])}T.push(e)}}var A=["toImage"];s.showEditInChartStudio?A.push("editInChartStudio"):s.showSendToCloud&&A.push("sendDataToCloud"),M(A);var C=[],S=[],D=[],O=[];if((h||v||g||m||y)+p+f+b+x>1?(S=["toggleHover"],D=["resetViews"]):p?(C=["zoomInGeo","zoomOutGeo"],S=["hoverClosestGeo"],D=["resetGeo"]):f?(S=["hoverClosest3d"],D=["resetCameraDefault3d","resetCameraLastSave3d"]):b?(C=["zoomInMapbox","zoomOutMapbox"],S=["toggleHover"],D=["resetViewMapbox"]):v?S=["hoverClosestGl2d"]:g?S=["hoverClosestPie"]:_?(S=["hoverClosestCartesian","hoverCompareCartesian"],D=["resetViewSankey"]):S=["toggleHover"],h&&(S=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(t){for(var e=0;e<t.length;e++)if(!a.traceIs(t[e],"noHover"))return!1;return!0}(n)||k)&&(S=[]),!h&&!v||w||(C=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==D[0]&&(D=["resetScale2d"])),f?O=["zoom3d","pan3d","orbitRotation","tableRotation"]:(h||v)&&!w||y?O=["zoom2d","pan2d"]:b||p?O=["pan2d"]:x&&(O=["zoom2d"]),function(t){for(var e=!1,n=0;n<t.length&&!e;n++){var r=t[n];r._module&&r._module.selectPoints&&(a.traceIs(r,"scatter-like")?(i.hasMarkers(r)||i.hasText(r))&&(e=!0):a.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(e=!0))}return e}(n)&&O.push("select2d","lasso2d"),Array.isArray(d)){for(var E=[],L=0;L<d.length;L++){var P=d[L];"string"==typeof P?-1!==c.indexOf(P)&&(e._has("mapbox")||e._has("cartesian"))&&O.push(P):E.push(P)}d=E}return M(O),M(C.concat(D)),M(S),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t}(T,d)}(t),u?u.update(t,d):e._modeBar=s(t,d)}else u&&(u.destroy(),delete e._modeBar)};var c=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"]},{"../../plots/cartesian/axis_ids":251,"../../registry":290,"../../traces/scatter/subtypes":355,"../fx/helpers":111,"./buttons":134,"./modebar":137}],137:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../../lib"),o=t("../../fonts/ploticon"),s=new DOMParser;function l(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var c=l.prototype;c.update=function(t,e){this.graphInfo=t;var n=this.graphInfo._context,r=this.graphInfo._fullLayout,i="modebar-"+r._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===r.modebar.orientation&&(this.element.className+=" vertical",e=e.reverse());var o=r.modebar,s="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";a.deleteRelatedStyleRule(i),a.addRelatedStyleRule(i,s+"#"+i+" .modebar-group","background-color: "+o.bgcolor),a.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+o.color),a.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+o.activecolor),a.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+o.activecolor);var l=!this.hasButtons(e),c=this.hasLogo!==n.displaylogo,u=this.locale!==n.locale;if(this.locale=n.locale,(l||c||u)&&(this.removeAllButtons(),this.updateButtons(e),n.watermark||n.displaylogo)){var d=this.getLogo();n.watermark&&(d.className=d.className+" watermark"),"v"===r.modebar.orientation?this.element.insertBefore(d,this.element.childNodes[0]):this.element.appendChild(d),this.hasLogo=!0}this.updateActiveButton()},c.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(t){var n=e.createGroup();t.forEach(function(t){var r=t.name;if(!r)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(r))throw new Error("button name '"+r+"' is taken");e.buttonsNames.push(r);var i=e.createButton(t);e.buttonElements.push(i),n.appendChild(i)}),e.element.appendChild(n)})},c.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},c.createButton=function(t){var e=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var i=t.title;void 0===i?i=t.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&n.setAttribute("data-title",i),void 0!==t.attr&&n.setAttribute("data-attr",t.attr);var a=t.val;if(void 0!==a&&("function"==typeof a&&(a=a(this.graphInfo)),n.setAttribute("data-val",a)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(n){t.click(e.graphInfo,n),e.updateActiveButton(n.currentTarget)}),n.setAttribute("data-toggle",t.toggle||!1),t.toggle&&r.select(n).classed("active",!0);var s=t.icon;return n.appendChild("function"==typeof s?s():this.createIcon(s||o.question)),n.setAttribute("data-gravity",t.gravity||"n"),n},c.createIcon=function(t){var e,n=i(t.height)?Number(t.height):t.ascent-t.descent,r="http://www.w3.org/2000/svg";if(t.path){(e=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,t.width,n].join(" ")),e.setAttribute("class","icon");var a=document.createElementNS(r,"path");a.setAttribute("d",t.path),t.transform?a.setAttribute("transform",t.transform):void 0!==t.ascent&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),e.appendChild(a)}return t.svg&&(e=s.parseFromString(t.svg,"application/xml").childNodes[0]),e.setAttribute("height","1em"),e.setAttribute("width","1em"),e},c.updateActiveButton=function(t){var e=this.graphInfo._fullLayout,n=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(t){var i=t.getAttribute("data-val")||!0,o=t.getAttribute("data-attr"),s="true"===t.getAttribute("data-toggle"),l=r.select(t);if(s)o===n&&l.classed("active",!l.classed("active"));else{var c=null===o?o:a.nestedProperty(e,o).get();l.classed("active",c===i)}})},c.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n){if(t[n].length!==e[n].length)return!1;for(var r=0;r<t[n].length;r++)if(t[n][r].name!==e[n][r].name)return!1}return!0},c.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plotly.com/",e.target="_blank",e.setAttribute("data-title",a._(this.graphInfo,"Produced with Plotly")),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(o.newplotlylogo)),t.appendChild(e),t},c.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},c.destroy=function(){a.removeElement(this.container.querySelector(".modebar")),a.deleteRelatedStyleRule(this._uid)},e.exports=function(t,e){var n=t._fullLayout,i=new l({graphInfo:t,container:n._modebardiv.node(),buttons:e});return n._privateplot&&r.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},{"../../fonts/ploticon":185,"../../lib":202,d3:9,"fast-isnumeric":11}],138:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes"),a=(0,t("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});e.exports={visible:{valType:"boolean",editType:"plot"},buttons:a,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":237,"../../plots/font_attributes":276,"../color/attributes":74}],139:[function(t,e,n){"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],140:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../color"),a=t("../../plot_api/plot_template"),o=t("../../plots/array_container_defaults"),s=t("./attributes"),l=t("./constants");function c(t,e,n,i){var a=i.calendar;function o(n,i){return r.coerce(t,e,s.buttons,n,i)}if(o("visible")){var l=o("step");"all"!==l&&(!a||"gregorian"===a||"month"!==l&&"year"!==l?o("stepmode"):e.stepmode="backward",o("count")),o("label")}}e.exports=function(t,e,n,u,d){var h=t.rangeselector||{},f=a.newContainer(e,"rangeselector");function p(t,e){return r.coerce(h,f,s,t,e)}if(p("visible",o(h,f,{name:"buttons",handleItemDefaults:c,calendar:d}).length>0)){var g=function(t,e,n){for(var r=n.filter(function(n){return e[n].anchor===t._id}),i=0,a=0;a<r.length;a++){var o=e[r[a]].domain;o&&(i=Math.max(o[1],i))}return[t.domain[0],i+l.yPad]}(e,n,u);p("x",g[0]),p("y",g[1]),r.noneOrAll(t,e,["x","y"]),p("xanchor"),p("yanchor"),r.coerceFont(p,"font",n.font);var m=p("bgcolor");p("activecolor",i.contrast(m,l.lightAmount,l.darkAmount)),p("bordercolor"),p("borderwidth")}}},{"../../lib":202,"../../plot_api/plot_template":237,"../../plots/array_container_defaults":243,"../color":75,"./attributes":138,"./constants":139}],141:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../plots/plots"),o=t("../color"),s=t("../drawing"),l=t("../../lib"),c=l.strTranslate,u=t("../../lib/svg_text_utils"),d=t("../../plots/cartesian/axis_ids"),h=t("../../constants/alignment"),f=h.LINE_SPACING,p=h.FROM_TL,g=h.FROM_BR,m=t("./constants"),v=t("./get_update_object");function y(t){return t._id}function b(t,e,n){var r=l.ensureSingle(t,"rect","selector-rect",function(t){t.attr("shape-rendering","crispEdges")});r.attr({rx:m.rx,ry:m.ry}),r.call(o.stroke,e.bordercolor).call(o.fill,function(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}(e,n)).style("stroke-width",e.borderwidth+"px")}function x(t,e,n,r){l.ensureSingle(t,"text","selector-text",function(t){t.attr("text-anchor","middle")}).call(s.font,e.font).text(function(t,e){return t.label?e?l.templateString(t.label,e):t.label:"all"===t.step?"all":t.count+t.step.charAt(0)}(n,r._fullLayout._meta)).call(function(t){u.convertToTspans(t,r)})}e.exports=function(t){var e=t._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=d.list(t,"x",!0),n=[],r=0;r<e.length;r++){var i=e[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}(t),y);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var n=r.select(this),o=e,d=o.rangeselector,h=n.selectAll("g.button").data(l.filterVisible(d.buttons));h.enter().append("g").classed("button",!0),h.exit().remove(),h.each(function(e){var n=r.select(this),a=v(o,e);e._isActive=function(t,e,n){if("all"===e.step)return!0===t.autorange;var r=Object.keys(n);return t.range[0]===n[r[0]]&&t.range[1]===n[r[1]]}(o,e,a),n.call(b,d,e),n.call(x,d,e,t),n.on("click",function(){t._dragged||i.call("_guiRelayout",t,a)}),n.on("mouseover",function(){e._isHovered=!0,n.call(b,d,e)}),n.on("mouseout",function(){e._isHovered=!1,n.call(b,d,e)})}),function(t,e,n,i,o){var d=0,h=0,v=n.borderwidth;e.each(function(){var t=r.select(this).select(".selector-text"),e=Math.max(n.font.size*f*u.lineCount(t),16)+3;h=Math.max(h,e)}),e.each(function(){var t=r.select(this),e=t.select(".selector-rect"),i=t.select(".selector-text"),a=i.node()&&s.bBox(i.node()).width,o=n.font.size*f,l=u.lineCount(i),p=Math.max(a+10,m.minButtonWidth);t.attr("transform",c(v+d,v)),e.attr({x:0,y:0,width:p,height:h}),u.positionText(i,p/2,h/2-(l-1)*o/2+3),d+=p+5});var y=t._fullLayout._size,b=y.l+y.w*n.x,x=y.t+y.h*(1-n.y),_="left";l.isRightAnchor(n)&&(b-=d,_="right"),l.isCenterAnchor(n)&&(b-=d/2,_="center");var w="top";l.isBottomAnchor(n)&&(x-=h,w="bottom"),l.isMiddleAnchor(n)&&(x-=h/2,w="middle"),d=Math.ceil(d),h=Math.ceil(h),b=Math.round(b),x=Math.round(x),a.autoMargin(t,i+"-range-selector",{x:n.x,y:n.y,l:d*p[_],r:d*g[_],b:h*g[w],t:h*p[w]}),o.attr("transform",c(b,x))}(t,h,d,o._name,n)})}},{"../../constants/alignment":177,"../../lib":202,"../../lib/svg_text_utils":224,"../../plots/cartesian/axis_ids":251,"../../plots/plots":282,"../../registry":290,"../color":75,"../drawing":97,"./constants":139,"./get_update_object":142,d3:9}],142:[function(t,e,n){"use strict";var r=t("d3");e.exports=function(t,e){var n=t._name,i={};if("all"===e.step)i[n+".autorange"]=!0;else{var a=function(t,e){var n,i=t.range,a=new Date(t.r2l(i[1])),o=e.step,s=e.count;switch(e.stepmode){case"backward":n=t.l2r(+r.time[o].utc.offset(a,-s));break;case"todate":var l=r.time[o].utc.offset(a,-s);n=t.l2r(+r.time[o].utc.ceil(l))}return[n,i[1]]}(t,e);i[n+".range[0]"]=a[0],i[n+".range[1]"]=a[1]}return i}},{d3:9}],143:[function(t,e,n){"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":138,"./defaults":140,"./draw":141}],144:[function(t,e,n){"use strict";var r=t("../color/attributes");e.exports={bgcolor:{valType:"color",dflt:r.background,editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":74}],145:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axis_ids").list,i=t("../../plots/cartesian/autorange").getAutoRange,a=t("./constants");e.exports=function(t){for(var e=r(t,"x",!0),n=0;n<e.length;n++){var o=e[n],s=o[a.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=i(t,o))}}},{"../../plots/cartesian/autorange":247,"../../plots/cartesian/axis_ids":251,"./constants":146}],146:[function(t,e,n){"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],147:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plot_api/plot_template"),a=t("../../plots/cartesian/axis_ids"),o=t("./attributes"),s=t("./oppaxis_attributes");e.exports=function(t,e,n){var l=t[n],c=e[n];if(l.rangeslider||e._requestRangeslider[c._id]){r.isPlainObject(l.rangeslider)||(l.rangeslider={});var u,d,h=l.rangeslider,f=i.newContainer(c,"rangeslider");if(_("visible")){_("bgcolor",e.plot_bgcolor),_("bordercolor"),_("borderwidth"),_("thickness"),_("autorange",!c.isValidRange(h.range)),_("range");var p=e._subplots;if(p)for(var g=p.cartesian.filter(function(t){return t.substr(0,t.indexOf("y"))===a.name2id(n)}).map(function(t){return t.substr(t.indexOf("y"),t.length)}),m=r.simpleMap(g,a.id2name),v=0;v<m.length;v++){var y=m[v];u=h[y]||{},d=i.newContainer(f,y,"yaxis");var b,x=e[y];u.range&&x.isValidRange(u.range)&&(b="fixed"),"match"!==w("rangemode",b)&&w("range",x.range.slice())}f._input=h}}function _(t,e){return r.coerce(h,f,o,t,e)}function w(t,e){return r.coerce(u,d,s,t,e)}}},{"../../lib":202,"../../plot_api/plot_template":237,"../../plots/cartesian/axis_ids":251,"./attributes":144,"./oppaxis_attributes":151}],148:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../plots/plots"),o=t("../../lib"),s=o.strTranslate,l=t("../drawing"),c=t("../color"),u=t("../titles"),d=t("../../plots/cartesian"),h=t("../../plots/cartesian/axis_ids"),f=t("../dragelement"),p=t("../../lib/setcursor"),g=t("./constants");function m(t,e,n,r){var i=o.ensureSingle(t,"rect",g.bgClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,c=-r._offsetShift,u=l.crispRound(e,r.borderwidth);i.attr({width:r._width+a,height:r._height+a,transform:s(c,c),fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":u})}function v(t,e,n,r){o.ensureSingleById(e._fullLayout._topdefs,"clipPath",r._clipId,function(t){t.append("rect").attr({x:0,y:0})}).select("rect").attr({width:r._width,height:r._height})}function y(t,e,n,i){var s,c=e.calcdata,u=t.selectAll("g."+g.rangePlotClassName).data(n._subplotsWith,o.identity);u.enter().append("g").attr("class",function(t){return g.rangePlotClassName+" "+t}).call(l.setClipUrl,i._clipId,e),u.order(),u.exit().remove(),u.each(function(t,o){var l=r.select(this),u=0===o,f=h.getFromId(e,t,"y"),p=f._name,g=i[p],m={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:i.range.slice(),calendar:n.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:e._context};n.rangebreaks&&(m.layout.xaxis.rangebreaks=n.rangebreaks),m.layout[p]={type:f.type,domain:[0,1],range:"match"!==g.rangemode?g.range.slice():f.range.slice(),calendar:f.calendar},f.rangebreaks&&(m.layout[p].rangebreaks=f.rangebreaks),a.supplyDefaults(m);var v=m._fullLayout.xaxis,y=m._fullLayout[p];v.clearCalc(),v.setScale(),y.clearCalc(),y.setScale();var b={id:t,plotgroup:l,xaxis:v,yaxis:y,isRangePlot:!0};u?s=b:(b.mainplot="xy",b.mainplotinfo=s),d.rangePlot(e,b,function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],a=i[0].trace;a.xaxis+a.yaxis===e&&n.push(i)}return n}(c,t))})}function b(t,e,n,r,i){o.ensureSingle(t,"rect",g.maskMinClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(c.fill,g.maskColor),o.ensureSingle(t,"rect",g.maskMaxClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(c.fill,g.maskColor),"match"!==i.rangemode&&(o.ensureSingle(t,"rect",g.maskMinOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).call(c.fill,g.maskOppAxisColor),o.ensureSingle(t,"rect",g.maskMaxOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).style("border-top",g.maskOppBorder).call(c.fill,g.maskOppAxisColor))}function x(t,e,n,r){e._context.staticPlot||o.ensureSingle(t,"rect",g.slideBoxClassName,function(t){t.attr({y:0,cursor:g.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:r._height,fill:g.slideBoxFill})}function _(t,e,n,r){var i=o.ensureSingle(t,"g",g.grabberMinClassName),a=o.ensureSingle(t,"g",g.grabberMaxClassName),s={x:0,width:g.handleWidth,rx:g.handleRadius,fill:c.background,stroke:c.defaultLine,"stroke-width":g.handleStrokeWidth,"shape-rendering":"crispEdges"},l={y:Math.round(r._height/4),height:Math.round(r._height/2)};o.ensureSingle(i,"rect",g.handleMinClassName,function(t){t.attr(s)}).attr(l),o.ensureSingle(a,"rect",g.handleMaxClassName,function(t){t.attr(s)}).attr(l);var u={width:g.grabAreaWidth,x:0,y:0,fill:g.grabAreaFill,cursor:e._context.staticPlot?void 0:g.grabAreaCursor};o.ensureSingle(i,"rect",g.grabAreaMinClassName,function(t){t.attr(u)}).attr("height",r._height),o.ensureSingle(a,"rect",g.grabAreaMaxClassName,function(t){t.attr(u)}).attr("height",r._height)}e.exports=function(t){for(var e=t._fullLayout,n=e._rangeSliderData,a=0;a<n.length;a++){var l=n[a][g.name];l._clipId=l._id+"-"+e._uid}var c=e._infolayer.selectAll("g."+g.containerClassName).data(n,function(t){return t._name});c.exit().each(function(t){e._topdefs.select("#"+t[g.name]._clipId).remove()}).remove(),0!==n.length&&(c.enter().append("g").classed(g.containerClassName,!0).attr("pointer-events","all"),c.each(function(n){var a=r.select(this),l=n[g.name],c=e[h.id2name(n.anchor)],d=l[h.id2name(n.anchor)];if(l.range){var w,k=o.simpleMap(l.range,n.r2l),T=o.simpleMap(n.range,n.r2l);w=T[0]<T[1]?[Math.min(k[0],T[0]),Math.max(k[1],T[1])]:[Math.max(k[0],T[0]),Math.min(k[1],T[1])],l.range=l._input.range=o.simpleMap(w,n.l2r)}n.cleanRange("rangeslider.range");var M=e._size,A=n.domain;l._width=M.w*(A[1]-A[0]);var C=Math.round(M.l+M.w*A[0]),S=Math.round(M.t+M.h*(1-n._counterDomainMin)+("bottom"===n.side?n._depth:0)+l._offsetShift+g.extraPad);a.attr("transform",s(C,S)),l._rl=o.simpleMap(l.range,n.r2l);var D=l._rl[0],O=l._rl[1],E=O-D;if(l.p2d=function(t){return t/l._width*E+D},l.d2p=function(t){return(t-D)/E*l._width},n.rangebreaks){var L=n.locateBreaks(D,O);if(L.length){var P,I,R=0;for(P=0;P<L.length;P++)R+=(I=L[P]).max-I.min;var N=l._width/(O-D-R),F=[-N*D];for(P=0;P<L.length;P++)F.push(F[F.length-1]-N*((I=L[P]).max-I.min));for(l.d2p=function(t){for(var e=F[0],n=0;n<L.length;n++){var r=L[n];if(t>=r.max)e=F[n+1];else if(t<r.min)break}return e+N*t},P=0;P<L.length;P++)(I=L[P]).pmin=l.d2p(I.min),I.pmax=l.d2p(I.max);l.p2d=function(t){for(var e=F[0],n=0;n<L.length;n++){var r=L[n];if(t>=r.pmax)e=F[n+1];else if(t<r.pmin)break}return(t-e)/N}}}if("match"!==d.rangemode){var z=c.r2l(d.range[0]),V=c.r2l(d.range[1])-z;l.d2pOppAxis=function(t){return(t-z)/V*l._height}}a.call(m,t,n,l).call(v,t,n,l).call(y,t,n,l).call(b,t,n,l,d).call(x,t,n,l).call(_,t,n,l),function(t,e,n,a){if(!e._context.staticPlot){var s=t.select("rect."+g.slideBoxClassName).node(),l=t.select("rect."+g.grabAreaMinClassName).node(),c=t.select("rect."+g.grabAreaMaxClassName).node();t.on("mousedown",u),t.on("touchstart",u)}function u(){var u=r.event,d=u.target,h=u.clientX||u.touches[0].clientX,g=h-t.node().getBoundingClientRect().left,m=a.d2p(n._rl[0]),v=a.d2p(n._rl[1]),y=f.coverSlip();function b(t){var u,f,b,x=+(t.clientX||t.touches[0].clientX)-h;switch(d){case s:b="ew-resize",u=m+x,f=v+x;break;case l:b="col-resize",u=m+x,f=v;break;case c:b="col-resize",u=m,f=v+x;break;default:b="ew-resize",u=g,f=g+x}if(f<u){var _=f;f=u,u=_}a._pixelMin=u,a._pixelMax=f,p(r.select(y),b),function(t,e,n,r){function a(t){return n.l2r(o.constrain(t,r._rl[0],r._rl[1]))}var s=a(r.p2d(r._pixelMin)),l=a(r.p2d(r._pixelMax));window.requestAnimationFrame(function(){i.call("_guiRelayout",e,n._name+".range",[s,l])})}(0,e,n,a)}function x(){y.removeEventListener("mousemove",b),y.removeEventListener("mouseup",x),this.removeEventListener("touchmove",b),this.removeEventListener("touchend",x),o.removeElement(y)}this.addEventListener("touchmove",b),this.addEventListener("touchend",x),y.addEventListener("mousemove",b),y.addEventListener("mouseup",x)}}(a,t,n,l),function(t,e,n,r,i,a){var l=g.handleWidth/2;function c(t){return o.constrain(t,0,r._width)}function u(t){return o.constrain(t,0,r._height)}function d(t){return o.constrain(t,-l,r._width+l)}var h=c(r.d2p(n._rl[0])),f=c(r.d2p(n._rl[1]));if(t.select("rect."+g.slideBoxClassName).attr("x",h).attr("width",f-h),t.select("rect."+g.maskMinClassName).attr("width",h),t.select("rect."+g.maskMaxClassName).attr("x",f).attr("width",r._width-f),"match"!==a.rangemode){var p=r._height-u(r.d2pOppAxis(i._rl[1])),m=r._height-u(r.d2pOppAxis(i._rl[0]));t.select("rect."+g.maskMinOppAxisClassName).attr("x",h).attr("height",p).attr("width",f-h),t.select("rect."+g.maskMaxOppAxisClassName).attr("x",h).attr("y",m).attr("height",r._height-m).attr("width",f-h),t.select("rect."+g.slideBoxClassName).attr("y",p).attr("height",m-p)}var v=Math.round(d(h-l))-.5,y=Math.round(d(f-l))+.5;t.select("g."+g.grabberMinClassName).attr("transform",s(v,.5)),t.select("g."+g.grabberMaxClassName).attr("transform",s(y,.5))}(a,0,n,l,c,d),"bottom"===n.side&&u.draw(t,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:e._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:S+l._height+l._offsetShift+10+1.5*n.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":202,"../../lib/setcursor":222,"../../plots/cartesian":261,"../../plots/cartesian/axis_ids":251,"../../plots/plots":282,"../../registry":290,"../color":75,"../dragelement":94,"../drawing":97,"../titles":170,"./constants":146,d3:9}],149:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axis_ids"),i=t("../../lib/svg_text_utils"),a=t("./constants"),o=t("../../constants/alignment").LINE_SPACING,s=a.name;function l(t){var e=t&&t[s];return e&&e.visible}n.isVisible=l,n.makeData=function(t){var e=r.list({_fullLayout:t},"x",!0),n=t.margin,i=[];if(!t._has("gl2d"))for(var a=0;a<e.length;a++){var o=e[a];if(l(o)){i.push(o);var c=o[s];c._id=s+o._id,c._height=(t.height-n.b-n.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}t._rangeSliderData=i},n.autoMarginOpts=function(t,e){var n=t._fullLayout,r=e[s],l=e._id.charAt(0),c=0,u=0;return"bottom"===e.side&&(c=e._depth,e.title.text!==n._dfltTitle[l]&&(u=1.5*e.title.font.size+10+r._offsetShift,u+=(e.title.text.match(i.BR_TAG_ALL)||[]).length*e.title.font.size*o)),{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:r._height+c+Math.max(n.margin.b,u),pad:a.extraPad+2*r._offsetShift}}},{"../../constants/alignment":177,"../../lib/svg_text_utils":224,"../../plots/cartesian/axis_ids":251,"./constants":146}],150:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./attributes"),a=t("./oppaxis_attributes"),o=t("./helpers");e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},i,{yaxis:a})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":202,"./attributes":144,"./calc_autorange":145,"./defaults":147,"./draw":148,"./helpers":149,"./oppaxis_attributes":151}],151:[function(t,e,n){"use strict";e.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],152:[function(t,e,n){"use strict";var r=t("../annotations/attributes"),i=t("../../traces/scatter/attributes").line,a=t("../drawing/attributes").dash,o=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),e.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},i.color,{editType:"arraydraw"}),width:o({},i.width,{editType:"calc+arraydraw"}),dash:o({},a,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":178,"../../lib/extend":196,"../../plot_api/plot_template":237,"../../traces/scatter/attributes":330,"../annotations/attributes":60,"../drawing/attributes":96}],153:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("./constants"),o=t("./helpers");function s(t){return c(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function l(t){return c(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function c(t,e,n,i,s,l){var c=t/2,u=l;if("pixel"===e){var d=s?o.extractPathCoords(s,l?a.paramIsY:a.paramIsX):[n,i],h=r.aggNums(Math.max,null,d),f=r.aggNums(Math.min,null,d),p=f<0?Math.abs(f)+c:c,g=h>0?h+c:c;return{ppad:c,ppadplus:u?p:g,ppadminus:u?g:p}}return{ppad:c}}function u(t,e,n,r,i){var s="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==e)return[s(e),s(n)];if(r){var l,c,u,d,h=1/0,f=-1/0,p=r.match(a.segmentRE);for("date"===t.type&&(s=o.decodeDate(s)),l=0;l<p.length;l++)void 0!==(c=i[p[l].charAt(0)].drawn)&&(!(u=p[l].substr(1).match(a.paramRE))||u.length<c||((d=s(u[c]))<h&&(h=d),d>f&&(f=d)));return f>=h?[h,f]:void 0}}e.exports=function(t){var e=r.filterVisible(t._fullLayout.shapes);if(e.length&&t._fullData.length)for(var n=0;n<e.length;n++){var o,c,d=e[n];d._extremes={};var h=i.getRefType(d.xref),f=i.getRefType(d.yref);if("paper"!==d.xref&&"domain"!==h){var p="pixel"===d.xsizemode?d.xanchor:d.x0,g="pixel"===d.xsizemode?d.xanchor:d.x1;(c=u(o=i.getFromId(t,d.xref),p,g,d.path,a.paramIsX))&&(d._extremes[o._id]=i.findExtremes(o,c,s(d)))}if("paper"!==d.yref&&"domain"!==f){var m="pixel"===d.ysizemode?d.yanchor:d.y0,v="pixel"===d.ysizemode?d.yanchor:d.y1;(c=u(o=i.getFromId(t,d.yref),m,v,d.path,a.paramIsY))&&(d._extremes[o._id]=i.findExtremes(o,c,l(d)))}}}},{"../../lib":202,"../../plots/cartesian/axes":248,"./constants":154,"./helpers":163}],154:[function(t,e,n){"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],155:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/cartesian/axes"),a=t("../../plots/array_container_defaults"),o=t("./attributes"),s=t("./helpers");function l(t,e,n){function a(n,i){return r.coerce(t,e,o,n,i)}if(a("visible")){var l=a("path"),c=a("type",l?"path":"rect");"path"!==e.type&&delete e.path,a("editable"),a("layer"),a("opacity"),a("fillcolor"),a("fillrule"),a("line.width")&&(a("line.color"),a("line.dash"));for(var u=a("xsizemode"),d=a("ysizemode"),h=["x","y"],f=0;f<2;f++){var p,g,m,v=h[f],y=v+"anchor",b="x"===v?u:d,x={_fullLayout:n},_=i.coerceRef(t,e,x,v,void 0,"paper");if("range"===i.getRefType(_)?((p=i.getFromId(x,_))._shapeIndices.push(e._index),m=s.rangeToShapePosition(p),g=s.shapePositionToRange(p)):g=m=r.identity,"path"!==c){var w=v+"0",k=v+"1",T=t[w],M=t[k];t[w]=g(t[w],!0),t[k]=g(t[k],!0),"pixel"===b?(a(w,0),a(k,10)):(i.coercePosition(e,x,a,_,w,.25),i.coercePosition(e,x,a,_,k,.75)),e[w]=m(e[w]),e[k]=m(e[k]),t[w]=T,t[k]=M}if("pixel"===b){var A=t[y];t[y]=g(t[y],!0),i.coercePosition(e,x,a,_,y,.25),e[y]=m(e[y]),t[y]=A}}"path"===c?a("path"):r.noneOrAll(t,e,["x0","x1","y0","y1"])}}e.exports=function(t,e){a(t,e,{name:"shapes",handleItemDefaults:l})}},{"../../lib":202,"../../plots/array_container_defaults":243,"../../plots/cartesian/axes":248,"./attributes":152,"./helpers":163}],156:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib"),a=t("../../plots/cartesian/axes"),o=t("./draw_newshape/helpers").readPaths,s=t("./draw_newshape/display_outlines"),l=t("../../plots/cartesian/handle_outline").clearOutlineControllers,c=t("../color"),u=t("../drawing"),d=t("../../plot_api/plot_template").arrayEditor,h=t("../dragelement"),f=t("../../lib/setcursor"),p=t("./constants"),g=t("./helpers");function m(t){var e=t._fullLayout;for(var n in e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._plots){var r=e._plots[n].shapelayer;r&&r.selectAll("path").remove()}for(var i=0;i<e.shapes.length;i++)e.shapes[i].visible&&b(t,i)}function v(t){return!!t._fullLayout._drawing}function y(t){return!t._context.edits.shapePosition}function b(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var n=g.makeOptionsAndPlotinfo(t,e),l=n.options,b=n.plotinfo;l._input&&!1!==l.visible&&function(n){var T=_(t,l),M={"data-index":e,"fill-rule":l.fillrule,d:T},A=l.opacity,C=l.fillcolor,S=l.line.width?l.line.color:"rgba(0,0,0,0)",D=l.line.width,O=l.line.dash;D||!0!==l.editable||(D=5,O="solid");var E="Z"!==T[T.length-1],L=y(t)&&l.editable&&t._fullLayout._activeShapeIndex===e;L&&(C=E?"rgba(0,0,0,0)":t._fullLayout.activeshape.fillcolor,A=t._fullLayout.activeshape.opacity);var P,I=n.append("path").attr(M).style("opacity",A).call(c.stroke,S).call(c.fill,C).call(u.dashLine,O,D);if(x(I,t,l),(L||t._context.edits.shapePosition)&&(P=d(t.layout,"shapes",l)),L){I.style({cursor:"move"});var R={element:I.node(),plotinfo:b,gd:t,editHelpers:P,isActiveShape:!0},N=o(T,t);s(N,I,R)}else t._context.edits.shapePosition?function(t,e,n,o,s,l){var c,d,m,y,b,k,T,M,A,C,S,D,O,E,L,P,I="pixel"===n.xsizemode,R="pixel"===n.ysizemode,N="line"===n.type,F="path"===n.type,z=l.modifyItem,V=a.getFromId(t,n.xref),H=a.getRefType(n.xref),j=a.getFromId(t,n.yref),B=a.getRefType(n.yref),U=g.getDataToPixel(t,V,!1,H),q=g.getDataToPixel(t,j,!0,B),G=g.getPixelToData(t,V,!1,H),Z=g.getPixelToData(t,j,!0,B),W=N?function(){var t=Math.max(n.line.width,10),r=s.append("g").attr("data-index",o);r.append("path").attr("d",e.attr("d")).style({cursor:"move","stroke-width":t,"stroke-opacity":"0"});var i={"fill-opacity":"0"},a=Math.max(t/2,10);return r.append("circle").attr({"data-line-point":"start-point",cx:I?U(n.xanchor)+n.x0:U(n.x0),cy:R?q(n.yanchor)-n.y0:q(n.y0),r:a}).style(i).classed("cursor-grab",!0),r.append("circle").attr({"data-line-point":"end-point",cx:I?U(n.xanchor)+n.x1:U(n.x1),cy:R?q(n.yanchor)-n.y1:q(n.y1),r:a}).style(i).classed("cursor-grab",!0),r}():e,$={element:W.node(),gd:t,prepFn:function(r){v(t)||(I&&(b=U(n.xanchor)),R&&(k=q(n.yanchor)),"path"===n.type?L=n.path:(c=I?n.x0:U(n.x0),d=R?n.y0:q(n.y0),m=I?n.x1:U(n.x1),y=R?n.y1:q(n.y1)),c<m?(A=c,O="x0",C=m,E="x1"):(A=m,O="x1",C=c,E="x0"),!R&&d<y||R&&d>y?(T=d,S="y0",M=y,D="y1"):(T=y,S="y1",M=d,D="y0"),Y(r),K(s,n),function(t,e,n){var r=e.xref,i=e.yref,o=a.getFromId(n,r),s=a.getFromId(n,i),l="";"paper"===r||o.autorange||(l+=r),"paper"===i||s.autorange||(l+=i),u.setClipUrl(t,l?"clip"+n._fullLayout._uid+l:null,n)}(e,n,t),$.moveFn="move"===P?X:Q,$.altKey=r.altKey)},doneFn:function(){v(t)||(f(e),J(s),x(e,t,n),r.call("_guiRelayout",t,l.getUpdateObj()))},clickFn:function(){v(t)||J(s)}};function Y(n){if(v(t))P=null;else if(N)P="path"===n.target.tagName?"move":"start-point"===n.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var r=$.element.getBoundingClientRect(),i=r.right-r.left,a=r.bottom-r.top,o=!F&&i>10&&a>10&&!n.shiftKey?h.getCursor((n.clientX-r.left)/i,1-(n.clientY-r.top)/a):"move";f(e,o),P=o.split("-")[0]}}function X(r,i){if("path"===n.type){var a=function(t){return t},o=a,l=a;I?z("xanchor",n.xanchor=G(b+r)):(o=function(t){return G(U(t)+r)},V&&"date"===V.type&&(o=g.encodeDate(o))),R?z("yanchor",n.yanchor=Z(k+i)):(l=function(t){return Z(q(t)+i)},j&&"date"===j.type&&(l=g.encodeDate(l))),z("path",n.path=w(L,o,l))}else I?z("xanchor",n.xanchor=G(b+r)):(z("x0",n.x0=G(c+r)),z("x1",n.x1=G(m+r))),R?z("yanchor",n.yanchor=Z(k+i)):(z("y0",n.y0=Z(d+i)),z("y1",n.y1=Z(y+i)));e.attr("d",_(t,n)),K(s,n)}function Q(r,i){if(F){var a=function(t){return t},o=a,l=a;I?z("xanchor",n.xanchor=G(b+r)):(o=function(t){return G(U(t)+r)},V&&"date"===V.type&&(o=g.encodeDate(o))),R?z("yanchor",n.yanchor=Z(k+i)):(l=function(t){return Z(q(t)+i)},j&&"date"===j.type&&(l=g.encodeDate(l))),z("path",n.path=w(L,o,l))}else if(N){if("resize-over-start-point"===P){var u=c+r,h=R?d-i:d+i;z("x0",n.x0=I?u:G(u)),z("y0",n.y0=R?h:Z(h))}else if("resize-over-end-point"===P){var f=m+r,p=R?y-i:y+i;z("x1",n.x1=I?f:G(f)),z("y1",n.y1=R?p:Z(p))}}else{var v=function(t){return-1!==P.indexOf(t)},x=v("n"),H=v("s"),B=v("w"),W=v("e"),$=x?T+i:T,Y=H?M+i:M,X=B?A+r:A,Q=W?C+r:C;R&&(x&&($=T-i),H&&(Y=M-i)),(!R&&Y-$>10||R&&$-Y>10)&&(z(S,n[S]=R?$:Z($)),z(D,n[D]=R?Y:Z(Y))),Q-X>10&&(z(O,n[O]=I?X:G(X)),z(E,n[E]=I?Q:G(Q)))}e.attr("d",_(t,n)),K(s,n)}function K(t,e){(I||R)&&function(){var n="path"!==e.type,r=t.selectAll(".visual-cue").data([0]);r.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var a=U(I?e.xanchor:i.midRange(n?[e.x0,e.x1]:g.extractPathCoords(e.path,p.paramIsX))),o=q(R?e.yanchor:i.midRange(n?[e.y0,e.y1]:g.extractPathCoords(e.path,p.paramIsY)));a=g.roundPositionForSharpStrokeRendering(a,1),o=g.roundPositionForSharpStrokeRendering(o,1),r.attr("d",I&&R?"M"+(a-1-1)+","+(o-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":I?"M"+(a-1-1)+","+(o-9-1)+"v18 h2 v-18 Z":"M"+(a-9-1)+","+(o-1-1)+"h18 v2 h-18 Z")}()}function J(t){t.selectAll(".visual-cue").remove()}h.init($),W.node().onmousemove=Y}(t,I,l,e,n,P):!0===l.editable&&I.style("pointer-events",E||c.opacity(C)*A<=.5?"stroke":"all");I.node().addEventListener("click",function(){return function(t,e){if(y(t)){var n=+e.node().getAttribute("data-index");if(n>=0){if(n===t._fullLayout._activeShapeIndex)return void k(t);t._fullLayout._activeShapeIndex=n,t._fullLayout._deactivateShape=k,m(t)}}}(t,I)})}("below"!==l.layer?t._fullLayout._shapeUpperLayer:"paper"===l.xref||"paper"===l.yref?t._fullLayout._shapeLowerLayer:b._hadPlotinfo?(b.mainplotinfo||b).shapelayer:t._fullLayout._shapeLowerLayer)}function x(t,e,n){var r=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");u.setClipUrl(t,r?"clip"+e._fullLayout._uid+r:null,e)}function _(t,e){var n,r,o,s,l,c,u,d,h=e.type,f=a.getRefType(e.xref),m=a.getRefType(e.yref),v=a.getFromId(t,e.xref),y=a.getFromId(t,e.yref),b=t._fullLayout._size;if(v?"domain"===f?r=function(t){return v._offset+v._length*t}:(n=g.shapePositionToRange(v),r=function(t){return v._offset+v.r2p(n(t,!0))}):r=function(t){return b.l+b.w*t},y?"domain"===m?s=function(t){return y._offset+y._length*(1-t)}:(o=g.shapePositionToRange(y),s=function(t){return y._offset+y.r2p(o(t,!0))}):s=function(t){return b.t+b.h*(1-t)},"path"===h)return v&&"date"===v.type&&(r=g.decodeDate(r)),y&&"date"===y.type&&(s=g.decodeDate(s)),function(t,e,n){var r=t.xsizemode,a=t.ysizemode,o=t.xanchor,s=t.yanchor;return t.path.replace(p.segmentRE,function(t){var l=0,c=t.charAt(0),u=p.paramIsX[c],d=p.paramIsY[c],h=p.numParams[c],f=t.substr(1).replace(p.paramRE,function(t){return u[l]?t="pixel"===r?e(o)+Number(t):e(t):d[l]&&(t="pixel"===a?n(s)-Number(t):n(t)),++l>h&&(t="X"),t});return l>h&&(f=f.replace(/[\s,]*X.*/,""),i.log("Ignoring extra params in segment "+t)),c+f})}(e,r,s);if("pixel"===e.xsizemode){var x=r(e.xanchor);l=x+e.x0,c=x+e.x1}else l=r(e.x0),c=r(e.x1);if("pixel"===e.ysizemode){var _=s(e.yanchor);u=_-e.y0,d=_-e.y1}else u=s(e.y0),d=s(e.y1);if("line"===h)return"M"+l+","+u+"L"+c+","+d;if("rect"===h)return"M"+l+","+u+"H"+c+"V"+d+"H"+l+"Z";var w=(l+c)/2,k=(u+d)/2,T=Math.abs(w-l),M=Math.abs(k-u),A="A"+T+","+M,C=w+T+","+k;return"M"+C+A+" 0 1,1 "+w+","+(k-M)+A+" 0 0,1 "+C+"Z"}function w(t,e,n){return t.replace(p.segmentRE,function(t){var r=0,i=t.charAt(0),a=p.paramIsX[i],o=p.paramIsY[i],s=p.numParams[i];return i+t.substr(1).replace(p.paramRE,function(t){return r>=s||(a[r]?t=e(t):o[r]&&(t=n(t)),r++),t})})}function k(t){y(t)&&t._fullLayout._activeShapeIndex>=0&&(l(t),delete t._fullLayout._activeShapeIndex,m(t))}e.exports={draw:m,drawOne:b,eraseActiveShape:function(t){if(y(t)){l(t);var e=t._fullLayout._activeShapeIndex,n=(t.layout||{}).shapes||[];if(e<n.length){for(var i=[],a=0;a<n.length;a++)a!==e&&i.push(n[a]);delete t._fullLayout._activeShapeIndex,r.call("_guiRelayout",t,{shapes:i})}}}}},{"../../lib":202,"../../lib/setcursor":222,"../../plot_api/plot_template":237,"../../plots/cartesian/axes":248,"../../plots/cartesian/handle_outline":258,"../../registry":290,"../color":75,"../dragelement":94,"../drawing":97,"./constants":154,"./draw_newshape/display_outlines":160,"./draw_newshape/helpers":161,"./helpers":163}],157:[function(t,e,n){"use strict";var r=t("../../drawing/attributes").dash,i=t("../../../lib/extend").extendFlat;e.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:i({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":196,"../../drawing/attributes":96}],158:[function(t,e,n){"use strict";e.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],159:[function(t,e,n){"use strict";var r=t("../../color");e.exports=function(t,e,n){n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")&&(n("newshape.line.color",r.contrast((t||{}).plot_bgcolor||"#FFF")),n("newshape.line.dash")),n("activeshape.fillcolor"),n("activeshape.opacity")}},{"../../color":75}],160:[function(t,e,n){"use strict";var r=t("../../dragelement"),i=t("../../dragelement/helpers").drawMode,a=t("../../../registry"),o=t("./constants"),s=o.i000,l=o.i090,c=o.i180,u=o.i270,d=t("../../../plots/cartesian/handle_outline").clearOutlineControllers,h=t("./helpers"),f=h.pointsShapeRectangle,p=h.pointsShapeEllipse,g=h.writePaths,m=t("./newshapes");e.exports=function t(e,n,o,h){h||(h=0);var v=o.gd;function y(){t(e,n,o,h++),p(e[0])&&b({redrawing:!0})}function b(t){o.isActiveShape=!1;var e=m(n,o);Object.keys(e).length&&a.call((t||{}).redrawing?"relayout":"_guiRelayout",v,e)}var x,_,w,k,T,M=o.isActiveShape,A=v._fullLayout._zoomlayer;function C(t){w=+t.srcElement.getAttribute("data-i"),k=+t.srcElement.getAttribute("data-j"),x[w][k].moveFn=S}function S(t,n){if(e.length){var r=T[w][k][1],i=T[w][k][2],a=e[w],o=a.length;if(f(a)){for(var s=0;s<o;s++)if(s!==k){var l=a[s];l[1]===a[k][1]&&(l[1]=r+t),l[2]===a[k][2]&&(l[2]=i+n)}if(a[k][1]=r+t,a[k][2]=i+n,!f(a))for(var c=0;c<o;c++)for(var u=0;u<a[c].length;u++)a[c][u]=T[w][c][u]}else a[k][1]=r+t,a[k][2]=i+n;y()}}function D(){b()}function O(t,n){if(2===t){w=+n.srcElement.getAttribute("data-i"),k=+n.srcElement.getAttribute("data-j");var r=e[w];f(r)||p(r)||function(){if(e.length&&e[w]&&e[w].length){for(var t=[],n=0;n<e[w].length;n++)n!==k&&t.push(e[w][n]);t.length>1&&(2!==t.length||"Z"!==t[1][0])&&(0===k&&(t[0][0]="M"),e[w]=t,y(),b())}}()}}function E(t,n){!function(t,n){if(e.length)for(var r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)for(var a=0;a+2<e[r][i].length;a+=2)e[r][i][a+1]=T[r][i][a+1]+t,e[r][i][a+2]=T[r][i][a+2]+n}(t,n),y()}i(o.dragmode)?v._fullLayout._drawing=!0:v._fullLayout._activeShapeIndex>=0&&d(v),n.attr("d",g(e)),M&&!h&&(T=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t[n]=[];for(var i=0;i<r.length;i++){t[n][i]=[];for(var a=0;a<r[i].length;a++)t[n][i][a]=r[i][a]}}return t}([],e),function(t){x=[];for(var n=0;n<e.length;n++){var i=e[n],a=!f(i)&&p(i);x[n]=[];for(var o=0;o<i.length;o++)if("Z"!==i[o][0]&&(!a||o===s||o===l||o===c||o===u)){var d=i[o][1],h=i[o][2],g=t.append("circle").classed("cursor-grab",!0).attr("data-i",n).attr("data-j",o).attr("cx",d).attr("cy",h).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});x[n][o]={element:g.node(),gd:v,prepFn:C,doneFn:D,clickFn:O},r.init(x[n][o])}}}(A.append("g").attr("class","outline-controllers")),_=[],e.length&&(_[0]={element:n[0][0],gd:v,prepFn:function(t){(w=+t.srcElement.getAttribute("data-i"))||(w=0),_[w].moveFn=E},doneFn:function(){b()}},r.init(_[0])))}},{"../../../plots/cartesian/handle_outline":258,"../../../registry":290,"../../dragelement":94,"../../dragelement/helpers":93,"./constants":158,"./helpers":161,"./newshapes":162}],161:[function(t,e,n){"use strict";var r=t("parse-svg-path"),i=t("./constants"),a=i.CIRCLE_SIDES,o=i.SQRT2,s=t("../../../plots/cartesian/helpers"),l=s.p2r,c=s.r2p,u=[0,3,4,5,6,1,2],d=[0,3,4,1,2];function h(t,e){return Math.abs(t-e)<=1e-6}function f(t,e){var n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+r*r)}n.writePaths=function(t){var e=t.length;if(!e)return"M0,0Z";for(var n="",r=0;r<e;r++)for(var i=t[r].length,a=0;a<i;a++){var o=t[r][a][0];if("Z"===o)n+="Z";else for(var s=t[r][a].length,l=0;l<s;l++){var c=l;"Q"===o||"S"===o?c=d[l]:"C"===o&&(c=u[l]),n+=t[r][a][c],l>0&&l<s-1&&(n+=",")}}return n},n.readPaths=function(t,e,n,i){var o,s,u,d=r(t),h=[],f=-1,p=0,g=0,m=function(){s=p,u=g};m();for(var v=0;v<d.length;v++){var y=[],b=d[v][0],x=b;switch(b){case"M":h[++f]=[],y.push([x,p=+d[v][1],g=+d[v][2]]),m();break;case"Q":case"S":y.push([x,p=+d[v][3],g=+d[v][4],+d[v][1],+d[v][2]]);break;case"C":y.push([x,p=+d[v][5],g=+d[v][6],+d[v][1],+d[v][2],+d[v][3],+d[v][4]]);break;case"T":case"L":y.push([x,p=+d[v][1],g=+d[v][2]]);break;case"H":y.push([x="L",p=+d[v][1],g]);break;case"V":y.push([x="L",p,g=+d[v][1]]);break;case"A":x="L";var _=+d[v][1],w=+d[v][2];+d[v][4]||(_=-_,w=-w);var k=p-_,T=g;for(o=1;o<=a/2;o++){var M=2*Math.PI*o/a;y.push([x,k+_*Math.cos(M),T+w*Math.sin(M)])}break;case"Z":p===s&&g===u||y.push([x,p=s,g=u])}for(var A=(n||{}).domain,C=e._fullLayout._size,S=n&&"pixel"===n.xsizemode,D=n&&"pixel"===n.ysizemode,O=!1===i,E=0;E<y.length;E++){for(o=0;o+2<7;o+=2){var L=y[E][o+1],P=y[E][o+2];void 0!==L&&void 0!==P&&(p=L,g=P,n&&(n.xaxis&&n.xaxis.p2r?(O&&(L-=n.xaxis._offset),L=S?c(n.xaxis,n.xanchor)+L:l(n.xaxis,L)):(O&&(L-=C.l),A?L=A.x[0]+L/C.w:L/=C.w),n.yaxis&&n.yaxis.p2r?(O&&(P-=n.yaxis._offset),P=D?c(n.yaxis,n.yanchor)-P:l(n.yaxis,P)):(O&&(P-=C.t),P=A?A.y[1]-P/C.h:1-P/C.h)),y[E][o+1]=L,y[E][o+2]=P)}h[f].push(y[E].slice())}}return h},n.pointsShapeRectangle=function(t){if(5!==t.length)return!1;for(var e=1;e<3;e++){if(!h(t[0][e]-t[1][e],t[3][e]-t[2][e]))return!1;if(!h(t[0][e]-t[3][e],t[1][e]-t[2][e]))return!1}return!(!h(t[0][1],t[1][1])&&!h(t[0][1],t[3][1])||!(f(t[0],t[1])*f(t[0],t[3])))},n.pointsShapeEllipse=function(t){var e=t.length;if(e!==a+1)return!1;e=a;for(var n=0;n<e;n++){var r=(2*e-n)%e,i=(e/2+r)%e;if(!h(f(t[n],t[(e/2+n)%e]),f(t[r],t[i])))return!1}return!0},n.handleEllipse=function(t,e,r){if(!t)return[e,r];var i=n.ellipseOver({x0:e[0],y0:e[1],x1:r[0],y1:r[1]}),s=(i.x1+i.x0)/2,l=(i.y1+i.y0)/2,c=(i.x1-i.x0)/2,u=(i.y1-i.y0)/2;c||(c=u/=o),u||(u=c/=o);for(var d=[],h=0;h<a;h++){var f=2*h*Math.PI/a;d.push([s+c*Math.cos(f),l+u*Math.sin(f)])}return d},n.ellipseOver=function(t){var e=t.x0,n=t.y0,r=t.x1,i=t.y1,a=r-e,s=i-n,l=((e-=a)+r)/2,c=((n-=s)+i)/2;return{x0:l-(a*=o),y0:c-(s*=o),x1:l+a,y1:c+s}}},{"../../../plots/cartesian/helpers":259,"./constants":158,"parse-svg-path":48}],162:[function(t,e,n){"use strict";var r=t("../../dragelement/helpers"),i=r.drawMode,a=r.openMode,o=t("./constants"),s=o.i000,l=o.i090,c=o.i180,u=o.i270,d=o.cos45,h=o.sin45,f=t("../../../plots/cartesian/helpers"),p=f.p2r,g=f.r2p,m=t("../../../plots/cartesian/handle_outline").clearSelect,v=t("./helpers"),y=v.readPaths,b=v.writePaths,x=v.ellipseOver;e.exports=function(t,e){if(t.length){var n=t[0][0];if(n){var r=n.getAttribute("d"),o=e.gd,f=o._fullLayout.newshape,v=e.plotinfo,_=v.xaxis,w=v.yaxis,k=!!v.domain||!v.xaxis,T=!!v.domain||!v.yaxis,M=e.isActiveShape,A=e.dragmode,C=(o.layout||{}).shapes||[];if(!i(A)&&void 0!==M){var S=o._fullLayout._activeShapeIndex;if(S<C.length)switch(o._fullLayout.shapes[S].type){case"rect":A="drawrect";break;case"circle":A="drawcircle";break;case"line":A="drawline";break;case"path":var D=C[S].path||"";A="Z"===D[D.length-1]?"drawclosedpath":"drawopenpath"}}var O,E=a(A),L=y(r,o,v,M),P={editable:!0,xref:k?"paper":_._id,yref:T?"paper":w._id,layer:f.layer,opacity:f.opacity,line:{color:f.line.color,width:f.line.width,dash:f.line.dash}};if(E||(P.fillcolor=f.fillcolor,P.fillrule=f.fillrule),1===L.length&&(O=L[0]),O&&"drawrect"===A)P.type="rect",P.x0=O[0][1],P.y0=O[0][2],P.x1=O[2][1],P.y1=O[2][2];else if(O&&"drawline"===A)P.type="line",P.x0=O[0][1],P.y0=O[0][2],P.x1=O[1][1],P.y1=O[1][2];else if(O&&"drawcircle"===A){P.type="circle";var I=O[s][1],R=O[l][1],N=O[c][1],F=O[u][1],z=O[s][2],V=O[l][2],H=O[c][2],j=O[u][2],B=v.xaxis&&("date"===v.xaxis.type||"log"===v.xaxis.type),U=v.yaxis&&("date"===v.yaxis.type||"log"===v.yaxis.type);B&&(I=g(v.xaxis,I),R=g(v.xaxis,R),N=g(v.xaxis,N),F=g(v.xaxis,F)),U&&(z=g(v.yaxis,z),V=g(v.yaxis,V),H=g(v.yaxis,H),j=g(v.yaxis,j));var q=(R+F)/2,G=(z+H)/2,Z=x({x0:q,y0:G,x1:q+(F-R+N-I)/2*d,y1:G+(j-V+H-z)/2*h});B&&(Z.x0=p(v.xaxis,Z.x0),Z.x1=p(v.xaxis,Z.x1)),U&&(Z.y0=p(v.yaxis,Z.y0),Z.y1=p(v.yaxis,Z.y1)),P.x0=Z.x0,P.y0=Z.y0,P.x1=Z.x1,P.y1=Z.y1}else P.type="path",_&&w&&function(t,e,n){var r="date"===e.type,i="date"===n.type;if(!r&&!i)return t;for(var a=0;a<t.length;a++)for(var o=0;o<t[a].length;o++)for(var s=0;s+2<t[a][o].length;s+=2)r&&(t[a][o][s+1]=t[a][o][s+1].replace(" ","_")),i&&(t[a][o][s+2]=t[a][o][s+2].replace(" ","_"))}(L,_,w),P.path=b(L),O=null;m(o);for(var W=e.editHelpers,$=(W||{}).modifyItem,Y=[],X=0;X<C.length;X++){var Q=o._fullLayout.shapes[X];if(Y[X]=Q._input,void 0!==M&&X===o._fullLayout._activeShapeIndex){var K=P;switch(Q.type){case"line":case"rect":case"circle":$("x0",K.x0),$("x1",K.x1),$("y0",K.y0),$("y1",K.y1);break;case"path":$("path",K.path)}}}return void 0===M?(Y.push(P),Y):W?W.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":258,"../../../plots/cartesian/helpers":259,"../../dragelement/helpers":93,"./constants":158,"./helpers":161}],163:[function(t,e,n){"use strict";var r=t("./constants"),i=t("../../lib");n.rangeToShapePosition=function(t){return"log"===t.type?t.r2d:function(t){return t}},n.shapePositionToRange=function(t){return"log"===t.type?t.d2r:function(t){return t}},n.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},n.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},n.extractPathCoords=function(t,e){var n=[];return t.match(r.segmentRE).forEach(function(t){var a=e[t.charAt(0)].drawn;if(void 0!==a){var o=t.substr(1).match(r.paramRE);!o||o.length<a||n.push(i.cleanNumber(o[a]))}}),n},n.getDataToPixel=function(t,e,r,i){var a,o=t._fullLayout._size;if(e)if("domain"===i)a=function(t){return e._length*(r?1-t:t)+e._offset};else{var s=n.shapePositionToRange(e);a=function(t){return e._offset+e.r2p(s(t,!0))},"date"===e.type&&(a=n.decodeDate(a))}else a=r?function(t){return o.t+o.h*(1-t)}:function(t){return o.l+o.w*t};return a},n.getPixelToData=function(t,e,r,i){var a,o=t._fullLayout._size;if(e)if("domain"===i)a=function(t){var n=(t-e._offset)/e._length;return r?1-n:n};else{var s=n.rangeToShapePosition(e);a=function(t){return s(e.p2r(t-e._offset))}}else a=r?function(t){return 1-(t-o.t)/o.h}:function(t){return(t-o.l)/o.w};return a},n.roundPositionForSharpStrokeRendering=function(t,e){var n=1===Math.round(e%2),r=Math.round(t);return n?r+.5:r},n.makeOptionsAndPlotinfo=function(t,e){var n=t._fullLayout.shapes[e]||{},r=t._fullLayout._plots[n.xref+n.yref];return r?r._hadPlotinfo=!0:(r={},n.xref&&"paper"!==n.xref&&(r.xaxis=t._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(r.yaxis=t._fullLayout[n.yref+"axis"])),r.xsizemode=n.xsizemode,r.ysizemode=n.ysizemode,r.xanchor=n.xanchor,r.yanchor=n.yanchor,{options:n,plotinfo:r}}},{"../../lib":202,"./constants":154}],164:[function(t,e,n){"use strict";var r=t("./draw");e.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewShapeDefaults:t("./draw_newshape/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":260,"./attributes":152,"./calc_autorange":153,"./defaults":155,"./draw":156,"./draw_newshape/defaults":159}],165:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../../plots/pad_attributes"),a=t("../../lib/extend").extendDeepAll,o=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/animation_attributes"),l=t("../../plot_api/plot_template").templatedArray,c=t("./constants"),u=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});e.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:u,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:a(i({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":196,"../../plot_api/edit_types":230,"../../plot_api/plot_template":237,"../../plots/animation_attributes":242,"../../plots/font_attributes":276,"../../plots/pad_attributes":281,"./constants":166}],166:[function(t,e,n){"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],167:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/array_container_defaults"),a=t("./attributes"),o=t("./constants").name,s=a.steps;function l(t,e,n){function o(n,i){return r.coerce(t,e,a,n,i)}for(var s=i(t,e,{name:"steps",handleItemDefaults:c}),l=0,u=0;u<s.length;u++)s[u].visible&&l++;if(l<2?e.visible=!1:o("visible")){e._stepCount=l;var d=e._visibleSteps=r.filterVisible(s);(s[o("active")]||{}).visible||(e.active=d[0]._index),o("x"),o("y"),r.noneOrAll(t,e,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),r.coerceFont(o,"font",n.font),o("currentvalue.visible")&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),r.coerceFont(o,"currentvalue.font",e.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function c(t,e){function n(n,i){return r.coerce(t,e,s,n,i)}if("skip"===t.method||Array.isArray(t.args)?n("visible"):e.visible=!1){n("method"),n("args");var i=n("label","step-"+e._index);n("value",i),n("execute")}}e.exports=function(t,e){i(t,e,{name:o,handleItemDefaults:l})}},{"../../lib":202,"../../plots/array_container_defaults":243,"./attributes":165,"./constants":166}],168:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plots/plots"),a=t("../color"),o=t("../drawing"),s=t("../../lib"),l=s.strTranslate,c=t("../../lib/svg_text_utils"),u=t("../../plot_api/plot_template").arrayEditor,d=t("./constants"),h=t("../../constants/alignment"),f=h.LINE_SPACING,p=h.FROM_TL,g=h.FROM_BR;function m(t){return d.autoMarginIdRoot+t._index}function v(t){return t._index}function y(t,e){var n=o.tester.selectAll("g."+d.labelGroupClass).data(e._visibleSteps);n.enter().append("g").classed(d.labelGroupClass,!0);var a=0,l=0;n.each(function(t){var n=_(r.select(this),{step:t},e).node();if(n){var i=o.bBox(n);l=Math.max(l,i.height),a=Math.max(a,i.width)}}),n.remove();var u=e._dims={};u.inputAreaWidth=Math.max(d.railWidth,d.gripHeight);var h=t._fullLayout._size;if(u.lx=h.l+h.w*e.x,u.ly=h.t+h.h*(1-e.y),u.outerLength="fraction"===e.lenmode?Math.round(h.w*e.len):e.len,u.inputAreaStart=0,u.inputAreaLength=Math.round(u.outerLength-e.pad.l-e.pad.r),u.labelStride=Math.max(1,Math.ceil((a+d.labelPadding)/((u.inputAreaLength-2*d.stepInset)/(e._stepCount-1)))),u.labelHeight=l,u.currentValueMaxWidth=0,u.currentValueHeight=0,u.currentValueTotalHeight=0,u.currentValueMaxLines=1,e.currentvalue.visible){var f=o.tester.append("g");n.each(function(t){var n=b(f,e,t.label),r=n.node()&&o.bBox(n.node())||{width:0,height:0},i=c.lineCount(n);u.currentValueMaxWidth=Math.max(u.currentValueMaxWidth,Math.ceil(r.width)),u.currentValueHeight=Math.max(u.currentValueHeight,Math.ceil(r.height)),u.currentValueMaxLines=Math.max(u.currentValueMaxLines,i)}),u.currentValueTotalHeight=u.currentValueHeight+e.currentvalue.offset,f.remove()}u.height=u.currentValueTotalHeight+d.tickOffset+e.ticklen+d.labelOffset+u.labelHeight+e.pad.t+e.pad.b;var v="left";s.isRightAnchor(e)&&(u.lx-=u.outerLength,v="right"),s.isCenterAnchor(e)&&(u.lx-=u.outerLength/2,v="center");var y="top";s.isBottomAnchor(e)&&(u.ly-=u.height,y="bottom"),s.isMiddleAnchor(e)&&(u.ly-=u.height/2,y="middle"),u.outerLength=Math.ceil(u.outerLength),u.height=Math.ceil(u.height),u.lx=Math.round(u.lx),u.ly=Math.round(u.ly);var x={y:e.y,b:u.height*g[y],t:u.height*p[y]};"fraction"===e.lenmode?(x.l=0,x.xl=e.x-e.len*p[v],x.r=0,x.xr=e.x+e.len*g[v]):(x.x=e.x,x.l=u.outerLength*p[v],x.r=u.outerLength*g[v]),i.autoMargin(t,m(e),x)}function b(t,e,n){if(e.currentvalue.visible){var r,i,a=e._dims;switch(e.currentvalue.xanchor){case"right":r=a.inputAreaLength-d.currentValueInset-a.currentValueMaxWidth,i="left";break;case"center":r=.5*a.inputAreaLength,i="middle";break;default:r=d.currentValueInset,i="left"}var l=s.ensureSingle(t,"text",d.labelClass,function(t){t.attr({"text-anchor":i,"data-notex":1})}),u=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof n)u+=n;else{var h=e.steps[e.active].label,p=e._gd._fullLayout._meta;p&&(h=s.templateString(h,p)),u+=h}e.currentvalue.suffix&&(u+=e.currentvalue.suffix),l.call(o.font,e.currentvalue.font).text(u).call(c.convertToTspans,e._gd);var g=c.lineCount(l);return c.positionText(l,r,(a.currentValueMaxLines+1-g)*e.currentvalue.font.size*f),l}}function x(t,e,n){s.ensureSingle(t,"rect",d.gripRectClass,function(r){r.call(M,e,t,n).style("pointer-events","all")}).attr({width:d.gripWidth,height:d.gripHeight,rx:d.gripRadius,ry:d.gripRadius}).call(a.stroke,n.bordercolor).call(a.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function _(t,e,n){var r=s.ensureSingle(t,"text",d.labelClass,function(t){t.attr({"text-anchor":"middle","data-notex":1})}),i=e.step.label,a=n._gd._fullLayout._meta;return a&&(i=s.templateString(i,a)),r.call(o.font,n.font).text(i).call(c.convertToTspans,n._gd),r}function w(t,e){var n=s.ensureSingle(t,"g",d.labelsClass),i=e._dims,a=n.selectAll("g."+d.labelGroupClass).data(i.labelSteps);a.enter().append("g").classed(d.labelGroupClass,!0),a.exit().remove(),a.each(function(t){var n=r.select(this);n.call(_,t,e),o.setTranslate(n,S(e,t.fraction),d.tickOffset+e.ticklen+e.font.size*f+d.labelOffset+i.currentValueTotalHeight)})}function k(t,e,n,r,i){var a=Math.round(r*(n._stepCount-1)),o=n._visibleSteps[a]._index;o!==n.active&&T(t,e,n,o,!0,i)}function T(t,e,n,r,a,o){var s=n.active;n.active=r,u(t.layout,d.name,n).applyUpdate("active",r);var l=n.steps[n.active];e.call(C,n,o),e.call(b,n),t.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:a,previousActive:s}),l&&l.method&&a&&(e._nextMethod?(e._nextMethod.step=l,e._nextMethod.doCallback=a,e._nextMethod.doTransition=o):(e._nextMethod={step:l,doCallback:a,doTransition:o},e._nextMethodRaf=window.requestAnimationFrame(function(){var n=e._nextMethod.step;n.method&&(n.execute&&i.executeAPICommand(t,n.method,n.args),e._nextMethod=null,e._nextMethodRaf=null)})))}function M(t,e,n){var i=n.node(),o=r.select(e);function s(){return n.data()[0]}t.on("mousedown",function(){var t=s();e.emit("plotly_sliderstart",{slider:t});var l=n.select("."+d.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),l.call(a.fill,t.activebgcolor);var c=D(t,r.mouse(i)[0]);k(e,n,t,c,!0),t._dragging=!0,o.on("mousemove",function(){var t=s(),a=D(t,r.mouse(i)[0]);k(e,n,t,a,!1)}),o.on("mouseup",function(){var t=s();t._dragging=!1,l.call(a.fill,t.bgcolor),o.on("mouseup",null),o.on("mousemove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})})})}function A(t,e){var n=t.selectAll("rect."+d.tickRectClass).data(e._visibleSteps),i=e._dims;n.enter().append("rect").classed(d.tickRectClass,!0),n.exit().remove(),n.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(t,n){var s=n%i.labelStride==0,l=r.select(this);l.attr({height:s?e.ticklen:e.minorticklen}).call(a.fill,e.tickcolor),o.setTranslate(l,S(e,n/(e._stepCount-1))-.5*e.tickwidth,(s?d.tickOffset:d.minorTickOffset)+i.currentValueTotalHeight)})}function C(t,e,n){for(var r=t.select("rect."+d.gripRectClass),i=0,a=0;a<e._stepCount;a++)if(e._visibleSteps[a]._index===e.active){i=a;break}var o=S(e,i/(e._stepCount-1));if(!e._invokingCommand){var s=r;n&&e.transition.duration>0&&(s=s.transition().duration(e.transition.duration).ease(e.transition.easing)),s.attr("transform",l(o-.5*d.gripWidth,e._dims.currentValueTotalHeight))}}function S(t,e){var n=t._dims;return n.inputAreaStart+d.stepInset+(n.inputAreaLength-2*d.stepInset)*Math.min(1,Math.max(0,e))}function D(t,e){var n=t._dims;return Math.min(1,Math.max(0,(e-d.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*d.stepInset-2*n.inputAreaStart)))}function O(t,e,n){var r=n._dims,i=s.ensureSingle(t,"rect",d.railTouchRectClass,function(r){r.call(M,e,t,n).style("pointer-events","all")});i.attr({width:r.inputAreaLength,height:Math.max(r.inputAreaWidth,d.tickOffset+n.ticklen+r.labelHeight)}).call(a.fill,n.bgcolor).attr("opacity",0),o.setTranslate(i,0,r.currentValueTotalHeight)}function E(t,e){var n=e._dims,r=n.inputAreaLength-2*d.railInset,i=s.ensureSingle(t,"rect",d.railRectClass);i.attr({width:r,height:d.railWidth,rx:d.railRadius,ry:d.railRadius,"shape-rendering":"crispEdges"}).call(a.stroke,e.bordercolor).call(a.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),o.setTranslate(i,d.railInset,.5*(n.inputAreaWidth-d.railWidth)+n.currentValueTotalHeight)}e.exports=function(t){var e=t._fullLayout,n=function(t,e){for(var n=t[d.name],r=[],i=0;i<n.length;i++){var a=n[i];a.visible&&(a._gd=e,r.push(a))}return r}(e,t),a=e._infolayer.selectAll("g."+d.containerClassName).data(n.length>0?[0]:[]);function s(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),i.autoMargin(t,m(e))}if(a.enter().append("g").classed(d.containerClassName,!0).style("cursor","ew-resize"),a.exit().each(function(){r.select(this).selectAll("g."+d.groupClassName).each(s)}).remove(),0!==n.length){var l=a.selectAll("g."+d.groupClassName).data(n,v);l.enter().append("g").classed(d.groupClassName,!0),l.exit().each(s).remove();for(var c=0;c<n.length;c++)y(t,n[c]);l.each(function(e){var n=r.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var n=t._stepCount,r=0;r<n;r+=e.labelStride)e.labelSteps.push({fraction:r/(n-1),step:t._visibleSteps[r]})}(e),i.manageCommandObserver(t,e,e._visibleSteps,function(e){var r=n.data()[0];r.active!==e.index&&(r._dragging||T(t,n,r,e.index,!1,!0))}),function(t,e,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index),e.call(b,n).call(E,n).call(w,n).call(A,n).call(O,t,n).call(x,t,n);var r=n._dims;o.setTranslate(e,r.lx+n.pad.l,r.ly+n.pad.t),e.call(C,n,!1),e.call(b,n)}(t,r.select(this),e)})}}},{"../../constants/alignment":177,"../../lib":202,"../../lib/svg_text_utils":224,"../../plot_api/plot_template":237,"../../plots/plots":282,"../color":75,"../drawing":97,"./constants":166,d3:9}],169:[function(t,e,n){"use strict";var r=t("./constants");e.exports={moduleType:"component",name:r.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":165,"./constants":166,"./defaults":167,"./draw":168}],170:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../lib"),l=s.strTranslate,c=t("../drawing"),u=t("../color"),d=t("../../lib/svg_text_utils"),h=t("../../constants/interactions"),f=t("../../constants/alignment").OPPOSITE_SIDE,p=/ [XY][0-9]* /;e.exports={draw:function(t,e,n){var g,m=n.propName,v=n.placeholder,y=n.traceIndex,b=n.avoid||{},x=n.attributes,_=n.transform,w=n.containerGroup,k=t._fullLayout,T=1,M=!1,A=n.propContainer.title,C=(A&&A.text?A.text:"").trim(),S=A&&A.font?A.font:{},D=S.family,O=S.size,E=S.color;"title.text"===m?g="titleText":-1!==m.indexOf("axis")?g="axisTitleText":m.indexOf(!0)&&(g="colorbarTitleText");var L=t._context.edits[g];""===C?T=0:C.replace(p," % ")===v.replace(p," % ")&&(T=.2,M=!0,L||(C="")),n._meta?C=s.templateString(C,n._meta):k._meta&&(C=s.templateString(C,k._meta));var P=C||L;w||(w=s.ensureSingle(k._infolayer,"g","g-"+e));var I=w.selectAll("text").data(P?[0]:[]);if(I.enter().append("text"),I.text(C).attr("class",e),I.exit().remove(),!P)return w;function R(t){s.syncOrAsync([N,F],t)}function N(e){var n;return _?(n="",_.rotate&&(n+="rotate("+[_.rotate,x.x,x.y]+")"),_.offset&&(n+=l(0,_.offset))):n=null,e.attr("transform",n),e.style({"font-family":D,"font-size":r.round(O,2)+"px",fill:u.rgb(E),opacity:T*u.opacity(E),"font-weight":a.fontWeight}).attr(x).call(d.convertToTspans,t),a.previousPromises(t)}function F(t){var e=r.select(t.node().parentNode);if(b&&b.selection&&b.side&&C){e.attr("transform",null);var n=f[b.side],a="left"===b.side||"top"===b.side?-1:1,o=i(b.pad)?b.pad:2,u=c.bBox(e.node()),d=b.maxShift||a*({left:0,top:0,right:k.width,bottom:k.height}[b.side]-u[b.side]),h=0;if(d<0)h=d;else{var p=b.offsetLeft||0,g=b.offsetTop||0;u.left-=p,u.right-=p,u.top-=g,u.bottom-=g,b.selection.each(function(){var t=c.bBox(this);s.bBoxIntersect(u,t,o)&&(h=Math.max(h,a*(t[b.side]-u[n])+o))}),h=Math.min(d,h)}if(h>0||d<0){var m={left:[-h,0],right:[h,0],top:[0,-h],bottom:[0,h]}[b.side];e.attr("transform",l(m[0],m[1]))}}}return I.call(R),L&&(C?I.on(".opacity",null):(T=0,M=!0,I.text(v).on("mouseover.opacity",function(){r.select(this).transition().duration(h.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(h.HIDE_PLACEHOLDER).style("opacity",0)})),I.call(d.makeEditable,{gd:t}).on("edit",function(e){void 0!==y?o.call("_guiRestyle",t,m,e,y):o.call("_guiRelayout",t,m,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(R)}).on("input",function(t){this.text(t||" ").call(d.positionText,x.x,x.y)})),I.classed("js-placeholder",M),w}}},{"../../constants/alignment":177,"../../constants/interactions":180,"../../lib":202,"../../lib/svg_text_utils":224,"../../plots/plots":282,"../../registry":290,"../color":75,"../drawing":97,d3:9,"fast-isnumeric":11}],171:[function(t,e,n){"use strict";var r=t("../../plots/font_attributes"),i=t("../color/attributes"),a=t("../../lib/extend").extendFlat,o=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/pad_attributes"),l=t("../../plot_api/plot_template").templatedArray,c=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});e.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:c,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":196,"../../plot_api/edit_types":230,"../../plot_api/plot_template":237,"../../plots/font_attributes":276,"../../plots/pad_attributes":281,"../color/attributes":74}],172:[function(t,e,n){"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],173:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../plots/array_container_defaults"),a=t("./attributes"),o=t("./constants").name,s=a.buttons;function l(t,e,n){function o(n,i){return r.coerce(t,e,a,n,i)}o("visible",i(t,e,{name:"buttons",handleItemDefaults:c}).length>0)&&(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),r.noneOrAll(t,e,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),r.coerceFont(o,"font",n.font),o("bgcolor",n.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function c(t,e){function n(n,i){return r.coerce(t,e,s,n,i)}n("visible","skip"===t.method||Array.isArray(t.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}e.exports=function(t,e){i(t,e,{name:o,handleItemDefaults:l})}},{"../../lib":202,"../../plots/array_container_defaults":243,"./attributes":171,"./constants":172}],174:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plots/plots"),a=t("../color"),o=t("../drawing"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),c=t("../../plot_api/plot_template").arrayEditor,u=t("../../constants/alignment").LINE_SPACING,d=t("./constants"),h=t("./scrollbox");function f(t){return t._index}function p(t,e){return+t.attr(d.menuIndexAttrName)===e._index}function g(t,e,n,r,i,a,o,s){e.active=o,c(t.layout,d.name,e).applyUpdate("active",o),"buttons"===e.type?v(t,r,null,null,e):"dropdown"===e.type&&(i.attr(d.menuIndexAttrName,"-1"),m(t,r,i,a,e),s||v(t,r,i,a,e))}function m(t,e,n,r,i){var a=s.ensureSingle(e,"g",d.headerClassName,function(t){t.style("pointer-events","all")}),l=i._dims,c={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},u={width:l.headerWidth,height:l.headerHeight};a.call(y,i,i.buttons[i.active]||d.blankHeaderOpts,t).call(A,i,c,u),s.ensureSingle(e,"text",d.headerArrowClassName,function(t){t.attr("text-anchor","end").call(o.font,i.font).text(d.arrowSymbol[i.direction])}).attr({x:l.headerWidth-d.arrowOffsetX+i.pad.l,y:l.headerHeight/2+d.textOffsetY+i.pad.t}),a.on("click",function(){n.call(C,String(p(n,i)?-1:i._index)),v(t,e,n,r,i)}),a.on("mouseover",function(){a.call(w)}),a.on("mouseout",function(){a.call(k,i)}),o.setTranslate(e,l.lx,l.ly)}function v(t,e,n,a,o){n||(n=e).attr("pointer-events","all");var l=function(t){return-1==+t.attr(d.menuIndexAttrName)}(n)&&"buttons"!==o.type?[]:o.buttons,c="dropdown"===o.type?d.dropdownButtonClassName:d.buttonClassName,u=n.selectAll("g."+c).data(s.filterVisible(l)),h=u.enter().append("g").classed(c,!0),f=u.exit();"dropdown"===o.type?(h.attr("opacity","0").transition().attr("opacity","1"),f.transition().attr("opacity","0").remove()):f.remove();var p=0,m=0,v=o._dims,b=-1!==["up","down"].indexOf(o.direction);"dropdown"===o.type&&(b?m=v.headerHeight+d.gapButtonHeader:p=v.headerWidth+d.gapButtonHeader),"dropdown"===o.type&&"up"===o.direction&&(m=-d.gapButtonHeader+d.gapButton-v.openHeight),"dropdown"===o.type&&"left"===o.direction&&(p=-d.gapButtonHeader+d.gapButton-v.openWidth);var x={x:v.lx+p+o.pad.l,y:v.ly+m+o.pad.t,yPad:d.gapButton,xPad:d.gapButton,index:0},T={l:x.x+o.borderwidth,t:x.y+o.borderwidth};u.each(function(s,l){var c=r.select(this);c.call(y,o,s,t).call(A,o,x),c.on("click",function(){r.event.defaultPrevented||(s.execute&&(s.args2&&o.active===l?(g(t,o,0,e,n,a,-1),i.executeAPICommand(t,s.method,s.args2)):(g(t,o,0,e,n,a,l),i.executeAPICommand(t,s.method,s.args))),t.emit("plotly_buttonclicked",{menu:o,button:s,active:o.active}))}),c.on("mouseover",function(){c.call(w)}),c.on("mouseout",function(){c.call(k,o),u.call(_,o)})}),u.call(_,o),b?(T.w=Math.max(v.openWidth,v.headerWidth),T.h=x.y-T.t):(T.w=x.x-T.l,T.h=Math.max(v.openHeight,v.headerHeight)),T.direction=o.direction,a&&(u.size()?function(t,e,n,r,i,a){var o,s,l,c=i.direction,u=i._dims,h=i.active;if("up"===c||"down"===c)for(s=0,l=0;l<h;l++)s+=u.heights[l]+d.gapButton;else for(o=0,l=0;l<h;l++)o+=u.widths[l]+d.gapButton;r.enable(a,o,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1"),r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,a,o,T):function(t){var e=!!t.hbar,n=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",function(){e=!1,n||t.disable()}),n&&t.vbar.transition().attr("opacity","0").each("end",function(){n=!1,e||t.disable()})}(a))}function y(t,e,n,r){t.call(b,e).call(x,e,n,r)}function b(t,e){s.ensureSingle(t,"rect",d.itemRectClassName,function(t){t.attr({rx:d.rx,ry:d.ry,"shape-rendering":"crispEdges"})}).call(a.stroke,e.bordercolor).call(a.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function x(t,e,n,r){var i=s.ensureSingle(t,"text",d.itemTextClassName,function(t){t.attr({"text-anchor":"start","data-notex":1})}),a=n.label,c=r._fullLayout._meta;c&&(a=s.templateString(a,c)),i.call(o.font,e.font).text(a).call(l.convertToTspans,r)}function _(t,e){var n=e.active;t.each(function(t,i){var o=r.select(this);i===n&&e.showactive&&o.select("rect."+d.itemRectClassName).call(a.fill,d.activeColor)})}function w(t){t.select("rect."+d.itemRectClassName).call(a.fill,d.hoverColor)}function k(t,e){t.select("rect."+d.itemRectClassName).call(a.fill,e.bgcolor)}function T(t,e){var n=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},a=o.tester.selectAll("g."+d.dropdownButtonClassName).data(s.filterVisible(e.buttons));a.enter().append("g").classed(d.dropdownButtonClassName,!0);var c=-1!==["up","down"].indexOf(e.direction);a.each(function(i,a){var s=r.select(this);s.call(y,e,i,t);var h=s.select("."+d.itemTextClassName),f=h.node()&&o.bBox(h.node()).width,p=Math.max(f+d.textPadX,d.minWidth),g=e.font.size*u,m=l.lineCount(h),v=Math.max(g*m,d.minHeight)+d.textOffsetY;v=Math.ceil(v),p=Math.ceil(p),n.widths[a]=p,n.heights[a]=v,n.height1=Math.max(n.height1,v),n.width1=Math.max(n.width1,p),c?(n.totalWidth=Math.max(n.totalWidth,p),n.openWidth=n.totalWidth,n.totalHeight+=v+d.gapButton,n.openHeight+=v+d.gapButton):(n.totalWidth+=p+d.gapButton,n.openWidth+=p+d.gapButton,n.totalHeight=Math.max(n.totalHeight,v),n.openHeight=n.totalHeight)}),c?n.totalHeight-=d.gapButton:n.totalWidth-=d.gapButton,n.headerWidth=n.width1+d.arrowPadX,n.headerHeight=n.height1,"dropdown"===e.type&&(c?(n.width1+=d.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=d.arrowPadX),a.remove();var h=n.totalWidth+e.pad.l+e.pad.r,f=n.totalHeight+e.pad.t+e.pad.b,p=t._fullLayout._size;n.lx=p.l+p.w*e.x,n.ly=p.t+p.h*(1-e.y);var g="left";s.isRightAnchor(e)&&(n.lx-=h,g="right"),s.isCenterAnchor(e)&&(n.lx-=h/2,g="center");var m="top";s.isBottomAnchor(e)&&(n.ly-=f,m="bottom"),s.isMiddleAnchor(e)&&(n.ly-=f/2,m="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),i.autoMargin(t,M(e),{x:e.x,y:e.y,l:h*({right:1,center:.5}[g]||0),r:h*({left:1,center:.5}[g]||0),b:f*({top:1,middle:.5}[m]||0),t:f*({bottom:1,middle:.5}[m]||0)})}function M(t){return d.autoMarginIdRoot+t._index}function A(t,e,n,r){r=r||{};var i=t.select("."+d.itemRectClassName),a=t.select("."+d.itemTextClassName),s=e.borderwidth,c=n.index,h=e._dims;o.setTranslate(t,s+n.x,s+n.y);var f=-1!==["up","down"].indexOf(e.direction),p=r.height||(f?h.heights[c]:h.height1);i.attr({x:0,y:0,width:r.width||(f?h.width1:h.widths[c]),height:p});var g=e.font.size*u,m=(l.lineCount(a)-1)*g/2;l.positionText(a,d.textOffsetX,p/2-m+d.textOffsetY),f?n.y+=h.heights[c]+n.yPad:n.x+=h.widths[c]+n.xPad,n.index++}function C(t,e){t.attr(d.menuIndexAttrName,e||"-1").selectAll("g."+d.dropdownButtonClassName).remove()}e.exports=function(t){var e=t._fullLayout,n=s.filterVisible(e[d.name]);function a(e){i.autoMargin(t,M(e))}var o=e._menulayer.selectAll("g."+d.containerClassName).data(n.length>0?[0]:[]);if(o.enter().append("g").classed(d.containerClassName,!0).style("cursor","pointer"),o.exit().each(function(){r.select(this).selectAll("g."+d.headerGroupClassName).each(a)}).remove(),0!==n.length){var l=o.selectAll("g."+d.headerGroupClassName).data(n,f);l.enter().append("g").classed(d.headerGroupClassName,!0);for(var c=s.ensureSingle(o,"g",d.dropdownButtonGroupClassName,function(t){t.style("pointer-events","all")}),u=0;u<n.length;u++)T(t,n[u]);var y=new h(t,c,"updatemenus"+e._uid);l.enter().size()&&(c.node().parentNode.appendChild(c.node()),c.call(C)),l.exit().each(function(t){c.call(C),a(t)}).remove(),l.each(function(e){var n=r.select(this),a="dropdown"===e.type?c:null;i.manageCommandObserver(t,e,e.buttons,function(r){g(t,e,0,n,a,y,r.index,!0)}),"dropdown"===e.type?(m(t,n,c,y,e),p(c,e)&&v(t,n,c,y,e)):v(t,n,null,null,e)})}}},{"../../constants/alignment":177,"../../lib":202,"../../lib/svg_text_utils":224,"../../plot_api/plot_template":237,"../../plots/plots":282,"../color":75,"../drawing":97,"./constants":172,"./scrollbox":176,d3:9}],175:[function(t,e,n){arguments[4][169][0].apply(n,arguments)},{"./attributes":171,"./constants":172,"./defaults":173,"./draw":174,dup:169}],176:[function(t,e,n){"use strict";e.exports=s;var r=t("d3"),i=t("../color"),a=t("../drawing"),o=t("../../lib");function s(t,e,n){this.gd=t,this.container=e,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(t,e,n){var o=this.gd._fullLayout,l=o.width,c=o.height;this.position=t;var u,d,h,f,p=this.position.l,g=this.position.w,m=this.position.t,v=this.position.h,y=this.position.direction,b="down"===y,x="left"===y,_="up"===y,w=g,k=v;b||x||"right"===y||_||(this.position.direction="down",b=!0),b||_?(d=(u=p)+w,b?(h=m,k=(f=Math.min(h+k,c))-h):k=(f=m+k)-(h=Math.max(f-k,0))):(f=(h=m)+k,x?w=(d=p+w)-(u=Math.max(d-w,0)):(u=p,w=(d=Math.min(u+w,l))-u)),this._box={l:u,t:h,w:w,h:k};var T=g>w,M=s.barLength+2*s.barPad,A=s.barWidth+2*s.barPad,C=p,S=m+v;S+A>c&&(S=c-A);var D=this.container.selectAll("rect.scrollbar-horizontal").data(T?[0]:[]);D.exit().on(".drag",null).remove(),D.enter().append("rect").classed("scrollbar-horizontal",!0).call(i.fill,s.barColor),T?(this.hbar=D.attr({rx:s.barRadius,ry:s.barRadius,x:C,y:S,width:M,height:A}),this._hbarXMin=C+M/2,this._hbarTranslateMax=w-M):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var O=v>k,E=s.barWidth+2*s.barPad,L=s.barLength+2*s.barPad,P=p+g,I=m;P+E>l&&(P=l-E);var R=this.container.selectAll("rect.scrollbar-vertical").data(O?[0]:[]);R.exit().on(".drag",null).remove(),R.enter().append("rect").classed("scrollbar-vertical",!0).call(i.fill,s.barColor),O?(this.vbar=R.attr({rx:s.barRadius,ry:s.barRadius,x:P,y:I,width:E,height:L}),this._vbarYMin=I+L/2,this._vbarTranslateMax=k-L):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var N=this.id,F=u-.5,z=O?d+E+.5:d+.5,V=h-.5,H=T?f+A+.5:f+.5,j=o._topdefs.selectAll("#"+N).data(T||O?[0]:[]);if(j.exit().remove(),j.enter().append("clipPath").attr("id",N).append("rect"),T||O?(this._clipRect=j.select("rect").attr({x:Math.floor(F),y:Math.floor(V),width:Math.ceil(z)-Math.floor(F),height:Math.ceil(H)-Math.floor(V)}),this.container.call(a.setClipUrl,N,this.gd),this.bg.attr({x:p,y:m,width:g,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),T||O){var B=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(B);var U=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));T&&this.hbar.on(".drag",null).call(U),O&&this.vbar.on(".drag",null).call(U)}this.setTranslate(e,n)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=r.event.dx),this.vbar&&(e-=r.event.dy),this.setTranslate(t,e)},s.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=r.event.deltaY),this.vbar&&(e+=r.event.deltaY),this.setTranslate(t,e)},s.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var n=t+this._hbarXMin,i=n+this._hbarTranslateMax;t=(o.constrain(r.event.x,n,i)-n)/(i-n)*(this.position.w-this._box.w)}if(this.vbar){var a=e+this._vbarYMin,s=a+this._vbarTranslateMax;e=(o.constrain(r.event.y,a,s)-a)/(s-a)*(this.position.h-this._box.h)}this.setTranslate(t,e)},s.prototype.setTranslate=function(t,e){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;t=o.constrain(t||0,0,n),e=o.constrain(e||0,0,r),this.translateX=t,this.translateY=e,this.container.call(a.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar&&this.hbar.call(a.setTranslate,t+t/n*this._hbarTranslateMax,e),this.vbar&&this.vbar.call(a.setTranslate,t,e+e/r*this._vbarTranslateMax)}},{"../../lib":202,"../color":75,"../drawing":97,d3:9}],177:[function(t,e,n){"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],178:[function(t,e,n){"use strict";e.exports={axisRefDescription:function(t,e,n){return["If set to a",t,"axis id (e.g. *"+t+"* or","*"+t+"2*), the `"+t+"` position refers to a",t,"coordinate. If set to *paper*, the `"+t+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+n+"). If set to a",t,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+t+"2 domain* refers to the domain of the second",t," axis and a",t,"position of 0.5 refers to the","point between the",e,"and the",n,"of the domain of the","second",t,"axis."].join(" ")}}},{}],179:[function(t,e,n){"use strict";e.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],180:[function(t,e,n){"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],181:[function(t,e,n){"use strict";e.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],182:[function(t,e,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],183:[function(t,e,n){"use strict";n.version=t("./version").version,t("es6-promise").polyfill(),t("../build/plotcss"),t("./fonts/mathjax_config")();for(var r=t("./registry"),i=n.register=r.register,a=t("./plot_api"),o=Object.keys(a),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(n[l]=a[l]),i({moduleType:"apiMethod",name:l,fn:a[l]})}i(t("./traces/scatter")),i([t("./components/legend"),t("./components/fx"),t("./components/annotations"),t("./components/annotations3d"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar")]),i([t("./locale-en"),t("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=t("./fonts/ploticon"),n.Plots=t("./plots/plots"),n.Fx=t("./components/fx"),n.Snapshot=t("./snapshot"),n.PlotSchema=t("./plot_api/plot_schema"),n.Queue=t("./lib/queue"),n.d3=t("d3")},{"../build/plotcss":1,"./components/annotations":68,"./components/annotations3d":73,"./components/colorbar":81,"./components/colorscale":87,"./components/errorbars":103,"./components/fx":115,"./components/grid":119,"./components/images":124,"./components/legend":132,"./components/rangeselector":143,"./components/rangeslider":150,"./components/shapes":164,"./components/sliders":169,"./components/updatemenus":175,"./fonts/mathjax_config":184,"./fonts/ploticon":185,"./lib/queue":217,"./locale-en":228,"./locale-en-us":227,"./plot_api":232,"./plot_api/plot_schema":236,"./plots/plots":282,"./registry":290,"./snapshot":295,"./traces/scatter":342,"./version":358,d3:9,"es6-promise":10}],184:[function(t,e,n){"use strict";e.exports=function(){"undefined"!=typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],185:[function(t,e,n){"use strict";e.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],186:[function(t,e,n){"use strict";n.isLeftAnchor=function(t){return"left"===t.xanchor||"auto"===t.xanchor&&t.x<=1/3},n.isCenterAnchor=function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},n.isRightAnchor=function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},n.isTopAnchor=function(t){return"top"===t.yanchor||"auto"===t.yanchor&&t.y>=2/3},n.isMiddleAnchor=function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3},n.isBottomAnchor=function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3}},{}],187:[function(t,e,n){"use strict";var r=t("./mod"),i=r.mod,a=r.modHalf,o=Math.PI,s=2*o;function l(t){return Math.abs(t[1]-t[0])>s-1e-14}function c(t,e){return a(e-t,s)}function u(t,e){if(l(e))return!0;var n,r;e[0]<e[1]?(n=e[0],r=e[1]):(n=e[1],r=e[0]),(n=i(n,s))>(r=i(r,s))&&(r+=s);var a=i(t,s),o=a+s;return a>=n&&a<=r||o>=n&&o<=r}function d(t,e,n,r,i,a,c){i=i||0,a=a||0;var u,d,h,f,p,g=l([n,r]);function m(t,e){return[t*Math.cos(e)+i,a-t*Math.sin(e)]}g?(u=0,d=o,h=s):n<r?(u=n,h=r):(u=r,h=n),t<e?(f=t,p=e):(f=e,p=t);var v,y=Math.abs(h-u)<=o?0:1;function b(t,e,n){return"A"+[t,t]+" "+[0,y,n]+" "+m(t,e)}return g?v=null===f?"M"+m(p,u)+b(p,d,0)+b(p,h,0)+"Z":"M"+m(f,u)+b(f,d,0)+b(f,h,0)+"ZM"+m(p,u)+b(p,d,1)+b(p,h,1)+"Z":null===f?(v="M"+m(p,u)+b(p,h,0),c&&(v+="L0,0Z")):v="M"+m(f,u)+"L"+m(p,u)+b(p,h,0)+"L"+m(f,h)+b(f,u,1)+"Z",v}e.exports={deg2rad:function(t){return t/180*o},rad2deg:function(t){return t/o*180},angleDelta:c,angleDist:function(t,e){return Math.abs(c(t,e))},isFullCircle:l,isAngleInsideSector:u,isPtInsideSector:function(t,e,n,r){return!!u(e,r)&&(n[0]<n[1]?(i=n[0],a=n[1]):(i=n[1],a=n[0]),t>=i&&t<=a);var i,a},pathArc:function(t,e,n,r,i){return d(null,t,e,n,r,i,0)},pathSector:function(t,e,n,r,i){return d(null,t,e,n,r,i,1)},pathAnnulus:function(t,e,n,r,i,a){return d(t,e,n,r,i,a,1)}}},{"./mod":209}],188:[function(t,e,n){"use strict";var r=Array.isArray,i="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},a="undefined"==typeof DataView?function(){}:DataView;function o(t){return i.isView(t)&&!(t instanceof a)}function s(t){return r(t)||o(t)}function l(t,e,n){if(s(t)){if(s(t[0])){for(var r=n,i=0;i<t.length;i++)r=e(r,t[i].length);return r}return t.length}return 0}n.isTypedArray=o,n.isArrayOrTypedArray=s,n.isArray1D=function(t){return!s(t[0])},n.ensureArray=function(t,e){return r(t)||(t=[]),t.length=e,t},n.concat=function(){var t,e,n,i,a,o,s,l,c=[],u=!0,d=0;for(n=0;n<arguments.length;n++)(o=(i=arguments[n]).length)&&(e?c.push(i):(e=i,a=o),r(i)?t=!1:(u=!1,d?t!==i.constructor&&(t=!1):t=i.constructor),d+=o);if(!d)return[];if(!c.length)return e;if(u)return e.concat.apply(e,c);if(t){for((s=new t(d)).set(e),n=0;n<c.length;n++)s.set(i=c[n],a),a+=i.length;return s}for(s=new Array(d),l=0;l<e.length;l++)s[l]=e[l];for(n=0;n<c.length;n++){for(i=c[n],l=0;l<i.length;l++)s[a+l]=i[l];a+=l}return s},n.maxRowLength=function(t){return l(t,Math.max,0)},n.minRowLength=function(t){return l(t,Math.min,1/0)}},{}],189:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../constants/numerical").BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function(t){return"string"==typeof t&&(t=t.replace(a,"")),r(t)?Number(t):i}},{"../constants/numerical":181,"fast-isnumeric":11}],190:[function(t,e,n){"use strict";e.exports=function(t){var e=t._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0,depth:!0})})}},{}],191:[function(t,e,n){"use strict";e.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}},{}],192:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("tinycolor2"),a=t("../plots/attributes"),o=t("../components/colorscale/scales"),s=t("../constants/interactions").DESELECTDIM,l=t("./nested_property"),c=t("./regex").counter,u=t("./mod").modHalf,d=t("./array").isArrayOrTypedArray;function h(t,e){var r=n.valObjectMeta[e.valType];if(e.arrayOk&&d(t))return!0;if(r.validateFunction)return r.validateFunction(t,e);var i={},a=i;return r.coerceFunction(t,{set:function(t){a=t}},i,e),a!==i}n.valObjectMeta={data_array:{coerceFunction:function(t,e,n){d(t)?e.set(t):void 0!==n&&e.set(n)}},enumerated:{coerceFunction:function(t,e,n,r){r.coerceNumber&&(t=+t),-1===r.values.indexOf(t)?e.set(n):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var n=e.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(t))return!0}else if(t===n[r])return!0}return!1}},boolean:{coerceFunction:function(t,e,n){e.set(!0===t||!1===t?t:n)}},number:{coerceFunction:function(t,e,n,i){!r(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?e.set(n):e.set(+t)}},integer:{coerceFunction:function(t,e,n,i){t%1||!r(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?e.set(n):e.set(+t)}},string:{coerceFunction:function(t,e,n,r){e.set("string"!=typeof t?!0!==r.strict&&"number"==typeof t?String(t):n:r.noBlank&&!t?n:t)}},color:{coerceFunction:function(t,e,n){i(t).isValid()?e.set(t):e.set(n)}},colorlist:{coerceFunction:function(t,e,n){Array.isArray(t)&&t.length&&t.every(function(t){return i(t).isValid()})?e.set(t):e.set(n)}},colorscale:{coerceFunction:function(t,e,n){e.set(o.get(t,n))}},angle:{coerceFunction:function(t,e,n){"auto"===t?e.set("auto"):r(t)?e.set(u(+t,360)):e.set(n)}},subplotid:{coerceFunction:function(t,e,n,r){var i=r.regex||c(n);"string"==typeof t&&i.test(t)?e.set(t):e.set(n)},validateFunction:function(t,e){var n=e.dflt;return t===n||"string"==typeof t&&!!c(n).test(t)}},flaglist:{coerceFunction:function(t,e,n,r){if("string"==typeof t)if(-1===(r.extras||[]).indexOf(t)){for(var i=t.split("+"),a=0;a<i.length;){var o=i[a];-1===r.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}e.set(i.length?i.join("+"):n)}else e.set(t);else e.set(n)}},any:{coerceFunction:function(t,e,n){e.set(void 0===t?n:t)}},info_array:{coerceFunction:function(t,e,r,i){function a(t,e,r){var i;return void 0===r&&(r=e.dflt),n.valObjectMeta[e.valType].coerceFunction(t,{set:function(t){i=t}},r,e),i}var o=2===i.dimensions||"1-2"===i.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var s,l,c,u,d,h=i.items,f=[],p=Array.isArray(h),g=p&&o&&Array.isArray(h[0]),m=o&&p&&!g,v=p&&!m?h.length:t.length;if(r=Array.isArray(r)?r:[],o)for(s=0;s<v;s++)for(f[s]=[],c=Array.isArray(t[s])?t[s]:[],u=m?h.length:p?h[s].length:c.length,l=0;l<u;l++)void 0!==(d=a(c[l],m?h[l]:p?h[s][l]:h,(r[s]||[])[l]))&&(f[s][l]=d);else for(s=0;s<v;s++)void 0!==(d=a(t[s],p?h[s]:h,r[s]))&&(f[s]=d);e.set(f)}else e.set(r)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var n=e.items,r=Array.isArray(n),i=2===e.dimensions;if(!e.freeLength&&t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(i){if(!Array.isArray(t[a])||!e.freeLength&&t[a].length!==n[a].length)return!1;for(var o=0;o<t[a].length;o++)if(!h(t[a][o],r?n[a][o]:n))return!1}else if(!h(t[a],r?n[a]:n))return!1;return!0}}},n.coerce=function(t,e,r,i,a){var o=l(r,i).get(),s=l(t,i),c=l(e,i),u=s.get(),f=e._template;if(void 0===u&&f&&(u=l(f,i).get(),f=0),void 0===a&&(a=o.dflt),o.arrayOk&&d(u))return c.set(u),u;var p=n.valObjectMeta[o.valType].coerceFunction;p(u,c,a,o);var g=c.get();return f&&g===a&&!h(u,o)&&(p(u=l(f,i).get(),c,a,o),g=c.get()),g},n.coerce2=function(t,e,r,i,a){var o=l(t,i),s=n.coerce(t,e,r,i,a);return null!=o.get()&&s},n.coerceFont=function(t,e,n){var r={};return r.family=t(e+".family",(n=n||{}).family),r.size=t(e+".size",n.size),r.color=t(e+".color",n.color),r},n.coerceHoverinfo=function(t,e,r){var i,o=e._module.attributes,s=o.hoverinfo?o:a,l=s.hoverinfo;if(1===r._dataLength){var c="all"===l.dflt?l.flags.slice():l.dflt.split("+");c.splice(c.indexOf("name"),1),i=c.join("+")}return n.coerce(t,e,s,"hoverinfo",i)},n.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var n,r,i=t.marker.opacity;void 0!==i&&(d(i)||t.selected||t.unselected||(n=i,r=s*i),e("selected.marker.opacity",n),e("unselected.marker.opacity",r))}},n.validate=h},{"../components/colorscale/scales":90,"../constants/interactions":180,"../plots/attributes":244,"./array":188,"./mod":209,"./nested_property":210,"./regex":218,"fast-isnumeric":11,tinycolor2:58}],193:[function(t,e,n){"use strict";var r,i,a=t("d3-time-format").timeFormat,o=t("fast-isnumeric"),s=t("./loggers"),l=t("./mod").mod,c=t("../constants/numerical"),u=c.BADNUM,d=c.ONEDAY,h=c.ONEHOUR,f=c.ONEMIN,p=c.ONESEC,g=c.EPOCHJD,m=t("../registry"),v=t("d3-time-format").utcFormat,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=(new Date).getFullYear()-70;function _(t){return t&&m.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function w(t,e){return String(t+Math.pow(10,e)).substr(1)}n.dateTick0=function(t,e){var r=function(t,e){return _(t)?e?m.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:m.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"}(t,!!e);if(e<2)return r;var i=n.dateTime2ms(r,t);return n.ms2DateTime(i+=d*(e-1),0,t)},n.dfltRange=function(t){return _(t)?m.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},n.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},n.dateTime2ms=function(t,e){if(n.isJSDate(t)){var a=t.getTimezoneOffset()*f,o=(t.getUTCMinutes()-t.getMinutes())*f+(t.getUTCSeconds()-t.getSeconds())*p+(t.getUTCMilliseconds()-t.getMilliseconds());if(o){var s=3*f;a=a-s/2+l(o-a+s/2,s)}return(t=Number(t)-a)>=r&&t<=i?t:u}if("string"!=typeof t&&"number"!=typeof t)return u;t=String(t);var c=_(e),v=t.charAt(0);!c||"G"!==v&&"g"!==v||(t=t.substr(1),e="");var w=c&&"chinese"===e.substr(0,7),k=t.match(w?b:y);if(!k)return u;var T=k[1],M=k[3]||"1",A=Number(k[5]||1),C=Number(k[7]||0),S=Number(k[9]||0),D=Number(k[11]||0);if(c){if(2===T.length)return u;var O;T=Number(T);try{var E=m.getComponentMethod("calendars","getCal")(e);if(w){var L="i"===M.charAt(M.length-1);M=parseInt(M,10),O=E.newDate(T,E.toMonthIndex(T,M,L),A)}else O=E.newDate(T,Number(M),A)}catch(t){return u}return O?(O.toJD()-g)*d+C*h+S*f+D*p:u}T=2===T.length?(Number(T)+2e3-x)%100+x:Number(T),M-=1;var P=new Date(Date.UTC(2e3,M,A,C,S));return P.setUTCFullYear(T),P.getUTCMonth()!==M||P.getUTCDate()!==A?u:P.getTime()+D*p},r=n.MIN_MS=n.dateTime2ms("-9999"),i=n.MAX_MS=n.dateTime2ms("9999-12-31 23:59:59.9999"),n.isDateTime=function(t,e){return n.dateTime2ms(t,e)!==u};var k=90*d,T=3*h,M=5*f;function A(t,e,n,r,i){if((e||n||r||i)&&(t+=" "+w(e,2)+":"+w(n,2),(r||i)&&(t+=":"+w(r,2),i))){for(var a=4;i%10==0;)a-=1,i/=10;t+="."+w(i,a)}return t}n.ms2DateTime=function(t,e,n){if("number"!=typeof t||!(t>=r&&t<=i))return u;e||(e=0);var a,o,s,c,y,b,x=Math.floor(10*l(t+.05,1)),w=Math.round(t-x/10);if(_(n)){var C=Math.floor(w/d)+g,S=Math.floor(l(t,d));try{a=m.getComponentMethod("calendars","getCal")(n).fromJD(C).formatDate("yyyy-mm-dd")}catch(t){a=v("G%Y-%m-%d")(new Date(w))}if("-"===a.charAt(0))for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;o=e<k?Math.floor(S/h):0,s=e<k?Math.floor(S%h/f):0,c=e<T?Math.floor(S%f/p):0,y=e<M?S%p*10+x:0}else b=new Date(w),a=v("%Y-%m-%d")(b),o=e<k?b.getUTCHours():0,s=e<k?b.getUTCMinutes():0,c=e<T?b.getUTCSeconds():0,y=e<M?10*b.getUTCMilliseconds()+x:0;return A(a,o,s,c,y)},n.ms2DateTimeLocal=function(t){if(!(t>=r+d&&t<=i-d))return u;var e=Math.floor(10*l(t+.05,1)),n=new Date(Math.round(t-e/10));return A(a("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+e)},n.cleanDate=function(t,e,r){if(t===u)return e;if(n.isJSDate(t)||"number"==typeof t&&isFinite(t)){if(_(r))return s.error("JS Dates and milliseconds are incompatible with world calendars",t),e;if(!(t=n.ms2DateTimeLocal(+t))&&void 0!==e)return e}else if(!n.isDateTime(t,r))return s.error("unrecognized date",t),e;return t};var C=/%\d?f/g;function S(t,e,n,r){t=t.replace(C,function(t){var n=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(e+.05));if(_(r))try{t=m.getComponentMethod("calendars","worldCalFmt")(t,e,r)}catch(t){return"Invalid"}return n(t)(i)}var D=[59,59.9,59.99,59.999,59.9999];n.formatDate=function(t,e,n,r,i,a){if(i=_(i)&&i,!e)if("y"===n)e=a.year;else if("m"===n)e=a.month;else{if("d"!==n)return function(t,e){var n=l(t+.05,d),r=w(Math.floor(n/h),2)+":"+w(l(Math.floor(n/f),60),2);if("M"!==e){o(e)||(e=0);var i=(100+Math.min(l(t/p,60),D[e])).toFixed(e).substr(1);e>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+i}return r}(t,n)+"\n"+S(a.dayMonthYear,t,r,i);e=a.dayMonth+"\n"+a.year}return S(e,t,r,i)};var O=3*d;n.incrementMonth=function(t,e,n){n=_(n)&&n;var r=l(t,d);if(t=Math.round(t-r),n)try{var i=Math.round(t/d)+g,a=m.getComponentMethod("calendars","getCal")(n),o=a.fromJD(i);return e%12?a.add(o,e,"m"):a.add(o,e/12,"y"),(o.toJD()-g)*d+r}catch(e){s.error("invalid ms "+t+" in calendar "+n)}var c=new Date(t+O);return c.setUTCMonth(c.getUTCMonth()+e)+r-O},n.findExactDates=function(t,e){for(var n,r,i=0,a=0,s=0,l=0,c=_(e)&&m.getComponentMethod("calendars","getCal")(e),u=0;u<t.length;u++)if(o(r=t[u])){if(!(r%d))if(c)try{1===(n=c.fromJD(r/d+g)).day()?1===n.month()?i++:a++:s++}catch(t){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?i++:a++:s++}else l++;s+=a+=i;var h=t.length-l;return{exactYears:i/h,exactMonths:a/h,exactDays:s/h}}},{"../constants/numerical":181,"../registry":290,"./loggers":206,"./mod":209,"d3-time-format":7,"fast-isnumeric":11}],194:[function(t,e,n){"use strict";var r=t("d3"),i=t("./loggers"),a=t("./matrix"),o=t("gl-mat4");function s(t){var e=t&&t.parentNode;e&&e.removeChild(t)}function l(t,e,n){var r="plotly.js-style-"+t,a=document.getElementById(r);a||((a=document.createElement("style")).setAttribute("id",r),a.appendChild(document.createTextNode("")),document.head.appendChild(a));var o=a.sheet;o.insertRule?o.insertRule(e+"{"+n+"}",0):o.addRule?o.addRule(e,n,0):i.warn("addStyleRule failed")}function c(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===n?null:n.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(t){return+t})}function u(t){for(var e=[];d(t);)e.push(t),t=t.parentNode;return e}function d(t){return t&&(t instanceof Element||t instanceof HTMLElement)}e.exports={getGraphDiv:function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null==t)throw new Error("DOM element provided is null or undefined");return t},isPlotDiv:function(t){var e=r.select(t);return e.node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(t,e){l("global",t,e)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(t){var e=document.getElementById("plotly.js-style-"+t);e&&s(e)},getFullTransformMatrix:function(t){var e=u(t),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(t){var e=c(t);if(e){var r=a.convertCssMatrix(e);n=o.multiply(n,n,r)}}),n},getElementTransformMatrix:c,getElementAndAncestors:u,equalDomRects:function(t,e){return t&&e&&t.x===e.x&&t.y===e.y&&t.top===e.top&&t.left===e.left&&t.right===e.right&&t.bottom===e.bottom}}},{"./loggers":206,"./matrix":208,d3:9,"gl-mat4":27}],195:[function(t,e,n){"use strict";var r=t("events").EventEmitter,i={init:function(t){if(t._ev instanceof r)return t;var e=new r,n=new r;return t._ev=e,t._internalEv=n,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=n.on.bind(n),t._internalOnce=n.once.bind(n),t._removeInternalListener=n.removeListener.bind(n),t._removeAllInternalListeners=n.removeAllListeners.bind(n),t.emit=function(r,i){"undefined"!=typeof jQuery&&jQuery(t).trigger(r,i),e.emit(r,i),n.emit(r,i)},t},triggerHandler:function(t,e,n){var r,i;"undefined"!=typeof jQuery&&(r=jQuery(t).triggerHandler(e,n));var a=t._ev;if(!a)return r;var o,s=a._events[e];if(!s)return r;function l(t){return t.listener?(a.removeListener(e,t.listener),t.fired?void 0:(t.fired=!0,t.listener.apply(a,[n]))):t.apply(a,[n])}for(s=Array.isArray(s)?s:[s],o=0;o<s.length-1;o++)l(s[o]);return i=l(s[o]),void 0!==r?r:i},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}};e.exports=i},{events:6}],196:[function(t,e,n){"use strict";var r=t("./is_plain_object.js"),i=Array.isArray;function a(t,e,n,o){var s,l,c,u,d,h,f=t[0],p=t.length;if(2===p&&i(f)&&i(t[1])&&0===f.length){if(function(t,e){var n,r;for(n=0;n<t.length;n++){if(null!==(r=t[n])&&"object"==typeof r)return!1;void 0!==r&&(e[n]=r)}return!0}(t[1],f))return f;f.splice(0,f.length)}for(var g=1;g<p;g++)for(l in s=t[g])c=f[l],u=s[l],o&&i(u)?f[l]=u:e&&u&&(r(u)||(d=i(u)))?(d?(d=!1,h=c&&i(c)?c:[]):h=c&&r(c)?c:{},f[l]=a([h,u],e,n,o)):(void 0!==u||n)&&(f[l]=u);return f}n.extendFlat=function(){return a(arguments,!1,!1,!1)},n.extendDeep=function(){return a(arguments,!0,!1,!1)},n.extendDeepAll=function(){return a(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return a(arguments,!0,!1,!0)}},{"./is_plain_object.js":203}],197:[function(t,e,n){"use strict";e.exports=function(t){for(var e={},n=[],r=0,i=0;i<t.length;i++){var a=t[i];1!==e[a]&&(e[a]=1,n[r++]=a)}return n}},{}],198:[function(t,e,n){"use strict";function r(t){return!0===t.visible}function i(t){var e=t[0].trace;return!0===e.visible&&0!==e._length}e.exports=function(t){for(var e,n=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?i:r),a=[],o=0;o<t.length;o++){var s=t[o];n(s)&&a.push(s)}return a}},{}],199:[function(t,e,n){"use strict";var r,i,a,o=t("./mod").mod;function s(t,e,n,r,i,a,o,s){var l=n-t,c=i-t,u=o-i,d=r-e,h=a-e,f=s-a,p=l*f-u*d;if(0===p)return null;var g=(c*f-u*h)/p,m=(c*d-l*h)/p;return m<0||m>1||g<0||g>1?null:{x:t+l*g,y:e+d*g}}function l(t,e,n,r,i){var a=r*t+i*e;if(a<0)return r*r+i*i;if(a>n){var o=r-t,s=i-e;return o*o+s*s}var l=r*e-i*t;return l*l/n}n.segmentsIntersect=s,n.segmentDistance=function(t,e,n,r,i,a,o,c){if(s(t,e,n,r,i,a,o,c))return 0;var u=n-t,d=r-e,h=o-i,f=c-a,p=u*u+d*d,g=h*h+f*f,m=Math.min(l(u,d,p,i-t,a-e),l(u,d,p,o-t,c-e),l(h,f,g,t-i,e-a),l(h,f,g,n-i,r-a));return Math.sqrt(m)},n.getTextLocation=function(t,e,n,s){if(t===i&&s===a||(r={},i=t,a=s),r[n])return r[n];var l=t.getPointAtLength(o(n-s/2,e)),c=t.getPointAtLength(o(n+s/2,e)),u=Math.atan((c.y-l.y)/(c.x-l.x)),d=t.getPointAtLength(o(n,e)),h={x:(4*d.x+l.x+c.x)/6,y:(4*d.y+l.y+c.y)/6,theta:u};return r[n]=h,h},n.clearLocationCache=function(){i=null},n.getVisibleSegment=function(t,e,n){var r,i,a=e.left,o=e.right,s=e.top,l=e.bottom,c=0,u=t.getTotalLength(),d=u;function h(e){var n=t.getPointAtLength(e);0===e?r=n:e===u&&(i=n);var c=n.x<a?a-n.x:n.x>o?n.x-o:0,d=n.y<s?s-n.y:n.y>l?n.y-l:0;return Math.sqrt(c*c+d*d)}for(var f=h(c);f;){if((c+=f+n)>d)return;f=h(c)}for(f=h(d);f;){if(c>(d-=f+n))return;f=h(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(r.x-i.x)<.1&&Math.abs(r.y-i.y)<.1}},n.findPointOnPath=function(t,e,n,r){for(var i,a,o,s=(r=r||{}).pathLength||t.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=t.getPointAtLength(0)[n]>t.getPointAtLength(s)[n]?-1:1,d=0,h=0,f=s;d<c;){if(o=(a=t.getPointAtLength(i=(h+f)/2))[n]-e,Math.abs(o)<l)return a;u*o>0?f=i:h=i,d++}return a}},{"./mod":209}],200:[function(t,e,n){"use strict";e.exports=function(t){return t}},{}],201:[function(t,e,n){"use strict";e.exports=function(t,e){if(!e)return t;var n=1/Math.abs(e),r=n>1?(n*t+n*e)/n:t+e,i=String(r).length;if(i>16){var a=String(e).length;if(i>=String(t).length+a){var o=parseFloat(r).toPrecision(12);-1===o.indexOf("e+")&&(r=+o)}}return r}},{}],202:[function(t,e,n){"use strict";var r=t("d3"),i=t("d3-time-format").utcFormat,a=t("fast-isnumeric"),o=t("../constants/numerical"),s=o.FP_SAFE,l=o.BADNUM,c=e.exports={};c.nestedProperty=t("./nested_property"),c.keyedContainer=t("./keyed_container"),c.relativeAttr=t("./relative_attr"),c.isPlainObject=t("./is_plain_object"),c.toLogRange=t("./to_log_range"),c.relinkPrivateKeys=t("./relink_private");var u=t("./array");c.isTypedArray=u.isTypedArray,c.isArrayOrTypedArray=u.isArrayOrTypedArray,c.isArray1D=u.isArray1D,c.ensureArray=u.ensureArray,c.concat=u.concat,c.maxRowLength=u.maxRowLength,c.minRowLength=u.minRowLength;var d=t("./mod");c.mod=d.mod,c.modHalf=d.modHalf;var h=t("./coerce");c.valObjectMeta=h.valObjectMeta,c.coerce=h.coerce,c.coerce2=h.coerce2,c.coerceFont=h.coerceFont,c.coerceHoverinfo=h.coerceHoverinfo,c.coerceSelectionMarkerOpacity=h.coerceSelectionMarkerOpacity,c.validate=h.validate;var f=t("./dates");c.dateTime2ms=f.dateTime2ms,c.isDateTime=f.isDateTime,c.ms2DateTime=f.ms2DateTime,c.ms2DateTimeLocal=f.ms2DateTimeLocal,c.cleanDate=f.cleanDate,c.isJSDate=f.isJSDate,c.formatDate=f.formatDate,c.incrementMonth=f.incrementMonth,c.dateTick0=f.dateTick0,c.dfltRange=f.dfltRange,c.findExactDates=f.findExactDates,c.MIN_MS=f.MIN_MS,c.MAX_MS=f.MAX_MS;var p=t("./search");c.findBin=p.findBin,c.sorterAsc=p.sorterAsc,c.sorterDes=p.sorterDes,c.distinctVals=p.distinctVals,c.roundUp=p.roundUp,c.sort=p.sort,c.findIndexOfMin=p.findIndexOfMin;var g=t("./stats");c.aggNums=g.aggNums,c.len=g.len,c.mean=g.mean,c.median=g.median,c.midRange=g.midRange,c.variance=g.variance,c.stdev=g.stdev,c.interp=g.interp;var m=t("./matrix");c.init2dArray=m.init2dArray,c.transposeRagged=m.transposeRagged,c.dot=m.dot,c.translationMatrix=m.translationMatrix,c.rotationMatrix=m.rotationMatrix,c.rotationXYMatrix=m.rotationXYMatrix,c.apply3DTransform=m.apply3DTransform,c.apply2DTransform=m.apply2DTransform,c.apply2DTransform2=m.apply2DTransform2,c.convertCssMatrix=m.convertCssMatrix,c.inverseTransformMatrix=m.inverseTransformMatrix;var v=t("./angles");c.deg2rad=v.deg2rad,c.rad2deg=v.rad2deg,c.angleDelta=v.angleDelta,c.angleDist=v.angleDist,c.isFullCircle=v.isFullCircle,c.isAngleInsideSector=v.isAngleInsideSector,c.isPtInsideSector=v.isPtInsideSector,c.pathArc=v.pathArc,c.pathSector=v.pathSector,c.pathAnnulus=v.pathAnnulus;var y=t("./anchor_utils");c.isLeftAnchor=y.isLeftAnchor,c.isCenterAnchor=y.isCenterAnchor,c.isRightAnchor=y.isRightAnchor,c.isTopAnchor=y.isTopAnchor,c.isMiddleAnchor=y.isMiddleAnchor,c.isBottomAnchor=y.isBottomAnchor;var b=t("./geometry2d");c.segmentsIntersect=b.segmentsIntersect,c.segmentDistance=b.segmentDistance,c.getTextLocation=b.getTextLocation,c.clearLocationCache=b.clearLocationCache,c.getVisibleSegment=b.getVisibleSegment,c.findPointOnPath=b.findPointOnPath;var x=t("./extend");c.extendFlat=x.extendFlat,c.extendDeep=x.extendDeep,c.extendDeepAll=x.extendDeepAll,c.extendDeepNoArrays=x.extendDeepNoArrays;var _=t("./loggers");c.log=_.log,c.warn=_.warn,c.error=_.error;var w=t("./regex");c.counterRegex=w.counter;var k=t("./throttle");c.throttle=k.throttle,c.throttleDone=k.done,c.clearThrottle=k.clear;var T=t("./dom");function M(t){var e={};for(var n in t)for(var r=t[n],i=0;i<r.length;i++)e[r[i]]=+n;return e}c.getGraphDiv=T.getGraphDiv,c.isPlotDiv=T.isPlotDiv,c.removeElement=T.removeElement,c.addStyleRule=T.addStyleRule,c.addRelatedStyleRule=T.addRelatedStyleRule,c.deleteRelatedStyleRule=T.deleteRelatedStyleRule,c.getFullTransformMatrix=T.getFullTransformMatrix,c.getElementTransformMatrix=T.getElementTransformMatrix,c.getElementAndAncestors=T.getElementAndAncestors,c.equalDomRects=T.equalDomRects,c.clearResponsive=t("./clear_responsive"),c.preserveDrawingBuffer=t("./preserve_drawing_buffer"),c.makeTraceGroups=t("./make_trace_groups"),c._=t("./localize"),c.notifier=t("./notifier"),c.filterUnique=t("./filter_unique"),c.filterVisible=t("./filter_visible"),c.pushUnique=t("./push_unique"),c.increment=t("./increment"),c.cleanNumber=t("./clean_number"),c.ensureNumber=function(t){return a(t)?(t=Number(t))<-s||t>s?l:a(t)?Number(t):l:l},c.isIndex=function(t,e){return!(void 0!==e&&t>=e)&&a(t)&&t>=0&&t%1==0},c.noop=t("./noop"),c.identity=t("./identity"),c.repeat=function(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n},c.swapAttrs=function(t,e,n,r){n||(n="x"),r||(r="y");for(var i=0;i<e.length;i++){var a=e[i],o=c.nestedProperty(t,a.replace("?",n)),s=c.nestedProperty(t,a.replace("?",r)),l=o.get();o.set(s.get()),s.set(l)}},c.raiseToTop=function(t){t.parentNode.appendChild(t)},c.cancelTransition=function(t){return t.transition().duration(0)},c.constrain=function(t,e,n){return e>n?Math.max(n,Math.min(e,t)):Math.max(e,Math.min(n,t))},c.bBoxIntersect=function(t,e,n){return t.left<=e.right+(n=n||0)&&e.left<=t.right+n&&t.top<=e.bottom+n&&e.top<=t.bottom+n},c.simpleMap=function(t,e,n,r,i){for(var a=t.length,o=new Array(a),s=0;s<a;s++)o[s]=e(t[s],n,r,i);return o},c.randstr=function t(e,n,r,i){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var a,o,s=Math.log(Math.pow(2,n))/Math.log(r),l="";for(a=2;s===1/0;a*=2)s=Math.log(Math.pow(2,n/a))/Math.log(r)*a;var u=s-Math.floor(s);for(a=0;a<Math.floor(s);a++)l=Math.floor(Math.random()*r).toString(r)+l;u&&(o=Math.pow(r,u),l=Math.floor(Math.random()*o).toString(r)+l);var d=parseInt(l,r);return e&&e[l]||d!==1/0&&d>=Math.pow(2,n)?i>10?(c.warn("randstr failed uniqueness"),l):t(e,n,r,(i||0)+1):l},c.OptionControl=function(t,e){t||(t={}),e||(e="opt");var n={optionList:[],_newoption:function(r){r[e]=t,n[r.name]=r,n.optionList.push(r)}};return n["_"+e]=t,n},c.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var n,r,i,a,o=t.length,s=2*o,l=2*e-1,c=new Array(l),u=new Array(o);for(n=0;n<l;n++)c[n]=(1-Math.cos(Math.PI*(n+1)/e))/(2*e);for(n=0;n<o;n++){for(a=0,r=0;r<l;r++)(i=n+r+1-e)<-o?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=o&&(i=s-1-i),a+=t[i]*c[r];u[n]=a}return u},c.syncOrAsync=function(t,e,n){var r;function i(){return c.syncOrAsync(t,e,n)}for(;t.length;)if((r=(0,t.splice(0,1)[0])(e))&&r.then)return r.then(i).then(void 0,c.promiseError);return n&&n(e)},c.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},c.noneOrAll=function(t,e,n){if(t){var r,i=!1,a=!0;for(r=0;r<n.length;r++)null!=t[n[r]]?i=!0:a=!1;if(i&&!a)for(r=0;r<n.length;r++)t[n[r]]=e[n[r]]}},c.mergeArray=function(t,e,n,r){var i="function"==typeof r;if(c.isArrayOrTypedArray(t))for(var a=Math.min(t.length,e.length),o=0;o<a;o++){var s=t[o];e[o][n]=i?r(s):s}},c.mergeArrayCastPositive=function(t,e,n){return c.mergeArray(t,e,n,function(t){var e=+t;return isFinite(e)&&e>0?e:0})},c.fillArray=function(t,e,n,r){if(r=r||c.identity,c.isArrayOrTypedArray(t))for(var i=0;i<e.length;i++)e[i][n]=r(t[i])},c.castOption=function(t,e,n,r){r=r||c.identity;var i=c.nestedProperty(t,n).get();return c.isArrayOrTypedArray(i)?Array.isArray(e)&&c.isArrayOrTypedArray(i[e[0]])?r(i[e[0]][e[1]]):r(i[e]):i},c.extractOption=function(t,e,n,r){if(n in t)return t[n];var i=c.nestedProperty(e,r).get();return Array.isArray(i)?void 0:i},c.tagSelected=function(t,e,n){var r,i,a=e.selectedpoints,o=e._indexToPoints;o&&(r=M(o));for(var s=0;s<a.length;s++){var l=a[s];if(c.isIndex(l)||c.isArrayOrTypedArray(l)&&c.isIndex(l[0])&&c.isIndex(l[1])){var u=r?r[l]:l,d=n?n[u]:u;void 0!==(i=d)&&i<t.length&&(t[d].selected=1)}}},c.selIndices2selPoints=function(t){var e=t.selectedpoints,n=t._indexToPoints;if(n){for(var r=M(n),i=[],a=0;a<e.length;a++){var o=e[a];if(c.isIndex(o)){var s=r[o];c.isIndex(s)&&i.push(s)}}return i}return e},c.getTargetArray=function(t,e){var n=e.target;if("string"==typeof n&&n){var r=c.nestedProperty(t,n).get();return!!Array.isArray(r)&&r}return!!Array.isArray(n)&&n},c.minExtend=function(t,e){var n={};"object"!=typeof e&&(e={});var r,i,a,o=Object.keys(t);for(r=0;r<o.length;r++)a=t[i=o[r]],"_"!==i.charAt(0)&&"function"!=typeof a&&(n[i]="module"===i?a:Array.isArray(a)?"colorscale"===i?a.slice():a.slice(0,3):c.isTypedArray(a)?a.subarray(0,3):a&&"object"==typeof a?c.minExtend(t[i],e[i]):a);for(o=Object.keys(e),r=0;r<o.length;r++)"object"==typeof(a=e[i=o[r]])&&i in n&&"object"==typeof n[i]||(n[i]=a);return n},c.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},c.containsAny=function(t,e){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1},c.isIE=function(){return void 0!==window.navigator.msSaveBlob};var A=/MSIE [1-9]\./;c.isIE9orBelow=function(){return c.isIE()&&A.test(window.navigator.userAgent)};var C=/Version\/[\d\.]+.*Safari/;c.isSafari=function(){return C.test(window.navigator.userAgent)};var S=/iPad|iPhone|iPod/;c.isIOS=function(){return S.test(window.navigator.userAgent)},c.isD3Selection=function(t){return t&&"function"==typeof t.classed},c.ensureSingle=function(t,e,n,r){var i=t.select(e+(n?"."+n:""));if(i.size())return i;var a=t.append(e);return n&&a.classed(n,!0),r&&a.call(r),a},c.ensureSingleById=function(t,e,n,r){var i=t.select(e+"#"+n);if(i.size())return i;var a=t.append(e).attr("id",n);return r&&a.call(r),a},c.objectFromPath=function(t,e){for(var n,r=t.split("."),i=n={},a=0;a<r.length;a++){var o=r[a],s=null,l=r[a].match(/(.*)\[([0-9]+)\]/);l?(s=l[2],(n=n[o=l[1]]=[])[s]=a===r.length-1?e:{},n=n[s]):(n[o]=a===r.length-1?e:{},n=n[o])}return i};var D=/^([^\[\.]+)\.(.+)?/,O=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;c.expandObjectPaths=function(t){var e,n,r,i,a,o,s;if("object"==typeof t&&!Array.isArray(t))for(n in t)t.hasOwnProperty(n)&&((e=n.match(D))?(i=t[n],r=e[1],delete t[n],t[r]=c.extendDeepNoArrays(t[r]||{},c.objectFromPath(n,c.expandObjectPaths(i))[r])):(e=n.match(O))?(i=t[n],r=e[1],a=parseInt(e[2]),delete t[n],t[r]=t[r]||[],"."===e[3]?(s=e[4],o=t[r][a]=t[r][a]||{},c.extendDeepNoArrays(o,c.objectFromPath(s,c.expandObjectPaths(i)))):t[r][a]=c.expandObjectPaths(i)):t[n]=c.expandObjectPaths(t[n]));return t},c.numSeparate=function(t,e,n){if(n||(n=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var r=/(\d+)(\d{3})/,i=e.charAt(0),a=e.charAt(1),o=t.split("."),s=o[0],l=o.length>1?i+o[1]:"";if(a&&(o.length>1||s.length>4||n))for(;r.test(s);)s=s.replace(r,"$1"+a+"$2");return s+l},c.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var E=/^\w*$/;c.templateString=function(t,e){var n={};return t.replace(c.TEMPLATE_STRING_REGEX,function(t,r){var i;return E.test(r)?i=e[r]:(n[r]=n[r]||c.nestedProperty(e,r).get,i=n[r]()),c.isValidTextValue(i)?i:""})};var L={max:10,count:0,name:"hovertemplate"};c.hovertemplateString=function(){return R.apply(L,arguments)};var P={max:10,count:0,name:"texttemplate"};c.texttemplateString=function(){return R.apply(P,arguments)};var I=/^[:|\|]/;function R(t,e,n){var a=this,o=arguments;e||(e={});var s={};return t.replace(c.TEMPLATE_STRING_REGEX,function(t,l,u){var d,h,f,p;for(f=3;f<o.length;f++)if(d=o[f]){if(d.hasOwnProperty(l)){h=d[l];break}if(E.test(l)||(h=s[l]||c.nestedProperty(d,l).get())&&(s[l]=h),void 0!==h)break}if(void 0===h&&a)return a.count<a.max&&(c.warn("Variable '"+l+"' in "+a.name+" could not be found!"),h=t),a.count===a.max&&c.warn("Too many "+a.name+" warnings - additional warnings will be suppressed"),a.count++,t;if(u){if(":"===u[0]&&(h=(p=n?n.numberFormat:r.format)(u.replace(I,""))(h)),"|"===u[0]){p=n?n.timeFormat:i;var g=c.dateTime2ms(h);h=c.formatDate(g,u.replace(I,""),!1,p)}}else e.hasOwnProperty(l+"Label")&&(h=e[l+"Label"]);return h})}c.subplotSort=function(t,e){for(var n=Math.min(t.length,e.length)+1,r=0,i=0,a=0;a<n;a++){var o=t.charCodeAt(a)||0,s=e.charCodeAt(a)||0,l=o>=48&&o<=57,c=s>=48&&s<=57;if(l&&(r=10*r+o-48),c&&(i=10*i+s-48),!l||!c){if(r!==i)return r-i;if(o!==s)return o-s}}return i-r};var N=2e9;c.seedPseudoRandom=function(){N=2e9},c.pseudoRandom=function(){var t=N;return N=(69069*N+1)%4294967296,Math.abs(N-t)<429496729?c.pseudoRandom():N/4294967296},c.fillText=function(t,e,n){var r=Array.isArray(n)?function(t){n.push(t)}:function(t){n.text=t},i=c.extractOption(t,e,"htx","hovertext");if(c.isValidTextValue(i))return r(i);var a=c.extractOption(t,e,"tx","text");return c.isValidTextValue(a)?r(a):void 0},c.isValidTextValue=function(t){return t||0===t},c.formatPercent=function(t,e){e=e||0;for(var n=(Math.round(100*t*Math.pow(10,e))*Math.pow(.1,e)).toFixed(e)+"%",r=0;r<e;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},c.isHidden=function(t){var e=window.getComputedStyle(t).display;return!e||"none"===e},c.strTranslate=function(t,e){return t||e?"translate("+t+","+e+")":""},c.strRotate=function(t){return t?"rotate("+t+")":""},c.strScale=function(t){return 1!==t?"scale("+t+")":""},c.getTextTransform=function(t){var e=t.noCenter,n=t.textX,r=t.textY,i=t.rotate,a=t.scale;return a?a>1&&(a=1):a=0,c.strTranslate(t.targetX-a*(n+(t.anchorX||0)),t.targetY-a*(r+(t.anchorY||0)))+c.strScale(a)+(i?"rotate("+i+(e?"":" "+n+" "+r)+")":"")},c.ensureUniformFontSize=function(t,e){var n=c.extendFlat({},e);return n.size=Math.max(e.size,t._fullLayout.uniformtext.minsize||0),n},c.join2=function(t,e,n){var r=t.length;return r>1?t.slice(0,-1).join(e)+n+t[r-1]:t.join(e)}},{"../constants/numerical":181,"./anchor_utils":186,"./angles":187,"./array":188,"./clean_number":189,"./clear_responsive":191,"./coerce":192,"./dates":193,"./dom":194,"./extend":196,"./filter_unique":197,"./filter_visible":198,"./geometry2d":199,"./identity":200,"./increment":201,"./is_plain_object":203,"./keyed_container":204,"./localize":205,"./loggers":206,"./make_trace_groups":207,"./matrix":208,"./mod":209,"./nested_property":210,"./noop":211,"./notifier":212,"./preserve_drawing_buffer":215,"./push_unique":216,"./regex":218,"./relative_attr":219,"./relink_private":220,"./search":221,"./stats":223,"./throttle":225,"./to_log_range":226,d3:9,"d3-time-format":7,"fast-isnumeric":11}],203:[function(t,e,n){"use strict";e.exports=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t)===Object.prototype}},{}],204:[function(t,e,n){"use strict";var r=t("./nested_property"),i=/^\w*$/;e.exports=function(t,e,n,a){var o,s,l;n=n||"name",a=a||"value";var c={};e&&e.length?(l=r(t,e),s=l.get()):s=t,e=e||"";var u={};if(s)for(o=0;o<s.length;o++)u[s[o][n]]=o;var d=i.test(a),h={set:function(t,e){var i=null===e?4:0;if(!s){if(!l||4===i)return;l.set(s=[])}var o=u[t];if(void 0===o){if(4===i)return;i|=3,u[t]=o=s.length}else e!==(d?s[o][a]:r(s[o],a).get())&&(i|=2);var f=s[o]=s[o]||{};return f[n]=t,d?f[a]=e:r(f,a).set(e),null!==e&&(i&=-5),c[o]=c[o]|i,h},get:function(t){if(s){var e=u[t];return void 0===e?void 0:d?s[e][a]:r(s[e],a).get()}},rename:function(t,e){var r=u[t];return void 0===r||(c[r]=1|c[r],u[e]=r,delete u[t],s[r][n]=e),h},remove:function(t){var e=u[t];if(void 0===e)return h;var i=s[e];if(Object.keys(i).length>2)return c[e]=2|c[e],h.set(t,null);if(d){for(o=e;o<s.length;o++)c[o]=3|c[o];for(o=e;o<s.length;o++)u[s[o][n]]--;s.splice(e,1),delete u[t]}else r(i,a).set(null),c[e]=6|c[e];return h},constructUpdate:function(){for(var t,i,o={},l=Object.keys(c),u=0;u<l.length;u++)t=e+"["+(i=l[u])+"]",s[i]?(1&c[i]&&(o[t+"."+n]=s[i][n]),2&c[i]&&(o[t+"."+a]=d?4&c[i]?null:s[i][a]:4&c[i]?null:r(s[i],a).get())):o[t]=null;return o}};return h}},{"./nested_property":210}],205:[function(t,e,n){"use strict";var r=t("../registry");e.exports=function(t,e){for(var n=t._context.locale,i=0;i<2;i++){for(var a=t._context.locales,o=0;o<2;o++){var s=(a[n]||{}).dictionary;if(s){var l=s[e];if(l)return l}a=r.localeRegistry}var c=n.split("-")[0];if(c===n)break;n=c}return e}},{"../registry":290}],206:[function(t,e,n){"use strict";var r=t("../plot_api/plot_config").dfltConfig,i=t("./notifier"),a=e.exports={};function o(t,e){if(t&&t.apply)try{return void t.apply(console,e)}catch(t){}for(var n=0;n<e.length;n++)try{t(e[n])}catch(t){console.log(e[n])}}a.log=function(){var t;if(r.logging>1){var e=["LOG:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.trace||console.log,e)}if(r.notifyOnLogging>1){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"long")}},a.warn=function(){var t;if(r.logging>0){var e=["WARN:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.trace||console.log,e)}if(r.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"stick")}},a.error=function(){var t;if(r.logging>0){var e=["ERROR:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.error,e)}if(r.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);i(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":235,"./notifier":212}],207:[function(t,e,n){"use strict";var r=t("d3");e.exports=function(t,e,n){var i=t.selectAll("g."+n.replace(/\s/g,".")).data(e,function(t){return t[0].trace.uid});i.exit().remove(),i.enter().append("g").attr("class",n),i.order();var a=t.classed("rangeplot")?"nodeRangePlot3":"node3";return i.each(function(t){t[0][a]=r.select(this)}),i}},{d3:9}],208:[function(t,e,n){"use strict";var r=t("gl-mat4");n.init2dArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=new Array(e);return n},n.transposeRagged=function(t){var e,n,r=0,i=t.length;for(e=0;e<i;e++)r=Math.max(r,t[e].length);var a=new Array(r);for(e=0;e<r;e++)for(a[e]=new Array(i),n=0;n<i;n++)a[e][n]=t[n][e];return a},n.dot=function(t,e){if(!t.length||!e.length||t.length!==e.length)return null;var r,i,a=t.length;if(t[0].length)for(r=new Array(a),i=0;i<a;i++)r[i]=n.dot(t[i],e);else if(e[0].length){var o=n.transposeRagged(e);for(r=new Array(o.length),i=0;i<o.length;i++)r[i]=n.dot(t,o[i])}else for(r=0,i=0;i<a;i++)r+=t[i]*e[i];return r},n.translationMatrix=function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},n.rotationMatrix=function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},n.rotationXYMatrix=function(t,e,r){return n.dot(n.dot(n.translationMatrix(e,r),n.rotationMatrix(t)),n.translationMatrix(-e,-r))},n.apply3DTransform=function(t){return function(){var e=arguments,r=1===arguments.length?e[0]:[e[0],e[1],e[2]||0];return n.dot(t,[r[0],r[1],r[2],1]).slice(0,3)}},n.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);var r=1===arguments.length?e[0]:[e[0],e[1]];return n.dot(t,[r[0],r[1],1]).slice(0,2)}},n.apply2DTransform2=function(t){var e=n.apply2DTransform(t);return function(t){return e(t.slice(0,2)).concat(e(t.slice(2,4)))}},n.convertCssMatrix=function(t){if(t){var e=t.length;if(16===e)return t;if(6===e)return[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},n.inverseTransformMatrix=function(t){var e=[];return r.invert(e,t),[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}},{"gl-mat4":27}],209:[function(t,e,n){"use strict";e.exports={mod:function(t,e){var n=t%e;return n<0?n+e:n},modHalf:function(t,e){return Math.abs(t)>e/2?t-Math.round(t/e)*e:t}}},{}],210:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./array").isArrayOrTypedArray;function a(t,e){return function(){var n,r,o,s,l,c=t;for(s=0;s<e.length-1;s++){if(-1===(n=e[s])){for(r=!0,o=[],l=0;l<c.length;l++)o[l]=a(c[l],e.slice(s+1))(),o[l]!==o[0]&&(r=!1);return r?o[0]:o}if("number"==typeof n&&!i(c))return;if("object"!=typeof(c=c[n])||null===c)return}if("object"==typeof c&&null!==c&&null!==(o=c[e[s]]))return o}}e.exports=function(t,e){if(r(e))e=String(e);else if("string"!=typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";for(var n,i,o,s=0,c=e.split(".");s<c.length;){if(n=String(c[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])c[s]=n[1];else{if(0!==s)throw"bad property string";c.splice(0,1)}for(i=n[2].substr(1,n[2].length-2).split("]["),o=0;o<i.length;o++)s++,c.splice(s,0,Number(i[o]))}s++}return"object"!=typeof t?function(t,e,n){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:n,obj:t}}(t,e,c):{set:l(t,c,e),get:a(t,c),astr:e,parts:c,obj:t}};var o=/(^|\.)args\[/;function s(t,e){return void 0===t||null===t&&!e.match(o)}function l(t,e,n){return function(r){var a,o,l=t,h="",f=[[t,h]],p=s(r,n);for(o=0;o<e.length-1;o++){if("number"==typeof(a=e[o])&&!i(l))throw"array index but container is not an array";if(-1===a){if(p=!u(l,e.slice(o+1),r,n))break;return}if(!d(l,a,e[o+1],p))break;if("object"!=typeof(l=l[a])||null===l)throw"container is not an object";h=c(h,a),f.push([l,h])}if(p){if(o===e.length-1&&(delete l[e[o]],Array.isArray(l)&&+e[o]==l.length-1))for(;l.length&&void 0===l[l.length-1];)l.pop()}else l[e[o]]=r}}function c(t,e){var n=e;return r(e)?n="["+e+"]":t&&(n="."+e),t+n}function u(t,e,n,r){var a,o=i(n),c=!0,u=n,h=r.replace("-1",0),f=!o&&s(n,h),p=e[0];for(a=0;a<t.length;a++)h=r.replace("-1",a),o&&(f=s(u=n[a%n.length],h)),f&&(c=!1),d(t,a,p,f)&&l(t[a],e,r.replace("-1",a))(u);return c}function d(t,e,n,r){if(void 0===t[e]){if(r)return!1;t[e]="number"==typeof n?[]:{}}return!0}},{"./array":188,"fast-isnumeric":11}],211:[function(t,e,n){"use strict";e.exports=function(){}},{}],212:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=[];e.exports=function(t,e){if(-1===a.indexOf(t)){a.push(t);var n=1e3;i(e)?n=e:"long"===e&&(n=3e3);var o=r.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0),o.selectAll(".notifier-note").data(a).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var i=r.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){i.transition().call(s)});for(var a=i.append("p"),o=t.split(/<br\s*\/?>/g),l=0;l<o.length;l++)l&&a.append("br"),a.append("span").text(o[l]);"stick"===e?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(n).call(s)})}function s(t){t.duration(700).style("opacity",0).each("end",function(t){var e=a.indexOf(t);-1!==e&&a.splice(e,1),r.select(this).remove()})}}},{d3:9,"fast-isnumeric":11}],213:[function(t,e,n){"use strict";var r=t("./setcursor"),i="data-savedcursor";e.exports=function(t,e){var n=t.attr(i);if(e){if(!n){for(var a=(t.attr("class")||"").split(" "),o=0;o<a.length;o++){var s=a[o];0===s.indexOf("cursor-")&&t.attr(i,s.substr(7)).classed(s,!1)}t.attr(i)||t.attr(i,"!!")}r(t,e)}else n&&(t.attr(i,null),"!!"===n?r(t):r(t,n))}},{"./setcursor":222}],214:[function(t,e,n){"use strict";var r=t("./matrix").dot,i=t("../constants/numerical").BADNUM,a=e.exports={};a.tester=function(t){var e,n=t.slice(),r=n[0][0],a=r,o=n[0][1],s=o;for(n.push(n[0]),e=1;e<n.length;e++)r=Math.min(r,n[e][0]),a=Math.max(a,n[e][0]),o=Math.min(o,n[e][1]),s=Math.max(s,n[e][1]);var l,c=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(c=!0,l=function(t){return t[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(c=!0,l=function(t){return t[1]===n[0][1]}));var u=!0,d=n[0];for(e=1;e<n.length;e++)if(d[0]!==n[e][0]||d[1]!==n[e][1]){u=!1;break}return{xmin:r,xmax:a,ymin:o,ymax:s,pts:n,contains:c?function(t,e){var n=t[0],c=t[1];return!(n===i||n<r||n>a||c===i||c<o||c>s||e&&l(t))}:function(t,e){var l=t[0],c=t[1];if(l===i||l<r||l>a||c===i||c<o||c>s)return!1;var u,d,h,f,p,g=n.length,m=n[0][0],v=n[0][1],y=0;for(u=1;u<g;u++)if(d=m,h=v,m=n[u][0],v=n[u][1],!(l<(f=Math.min(d,m))||l>Math.max(d,m)||c>Math.max(h,v)))if(c<Math.min(h,v))l!==f&&y++;else{if(c===(p=m===d?c:h+(l-d)*(v-h)/(m-d)))return 1!==u||!e;c<=p&&l!==f&&y++}return y%2==1},isRect:c,degenerate:u}},a.isSegmentBent=function(t,e,n,i){var a,o,s,l=t[e],c=[t[n][0]-l[0],t[n][1]-l[1]],u=r(c,c),d=Math.sqrt(u),h=[-c[1]/d,c[0]/d];for(a=e+1;a<n;a++)if((s=r(o=[t[a][0]-l[0],t[a][1]-l[1]],c))<0||s>u||Math.abs(r(o,h))>i)return!0;return!1},a.filter=function(t,e){var n=[t[0]],r=0,i=0;function o(o){t.push(o);var s=n.length,l=r;n.splice(i+1);for(var c=l+1;c<t.length;c++)(c===t.length-1||a.isSegmentBent(t,l,c+1,e))&&(n.push(t[c]),n.length<s-2&&(r=c,i=n.length-1),l=c)}return t.length>1&&o(t.pop()),{addPt:o,raw:t,filtered:n}}},{"../constants/numerical":181,"./matrix":208}],215:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("is-mobile");e.exports=function(t){var e;if("string"!=typeof(e=t&&t.hasOwnProperty("userAgent")?t.userAgent:function(){var t;return"undefined"!=typeof navigator&&(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),t}()))return!0;var n=i({ua:{headers:{"user-agent":e}},tablet:!0,featureDetect:!1});if(!n)for(var a=e.split(" "),o=1;o<a.length;o++)if(-1!==a[o].indexOf("Safari"))for(var s=o-1;s>-1;s--){var l=a[s];if("Version/"===l.substr(0,8)){var c=l.substr(8).split(".")[0];if(r(c)&&(c=+c),c>=13)return!0}}return n}},{"fast-isnumeric":11,"is-mobile":45}],216:[function(t,e,n){"use strict";e.exports=function(t,e){if(e instanceof RegExp){for(var n=e.toString(),r=0;r<t.length;r++)if(t[r]instanceof RegExp&&t[r].toString()===n)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t}},{}],217:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plot_api/plot_config").dfltConfig,a={add:function(t,e,n,r,a){var o,s;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},s=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(t.undoQueue.queue.splice(s,t.undoQueue.queue.length-s,o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),t.undoQueue.index+=1):o=t.undoQueue.queue[s-1],t.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(e),o.undo.args.unshift(n),o.redo.calls.push(r),o.redo.args.push(a)),t.undoQueue.queue.length>i.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)a.plotDo(t,e.undo.calls[n],e.undo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,n;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)a.plotDo(t,e.redo.calls[n],e.redo.args[n]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}},plotDo:function(t,e,n){t.autoplay=!0,n=function(t,e){for(var n,i=[],a=0;a<e.length;a++)i[a]=(n=e[a])===t?n:"object"==typeof n?Array.isArray(n)?r.extendDeep([],n):r.extendDeepAll({},n):n;return i}(t,n),e.apply(null,n)}};e.exports=a},{"../lib":202,"../plot_api/plot_config":235}],218:[function(t,e,n){"use strict";n.counter=function(t,e,n,r){var i=(e||"")+(n?"":"$"),a=!1===r?"":"^";return"xy"===t?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+i):new RegExp(a+t+"([2-9]|[1-9][0-9]+)?"+i)}},{}],219:[function(t,e,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;e.exports=function(t,e){for(;e;){var n=t.match(r);if(n)t=n[1];else{if(!t.match(i))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e}},{}],220:[function(t,e,n){"use strict";var r=t("./array").isArrayOrTypedArray,i=t("./is_plain_object");e.exports=function t(e,n){for(var a in n){var o=n[a],s=e[a];if(s!==o)if("_"===a.charAt(0)||"function"==typeof o){if(a in e)continue;e[a]=o}else if(r(o)&&r(s)&&i(o[0])){if("customdata"===a||"ids"===a)continue;for(var l=Math.min(o.length,s.length),c=0;c<l;c++)s[c]!==o[c]&&i(o[c])&&i(s[c])&&t(s[c],o[c])}else i(o)&&i(s)&&(t(s,o),Object.keys(s).length||delete e[a])}}},{"./array":188,"./is_plain_object":203}],221:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./loggers"),a=t("./identity"),o=t("../constants/numerical").BADNUM;function s(t,e){return t<e}function l(t,e){return t<=e}function c(t,e){return t>e}function u(t,e){return t>=e}n.findBin=function(t,e,n){if(r(e.start))return n?Math.ceil((t-e.start)/e.size-1e-9)-1:Math.floor((t-e.start)/e.size+1e-9);var a,o,d=0,h=e.length,f=0,p=h>1?(e[h-1]-e[0])/(h-1):1;for(o=p>=0?n?s:l:n?u:c,t+=1e-9*p*(n?-1:1)*(p>=0?1:-1);d<h&&f++<100;)o(e[a=Math.floor((d+h)/2)],t)?d=a+1:h=a;return f>90&&i.log("Long binary search..."),d-1},n.sorterAsc=function(t,e){return t-e},n.sorterDes=function(t,e){return e-t},n.distinctVals=function(t,e){var r,i=(e||{}).unitMinDiff,a=t.slice();for(a.sort(n.sorterAsc),r=a.length-1;r>-1&&a[r]===o;r--);var s=1;i||(s=a[r]-a[0]||1);for(var l,c=s/(r||1)/1e4,u=[],d=0;d<=r;d++){var h=a[d],f=h-l;void 0===l?(u.push(h),l=h):f>c&&(s=Math.min(s,f),u.push(h),l=h)}return{vals:u,minDiff:s}},n.roundUp=function(t,e,n){for(var r,i=0,a=e.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;i<a&&o++<100;)e[r=c((i+a)/2)]<=t?i=r+s:a=r-l;return e[i]},n.sort=function(t,e){for(var n=0,r=0,i=1;i<t.length;i++){var a=e(t[i],t[i-1]);if(a<0?n=1:a>0&&(r=1),n&&r)return t.sort(e)}return r?t:t.reverse()},n.findIndexOfMin=function(t,e){e=e||a;for(var n,r=1/0,i=0;i<t.length;i++){var o=e(t[i]);o<r&&(r=o,n=i)}return n}},{"../constants/numerical":181,"./identity":200,"./loggers":206,"fast-isnumeric":11}],222:[function(t,e,n){"use strict";e.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],223:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./array").isArrayOrTypedArray;n.aggNums=function(t,e,a,o){var s,l;if((!o||o>a.length)&&(o=a.length),r(e)||(e=!1),i(a[0])){for(l=new Array(o),s=0;s<o;s++)l[s]=n.aggNums(t,e,a[s]);a=l}for(s=0;s<o;s++)r(e)?r(a[s])&&(e=t(+e,+a[s])):e=a[s];return e},n.len=function(t){return n.aggNums(function(t){return t+1},0,t)},n.mean=function(t,e){return e||(e=n.len(t)),n.aggNums(function(t,e){return t+e},0,t)/e},n.midRange=function(t){if(void 0!==t&&0!==t.length)return(n.aggNums(Math.max,null,t)+n.aggNums(Math.min,null,t))/2},n.variance=function(t,e,i){return e||(e=n.len(t)),r(i)||(i=n.mean(t,e)),n.aggNums(function(t,e){return t+Math.pow(e-i,2)},0,t)/e},n.stdev=function(t,e,r){return Math.sqrt(n.variance(t,e,r))},n.median=function(t){var e=t.slice().sort();return n.interp(e,.5)},n.interp=function(t,e){if(!r(e))throw"n should be a finite number";if((e=e*t.length-.5)<0)return t[0];if(e>t.length-1)return t[t.length-1];var n=e%1;return n*t[Math.ceil(e)]+(1-n)*t[Math.floor(e)]}},{"./array":188,"fast-isnumeric":11}],224:[function(t,e,n){"use strict";var r=t("d3"),i=t("../lib"),a=i.strTranslate,o=t("../constants/xmlns_namespaces"),s=t("../constants/alignment").LINE_SPACING;function l(t,e){return t.node().getBoundingClientRect()[e]}var c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(t,e,A){var C=t.text(),D=!t.attr("data-notex")&&"undefined"!=typeof MathJax&&C.match(c),O=r.select(t.node().parentNode);if(!O.empty()){var E=t.attr("class")?t.attr("class").split(" ")[0]:"text";return O.selectAll("svg."+(E+="-math")).remove(),O.selectAll("g."+E+"-group").remove(),t.style("display",null).attr({"data-unformatted":C,"data-math":"N"}),D?(e&&e._promises||[]).push(new Promise(function(e){t.style("display","none");var n=parseInt(t.node().style.fontSize,10);!function(t,e,n){var a,o,s,l;MathJax.Hub.Queue(function(){return o=i.extendDeepAll({},MathJax.Hub.config),s=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var n="math-output-"+i.randstr({},64);return l=r.select("body").append("div").attr({id:n}).style({visibility:"hidden",position:"absolute"}).style({"font-size":e.fontSize+"px"}).text(t.replace(u,"\\lt ").replace(d,"\\gt ")),MathJax.Hub.Typeset(l.node())},function(){var e=r.select("body").select("#MathJax_SVG_glyphs");if(l.select(".MathJax_SVG").empty()||!l.select("svg").node())i.log("There was an error in the tex syntax.",t),n();else{var o=l.select("svg").node().getBoundingClientRect();n(l.select(".MathJax_SVG"),e,o)}if(l.remove(),"SVG"!==a)return MathJax.Hub.setRenderer(a)},function(){return void 0!==s&&(MathJax.Hub.processSectionDelay=s),MathJax.Hub.Config(o)})}(D[2],{fontSize:n},function(r,i,o){O.selectAll("svg."+E).remove(),O.selectAll("g."+E+"-group").remove();var s=r&&r.select("svg");if(!s||!s.node())return L(),void e();var c=O.append("g").classed(E+"-group",!0).attr({"pointer-events":"none","data-unformatted":C,"data-math":"Y"});c.node().appendChild(s.node()),i&&i.node()&&s.node().insertBefore(i.node().cloneNode(!0),s.node().firstChild),s.attr({class:E,height:o.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var u=t.node().style.fill||"black",d=s.select("g");d.attr({fill:u,stroke:u});var h=l(d,"width"),f=l(d,"height"),p=+t.attr("x")-h*{start:0,middle:.5,end:1}[t.attr("text-anchor")||"start"],g=-(n||l(t,"height"))/4;"y"===E[0]?(c.attr({transform:"rotate("+[-90,+t.attr("x"),+t.attr("y")]+")"+a(-h/2,g-f/2)}),s.attr({x:+t.attr("x"),y:+t.attr("y")})):"l"===E[0]?s.attr({x:t.attr("x"),y:g-f/2}):"a"===E[0]&&0!==E.indexOf("atitle")?s.attr({x:0,y:g}):s.attr({x:p,y:+t.attr("y")+g-f/2}),A&&A.call(t,c),e(c)})})):L(),t}function L(){O.empty()||(E=t.attr("class")+"-math",O.select("svg."+E).remove()),t.text("").style("white-space","pre"),function(t,e){e=e.replace(m," ");var n,a=!1,l=[],c=-1;function u(){c++;var e=document.createElementNS(o.svg,"tspan");r.select(e).attr({class:"line",dy:c*s+"em"}),t.appendChild(e),n=e;var i=l;if(l=[{node:e}],i.length>1)for(var a=1;a<i.length;a++)d(i[a])}function d(t){var e,i=t.type,a={};if("a"===i){e="a";var s=t.target,c=t.href,u=t.popup;c&&(a={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":c},u&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else e="tspan";t.style&&(a.style=t.style);var d=document.createElementNS(o.svg,e);if("sup"===i||"sub"===i){A(n,"\u200b"),n.appendChild(d);var h=document.createElementNS(o.svg,"tspan");A(h,"\u200b"),r.select(h).attr("dy",p[i]),a.dy=f[i],n.appendChild(d),n.appendChild(h)}else n.appendChild(d);r.select(d).attr(a),n=t.node=d,l.push(t)}function A(t,e){t.appendChild(document.createTextNode(e))}function C(t){if(1!==l.length){var r=l.pop();t!==r.type&&i.log("Start tag <"+r.type+"> doesnt match end tag <"+t+">. Pretending it did match.",e),n=l[l.length-1].node}else i.log("Ignoring unexpected end tag </"+t+">.",e)}b.test(e)?u():(n=t,l=[{node:t}]);for(var D=e.split(v),O=0;O<D.length;O++){var E=D[O],L=E.match(y),P=L&&L[2].toLowerCase(),I=h[P];if("br"===P)u();else if(void 0===I)A(n,S(E));else if(L[1])C(P);else{var R=L[4],N={type:P},F=T(R,x);if(F?(F=F.replace(M,"$1 fill:"),I&&(F+=";"+I)):I&&(F=I),F&&(N.style=F),"a"===P){a=!0;var z=T(R,_);if(z){var V=document.createElement("a");V.href=z,-1!==g.indexOf(V.protocol)&&(N.href=encodeURI(decodeURI(z)),N.target=T(R,w)||"_blank",N.popup=T(R,k))}}d(N)}}return a}(t.node(),C)&&t.style("pointer-events","all"),n.positionText(t),A&&A.call(t)}};var u=/(<|&lt;|&#60;)/g,d=/(>|&gt;|&#62;)/g,h={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},f={sub:"0.3em",sup:"-0.6em"},p={sub:"-0.21em",sup:"0.42em"},g=["http:","https:","mailto:","",void 0,":"],m=n.NEWLINES=/(\r\n?|\n)/g,v=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,b=/<br(\s+.*)?>/i;n.BR_TAG_ALL=/<br(\s+.*)?>/gi;var x=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,_=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,w=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,k=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function T(t,e){if(!t)return null;var n=t.match(e),r=n&&(n[3]||n[4]);return r&&S(r)}var M=/(^|;)\s*color:/;n.plainText=function(t,e){for(var n=void 0!==(e=e||{}).len&&-1!==e.len?e.len:1/0,r=void 0!==e.allowedTags?e.allowedTags:["br"],i="...".length,a=t.split(v),o=[],s="",l=0,c=0;c<a.length;c++){var u=a[c],d=u.match(y),h=d&&d[2].toLowerCase();if(h)-1!==r.indexOf(h)&&(o.push(u),s=h);else{var f=u.length;if(l+f<n)o.push(u),l+=f;else if(l<n){var p=n-l;s&&("br"!==s||p<=i||f<=i)&&o.pop(),o.push(n>i?u.substr(0,p-i)+"...":u.substr(0,p));break}s=""}}return o.join("")};var A={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function S(t){return t.replace(C,function(t,e){return("#"===e.charAt(0)?function(t){if(!(t>1114111)){var e=String.fromCodePoint;if(e)return e(t);var n=String.fromCharCode;return t<=65535?n(t):n(55232+(t>>10),t%1024+56320)}}("x"===e.charAt(1)?parseInt(e.substr(2),16):parseInt(e.substr(1),10)):A[e])||t})}function D(t,e,n){var r,a,o,s=n.horizontalAlign,l=n.verticalAlign||"top",c=t.node().getBoundingClientRect(),u=e.node().getBoundingClientRect();return a="bottom"===l?function(){return c.bottom-r.height}:"middle"===l?function(){return c.top+(c.height-r.height)/2}:function(){return c.top},o="right"===s?function(){return c.right-r.width}:"center"===s?function(){return c.left+(c.width-r.width)/2}:function(){return c.left},function(){r=this.node().getBoundingClientRect();var t=o()-u.left,e=a()-u.top,s=n.gd||{};if(n.gd){s._fullLayout._calcInverseTransform(s);var l=i.apply3DTransform(s._fullLayout._invTransform)(t,e);t=l[0],e=l[1]}return this.style({top:e+"px",left:t+"px","z-index":1e3}),this}}n.convertEntities=S,n.sanitizeHTML=function(t){t=t.replace(m," ");for(var e=document.createElement("p"),n=e,i=[],a=t.split(v),o=0;o<a.length;o++){var s=a[o],l=s.match(y),c=l&&l[2].toLowerCase();if(c in h)if(l[1])i.length&&(n=i.pop());else{var u=l[4],d=T(u,x),f=d?{style:d}:{};if("a"===c){var p=T(u,_);if(p){var b=document.createElement("a");if(b.href=p,-1!==g.indexOf(b.protocol)){f.href=encodeURI(decodeURI(p));var k=T(u,w);k&&(f.target=k)}}}var M=document.createElement(c);n.appendChild(M),r.select(M).attr(f),n=M,i.push(M)}else n.appendChild(document.createTextNode(S(s)))}return e.innerHTML},n.lineCount=function(t){return t.selectAll("tspan.line").size()||1},n.positionText=function(t,e,n){return t.each(function(){var t=r.select(this);function i(e,n){return void 0===n?null===(n=t.attr(e))&&(t.attr(e,0),n=0):t.attr(e,n),n}var a=i("x",e),o=i("y",n);"text"===this.nodeName&&t.selectAll("tspan.line").attr({x:a,y:o})})},n.makeEditable=function(t,e){var n=e.gd,i=e.delegate,a=r.dispatch("edit","input","cancel"),o=i||t;if(t.style({"pointer-events":i?"none":"all"}),1!==t.size())throw new Error("boo");function s(){!function(){var i=r.select(n).select(".svg-container"),o=i.append("div"),s=t.node().style,c=parseFloat(s.fontSize||12),u=e.text;void 0===u&&(u=t.attr("data-unformatted")),o.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":c,color:e.fill||s.fill||"black",opacity:1,"background-color":e.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(u).call(D(t,i,e)).on("blur",function(){n._editing=!1,t.text(this.textContent).style({opacity:1});var e,i=r.select(this).attr("class");(e=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(t.node().parentNode).select(e).style({opacity:0});var o=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),a.edit.call(t,o)}).on("focus",function(){var t=this;n._editing=!0,r.select(document).on("mouseup",function(){if(r.event.target===t)return!1;document.activeElement===o.node()&&o.node().blur()})}).on("keyup",function(){27===r.event.which?(n._editing=!1,t.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),a.cancel.call(t,this.textContent)):(a.input.call(t,this.textContent),r.select(this).call(D(t,i,e)))}).on("keydown",function(){13===r.event.which&&this.blur()}).call(l)}(),t.style({opacity:0});var i,s=o.attr("class");(i=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&r.select(t.node().parentNode).select(i).style({opacity:0})}function l(t){var e=t.node(),n=document.createRange();n.selectNodeContents(e);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),e.focus()}return e.immediate?s():o.on("click",s),r.rebind(t,a,"on")}},{"../constants/alignment":177,"../constants/xmlns_namespaces":182,"../lib":202,d3:9}],225:[function(t,e,n){"use strict";var r={};function i(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}n.throttle=function(t,e,n){var a=r[t],o=Date.now();if(!a){for(var s in r)r[s].ts<o-6e4&&delete r[s];a=r[t]={ts:0,timer:null}}function l(){n(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}i(a),o>a.ts+e?l():a.timer=setTimeout(function(){l(),a.timer=null},e)},n.done=function(t){var e=r[t];return e&&e.timer?new Promise(function(t){var n=e.onDone;e.onDone=function(){n&&n(),t(),e.onDone=null}}):Promise.resolve()},n.clear=function(t){if(t)i(r[t]),delete r[t];else for(var e in r)n.clear(e)}},{}],226:[function(t,e,n){"use strict";var r=t("fast-isnumeric");e.exports=function(t,e){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(e[0],e[1]))/Math.LN10;return r(n)||(n=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),n}},{"fast-isnumeric":11}],227:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],228:[function(t,e,n){"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],229:[function(t,e,n){"use strict";var r=t("../registry");e.exports=function(t){for(var e,n,i=r.layoutArrayContainers,a=r.layoutArrayRegexes,o=t.split("[")[0],s=0;s<a.length;s++)if((n=t.match(a[s]))&&0===n.index){e=n[0];break}if(e||(e=i[i.indexOf(o)]),!e)return!1;var l=t.substr(e.length);return l?!!(n=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(n[1]),property:n[3]||""}:{array:e,index:"",property:""}}},{"../registry":290}],230:[function(t,e,n){"use strict";var r=t("../lib"),i=r.extendFlat,a=r.isPlainObject,o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},s={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},l=o.flags.slice().concat(["fullReplot"]),c=s.flags.slice().concat("layoutReplot");function u(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!1;return e}function d(t,e,n){var r=i({},t);for(var o in r){var s=r[o];a(s)&&(r[o]=h(s,e,0,o))}return"from-root"===n&&(r.editType=e),r}function h(t,e,n,r){if(t.valType){var a=i({},t);if(a.editType=e,Array.isArray(t.items)){a.items=new Array(t.items.length);for(var o=0;o<t.items.length;o++)a.items[o]=h(t.items[o],e)}return a}return d(t,e,"_"===r.charAt(0)?"nested":"from-root")}e.exports={traces:o,layout:s,traceFlags:function(){return u(l)},layoutFlags:function(){return u(c)},update:function(t,e){var n=e.editType;if(n&&"none"!==n)for(var r=n.split("+"),i=0;i<r.length;i++)t[r[i]]=!0},overrideAll:d}},{"../lib":202}],231:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("gl-mat4/fromQuat"),a=t("../registry"),o=t("../lib"),s=t("../plots/plots"),l=t("../plots/cartesian/axis_ids"),c=t("../components/color"),u=l.cleanId,d=l.getFromTrace,h=a.traceIs;function f(t,e){var n=t[e],r=e.charAt(0);n&&"paper"!==n&&(t[e]=u(n,r,!0))}function p(t){function e(e,n){t[e]&&(!t.title||!t.title[n])&&(t.title||(t.title={}),t.title[n]=t[e],delete t[e])}t&&("string"!=typeof t.title&&"number"!=typeof t.title||(t.title={text:t.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function g(t){if(!o.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"==typeof e||"number"==typeof e)&&String(e)}function m(t,e,n,r){if(n&&!r)return t;if(r&&!n)return e;if(!t.trim())return e;if(!e.trim())return t;var i,a=Math.min(t.length,e.length);for(i=0;i<a&&t.charAt(i)===e.charAt(i);i++);return t.substr(0,i).trim()}function v(t){var e="middle",n="center";return"string"==typeof t&&(-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?n="left":-1!==t.indexOf("right")&&(n="right")),e+" "+n}function y(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}n.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&o.log("Clearing previous rejected promises from queue."),t._promises=[]},n.cleanLayout=function(t){var e,r;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var a=(s.subplotsRegistry.cartesian||{}).attrRegex,l=(s.subplotsRegistry.polar||{}).attrRegex,d=(s.subplotsRegistry.ternary||{}).attrRegex,h=(s.subplotsRegistry.gl3d||{}).attrRegex,g=Object.keys(t);for(e=0;e<g.length;e++){var m=g[e];if(a&&a.test(m)){var v=t[m];v.anchor&&"free"!==v.anchor&&(v.anchor=u(v.anchor)),v.overlaying&&(v.overlaying=u(v.overlaying)),v.type||(v.isdate?v.type="date":v.islog?v.type="log":!1===v.isdate&&!1===v.islog&&(v.type="linear")),"withzero"!==v.autorange&&"tozero"!==v.autorange||(v.autorange=!0,v.rangemode="tozero"),delete v.islog,delete v.isdate,delete v.categories,y(v,"domain")&&delete v.domain,void 0!==v.autotick&&(void 0===v.tickmode&&(v.tickmode=v.autotick?"auto":"linear"),delete v.autotick),p(v)}else if(l&&l.test(m))p(t[m].radialaxis);else if(d&&d.test(m)){var b=t[m];p(b.aaxis),p(b.baxis),p(b.caxis)}else if(h&&h.test(m)){var x=t[m],_=x.cameraposition;if(Array.isArray(_)&&4===_[0].length){var w=_[1],k=_[2],T=i([],_[0]),M=[];for(r=0;r<3;++r)M[r]=w[r]+k*T[2+4*r];x.camera={eye:{x:M[0],y:M[1],z:M[2]},center:{x:w[0],y:w[1],z:w[2]},up:{x:0,y:0,z:1}},delete x.cameraposition}p(x.xaxis),p(x.yaxis),p(x.zaxis)}}var A=Array.isArray(t.annotations)?t.annotations.length:0;for(e=0;e<A;e++){var C=t.annotations[e];o.isPlainObject(C)&&(C.ref&&("paper"===C.ref?(C.xref="paper",C.yref="paper"):"data"===C.ref&&(C.xref="x",C.yref="y"),delete C.ref),f(C,"xref"),f(C,"yref"))}var S=Array.isArray(t.shapes)?t.shapes.length:0;for(e=0;e<S;e++){var D=t.shapes[e];o.isPlainObject(D)&&(f(D,"xref"),f(D,"yref"))}var O=Array.isArray(t.images)?t.images.length:0;for(e=0;e<O;e++){var E=t.images[e];o.isPlainObject(E)&&(f(E,"xref"),f(E,"yref"))}var L=t.legend;return L&&(L.x>3?(L.x=1.02,L.xanchor="left"):L.x<-2&&(L.x=-.02,L.xanchor="right"),L.y>3?(L.y=1.02,L.yanchor="bottom"):L.y<-2&&(L.y=-.02,L.yanchor="top")),p(t),"rotate"===t.dragmode&&(t.dragmode="orbit"),c.clean(t),t.template&&t.template.layout&&n.cleanLayout(t.template.layout),t},n.cleanData=function(t){for(var e=0;e<t.length;e++){var r,i=t[e];if("histogramy"===i.type&&"xbins"in i&&!("ybins"in i)&&(i.ybins=i.xbins,delete i.xbins),i.error_y&&"opacity"in i.error_y){var l=c.defaults,d=i.error_y.color||(h(i,"bar")?c.defaultLine:l[e%l.length]);i.error_y.color=c.addOpacity(c.rgb(d),c.opacity(d)*i.error_y.opacity),delete i.error_y.opacity}if("bardir"in i&&("h"!==i.bardir||!h(i,"bar")&&"histogram"!==i.type.substr(0,9)||(i.orientation="h",n.swapXYData(i)),delete i.bardir),"histogramy"===i.type&&n.swapXYData(i),"histogramx"!==i.type&&"histogramy"!==i.type||(i.type="histogram"),"scl"in i&&!("colorscale"in i)&&(i.colorscale=i.scl,delete i.scl),"reversescl"in i&&!("reversescale"in i)&&(i.reversescale=i.reversescl,delete i.reversescl),i.xaxis&&(i.xaxis=u(i.xaxis,"x")),i.yaxis&&(i.yaxis=u(i.yaxis,"y")),h(i,"gl3d")&&i.scene&&(i.scene=s.subplotsRegistry.gl3d.cleanId(i.scene)),!h(i,"pie-like")&&!h(i,"bar-like"))if(Array.isArray(i.textposition))for(r=0;r<i.textposition.length;r++)i.textposition[r]=v(i.textposition[r]);else i.textposition&&(i.textposition=v(i.textposition));var f=a.getModule(i);if(f&&f.colorbar){var b=f.colorbar.container,x=b?i[b]:i;x&&x.colorscale&&("YIGnBu"===x.colorscale&&(x.colorscale="YlGnBu"),"YIOrRd"===x.colorscale&&(x.colorscale="YlOrRd"))}if("surface"===i.type&&o.isPlainObject(i.contours)){var _=["x","y","z"];for(r=0;r<_.length;r++){var w=i.contours[_[r]];o.isPlainObject(w)&&(w.highlightColor&&(w.highlightcolor=w.highlightColor,delete w.highlightColor),w.highlightWidth&&(w.highlightwidth=w.highlightWidth,delete w.highlightWidth))}}if("candlestick"===i.type||"ohlc"===i.type){var k=!1!==(i.increasing||{}).showlegend,T=!1!==(i.decreasing||{}).showlegend,M=g(i.increasing),A=g(i.decreasing);if(!1!==M&&!1!==A){var C=m(M,A,k,T);C&&(i.name=C)}else!M&&!A||i.name||(i.name=M||A)}if(Array.isArray(i.transforms)){var S=i.transforms;for(r=0;r<S.length;r++){var D=S[r];if(o.isPlainObject(D))switch(D.type){case"filter":D.filtersrc&&(D.target=D.filtersrc,delete D.filtersrc),D.calendar&&(D.valuecalendar||(D.valuecalendar=D.calendar),delete D.calendar);break;case"groupby":if(D.styles=D.styles||D.style,D.styles&&!Array.isArray(D.styles)){var O=D.styles,E=Object.keys(O);D.styles=[];for(var L=0;L<E.length;L++)D.styles.push({target:E[L],value:O[E[L]]})}}}}y(i,"line")&&delete i.line,"marker"in i&&(y(i.marker,"line")&&delete i.marker.line,y(i,"marker")&&delete i.marker),c.clean(i),i.autobinx&&(delete i.autobinx,delete i.xbins),i.autobiny&&(delete i.autobiny,delete i.ybins),p(i),i.colorbar&&p(i.colorbar),i.marker&&i.marker.colorbar&&p(i.marker.colorbar),i.line&&i.line.colorbar&&p(i.line.colorbar),i.aaxis&&p(i.aaxis),i.baxis&&p(i.baxis)}},n.swapXYData=function(t){var e;if(o.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var n=t.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);o.swapAttrs(t,["error_?.copy_ystyle"]),r&&o.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var i=t.hoverinfo.split("+");for(e=0;e<i.length;e++)"x"===i[e]?i[e]="y":"y"===i[e]&&(i[e]="x");t.hoverinfo=i.join("+")}},n.coerceTraceIndices=function(t,e){if(r(e))return[e];if(!Array.isArray(e)||!e.length)return t.data.map(function(t,e){return e});if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++)o.isIndex(e[i],t.data.length)?n.push(e[i]):o.warn("trace index (",e[i],") is not a number or is out of bounds");return n}return e},n.manageArrayContainers=function(t,e,n){var i=t.obj,a=t.parts,s=a.length,l=a[s-1],c=r(l);if(c&&null===e){var u=a.slice(0,s-1).join(".");o.nestedProperty(i,u).get().splice(l,1)}else c&&void 0===t.get()?(void 0===t.get()&&(n[t.astr]=null),t.set(e)):t.set(e)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function x(t){var e=t.search(b);if(e>0)return t.substr(0,e)}n.hasParent=function(t,e){for(var n=x(e);n;){if(n in t)return!0;n=x(n)}return!1};var _=["x","y","z"];n.clearAxisTypes=function(t,e,n){for(var r=0;r<e.length;r++)for(var i=t._fullData[r],a=0;a<3;a++){var s=d(t,i,_[a]);if(s&&"log"!==s.type){var l=s._name,c=s._id.substr(1);if("scene"===c.substr(0,5)){if(void 0!==n[c])continue;l=c+"."+l}var u=l+".type";void 0===n[l]&&void 0===n[u]&&o.nestedProperty(t.layout,u).set(null)}}}},{"../components/color":75,"../lib":202,"../plots/cartesian/axis_ids":251,"../plots/plots":282,"../registry":290,"fast-isnumeric":11,"gl-mat4/fromQuat":17}],232:[function(t,e,n){"use strict";var r=t("./plot_api");n.plot=r.plot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n._guiRestyle=r._guiRestyle,n._guiRelayout=r._guiRelayout,n._guiUpdate=r._guiUpdate,n._storeDirectGUIEdit=r._storeDirectGUIEdit,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=t("./to_image"),n.validate=t("./validate"),n.downloadImage=t("../snapshot/download");var i=t("./template_api");n.makeTemplate=i.makeTemplate,n.validateTemplate=i.validateTemplate},{"../snapshot/download":292,"./plot_api":234,"./template_api":239,"./to_image":240,"./validate":241}],233:[function(t,e,n){"use strict";var r=t("../lib/is_plain_object"),i=t("../lib/noop"),a=t("../lib/loggers"),o=t("../lib/search").sorterAsc,s=t("../registry");n.containerArrayMatch=t("./container_array_match");var l=n.isAddVal=function(t){return"add"===t||r(t)},c=n.isRemoveVal=function(t){return null===t||"remove"===t};n.applyContainerArrayChanges=function(t,e,n,r,u){var d=e.astr,h=s.getComponentMethod(d,"supplyLayoutDefaults"),f=s.getComponentMethod(d,"draw"),p=s.getComponentMethod(d,"drawOne"),g=r.replot||r.recalc||h===i||f===i,m=t.layout,v=t._fullLayout;if(n[""]){Object.keys(n).length>1&&a.warn("Full array edits are incompatible with other edits",d);var y=n[""][""];if(c(y))e.set(null);else{if(!Array.isArray(y))return a.warn("Unrecognized full array edit value",d,y),!0;e.set(y)}return!g&&(h(m,v),f(t),!0)}var b,x,_,w,k,T,M,A=Object.keys(n).map(Number).sort(o),C=e.get(),S=C||[],D=u(v,d).get(),O=[],E=-1,L=S.length;for(b=0;b<A.length;b++)if(w=n[_=A[b]],k=Object.keys(w),M=l(T=w[""]),_<0||_>S.length-(M?0:1))a.warn("index out of range",d,_);else if(void 0!==T)k.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",d,_),c(T)?O.push(_):M?("add"===T&&(T={}),S.splice(_,0,T),D&&D.splice(_,0,{})):a.warn("Unrecognized full object edit value",d,_,T),-1===E&&(E=_);else for(x=0;x<k.length;x++)u(S[_],k[x],d+"["+_+"].").set(w[k[x]]);for(b=O.length-1;b>=0;b--)S.splice(O[b],1),D&&D.splice(O[b],1);if(S.length?C||e.set(S):e.set(null),g)return!1;if(h(m,v),p!==i){var P;if(-1===E)P=A;else{for(L=Math.max(S.length,L),P=[],b=0;b<A.length&&!((_=A[b])>=E);b++)P.push(_);for(b=E;b<L;b++)P.push(b)}for(b=0;b<P.length;b++)p(t,P[b])}else f(t);return!0}},{"../lib/is_plain_object":203,"../lib/loggers":206,"../lib/noop":211,"../lib/search":221,"../registry":290,"./container_array_match":229}],234:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("has-hover"),o=t("../lib"),s=o.nestedProperty,l=t("../lib/events"),c=t("../lib/queue"),u=t("../registry"),d=t("./plot_schema"),h=t("../plots/plots"),f=t("../plots/polar/legacy"),p=t("../plots/cartesian/axes"),g=t("../components/drawing"),m=t("../components/color"),v=t("../plots/cartesian/graph_interact").initInteractions,y=t("../constants/xmlns_namespaces"),b=t("../lib/svg_text_utils"),x=t("../plots/cartesian/select").clearSelect,_=t("./plot_config").dfltConfig,w=t("./manage_arrays"),k=t("./helpers"),T=t("./subroutines"),M=t("./edit_types"),A=t("../plots/cartesian/constants").AX_NAME_PATTERN,C=0;function S(t){var e=t._fullLayout;e._redrawFromAutoMarginCount?e._redrawFromAutoMarginCount--:t.emit("plotly_afterplot")}function D(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){o.error(t)}}function O(t,e){D(t,m.combine(e,"white"))}function E(t,e){if(!t._context){t._context=o.extendDeep({},_);var n=r.select("base");t._context._baseUrl=n.size()&&n.attr("href")?window.location.href.split("#")[0]:""}var i,s,l,c=t._context;if(e){for(s=Object.keys(e),i=0;i<s.length;i++)"editable"!==(l=s[i])&&"edits"!==l&&l in c&&(c[l]="setBackground"===l&&"opaque"===e[l]?O:e[l]);e.plot3dPixelRatio&&!c.plotGlPixelRatio&&(c.plotGlPixelRatio=c.plot3dPixelRatio);var u=e.editable;if(void 0!==u)for(c.editable=u,s=Object.keys(c.edits),i=0;i<s.length;i++)c.edits[s[i]]=u;if(e.edits)for(s=Object.keys(e.edits),i=0;i<s.length;i++)(l=s[i])in c.edits&&(c.edits[l]=e.edits[l]);c._exportedPlot=e._exportedPlot}c.staticPlot&&(c.editable=!1,c.edits={},c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1),"hover"!==c.displayModeBar||a||(c.displayModeBar=!0),"transparent"!==c.setBackground&&"function"==typeof c.setBackground||(c.setBackground=D),c._hasZeroHeight=c._hasZeroHeight||0===t.clientHeight,c._hasZeroWidth=c._hasZeroWidth||0===t.clientWidth;var d=c.scrollZoom,h=c._scrollZoom={};if(!0===d)h.cartesian=1,h.gl3d=1,h.geo=1,h.mapbox=1;else if("string"==typeof d){var f=d.split("+");for(i=0;i<f.length;i++)h[f[i]]=1}else!1!==d&&(h.gl3d=1,h.geo=1,h.mapbox=1)}function L(t,e){var n,r,i=e+1,a=[];for(n=0;n<t.length;n++)(r=t[n])<0?a.push(i+r):a.push(r);return a}function P(t,e,n){var r,i;for(r=0;r<e.length;r++){if((i=e[r])!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=t.data.length||i<-t.data.length)throw new Error(n+" must be valid indices for gd.data.");if(e.indexOf(i,r+1)>-1||i>=0&&e.indexOf(-t.data.length+i)>-1||i<0&&e.indexOf(t.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function I(t,e,n){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),P(t,e,"currentIndices"),void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&P(t,n,"newIndices"),void 0!==n&&e.length!==n.length)throw new Error("current and new indices must be of equal length.")}function R(t,e,n,r,a){!function(t,e,n,r){var i=o.isPlainObject(r);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!o.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===n)throw new Error("indices must be an integer or array of integers");for(var a in P(t,n,"indices"),e){if(!Array.isArray(e[a])||e[a].length!==n.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(i&&(!(a in r)||!Array.isArray(r[a])||r[a].length!==e[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,n,r);for(var l=function(t,e,n,r){var a,l,c,u,d=o.isPlainObject(r),h=[];for(var f in Array.isArray(n)||(n=[n]),n=L(n,t.data.length-1),e)for(var p=0;p<n.length;p++){if(a=(l=s(t.data[n[p]],f)).get(),!o.isArrayOrTypedArray(c=e[f][p]))throw new Error("attribute: "+f+" index: "+p+" must be an array");if(!o.isArrayOrTypedArray(a))throw new Error("cannot extend missing or non-array attribute: "+f);if(a.constructor!==c.constructor)throw new Error("cannot extend array with an array of a different type: "+f);i(u=d?r[f][p]:r)||(u=-1),h.push({prop:l,target:a,insert:c,maxp:Math.floor(u)})}return h}(t,e,n,r),c={},u={},d=0;d<l.length;d++){var h=l[d].prop,f=a(l[d].target,l[d].insert,l[d].maxp);h.set(f[0]),Array.isArray(c[h.astr])||(c[h.astr]=[]),c[h.astr].push(f[1]),Array.isArray(u[h.astr])||(u[h.astr]=[]),u[h.astr].push(l[d].target.length)}return{update:c,maxPoints:u}}function N(t,e){var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}function F(t,e,r,i){t=o.getGraphDiv(t),k.clearPromiseQueue(t);var a={};if("string"==typeof e)a[e]=r;else{if(!o.isPlainObject(e))return o.warn("Restyle fail.",e,r,i),Promise.reject();a=o.extendFlat({},e),void 0===i&&(i=r)}Object.keys(a).length&&(t.changed=!0);var s=k.coerceTraceIndices(t,i),l=j(t,a,s),u=l.flags;u.calc&&(t.calcdata=void 0),u.clearAxisTypes&&k.clearAxisTypes(t,s,{});var d=[];u.fullReplot?d.push(n.plot):(d.push(h.previousPromises),h.supplyDefaults(t),u.markerSize&&(h.doCalcdata(t),G(d)),u.style&&d.push(T.doTraceStyle),u.colorbars&&d.push(T.doColorBars),d.push(S)),d.push(h.rehover,h.redrag),c.add(t,F,[t,l.undoit,l.traces],F,[t,l.redoit,l.traces]);var f=o.syncOrAsync(d,t);return f&&f.then||(f=Promise.resolve()),f.then(function(){return t.emit("plotly_restyle",l.eventData),t})}function z(t){return void 0===t?null:t}function V(t,e){return e?function(e,n,r){var i=s(e,n),a=i.set;return i.set=function(e){H((r||"")+n,i.get(),e,t),a(e)},i}:s}function H(t,e,n,r){if(Array.isArray(e)||Array.isArray(n))for(var i=Array.isArray(e)?e:[],a=Array.isArray(n)?n:[],s=Math.max(i.length,a.length),l=0;l<s;l++)H(t+"["+l+"]",i[l],a[l],r);else if(o.isPlainObject(e)||o.isPlainObject(n)){var c=o.isPlainObject(e)?e:{},u=o.isPlainObject(n)?n:{},d=o.extendFlat({},c,u);for(var h in d)H(t+"."+h,c[h],u[h],r)}else void 0===r[t]&&(r[t]=z(e))}function j(t,e,n){var r,i=t._fullLayout,a=t._fullData,l=t.data,c=i._guiEditing,f=V(i._preGUI,c),g=o.extendDeepAll({},e);B(e);var m,v=M.traceFlags(),y={},b={};function x(){return n.map(function(){})}function _(t){var e=p.id2name(t);-1===m.indexOf(e)&&m.push(e)}function w(t){return"LAYOUT"+t+".autorange"}function T(t){return"LAYOUT"+t+".range"}function A(t){for(var e=t;e<a.length;e++)if(a[e]._input===l[t])return a[e]}function C(r,a,o){if(Array.isArray(r))r.forEach(function(t){C(t,a,o)});else if(!(r in e)&&!k.hasParent(e,r)){var s;if("LAYOUT"===r.substr(0,6))s=f(t.layout,r.replace("LAYOUT",""));else{var u=n[o];s=V(i._tracePreGUI[A(u)._fullInput.uid],c)(l[u],r)}r in b||(b[r]=x()),void 0===b[r][o]&&(b[r][o]=z(s.get())),void 0!==a&&s.set(a)}}function S(t){return function(e){return a[e][t]}}function D(t){return function(e,r){return!1===e?a[n[r]][t]:null}}for(var O in e){if(k.hasParent(e,O))throw new Error("cannot set "+O+" and a parent attribute simultaneously");var E,L,P,I,R,N,F=e[O];if("autobinx"!==O&&"autobiny"!==O||(O=O.charAt(O.length-1)+"bins",F=Array.isArray(F)?F.map(D(O)):!1===F?n.map(S(O)):null),y[O]=F,"LAYOUT"!==O.substr(0,6)){for(b[O]=x(),r=0;r<n.length;r++)if(E=l[n[r]],L=A(n[r]),I=(P=V(i._tracePreGUI[L._fullInput.uid],c)(E,O)).get(),void 0!==(R=Array.isArray(F)?F[r%F.length]:F)){var H=P.parts[P.parts.length-1],j=O.substr(0,O.length-H.length-1),U=j?j+".":"",q=j?s(L,j).get():L;if((N=d.getTraceValObject(L,P.parts))&&N.impliedEdits&&null!==R)for(var G in N.impliedEdits)C(o.relativeAttr(O,G),N.impliedEdits[G],r);else if("thicknessmode"!==H&&"lenmode"!==H||I===R||"fraction"!==R&&"pixels"!==R||!q){if("type"===O&&("pie"===R!=("pie"===I)||"funnelarea"===R!=("funnelarea"===I))){var Z="x",W="y";"bar"!==R&&"bar"!==I||"h"!==E.orientation||(Z="y",W="x"),o.swapAttrs(E,["?","?src"],"labels",Z),o.swapAttrs(E,["d?","?0"],"label",Z),o.swapAttrs(E,["?","?src"],"values",W),"pie"===I||"funnelarea"===I?(s(E,"marker.color").set(s(E,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):u.traceIs(E,"cartesian")&&s(E,"marker.colors").set(s(E,"marker.color").get())}}else{var $=i._size,Y=q.orient,X="top"===Y||"bottom"===Y;if("thicknessmode"===H){var Q=X?$.h:$.w;C(U+"thickness",q.thickness*("fraction"===R?1/Q:Q),r)}else{var K=X?$.w:$.h;C(U+"len",q.len*("fraction"===R?1/K:K),r)}}if(b[O][r]=z(I),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(O)){if("orientation"===O){P.set(R);var J=E.x&&!E.y?"h":"v";if((P.get()||J)===L.orientation)continue}else"orientationaxes"===O&&(E.orientation={v:"h",h:"v"}[L.orientation]);k.swapXYData(E),v.calc=v.clearAxisTypes=!0}else-1!==h.dataArrayContainers.indexOf(P.parts[0])?(k.manageArrayContainers(P,R,b),v.calc=!0):(N?N.arrayOk&&!u.traceIs(L,"regl")&&(o.isArrayOrTypedArray(R)||o.isArrayOrTypedArray(I))?v.calc=!0:M.update(v,N):v.calc=!0,P.set(R))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(O)&&p.swap(t,n),"orientationaxes"===O){var tt=s(t.layout,"hovermode"),et=tt.get();"x"===et?tt.set("y"):"y"===et?tt.set("x"):"x unified"===et?tt.set("y unified"):"y unified"===et&&tt.set("x unified")}if(-1!==["orientation","type"].indexOf(O)){for(m=[],r=0;r<n.length;r++){var nt=l[n[r]];u.traceIs(nt,"cartesian")&&(_(nt.xaxis||"x"),_(nt.yaxis||"y"))}C(m.map(w),!0,0),C(m.map(T),[0,1],0)}}else P=f(t.layout,O.replace("LAYOUT","")),b[O]=[z(P.get())],P.set(Array.isArray(F)?F[0]:F),v.calc=!0}return(v.calc||v.plot)&&(v.fullReplot=!0),{flags:v,undoit:b,redoit:y,traces:n,eventData:o.extendDeepNoArrays([],[g,n])}}function B(t){var e,n,r,i=o.counterRegex("axis",".title",!1,!1),a=/colorbar\.title$/,s=Object.keys(t);for(e=0;e<s.length;e++)r=t[n=s[e]],"title"!==n&&!i.test(n)&&!a.test(n)||"string"!=typeof r&&"number"!=typeof r?n.indexOf("titlefont")>-1?l(n,n.replace("titlefont","title.font")):n.indexOf("titleposition")>-1?l(n,n.replace("titleposition","title.position")):n.indexOf("titleside")>-1?l(n,n.replace("titleside","title.side")):n.indexOf("titleoffset")>-1&&l(n,n.replace("titleoffset","title.offset")):l(n,n.replace("title","title.text"));function l(e,n){t[n]=t[e],delete t[e]}}function U(t,e,n){if(t=o.getGraphDiv(t),k.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var r={};if("string"==typeof e)r[e]=n;else{if(!o.isPlainObject(e))return o.warn("Relayout fail.",e,n),Promise.reject();r=o.extendFlat({},e)}Object.keys(r).length&&(t.changed=!0);var i=Y(t,r),a=i.flags;a.calc&&(t.calcdata=void 0);var s=[h.previousPromises];a.layoutReplot?s.push(T.layoutReplot):Object.keys(r).length&&(q(t,a,i)||h.supplyDefaults(t),a.legend&&s.push(T.doLegend),a.layoutstyle&&s.push(T.layoutStyles),a.axrange&&G(s,i.rangesAltered),a.ticks&&s.push(T.doTicksRelayout),a.modebar&&s.push(T.doModeBar),a.camera&&s.push(T.doCamera),a.colorbars&&s.push(T.doColorBars),s.push(S)),s.push(h.rehover,h.redrag),c.add(t,U,[t,i.undoit],U,[t,i.redoit]);var l=o.syncOrAsync(s,t);return l&&l.then||(l=Promise.resolve(t)),l.then(function(){return t.emit("plotly_relayout",i.eventData),t})}function q(t,e,n){var r=t._fullLayout;if(!e.axrange)return!1;for(var i in e)if("axrange"!==i&&e[i])return!1;for(var a in n.rangesAltered){var o=p.id2name(a),s=t.layout[o],l=r[o];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)if(c!==a){var u=r[p.id2name(c)];u.autorange=l.autorange,u.range=l.range.slice(),u._input.range=l.range.slice()}}return!0}function G(t,e){t.push(x,T.doAutoRangeAndConstraints,e?function(t){var n=[],r=!0;for(var i in e){var a=p.getFromId(t,i);if(n.push(i),-1!==(a.ticklabelposition||"").indexOf("inside")&&a._anchorAxis&&n.push(a._anchorAxis._id),a._matchGroup)for(var o in a._matchGroup)e[o]||n.push(o);a.automargin&&(r=!1)}return p.draw(t,n,{skipTitle:r})}:function(t){return p.draw(t,"redraw")},T.drawData,T.finalDraw)}var Z=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,W=/^[xyz]axis[0-9]*\.autorange$/,$=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Y(t,e){var n,r,i,a=t.layout,l=t._fullLayout,c=V(l._preGUI,l._guiEditing),h=Object.keys(e),f=p.list(t),g=o.extendDeepAll({},e),m={};for(B(e),h=Object.keys(e),r=0;r<h.length;r++)if(0===h[r].indexOf("allaxes")){for(i=0;i<f.length;i++){var v=f[i]._id.substr(1),y=-1!==v.indexOf("scene")?v+".":"",b=h[r].replace("allaxes",y+f[i]._name);e[b]||(e[b]=e[h[r]])}delete e[h[r]]}var x=M.layoutFlags(),_={},T={};function C(t,n){if(Array.isArray(t))t.forEach(function(t){C(t,n)});else if(!(t in e)&&!k.hasParent(e,t)){var r=c(a,t);t in T||(T[t]=z(r.get())),void 0!==n&&r.set(n)}}var S,D={};function O(t){var e=p.name2id(t.split(".")[0]);return D[e]=1,e}for(var E in e){if(k.hasParent(e,E))throw new Error("cannot set "+E+" and a parent attribute simultaneously");for(var L=c(a,E),P=e[E],I=L.parts.length-1;I>0&&"string"!=typeof L.parts[I];)I--;var R=L.parts[I],N=L.parts[I-1]+"."+R,F=L.parts.slice(0,I).join("."),H=s(t.layout,F).get(),j=s(l,F).get(),U=L.get();if(void 0!==P){_[E]=P,T[E]="reverse"===R?P:z(U);var q=d.getLayoutValObject(l,L.parts);if(q&&q.impliedEdits&&null!==P)for(var G in q.impliedEdits)C(o.relativeAttr(E,G),q.impliedEdits[G]);if(-1!==["width","height"].indexOf(E))if(P){C("autosize",null);var Y="height"===E?"width":"height";C(Y,l[Y])}else l[E]=t._initialAutoSize[E];else if("autosize"===E)C("width",P?null:l.width),C("height",P?null:l.height);else if(N.match(Z))O(N),s(l,F+"._inputRange").set(null);else if(N.match(W)){O(N),s(l,F+"._inputRange").set(null);var Q=s(l,F).get();Q._inputDomain&&(Q._input.domain=Q._inputDomain.slice())}else N.match($)&&s(l,F+"._inputDomain").set(null);if("type"===R){S=H;var K="linear"===j.type&&"log"===P;if(K||"log"===j.type&&"linear"===P){if(S&&S.range)if(j.autorange)K&&(S.range=S.range[1]>S.range[0]?[1,2]:[2,1]);else{var J=S.range[0],tt=S.range[1];K?(J<=0&&tt<=0&&C(F+".autorange",!0),J<=0?J=tt/1e6:tt<=0&&(tt=J/1e6),C(F+".range[0]",Math.log(J)/Math.LN10),C(F+".range[1]",Math.log(tt)/Math.LN10)):(C(F+".range[0]",Math.pow(10,J)),C(F+".range[1]",Math.pow(10,tt)))}else C(F+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[L.parts[0]]&&"radialaxis"===L.parts[1]&&delete l[L.parts[0]]._subplot.viewInitial["radialaxis.range"],u.getComponentMethod("annotations","convertCoords")(t,j,P,C),u.getComponentMethod("images","convertCoords")(t,j,P,C)}else C(F+".autorange",!0),C(F+".range",null);s(l,F+"._inputRange").set(null)}else if(R.match(A)){var et=s(l,E).get(),nt=(P||{}).type;nt&&"-"!==nt||(nt="linear"),u.getComponentMethod("annotations","convertCoords")(t,et,nt,C),u.getComponentMethod("images","convertCoords")(t,et,nt,C)}var rt=w.containerArrayMatch(E);if(rt){n=rt.array;var it=rt.property,at=q||{editType:"calc"};""!==(r=rt.index)&&""===it&&(w.isAddVal(P)?T[E]=null:w.isRemoveVal(P)?T[E]=(s(a,n).get()||[])[r]:o.warn("unrecognized full object value",e)),M.update(x,at),m[n]||(m[n]={});var ot=m[n][r];ot||(ot=m[n][r]={}),ot[it]=P,delete e[E]}else"reverse"===R?(H.range?H.range.reverse():(C(F+".autorange",!0),H.range=[1,0]),j.autorange?x.calc=!0:x.plot=!0):(l._has("scatter-like")&&l._has("regl")&&"dragmode"===E&&("lasso"===P||"select"===P)&&"lasso"!==U&&"select"!==U||l._has("gl2d")?x.plot=!0:q?M.update(x,q):x.calc=!0,L.set(P))}}for(n in m)w.applyContainerArrayChanges(t,c(a,n),m[n],x,c)||(x.plot=!0);for(var st in D){var lt=(S=p.getFromId(t,st))&&S._constraintGroup;if(lt)for(var ct in x.calc=!0,lt)D[ct]||(p.getFromId(t,ct)._constraintShrinkable=!0)}return(X(t)||e.height||e.width)&&(x.plot=!0),(x.plot||x.calc)&&(x.layoutReplot=!0),{flags:x,rangesAltered:D,undoit:T,redoit:_,eventData:g}}function X(t){var e=t._fullLayout,n=e.width,r=e.height;return t.layout.autosize&&h.plotAutoSize(t,t.layout,e),e.width!==n||e.height!==r}function Q(t,e,r,i){if(t=o.getGraphDiv(t),k.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);o.isPlainObject(e)||(e={}),o.isPlainObject(r)||(r={}),Object.keys(e).length&&(t.changed=!0),Object.keys(r).length&&(t.changed=!0);var a=k.coerceTraceIndices(t,i),s=j(t,o.extendFlat({},e),a),l=s.flags,u=Y(t,o.extendFlat({},r)),d=u.flags;(l.calc||d.calc)&&(t.calcdata=void 0),l.clearAxisTypes&&k.clearAxisTypes(t,a,r);var f=[];d.layoutReplot?f.push(T.layoutReplot):l.fullReplot?f.push(n.plot):(f.push(h.previousPromises),q(t,d,u)||h.supplyDefaults(t),l.style&&f.push(T.doTraceStyle),(l.colorbars||d.colorbars)&&f.push(T.doColorBars),d.legend&&f.push(T.doLegend),d.layoutstyle&&f.push(T.layoutStyles),d.axrange&&G(f,u.rangesAltered),d.ticks&&f.push(T.doTicksRelayout),d.modebar&&f.push(T.doModeBar),d.camera&&f.push(T.doCamera),f.push(S)),f.push(h.rehover,h.redrag),c.add(t,Q,[t,s.undoit,u.undoit,s.traces],Q,[t,s.redoit,u.redoit,s.traces]);var p=o.syncOrAsync(f,t);return p&&p.then||(p=Promise.resolve(t)),p.then(function(){return t.emit("plotly_update",{data:s.eventData,layout:u.eventData}),t})}function K(t){return function(e){e._fullLayout._guiEditing=!0;var n=t.apply(null,arguments);return e._fullLayout._guiEditing=!1,n}}var J=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],tt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function et(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=t.match(r.pattern);if(i)return{head:i[1],attr:r.attr}}}function nt(t,e){var n=s(e,t).get();if(void 0!==n)return n;var r=t.split(".");for(r.pop();r.length>1;)if(r.pop(),void 0!==(n=s(e,r.join(".")+".uirevision").get()))return n;return e.uirevision}function rt(t,e){for(var n=0;n<e.length;n++)if(e[n]._fullInput.uid===t)return n;return-1}function it(t,e,n){for(var r=0;r<e.length;r++)if(e[r].uid===t)return r;return!e[n]||e[n].uid?-1:n}function at(t,e){var n=o.isPlainObject(t),r=Array.isArray(t);return n||r?(n&&o.isPlainObject(e)||r&&Array.isArray(e))&&JSON.stringify(t)===JSON.stringify(e):t===e}function ot(t,e,n,r){var i,a,l,c=r.getValObject,u=r.flags,d=r.immutable,h=r.inArray,f=r.arrayIndex;function p(){var t=i.editType;h&&-1!==t.indexOf("arraydraw")?o.pushUnique(u.arrays[h],f):(M.update(u,i),"none"!==t&&u.nChanges++,r.transition&&i.anim&&u.nChangesAnim++,(Z.test(l)||W.test(l))&&(u.rangesAltered[n[0]]=1),$.test(l)&&s(e,"_inputDomain").set(null),"datarevision"===a&&(u.newDataRevision=1))}function g(t){return"data_array"===t.valType||t.arrayOk}for(a in t){if(u.calc&&!r.transition)return;var m=t[a],v=e[a],y=n.concat(a);if(l=y.join("."),"_"!==a.charAt(0)&&"function"!=typeof m&&m!==v){if(("tick0"===a||"dtick"===a)&&"geo"!==n[0]){var b=e.tickmode;if("auto"===b||"array"===b||!b)continue}if(("range"!==a||!e.autorange)&&("zmin"!==a&&"zmax"!==a||"contourcarpet"!==e.type)&&(i=c(y))&&(!i._compareAsJSON||JSON.stringify(m)!==JSON.stringify(v))){var x,_=i.valType,w=g(i),k=Array.isArray(m),T=Array.isArray(v);if(k&&T){var A="_input_"+a,C=t[A],S=e[A];if(Array.isArray(C)&&C===S)continue}if(void 0===v)w&&k?u.calc=!0:p();else if(i._isLinkedToArray){var D=[],O=!1;h||(u.arrays[a]=D);var E=Math.min(m.length,v.length),L=Math.max(m.length,v.length);if(E!==L){if("arraydraw"!==i.editType){p();continue}O=!0}for(x=0;x<E;x++)ot(m[x],v[x],y.concat(x),o.extendFlat({inArray:a,arrayIndex:x},r));if(O)for(x=E;x<L;x++)D.push(x)}else!_&&o.isPlainObject(m)?ot(m,v,y,r):w?k&&T?(d&&(u.calc=!0),(d||r.newDataRevision)&&p()):k!==T?u.calc=!0:p():k&&T&&m.length===v.length&&String(m)===String(v)||p()}}}for(a in e)if(!(a in t)&&"_"!==a.charAt(0)&&"function"!=typeof e[a]){if(g(i=c(n.concat(a)))&&Array.isArray(e[a]))return void(u.calc=!0);p()}}function st(t){var e=t._fullLayout,n=t.getBoundingClientRect();if(!o.equalDomRects(n,e._lastBBox)){var r=e._invTransform=o.inverseTransformMatrix(o.getFullTransformMatrix(t));e._invScaleX=Math.sqrt(r[0][0]*r[0][0]+r[0][1]*r[0][1]+r[0][2]*r[0][2]),e._invScaleY=Math.sqrt(r[1][0]*r[1][0]+r[1][1]*r[1][1]+r[1][2]*r[1][2]),e._lastBBox=n}}function lt(t){var e=r.select(t),n=t._fullLayout;if(n._calcInverseTransform=st,n._calcInverseTransform(t),n._container=e.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._paperdiv.selectAll(".main-svg").remove(),n._paperdiv.select(".modebar-container").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),n._modebardiv=n._paperdiv.append("div"),delete n._modeBar,n._hoverpaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var i={};r.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),n._uid=o.randstr(i)}n._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var a=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=a.append("g").classed("imagelayer",!0),n._shapeLowerLayer=a.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._funnelarealayer=n._paper.append("g").classed("funnelarealayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._treemaplayer=n._paper.append("g").classed("treemaplayer",!0),n._sunburstlayer=n._paper.append("g").classed("sunburstlayer",!0),n._indicatorlayer=n._toppaper.append("g").classed("indicatorlayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var s=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=s.append("g").classed("imagelayer",!0),n._shapeUpperLayer=s.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._hoverpaper.append("g").classed("hoverlayer",!0),n._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),t.emit("plotly_framework")}n.animate=function(t,e,n){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var r=t._transitionData;r._frameQueue||(r._frameQueue=[]);var i=(n=h.supplyAnimationDefaults(n)).transition,a=n.frame;function s(t){return Array.isArray(i)?t>=i.length?i[0]:i[t]:i}function l(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function c(t,e){var n=0;return function(){if(t&&++n===e)return t()}}return void 0===r._frameWaitingCnt&&(r._frameWaitingCnt=0),new Promise(function(a,u){var d,f,p=0;function g(t){return t.transitionOpts=Array.isArray(i)?p>=i.length?i[p]:i[0]:i,p++,t}var m=[],v=null==e,y=Array.isArray(e);if(v||y||!o.isPlainObject(e)){if(v||-1!==["string","number"].indexOf(typeof e))for(d=0;d<r._frames.length;d++)(f=r._frames[d])&&(v||String(f.group)===String(e))&&m.push({type:"byname",name:String(f.name),data:g({name:f.name})});else if(y)for(d=0;d<e.length;d++){var b=e[d];-1!==["number","string"].indexOf(typeof b)?(b=String(b),m.push({type:"byname",name:b,data:g({name:b})})):o.isPlainObject(b)&&m.push({type:"object",data:g(o.extendFlat({},b))})}}else m.push({type:"object",data:g(o.extendFlat({},e))});for(d=0;d<m.length;d++)if("byname"===(f=m[d]).type&&!r._frameHash[f.data.name])return o.warn('animate failure: frame not found: "'+f.data.name+'"'),void u();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==r._frameQueue.length){for(;r._frameQueue.length;){var e=r._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&m.reverse();var x=t._fullLayout._currentFrame;if(x&&n.fromcurrent){var _=-1;for(d=0;d<m.length;d++)if("byname"===(f=m[d]).type&&f.name===x){_=d;break}if(_>0&&_<m.length-1){var w=[];for(d=0;d<m.length;d++)f=m[d],("byname"!==m[d].type||d>_)&&w.push(f);m=w}}m.length>0?function(e){if(0!==e.length){for(var i=0;i<e.length;i++){var o;o="byname"===e[i].type?h.computeFrame(t,e[i].name):e[i].data;var d=l(i),f=s(i);f.duration=Math.min(f.duration,d.duration);var p={frame:o,name:e[i].name,frameOpts:d,transitionOpts:f};i===e.length-1&&(p.onComplete=c(a,2),p.onInterrupt=u),r._frameQueue.push(p)}"immediate"===n.mode&&(r._lastFrameAt=-1/0),r._animationRaf||function(){t.emit("plotly_animating"),r._lastFrameAt=-1/0,r._timeToNext=0,r._runningTransitions=0,r._currentFrame=null;var e=function(){r._animationRaf=window.requestAnimationFrame(e),Date.now()-r._lastFrameAt>r._timeToNext&&function(){r._currentFrame&&r._currentFrame.onComplete&&r._currentFrame.onComplete();var e=r._currentFrame=r._frameQueue.shift();if(e){var n=e.name?e.name.toString():null;t._fullLayout._currentFrame=n,r._lastFrameAt=Date.now(),r._timeToNext=e.frameOpts.duration,h.transition(t,e.frame.data,e.frame.layout,k.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),t.emit("plotly_animatingframe",{name:n,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(r._animationRaf),r._animationRaf=null}()};e()}()}}(m):(t.emit("plotly_animated"),a())})},n.addFrames=function(t,e,n){if(t=o.getGraphDiv(t),null==e)return Promise.resolve();if(!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,i,a,s,l=t._transitionData._frames,u=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var d=l.length+2*e.length,f=[],p={};for(r=e.length-1;r>=0;r--)if(o.isPlainObject(e[r])){var g=e[r].name,m=(u[g]||p[g]||{}).name,v=e[r].name;m&&v&&"number"==typeof v&&(u[m]||p[m])&&C<5&&(C++,o.warn('addFrames: overwriting frame "'+(u[m]||p[m]).name+'" with a frame whose name of type "number" also equates to "'+m+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===C&&o.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),p[g]={name:g},f.push({frame:h.supplyFrameDefaults(e[r]),index:n&&null!=n[r]?n[r]:d+r})}f.sort(function(t,e){return t.index>e.index?-1:t.index<e.index?1:0});var y=[],b=[],x=l.length;for(r=f.length-1;r>=0;r--){if("number"==typeof(i=f[r].frame).name&&o.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;u[i.name="frame "+t._transitionData._counter++];);if(u[i.name]){for(a=0;a<l.length&&(l[a]||{}).name!==i.name;a++);y.push({type:"replace",index:a,value:i}),b.unshift({type:"replace",index:a,value:l[a]})}else s=Math.max(0,Math.min(f[r].index,x)),y.push({type:"insert",index:s,value:i}),b.unshift({type:"delete",index:s}),x++}return c&&c.add(t,h.modifyFrames,[t,b],h.modifyFrames,[t,y]),h.modifyFrames(t,y)},n.deleteFrames=function(t,e){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var n,r,i=t._transitionData._frames,a=[],s=[];if(!e)for(e=[],n=0;n<i.length;n++)e.push(n);for((e=e.slice()).sort(),n=e.length-1;n>=0;n--)a.push({type:"delete",index:r=e[n]}),s.unshift({type:"insert",index:r,value:i[r]});return c&&c.add(t,h.modifyFrames,[t,s],h.modifyFrames,[t,a]),h.modifyFrames(t,a)},n.addTraces=function t(e,r,i){e=o.getGraphDiv(e);var a,s,l=[],u=n.deleteTraces,d=t,h=[e,l],f=[e,r];for(function(t,e,n){var r,i;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),r=0;r<e.length;r++)if("object"!=typeof(i=e[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===n||Array.isArray(n)||(n=[n]),void 0!==n&&n.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(e,r,i),Array.isArray(r)||(r=[r]),r=r.map(function(t){return o.extendFlat({},t)}),k.cleanData(r),a=0;a<r.length;a++)e.data.push(r[a]);for(a=0;a<r.length;a++)l.push(-r.length+a);if(void 0===i)return s=n.redraw(e),c.add(e,u,h,d,f),s;Array.isArray(i)||(i=[i]);try{I(e,l,i)}catch(t){throw e.data.splice(e.data.length-r.length,r.length),t}return c.startSequence(e),c.add(e,u,h,d,f),s=n.moveTraces(e,l,i),c.stopSequence(e),s},n.deleteTraces=function t(e,r){e=o.getGraphDiv(e);var i,a,s=[],l=n.addTraces,u=t,d=[e,s,r],h=[e,r];if(void 0===r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),P(e,r,"indices"),(r=L(r,e.data.length-1)).sort(o.sorterDes),i=0;i<r.length;i+=1)a=e.data.splice(r[i],1)[0],s.push(a);var f=n.redraw(e);return c.add(e,l,d,u,h),f},n.extendTraces=function t(e,r,i,a){function s(t,e,n){var r,i;if(o.isTypedArray(t))if(n<0){var a=new t.constructor(0),s=N(t,e);n<0?(r=s,i=a):(r=a,i=s)}else if(r=new t.constructor(n),i=new t.constructor(t.length+e.length-n),n===e.length)r.set(e),i.set(t);else if(n<e.length){var l=e.length-n;r.set(e.subarray(l)),i.set(t),i.set(e.subarray(0,l),t.length)}else{var c=n-e.length,u=t.length-c;r.set(t.subarray(u)),r.set(e,c),i.set(t.subarray(0,u))}else r=t.concat(e),i=n>=0&&n<r.length?r.splice(0,r.length-n):[];return[r,i]}var l=R(e=o.getGraphDiv(e),r,i,a,s),u=n.redraw(e);return c.add(e,n.prependTraces,[e,l.update,i,l.maxPoints],t,arguments),u},n.moveTraces=function t(e,r,i){var a,s=[],l=[],u=t,d=t,h=[e=o.getGraphDiv(e),i,r],f=[e,r,i];if(I(e,r,i),r=Array.isArray(r)?r:[r],void 0===i)for(i=[],a=0;a<r.length;a++)i.push(-r.length+a);for(i=Array.isArray(i)?i:[i],r=L(r,e.data.length-1),i=L(i,e.data.length-1),a=0;a<e.data.length;a++)-1===r.indexOf(a)&&s.push(e.data[a]);for(a=0;a<r.length;a++)l.push({newIndex:i[a],trace:e.data[r[a]]});for(l.sort(function(t,e){return t.newIndex-e.newIndex}),a=0;a<l.length;a+=1)s.splice(l[a].newIndex,0,l[a].trace);e.data=s;var p=n.redraw(e);return c.add(e,u,h,d,f),p},n.prependTraces=function t(e,r,i,a){function s(t,e,n){var r,i;if(o.isTypedArray(t))if(n<=0){var a=new t.constructor(0),s=N(e,t);n<0?(r=s,i=a):(r=a,i=s)}else if(r=new t.constructor(n),i=new t.constructor(t.length+e.length-n),n===e.length)r.set(e),i.set(t);else if(n<e.length){var l=e.length-n;r.set(e.subarray(0,l)),i.set(e.subarray(l)),i.set(t,l)}else{var c=n-e.length;r.set(e),r.set(t.subarray(0,c),e.length),i.set(t.subarray(c))}else r=e.concat(t),i=n>=0&&n<r.length?r.splice(n,r.length):[];return[r,i]}var l=R(e=o.getGraphDiv(e),r,i,a,s),u=n.redraw(e);return c.add(e,n.extendTraces,[e,l.update,i,l.maxPoints],t,arguments),u},n.newPlot=function(t,e,r,i){return t=o.getGraphDiv(t),h.cleanPlot([],{},t._fullData||[],t._fullLayout||{}),h.purge(t),n.plot(t,e,r,i)},n.plot=function(t,e,i,a){var s;if(t=o.getGraphDiv(t),l.init(t),o.isPlainObject(e)){var c=e;e=c.data,i=c.layout,a=c.config,s=c.frames}if(!1===l.triggerHandler(t,"plotly_beforeplot",[e,i,a]))return Promise.reject();e||i||o.isPlotDiv(t)||o.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",t),E(t,a),i||(i={}),r.select(t).classed("js-plotly-plot",!0),g.makeTester(),Array.isArray(t._promises)||(t._promises=[]);var d=0===(t.data||[]).length&&Array.isArray(e);Array.isArray(e)&&(k.cleanData(e),d?t.data=e:t.data.push.apply(t.data,e),t.empty=!1),t.layout&&!d||(t.layout=k.cleanLayout(i)),h.supplyDefaults(t);var m=t._fullLayout,y=m._has("cartesian");if(!m._has("polar")&&e&&e[0]&&e[0].r)return o.log("Legacy polar charts are deprecated!"),function(t,e,n){var i=r.select(t).selectAll(".plot-container").data([0]);i.enter().insert("div",":first-child").classed("plot-container plotly",!0);var a=i.selectAll(".svg-container").data([0]);a.enter().append("div").classed("svg-container",!0).style("position","relative"),a.html(""),e&&(t.data=e),n&&(t.layout=n),f.manager.fillLayout(t),a.style({width:t._fullLayout.width+"px",height:t._fullLayout.height+"px"}),t.framework=f.manager.framework(t),t.framework({data:t.data,layout:t.layout},a.node()),t.framework.setUndoPoint();var s=t.framework.svg(),l=1,c=t._fullLayout.title?t._fullLayout.title.text:"";""!==c&&c||(l=0);var u=function(){this.call(b.convertToTspans,t)},d=s.select(".title-group text").call(u);if(t._context.edits.titleText){var p=o._(t,"Click to enter Plot title");c&&c!==p||(l=.2,d.attr({"data-unformatted":p}).text(p).style({opacity:l}).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)}));var g=function(){this.call(b.makeEditable,{gd:t}).on("edit",function(e){t.framework({layout:{title:{text:e}}}),this.text(e).call(u),this.call(g)}).on("cancel",function(){var t=this.attr("data-unformatted");this.text(t).call(u)})};d.call(g)}return t._context.setBackground(t,t._fullLayout.paper_bgcolor),h.addLinks(t),Promise.resolve()}(t,e,i);m._replotting=!0,(d||m._shouldCreateBgLayer)&&(lt(t),m._shouldCreateBgLayer&&delete m._shouldCreateBgLayer),t.framework!==lt&&(t.framework=lt,lt(t)),g.initGradients(t),d&&p.saveShowSpikeInitial(t);var x=!t.calcdata||t.calcdata.length!==(t._fullData||[]).length;x&&h.doCalcdata(t);for(var _=0;_<t.calcdata.length;_++)t.calcdata[_][0].trace=t._fullData[_];t._context.responsive?t._responsiveChartHandler||(t._responsiveChartHandler=function(){o.isHidden(t)||h.resize(t)},window.addEventListener("resize",t._responsiveChartHandler)):o.clearResponsive(t);var w=o.extendFlat({},m._size),M=0;function A(){if(h.clearAutoMarginIds(t),T.drawMarginPushers(t),p.allowAutoMargin(t),m._has("pie"))for(var e=t._fullData,n=0;n<e.length;n++){var r=e[n];"pie"===r.type&&r.automargin&&h.allowAutoMargin(t,"pie."+r.uid+".automargin")}return h.doAutoMargin(t),h.previousPromises(t)}function C(){t._transitioning||(T.doAutoRangeAndConstraints(t),d&&p.saveRangeInitial(t),u.getComponentMethod("rangeslider","calcAutorange")(t))}var D=[h.previousPromises,function(){if(s)return n.addFrames(t,s)},function e(){for(var n=m._basePlotModules,r=0;r<n.length;r++)n[r].drawFramework&&n[r].drawFramework(t);if(!m._glcanvas&&m._has("gl")&&(m._glcanvas=m._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(t){return t.key}),m._glcanvas.enter().append("canvas").attr("class",function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),m._glcanvas){m._glcanvas.attr("width",m.width).attr("height",m.height);var i=m._glcanvas.data()[0].regl;if(i&&(Math.floor(m.width)!==i._gl.drawingBufferWidth||Math.floor(m.height)!==i._gl.drawingBufferHeight)){var a="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!M)return o.log(a+" Clearing graph and plotting again."),h.cleanPlot([],{},t._fullData,m),h.supplyDefaults(t),m=t._fullLayout,h.doCalcdata(t),M++,e();o.error(a)}}return"h"===m.modebar.orientation?m._modebardiv.style("height",null).style("width","100%"):m._modebardiv.style("width",null).style("height",m.height+"px"),h.previousPromises(t)},A,function(){if(h.didMarginChange(w,m._size))return o.syncOrAsync([A,T.layoutStyles],t)}];y&&D.push(function(){if(x)return o.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),C],t);C()}),D.push(T.layoutStyles),y&&D.push(function(){return p.draw(t,d?"":"redraw")},function(t){t._fullLayout._insideTickLabelsAutorange&&U(t,t._fullLayout._insideTickLabelsAutorange).then(function(){t._fullLayout._insideTickLabelsAutorange=void 0})}),D.push(T.drawData,T.finalDraw,v,h.addLinks,h.rehover,h.redrag,h.doAutoMargin,function(t){t._fullLayout._insideTickLabelsAutorange&&d&&p.saveRangeInitial(t,!0)},h.previousPromises);var O=o.syncOrAsync(D,t);return O&&O.then||(O=Promise.resolve()),O.then(function(){return S(t),t})},n.purge=function(t){var e=(t=o.getGraphDiv(t))._fullLayout||{};return h.cleanPlot([],{},t._fullData||[],e),h.purge(t),l.purge(t),e._container&&e._container.remove(),delete t._context,t},n.react=function(t,e,r,i){var a,l;t=o.getGraphDiv(t),k.clearPromiseQueue(t);var c=t._fullData,f=t._fullLayout;if(o.isPlotDiv(t)&&c&&f){if(o.isPlainObject(e)){var p=e;e=p.data,r=p.layout,i=p.config,a=p.frames}var g=!1;if(i){var m=o.extendDeep({},t._context);t._context=void 0,E(t,i),g=function t(e,n){var r;for(r in e)if("_"!==r.charAt(0)){var i=e[r],a=n[r];if(i!==a)if(o.isPlainObject(i)&&o.isPlainObject(a)){if(t(i,a))return!0}else{if(!Array.isArray(i)||!Array.isArray(a))return!0;if(i.length!==a.length)return!0;for(var s=0;s<i.length;s++)if(i[s]!==a[s]){if(!o.isPlainObject(i[s])||!o.isPlainObject(a[s]))return!0;if(t(i[s],a[s]))return!0}}}}(m,t._context)}t.data=e||[],k.cleanData(t.data),t.layout=r||{},k.cleanLayout(t.layout),function(t,e,n,r){var i,a,l,c,u,d,h,f,p=r._preGUI,g=[],m={};for(i in p){if(u=et(i,J)){if((c=(l=s(r,a=u.attr||u.head+".uirevision").get())&&nt(a,e))&&c===l&&(null===(d=p[i])&&(d=void 0),at(f=(h=s(e,i)).get(),d))){void 0===f&&"autorange"===i.substr(i.length-9)&&g.push(i.substr(0,i.length-10)),h.set(z(s(r,i).get()));continue}}else o.warn("unrecognized GUI edit: "+i);delete p[i],"range["===i.substr(i.length-8,6)&&(m[i.substr(0,i.length-9)]=1)}for(var v=0;v<g.length;v++){var y=g[v];if(m[y]){var b=s(e,y).get();b&&delete b.autorange}}var x=r._tracePreGUI;for(var _ in x){var w,k=x[_],T=null;for(i in k){if(!T){var M=rt(_,n);if(M<0){delete x[_];break}var A=it(_,t,(w=n[M]._fullInput).index);if(A<0){delete x[_];break}T=t[A]}if(u=et(i,tt)){if(u.attr?c=(l=s(r,u.attr).get())&&nt(u.attr,e):(l=w.uirevision,void 0===(c=T.uirevision)&&(c=e.uirevision)),c&&c===l&&(null===(d=k[i])&&(d=void 0),at(f=(h=s(T,i)).get(),d))){h.set(z(s(w,i).get()));continue}}else o.warn("unrecognized GUI edit: "+i+" in trace uid "+_);delete k[i]}}}(t.data,t.layout,c,f),h.supplyDefaults(t,{skipUpdateCalc:!0});var v=t._fullData,y=t._fullLayout,b=void 0===y.datarevision,x=y.transition,_=function(t,e,n,r,i){var a=M.layoutFlags();return a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0,ot(e,n,[],{getValObject:function(t){return d.getLayoutValObject(n,t)},flags:a,immutable:r,transition:i,gd:t}),(a.plot||a.calc)&&(a.layoutReplot=!0),i&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some"),a}(t,f,y,b,x),w=function(t,e,n,r,i,a){var o=e.length===n.length;if(!i&&!o)return{fullReplot:!0,calc:!0};var s,l,c=M.traceFlags();c.arrays={},c.nChanges=0,c.nChangesAnim=0;var u={getValObject:function(t){var e=d.getTraceValObject(l,t);return!l._module.animatable&&e.anim&&(e.anim=!1),e},flags:c,immutable:r,transition:i,newDataRevision:a,gd:t},f={};for(s=0;s<e.length;s++)if(n[s]){if(h.hasMakesDataTransform(l=n[s]._fullInput)&&(l=n[s]),f[l.uid])continue;f[l.uid]=1,ot(e[s]._fullInput,l,[],u)}return(c.calc||c.plot)&&(c.fullReplot=!0),i&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some"),c}(t,c,v,b,x,_.newDataRevision);if(X(t)&&(_.layoutReplot=!0),w.calc||_.calc){t.calcdata=void 0;for(var A=Object.getOwnPropertyNames(y),C=0;C<A.length;C++){var D=A[C],O=D.substring(0,5);if("xaxis"===O||"yaxis"===O){var L=y[D]._emptyCategories;L&&L()}}}else h.supplyDefaultsUpdateCalc(t.calcdata,v);var P=[];if(a&&(t._transitionData={},h.createTransitionData(t),P.push(function(){return n.addFrames(t,a)})),y.transition&&!g&&(w.anim||_.anim))_.ticks&&P.push(T.doTicksRelayout),h.doCalcdata(t),T.doAutoRangeAndConstraints(t),P.push(function(){return h.transitionFromReact(t,w,_,f)});else if(w.fullReplot||_.layoutReplot||g)t._fullLayout._skipDefaults=!0,P.push(n.plot);else{for(var I in _.arrays){var R=_.arrays[I];if(R.length){var N=u.getComponentMethod(I,"drawOne");if(N!==o.noop)for(var F=0;F<R.length;F++)N(t,R[F]);else{var V=u.getComponentMethod(I,"draw");if(V===o.noop)throw new Error("cannot draw components: "+I);V(t)}}}P.push(h.previousPromises),w.style&&P.push(T.doTraceStyle),(w.colorbars||_.colorbars)&&P.push(T.doColorBars),_.legend&&P.push(T.doLegend),_.layoutstyle&&P.push(T.layoutStyles),_.axrange&&G(P),_.ticks&&P.push(T.doTicksRelayout),_.modebar&&P.push(T.doModeBar),_.camera&&P.push(T.doCamera),P.push(S)}P.push(h.rehover,h.redrag),(l=o.syncOrAsync(P,t))&&l.then||(l=Promise.resolve(t))}else l=n.newPlot(t,e,r,i);return l.then(function(){return t.emit("plotly_react",{data:e,layout:r}),t})},n.redraw=function(t){if(t=o.getGraphDiv(t),!o.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return k.cleanData(t.data),k.cleanLayout(t.layout),t.calcdata=void 0,n.plot(t).then(function(){return t.emit("plotly_redraw"),t})},n.relayout=U,n.restyle=F,n.setPlotConfig=function(t){return o.extendFlat(_,t)},n.update=Q,n._guiRelayout=K(U),n._guiRestyle=K(F),n._guiUpdate=K(Q),n._storeDirectGUIEdit=function(t,e,n){for(var r in n)H(r,s(t,r).get(),n[r],e)}},{"../components/color":75,"../components/drawing":97,"../constants/xmlns_namespaces":182,"../lib":202,"../lib/events":195,"../lib/queue":217,"../lib/svg_text_utils":224,"../plots/cartesian/axes":248,"../plots/cartesian/constants":254,"../plots/cartesian/graph_interact":257,"../plots/cartesian/select":267,"../plots/plots":282,"../plots/polar/legacy":285,"../registry":290,"./edit_types":230,"./helpers":231,"./manage_arrays":233,"./plot_config":235,"./plot_schema":236,"./subroutines":238,d3:9,"fast-isnumeric":11,"has-hover":42}],235:[function(t,e,n){"use strict";var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},i={};!function t(e,n){for(var r in e){var i=e[r];i.valType?n[r]=i.dflt:(n[r]||(n[r]={}),t(i,n[r]))}}(r,i),e.exports={configAttributes:r,dfltConfig:i}},{}],236:[function(t,e,n){"use strict";var r=t("../registry"),i=t("../lib"),a=t("../plots/attributes"),o=t("../plots/layout_attributes"),s=t("../plots/frame_attributes"),l=t("../plots/animation_attributes"),c=t("./plot_config").configAttributes,u=t("../plots/polar/legacy/area_attributes"),d=t("../plots/polar/legacy/axis_attributes"),h=t("./edit_types"),f=i.extendFlat,p=i.extendDeepAll,g=i.isPlainObject,m=i.isArrayOrTypedArray,v=i.nestedProperty,y=i.valObjectMeta,b=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function x(t,e,n){if(!t)return!1;if(t._isLinkedToArray)if(_(e[n]))n++;else if(n<e.length)return!1;for(;n<e.length;n++){var r=t[e[n]];if(!g(r))break;if(t=r,n===e.length-1)break;if(t._isLinkedToArray){if(!_(e[++n]))return!1}else if("info_array"===t.valType){var i=e[++n];if(!_(i))return!1;var a=t.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===t.dimensions){if(n++,e.length===n)return t;var o=e[n];if(!_(o))return!1;t=a[i][o]}else t=a[i]}else t=a}}return t}function _(t){return t===Math.round(t)&&t>=0}function w(){var t,e,n={};for(t in p(n,o),r.subplotsRegistry)if((e=r.subplotsRegistry[t]).layoutAttributes)if(Array.isArray(e.attr))for(var i=0;i<e.attr.length;i++)M(n,e,e.attr[i]);else M(n,e,"subplot"===e.attr?e.name:e.attr);for(t in n=function(t){return f(t,{radialaxis:d.radialaxis,angularaxis:d.angularaxis}),f(t,d.layout),t}(n),r.componentsRegistry){var a=(e=r.componentsRegistry[t]).schema;if(a&&(a.subplots||a.layout)){var s=a.subplots;if(s&&s.xaxis&&!s.yaxis)for(var l in s.xaxis)delete n.yaxis[l]}else"colorscale"===e.name?p(n,e.layoutAttributes):e.layoutAttributes&&A(n,e.layoutAttributes,e.name)}return{layoutAttributes:T(n)}}function k(){var t={frames:p({},s)};return T(t),t.frames}function T(t){return function(t){n.crawl(t,function(t,e,r){n.isValObject(t)?"data_array"===t.valType?(t.role="data",r[e+"src"]={valType:"string",editType:"none"}):!0===t.arrayOk&&(r[e+"src"]={valType:"string",editType:"none"}):g(t)&&(t.role="object")})}(t),function(t){n.crawl(t,function(t,e,n){if(t){var r=t._isLinkedToArray;r&&(delete t._isLinkedToArray,n[e]={items:{}},n[e].items[r]=t,n[e].role="object")}})}(t),function(t){!function t(e){for(var n in e)if(g(e[n]))t(e[n]);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)t(e[n][r]);else e[n]instanceof RegExp&&(e[n]=e[n].toString())}(t)}(t),t}function M(t,e,n){var r=v(t,n),i=p({},e.layoutAttributes);i._isSubplotObj=!0,r.set(i)}function A(t,e,n){var r=v(t,n);r.set(p(r.get()||{},e))}n.IS_SUBPLOT_OBJ="_isSubplotObj",n.IS_LINKED_TO_ARRAY="_isLinkedToArray",n.DEPRECATED="_deprecated",n.UNDERSCORE_ATTRS=b,n.get=function(){var t={};r.allTypes.concat("area").forEach(function(e){t[e]=function(t){var e,i;"area"===t?(e={attributes:u},i={}):i=(e=r.modules[t]._module).basePlotModule;var o={type:null},s=p({},a),l=p({},e.attributes);n.crawl(l,function(t,e,n,r,i){v(s,i).set(void 0),void 0===t&&v(l,i).set(void 0)}),p(o,s),r.traceIs(t,"noOpacity")&&delete o.opacity,r.traceIs(t,"showLegend")||(delete o.showlegend,delete o.legendgroup),r.traceIs(t,"noHover")&&(delete o.hoverinfo,delete o.hoverlabel),e.selectPoints||delete o.selectedpoints,p(o,l),i.attributes&&p(o,i.attributes),o.type=t;var c={meta:e.meta||{},categories:e.categories||{},animatable:Boolean(e.animatable),type:t,attributes:T(o)};if(e.layoutAttributes){var d={};p(d,e.layoutAttributes),c.layoutAttributes=T(d)}return e.animatable||n.crawl(c,function(t){n.isValObject(t)&&"anim"in t&&delete t.anim}),c}(e)});var e={};return Object.keys(r.transformsRegistry).forEach(function(t){e[t]=function(t){var e=p({},r.transformsRegistry[t].attributes);return Object.keys(r.componentsRegistry).forEach(function(n){var i=r.componentsRegistry[n];i.schema&&i.schema.transforms&&i.schema.transforms[t]&&Object.keys(i.schema.transforms[t]).forEach(function(n){A(e,i.schema.transforms[t][n],n)})}),{attributes:T(e)}}(t)}),{defs:{valObjects:y,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:h.traces,layout:h.layout},impliedEdits:{}},traces:t,layout:w(),transforms:e,frames:k(),animation:T(l),config:T(c)}},n.crawl=function(t,e,r,i){var a=r||0;i=i||"",Object.keys(t).forEach(function(r){var o=t[r];if(-1===b.indexOf(r)){var s=(i?i+".":"")+r;e(o,r,t,a,s),n.isValObject(o)||g(o)&&"impliedEdits"!==r&&n.crawl(o,e,a+1,s)}})},n.isValObject=function(t){return t&&void 0!==t.valType},n.findArrayAttributes=function(t){var e,r,i=[],o=[],s=[];function l(t,n,a,l){o=o.slice(0,l).concat([n]),s=s.slice(0,l).concat([t&&t._isLinkedToArray]),t&&("data_array"===t.valType||!0===t.arrayOk)&&("colorbar"!==o[l-1]||"ticktext"!==n&&"tickvals"!==n)&&function t(e,n,a){var l=e[o[n]],c=a+o[n];if(n===o.length-1)m(l)&&i.push(r+c);else if(s[n]){if(Array.isArray(l))for(var u=0;u<l.length;u++)g(l[u])&&t(l[u],n+1,c+"["+u+"].")}else g(l)&&t(l,n+1,c+".")}(e,0,"")}e=t,r="",n.crawl(a,l),t._module&&t._module.attributes&&n.crawl(t._module.attributes,l);var c=t.transforms;if(c)for(var u=0;u<c.length;u++){var d=c[u],h=d._module;h&&(r="transforms["+u+"].",e=d,n.crawl(h.attributes,l))}return i},n.getTraceValObject=function(t,e){var n,i,o=e[0],s=1;if("transforms"===o){if(1===e.length)return a.transforms;var l=t.transforms;if(!Array.isArray(l)||!l.length)return!1;var c=e[1];if(!_(c)||c>=l.length)return!1;i=(n=(r.transformsRegistry[l[c].type]||{}).attributes)&&n[e[2]],s=3}else if("area"===t.type)i=u[o];else{var d=t._module;if(d||(d=(r.modules[t.type||a.type.dflt]||{})._module),!d)return!1;if(!(i=(n=d.attributes)&&n[o])){var h=d.basePlotModule;h&&h.attributes&&(i=h.attributes[o])}i||(i=a[o])}return x(i,e,s)},n.getLayoutValObject=function(t,e){return x(function(t,e){var n,i,a,s,l=t._basePlotModules;if(l){var c;for(n=0;n<l.length;n++){if((a=l[n]).attrRegex&&a.attrRegex.test(e)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!c&&a.layoutAttributes&&(c=a.layoutAttributes)}var u=a.baseLayoutAttrOverrides;if(u&&e in u)return u[e]}if(c)return c}var h=t._modules;if(h)for(n=0;n<h.length;n++)if((s=h[n].layoutAttributes)&&e in s)return s[e];for(i in r.componentsRegistry){if("colorscale"===(a=r.componentsRegistry[i]).name&&0===e.indexOf("coloraxis"))return a.layoutAttributes[e];if(!a.schema&&e===a.name)return a.layoutAttributes}return e in o?o[e]:"radialaxis"===e||"angularaxis"===e?d[e]:d.layout[e]||!1}(t,e[0]),e,1)}},{"../lib":202,"../plots/animation_attributes":242,"../plots/attributes":244,"../plots/frame_attributes":277,"../plots/layout_attributes":280,"../plots/polar/legacy/area_attributes":283,"../plots/polar/legacy/axis_attributes":284,"../registry":290,"./edit_types":230,"./plot_config":235}],237:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plots/attributes"),a={name:{valType:"string",editType:"none"}};function o(t){return t&&"string"==typeof t}function s(t){return"s"!==t.charAt(t.length-1)&&r.warn("bad argument to arrayDefaultKey: "+t),t.substr(0,t.length-1)+"defaults"}a.templateitemname={valType:"string",editType:"calc"},n.templatedArray=function(t,e){return e._isLinkedToArray=t,e.name=a.name,e.templateitemname=a.templateitemname,e},n.traceTemplater=function(t){var e,n,a={};for(e in t)n=t[e],Array.isArray(n)&&n.length&&(a[e]=0);return{newTrace:function(o){var s={type:e=r.coerce(o,{},i,"type"),_template:null};if(e in a){var l=a[e]%(n=t[e]).length;a[e]++,s._template=n[l]}return s}}},n.newContainer=function(t,e,n){var i=t._template,a=i&&(i[e]||n&&i[n]);return r.isPlainObject(a)||(a=null),t[e]={_template:a}},n.arrayTemplater=function(t,e,n){var r=t._template,i=r&&r[s(e)],a=r&&r[e];Array.isArray(a)&&a.length||(a=[]);var l={};return{newItem:function(t){var e={name:t.name,_input:t},r=e.templateitemname=t.templateitemname;if(!o(r))return e._template=i,e;for(var s=0;s<a.length;s++){var c=a[s];if(c.name===r)return l[r]=1,e._template=c,e}return e[n]=t[n]||!1,e._template=!1,e},defaultItems:function(){for(var t=[],e=0;e<a.length;e++){var n=a[e],r=n.name;if(o(r)&&!l[r]){var i={_template:n,name:r,_input:{_templateitemname:r}};i.templateitemname=n.templateitemname,t.push(i),l[r]=1}}return t}}},n.arrayDefaultKey=s,n.arrayEditor=function(t,e,n){var i=(r.nestedProperty(t,e).get()||[]).length,a=n._index,o=a>=i&&(n._input||{})._templateitemname;o&&(a=i);var s,l=e+"["+a+"]";function c(){s={},o&&(s[l]={},s[l].templateitemname=o)}function u(t,e){o?r.nestedProperty(s[l],t).set(e):s[l+"."+t]=e}function d(){var t=s;return c(),t}return c(),{modifyBase:function(t,e){s[t]=e},modifyItem:u,getUpdateObj:d,applyUpdate:function(e,n){e&&u(e,n);var i=d();for(var a in i)r.nestedProperty(t,a).set(i[a])}}}},{"../lib":202,"../plots/attributes":244}],238:[function(t,e,n){"use strict";var r=t("d3"),i=t("../registry"),a=t("../plots/plots"),o=t("../lib"),s=t("../lib/clear_gl_canvases"),l=t("../components/color"),c=t("../components/drawing"),u=t("../components/titles"),d=t("../components/modebar"),h=t("../plots/cartesian/axes"),f=t("../constants/alignment"),p=t("../plots/cartesian/constraints"),g=p.enforce,m=p.clean,v=t("../plots/cartesian/autorange").doAutoRange;function y(t,e,n){for(var r=0;r<n.length;r++){var i=n[r][0],a=n[r][1];if(!(i[0]>=t[1]||i[1]<=t[0])&&a[0]<e[1]&&a[1]>e[0])return!0}return!1}function b(t){var e,i,s,u,p,g,m=t._fullLayout,v=m._size,b=v.p,_=h.list(t,"",!0);if(m._paperdiv.style({width:t._context.responsive&&m.autosize&&!t._context._hasZeroWidth&&!t.layout.width?"100%":m.width+"px",height:t._context.responsive&&m.autosize&&!t._context._hasZeroHeight&&!t.layout.height?"100%":m.height+"px"}).selectAll(".main-svg").call(c.setSize,m.width,m.height),t._context.setBackground(t,m.paper_bgcolor),n.drawMainTitle(t),d.manage(t),!m._has("cartesian"))return a.previousPromises(t);function k(t,e,n){var r=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===n?e._offset-b-r:e._offset+e._length+b+r:v.t+v.h*(1-(t.position||0))+r%1:e?"right"===n?e._offset+e._length+b+r:e._offset-b-r:v.l+v.w*(t.position||0)+r%1}for(e=0;e<_.length;e++){var T=(u=_[e])._anchorAxis;u._linepositions={},u._lw=c.crispRound(t,u.linewidth,1),u._mainLinePosition=k(u,T,u.side),u._mainMirrorPosition=u.mirror&&T?k(u,T,f.OPPOSITE_SIDE[u.side]):null}var M=[],A=[],C=[],S=1===l.opacity(m.paper_bgcolor)&&1===l.opacity(m.plot_bgcolor)&&m.paper_bgcolor===m.plot_bgcolor;for(i in m._plots)if((s=m._plots[i]).mainplot)s.bg&&s.bg.remove(),s.bg=void 0;else{var D=s.xaxis.domain,O=s.yaxis.domain,E=s.plotgroup;if(y(D,O,C)){var L=E.node(),P=s.bg=o.ensureSingle(E,"rect","bg");L.insertBefore(P.node(),L.childNodes[0]),A.push(i)}else E.select("rect.bg").remove(),C.push([D,O]),S||(M.push(i),A.push(i))}var I,R,N,F,z,V,H,j,B,U,q,G,Z,W=m._bgLayer.selectAll(".bg").data(M);for(W.enter().append("rect").classed("bg",!0),W.exit().remove(),W.each(function(t){m._plots[t].bg=r.select(this)}),e=0;e<A.length;e++)p=(s=m._plots[A[e]]).xaxis,g=s.yaxis,s.bg&&void 0!==p._offset&&void 0!==g._offset&&s.bg.call(c.setRect,p._offset-b,g._offset-b,p._length+2*b,g._length+2*b).call(l.fill,m.plot_bgcolor).style("stroke-width",0);if(!m._hasOnlyLargeSploms)for(i in m._plots){p=(s=m._plots[i]).xaxis,g=s.yaxis;var $,Y,X=s.clipId="clip"+m._uid+i+"plot",Q=o.ensureSingleById(m._clips,"clipPath",X,function(t){t.classed("plotclip",!0).append("rect")});s.clipRect=Q.select("rect").attr({width:p._length,height:g._length}),c.setTranslate(s.plot,p._offset,g._offset),s._hasClipOnAxisFalse?($=null,Y=X):($=X,Y=null),c.setClipUrl(s.plot,$,t),s.layerClipId=Y}function K(t){return"M"+I+","+t+"H"+R}function J(t){return"M"+p._offset+","+t+"h"+p._length}function tt(t){return"M"+t+","+j+"V"+H}function et(t){return"M"+t+","+g._offset+"v"+g._length}function nt(t,e,n){if(!t.showline||i!==t._mainSubplot)return"";if(!t._anchorAxis)return n(t._mainLinePosition);var r=e(t._mainLinePosition);return t.mirror&&(r+=e(t._mainMirrorPosition)),r}for(i in m._plots){g=(s=m._plots[i]).yaxis;var rt="M0,0";x(p=s.xaxis,i)&&(z=w(p,"left",g,_),I=p._offset-(z?b+z:0),V=w(p,"right",g,_),R=p._offset+p._length+(V?b+V:0),N=k(p,g,"bottom"),F=k(p,g,"top"),!(Z=!p._anchorAxis||i!==p._mainSubplot)||"allticks"!==p.mirror&&"all"!==p.mirror||(p._linepositions[i]=[N,F]),rt=nt(p,K,J),Z&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(rt+=K(N)+K(F)),s.xlines.style("stroke-width",p._lw+"px").call(l.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),s.xlines.attr("d",rt);var it="M0,0";x(g,i)&&(q=w(g,"bottom",p,_),H=g._offset+g._length+(q?b:0),G=w(g,"top",p,_),j=g._offset-(G?b:0),B=k(g,p,"left"),U=k(g,p,"right"),!(Z=!g._anchorAxis||i!==g._mainSubplot)||"allticks"!==g.mirror&&"all"!==g.mirror||(g._linepositions[i]=[B,U]),it=nt(g,tt,et),Z&&g.showline&&("all"===g.mirror||"allticks"===g.mirror)&&(it+=tt(B)+tt(U)),s.ylines.style("stroke-width",g._lw+"px").call(l.stroke,g.showline?g.linecolor:"rgba(0,0,0,0)")),s.ylines.attr("d",it)}return h.makeClipPaths(t),a.previousPromises(t)}function x(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function _(t,e,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var i=f.FROM_BL[e];return n.side===e?r.domain[i]===t.domain[i]:n.mirror&&r.domain[1-i]===t.domain[1-i]}function w(t,e,n,r){if(_(t,e,n))return n._lw;for(var i=0;i<r.length;i++){var a=r[i];if(a._mainAxis===n._mainAxis&&_(t,e,a))return a._lw}return 0}function k(t,e){var n=t.title,r=t._size,i=0;switch("start"===e?i=n.pad.l:"end"===e&&(i=-n.pad.r),n.xref){case"paper":return r.l+r.w*n.x+i;case"container":default:return t.width*n.x+i}}function T(t,e){var n=t.title,r=t._size,i=0;if("0em"!==e&&e?e===f.CAP_SHIFT+"em"&&(i=n.pad.t):i=-n.pad.b,"auto"===n.y)return r.t/2;switch(n.yref){case"paper":return r.t+r.h-r.h*n.y+i;case"container":default:return t.height-t.height*n.y+i}}n.layoutStyles=function(t){return o.syncOrAsync([a.doAutoMargin,b],t)},n.drawMainTitle=function(t){var e=t._fullLayout,n=function(t){var e=t.title,n="middle";return o.isRightAnchor(e)?n="end":o.isLeftAnchor(e)&&(n="start"),n}(e),r=function(t){var e=t.title,n="0em";return o.isTopAnchor(e)?n=f.CAP_SHIFT+"em":o.isMiddleAnchor(e)&&(n=f.MID_SHIFT+"em"),n}(e);u.draw(t,"gtitle",{propContainer:e,propName:"title.text",placeholder:e._dfltTitle.plot,attributes:{x:k(e,n),y:T(e,r),"text-anchor":n,dy:r}})},n.doTraceStyle=function(t){var e,r=t.calcdata,o=[];for(e=0;e<r.length;e++){var l=r[e],c=l[0]||{},u=c.trace||{},d=u._module||{},h=d.arraysToCalcdata;h&&h(l,u);var f=d.editStyle;f&&o.push({fn:f,cd0:c})}if(o.length){for(e=0;e<o.length;e++){var p=o[e];p.fn(t,p.cd0)}s(t),n.redrawReglTraces(t)}return a.style(t),i.getComponentMethod("legend","draw")(t),a.previousPromises(t)},n.doColorBars=function(t){return i.getComponentMethod("colorbar","draw")(t),a.previousPromises(t)},n.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,i.call("plot",t,"",e)},n.doLegend=function(t){return i.getComponentMethod("legend","draw")(t),a.previousPromises(t)},n.doTicksRelayout=function(t){return h.draw(t,"redraw"),t._fullLayout._hasOnlyLargeSploms&&(i.subplotsRegistry.splom.updateGrid(t),s(t),n.redrawReglTraces(t)),n.drawMainTitle(t),a.previousPromises(t)},n.doModeBar=function(t){var e=t._fullLayout;d.manage(t);for(var n=0;n<e._basePlotModules.length;n++){var r=e._basePlotModules[n].updateFx;r&&r(t)}return a.previousPromises(t)},n.doCamera=function(t){for(var e=t._fullLayout,n=e._subplots.gl3d,r=0;r<n.length;r++){var i=e[n[r]];i._scene.setViewport(i)}},n.drawData=function(t){var e=t._fullLayout;s(t);for(var r=e._basePlotModules,o=0;o<r.length;o++)r[o].plot(t);return n.redrawReglTraces(t),a.style(t),i.getComponentMethod("shapes","draw")(t),i.getComponentMethod("annotations","draw")(t),i.getComponentMethod("images","draw")(t),e._replotting=!1,a.previousPromises(t)},n.redrawReglTraces=function(t){var e=t._fullLayout;if(e._has("regl")){var n,r,i=t._fullData,a=[],s=[];for(e._hasOnlyLargeSploms&&e._splomGrid.draw(),n=0;n<i.length;n++){var l=i[n];!0===l.visible&&0!==l._length&&("splom"===l.type?e._splomScenes[l.uid].draw():"scattergl"===l.type?o.pushUnique(a,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&o.pushUnique(s,l.subplot))}for(n=0;n<a.length;n++)(r=e._plots[a[n]])._scene&&r._scene.draw();for(n=0;n<s.length;n++)(r=e[s[n]]._subplot)._scene&&r._scene.draw()}},n.doAutoRangeAndConstraints=function(t){for(var e,n=h.list(t,"",!0),r={},i=0;i<n.length;i++)if(!r[(e=n[i])._id]){r[e._id]=1,m(t,e),v(t,e);var a=e._matchGroup;if(a)for(var o in a){var s=h.getFromId(t,o);v(t,s,e.range),r[o]=1}}g(t)},n.finalDraw=function(t){i.getComponentMethod("rangeslider","draw")(t),i.getComponentMethod("rangeselector","draw")(t)},n.drawMarginPushers=function(t){i.getComponentMethod("legend","draw")(t),i.getComponentMethod("rangeselector","draw")(t),i.getComponentMethod("sliders","draw")(t),i.getComponentMethod("updatemenus","draw")(t),i.getComponentMethod("colorbar","draw")(t)}},{"../components/color":75,"../components/drawing":97,"../components/modebar":135,"../components/titles":170,"../constants/alignment":177,"../lib":202,"../lib/clear_gl_canvases":190,"../plots/cartesian/autorange":247,"../plots/cartesian/axes":248,"../plots/cartesian/constraints":255,"../plots/plots":282,"../registry":290,d3:9}],239:[function(t,e,n){"use strict";var r=t("../lib"),i=r.isPlainObject,a=t("./plot_schema"),o=t("../plots/plots"),s=t("../plots/attributes"),l=t("./plot_template"),c=t("./plot_config").dfltConfig;function u(t,e){t=r.extendDeep({},t);var n,a,o=Object.keys(t).sort();function s(e,n,r){if(i(n)&&i(e))u(e,n);else if(Array.isArray(n)&&Array.isArray(e)){var o=l.arrayTemplater({_template:t},r);for(a=0;a<n.length;a++){var s=n[a],c=o.newItem(s)._template;c&&u(c,s)}var d=o.defaultItems();for(a=0;a<d.length;a++)n.push(d[a]._template);for(a=0;a<n.length;a++)delete n[a].templateitemname}}for(n=0;n<o.length;n++){var c=o[n],h=t[c];if(c in e?s(h,e[c],c):e[c]=h,d(c)===c)for(var f in e){var p=d(f);f===p||p!==c||f in t||s(h,e[f],c)}}}function d(t){return t.replace(/[0-9]+$/,"")}function h(t,e,n,a,o){var s=o&&n(o);for(var c in t){var u=t[c],f=g(t,c,a),p=g(t,c,o),m=n(p);if(!m){var v=d(c);v!==c&&(m=n(p=g(t,v,o)))}if(!(s&&s===m||!m||m._noTemplating||"data_array"===m.valType||m.arrayOk&&Array.isArray(u)))if(!m.valType&&i(u))h(u,e,n,f,p);else if(m._isLinkedToArray&&Array.isArray(u))for(var y=!1,b=0,x={},_=0;_<u.length;_++){var w=u[_];if(i(w)){var k=w.name;if(k)x[k]||(h(w,e,n,g(u,b,f),g(u,b,p)),b++,x[k]=1);else if(!y){var T=g(t,l.arrayDefaultKey(c),a),M=g(u,b,f);h(w,e,n,M,g(u,b,p));var A=r.nestedProperty(e,M);r.nestedProperty(e,T).set(A.get()),A.set(null),y=!0}}}else r.nestedProperty(e,f).set(u)}}function f(t,e){return a.getLayoutValObject(t,r.nestedProperty({},e).parts)}function p(t,e){return a.getTraceValObject(t,r.nestedProperty({},e).parts)}function g(t,e,n){return n?Array.isArray(t)?n+"["+e+"]":n+"."+e:e}function m(t){for(var e=0;e<t.length;e++)if(i(t[e]))return!0}function v(t){var e;switch(t.code){case"data":e="The template has no key data.";break;case"layout":e="The template has no key layout.";break;case"missing":e=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case"unused":e=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case"reused":e="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}return t.msg=e,t}n.makeTemplate=function(t){t=r.isPlainObject(t)?t:r.getGraphDiv(t),t=r.extendDeep({_context:c},{data:t.data,layout:t.layout}),o.supplyDefaults(t);var e=t.data||[],n=t.layout||{};n._basePlotModules=t._fullLayout._basePlotModules,n._modules=t._fullLayout._modules;var a={data:{},layout:{}};e.forEach(function(t){var e={};h(t,e,p.bind(null,t));var n=r.coerce(t,{},s,"type"),i=a.data[n];i||(i=a.data[n]=[]),i.push(e)}),h(n,a.layout,f.bind(null,n)),delete a.layout.template;var l=n.template;if(i(l)){var d,g,m,v,y,b,x=l.layout;i(x)&&u(x,a.layout);var _=l.data;if(i(_)){for(g in a.data)if(m=_[g],Array.isArray(m)){for(b=(y=a.data[g]).length,v=m.length,d=0;d<b;d++)u(m[d%v],y[d]);for(d=b;d<v;d++)y.push(r.extendDeep({},m[d]))}for(g in _)g in a.data||(a.data[g]=r.extendDeep([],_[g]))}}return a},n.validateTemplate=function(t,e){var n=r.extendDeep({},{_context:c,data:t.data,layout:t.layout}),a=n.layout||{};i(e)||(e=a.template||{});var s=e.layout,l=e.data,u=[];n.layout=a,n.layout.template=e,o.supplyDefaults(n);var h=n._fullLayout,f=n._fullData,p={};if(i(s)?(function t(e,n){for(var r in e)if("_"!==r.charAt(0)&&i(e[r])){var a,o=d(r),s=[];for(a=0;a<n.length;a++)s.push(g(e,r,n[a])),o!==r&&s.push(g(e,o,n[a]));for(a=0;a<s.length;a++)p[s[a]]=1;t(e[r],s)}}(h,["layout"]),function t(e,n){for(var r in e)if(-1===r.indexOf("defaults")&&i(e[r])){var a=g(e,r,n);p[a]?t(e[r],a):u.push({code:"unused",path:a})}}(s,"layout")):u.push({code:"layout"}),i(l)){for(var y,b={},x=0;x<f.length;x++){var _=f[x];b[y=_.type]=(b[y]||0)+1,_._fullInput._template||u.push({code:"missing",index:_._fullInput.index,traceType:y})}for(y in l){var w=l[y].length,k=b[y]||0;w>k?u.push({code:"unused",traceType:y,templateCount:w,dataCount:k}):k>w&&u.push({code:"reused",traceType:y,templateCount:w,dataCount:k})}}else u.push({code:"data"});if(function t(e,n){for(var r in e)if("_"!==r.charAt(0)){var a=e[r],o=g(e,r,n);i(a)?(Array.isArray(e)&&!1===a._template&&a.templateitemname&&u.push({code:"missing",path:o,templateitemname:a.templateitemname}),t(a,o)):Array.isArray(a)&&m(a)&&t(a,o)}}({data:f,layout:h},""),u.length)return u.map(v)}},{"../lib":202,"../plots/attributes":244,"../plots/plots":282,"./plot_config":235,"./plot_schema":236,"./plot_template":237}],240:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("./plot_api"),a=t("../plots/plots"),o=t("../lib"),s=t("../snapshot/helpers"),l=t("../snapshot/tosvg"),c=t("../snapshot/svgtoimg"),u=t("../version").version,d={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};e.exports=function(t,e){var n,h,f,p;function g(t){return!(t in e)||o.validate(e[t],d[t])}if(e=e||{},o.isPlainObject(t)?(n=t.data||[],h=t.layout||{},f=t.config||{},p={}):(t=o.getGraphDiv(t),n=o.extendDeep([],t.data),h=o.extendDeep({},t.layout),f=t._context,p=t._fullLayout||{}),!g("width")&&null!==e.width||!g("height")&&null!==e.height)throw new Error("Height and width should be pixel values.");if(!g("format"))throw new Error("Export format is not "+o.join2(d.format.values,", "," or ")+".");var m={};function v(t,n){return o.coerce(e,m,d,t,n)}var y=v("format"),b=v("width"),x=v("height"),_=v("scale"),w=v("setBackground"),k=v("imageDataOnly"),T=document.createElement("div");T.style.position="absolute",T.style.left="-5000px",document.body.appendChild(T);var M=o.extendFlat({},h);b?M.width=b:null===e.width&&r(p.width)&&(M.width=p.width),x?M.height=x:null===e.height&&r(p.height)&&(M.height=p.height);var A=o.extendFlat({},f,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),C=s.getRedrawFunc(T);function S(){return new Promise(function(t){setTimeout(t,s.getDelay(T._fullLayout))})}function D(){return new Promise(function(t,e){var n=l(T,y,_),r=T._fullLayout.width,d=T._fullLayout.height;function h(){i.purge(T),document.body.removeChild(T)}if("full-json"===y){var f=a.graphJson(T,!1,"keepdata","object",!0,!0);return f.version=u,f=JSON.stringify(f),h(),t(k?f:s.encodeJSON(f))}if(h(),"svg"===y)return t(k?n:s.encodeSVG(n));var p=document.createElement("canvas");p.id=o.randstr(),c({format:y,width:r,height:d,scale:_,canvas:p,svg:n,promise:!0}).then(t).catch(e)})}return new Promise(function(t,e){i.plot(T,n,M,A).then(C).then(S).then(D).then(function(e){t(function(t){return k?t.replace(s.IMAGE_URL_PREFIX,""):t}(e))}).catch(function(t){e(t)})})}},{"../lib":202,"../plots/plots":282,"../snapshot/helpers":294,"../snapshot/svgtoimg":296,"../snapshot/tosvg":298,"../version":358,"./plot_api":234,"fast-isnumeric":11}],241:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plots/plots"),a=t("./plot_schema"),o=t("./plot_config").dfltConfig,s=r.isPlainObject,l=Array.isArray,c=r.isArrayOrTypedArray;function u(t,e,n,i,a,o){o=o||[];for(var d=Object.keys(t),h=0;h<d.length;h++){var f=d[h];if("transforms"!==f){var v=o.slice();v.push(f);var y=t[f],b=e[f],x=m(n,f),_=(x||{}).valType,w="info_array"===_,k="colorscale"===_,T=(x||{}).items;if(g(n,f))if(s(y)&&s(b)&&"any"!==_)u(y,b,x,i,a,v);else if(w&&l(y)){y.length>b.length&&i.push(p("unused",a,v.concat(b.length)));var M,A,C,S,D=b.length,O=Array.isArray(T);if(O&&(D=Math.min(D,T.length)),2===x.dimensions)for(A=0;A<D;A++)if(l(y[A])){y[A].length>b[A].length&&i.push(p("unused",a,v.concat(A,b[A].length)));var E=b[A].length;for(M=0;M<(O?Math.min(E,T[A].length):E);M++)S=b[A][M],r.validate(C=y[A][M],O?T[A][M]:T)?S!==C&&S!==+C&&i.push(p("dynamic",a,v.concat(A,M),C,S)):i.push(p("value",a,v.concat(A,M),C))}else i.push(p("array",a,v.concat(A),y[A]));else for(A=0;A<D;A++)S=b[A],r.validate(C=y[A],O?T[A]:T)?S!==C&&S!==+C&&i.push(p("dynamic",a,v.concat(A),C,S)):i.push(p("value",a,v.concat(A),C))}else if(x.items&&!w&&l(y)){var L,P,I=T[Object.keys(T)[0]],R=[];for(L=0;L<b.length;L++){var N=b[L]._index||L;if((P=v.slice()).push(N),s(y[N])&&s(b[L])){R.push(N);var F=y[N],z=b[L];s(F)&&!1!==F.visible&&!1===z.visible?i.push(p("invisible",a,P)):u(F,z,I,i,a,P)}}for(L=0;L<y.length;L++)(P=v.slice()).push(L),s(y[L])?-1===R.indexOf(L)&&i.push(p("unused",a,P)):i.push(p("object",a,P,y[L]))}else!s(y)&&s(b)?i.push(p("object",a,v,y)):c(y)||!c(b)||w||k?f in e?r.validate(y,x)?"enumerated"===x.valType&&(x.coerceNumber&&y!==+b||y!==b)&&i.push(p("dynamic",a,v,y,b)):i.push(p("value",a,v,y)):i.push(p("unused",a,v,y)):i.push(p("array",a,v,y));else i.push(p("schema",a,v))}}return i}function d(t,e){for(var n=t.layout.layoutAttributes,i=0;i<e.length;i++){var a=e[i],o=t.traces[a.type],s=o.layoutAttributes;s&&r.extendFlat(a.subplot?n[o.attributes.subplot.dflt]:n,s)}return n}e.exports=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var n,c,h=a.get(),f=[],g={_context:r.extendFlat({},o)};l(t)?(g.data=r.extendDeep([],t),n=t):(g.data=[],n=[],f.push(p("array","data"))),s(e)?(g.layout=r.extendDeep({},e),c=e):(g.layout={},c={},arguments.length>1&&f.push(p("object","layout"))),i.supplyDefaults(g);for(var m=g._fullData,v=n.length,y=0;y<v;y++){var b=n[y],x=["data",y];if(s(b)){var _=m[y],w=_.type,k=h.traces[w].attributes;k.type={valType:"enumerated",values:[w]},!1===_.visible&&!1!==b.visible&&f.push(p("invisible",x)),u(b,_,k,f,x);var T=b.transforms,M=_.transforms;if(T){l(T)||f.push(p("array",x,["transforms"])),x.push("transforms");for(var A=0;A<T.length;A++){var C=["transforms",A],S=T[A].type;if(s(T[A])){var D=h.transforms[S]?h.transforms[S].attributes:{};D.type={valType:"enumerated",values:Object.keys(h.transforms)},u(T[A],M[A],D,f,x,C)}else f.push(p("object",x,C))}}}else f.push(p("object",x))}return u(c,g._fullLayout,d(h,m),f,"layout"),0===f.length?void 0:f};var h={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":f(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":f(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return f(t)+"key "+e+" is not part of the schema"},unused:function(t,e,n){var r=s(n)?"container":"key";return f(t)+r+" "+e+" did not get coerced"},dynamic:function(t,e,n,r){return[f(t)+"key",e,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(t,e){return(e?f(t)+"item "+e:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,e,n){return[f(t)+"key "+e,"is set to an invalid value ("+n+")"].join(" ")}};function f(t){return l(t)?"In data trace "+t[1]+", ":"In "+t+", "}function p(t,e,n,i,a){var o,s;n=n||"",l(e)?(o=e[0],s=e[1]):(o=e,s=null);var c=function(t){if(!l(t))return String(t);for(var e="",n=0;n<t.length;n++){var r=t[n];"number"==typeof r?e=e.substr(0,e.length-1)+"["+r+"]":e+=r,n<t.length-1&&(e+=".")}return e}(n),u=h[t](e,c,i,a);return r.log(u),{code:t,container:o,trace:s,path:n,astr:c,msg:u}}function g(t,e){var n=y(e),r=n.keyMinusId;return!!(r in t&&t[r]._isSubplotObj&&n.id)||e in t}function m(t,e){return e in t?t[e]:t[y(e).keyMinusId]}var v=r.counterRegex("([a-z]+)");function y(t){var e=t.match(v);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":202,"../plots/plots":282,"./plot_config":235,"./plot_schema":236}],242:[function(t,e,n){"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],243:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plot_api/plot_template");e.exports=function(t,e,n){var a,o,s=n.name,l=n.inclusionAttr||"visible",c=e[s],u=r.isArrayOrTypedArray(t[s])?t[s]:[],d=e[s]=[],h=i.arrayTemplater(e,s,l);for(a=0;a<u.length;a++){var f=u[a];r.isPlainObject(f)?o=h.newItem(f):(o=h.newItem({}))[l]=!1,o._index=a,!1!==o[l]&&n.handleItemDefaults(f,o,e,n),d.push(o)}var p=h.defaultItems();for(a=0;a<p.length;a++)(o=p[a])._index=d.length,n.handleItemDefaults({},o,e,n,{}),d.push(o);if(r.isArrayOrTypedArray(c)){var g=Math.min(c.length,d.length);for(a=0;a<g;a++)r.relinkPrivateKeys(d[a],c[a])}return d}},{"../lib":202,"../plot_api/plot_template":237}],244:[function(t,e,n){"use strict";var r=t("../components/fx/attributes");e.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:r.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":106}],245:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=i.dateTime2ms,o=i.incrementMonth,s=t("../../constants/numerical").ONEAVGMONTH;e.exports=function(t,e,n,i){if("date"!==e.type)return i;var l=t[n+"periodalignment"];if(!l)return i;var c,u=t[n+"period"];if(r(u)){if((u=+u)<=0)return i}else if("string"==typeof u&&"M"===u.charAt(0)){var d=+u.substring(1);if(!(d>0&&Math.round(d)===d))return i;c=d}for(var h=e.calendar,f="start"===l,p="end"===l,g=a(t[n+"period0"],h)||0,m=[],v=i.length,y=0;y<v;y++){var b,x,_,w=i[y];if(c){for(b=Math.round((w-g)/(c*s)),_=o(g,c*b,h);_>w;)_=o(_,-c,h);for(;_<=w;)_=o(_,c,h);x=o(_,-c,h)}else{for(_=g+(b=Math.round((w-g)/u))*u;_>w;)_-=u;for(;_<=w;)_+=u;x=_-u}m[y]=f?x:p?_:(x+_)/2}return m}},{"../../constants/numerical":181,"../../lib":202,"fast-isnumeric":11}],246:[function(t,e,n){"use strict";e.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],247:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../../constants/numerical").FP_SAFE,o=t("../../registry"),s=t("./axis_ids"),l=s.getFromId,c=s.isLinked;function u(t,e){var n,r,a=[],o=t._fullLayout,s=h(o,e,0),l=h(o,e,1),c=f(t,e),u=c.min,p=c.max;if(0===u.length||0===p.length)return i.simpleMap(e.range,e.r2l);var g=u[0].val,m=p[0].val;for(n=1;n<u.length&&g===m;n++)g=Math.min(g,u[n].val);for(n=1;n<p.length&&g===m;n++)m=Math.max(m,p[n].val);var v=!1;if(e.range){var y=i.simpleMap(e.range,e.r2l);v=y[1]<y[0]}"reversed"===e.autorange&&(v=!0,e.autorange=!0);var b,x,_,w,k,T,M=e.rangemode,A="tozero"===M,C="nonnegative"===M,S=e._length,D=S/10,O=0;for(n=0;n<u.length;n++)for(b=u[n],r=0;r<p.length;r++)(T=(x=p[r]).val-b.val-d(e,b.val,x.val))>0&&((k=S-s(b)-l(x))>D?T/k>O&&(_=b,w=x,O=T/k):T/S>O&&(_={val:b.val,nopad:1},w={val:x.val,nopad:1},O=T/S));if(g===m){var E=g-1,L=g+1;if(A)if(0===g)a=[0,1];else{var P=(g>0?p:u).reduce(function(t,e){return Math.max(t,l(e))},0),I=g/(1-Math.min(.5,P/S));a=g>0?[0,I]:[I,0]}else a=C?[Math.max(0,E),Math.max(1,L)]:[E,L]}else A?(_.val>=0&&(_={val:0,nopad:1}),w.val<=0&&(w={val:0,nopad:1})):C&&(_.val-O*s(_)<0&&(_={val:0,nopad:1}),w.val<=0&&(w={val:1,nopad:1})),O=(w.val-_.val-d(e,b.val,x.val))/(S-s(_)-l(w)),a=[_.val-O*s(_),w.val+O*l(w)];return v&&a.reverse(),i.simpleMap(a,e.l2r||Number)}function d(t,e,n){var r=0;if(t.rangebreaks)for(var i=t.locateBreaks(e,n),a=0;a<i.length;a++){var o=i[a];r+=o.max-o.min}return r}function h(t,e,n){var r=.05*e._length,a=e._anchorAxis||{};if(-1!==(e.ticklabelposition||"").indexOf("inside")||-1!==(a.ticklabelposition||"").indexOf("inside")){var o="reversed"===e.autorange;if(!o){var s=i.simpleMap(e.range,e.r2l);o=s[1]<s[0]}o&&(n=!n)}var l=0;return c(t,e._id)||(l=function(t,e){var n=0,r=t._anchorAxis||{};if(-1!==(r.ticklabelposition||"").indexOf("inside")&&(!e&&("left"===r.side||"bottom"===r.side)||e&&("top"===r.side||"right"===r.side))){var a="x"===t._id.charAt(0);if(r._vals){var o=i.deg2rad(r._tickAngles[r._id+"tick"]||0),s=Math.abs(Math.cos(o)),l=Math.abs(Math.sin(o));r._vals.forEach(function(t){if(t.bb){var e=6+t.bb.width,r=6+t.bb.height;n=Math.max(n,a?Math.max(e*s,r*l):Math.max(r*s,e*l))}})}"inside"===r.ticks&&"inside"===r.ticklabelposition&&(n+=r.ticklen||0)}return n}(e,n)),r=Math.max(l,r),"domain"===e.constrain&&e._inputDomain&&(r*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])),function(t){return t.nopad?0:t.pad+(t.extrapad?r:l)}}function f(t,e,n){var r,i,a,o=e._id,s=t._fullLayout,c=[],u=[];function d(t,e){for(r=0;r<e.length;r++){var n=t[e[r]],s=(n._extremes||{})[o];if(!0===n.visible&&s){for(i=0;i<s.min.length;i++)p(c,(a=s.min[i]).val,a.pad,{extrapad:a.extrapad});for(i=0;i<s.max.length;i++)g(u,(a=s.max[i]).val,a.pad,{extrapad:a.extrapad})}}}if(d(t._fullData,e._traceIndices),d(s.annotations||[],e._annIndices||[]),d(s.shapes||[],e._shapeIndices||[]),e._matchGroup&&!n)for(var h in e._matchGroup)if(h!==e._id){var m=l(t,h),v=f(t,m,!0),y=e._length/m._length;for(i=0;i<v.min.length;i++)p(c,(a=v.min[i]).val,a.pad*y,{extrapad:a.extrapad});for(i=0;i<v.max.length;i++)g(u,(a=v.max[i]).val,a.pad*y,{extrapad:a.extrapad})}return{min:c,max:u}}function p(t,e,n,r){m(t,e,n,r,y)}function g(t,e,n,r){m(t,e,n,r,b)}function m(t,e,n,r,i){for(var a=r.tozero,o=r.extrapad,s=!0,l=0;l<t.length&&s;l++){var c=t[l];if(i(c.val,e)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}i(e,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(t.splice(l,1),l--)}if(s){var u=a&&0===e;t.push({val:e,pad:u?0:n,extrapad:!u&&o})}}function v(t){return r(t)&&Math.abs(t)<a}function y(t,e){return t<=e}function b(t,e){return t>=e}e.exports={getAutoRange:u,makePadFn:h,doAutoRange:function(t,e,n){if(e.setScale(),e.autorange){e.range=n?n.slice():u(t,e),e._r=e.range.slice(),e._rl=i.simpleMap(e._r,e.r2l);var r=e._input,a={};a[e._attr+".range"]=e.range,a[e._attr+".autorange"]=e.autorange,o.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,a),r.range=e.range.slice(),r.autorange=e.autorange}var s=e._anchorAxis;if(s&&s.rangeslider){var l=s.rangeslider[e._name];l&&"auto"===l.rangemode&&(l.range=u(t,e)),s._input.rangeslider[e._name]=i.extendFlat({},l)}},findExtremes:function(t,e,n){n||(n={}),t._m||t.setScale();var i,o,s,l,c,u,d,h,f,m=[],y=[],b=e.length,x=n.padded||!1,_=n.tozero&&("linear"===t.type||"-"===t.type),w="log"===t.type,k=!1,T=n.vpadLinearized||!1;function M(t){if(Array.isArray(t))return k=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var A=M((t._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),C=M((t._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),S=M(n.vpadplus||n.vpad),D=M(n.vpadminus||n.vpad);if(!k){if(h=1/0,f=-1/0,w)for(i=0;i<b;i++)(o=e[i])<h&&o>0&&(h=o),o>f&&o<a&&(f=o);else for(i=0;i<b;i++)(o=e[i])<h&&o>-a&&(h=o),o>f&&o<a&&(f=o);e=[h,f],b=2}var O={tozero:_,extrapad:x};function E(n){r(s=e[n])&&(u=A(n),d=C(n),T?(l=t.c2l(s)-D(n),c=t.c2l(s)+S(n)):(h=s-D(n),f=s+S(n),w&&h<f/10&&(h=f/10),l=t.c2l(h),c=t.c2l(f)),_&&(l=Math.min(0,l),c=Math.max(0,c)),v(l)&&p(m,l,d,O),v(c)&&g(y,c,u,O))}var L=Math.min(6,b);for(i=0;i<L;i++)E(i);for(i=b-1;i>=L;i--)E(i);return{min:m,max:y,opts:n}},concatExtremes:f}},{"../../constants/numerical":181,"../../lib":202,"../../registry":290,"./axis_ids":251,"fast-isnumeric":11}],248:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../../plots/plots"),o=t("../../registry"),s=t("../../lib"),l=s.strTranslate,c=t("../../lib/svg_text_utils"),u=t("../../components/titles"),d=t("../../components/color"),h=t("../../components/drawing"),f=t("./layout_attributes"),p=t("./clean_ticks"),g=t("../../constants/numerical"),m=g.ONEMAXYEAR,v=g.ONEAVGYEAR,y=g.ONEMINYEAR,b=g.ONEMAXQUARTER,x=g.ONEAVGQUARTER,_=g.ONEMINQUARTER,w=g.ONEMAXMONTH,k=g.ONEAVGMONTH,T=g.ONEMINMONTH,M=g.ONEWEEK,A=g.ONEDAY,C=A/2,S=g.ONEHOUR,D=g.ONEMIN,O=g.ONESEC,E=g.MINUS_SIGN,L=g.BADNUM,P=t("../../constants/alignment"),I=P.MID_SHIFT,R=P.CAP_SHIFT,N=P.LINE_SPACING,F=P.OPPOSITE_SIDE,z=e.exports={};z.setConvert=t("./set_convert");var V=t("./axis_autotype"),H=t("./axis_ids"),j=H.idSort,B=H.isLinked;z.id2name=H.id2name,z.name2id=H.name2id,z.cleanId=H.cleanId,z.list=H.list,z.listIds=H.listIds,z.getFromId=H.getFromId,z.getFromTrace=H.getFromTrace;var U=t("./autorange");function q(t){var e=1e-4*(t[1]-t[0]);return[t[0]-e,t[1]+e]}z.getAutoRange=U.getAutoRange,z.findExtremes=U.findExtremes,z.coerceRef=function(t,e,n,r,i,a){var o=r.charAt(r.length-1),l=n._fullLayout._subplots[o+"axis"],c=r+"ref",u={};return i||(i=l[0]||("string"==typeof a?a:a[0])),a||(a=i),l=l.concat(l.map(function(t){return t+" domain"})),u[c]={valType:"enumerated",values:l.concat(a?"string"==typeof a?[a]:a:[]),dflt:i},s.coerce(t,e,u,c)},z.getRefType=function(t){return void 0===t?t:"paper"===t?"paper":"pixel"===t?"pixel":/( domain)$/.test(t)?"domain":"range"},z.coercePosition=function(t,e,n,r,i,a){var o,l;if("range"!==z.getRefType(r))o=s.ensureNumber,l=n(i,a);else{var c=z.getFromId(e,r);l=n(i,a=c.fraction2r(a)),o=c.cleanPos}t[i]=o(l)},z.cleanPosition=function(t,e,n){return("paper"===n||"pixel"===n?s.ensureNumber:z.getFromId(e,n).cleanPos)(t)},z.redrawComponents=function(t,e){e=e||z.listIds(t);var n=t._fullLayout;function r(r,i,a,s){for(var l=o.getComponentMethod(r,i),c={},u=0;u<e.length;u++)for(var d=n[z.id2name(e[u])][a],h=0;h<d.length;h++){var f=d[h];if(!c[f]&&(l(t,f),c[f]=1,s))return}}r("annotations","drawOne","_annIndices"),r("shapes","drawOne","_shapeIndices"),r("images","draw","_imgIndices",!0)};var G=z.getDataConversions=function(t,e,n,r){var i,a="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(a)){if(i={type:V(r,void 0,{autotypenumbers:t._fullLayout.autotypenumbers}),_categories:[]},z.setConvert(i),"category"===i.type)for(var o=0;o<r.length;o++)i.d2c(r[o])}else i=z.getFromTrace(t,e,a);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===a?{d2c:W,c2d:W}:{d2c:Z,c2d:Z}};function Z(t){return+t}function W(t){return String(t)}function $(t){return+t.substring(1)}z.getDataToCoordFunc=function(t,e,n,r){return G(t,e,n,r).d2c},z.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},z.minDtick=function(t,e,n,r){-1===["log","category","multicategory"].indexOf(t.type)&&r?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=n):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((n-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=n):((e/t._minDtick+1e-6)%1>2e-6||((n-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},z.saveRangeInitial=function(t,e){for(var n=z.list(t,"",!0),r=!1,i=0;i<n.length;i++){var a=n[i],o=void 0===a._rangeInitial;(o&&!1===a.autorange||e&&(o||a.range[0]!==a._rangeInitial[0]||a.range[1]!==a._rangeInitial[1]))&&(a._rangeInitial=a.range.slice(),r=!0)}return r},z.saveShowSpikeInitial=function(t,e){for(var n=z.list(t,"",!0),r=!1,i="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial;(s||e&&(s||!(o.showspikes===o._showspikes)))&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==i||o.showspikes||(i="off")}return t._fullLayout._cartesianSpikesEnabled=i,r},z.autoBin=function(t,e,n,r,a,o){var l,c=s.aggNums(Math.min,null,t),u=s.aggNums(Math.max,null,t);if("category"===e.type||"multicategory"===e.type)return{start:c-.5,end:u+.5,size:Math.max(1,Math.round(o)||1),_dataSpan:u-c};if(a||(a=e.calendar),l="log"===e.type?{type:"linear",range:[c,u]}:{type:e.type,range:s.simpleMap([c,u],e.c2r,0,a),calendar:a},z.setConvert(l),o=o&&p.dtick(o,l.type))l.dtick=o,l.tick0=p.tick0(void 0,l.type,a);else{var d;if(n)d=(u-c)/n;else{var h=s.distinctVals(t),f=Math.pow(10,Math.floor(Math.log(h.minDiff)/Math.LN10)),g=f*s.roundUp(h.minDiff/f,[.9,1.9,4.9,9.9],!0);d=Math.max(g,2*s.stdev(t)/Math.pow(t.length,r?.25:.4)),i(d)||(d=1)}z.autoTicks(l,d)}var m,v=l.dtick,y=z.tickIncrement(z.tickFirst(l),v,"reverse",a);if("number"==typeof v)m=(y=function(t,e,n,r,a){var o=0,s=0,l=0,c=0;function u(e){return(1+100*(e-t)/n.dtick)%100<2}for(var d=0;d<e.length;d++)e[d]%1==0?l++:i(e[d])||c++,u(e[d])&&o++,u(e[d]+n.dtick/2)&&s++;var h=e.length-c;if(l===h&&"date"!==n.type)n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick);else if(s<.1*h&&(o>.3*h||u(r)||u(a))){var f=n.dtick/2;t+=t+f<r?f:-f}return t}(y,t,l,c,u))+(1+Math.floor((u-y)/v))*v;else for("M"===l.dtick.charAt(0)&&(y=function(t,e,n,r,i){var a=s.findExactDates(e,i);if(a.exactDays>.8){var o=Number(n.substr(1));a.exactYears>.8&&o%12==0?t=z.tickIncrement(t,"M6","reverse")+1.5*A:a.exactMonths>.8?t=z.tickIncrement(t,"M1","reverse")+15.5*A:t-=C;var l=z.tickIncrement(t,n);if(l<=r)return l}return t}(y,t,v,c,a)),m=y;m<=u;)m=z.tickIncrement(m,v,!1,a);return{start:e.c2r(y,0,a),end:e.c2r(m,0,a),size:v,_dataSpan:u-c}},z.prepTicks=function(t,e){var n=s.simpleMap(t.range,t.r2l,void 0,void 0,e);if(t._dtickInit=t.dtick,t._tick0Init=t.tick0,"auto"===t.tickmode||!t.dtick){var r,a=t.nticks;a||("category"===t.type||"multicategory"===t.type?a=t._length/(r=t.tickfont?1.2*(t.tickfont.size||12):15):(r="y"===t._id.charAt(0)?40:80,a=s.constrain(t._length/r,4,9)+1),"radialaxis"===t._name&&(a*=2)),"array"===t.tickmode&&(a*=100),t._roughDTick=Math.abs(n[1]-n[0])/a,z.autoTicks(t,t._roughDTick),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}"period"===t.ticklabelmode&&function(t){var e;function n(){return!(i(t.dtick)||"M"!==t.dtick.charAt(0))}var r=n(),a=z.getTickFormat(t);if(a){var o=t._dtickInit!==t.dtick;/%[fLQsSMX]/.test(a)||(/%[HI]/.test(a)?(e=S,o&&!r&&t.dtick<S&&(t.dtick=S)):/%p/.test(a)?(e=C,o&&!r&&t.dtick<C&&(t.dtick=C)):/%[Aadejuwx]/.test(a)?(e=A,o&&!r&&t.dtick<A&&(t.dtick=A)):/%[UVW]/.test(a)?(e=M,o&&!r&&t.dtick<M&&(t.dtick=M)):/%[Bbm]/.test(a)?(e=k,o&&(r?$(t.dtick)<1:t.dtick<T)&&(t.dtick="M1")):/%[q]/.test(a)?(e=x,o&&(r?$(t.dtick)<3:t.dtick<_)&&(t.dtick="M3")):/%[Yy]/.test(a)&&(e=v,o&&(r?$(t.dtick)<12:t.dtick<y)&&(t.dtick="M12")))}(r=n())&&t.tick0===t._dowTick0&&(t.tick0=t._rawTick0),t._definedDelta=e}(t),t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),"date"===t.type&&t.dtick<.1&&(t.dtick=.1),rt(t)},z.calcTicks=function(t,e){z.prepTicks(t,e);var n=s.simpleMap(t.range,t.r2l,void 0,void 0,e);if("array"===t.tickmode)return function(t){var e=t.tickvals,n=t.ticktext,r=new Array(e.length),i=q(s.simpleMap(t.range,t.r2l)),a=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]),l=0;Array.isArray(n)||(n=[]);var c="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var u=0;u<e.length;u++){var d=c(e[u]);d>a&&d<o&&(r[l]=void 0===n[u]?z.tickText(t,d):it(t,d,String(n[u])),l++)}return l<e.length&&r.splice(l,e.length-l),t.rangebreaks&&(r=r.filter(function(e){return t.maskBreaks(e.x)!==L})),r}(t);var r=q(n),a=r[0],o=r[1],l=n[1]<n[0],c=Math.min(n[0],n[1]),u=Math.max(n[0],n[1]),d="log"===t.type&&!(i(t.dtick)||"L"===t.dtick.charAt(0)),h="period"===t.ticklabelmode;if(t._tmin=z.tickFirst(t,e),t._tmin<a!==l)return[];"category"!==t.type&&"multicategory"!==t.type||(o=l?Math.max(-.5,o):Math.min(t._categories.length-.5,o));var f=t._tmin;t.rangebreaks&&t._tick0Init!==t.tick0&&(f=wt(f,t),l||(f=z.tickIncrement(f,t.dtick,!l,t.calendar))),h&&(f=z.tickIncrement(f,t.dtick,!l,t.calendar));for(var p,g=Math.max(1e3,t._length||0),D=[],O=null;l?f>=o:f<=o;f=z.tickIncrement(f,t.dtick,l,t.calendar)){if(t.rangebreaks&&!l){if(f<a)continue;if(t.maskBreaks(f)===L&&wt(f,t)>=u)break}if(D.length>g||f===O)break;O=f;var E=!1;d&&f!==(0|f)&&(E=!0),D.push({minor:E,value:f})}if(h&&function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r].value,a=r,o=r+1;r<t.length-1?(a=r,o=r+1):r>0?(a=r-1,o=r):(a=r,o=r);var s,l=Math.abs(t[o].value-t[a].value),c=n||l,u=0;c>=y?u=l>=y&&l<=m?l:v:n===x&&c>=_?u=l>=_&&l<=b?l:x:c>=T?u=l>=T&&l<=w?l:k:n===M&&c>=M?u=M:c>=A?u=A:n===C&&c>=C?u=C:n===S&&c>=S&&(u=S),u>=l&&(u=l,s=!0);var d=i+u;if(e.rangebreaks&&u>0){for(var h=0,f=0;f<84;f++){var p=(f+.5)/84;e.maskBreaks(i*(1-p)+p*d)!==L&&h++}(u*=h/84)||(t[r].drop=!0),s&&l>M&&(u=l)}(u>0||0===r)&&(t[r].periodX=i+u/2)}}(D,t,t._definedDelta),t.rangebreaks){var P="y"===t._id.charAt(0),I=1;"auto"===t.tickmode&&(I=t.tickfont?t.tickfont.size:12);var R=NaN;for(p=D.length-1;p>-1;p--)if(D[p].drop)D.splice(p,1);else{D[p].value=wt(D[p].value,t);var N=t.c2p(D[p].value);(P?R>N-I:R<N+I)?D.splice(l?p+1:p,1):R=N}}_t(t)&&360===Math.abs(n[1]-n[0])&&D.pop(),t._tmax=(D[D.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var F,V,H=[];for(p=0;p<D.length;p++)F=z.tickText(t,D[p].value,!1,D[p].minor),void 0!==(V=D[p].periodX)&&(F.periodX=V,(V>u||V<c)&&(V>u&&(F.periodX=u),V<c&&(F.periodX=c),F.text=" ",t._prevDateHead="")),H.push(F);return t._inCalcTicks=!1,H};var Y=[2,5,10],X=[1,2,3,6,12],Q=[1,2,5,10,15,30],K=[1,2,3,7,14],J=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],tt=[-.301,0,.301,.699,1],et=[15,30,45,90,180];function nt(t,e,n){return e*s.roundUp(t/e,n)}function rt(t){var e=t.dtick;if(t._tickexponent=0,i(e)||"string"==typeof e||(e=1),"category"!==t.type&&"multicategory"!==t.type||(t._tickround=null),"date"===t.type){var n=t.r2l(t.tick0),r=t.l2r(n).replace(/(^-|i)/g,""),a=r.length;if("M"===String(e).charAt(0))t._tickround=a>10||"01-01"!==r.substr(5)?"d":+e.substr(1)%12==0?"y":"m";else if(e>=A&&a<=10||e>=15*A)t._tickround="d";else if(e>=D&&a<=16||e>=S)t._tickround="M";else if(e>=O&&a<=19||e>=D)t._tickround="S";else{var o=t.l2r(n+e).replace(/^-/,"").length;t._tickround=Math.max(a,o)-20,t._tickround<0&&(t._tickround=4)}}else if(i(e)||"L"===e.charAt(0)){var s=t.range.map(t.r2d||Number);i(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1])),c=Math.floor(Math.log(l)/Math.LN10+.01),u=void 0===t.minexponent?3:t.minexponent;Math.abs(c)>u&&(t._tickexponent=ot(t.exponentformat)&&!st(c)?3*Math.round((c-1)/3):c)}else t._tickround=null}function it(t,e,n){var r=t.tickfont||{};return{x:e,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}z.autoTicks=function(t,e){var n;function r(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=s.dateTick0(t.calendar,0);var a=2*e;if(a>v)e/=v,n=r(10),t.dtick="M"+12*nt(e,n,Y);else if(a>k)t.dtick="M"+nt(e/=k,1,X);else if(a>A){t.dtick=nt(e,A,t._hasDayOfWeekBreaks?[1,2,7,14]:K);var o=z.getTickFormat(t),l="period"===t.ticklabelmode;l&&(t._rawTick0=t.tick0),t.tick0=/%[uVW]/.test(o)?s.dateTick0(t.calendar,2):s.dateTick0(t.calendar,1),l&&(t._dowTick0=t.tick0)}else a>S?t.dtick=nt(e,S,X):a>D?t.dtick=nt(e,D,Q):a>O?t.dtick=nt(e,O,Q):(n=r(10),t.dtick=nt(e,n,Y))}else if("log"===t.type){t.tick0=0;var c=s.simpleMap(t.range,t.r2l);if(e>.7)t.dtick=Math.ceil(e);else if(Math.abs(c[1]-c[0])<1){var u=1.5*Math.abs((c[1]-c[0])/e);e=Math.abs(Math.pow(10,c[1])-Math.pow(10,c[0]))/u,n=r(10),t.dtick="L"+nt(e,n,Y)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type||"multicategory"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):_t(t)?(t.tick0=0,t.dtick=nt(e,n=1,et)):(t.tick0=0,n=r(10),t.dtick=nt(e,n,Y));if(0===t.dtick&&(t.dtick=1),!i(t.dtick)&&"string"!=typeof t.dtick){var d=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(d)}},z.tickIncrement=function(t,e,n,a){var o=n?-1:1;if(i(e))return s.increment(t,o*e);var l=e.charAt(0),c=o*Number(e.substr(1));if("M"===l)return s.incrementMonth(t,c,a);if("L"===l)return Math.log(Math.pow(10,t)+c)/Math.LN10;if("D"===l){var u="D2"===e?tt:J,d=t+.01*o,h=s.roundUp(s.mod(d,1),u,n);return Math.floor(d)+Math.log(r.round(Math.pow(10,h),1))/Math.LN10}throw"unrecognized dtick "+String(e)},z.tickFirst=function(t,e){var n=t.r2l||Number,a=s.simpleMap(t.range,n,void 0,void 0,e),o=a[1]<a[0],l=o?Math.floor:Math.ceil,c=q(a)[0],u=t.dtick,d=n(t.tick0);if(i(u)){var h=l((c-d)/u)*u+d;return"category"!==t.type&&"multicategory"!==t.type||(h=s.constrain(h,0,t._categories.length-1)),h}var f=u.charAt(0),p=Number(u.substr(1));if("M"===f){for(var g,m,v,y=0,b=d;y<10;){if(((g=z.tickIncrement(b,u,o,t.calendar))-c)*(b-c)<=0)return o?Math.min(b,g):Math.max(b,g);m=(c-(b+g)/2)/(g-b),v=f+(Math.abs(Math.round(m))||1)*p,b=z.tickIncrement(b,v,m<0?!o:o,t.calendar),y++}return s.error("tickFirst did not converge",t),b}if("L"===f)return Math.log(l((Math.pow(10,c)-d)/p)*p+d)/Math.LN10;if("D"===f){var x="D2"===u?tt:J,_=s.roundUp(s.mod(c,1),x,o);return Math.floor(c)+Math.log(r.round(Math.pow(10,_),1))/Math.LN10}throw"unrecognized dtick "+String(u)},z.tickText=function(t,e,n,r){var a,o=it(t,e),l="array"===t.tickmode,c=n||l,u=t.type,d="category"===u?t.d2l_noadd:t.d2l;if(l&&Array.isArray(t.ticktext)){var h=s.simpleMap(t.range,t.r2l),f=(Math.abs(h[1]-h[0])-(t._lBreaks||0))/1e4;for(a=0;a<t.ticktext.length&&!(Math.abs(e-d(t.tickvals[a]))<f);a++);if(a<t.ticktext.length)return o.text=String(t.ticktext[a]),o}function p(r){return void 0===r||(n?"none"===r:"all"!==r&&e!=={first:t._tmin,last:t._tmax}[r])}var g=n?"never":"none"!==t.exponentformat&&p(t.showexponent)?"hide":"";if("date"===u?function(t,e,n,r){var a=t._tickround,o=n&&t.hoverformat||z.getTickFormat(t);r&&(a=i(a)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[a]);var l,c=s.formatDate(e.x,o,a,t._dateFormat,t.calendar,t._extraFormat),u=c.indexOf("\n");if(-1!==u&&(l=c.substr(u+1),c=c.substr(0,u)),r&&("00:00:00"===c||"00:00"===c?(c=l,l=""):8===c.length&&(c=c.replace(/:00$/,""))),l)if(n)"d"===a?c+=", "+l:c=l+(c?", "+c:"");else if(t._inCalcTicks&&t._prevDateHead===l){var d=-1!==(t.ticklabelposition||"").indexOf("inside"),h=t._realSide||t.side;(!d&&"top"===h||d&&"bottom"===h)&&(c+="<br> ")}else t._prevDateHead=l,c+="<br>"+l;e.text=c}(t,o,n,c):"log"===u?function(t,e,n,r,a){var o=t.dtick,l=e.x,c=t.tickformat,u="string"==typeof o&&o.charAt(0);if("never"===a&&(a=""),r&&"L"!==u&&(o="L3",u="L"),c||"L"===u)e.text=lt(Math.pow(10,l),t,a,r);else if(i(o)||"D"===u&&s.mod(l+.01,1)<.1){var d=Math.round(l),h=Math.abs(d),f=t.exponentformat;"power"===f||ot(f)&&st(d)?(e.text=0===d?1:1===d?"10":"10<sup>"+(d>1?"":E)+h+"</sup>",e.fontSize*=1.25):("e"===f||"E"===f)&&h>2?e.text="1"+f+(d>0?"+":E)+h:(e.text=lt(Math.pow(10,l),t,"","fakehover"),"D1"===o&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==u)throw"unrecognized dtick "+String(o);e.text=String(Math.round(Math.pow(10,s.mod(l,1)))),e.fontSize*=.75}if("D1"===t.dtick){var p=String(e.text).charAt(0);"0"!==p&&"1"!==p||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(l<0?.5:.25)))}}(t,o,0,c,g):"category"===u?function(t,e){var n=t._categories[Math.round(e.x)];void 0===n&&(n=""),e.text=String(n)}(t,o):"multicategory"===u?function(t,e,n){var r=Math.round(e.x),i=t._categories[r]||[],a=void 0===i[1]?"":String(i[1]),o=void 0===i[0]?"":String(i[0]);n?e.text=o+" - "+a:(e.text=a,e.text2=o)}(t,o,n):_t(t)?function(t,e,n,r,i){if("radians"!==t.thetaunit||n)e.text=lt(e.x,t,i,r);else{var a=e.x/180;if(0===a)e.text="0";else{var o=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}var n=function(t){for(var n=1;!e(Math.round(t*n)/n,t);)n*=10;return n}(t),r=t*n,i=Math.abs(function t(n,r){return e(r,0)?n:t(r,n%r)}(r,n));return[Math.round(r/i),Math.round(n/i)]}(a);if(o[1]>=100)e.text=lt(s.deg2rad(e.x),t,i,r);else{var l=e.x<0;e.text=1===o[1]?1===o[0]?"\u03c0":o[0]+"\u03c0":["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join(""),l&&(e.text=E+e.text)}}}}(t,o,n,c,g):function(t,e,n,r,i){"never"===i?i="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(i="hide"),e.text=lt(e.x,t,i,r)}(t,o,0,c,g),r||(t.tickprefix&&!p(t.showtickprefix)&&(o.text=t.tickprefix+o.text),t.ticksuffix&&!p(t.showticksuffix)&&(o.text+=t.ticksuffix)),"boundaries"===t.tickson||t.showdividers){var m=function(e){var n=t.l2p(e);return n>=0&&n<=t._length?e:null};o.xbnd=[m(o.x-.5),m(o.x+t.dtick-.5)]}return o},z.hoverLabelText=function(t,e,n){if(n!==L&&n!==e)return z.hoverLabelText(t,e)+" - "+z.hoverLabelText(t,n);var r="log"===t.type&&e<=0,i=z.tickText(t,t.c2l(r?-e:e),"hover").text;return r?0===e?"0":E+i:i};var at=["f","p","n","\u03bc","m","","k","M","G","T"];function ot(t){return"SI"===t||"B"===t}function st(t){return t>14||t<-15}function lt(t,e,n,r){var a=t<0,o=e._tickround,l=n||e.exponentformat||"B",c=e._tickexponent,u=z.getTickFormat(e),d=e.separatethousands;if(r){var h={exponentformat:l,minexponent:e.minexponent,dtick:"none"===e.showexponent?e.dtick:i(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};rt(h),o=(Number(h._tickround)||0)+4,c=h._tickexponent,e.hoverformat&&(u=e.hoverformat)}if(u)return e._numFormat(u)(t).replace(/-/g,E);var f,p=Math.pow(10,-o)/2;if("none"===l&&(c=0),(t=Math.abs(t))<p)t="0",a=!1;else{if(t+=p,c&&(t*=Math.pow(10,-c),o+=c),0===o)t=String(Math.floor(t));else if(o<0){t=(t=String(Math.round(t))).substr(0,t.length+o);for(var g=o;g<0;g++)t+="0"}else{var m=(t=String(t)).indexOf(".")+1;m&&(t=t.substr(0,m+o).replace(/\.?0+$/,""))}t=s.numSeparate(t,e._separators,d)}return c&&"hide"!==l&&(ot(l)&&st(c)&&(l="power"),f=c<0?E+-c:"power"!==l?"+"+c:String(c),"e"===l||"E"===l?t+=l+f:"power"===l?t+="\xd710<sup>"+f+"</sup>":"B"===l&&9===c?t+="B":ot(l)&&(t+=at[c/3+5])),a?E+t:t}function ct(t,e){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i];r[a.text2]?r[a.text2].push(a.x):r[a.text2]=[a.x]}for(var o in r)n.push(it(t,s.interp(r[o],.5),o));return n}function ut(t){return void 0!==t.periodX?t.periodX:t.x}function dt(t){return[t.text,t.x,t.axInfo,t.font,t.fontSize,t.fontColor].join("_")}function ht(t){var e=t.title.font.size,n=(t.title.text.match(c.BR_TAG_ALL)||[]).length;return t.title.hasOwnProperty("standoff")?n?e*(R+n*N):e*R:n?e*(n+1)*N:e}function ft(t,e){var n=t.l2p(e);return n>1&&n<t._length-1}function pt(t){var e=r.select(t),n=e.select(".text-math-group");return n.empty()?e.select("text"):n}function gt(t){return t._id+".automargin"}function mt(t){return gt(t)+".mirror"}function vt(t){return t._id+".rangeslider"}function yt(t,e){for(var n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n])}function bt(t,e,n){var r,i,a=[],o=[],l=t.layout;for(r=0;r<e.length;r++)a.push(z.getFromId(t,e[r]));for(r=0;r<n.length;r++)o.push(z.getFromId(t,n[r]));var c=Object.keys(f),u=["anchor","domain","overlaying","position","side","tickangle","editType"],d=["linear","log"];for(r=0;r<c.length;r++){var h=c[r],p=a[0][h],g=o[0][h],m=!0,v=!1,y=!1;if("_"!==h.charAt(0)&&"function"!=typeof p&&-1===u.indexOf(h)){for(i=1;i<a.length&&m;i++){var b=a[i][h];"type"===h&&-1!==d.indexOf(p)&&-1!==d.indexOf(b)&&p!==b?v=!0:b!==p&&(m=!1)}for(i=1;i<o.length&&m;i++){var x=o[i][h];"type"===h&&-1!==d.indexOf(g)&&-1!==d.indexOf(x)&&g!==x?y=!0:o[i][h]!==g&&(m=!1)}m&&(v&&(l[a[0]._name].type="linear"),y&&(l[o[0]._name].type="linear"),xt(l,h,a,o,t._fullLayout._dfltTitle))}}for(r=0;r<t._fullLayout.annotations.length;r++){var _=t._fullLayout.annotations[r];-1!==e.indexOf(_.xref)&&-1!==n.indexOf(_.yref)&&s.swapAttrs(l.annotations[r],["?"])}}function xt(t,e,n,r,i){var a,o=s.nestedProperty,l=o(t[n[0]._name],e).get(),c=o(t[r[0]._name],e).get();for("title"===e&&(l&&l.text===i.x&&(l.text=i.y),c&&c.text===i.y&&(c.text=i.x)),a=0;a<n.length;a++)o(t,n[a]._name+"."+e).set(c);for(a=0;a<r.length;a++)o(t,r[a]._name+"."+e).set(l)}function _t(t){return"angularaxis"===t._id}function wt(t,e){for(var n=e._rangebreaks.length,r=0;r<n;r++){var i=e._rangebreaks[r];if(t>=i.min&&t<i.max)return i.max}return t}z.getTickFormat=function(t){var e,n,r,i,a,o,s,l;function c(t){return"string"!=typeof t?t:Number(t.replace("M",""))*k}function u(t,e){var n=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var r=n.indexOf(t.charAt(0)),i=n.indexOf(e.charAt(0));return r===i?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):r-i}return"number"==typeof t?1:-1}function d(t,e){var n=null===e[0],r=null===e[1],i=u(t,e[0])>=0,a=u(t,e[1])<=0;return(n||i)&&(r||a)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&(i=t.dtick,o=void 0,o=c||function(t){return t},l=(a=r.dtickrange)[1],(!(s=a[0])&&"number"!=typeof s||o(s)<=o(i))&&(!l&&"number"!=typeof l||o(l)>=o(i)))){n=r;break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&d(t.dtick,r.dtickrange)){n=r;break}}return n?n.value:t.tickformat},z.getSubplots=function(t,e){var n=t._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),i=e?z.findSubplotsWithAxis(r,e):r;return i.sort(function(t,e){var n=t.substr(1).split("y"),r=e.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]}),i},z.findSubplotsWithAxis=function(t,e){for(var n=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),r=[],i=0;i<t.length;i++){var a=t[i];n.test(a)&&r.push(a)}return r},z.makeClipPaths=function(t){var e=t._fullLayout;if(!e._hasOnlyLargeSploms){var n,i,a={_offset:0,_length:e.width,_id:""},o={_offset:0,_length:e.height,_id:""},s=z.list(t,"x",!0),l=z.list(t,"y",!0),c=[];for(n=0;n<s.length;n++)for(c.push({x:s[n],y:o}),i=0;i<l.length;i++)0===n&&c.push({x:a,y:l[i]}),c.push({x:s[n],y:l[i]});var u=e._clips.selectAll(".axesclip").data(c,function(t){return t.x._id+t.y._id});u.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+e._uid+t.x._id+t.y._id}).append("rect"),u.exit().remove(),u.each(function(t){r.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})})}},z.draw=function(t,e,n){var r=t._fullLayout;"redraw"===e&&r._paper.selectAll("g.subplot").each(function(t){var e=r._plots[t[0]];if(e){var n=e.xaxis,i=e.yaxis;e.xaxislayer.selectAll("."+n._id+"tick").remove(),e.yaxislayer.selectAll("."+i._id+"tick").remove(),e.xaxislayer.selectAll("."+n._id+"tick2").remove(),e.yaxislayer.selectAll("."+i._id+"tick2").remove(),e.xaxislayer.selectAll("."+n._id+"divider").remove(),e.yaxislayer.selectAll("."+i._id+"divider").remove(),e.gridlayer&&e.gridlayer.selectAll("path").remove(),e.zerolinelayer&&e.zerolinelayer.selectAll("path").remove(),r._infolayer.select(".g-"+n._id+"title").remove(),r._infolayer.select(".g-"+i._id+"title").remove()}});var i=e&&"redraw"!==e?e:z.listIds(t);return s.syncOrAsync(i.map(function(e){return function(){if(e){var r=z.getFromId(t,e),i=z.drawOne(t,r,n);return r._r=r.range.slice(),r._rl=s.simpleMap(r._r,r.r2l),i}}}))},z.drawOne=function(t,e,n){var r,i,l;n=n||{},e.setScale();var c=t._fullLayout,f=e._id,p=f.charAt(0),g=z.counterLetter(f),m=c._plots[e._mainSubplot];if(m){var v=m[p+"axislayer"],y=e._mainLinePosition,b=e._mainMirrorPosition,x=e._vals=z.calcTicks(e),_=[e.mirror,y,b].join("_");for(r=0;r<x.length;r++)x[r].axInfo=_;e._selections={},e._tickAngles&&(e._prevTickAngles=e._tickAngles),e._tickAngles={},e._depth=null;var w={};if(e.visible){var k,T,M=z.makeTransTickFn(e),A=z.makeTransTickLabelFn(e),C="inside"===e.ticks,S="outside"===e.ticks;if("boundaries"===e.tickson){var D=function(t,e){var n,r=[],i=function(t,e){var n=t.xbnd[e];null!==n&&r.push(s.extendFlat({},t,{x:n}))};if(e.length){for(n=0;n<e.length;n++)i(e[n],0);i(e[n-1],1)}return r}(0,x);T=z.clipEnds(e,D),k=C?T:D}else T=z.clipEnds(e,x),k=C&&"period"!==e.ticklabelmode?T:x;var O=e._gridVals=T,E=function(t,e){var n,r,i=[],a=e.length&&e[e.length-1].x<e[0].x,o=function(t,e){var n=t.xbnd[e];null!==n&&i.push(s.extendFlat({},t,{x:n}))};if(t.showdividers&&e.length){for(n=0;n<e.length;n++){var l=e[n];l.text2!==r&&o(l,a?1:0),r=l.text2}o(e[n-1],a?0:1)}return i}(e,x);if(!c._hasOnlyLargeSploms){var L=e._subplotsWith,P={};for(r=0;r<L.length;r++){var I=(l=c._plots[i=L[r]])[g+"axis"],R=I._mainAxis._id;if(!P[R]){P[R]=1;var V="x"===p?"M0,"+I._offset+"v"+I._length:"M"+I._offset+",0h"+I._length;z.drawGrid(t,e,{vals:O,counterAxis:I,layer:l.gridlayer.select("."+f),path:V,transFn:M}),z.drawZeroLine(t,e,{counterAxis:I,layer:l.zerolinelayer,path:V,transFn:M})}}}var H=z.getTickSigns(e),j=[];if(e.ticks){var B,U,q,G=z.makeTickPath(e,y,H[2]);if(e._anchorAxis&&e.mirror&&!0!==e.mirror?(B=z.makeTickPath(e,b,H[3]),U=G+B):(B="",U=G),e.showdividers&&S&&"boundaries"===e.tickson){var Z={};for(r=0;r<E.length;r++)Z[E[r].x]=1;q=function(t){return Z[t.x]?B:U}}else q=U;z.drawTicks(t,e,{vals:k,layer:v,path:q,transFn:M}),"allticks"===e.mirror&&(j=Object.keys(e._linepositions||{}))}for(r=0;r<j.length;r++){l=c._plots[i=j[r]];var W=e._linepositions[i]||[],$=z.makeTickPath(e,W[0],H[0])+z.makeTickPath(e,W[1],H[1]);z.drawTicks(t,e,{vals:k,layer:l[p+"axislayer"],path:$,transFn:M})}var Y=[];if(Y.push(function(){return z.drawLabels(t,e,{vals:x,layer:v,transFn:A,labelFns:z.makeLabelFns(e,y)})}),"multicategory"===e.type){var X={x:2,y:10}[p];Y.push(function(){var n={x:"height",y:"width"}[p],r=K()[n]+X+(e._tickAngles[f+"tick"]?e.tickfont.size*N:0);return z.drawLabels(t,e,{vals:ct(e,x),layer:v,cls:f+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:M,labelFns:z.makeLabelFns(e,y+r*H[4])})}),Y.push(function(){return e._depth=H[4]*(K("tick2")[e.side]-y),function(t,e,n){var r=e._id+"divider",i=n.vals,a=n.layer.selectAll("path."+r).data(i,dt);a.exit().remove(),a.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(d.stroke,e.dividercolor).style("stroke-width",h.crispRound(t,e.dividerwidth,1)+"px"),a.attr("transform",n.transFn).attr("d",n.path)}(t,e,{vals:E,layer:v,path:z.makeTickPath(e,y,H[4],e._depth),transFn:M})})}else e.title.hasOwnProperty("standoff")&&Y.push(function(){e._depth=H[4]*(K()[e.side]-y)});var Q=o.getComponentMethod("rangeslider","isVisible")(e);return Y.push(function(){var n,r,i,s,l=e.side.charAt(0),u=F[e.side].charAt(0),d=z.getPxPosition(t,e),h=S?e.ticklen:0;if((e.automargin||Q)&&("multicategory"===e.type?n=K("tick2"):(n=K(),"x"===p&&"b"===l&&(e._depth=Math.max(n.width>0?n.bottom-d:0,h)))),e.automargin){r={x:0,y:0,r:0,l:0,t:0,b:0};var f=[0,1];if("x"===p){if("b"===l?r[l]=e._depth:(r[l]=e._depth=Math.max(n.width>0?d-n.top:0,h),f.reverse()),n.width>0){var m=n.right-(e._offset+e._length);m>0&&(r.xr=1,r.r=m);var v=e._offset-n.left;v>0&&(r.xl=0,r.l=v)}}else if("l"===l?r[l]=e._depth=Math.max(n.height>0?d-n.left:0,h):(r[l]=e._depth=Math.max(n.height>0?n.right-d:0,h),f.reverse()),n.height>0){var y=n.bottom-(e._offset+e._length);y>0&&(r.yb=0,r.b=y);var b=e._offset-n.top;b>0&&(r.yt=1,r.t=b)}r[g]="free"===e.anchor?e.position:e._anchorAxis.domain[f[0]],e.title.text!==c._dfltTitle[p]&&(r[l]+=ht(e)+(e.title.standoff||0)),e.mirror&&"free"!==e.anchor&&((i={x:0,y:0,r:0,l:0,t:0,b:0})[u]=e.linewidth,e.mirror&&!0!==e.mirror&&(i[u]+=h),!0===e.mirror||"ticks"===e.mirror?i[g]=e._anchorAxis.domain[f[1]]:"all"!==e.mirror&&"allticks"!==e.mirror||(i[g]=[e._counterDomainMin,e._counterDomainMax][f[1]]))}Q&&(s=o.getComponentMethod("rangeslider","autoMarginOpts")(t,e)),a.autoMargin(t,gt(e),r),a.autoMargin(t,mt(e),i),a.autoMargin(t,vt(e),s)}),n.skipTitle||Q&&"bottom"===e.side||Y.push(function(){return function(t,e){var n,r=t._fullLayout,i=e._id,a=i.charAt(0),o=e.title.font.size;if(e.title.hasOwnProperty("standoff"))n=e._depth+e.title.standoff+ht(e);else{var s=-1!==(e.ticklabelposition||"").indexOf("inside");if("multicategory"===e.type)n=e._depth;else{var l=1.5*o;s&&(l=.5*o,"outside"===e.ticks&&(l+=e.ticklen)),n=10+l+(e.linewidth?e.linewidth-1:0)}s||(n+="x"===a?"top"===e.side?o*(e.showticklabels?1:0):o*(e.showticklabels?1.5:.5):"right"===e.side?o*(e.showticklabels?1:.5):o*(e.showticklabels?.5:0))}var c,d,f,p,g=z.getPxPosition(t,e);if("x"===a?(d=e._offset+e._length/2,f="top"===e.side?g-n:g+n):(f=e._offset+e._length/2,d="right"===e.side?g+n:g-n,c={rotate:"-90",offset:0}),"multicategory"!==e.type){var m=e._selections[e._id+"tick"];if(p={selection:m,side:e.side},m&&m.node()&&m.node().parentNode){var v=h.getTranslate(m.node().parentNode);p.offsetLeft=v.x,p.offsetTop=v.y}e.title.hasOwnProperty("standoff")&&(p.pad=0)}return u.draw(t,i+"title",{propContainer:e,propName:e._name+".title.text",placeholder:r._dfltTitle[a],avoid:p,transform:c,attributes:{x:d,y:f,"text-anchor":"middle"}})}(t,e)}),s.syncOrAsync(Y)}}function K(t){var n=f+(t||"tick");return w[n]||(w[n]=function(t,e){var n,r,i,a;return t._selections[e].size()?(n=1/0,r=-1/0,i=1/0,a=-1/0,t._selections[e].each(function(){var t=pt(this),e=h.bBox(t.node().parentNode);n=Math.min(n,e.top),r=Math.max(r,e.bottom),i=Math.min(i,e.left),a=Math.max(a,e.right)})):(n=0,r=0,i=0,a=0),{top:n,bottom:r,left:i,right:a,height:r-n,width:a-i}}(e,n)),w[n]}},z.getTickSigns=function(t){var e=t._id.charAt(0),n=t.side==={x:"top",y:"right"}[e]?1:-1,r=[-1,1,n,-n];return"inside"!==t.ticks==("x"===e)&&(r=r.map(function(t){return-t})),t.side&&r.push({l:-1,t:-1,r:1,b:1}[t.side.charAt(0)]),r},z.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return l(t._offset+t.l2p(e.x),0)}:function(e){return l(0,t._offset+t.l2p(e.x))}},z.makeTransTickLabelFn=function(t){var e=function(t){var e=t.ticklabelposition||"",n=function(t){return-1!==e.indexOf(t)},r=n("top"),i=n("left"),a=n("right"),o=n("bottom"),s=n("inside"),l=o||i||r||a;if(!l&&!s)return[0,0];var c=t.side,u=l?(t.tickwidth||0)/2:0,d=3,h=t.tickfont?t.tickfont.size:12;return(o||r)&&(u+=h*R,d+=(t.linewidth||0)/2),(i||a)&&(u+=(t.linewidth||0)/2,d+=3),s&&"top"===c&&(d-=h*(1-R)),(i||r)&&(u=-u),"bottom"!==c&&"right"!==c||(d=-d),[l?u:0,s?d:0]}(t),n=e[0],r=e[1];return"x"===t._id.charAt(0)?function(e){return l(n+t._offset+t.l2p(ut(e)),r)}:function(e){return l(r,n+t._offset+t.l2p(ut(e)))}},z.makeTickPath=function(t,e,n,r){r=void 0!==r?r:t.ticklen;var i=t._id.charAt(0),a=(t.linewidth||1)/2;return"x"===i?"M0,"+(e+a*n)+"v"+r*n:"M"+(e+a*n)+",0h"+r*n},z.makeLabelFns=function(t,e,n){var r=t.ticklabelposition||"",a=function(t){return-1!==r.indexOf(t)},o=a("top"),l=a("left"),c=a("right"),u=a("bottom")||l||o||c,d=a("inside"),h="inside"===r&&"inside"===t.ticks||!d&&"outside"===t.ticks&&"boundaries"!==t.tickson,f=0,p=0,g=h?t.ticklen:0;if(d?g*=-1:u&&(g=0),h&&(f+=g,n)){var m=s.deg2rad(n);f=g*Math.cos(m)+1,p=g*Math.sin(m)}t.showticklabels&&(h||t.showline)&&(f+=.2*t.tickfont.size);var v,y,b,x,_,w={labelStandoff:f+=(t.linewidth||1)/2*(d?-1:1),labelShift:p},k=0,T=t.side,M=t._id.charAt(0),A=t.tickangle;if("x"===M)x=(_=!d&&"bottom"===T||d&&"top"===T)?1:-1,d&&(x*=-1),v=p*x,y=e+f*x,b=_?1:-.2,90===Math.abs(A)&&(d?b+=I:b=-90===A&&"bottom"===T?R:90===A&&"top"===T?I:.5,k=I/2*(A/90)),w.xFn=function(t){return t.dx+v+k*t.fontSize},w.yFn=function(t){return t.dy+y+t.fontSize*b},w.anchorFn=function(t,e){if(u){if(l)return"end";if(c)return"start"}return i(e)&&0!==e&&180!==e?e*x<0!==d?"end":"start":"middle"},w.heightFn=function(e,n,r){return n<-60||n>60?-.5*r:"top"===t.side!==d?-r:0};else if("y"===M){if(x=(_=!d&&"left"===T||d&&"right"===T)?1:-1,d&&(x*=-1),v=f,y=p*x,b=0,d||90!==Math.abs(A)||(b=-90===A&&"left"===T||90===A&&"right"===T?R:.5),d){var C=i(A)?+A:0;if(0!==C){var S=s.deg2rad(C);k=Math.abs(Math.sin(S))*R*x,b=0}}w.xFn=function(t){return t.dx+e-(v+t.fontSize*b)*x+k*t.fontSize},w.yFn=function(t){return t.dy+y+t.fontSize*I},w.anchorFn=function(t,e){return i(e)&&90===Math.abs(e)?"middle":_?"end":"start"},w.heightFn=function(e,n,r){return"right"===t.side&&(n*=-1),n<-30?-r:n<30?-.5*r:0}}return w},z.drawTicks=function(t,e,n){var r=e._id+"tick",i=(n=n||{}).vals;"period"===e.ticklabelmode&&(i=i.slice()).shift();var a=n.layer.selectAll("path."+r).data(e.ticks?i:[],dt);a.exit().remove(),a.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(d.stroke,e.tickcolor).style("stroke-width",h.crispRound(t,e.tickwidth,1)+"px").attr("d",n.path),a.attr("transform",n.transFn)},z.drawGrid=function(t,e,n){var r=e._id+"grid",i=(n=n||{}).vals,a=n.counterAxis;if(!1===e.showgrid)i=[];else if(a&&z.shouldShowZeroLine(t,e,a))for(var o="array"===e.tickmode,s=0;s<i.length;s++){var l=i[s].x;if(o?!l:Math.abs(l)<e.dtick/100){if(i=i.slice(0,s).concat(i.slice(s+1)),!o)break;s--}}var c=n.layer.selectAll("path."+r).data(i,dt);c.exit().remove(),c.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),e._gw=h.crispRound(t,e.gridwidth,1),c.attr("transform",n.transFn).attr("d",n.path).call(d.stroke,e.gridcolor||"#ddd").style("stroke-width",e._gw+"px"),"function"==typeof n.path&&c.attr("d",n.path)},z.drawZeroLine=function(t,e,n){var r=e._id+"zl",i=z.shouldShowZeroLine(t,e,(n=n||n).counterAxis),a=n.layer.selectAll("path."+r).data(i?[{x:0,id:e._id}]:[]);a.exit().remove(),a.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(t,e){return j(t.id,e.id)})}),a.attr("transform",n.transFn).attr("d",n.path).call(d.stroke,e.zerolinecolor||d.defaultLine).style("stroke-width",h.crispRound(t,e.zerolinewidth,e._gw||1)+"px")},z.drawLabels=function(t,e,n){n=n||{};var a=t._fullLayout,o=e._id,u=o.charAt(0),d=n.cls||o+"tick",f=n.vals,p=n.labelFns,g=n.secondary?0:e.tickangle,m=(e._prevTickAngles||{})[d],v=n.layer.selectAll("g."+d).data(e.showticklabels?f:[],dt),y=[];function b(t,a){var o=-1!==(e.ticklabelposition||"").indexOf("inside");t.each(function(t){var s=r.select(this),u=s.select(".text-math-group"),d=p.anchorFn(t,a),f=n.transFn.call(s.node(),t)+(i(a)&&0!=+a?" rotate("+a+","+p.xFn(t)+","+(p.yFn(t)-t.fontSize/2)+")":""),g=c.lineCount(s),m=N*t.fontSize,v=p.heightFn(t,i(a)?+a:0,(g-1)*m);if(v&&(f+=l(0,v)),u.empty()){var y=s.select("text");y.attr({transform:f,"text-anchor":d}),o&&(y.style({opacity:100}),e._hideOutOfRangeInsideTickLabels&&e._hideOutOfRangeInsideTickLabels())}else{var b=h.bBox(u.node()).width*{end:-.5,start:.5}[d];u.attr("transform",f+l(b,0))}})}v.enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(e){var n=r.select(this),i=t._promises.length;n.call(c.positionText,p.xFn(e),p.yFn(e)).call(h.font,e.font,e.fontSize,e.fontColor).text(e.text).call(c.convertToTspans,t),t._promises[i]?y.push(t._promises.pop().then(function(){b(n,g)})):b(n,g)}),v.exit().remove(),n.repositionOnUpdate&&v.each(function(t){r.select(this).select("text").call(c.positionText,p.xFn(t),p.yFn(t))}),e._hideOutOfRangeInsideTickLabels=void 0,-1!==(e.ticklabelposition||"").indexOf("inside")&&(e._hideOutOfRangeInsideTickLabels=function(){var t=s.simpleMap(e.range,e.r2l),n=e.l2p(t[0]),i=e.l2p(t[1]),a=Math.min(n,i)+e._offset,o=Math.max(n,i)+e._offset,l="x"===e._id.charAt(0);v.each(function(t){var n=r.select(this);if(n.select(".text-math-group").empty()){var i=h.bBox(n.node()),s=!1;l?(i.right>o||i.left<a)&&(s=!0):(i.bottom>o||i.top+(e.tickangle?0:t.fontSize/4)<a)&&(s=!0),s&&n.select("text").style({opacity:0})}})}),b(v,m+1?m:g);var x=null;e._selections&&(e._selections[d]=v);var _=[function(){return y.length&&Promise.all(y)}];e.automargin&&a._redrawFromAutoMarginCount&&90===m?(x=90,_.push(function(){b(v,m)})):_.push(function(){if(b(v,g),f.length&&"x"===u&&!i(g)&&("log"!==e.type||"D"!==String(e.dtick).charAt(0))){x=0;var t,r=0,a=[];if(v.each(function(t){r=Math.max(r,t.fontSize);var n=e.l2p(t.x),i=pt(this),o=h.bBox(i.node());a.push({top:0,bottom:10,height:10,left:n-o.width/2,right:n+o.width/2+2,width:o.width+2})}),"boundaries"!==e.tickson&&!e.showdividers||n.secondary){var o=f.length,l=Math.abs((f[o-1].x-f[0].x)*e._m)/(o-1),c=e.ticklabelposition||"",d=function(t){return-1!==c.indexOf(t)},p=d("top"),m=d("left"),y=d("right"),_=d("bottom")||m||p||y?(e.tickwidth||0)+6:0,w=l<2.5*r||"multicategory"===e.type;for(t=0;t<a.length-1;t++)if(s.bBoxIntersect(a[t],a[t+1],_)){x=w?90:30;break}}else{var k=2;for(e.ticks&&(k+=e.tickwidth/2),t=0;t<a.length;t++){var T=f[t].xbnd,M=a[t];if(null!==T[0]&&M.left-e.l2p(T[0])<k||null!==T[1]&&e.l2p(T[1])-M.right<k){x=90;break}}}x&&b(v,x)}}),e._tickAngles&&_.push(function(){e._tickAngles[d]=null===x?i(g)?g:0:x});var w=e._anchorAxis;w&&w.autorange&&-1!==(e.ticklabelposition||"").indexOf("inside")&&!B(a,e._id)&&(a._insideTickLabelsAutorange||(a._insideTickLabelsAutorange={}),a._insideTickLabelsAutorange[w._name+".autorange"]=w.autorange,_.push(function(){v.each(function(t,n){var r=pt(this);e._vals[n].bb=h.bBox(r.node())})}));var k=s.syncOrAsync(_);return k&&k.then&&t._promises.push(k),k},z.getPxPosition=function(t,e){var n,r=t._fullLayout._size,i=e._id.charAt(0),a=e.side;return"free"!==e.anchor?n=e._anchorAxis:"x"===i?n={_offset:r.t+(1-(e.position||0))*r.h,_length:0}:"y"===i&&(n={_offset:r.l+(e.position||0)*r.w,_length:0}),"top"===a||"left"===a?n._offset:"bottom"===a||"right"===a?n._offset+n._length:void 0},z.shouldShowZeroLine=function(t,e,n){var r=s.simpleMap(e.range,e.r2l);return r[0]*r[1]<=0&&e.zeroline&&("linear"===e.type||"-"===e.type)&&!(e.rangebreaks&&e.maskBreaks(0)===L)&&(ft(e,0)||!function(t,e,n,r){var i=n._mainAxis;if(i){var a=t._fullLayout,o=e._id.charAt(0),s=z.counterLetter(e._id),l=e._offset+(Math.abs(r[0])<Math.abs(r[1])==("x"===o)?0:e._length),c=a._plots[n._mainSubplot];if(!(c.mainplotinfo||c).overlays.length)return f(n);for(var u=z.list(t,s),d=0;d<u.length;d++){var h=u[d];if(h._mainAxis===i&&f(h))return!0}}function f(t){if(!t.showline||!t.linewidth)return!1;var n=Math.max((t.linewidth+e.zerolinewidth)/2,1);function r(t){return"number"==typeof t&&Math.abs(t-l)<n}if(r(t._mainLinePosition)||r(t._mainMirrorPosition))return!0;var i=t._linepositions||{};for(var a in i)if(r(i[a][0])||r(i[a][1]))return!0}}(t,e,n,r)||function(t,e){for(var n=t._fullData,r=e._mainSubplot,i=e._id.charAt(0),a=0;a<n.length;a++){var s=n[a];if(!0===s.visible&&s.xaxis+s.yaxis===r){if(o.traceIs(s,"bar-like")&&s.orientation==={x:"h",y:"v"}[i])return!0;if(s.fill&&s.fill.charAt(s.fill.length-1)===i)return!0}}return!1}(t,e))},z.clipEnds=function(t,e){return e.filter(function(e){return ft(t,e.x)})},z.allowAutoMargin=function(t){for(var e=z.list(t,"",!0),n=0;n<e.length;n++){var r=e[n];r.automargin&&(a.allowAutoMargin(t,gt(r)),r.mirror&&a.allowAutoMargin(t,mt(r))),o.getComponentMethod("rangeslider","isVisible")(r)&&a.allowAutoMargin(t,vt(r))}},z.swap=function(t,e){for(var n=function(t,e){var n,r,i=[];for(n=0;n<e.length;n++){var a=[],o=t._fullData[e[n]].xaxis,s=t._fullData[e[n]].yaxis;if(o&&s){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(o)&&-1===i[r].y.indexOf(s)||a.push(r);if(a.length){var l,c=i[a[0]];if(a.length>1)for(r=1;r<a.length;r++)yt(c.x,(l=i[a[r]]).x),yt(c.y,l.y);yt(c.x,[o]),yt(c.y,[s])}else i.push({x:[o],y:[s]})}}return i}(t,e),r=0;r<n.length;r++)bt(t,n[r].x,n[r].y)}},{"../../components/color":75,"../../components/drawing":97,"../../components/titles":170,"../../constants/alignment":177,"../../constants/numerical":181,"../../lib":202,"../../lib/svg_text_utils":224,"../../plots/plots":282,"../../registry":290,"./autorange":247,"./axis_autotype":249,"./axis_ids":251,"./clean_ticks":253,"./layout_attributes":262,"./set_convert":268,d3:9,"fast-isnumeric":11}],249:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../../constants/numerical").BADNUM,o=i.isArrayOrTypedArray,s=i.isDateTime,l=i.cleanNumber,c=Math.round;function u(t,e){return e?r(t):"number"==typeof t}function d(t){return Math.max(1,(t-1)/1e3)}e.exports=function(t,e,n){var i=t,h=n.noMultiCategory;if(o(i)&&!i.length)return"-";if(!h&&function(t){return o(t[0])&&o(t[1])}(i))return"multicategory";if(h&&Array.isArray(i[0])){for(var f=[],p=0;p<i.length;p++)if(o(i[p]))for(var g=0;g<i[p].length;g++)f.push(i[p][g]);i=f}if(function(t,e){for(var n=t.length,i=d(n),a=0,o=0,l={},u=0;u<n;u+=i){var h=t[c(u)],f=String(h);l[f]||(l[f]=1,s(h,e)&&a++,r(h)&&o++)}return a>2*o}(i,e))return"date";var m="strict"!==n.autotypenumbers;return function(t,e){for(var n=t.length,r=d(n),i=0,o=0,s={},u=0;u<n;u+=r){var h=t[c(u)],f=String(h);if(!s[f]){s[f]=1;var p=typeof h;"boolean"===p?o++:(e?l(h)!==a:"number"===p)?i++:"string"===p&&o++}}return o>2*i}(i,m)?"category":function(t,e){for(var n=t.length,r=0;r<n;r++)if(u(t[r],e))return!0;return!1}(i,m)?"linear":"-"}},{"../../constants/numerical":181,"../../lib":202,"fast-isnumeric":11}],250:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../registry"),a=t("../../lib"),o=t("../array_container_defaults"),s=t("./layout_attributes"),l=t("./tick_value_defaults"),c=t("./tick_mark_defaults"),u=t("./tick_label_defaults"),d=t("./category_order_defaults"),h=t("./line_grid_defaults"),f=t("./set_convert"),p=t("./constants").WEEKDAY_PATTERN,g=t("./constants").HOUR_PATTERN;function m(t,e,n){function i(n,r){return a.coerce(t,e,s.rangebreaks,n,r)}if(i("enabled")){var o=i("bounds");if(o&&o.length>=2){var l,c,u="";if(2===o.length)for(l=0;l<2;l++)if(c=y(o[l])){u=p;break}var d=i("pattern",u);if(d===p)for(l=0;l<2;l++)(c=y(o[l]))&&(e.bounds[l]=o[l]=c-1);if(d)for(l=0;l<2;l++)switch(c=o[l],d){case p:if(!r(c))return void(e.enabled=!1);if((c=+c)!==Math.floor(c)||c<0||c>=7)return void(e.enabled=!1);e.bounds[l]=o[l]=c;break;case g:if(!r(c))return void(e.enabled=!1);if((c=+c)<0||c>24)return void(e.enabled=!1);e.bounds[l]=o[l]=c}if(!1===n.autorange){var h=n.range;if(h[0]<h[1]){if(o[0]<h[0]&&o[1]>h[1])return void(e.enabled=!1)}else if(o[0]>h[0]&&o[1]<h[1])return void(e.enabled=!1)}}else{var f=i("values");if(!f||!f.length)return void(e.enabled=!1);i("dvalue")}}}e.exports=function(t,e,n,r,g){var v,y=r.letter,b=r.font||{},x=r.splomStash||{},_=n("visible",!r.visibleDflt),w=e.type||(e._template||{}).type||"-";"date"===w&&(i.getComponentMethod("calendars","handleDefaults")(t,e,"calendar",r.calendar),r.noTicklabelmode||(v=n("ticklabelmode"))),r.noTicklabelposition&&"multicategory"!==w||a.coerce(t,e,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===v?["outside","inside"]:"x"===y?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition"),f(e,g);var k=!e.isValidRange(t.range);k&&r.reverseDflt&&(k="reversed"),!n("autorange",k)||"linear"!==w&&"-"!==w||n("rangemode"),n("range"),e.cleanRange(),d(t,e,n,r),"category"===w||r.noHover||n("hoverformat");var T=n("color"),M=T!==s.color.dflt?T:b.color,A=x.label||g._dfltTitle[y];if(u(t,e,n,w,r,{pass:1}),!_)return e;n("title.text",A),a.coerceFont(n,"title.font",{family:b.family,size:Math.round(1.2*b.size),color:M}),l(t,e,n,w),u(t,e,n,w,r,{pass:2}),c(t,e,n,r),h(t,e,n,{dfltColor:T,bgColor:r.bgColor,showGrid:r.showGrid,attributes:s}),(e.showline||e.ticks)&&n("mirror"),r.automargin&&n("automargin");var C,S="multicategory"===w;if(r.noTickson||"category"!==w&&!S||!e.ticks&&!e.showgrid||(S&&(C="boundaries"),"boundaries"===n("tickson",C)&&delete e.ticklabelposition),S&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===w)if(o(t,e,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:m}),e.rangebreaks.length){for(var D=0;D<e.rangebreaks.length;D++)if(e.rangebreaks[D].pattern===p){e._hasDayOfWeekBreaks=!0;break}if(f(e,g),g._has("scattergl")||g._has("splom"))for(var O=0;O<r.data.length;O++){var E=r.data[O];"scattergl"!==E.type&&"splom"!==E.type||(E.visible=!1,a.warn(E.type+" traces do not work on axes with rangebreaks. Setting trace "+E.index+" to `visible: false`."))}}else delete e.rangebreaks;return e};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function y(t){if("string"==typeof t)return v[t.substr(0,3).toLowerCase()]}},{"../../lib":202,"../../registry":290,"../array_container_defaults":243,"./category_order_defaults":252,"./constants":254,"./layout_attributes":262,"./line_grid_defaults":264,"./set_convert":268,"./tick_label_defaults":269,"./tick_mark_defaults":270,"./tick_value_defaults":271,"fast-isnumeric":11}],251:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("./constants");function a(t,e){if(e&&e.length)for(var n=0;n<e.length;n++)if(e[n][t])return!0;return!1}n.id2name=function(t){if("string"==typeof t&&t.match(i.AX_ID_PATTERN)){var e=t.split(" ")[0].substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},n.name2id=function(t){if(t.match(i.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},n.cleanId=function(t,e,n){var r=/( domain)$/.test(t);if("string"==typeof t&&t.match(i.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)&&(!r||n)){var a=t.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),t.charAt(0)+a+(r&&n?" domain":"")}},n.list=function(t,e,r){var i=t._fullLayout;if(!i)return[];var a,o=n.listIds(t,e),s=new Array(o.length);for(a=0;a<o.length;a++){var l=o[a];s[a]=i[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var c=i._subplots.gl3d||[];for(a=0;a<c.length;a++){var u=i[c[a]];e?s.push(u[e+"axis"]):s.push(u.xaxis,u.yaxis,u.zaxis)}}return s},n.listIds=function(t,e){var n=t._fullLayout;if(!n)return[];var r=n._subplots;return e?r[e+"axis"]:r.xaxis.concat(r.yaxis)},n.getFromId=function(t,e,r){var i=t._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),i[n.id2name(e)]},n.getFromTrace=function(t,e,i){var a=t._fullLayout,o=null;if(r.traceIs(e,"gl3d")){var s=e.scene;"scene"===s.substr(0,5)&&(o=a[s][i+"axis"])}else o=n.getFromId(t,e[i+"axis"]||i);return o},n.idSort=function(t,e){var n=t.charAt(0),r=e.charAt(0);return n!==r?n>r?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)},n.ref2id=function(t){return!!/^[xyz]/.test(t)&&t.split(" ")[0]},n.isLinked=function(t,e){return a(e,t._axisMatchGroups)||a(e,t._axisConstraintGroups)}},{"../../registry":290,"./constants":254}],252:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){if("category"===e.type){var i,a=t.categoryarray,o=Array.isArray(a)&&a.length>0;o&&(i="array");var s,l=n("categoryorder",i);"array"===l&&(s=n("categoryarray")),o||"array"!==l||(l=e.categoryorder="trace"),"trace"===l?e._initialCategories=[]:"array"===l?e._initialCategories=s.slice():(s=function(t,e){var n,r,i,a=e.dataAttr||t._id.charAt(0),o={};if(e.axData)n=e.axData;else for(n=[],r=0;r<e.data.length;r++){var s=e.data[r];s[a+"axis"]===t._id&&n.push(s)}for(r=0;r<n.length;r++){var l=n[r][a];for(i=0;i<l.length;i++){var c=l[i];null!=c&&(o[c]=1)}}return Object.keys(o)}(e,r).sort(),"category ascending"===l?e._initialCategories=s:"category descending"===l&&(e._initialCategories=s.reverse()))}}},{}],253:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../../constants/numerical"),o=a.ONEDAY,s=a.ONEWEEK;n.dtick=function(t,e){var n="log"===e,i="date"===e,a="category"===e,s=i?o:1;if(!t)return s;if(r(t))return(t=Number(t))<=0?s:a?Math.max(1,Math.round(t)):i?Math.max(.1,t):t;if("string"!=typeof t||!i&&!n)return s;var l=t.charAt(0),c=t.substr(1);return(c=r(c)?Number(c):0)<=0||!(i&&"M"===l&&c===Math.round(c)||n&&"L"===l||n&&"D"===l&&(1===c||2===c))?s:t},n.tick0=function(t,e,n,a){return"date"===e?i.cleanDate(t,i.dateTick0(n,a%s==0?1:0)):"D1"!==a&&"D2"!==a?r(t)?Number(t):0:void 0}},{"../../constants/numerical":181,"../../lib":202,"fast-isnumeric":11}],254:[function(t,e,n){"use strict";var r=t("../../lib/regex").counter;e.exports={idRegex:{x:r("x","( domain)?"),y:r("y","( domain)?")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":218}],255:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./autorange"),a=t("./axis_ids").id2name,o=t("./layout_attributes"),s=t("./scale_zoom"),l=t("./set_convert"),c=t("../../constants/numerical").ALMOST_EQUAL,u=t("../../constants/alignment").FROM_BL;function d(t,e,n){var i=n.axIds,s=n.layoutOut,l=n.hasImage,c=s._axisConstraintGroups,u=s._axisMatchGroups,d=e._id,g=d.charAt(0),m=((s._splomAxes||{})[g]||{})[d]||{},v=e._id,y="x"===v.charAt(0);function b(n,i){return r.coerce(t,e,o,n,i)}e._matchGroup=null,e._constraintGroup=null,b("constrain",l?"domain":"range"),r.coerce(t,e,{constraintoward:{valType:"enumerated",values:y?["left","center","right"]:["bottom","middle","top"],dflt:y?"center":"middle"}},"constraintoward");var x,_,w=e.type,k=[];for(x=0;x<i.length;x++)(_=i[x])!==v&&s[a(_)].type===w&&k.push(_);var T=f(c,v);if(T){var M=[];for(x=0;x<k.length;x++)T[_=k[x]]||M.push(_);k=M}var A,C,S=k.length;S&&(t.matches||m.matches)&&(A=r.coerce(t,e,{matches:{valType:"enumerated",values:k,dflt:-1!==k.indexOf(m.matches)?m.matches:void 0}},"matches"));var D=l&&!y?e.anchor:void 0;if(S&&!A&&(t.scaleanchor||D)&&(C=r.coerce(t,e,{scaleanchor:{valType:"enumerated",values:k}},"scaleanchor",D)),A){e._matchGroup=p(u,v,A,1);var O=s[a(A)],E=h(s,e)/h(s,O);y!==("x"===A.charAt(0))&&(E=(y?"x":"y")+E),p(c,v,A,E)}else t.matches&&-1!==i.indexOf(t.matches)&&r.warn("ignored "+e._name+'.matches: "'+t.matches+'" to avoid an infinite loop');if(C){var L=b("scaleratio");L||(L=e.scaleratio=1),p(c,v,C,L)}else t.scaleanchor&&-1!==i.indexOf(t.scaleanchor)&&r.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function h(t,e){var n=e.domain;return n||(n=t[a(e.overlaying)].domain),n[1]-n[0]}function f(t,e){for(var n=0;n<t.length;n++)if(t[n][e])return t[n];return null}function p(t,e,n,r){var i,a,o,s,l,c=f(t,e);null===c?((c={})[e]=1,l=t.length,t.push(c)):l=t.indexOf(c);var u=Object.keys(c);for(i=0;i<t.length;i++)if(o=t[i],i!==l&&o[n]){var d=o[n];for(a=0;a<u.length;a++)o[s=u[a]]=g(d,g(r,c[s]));return void t.splice(l,1)}if(1!==r)for(a=0;a<u.length;a++){var h=u[a];c[h]=g(r,c[h])}c[n]=1}function g(t,e){var n,r,i="",a="";"string"==typeof t&&(n=(i=t.match(/^[xy]*/)[0]).length,t=+t.substr(n)),"string"==typeof e&&(r=(a=e.match(/^[xy]*/)[0]).length,e=+e.substr(r));var o=t*e;return n||r?n&&r&&i.charAt(0)!==a.charAt(0)?n===r?o:(n>r?i.substr(r):a.substr(n))+o:i+a+t*e:o}function m(t,e){for(var n=e._size,r=n.h/n.w,i={},a=Object.keys(t),o=0;o<a.length;o++){var s=a[o],l=t[s];if("string"==typeof l){var c=l.match(/^[xy]*/)[0],u=c.length;l=+l.substr(u);for(var d="y"===c.charAt(0)?r:1/r,h=0;h<u;h++)l*=d}i[s]=l}return i}function v(t,e){var n=t._inputDomain,r=n[0]+(n[1]-n[0])*u[t.constraintoward];t.domain=t._input.domain=[r+(n[0]-r)/e,r+(n[1]-r)/e],t.setScale()}n.handleDefaults=function(t,e,n){var i,o,s,c,u,h,f,p,g=n.axIds,m=n.axHasImage,v=e._axisConstraintGroups=[],y=e._axisMatchGroups=[];for(i=0;i<g.length;i++)d(u=t[c=a(g[i])],h=e[c],{axIds:g,layoutOut:e,hasImage:m[c]});function b(t,n){for(i=0;i<t.length;i++)for(s in o=t[i])e[a(s)][n]=o}for(b(y,"_matchGroup"),i=0;i<v.length;i++)for(s in o=v[i])if((h=e[a(s)]).fixedrange){for(var x in o){var _=a(x);!1===(t[_]||{}).fixedrange&&r.warn("fixedrange was specified as false for axis "+_+" but was overridden because another axis in its constraint group has fixedrange true"),e[_].fixedrange=!0}break}for(i=0;i<v.length;){for(s in o=v[i]){(h=e[a(s)])._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(o).length&&(v.splice(i,1),i--);break}i++}b(v,"_constraintGroup");var w=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],k=!1,T=!1;function M(){p=h[f],"rangebreaks"===f&&(T=h._hasDayOfWeekBreaks)}for(i=0;i<y.length;i++){o=y[i];for(var A=0;A<w.length;A++){var C;for(s in f=w[A],p=null,o)if(u=t[c=a(s)],f in(h=e[c])){if(!h.matches&&(C=h,f in u)){M();break}null===p&&f in u&&M()}if("range"===f&&p&&(k=!0),"autorange"===f&&null===p&&k&&(p=!1),null===p&&f in C&&(p=C[f]),null!==p)for(s in o)(h=e[a(s)])[f]="range"===f?p.slice():p,"rangebreaks"===f&&(h._hasDayOfWeekBreaks=T,l(h,e))}}},n.enforce=function(t){var e,n,r,o,l,u,d,h,f=t._fullLayout,p=f._axisConstraintGroups||[];for(e=0;e<p.length;e++){r=m(p[e],f);var g=Object.keys(r),y=1/0,b=0,x=1/0,_={},w={},k=!1;for(n=0;n<g.length;n++)w[o=g[n]]=l=f[a(o)],l._inputDomain?l.domain=l._inputDomain.slice():l._inputDomain=l.domain.slice(),l._inputRange||(l._inputRange=l.range.slice()),l.setScale(),_[o]=u=Math.abs(l._m)/r[o],y=Math.min(y,u),"domain"!==l.constrain&&l._constraintShrinkable||(x=Math.min(x,u)),delete l._constraintShrinkable,b=Math.max(b,u),"domain"===l.constrain&&(k=!0);if(!(y>c*b)||k)for(n=0;n<g.length;n++)if(u=_[o=g[n]],d=(l=w[o]).constrain,u!==x||"domain"===d)if(h=u/x,"range"===d)s(l,h);else{var T=l._inputDomain,M=(l.domain[1]-l.domain[0])/(T[1]-T[0]),A=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));if((h/=M)*A<1){l.domain=l._input.domain=T.slice(),s(l,h);continue}if(A<1&&(l.range=l._input.range=l._inputRange.slice(),h*=A),l.autorange){var C=l.r2l(l.range[0]),S=l.r2l(l.range[1]),D=(C+S)/2,O=D,E=D,L=Math.abs(S-D),P=D-L*h*1.0001,I=D+L*h*1.0001,R=i.makePadFn(f,l,0),N=i.makePadFn(f,l,1);v(l,h);var F,z,V=Math.abs(l._m),H=i.concatExtremes(t,l),j=H.min,B=H.max;for(z=0;z<j.length;z++)(F=j[z].val-R(j[z])/V)>P&&F<O&&(O=F);for(z=0;z<B.length;z++)(F=B[z].val+N(B[z])/V)<I&&F>E&&(E=F);h/=(E-O)/(2*L),O=l.l2r(O),E=l.l2r(E),l.range=l._input.range=C<S?[O,E]:[E,O]}v(l,h)}}},n.getAxisGroup=function(t,e){for(var n=t._axisMatchGroups,r=0;r<n.length;r++)if(n[r][e])return"g"+r;return e},n.clean=function(t,e){if(e._inputDomain){for(var n=!1,r=e._id,i=t._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][r]){n=!0;break}n&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}}},{"../../constants/alignment":177,"../../constants/numerical":181,"../../lib":202,"./autorange":247,"./axis_ids":251,"./layout_attributes":262,"./scale_zoom":266,"./set_convert":268}],256:[function(t,e,n){"use strict";var r=t("d3"),i=t("tinycolor2"),a=t("has-passive-events"),o=t("../../registry"),s=t("../../lib"),l=s.strTranslate,c=t("../../lib/svg_text_utils"),u=t("../../components/color"),d=t("../../components/drawing"),h=t("../../components/fx"),f=t("./axes"),p=t("../../lib/setcursor"),g=t("../../components/dragelement"),m=t("../../components/dragelement/helpers"),v=m.selectingOrDrawing,y=m.freeMode,b=t("../../constants/alignment").FROM_TL,x=t("../../lib/clear_gl_canvases"),_=t("../../plot_api/subroutines").redrawReglTraces,w=t("../plots"),k=t("./axis_ids").getFromId,T=t("./select").prepSelect,M=t("./select").clearSelect,A=t("./select").selectOnClick,C=t("./scale_zoom"),S=t("./constants"),D=S.MINDRAG,O=S.MINZOOM,E=!0;function L(t,e,n,r){var i=s.ensureSingle(t.draglayer,e,n,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return i.call(p,r),i.node()}function P(t,e,n,i,a,o,s){var l=L(t,"rect",e,n);return r.select(l).call(d.setRect,i,a,o,s),l}function I(t,e){for(var n=0;n<t.length;n++)if(!t[n].fixedrange)return e;return""}function R(t,e,n,r,i){for(var a=0;a<t.length;a++){var o=t[a];if(!o.fixedrange)if(o.rangebreaks){var s="y"===o._id.charAt(0),l=s?1-n:n;r[o._name+".range[0]"]=o.l2r(o.p2l((s?1-e:e)*o._length)),r[o._name+".range[1]"]=o.l2r(o.p2l(l*o._length))}else{var c=o._rl[0],u=o._rl[1]-c;r[o._name+".range[0]"]=o.l2r(c+u*e),r[o._name+".range[1]"]=o.l2r(c+u*n)}}if(i&&i.length){var d=(e+(1-n))/2;R(i,d,1-d,r,[])}}function N(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(!r.fixedrange)if(r.rangebreaks){var i=r._length,a=(r.p2l(0+e)-r.p2l(0)+(r.p2l(i+e)-r.p2l(i)))/2;r.range=[r.l2r(r._rl[0]-a),r.l2r(r._rl[1]-a)]}else r.range=[r.l2r(r._rl[0]-e/r._m),r.l2r(r._rl[1]-e/r._m)]}}function F(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function z(t,e,n,r,i){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",l(n,r)).attr("d",i+"Z")}function V(t,e,n){return t.append("path").attr("class","zoombox-corners").style({fill:u.background,stroke:u.defaultLine,"stroke-width":1,opacity:0}).attr("transform",l(e,n)).attr("d","M0,0Z")}function H(t,e,n,r,i,a){t.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),j(t,e,i,a)}function j(t,e,n,r){n||(t.transition().style("fill",r>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function B(t){r.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function U(t){E&&t.data&&t._context.showTips&&(s.notifier(s._(t,"Double-click to zoom back out"),"long"),E=!1)}function q(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,O)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function G(t,e,n,r,i){for(var a,o,l,c,u=!1,d={},h={},f=(i||{}).xaHash,p=(i||{}).yaHash,g=0;g<e.length;g++){var m=e[g];for(a in n)if(m[a]){for(l in m)i&&(f[l]||p[l])||("x"===l.charAt(0)?n:r)[l]||(d[l]=a);for(o in r)i&&(f[o]||p[o])||!m[o]||(u=!0)}for(o in r)if(m[o])for(c in m)i&&(f[c]||p[c])||("x"===c.charAt(0)?n:r)[c]||(h[c]=o)}u&&(s.extendFlat(d,h),h={});var v={},y=[];for(l in d){var b=k(t,l);y.push(b),v[b._id]=b}var x={},_=[];for(c in h){var w=k(t,c);_.push(w),x[w._id]=w}return{xaHash:v,yaHash:x,xaxes:y,yaxes:_,xLinks:d,yLinks:h,isSubplotConstrained:u}}function Z(t,e){if(a){var n=void 0!==t.onwheel?"wheel":"mousewheel";t._onwheel&&t.removeEventListener(n,t._onwheel),t._onwheel=e,t.addEventListener(n,e,{passive:!1})}else void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel?t.onmousewheel=e:t.isAddedWheelEvent||(t.isAddedWheelEvent=!0,t.addEventListener("wheel",e,{passive:!1}))}function W(t){var e=[];for(var n in t)e.push(t[n]);return e}e.exports={makeDragBox:function(t,e,n,a,l,u,p,m){var E,L,j,$,Y,X,Q,K,J,tt,et,nt,rt,it,at,ot,st,lt,ct,ut,dt,ht,ft,pt=t._fullLayout._zoomlayer,gt=p+m==="nsew",mt=1===(p+m).length;function vt(){if(J=(E=e.xaxis)._length,tt=(L=e.yaxis)._length,Q=E._offset,K=L._offset,(j={})[E._id]=E,($={})[L._id]=L,p&&m)for(var n=e.overlays,r=0;r<n.length;r++){var i=n[r].xaxis;j[i._id]=i;var a=n[r].yaxis;$[a._id]=a}Y=W(j),X=W($),rt=I(Y,m),it=I(X,p),at=!it&&!rt,nt=G(t,t._fullLayout._axisMatchGroups,j,$);var o=(et=G(t,t._fullLayout._axisConstraintGroups,j,$,nt)).isSubplotConstrained||nt.isSubplotConstrained;ot=m||o,st=p||o;var s=t._fullLayout;lt=s._has("scattergl"),ct=s._has("splom"),ut=s._has("svg")}vt();var yt=function(t,e,n){return t?"nsew"===t?n?"":"pan"===e?"move":"crosshair":t.toLowerCase()+"-resize":"pointer"}(it+rt,t._fullLayout.dragmode,gt),bt=P(e,p+m+"drag",yt,n,a,l,u);if(at&&!gt)return bt.onmousedown=null,bt.style.pointerEvents="none",bt;var xt,_t,wt,kt,Tt,Mt,At,Ct,St,Dt,Ot={element:bt,gd:t,plotinfo:e};function Et(){Ot.plotinfo.selection=!1,M(t)}function Lt(t,n){var i=Ot.gd;if(i._fullLayout._activeShapeIndex>=0)i._fullLayout._deactivateShape(i);else{var a=i._fullLayout.clickmode;if(B(i),2!==t||mt||Ut(),gt)a.indexOf("select")>-1&&A(n,i,Y,X,e.id,Ot),a.indexOf("event")>-1&&h.click(i,n,e.id);else if(1===t&&mt){var s=p?L:E,l="s"===p||"w"===m?0:1,u=s._name+".range["+l+"]",d=function(t,e){var n,i=t.range[e],a=Math.abs(i-t.range[1-e]);return"date"===t.type?i:"log"===t.type?(n=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3,r.format("."+n+"g")(Math.pow(10,i))):(n=Math.floor(Math.log(Math.abs(i))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4,r.format("."+String(n)+"g")(i))}(s,l),f="left",g="middle";if(s.fixedrange)return;p?(g="n"===p?"top":"bottom","right"===s.side&&(f="right")):"e"===m&&(f="right"),i._context.showAxisRangeEntryBoxes&&r.select(bt).call(c.makeEditable,{gd:i,immediate:!0,background:i._fullLayout.paper_bgcolor,text:String(d),fill:s.tickfont?s.tickfont.color:"#444",horizontalAlign:f,verticalAlign:g}).on("edit",function(t){var e=s.d2r(t);void 0!==e&&o.call("_guiRelayout",i,u,e)})}}}function Pt(e,n){if(t._transitioningWithDuration)return!1;var r=Math.max(0,Math.min(J,ht*e+xt)),i=Math.max(0,Math.min(tt,ft*n+_t)),a=Math.abs(r-xt),o=Math.abs(i-_t);function s(){At="",wt.r=wt.l,wt.t=wt.b,St.attr("d","M0,0Z")}if(wt.l=Math.min(xt,r),wt.r=Math.max(xt,r),wt.t=Math.min(_t,i),wt.b=Math.max(_t,i),et.isSubplotConstrained)a>O||o>O?(At="xy",a/J>o/tt?(o=a*tt/J,_t>i?wt.t=_t-o:wt.b=_t+o):(a=o*J/tt,xt>r?wt.l=xt-a:wt.r=xt+a),St.attr("d",q(wt))):s();else if(nt.isSubplotConstrained)if(a>O||o>O){At="xy";var l=Math.min(wt.l/J,(tt-wt.b)/tt),c=Math.max(wt.r/J,(tt-wt.t)/tt);wt.l=l*J,wt.r=c*J,wt.b=(1-l)*tt,wt.t=(1-c)*tt,St.attr("d",q(wt))}else s();else!it||o<Math.min(Math.max(.6*a,D),O)?a<D||!rt?s():(wt.t=0,wt.b=tt,At="x",St.attr("d",function(t,e){return"M"+(t.l-.5)+","+(e-O-.5)+"h-3v"+(2*O+1)+"h3ZM"+(t.r+.5)+","+(e-O-.5)+"h3v"+(2*O+1)+"h-3Z"}(wt,_t))):!rt||a<Math.min(.6*o,O)?(wt.l=0,wt.r=J,At="y",St.attr("d",function(t,e){return"M"+(e-O-.5)+","+(t.t-.5)+"v-3h"+(2*O+1)+"v3ZM"+(e-O-.5)+","+(t.b+.5)+"v3h"+(2*O+1)+"v-3Z"}(wt,xt))):(At="xy",St.attr("d",q(wt)));wt.w=wt.r-wt.l,wt.h=wt.b-wt.t,At&&(Dt=!0),t._dragged=Dt,H(Ct,St,wt,Tt,Mt,kt),It(),t.emit("plotly_relayouting",dt),Mt=!0}function It(){dt={},"xy"!==At&&"x"!==At||(R(Y,wt.l/J,wt.r/J,dt,et.xaxes),jt("x",dt)),"xy"!==At&&"y"!==At||(R(X,(tt-wt.b)/tt,(tt-wt.t)/tt,dt,et.yaxes),jt("y",dt))}function Rt(){It(),B(t),qt(),U(t)}Ot.prepFn=function(e,n,r){var a=Ot.dragmode,o=t._fullLayout.dragmode;o!==a&&(Ot.dragmode=o),vt(),ht=t._fullLayout._invScaleX,ft=t._fullLayout._invScaleY,at||(gt?e.shiftKey?"pan"===o?o="zoom":v(o)||(o="pan"):e.ctrlKey&&(o="pan"):o="pan"),Ot.minDrag=y(o)?1:void 0,v(o)?(Ot.xaxes=Y,Ot.yaxes=X,T(e,n,r,Ot,o)):(Ot.clickFn=Lt,v(a)&&Et(),at||("zoom"===o?(Ot.moveFn=Pt,Ot.doneFn=Rt,Ot.minDrag=1,function(e,n,r){var a=bt.getBoundingClientRect();xt=n-a.left,_t=r-a.top,t._fullLayout._calcInverseTransform(t);var o=s.apply3DTransform(t._fullLayout._invTransform)(xt,_t);wt={l:xt=o[0],r:xt,w:0,t:_t=o[1],b:_t,h:0},kt=t._hmpixcount?t._hmlumcount/t._hmpixcount:i(t._fullLayout.plot_bgcolor).getLuminance(),Mt=!1,At="xy",Dt=!1,Ct=z(pt,kt,Q,K,Tt="M0,0H"+J+"V"+tt+"H0V0"),St=V(pt,Q,K)}(0,n,r)):"pan"===o&&(Ot.moveFn=Ht,Ot.doneFn=qt))),t._fullLayout._redrag=function(){var e=t._dragdata;e&&e.element===bt&&(v(t._fullLayout.dragmode)||(vt(),Gt([0,0,J,tt]),Ot.moveFn(e.dx,e.dy)))}},g.init(Ot);var Nt=[0,0,J,tt],Ft=null,zt=S.REDRAWDELAY,Vt=e.mainplot?t._fullLayout._plots[e.mainplot]:e;function Ht(e,n){if(e*=ht,n*=ft,!t._transitioningWithDuration){if(t._fullLayout._replotting=!0,"ew"===rt||"ns"===it){var r=rt?-e:0,i=it?-n:0;if(nt.isSubplotConstrained){if(rt&&it){var a=(e/J-n/tt)/2;r=-(e=a*J),i=-(n=-a*tt)}it?r=-i*J/tt:i=-r*tt/J}return rt&&(N(Y,e),jt("x")),it&&(N(X,n),jt("y")),Gt([r,i,J,tt]),Bt(),void t.emit("plotly_relayouting",dt)}var o,s,l="w"===rt==("n"===it)?1:-1;if(rt&&it&&(et.isSubplotConstrained||nt.isSubplotConstrained)){var c=(e/J+l*n/tt)/2;e=c*J,n=l*c*tt}if("w"===rt?e=f(Y,0,e):"e"===rt?e=f(Y,1,-e):rt||(e=0),"n"===it?n=f(X,1,n):"s"===it?n=f(X,0,-n):it||(n=0),o="w"===rt?e:0,s="n"===it?n:0,et.isSubplotConstrained&&!nt.isSubplotConstrained||nt.isSubplotConstrained&&rt&&it&&l>0){var u;if(nt.isSubplotConstrained||!rt&&1===it.length){for(u=0;u<Y.length;u++)Y[u].range=Y[u]._r.slice(),C(Y[u],1-n/tt);o=(e=n*J/tt)/2}if(nt.isSubplotConstrained||!it&&1===rt.length){for(u=0;u<X.length;u++)X[u].range=X[u]._r.slice(),C(X[u],1-e/J);s=(n=e*tt/J)/2}}nt.isSubplotConstrained&&it||jt("x"),nt.isSubplotConstrained&&rt||jt("y");var d=J-e,h=tt-n;!nt.isSubplotConstrained||rt&&it||(rt?(s=o?0:e*tt/J,h=d*tt/J):(o=s?0:n*J/tt,d=h*J/tt)),Gt([o,s,d,h]),Bt(),t.emit("plotly_relayouting",dt)}function f(t,e,n){for(var r,i,a=1-e,o=0;o<t.length;o++){var s=t[o];if(!s.fixedrange){r=s,i=s._rl[a]+(s._rl[e]-s._rl[a])/F(n/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[e]=l)}}return r._length*(r._rl[e]-i)/(r._rl[e]-r._rl[a])}}function jt(t,e){for(var n=nt.isSubplotConstrained?{x:X,y:Y}[t]:nt[t+"axes"],r=nt.isSubplotConstrained?{x:Y,y:X}[t]:[],i=0;i<n.length;i++){var a=n[i],o=a._id,s=nt.xLinks[o]||nt.yLinks[o],l=r[0]||j[s]||$[s];l&&(e?(e[a._name+".range[0]"]=e[l._name+".range[0]"],e[a._name+".range[1]"]=e[l._name+".range[1]"]):a.range=l.range.slice())}}function Bt(){var e,n=[];function r(t){for(e=0;e<t.length;e++)t[e].fixedrange||n.push(t[e]._id)}for(ot&&(r(Y),r(et.xaxes),r(nt.xaxes)),st&&(r(X),r(et.yaxes),r(nt.yaxes)),dt={},e=0;e<n.length;e++){var i=k(t,n[e]);f.drawOne(t,i,{skipTitle:!0}),dt[i._name+".range[0]"]=i.range[0],dt[i._name+".range[1]"]=i.range[1]}f.redrawComponents(t,n)}function Ut(){if(!t._transitioningWithDuration){var e=t._context.doubleClick,n=[];rt&&(n=n.concat(Y)),it&&(n=n.concat(X)),nt.xaxes&&(n=n.concat(nt.xaxes)),nt.yaxes&&(n=n.concat(nt.yaxes));var r,i,a,s={};if("reset+autosize"===e)for(e="autosize",i=0;i<n.length;i++)if((r=n[i])._rangeInitial&&(r.range[0]!==r._rangeInitial[0]||r.range[1]!==r._rangeInitial[1])||!r._rangeInitial&&!r.autorange){e="reset";break}if("autosize"===e)for(i=0;i<n.length;i++)(r=n[i]).fixedrange||(s[r._name+".autorange"]=!0);else if("reset"===e)for((rt||et.isSubplotConstrained)&&(n=n.concat(et.xaxes)),it&&!et.isSubplotConstrained&&(n=n.concat(et.yaxes)),et.isSubplotConstrained&&(rt?it||(n=n.concat(X)):n=n.concat(Y)),i=0;i<n.length;i++)(r=n[i]).fixedrange||(r._rangeInitial?(s[r._name+".range[0]"]=(a=r._rangeInitial)[0],s[r._name+".range[1]"]=a[1]):s[r._name+".autorange"]=!0);t.emit("plotly_doubleclick",null),o.call("_guiRelayout",t,s)}}function qt(){Gt([0,0,J,tt]),s.syncOrAsync([w.previousPromises,function(){t._fullLayout._replotting=!1,o.call("_guiRelayout",t,dt)}],t)}function Gt(e){var n,r,i,a,l=t._fullLayout,c=l._plots,u=l._subplots.cartesian;if(ct&&o.subplotsRegistry.splom.drag(t),lt)for(n=0;n<u.length;n++)if(i=(r=c[u[n]]).xaxis,a=r.yaxis,r._scene){var h=s.simpleMap(i.range,i.r2l),f=s.simpleMap(a.range,a.r2l);r._scene.update({range:[h[0],f[0],h[1],f[1]]})}if((ct||lt)&&(x(t),_(t)),ut){var g=e[2]/E._length,v=e[3]/L._length;for(n=0;n<u.length;n++){i=(r=c[u[n]]).xaxis,a=r.yaxis;var y,b,w,k,T=(st||nt.isSubplotConstrained)&&!a.fixedrange&&$[a._id];if((ot||nt.isSubplotConstrained)&&!i.fixedrange&&j[i._id]?(y=g,w=m||nt.isSubplotConstrained?e[0]:$t(i,y)):nt.xaHash[i._id]?(y=g,w=e[0]*i._length/E._length):nt.yaHash[i._id]?(y=v,w="ns"===it?-e[1]*i._length/L._length:$t(i,y,{n:"top",s:"bottom"}[it])):w=Wt(i,y=Zt(i,g,v)),T?(b=v,k=p||nt.isSubplotConstrained?e[1]:$t(a,b)):nt.yaHash[a._id]?(b=v,k=e[1]*a._length/L._length):nt.xaHash[a._id]?(b=g,k="ew"===rt?-e[0]*a._length/E._length:$t(a,b,{e:"right",w:"left"}[rt])):k=Wt(a,b=Zt(a,g,v)),y||b){y||(y=1),b||(b=1);var M=i._offset-w/y,A=a._offset-k/b;r.clipRect.call(d.setTranslate,w,k).call(d.setScale,y,b),r.plot.call(d.setTranslate,M,A).call(d.setScale,1/y,1/b),y===r.xScaleFactor&&b===r.yScaleFactor||(d.setPointGroupScale(r.zoomScalePts,y,b),d.setTextPointsScale(r.zoomScaleTxt,y,b)),d.hideOutsideRangePoints(r.clipOnAxisFalseTraces,r),r.xScaleFactor=y,r.yScaleFactor=b}}}}function Zt(t,e,n){return t.fixedrange?0:ot&&et.xaHash[t._id]?e:st&&(et.isSubplotConstrained?et.xaHash:et.yaHash)[t._id]?n:0}function Wt(t,e){return e?(t.range=t._r.slice(),C(t,e),$t(t,e)):0}function $t(t,e,n){return t._length*(1-e)*b[n||t.constraintoward||"middle"]}return p.length*m.length!=1&&Z(bt,function(e){if(t._context._scrollZoom.cartesian||t._fullLayout._enablescrollzoom){if(Et(),t._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();vt(),clearTimeout(Ft);var n=-e.deltaY;if(isFinite(n)||(n=e.wheelDelta/10),isFinite(n)){var r,i=Math.exp(-Math.min(Math.max(n,-20),20)/200),a=Vt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),o=(e.clientX-a.left)/a.width,l=(a.bottom-e.clientY)/a.height;if(ot){for(m||(o=.5),r=0;r<Y.length;r++)c(Y[r],o,i);jt("x"),Nt[2]*=i,Nt[0]+=Nt[2]*o*(1/i-1)}if(st){for(p||(l=.5),r=0;r<X.length;r++)c(X[r],l,i);jt("y"),Nt[3]*=i,Nt[1]+=Nt[3]*(1-l)*(1/i-1)}Gt(Nt),Bt(),t.emit("plotly_relayouting",dt),Ft=setTimeout(function(){Nt=[0,0,J,tt],qt()},zt),e.preventDefault()}else s.log("Did not find wheel motion attributes: ",e)}function c(t,e,n){if(!t.fixedrange){var r=s.simpleMap(t.range,t.r2l),i=r[0]+(r[1]-r[0])*e;t.range=r.map(function(e){return t.l2r(i+(e-i)*n)})}}}),bt},makeDragger:L,makeRectDragger:P,makeZoombox:z,makeCorners:V,updateZoombox:H,xyCorners:q,transitionZoombox:j,removeZoombox:B,showDoubleClickNotifier:U,attachWheelEventHandler:Z}},{"../../components/color":75,"../../components/dragelement":94,"../../components/dragelement/helpers":93,"../../components/drawing":97,"../../components/fx":115,"../../constants/alignment":177,"../../lib":202,"../../lib/clear_gl_canvases":190,"../../lib/setcursor":222,"../../lib/svg_text_utils":224,"../../plot_api/subroutines":238,"../../registry":290,"../plots":282,"./axes":248,"./axis_ids":251,"./constants":254,"./scale_zoom":266,"./select":267,d3:9,"has-passive-events":43,tinycolor2:58}],257:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/fx"),a=t("../../components/dragelement"),o=t("../../lib/setcursor"),s=t("./dragbox").makeDragBox,l=t("./constants").DRAGGERSIZE;n.initInteractions=function(t){var e=t._fullLayout;if(t._context.staticPlot)r.select(t).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("splom")){Object.keys(e._plots||{}).sort(function(t,n){if((e._plots[t].mainplot&&!0)===(e._plots[n].mainplot&&!0)){var r=t.split("y"),i=n.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return e._plots[t].mainplot?1:-1}).forEach(function(n){var r=e._plots[n],o=r.xaxis,c=r.yaxis;if(!r.mainplot){var u=s(t,r,o._offset,c._offset,o._length,c._length,"ns","ew");u.onmousemove=function(e){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===n&&t._fullLayout._plots[n]&&i.hover(t,e,n)},i.hover(t,e,n),t._fullLayout._lasthover=u,t._fullLayout._hoversubplot=n},u.onmouseout=function(e){t._dragging||(t._fullLayout._hoversubplot=null,a.unhover(t,e))},t._context.showAxisDragHandles&&(s(t,r,o._offset-l,c._offset-l,l,l,"n","w"),s(t,r,o._offset+o._length,c._offset-l,l,l,"n","e"),s(t,r,o._offset-l,c._offset+c._length,l,l,"s","w"),s(t,r,o._offset+o._length,c._offset+c._length,l,l,"s","e"))}if(t._context.showAxisDragHandles){if(n===o._mainSubplot){var d=o._mainLinePosition;"top"===o.side&&(d-=l),s(t,r,o._offset+.1*o._length,d,.8*o._length,l,"","ew"),s(t,r,o._offset,d,.1*o._length,l,"","w"),s(t,r,o._offset+.9*o._length,d,.1*o._length,l,"","e")}if(n===c._mainSubplot){var h=c._mainLinePosition;"right"!==c.side&&(h-=l),s(t,r,h,c._offset+.1*c._length,l,.8*c._length,"ns",""),s(t,r,h,c._offset+.9*c._length,l,.1*c._length,"s",""),s(t,r,h,c._offset,l,.1*c._length,"n","")}}});var o=e._hoverlayer.node();o.onmousemove=function(n){n.target=t._fullLayout._lasthover,i.hover(t,n,e._hoversubplot)},o.onclick=function(e){e.target=t._fullLayout._lasthover,i.click(t,e)},o.onmousedown=function(e){t._fullLayout._lasthover.onmousedown(e)},n.updateFx(t)}},n.updateFx=function(t){var e=t._fullLayout;o(e._draggers,"pan"===e.dragmode?"move":"crosshair")}},{"../../components/dragelement":94,"../../components/fx":115,"../../lib/setcursor":222,"./constants":254,"./dragbox":256,d3:9}],258:[function(t,e,n){"use strict";e.exports={clearOutlineControllers:function(t){var e=t._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearSelect:function(t){var e=t._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),t._fullLayout._drawing=!1}}},{}],259:[function(t,e,n){"use strict";var r=t("../../lib").strTranslate;function i(t,e){switch(t.type){case"log":return t.p2d(e);case"date":return t.p2r(e,0,t.calendar);default:return t.p2r(e)}}e.exports={p2r:i,r2p:function(t,e){switch(t.type){case"log":return t.d2p(e);case"date":return t.r2p(e,0,t.calendar);default:return t.r2p(e)}},axValue:function(t){var e="y"===t._id.charAt(0)?1:0;return function(n){return i(t,n[e])}},getTransform:function(t){return r(t.xaxis._offset,t.yaxis._offset)}}},{"../../lib":202}],260:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../lib"),a=t("./axis_ids");e.exports=function(t){return function(e,n){var o=e[t];if(Array.isArray(o))for(var s=r.subplotsRegistry.cartesian,l=s.idRegex,c=n._subplots,u=c.xaxis,d=c.yaxis,h=c.cartesian,f=n._has("cartesian")||n._has("gl2d"),p=0;p<o.length;p++){var g=o[p];if(i.isPlainObject(g)){var m=a.cleanId(g.xref,"x",!1),v=a.cleanId(g.yref,"y",!1),y=l.x.test(m),b=l.y.test(v);if(y||b){f||i.pushUnique(n._basePlotModules,s);var x=!1;y&&-1===u.indexOf(m)&&(u.push(m),x=!0),b&&-1===d.indexOf(v)&&(d.push(v),x=!0),x&&y&&b&&h.push(m+v)}}}}}},{"../../lib":202,"../../registry":290,"./axis_ids":251}],261:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../lib"),o=t("../plots"),s=t("../../components/drawing"),l=t("../get_data").getModuleCalcData,c=t("./axis_ids"),u=t("./constants"),d=t("../../constants/xmlns_namespaces"),h=a.ensureSingle;function f(t,e,n){return a.ensureSingle(t,e,n,function(t){t.datum(n)})}function p(t,e,n,a,o){for(var c,d,h,f=u.traceLayerClasses,p=t._fullLayout,g=p._modules,m=[],v=[],y=0;y<g.length;y++){var b=(c=g[y]).name,x=i.modules[b].categories;if(x.svg){var _=c.layerName||b+"layer",w=c.plot;h=(d=l(n,w))[0],n=d[1],h.length&&m.push({i:f.indexOf(_),className:_,plotMethod:w,cdModule:h}),x.zoomScale&&v.push("."+_)}}m.sort(function(t,e){return t.i-e.i});var k=e.plot.selectAll("g.mlayer").data(m,function(t){return t.className});if(k.enter().append("g").attr("class",function(t){return t.className}).classed("mlayer",!0).classed("rangeplot",e.isRangePlot),k.exit().remove(),k.order(),k.each(function(n){var i=r.select(this),l=n.className;n.plotMethod(t,e,n.cdModule,i,a,o),-1===u.clipOnAxisFalseQuery.indexOf("."+l)&&s.setClipUrl(i,e.layerClipId,t)}),p._has("scattergl")&&(c=i.getModule("scattergl"),h=l(n,c)[0],c.plot(t,e,h)),!t._context.staticPlot&&(e._hasClipOnAxisFalse&&(e.clipOnAxisFalseTraces=e.plot.selectAll(u.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),v.length)){var T=e.plot.selectAll(v.join(",")).selectAll(".trace");e.zoomScalePts=T.selectAll("path.point"),e.zoomScaleTxt=T.selectAll(".textpoint")}}function g(t,e){var n=e.plotgroup,r=e.id,i=u.layerValue2layerClass[e.xaxis.layer],a=u.layerValue2layerClass[e.yaxis.layer],o=t._fullLayout._hasOnlyLargeSploms;if(e.mainplot){var s=e.mainplotinfo,l=s.plotgroup,d=r+"-x",p=r+"-y";e.gridlayer=s.gridlayer,e.zerolinelayer=s.zerolinelayer,h(s.overlinesBelow,"path",d),h(s.overlinesBelow,"path",p),h(s.overaxesBelow,"g",d),h(s.overaxesBelow,"g",p),e.plot=h(s.overplot,"g",r),h(s.overlinesAbove,"path",d),h(s.overlinesAbove,"path",p),h(s.overaxesAbove,"g",d),h(s.overaxesAbove,"g",p),e.xlines=l.select(".overlines-"+i).select("."+d),e.ylines=l.select(".overlines-"+a).select("."+p),e.xaxislayer=l.select(".overaxes-"+i).select("."+d),e.yaxislayer=l.select(".overaxes-"+a).select("."+p)}else if(o)e.xlines=h(n,"path","xlines-above"),e.ylines=h(n,"path","ylines-above"),e.xaxislayer=h(n,"g","xaxislayer-above"),e.yaxislayer=h(n,"g","yaxislayer-above");else{var g=h(n,"g","layer-subplot");e.shapelayer=h(g,"g","shapelayer"),e.imagelayer=h(g,"g","imagelayer"),e.gridlayer=h(n,"g","gridlayer"),e.zerolinelayer=h(n,"g","zerolinelayer"),h(n,"path","xlines-below"),h(n,"path","ylines-below"),e.overlinesBelow=h(n,"g","overlines-below"),h(n,"g","xaxislayer-below"),h(n,"g","yaxislayer-below"),e.overaxesBelow=h(n,"g","overaxes-below"),e.plot=h(n,"g","plot"),e.overplot=h(n,"g","overplot"),e.xlines=h(n,"path","xlines-above"),e.ylines=h(n,"path","ylines-above"),e.overlinesAbove=h(n,"g","overlines-above"),h(n,"g","xaxislayer-above"),h(n,"g","yaxislayer-above"),e.overaxesAbove=h(n,"g","overaxes-above"),e.xlines=n.select(".xlines-"+i),e.ylines=n.select(".ylines-"+a),e.xaxislayer=n.select(".xaxislayer-"+i),e.yaxislayer=n.select(".yaxislayer-"+a)}o||(f(e.gridlayer,"g",e.xaxis._id),f(e.gridlayer,"g",e.yaxis._id),e.gridlayer.selectAll("g").map(function(t){return t[0]}).sort(c.idSort)),e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function m(t,e){if(t){var n={};for(var i in t.each(function(t){var i=t[0];r.select(this).remove(),v(i,e),n[i]=!0}),e._plots)for(var a=e._plots[i].overlays||[],o=0;o<a.length;o++){var s=a[o];n[s.id]&&s.plot.selectAll(".trace").remove()}}}function v(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=u.idRegex,n.attrRegex=u.attrRegex,n.attributes=t("./attributes"),n.layoutAttributes=t("./layout_attributes"),n.supplyLayoutDefaults=t("./layout_defaults"),n.transitionAxes=t("./transition_axes"),n.finalizeSubplots=function(t,e){var n,r,i,o=e._subplots,s=o.xaxis,l=o.yaxis,d=o.cartesian,h=d.concat(o.gl2d||[]),f={},p={};for(n=0;n<h.length;n++){var g=h[n].split("y");f[g[0]]=1,p["y"+g[1]]=1}for(n=0;n<s.length;n++)f[r=s[n]]||(i=(t[c.id2name(r)]||{}).anchor,u.idRegex.y.test(i)||(i="y"),d.push(r+i),h.push(r+i),p[i]||(p[i]=1,a.pushUnique(l,i)));for(n=0;n<l.length;n++)p[i=l[n]]||(r=(t[c.id2name(i)]||{}).anchor,u.idRegex.x.test(r)||(r="x"),d.push(r+i),h.push(r+i),f[r]||(f[r]=1,a.pushUnique(s,r)));if(!h.length){for(var m in r="",i="",t)u.attrRegex.test(m)&&("x"===m.charAt(0)?(!r||+m.substr(5)<+r.substr(5))&&(r=m):(!i||+m.substr(5)<+i.substr(5))&&(i=m));r=r?c.name2id(r):"x",i=i?c.name2id(i):"y",s.push(r),l.push(i),d.push(r+i)}},n.plot=function(t,e,n,r){var i,a=t._fullLayout,o=a._subplots.cartesian,s=t.calcdata;if(!Array.isArray(e))for(e=[],i=0;i<s.length;i++)e.push(i);for(i=0;i<o.length;i++){for(var l,c=o[i],u=a._plots[c],d=[],h=0;h<s.length;h++){var f=s[h],g=f[0].trace;g.xaxis+g.yaxis===c&&((-1!==e.indexOf(g.index)||g.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(g.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(f)),l=f)}p(t,u,d,n,r)}},n.clean=function(t,e,n,r){var i,a,o,s=r._plots||{},l=e._plots||{},u=r._subplots||{};if(r._hasOnlyLargeSploms&&!e._hasOnlyLargeSploms)for(o in s)(i=s[o]).plotgroup&&i.plotgroup.remove();var d=r._has&&r._has("gl"),h=e._has&&e._has("gl");if(d&&!h)for(o in s)(i=s[o])._scene&&i._scene.destroy();if(u.xaxis&&u.yaxis){var f=c.listIds({_fullLayout:r});for(a=0;a<f.length;a++){var p=f[a];e[c.id2name(p)]||r._infolayer.selectAll(".g-"+p+"title").remove()}}var g=r._has&&r._has("cartesian"),y=e._has&&e._has("cartesian");if(g&&!y)m(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(u.cartesian)for(a=0;a<u.cartesian.length;a++){var b=u.cartesian[a];l[b]||(r._cartesianlayer.selectAll("."+b+",."+b+"-x,."+b+"-y").remove(),v(b,r))}},n.drawFramework=function(t){var e=t._fullLayout,n=function(t){var e,n,r,i,a,o,s=t._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(e=0;e<c;e++){var h=(a=(i=s._plots[r=l[e]]).xaxis)._mainAxis._id+(o=i.yaxis)._mainAxis._id,f=s._plots[h];i.overlays=[],h!==r&&f?(i.mainplot=h,i.mainplotinfo=f,d.push(r)):(i.mainplot=void 0,i.mainplotinfo=void 0,u.push(r))}for(e=0;e<d.length;e++)(i=s._plots[r=d[e]]).mainplotinfo.overlays.push(i);var p=u.concat(d),g=new Array(c);for(e=0;e<c;e++){var m=[r=p[e],(a=(i=s._plots[r]).xaxis).layer,(o=i.yaxis).layer,a.overlaying||"",o.overlaying||""];for(n=0;n<i.overlays.length;n++)m.push(i.overlays[n].id);g[e]=m}return g}(t),i=e._cartesianlayer.selectAll(".subplot").data(n,String);i.enter().append("g").attr("class",function(t){return"subplot "+t[0]}),i.order(),i.exit().call(m,e),i.each(function(n){var i=n[0],a=e._plots[i];a.plotgroup=r.select(this),g(t,a),a.draglayer=h(e._draggers,"g",i)})},n.rangePlot=function(t,e,n){g(t,e),p(t,e,n),o.style(t)},n.toSVG=function(t){var e=t._fullLayout._glimages,n=r.select(t).selectAll(".svg-container");n.filter(function(t,e){return e===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:d.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},n.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":97,"../../constants/xmlns_namespaces":182,"../../lib":202,"../../registry":290,"../get_data":278,"../plots":282,"./attributes":246,"./axis_ids":251,"./constants":254,"./graph_interact":257,"./layout_attributes":262,"./layout_defaults":263,"./transition_axes":272,d3:9}],262:[function(t,e,n){"use strict";var r=t("../font_attributes"),i=t("../../components/color/attributes"),a=t("../../components/drawing/attributes").dash,o=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray,l=(t("../../constants/docs"),t("../../constants/docs"),t("../../constants/numerical").ONEDAY),c=t("./constants"),u=c.HOUR_PATTERN,d=c.WEEKDAY_PATTERN;e.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:i.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,u,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:l},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:i.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":74,"../../components/drawing/attributes":96,"../../constants/docs":179,"../../constants/numerical":181,"../../lib/extend":196,"../../plot_api/plot_template":237,"../font_attributes":276,"./constants":254}],263:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../components/color"),a=t("../../components/fx/helpers").isUnifiedHover,o=t("../../components/fx/hovermode_defaults"),s=t("../../plot_api/plot_template"),l=t("../layout_attributes"),c=t("./layout_attributes"),u=t("./type_defaults"),d=t("./axis_defaults"),h=t("./constraints"),f=t("./position_defaults"),p=t("./axis_ids"),g=p.id2name,m=p.name2id,v=t("./constants").AX_ID_PATTERN,y=t("../../registry"),b=y.traceIs,x=y.getComponentMethod;function _(t,e,n){Array.isArray(t[e])?t[e].push(n):t[e]=[n]}e.exports=function(t,e,n){var y,w,k=e.autotypenumbers,T={},M={},A={},C={},S={},D={},O={},E={},L={},P={};for(y=0;y<n.length;y++){var I=n[y];if(b(I,"cartesian")||b(I,"gl2d")){var R,N;if(I.xaxis)R=g(I.xaxis),_(T,R,I);else if(I.xaxes)for(w=0;w<I.xaxes.length;w++)_(T,g(I.xaxes[w]),I);if(I.yaxis)N=g(I.yaxis),_(T,N,I);else if(I.yaxes)for(w=0;w<I.yaxes.length;w++)_(T,g(I.yaxes[w]),I);"funnel"===I.type?"h"===I.orientation?(R&&(M[R]=!0),N&&(O[N]=!0)):N&&(A[N]=!0):"image"===I.type?(N&&(E[N]=!0),R&&(E[R]=!0)):(N&&(S[N]=!0,D[N]=!0),b(I,"carpet")&&("carpet"!==I.type||I._cheater)||R&&(C[R]=!0)),"carpet"===I.type&&I._cheater&&R&&(M[R]=!0),b(I,"2dMap")&&(L[R]=!0,L[N]=!0),b(I,"oriented")&&(P["h"===I.orientation?N:R]=!0)}}var F=e._subplots,z=F.xaxis,V=F.yaxis,H=r.simpleMap(z,g),j=r.simpleMap(V,g),B=H.concat(j),U=i.background;z.length&&V.length&&(U=r.coerce(t,e,l,"plot_bgcolor"));var q,G,Z,W,$,Y=i.combine(U,e.paper_bgcolor);function X(){$._traceIndices=(T[q]||[]).map(function(t){return t._expandedIndex}),$._annIndices=[],$._shapeIndices=[],$._imgIndices=[],$._subplotsWith=[],$._counterAxes=[],$._name=$._attr=q,$._id=G}function Q(t,e){return r.coerce(W,$,c,t,e)}function K(t,e){return r.coerce2(W,$,c,t,e)}function J(t){return"x"===t?V:z}function tt(e,n){for(var r="x"===e?H:j,i=[],a=0;a<r.length;a++){var o=r[a];o===n||(t[o]||{}).overlaying||i.push(m(o))}return i}var et={x:J("x"),y:J("y")},nt=et.x.concat(et.y),rt={},it=[];function at(){var t=W.matches;v.test(t)&&-1===nt.indexOf(t)&&(rt[t]=W.type,it=Object.keys(rt))}var ot=o(t,e,n),st=a(ot);for(y=0;y<B.length;y++){G=m(q=B[y]),Z=q.charAt(0),r.isPlainObject(t[q])||(t[q]={}),W=t[q],$=s.newContainer(e,q,Z+"axis"),X();var lt={letter:Z,font:e.font,outerTicks:L[q],showGrid:!P[q],data:T[q]||[],bgColor:Y,calendar:e.calendar,automargin:!0,visibleDflt:"x"===Z&&!C[q]&&M[q]||"y"===Z&&!S[q]&&A[q],reverseDflt:"y"===Z&&(!D[q]&&O[q]||E[q]),autotypenumbersDflt:k,splomStash:((e._splomAxes||{})[Z]||{})[G]};Q("uirevision",e.uirevision),u(W,$,Q,lt),d(W,$,Q,lt,e);var ct=st&&Z===ot.charAt(0),ut=K("spikecolor",st?$.color:void 0),dt=K("spikethickness",st?1.5:void 0),ht=K("spikedash",st?"dot":void 0),ft=K("spikemode",st?"across":void 0),pt=K("spikesnap",st?"hovered data":void 0);Q("showspikes",!!(ct||ut||dt||ht||ft||pt))||(delete $.spikecolor,delete $.spikethickness,delete $.spikedash,delete $.spikemode,delete $.spikesnap),f(W,$,Q,{letter:Z,counterAxes:et[Z],overlayableAxes:tt(Z,q),grid:e.grid}),Q("title.standoff"),at(),$._input=W}for(y=0;y<it.length;){G=it[y++],Z=(q=g(G)).charAt(0),r.isPlainObject(t[q])||(t[q]={}),W=t[q],$=s.newContainer(e,q,Z+"axis"),X();var gt={letter:Z,font:e.font,outerTicks:L[q],showGrid:!P[q],data:[],bgColor:Y,calendar:e.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:k,splomStash:((e._splomAxes||{})[Z]||{})[G]};Q("uirevision",e.uirevision),$.type=rt[G]||"linear",d(W,$,Q,gt,e),f(W,$,Q,{letter:Z,counterAxes:et[Z],overlayableAxes:tt(Z,q),grid:e.grid}),Q("fixedrange"),at(),$._input=W}var mt=x("rangeslider","handleDefaults"),vt=x("rangeselector","handleDefaults");for(y=0;y<H.length;y++)W=t[q=H[y]],$=e[q],mt(t,e,q),"date"===$.type&&vt(W,$,e,j,$.calendar),Q("fixedrange");for(y=0;y<j.length;y++){W=t[q=j[y]];var yt=e[g(($=e[q]).anchor)];Q("fixedrange",x("rangeslider","isVisible")(yt))}h.handleDefaults(t,e,{axIds:nt.concat(it).sort(p.idSort),axHasImage:E})}},{"../../components/color":75,"../../components/fx/helpers":111,"../../components/fx/hovermode_defaults":114,"../../lib":202,"../../plot_api/plot_template":237,"../../registry":290,"../layout_attributes":280,"./axis_defaults":250,"./axis_ids":251,"./constants":254,"./constraints":255,"./layout_attributes":262,"./position_defaults":265,"./type_defaults":273}],264:[function(t,e,n){"use strict";var r=t("tinycolor2").mix,i=t("../../components/color/attributes").lightFraction,a=t("../../lib");e.exports=function(t,e,n,o){var s=(o=o||{}).dfltColor;function l(n,r){return a.coerce2(t,e,o.attributes,n,r)}var c=l("linecolor",s),u=l("linewidth");n("showline",o.showLine||!!c||!!u)||(delete e.linecolor,delete e.linewidth);var d=l("gridcolor",r(s,o.bgColor,o.blend||i).toRgbString()),h=l("gridwidth");if(n("showgrid",o.showGrid||!!d||!!h)||(delete e.gridcolor,delete e.gridwidth),!o.noZeroLine){var f=l("zerolinecolor",s),p=l("zerolinewidth");n("zeroline",o.showGrid||!!f||!!p)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":74,"../../lib":202,tinycolor2:58}],265:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib");e.exports=function(t,e,n,a){var o,s,l,c,u=a.counterAxes||[],d=a.overlayableAxes||[],h=a.letter,f=a.grid;f&&(o=f._anchors[e._id],(s=f._domains[h][f._axisMap[e._id]])&&(l=f[h+"side"].split(" ")[0],c=f.domain[h]["right"===l||"top"===l?1:0])),s=s||[0,1],o=o||(r(t.position)?"free":u[0]||"free"),l=l||("x"===h?"bottom":"left"),c=c||0,"free"===i.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:o}},"anchor")&&n("position",c),i.coerce(t,e,{side:{valType:"enumerated",values:"x"===h?["bottom","top"]:["left","right"],dflt:l}},"side");var p=!1;if(d.length&&(p=i.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(d),dflt:!1}},"overlaying")),!p){var g=n("domain",s);g[0]>g[1]-1/4096&&(e.domain=s),i.noneOrAll(t.domain,e.domain,s)}return n("layer"),e}},{"../../lib":202,"fast-isnumeric":11}],266:[function(t,e,n){"use strict";var r=t("../../constants/alignment").FROM_BL;e.exports=function(t,e,n){void 0===n&&(n=r[t.constraintoward||"center"]);var i=[t.r2l(t.range[0]),t.r2l(t.range[1])],a=i[0]+(i[1]-i[0])*n;t.range=t._input.range=[t.l2r(a+(i[0]-a)*e),t.l2r(a+(i[1]-a)*e)],t.setScale()}},{"../../constants/alignment":177}],267:[function(t,e,n){"use strict";var r=t("polybooljs"),i=t("../../registry"),a=t("../../components/drawing").dashStyle,o=t("../../components/color"),s=t("../../components/fx"),l=t("../../components/fx/helpers").makeEventData,c=t("../../components/dragelement/helpers"),u=c.freeMode,d=c.rectMode,h=c.drawMode,f=c.openMode,p=c.selectMode,g=t("../../components/shapes/draw_newshape/display_outlines"),m=t("../../components/shapes/draw_newshape/helpers").handleEllipse,v=t("../../components/shapes/draw_newshape/newshapes"),y=t("../../lib"),b=t("../../lib/polygon"),x=t("../../lib/throttle"),_=t("./axis_ids").getFromId,w=t("../../lib/clear_gl_canvases"),k=t("../../plot_api/subroutines").redrawReglTraces,T=t("./constants"),M=T.MINSELECT,A=b.filter,C=b.tester,S=t("./handle_outline").clearSelect,D=t("./helpers"),O=D.p2r,E=D.axValue,L=D.getTransform;function P(t,e,n,r,i,a,o){var s,l,c,u,d,h,p,m,v,y=e._hoverdata,b=e._fullLayout.clickmode.indexOf("event")>-1,x=[];if(function(t){return t&&Array.isArray(t)&&!0!==t[0].hoverOnBox}(y)){F(t,e,a);var _=function(t,e){var n,r,i=t[0],a=-1,o=[];for(r=0;r<e.length;r++)if(i.fullData._expandedIndex===(n=e[r]).cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?a=i.pointNumber:void 0!==i.binNumber&&(a=i.binNumber,o=i.pointNumbers);break}return{pointNumber:a,pointNumbers:o,searchInfo:n}}(y,s=V(e,n,r,i));if(_.pointNumbers.length>0?function(t,e){var n,r,i,a=[];for(i=0;i<t.length;i++)(n=t[i]).cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0&&a.push(n);if(1===a.length&&a[0]===e.searchInfo&&(r=e.searchInfo.cd[0].trace).selectedpoints.length===e.pointNumbers.length){for(i=0;i<e.pointNumbers.length;i++)if(r.selectedpoints.indexOf(e.pointNumbers[i])<0)return!1;return!0}return!1}(s,_):function(t){var e,n,r=0;for(n=0;n<t.length;n++)if((e=t[n].cd[0].trace).selectedpoints){if(e.selectedpoints.length>1)return!1;if((r+=e.selectedpoints.length)>1)return!1}return 1===r}(s)&&(h=H(_))){for(o&&o.remove(),v=0;v<s.length;v++)(l=s[v])._module.selectPoints(l,!1);j(e,s),z(a),b&&e.emit("plotly_deselect",null)}else{for(p=t.shiftKey&&(void 0!==h?h:H(_)),c=function(t,e,n){return{pointNumber:t,searchInfo:e,subtract:n}}(_.pointNumber,_.searchInfo,p),u=N(a.selectionDefs.concat([c])),v=0;v<s.length;v++)if(d=B(s[v]._module.selectPoints(s[v],u),s[v]),x.length)for(var w=0;w<d.length;w++)x.push(d[w]);else x=d;if(j(e,s,m={points:x}),c&&a&&a.selectionDefs.push(c),o){var k=a.mergedPolygons,T=f(a.dragmode);g(U(k,T),o,a)}b&&e.emit("plotly_selected",m)}}}function I(t){return"pointNumber"in t&&"searchInfo"in t}function R(t){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,n,r,i){return i.cd[0].trace._expandedIndex===t.searchInfo.cd[0].trace._expandedIndex&&r===t.pointNumber},isRect:!1,degenerate:!1,subtract:t.subtract}}function N(t){for(var e=[],n=I(t[0])?0:t[0][0][0],r=n,i=I(t[0])?0:t[0][0][1],a=i,o=0;o<t.length;o++)if(I(t[o]))e.push(R(t[o]));else{var s=b.tester(t[o]);s.subtract=t[o].subtract,e.push(s),n=Math.min(n,s.xmin),r=Math.max(r,s.xmax),i=Math.min(i,s.ymin),a=Math.max(a,s.ymax)}return{xmin:n,xmax:r,ymin:i,ymax:a,pts:[],contains:function(t,n,r,i){for(var a=!1,o=0;o<e.length;o++)e[o].contains(t,n,r,i)&&(a=!1===e[o].subtract);return a},isRect:!1,degenerate:!1}}function F(t,e,n){e._fullLayout._drawing=!1;var r=e._fullLayout,i=n.plotinfo,a=n.dragmode,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===i.id,s=(t.shiftKey||t.altKey)&&!(h(a)&&f(a));o&&s&&i.selection&&i.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=i.selection.selectionDefs,n.mergedPolygons=i.selection.mergedPolygons):s&&i.selection||z(n),o||(S(e),r._lastSelectedSubplot=i.id)}function z(t){var e=t.dragmode,n=t.plotinfo,r=t.gd;if(r._fullLayout._activeShapeIndex>=0&&r._fullLayout._deactivateShape(r),h(e)){var a=r._fullLayout._zoomlayer.selectAll(".select-outline-"+n.id);if(a&&r._fullLayout._drawing){var o=v(a,t);o&&i.call("_guiRelayout",r,{shapes:o}),r._fullLayout._drawing=!1}}n.selection={},n.selection.selectionDefs=t.selectionDefs=[],n.selection.mergedPolygons=t.mergedPolygons=[]}function V(t,e,n,r){var i,a,o,s=[],l=e.map(function(t){return t._id}),c=n.map(function(t){return t._id});for(o=0;o<t.calcdata.length;o++)if(!0===(a=(i=t.calcdata[o])[0].trace).visible&&a._module&&a._module.selectPoints)if(!r||a.subplot!==r&&a.geo!==r)if("splom"===a.type&&a._xaxes[l[0]]&&a._yaxes[c[0]]){var u=h(a._module,i,e[0],n[0]);u.scene=t._fullLayout._splomScenes[a.uid],s.push(u)}else if("sankey"===a.type){var d=h(a._module,i,e[0],n[0]);s.push(d)}else{if(-1===l.indexOf(a.xaxis))continue;if(-1===c.indexOf(a.yaxis))continue;s.push(h(a._module,i,_(t,a.xaxis),_(t,a.yaxis)))}else s.push(h(a._module,i,e[0],n[0]));return s;function h(t,e,n,r){return{_module:t,cd:e,xaxis:n,yaxis:r}}}function H(t){var e=t.searchInfo.cd[0].trace,n=t.pointNumbers;return!!e.selectedpoints&&e.selectedpoints.indexOf(n.length>0?n[0]:t.pointNumber)>-1}function j(t,e,n){var r,a,o,s;for(r=0;r<e.length;r++){var l=e[r].cd[0].trace._fullInput,c=t._fullLayout._tracePreGUI[l.uid]||{};void 0===c.selectedpoints&&(c.selectedpoints=l._input.selectedpoints||null)}if(n){var u=n.points||[];for(r=0;r<e.length;r++)(s=e[r].cd[0].trace)._input.selectedpoints=s._fullInput.selectedpoints=[],s._fullInput!==s&&(s.selectedpoints=[]);for(r=0;r<u.length;r++){var d=u[r],h=d.data,f=d.fullData;d.pointIndices?([].push.apply(h.selectedpoints,d.pointIndices),s._fullInput!==s&&[].push.apply(f.selectedpoints,d.pointIndices)):(h.selectedpoints.push(d.pointIndex),s._fullInput!==s&&f.selectedpoints.push(d.pointIndex))}}else for(r=0;r<e.length;r++)delete(s=e[r].cd[0].trace).selectedpoints,delete s._input.selectedpoints,s._fullInput!==s&&delete s._fullInput.selectedpoints;var p=!1;for(r=0;r<e.length;r++){s=(o=(a=e[r]).cd)[0].trace,i.traceIs(s,"regl")&&(p=!0);var g=a._module,m=g.styleOnSelect||g.style;m&&(m(t,o,o[0].node3),o[0].nodeRangePlot3&&m(t,o,o[0].nodeRangePlot3))}p&&(w(t),k(t))}function B(t,e){if(Array.isArray(t))for(var n=e.cd,r=e.cd[0].trace,i=0;i<t.length;i++)t[i]=l(t[i],r,n);return t}function U(t,e){for(var n=[],r=0;r<t.length;r++){n[r]=[];for(var i=0;i<t[r].length;i++){n[r][i]=[],n[r][i][0]=i?"L":"M";for(var a=0;a<t[r][i].length;a++)n[r][i].push(t[r][i][a])}e||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}e.exports={prepSelect:function(t,e,n,i,l){var c=u(l),v=d(l),b=f(l),_=h(l),w=p(l),k="drawcircle"===l,S="drawline"===l||k,D=i.gd,I=D._fullLayout,R=I._zoomlayer,H=i.element.getBoundingClientRect(),q=i.plotinfo,G=L(q),Z=e-H.left,W=n-H.top;I._calcInverseTransform(D);var $,Y,X,Q,K,J,tt,et=y.apply3DTransform(I._invTransform)(Z,W),nt=I._invScaleX,rt=I._invScaleY,it=Z=et[0],at=W=et[1],ot="M"+Z+","+W,st=i.xaxes[0]._length,lt=i.yaxes[0]._length,ct=i.xaxes.concat(i.yaxes),ut=t.altKey&&!(h(l)&&b);F(t,D,i),c&&($=A([[Z,W]],T.BENDPX));var dt=R.selectAll("path.select-outline-"+q.id).data(_?[0]:[1,2]),ht=I.newshape;dt.enter().append("path").attr("class",function(t){return"select-outline select-outline-"+t+" select-outline-"+q.id}).style(_?{opacity:ht.opacity/2,fill:b?void 0:ht.fillcolor,stroke:ht.line.color,"stroke-dasharray":a(ht.line.dash,ht.line.width),"stroke-width":ht.line.width+"px"}:{}).attr("fill-rule",ht.fillrule).classed("cursor-move",!!_).attr("transform",G).attr("d",ot+"Z");var ft,pt=R.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1}).attr("transform",G).attr("d","M0,0Z"),gt=I._uid+T.SELECTID,mt=[],vt=V(D,i.xaxes,i.yaxes,i.subplot);function yt(t,e){return t-e}ft=q.fillRangeItems?q.fillRangeItems:v?function(t,e){var n=t.range={};for(K=0;K<ct.length;K++){var r=ct[K],i=r._id.charAt(0);n[r._id]=[O(r,e[i+"min"]),O(r,e[i+"max"])].sort(yt)}}:function(t,e,n){var r=t.lassoPoints={};for(K=0;K<ct.length;K++){var i=ct[K];r[i._id]=n.filtered.map(E(i))}},i.moveFn=function(t,e){it=Math.max(0,Math.min(st,nt*t+Z)),at=Math.max(0,Math.min(lt,rt*e+W));var n=Math.abs(it-Z),a=Math.abs(at-W);if(v){var o,s,l;if(w){var u=I.selectdirection;switch(o="any"===u?a<Math.min(.6*n,M)?"h":n<Math.min(.6*a,M)?"v":"d":u){case"h":s=k?lt/2:0,l=lt;break;case"v":s=k?st/2:0,l=st}}if(_)switch(I.newshape.drawdirection){case"vertical":o="h",s=k?lt/2:0,l=lt;break;case"horizontal":o="v",s=k?st/2:0,l=st;break;case"ortho":n<a?(o="h",s=W,l=at):(o="v",s=Z,l=it);break;default:o="d"}"h"===o?((Q=S?m(k,[it,s],[it,l]):[[Z,s],[Z,l],[it,l],[it,s]]).xmin=S?it:Math.min(Z,it),Q.xmax=S?it:Math.max(Z,it),Q.ymin=Math.min(s,l),Q.ymax=Math.max(s,l),pt.attr("d","M"+Q.xmin+","+(W-M)+"h-4v"+2*M+"h4ZM"+(Q.xmax-1)+","+(W-M)+"h4v"+2*M+"h-4Z")):"v"===o?((Q=S?m(k,[s,at],[l,at]):[[s,W],[s,at],[l,at],[l,W]]).xmin=Math.min(s,l),Q.xmax=Math.max(s,l),Q.ymin=S?at:Math.min(W,at),Q.ymax=S?at:Math.max(W,at),pt.attr("d","M"+(Z-M)+","+Q.ymin+"v-4h"+2*M+"v4ZM"+(Z-M)+","+(Q.ymax-1)+"v4h"+2*M+"v-4Z")):"d"===o&&((Q=S?m(k,[Z,W],[it,at]):[[Z,W],[Z,at],[it,at],[it,W]]).xmin=Math.min(Z,it),Q.xmax=Math.max(Z,it),Q.ymin=Math.min(W,at),Q.ymax=Math.max(W,at),pt.attr("d","M0,0Z"))}else c&&($.addPt([it,at]),Q=$.filtered);i.selectionDefs&&i.selectionDefs.length?(X=function(t,e,n){return n?r.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions:r.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}(i.mergedPolygons,Q,ut),Q.subtract=ut,Y=N(i.selectionDefs.concat([Q]))):(X=[Q],Y=C(Q)),g(U(X,b),dt,i),w&&x.throttle(gt,T.SELECTDELAY,function(){var t;mt=[];var e,n=[];for(K=0;K<vt.length;K++)if(e=(J=vt[K])._module.selectPoints(J,Y),n.push(e),t=B(e,J),mt.length)for(var r=0;r<t.length;r++)mt.push(t[r]);else mt=t;j(D,vt,tt={points:mt}),ft(tt,Q,$),i.gd.emit("plotly_selecting",tt)})},i.clickFn=function(t,e){if(pt.remove(),D._fullLayout._activeShapeIndex>=0)D._fullLayout._deactivateShape(D);else if(!_){var n=I.clickmode;x.done(gt).then(function(){if(x.clear(gt),2===t){for(dt.remove(),K=0;K<vt.length;K++)(J=vt[K])._module.selectPoints(J,!1);j(D,vt),z(i),D.emit("plotly_deselect",null)}else n.indexOf("select")>-1&&P(e,D,i.xaxes,i.yaxes,i.subplot,i,dt),"event"===n&&D.emit("plotly_selected",void 0);s.click(D,e)}).catch(y.error)}},i.doneFn=function(){pt.remove(),x.done(gt).then(function(){x.clear(gt),i.gd.emit("plotly_selected",tt),Q&&i.selectionDefs&&(Q.subtract=ut,i.selectionDefs.push(Q),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,X)),i.doneFnCompleted&&i.doneFnCompleted(mt)}).catch(y.error),_&&z(i)}},clearSelect:S,clearSelectionsCache:z,selectOnClick:P}},{"../../components/color":75,"../../components/dragelement/helpers":93,"../../components/drawing":97,"../../components/fx":115,"../../components/fx/helpers":111,"../../components/shapes/draw_newshape/display_outlines":160,"../../components/shapes/draw_newshape/helpers":161,"../../components/shapes/draw_newshape/newshapes":162,"../../lib":202,"../../lib/clear_gl_canvases":190,"../../lib/polygon":214,"../../lib/throttle":225,"../../plot_api/subroutines":238,"../../registry":290,"./axis_ids":251,"./constants":254,"./handle_outline":258,"./helpers":259,polybooljs:49}],268:[function(t,e,n){"use strict";var r=t("d3"),i=t("d3-time-format").utcFormat,a=t("fast-isnumeric"),o=t("../../lib"),s=o.cleanNumber,l=o.ms2DateTime,c=o.dateTime2ms,u=o.ensureNumber,d=o.isArrayOrTypedArray,h=t("../../constants/numerical"),f=h.FP_SAFE,p=h.BADNUM,g=h.LOG_CLIP,m=h.ONEWEEK,v=h.ONEDAY,y=h.ONEHOUR,b=h.ONEMIN,x=h.ONESEC,_=t("./axis_ids"),w=t("./constants"),k=w.HOUR_PATTERN,T=w.WEEKDAY_PATTERN;function M(t){return Math.pow(10,t)}function A(t){return null!=t}e.exports=function(t,e){e=e||{};var n=t._id||"x",h=n.charAt(0);function C(e,n){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&n&&t.range&&2===t.range.length){var r=t.range[0],i=t.range[1];return.5*(r+i-2*g*Math.abs(r-i))}return p}function S(e,n,r,i){if((i||{}).msUTC&&a(e))return+e;var s=c(e,r||t.calendar);if(s===p){if(!a(e))return p;e=+e;var l=Math.floor(10*o.mod(e+.05,1)),u=Math.round(e-l/10);s=c(new Date(u))+l/10}return s}function D(e,n,r){return l(e,n,r||t.calendar)}function O(e){return t._categories[Math.round(e)]}function E(e){if(A(e)){if(void 0===t._categoriesMap&&(t._categoriesMap={}),void 0!==t._categoriesMap[e])return t._categoriesMap[e];t._categories.push("number"==typeof e?String(e):e);var n=t._categories.length-1;return t._categoriesMap[e]=n,n}return p}function L(e){if(t._categoriesMap)return t._categoriesMap[e]}function P(t){var e=L(t);return void 0!==e?e:a(t)?+t:void 0}function I(t){return a(t)?+t:L(t)}function R(t,e,n){return r.round(n+e*t,2)}function N(t,e,n){return(t-n)/e}var F=function(e){return a(e)?R(e,t._m,t._b):p},z=function(e){return N(e,t._m,t._b)};if(t.rangebreaks){var V="y"===h;F=function(e){if(!a(e))return p;var n=t._rangebreaks.length;if(!n)return R(e,t._m,t._b);var r=V;t.range[0]>t.range[1]&&(r=!r);for(var i=r?-1:1,o=i*e,s=0,l=0;l<n;l++){var c=i*t._rangebreaks[l].min,u=i*t._rangebreaks[l].max;if(o<c)break;if(!(o>u)){s=o<(c+u)/2?l:l+1;break}s=l+1}var d=t._B[s]||0;return isFinite(d)?R(e,t._m2,d):0},z=function(e){var n=t._rangebreaks.length;if(!n)return N(e,t._m,t._b);for(var r=0,i=0;i<n&&!(e<t._rangebreaks[i].pmin);i++)e>t._rangebreaks[i].pmax&&(r=i+1);return N(e,t._m2,t._B[r])}}t.c2l="log"===t.type?C:u,t.l2c="log"===t.type?M:u,t.l2p=F,t.p2l=z,t.c2p="log"===t.type?function(t,e){return F(C(t,e))}:F,t.p2c="log"===t.type?function(t){return M(z(t))}:z,-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=s,t.c2d=t.c2r=t.l2d=t.l2r=u,t.d2p=t.r2p=function(e){return t.l2p(s(e))},t.p2d=t.p2r=z,t.cleanPos=u):"log"===t.type?(t.d2r=t.d2l=function(t,e){return C(s(t),e)},t.r2d=t.r2c=function(t){return M(s(t))},t.d2c=t.r2l=s,t.c2d=t.l2r=u,t.c2r=C,t.l2d=M,t.d2p=function(e,n){return t.l2p(t.d2r(e,n))},t.p2d=function(t){return M(z(t))},t.r2p=function(e){return t.l2p(s(e))},t.p2r=z,t.cleanPos=u):"date"===t.type?(t.d2r=t.r2d=o.identity,t.d2c=t.r2c=t.d2l=t.r2l=S,t.c2d=t.c2r=t.l2d=t.l2r=D,t.d2p=t.r2p=function(e,n,r){return t.l2p(S(e,0,r))},t.p2d=t.p2r=function(t,e,n){return D(z(t),e,n)},t.cleanPos=function(e){return o.cleanDate(e,p,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=E,t.r2d=t.c2d=t.l2d=O,t.d2r=t.d2l_noadd=P,t.r2c=function(e){var n=I(e);return void 0!==n?n:t.fraction2r(.5)},t.l2r=t.c2r=u,t.r2l=I,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return O(z(t))},t.r2p=t.d2p,t.p2r=z,t.cleanPos=function(t){return"string"==typeof t&&""!==t?t:u(t)}):"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=O,t.d2r=t.d2l_noadd=P,t.r2c=function(e){var n=P(e);return void 0!==n?n:t.fraction2r(.5)},t.r2c_just_indices=L,t.l2r=t.c2r=u,t.r2l=P,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return O(z(t))},t.r2p=t.d2p,t.p2r=z,t.cleanPos=function(t){return Array.isArray(t)||"string"==typeof t&&""!==t?t:u(t)},t.setupMultiCategory=function(r){var i,a,s=t._traceIndices,l=t._matchGroup;if(l&&0===t._categories.length)for(var c in l)if(c!==n){var u=e[_.id2name(c)];s=s.concat(u._traceIndices)}var f=[[0,{}],[0,{}]],p=[];for(i=0;i<s.length;i++){var g=r[s[i]];if(h in g){var m=g[h],v=g._length||o.minRowLength(m);if(d(m[0])&&d(m[1]))for(a=0;a<v;a++){var y=m[0][a],b=m[1][a];A(y)&&A(b)&&(p.push([y,b]),y in f[0][1]||(f[0][1][y]=f[0][0]++),b in f[1][1]||(f[1][1][b]=f[1][0]++))}}}for(p.sort(function(t,e){var n=f[0][1],r=n[t[0]]-n[e[0]];if(r)return r;var i=f[1][1];return i[t[1]]-i[e[1]]}),i=0;i<p.length;i++)E(p[i])}),t.fraction2r=function(e){var n=t.r2l(t.range[0]),r=t.r2l(t.range[1]);return t.l2r(n+e*(r-n))},t.r2fraction=function(e){var n=t.r2l(t.range[0]),r=t.r2l(t.range[1]);return(t.r2l(e)-n)/(r-n)},t.cleanRange=function(e,n){n||(n={}),e||(e="range");var r,i,s=o.nestedProperty(t,e).get();if(i=(i="date"===t.type?o.dfltRange(t.calendar):"y"===h?w.DFLTRANGEY:n.dfltRange||w.DFLTRANGEX).slice(),"tozero"!==t.rangemode&&"nonnegative"!==t.rangemode||(i[0]=0),s&&2===s.length)for("date"!==t.type||t.autorange||(s[0]=o.cleanDate(s[0],p,t.calendar),s[1]=o.cleanDate(s[1],p,t.calendar)),r=0;r<2;r++)if("date"===t.type){if(!o.isDateTime(s[r],t.calendar)){t[e]=i;break}if(t.r2l(s[0])===t.r2l(s[1])){var l=o.constrain(t.r2l(s[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);s[0]=t.l2r(l-1e3),s[1]=t.l2r(l+1e3);break}}else{if(!a(s[r])){if(!a(s[1-r])){t[e]=i;break}s[r]=s[1-r]*(r?10:.1)}if(s[r]<-f?s[r]=-f:s[r]>f&&(s[r]=f),s[0]===s[1]){var c=Math.max(1,Math.abs(1e-6*s[0]));s[0]-=c,s[1]+=c}}else o.nestedProperty(t,e).set(i)},t.setScale=function(n){var r=e._size;if(t.overlaying){var i=_.getFromId({_fullLayout:e},t.overlaying);t.domain=i.domain}var a=n&&t._r?"_r":"range",o=t.calendar;t.cleanRange(a);var s,l,c=t.r2l(t[a][0],o),u=t.r2l(t[a][1],o),d="y"===h;if(d?(t._offset=r.t+(1-t.domain[1])*r.h,t._length=r.h*(t.domain[1]-t.domain[0]),t._m=t._length/(c-u),t._b=-t._m*u):(t._offset=r.l+t.domain[0]*r.w,t._length=r.w*(t.domain[1]-t.domain[0]),t._m=t._length/(u-c),t._b=-t._m*c),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks&&(t._rangebreaks=t.locateBreaks(Math.min(c,u),Math.max(c,u)),t._rangebreaks.length)){for(s=0;s<t._rangebreaks.length;s++)l=t._rangebreaks[s],t._lBreaks+=Math.abs(l.max-l.min);var f=d;c>u&&(f=!f),f&&t._rangebreaks.reverse();var p=f?-1:1;for(t._m2=p*t._length/(Math.abs(u-c)-t._lBreaks),t._B.push(-t._m2*(d?u:c)),s=0;s<t._rangebreaks.length;s++)t._B.push(t._B[t._B.length-1]-p*t._m2*((l=t._rangebreaks[s]).max-l.min));for(s=0;s<t._rangebreaks.length;s++)(l=t._rangebreaks[s]).pmin=F(l.min),l.pmax=F(l.max)}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw e._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(e){for(var n,r,i,a,l,c=t.rangebreaks||[],u=0;u<c.length;u++){var d=c[u];if(d.enabled)if(d.bounds){var h=d.pattern;switch(r=(n=o.simpleMap(d.bounds,h?s:t.d2c))[0],i=n[1],h){case T:a=(l=new Date(e)).getUTCDay(),r>i&&(i+=7,a<r&&(a+=7));break;case k:a=(l=new Date(e)).getUTCHours()+(l.getUTCMinutes()/60+l.getUTCSeconds()/3600+l.getUTCMilliseconds()/36e5),r>i&&(i+=24,a<r&&(a+=24));break;case"":a=e}if(a>=r&&a<i)return p}else for(var f=o.simpleMap(d.values,t.d2c).sort(o.sorterAsc),g=0;g<f.length;g++)if(i=(r=f[g])+d.dvalue,e>=r&&e<i)return p}return e},t.locateBreaks=function(e,n){var r,i,a,l,c=[];if(!t.rangebreaks)return c;var u=t.rangebreaks.slice().sort(function(t,e){return t.pattern===T&&e.pattern===k?-1:e.pattern===T&&t.pattern===k?1:0}),d=function(t,r){if((t=o.constrain(t,e,n))!==(r=o.constrain(r,e,n))){for(var i=!0,a=0;a<c.length;a++){var s=c[a];t<s.max&&r>=s.min&&(t<s.min&&(s.min=t),r>s.max&&(s.max=r),i=!1)}i&&c.push({min:t,max:r})}};for(r=0;r<u.length;r++){var h=u[r];if(h.enabled)if(h.bounds){var f=e,p=n;h.pattern&&(f=Math.floor(f)),a=(i=o.simpleMap(h.bounds,h.pattern?s:t.r2l))[0],l=i[1];var g,_,w=new Date(f);switch(h.pattern){case T:_=m,g=(l-a+(l<a?7:0))*v,f+=a*v-(w.getUTCDay()*v+w.getUTCHours()*y+w.getUTCMinutes()*b+w.getUTCSeconds()*x+w.getUTCMilliseconds());break;case k:_=v,g=(l-a+(l<a?24:0))*y,f+=a*y-(w.getUTCHours()*y+w.getUTCMinutes()*b+w.getUTCSeconds()*x+w.getUTCMilliseconds());break;default:f=Math.min(i[0],i[1]),g=_=(p=Math.max(i[0],i[1]))-f}for(var M=f;M<p;M+=_)d(M,M+g)}else for(var A=o.simpleMap(h.values,t.d2c),C=0;C<A.length;C++)d(a=A[C],l=a+h.dvalue)}return c.sort(function(t,e){return t.min-e.min}),c},t.makeCalcdata=function(e,n,r){var i,a,s,l,c=t.type,u="date"===c&&e[n+"calendar"];if(n in e){if(i=e[n],l=e._length||o.minRowLength(i),o.isTypedArray(i)&&("linear"===c||"log"===c)){if(l===i.length)return i;if(i.subarray)return i.subarray(0,l)}if("multicategory"===c)return function(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=L([(t[0]||[])[r],(t[1]||[])[r]]);return n}(i,l);for(a=new Array(l),s=0;s<l;s++)a[s]=t.d2c(i[s],0,u,r)}else{var d=n+"0"in e?t.d2c(e[n+"0"],0,u):0,h=e["d"+n]?Number(e["d"+n]):1;for(i=e[{x:"y",y:"x"}[n]],l=e._length||i.length,a=new Array(l),s=0;s<l;s++)a[s]=d+s*h}if(t.rangebreaks)for(s=0;s<l;s++)a[s]=t.maskBreaks(a[s]);return a},t.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&a(t.r2l(e[0]))&&a(t.r2l(e[1]))},t.isPtWithinRange=function(e,n){var r=t.c2l(e[h],null,n),i=t.r2l(t.range[0]),a=t.r2l(t.range[1]);return i<a?i<=r&&r<=a:a<=r&&r<=i},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var n=t._matchGroup;if(n){var r=null,i=null;for(var a in n){var o=e[_.id2name(a)];if(o._categories){r=o._categories,i=o._categoriesMap;break}}r&&i?(t._categories=r,t._categoriesMap=i):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var s=0;s<t._initialCategories.length;s++)E(t._initialCategories[s])},t.sortByInitialCategories=function(){var r=[];if(t._emptyCategories(),t._initialCategories)for(var i=0;i<t._initialCategories.length;i++)E(t._initialCategories[i]);r=r.concat(t._traceIndices);var a=t._matchGroup;for(var o in a)if(n!==o){var s=e[_.id2name(o)];s._categories=t._categories,s._categoriesMap=t._categoriesMap,r=r.concat(s._traceIndices)}return r};var H=e._d3locale;"date"===t.type&&(t._dateFormat=H?H.timeFormat:i,t._extraFormat=e._extraFormat),t._separators=e.separators,t._numFormat=H?H.numberFormat:r.format,delete t._minDtick,delete t._forceTick0}},{"../../constants/numerical":181,"../../lib":202,"./axis_ids":251,"./constants":254,d3:9,"d3-time-format":7,"fast-isnumeric":11}],269:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../components/color").contrast,a=t("./layout_attributes"),o=t("../array_container_defaults");function s(t){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(e.every(function(n){return t[n]===t[e[0]]})||1===e.length)return t[e[0]]}function l(t,e){function n(n,i){return r.coerce(t,e,a.tickformatstops,n,i)}n("enabled")&&(n("dtickrange"),n("value"))}e.exports=function(t,e,n,c,u,d){d&&1!==d.pass||function(t,e,n,r,i){var a=s(t);n("tickprefix")&&n("showtickprefix",a),n("ticksuffix",i.tickSuffixDflt)&&n("showticksuffix",a)}(t,0,n,0,u),d&&2!==d.pass||function(t,e,n,c,u){var d=s(t);if(n("tickprefix")&&n("showtickprefix",d),n("ticksuffix",u.tickSuffixDflt)&&n("showticksuffix",d),n("showticklabels")){var h=u.font||{},f=e.color,p=-1!==(e.ticklabelposition||"").indexOf("inside")?i(u.bgColor):f&&f!==a.color.dflt?f:h.color;if(r.coerceFont(n,"tickfont",{family:h.family,size:h.size,color:p}),n("tickangle"),"category"!==c){var g=n("tickformat");o(t,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:l}),e.tickformatstops.length||delete e.tickformatstops,g||"date"===c||(n("showexponent",d),n("exponentformat"),n("minexponent"),n("separatethousands"))}}}(t,e,n,c,u)}},{"../../components/color":75,"../../lib":202,"../array_container_defaults":243,"./layout_attributes":262}],270:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e,n,a){var o=r.coerce2(t,e,i,"ticklen"),s=r.coerce2(t,e,i,"tickwidth"),l=r.coerce2(t,e,i,"tickcolor",e.color);n("ticks",a.outerTicks||o||s||l?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":202,"./layout_attributes":262}],271:[function(t,e,n){"use strict";var r=t("./clean_ticks"),i=t("../../lib").isArrayOrTypedArray;e.exports=function(t,e,n,a){function o(n){var r=t[n];return void 0!==r?r:(e._template||{})[n]}var s=o("tick0"),l=o("dtick"),c=o("tickvals"),u=n("tickmode",i(c)?"array":l?"linear":"auto");if("auto"===u)n("nticks");else if("linear"===u){var d=e.dtick=r.dtick(l,a);e.tick0=r.tick0(s,a,e.calendar,d)}else"multicategory"!==a&&(void 0===n("tickvals")?e.tickmode="auto":n("ticktext"))}},{"../../lib":202,"./clean_ticks":253}],272:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../lib"),o=t("../../components/drawing"),s=t("./axes");e.exports=function(t,e,n,l){var c=t._fullLayout;if(0!==e.length){var u,d,h,f;l&&(u=l());var p=r.ease(n.easing);return t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(f),f=null,function(){for(var n={},r=0;r<e.length;r++){var a=e[r],o=a.plotinfo.yaxis;a.xr0&&(n[a.plotinfo.xaxis._name+".range"]=a.xr0.slice()),a.yr0&&(n[o._name+".range"]=a.yr0.slice())}return i.call("relayout",t,n).then(function(){for(var t=0;t<e.length;t++)g(e[t].plotinfo)})}()}),d=Date.now(),f=window.requestAnimationFrame(function r(){h=Date.now();for(var a=Math.min(1,(h-d)/n.duration),o=p(a),s=0;s<e.length;s++)m(e[s],o);h-d>n.duration?(function(){for(var n={},r=0;r<e.length;r++){var a=e[r],o=a.plotinfo.yaxis;a.xr1&&(n[a.plotinfo.xaxis._name+".range"]=a.xr1.slice()),a.yr1&&(n[o._name+".range"]=a.yr1.slice())}u&&u(),i.call("relayout",t,n).then(function(){for(var t=0;t<e.length;t++)g(e[t].plotinfo)})}(),f=window.cancelAnimationFrame(r)):f=window.requestAnimationFrame(r)}),Promise.resolve()}function g(t){var e=t.xaxis,n=t.yaxis;c._defs.select("#"+t.clipId+"> rect").call(o.setTranslate,0,0).call(o.setScale,1,1),t.plot.call(o.setTranslate,e._offset,n._offset).call(o.setScale,1,1);var r=t.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(o.setPointGroupScale,1,1),r.selectAll(".textpoint").call(o.setTextPointsScale,1,1),r.call(o.hideOutsideRangePoints,t)}function m(e,n){var r=e.plotinfo,i=r.xaxis,l=r.yaxis,c=i._length,u=l._length,d=!!e.xr1,h=!!e.yr1,f=[];if(d){var p=a.simpleMap(e.xr0,i.r2l),g=a.simpleMap(e.xr1,i.r2l),m=p[1]-p[0],v=g[1]-g[0];f[0]=(p[0]*(1-n)+n*g[0]-p[0])/(p[1]-p[0])*c,f[2]=c*(1-n+n*v/m),i.range[0]=i.l2r(p[0]*(1-n)+n*g[0]),i.range[1]=i.l2r(p[1]*(1-n)+n*g[1])}else f[0]=0,f[2]=c;if(h){var y=a.simpleMap(e.yr0,l.r2l),b=a.simpleMap(e.yr1,l.r2l),x=y[1]-y[0],_=b[1]-b[0];f[1]=(y[1]*(1-n)+n*b[1]-y[1])/(y[0]-y[1])*u,f[3]=u*(1-n+n*_/x),l.range[0]=i.l2r(y[0]*(1-n)+n*b[0]),l.range[1]=l.l2r(y[1]*(1-n)+n*b[1])}else f[1]=0,f[3]=u;s.drawOne(t,i,{skipTitle:!0}),s.drawOne(t,l,{skipTitle:!0}),s.redrawComponents(t,[i._id,l._id]);var w=d?c/f[2]:1,k=h?u/f[3]:1,T=i._offset-(d?f[0]/f[2]*c:0),M=l._offset-(h?f[1]/f[3]*u:0);r.clipRect.call(o.setTranslate,d?f[0]:0,h?f[1]:0).call(o.setScale,1/w,1/k),r.plot.call(o.setTranslate,T,M).call(o.setScale,w,k),o.setPointGroupScale(r.zoomScalePts,1/w,1/k),o.setTextPointsScale(r.zoomScaleTxt,1/w,1/k)}s.redrawComponents(t)}},{"../../components/drawing":97,"../../lib":202,"../../registry":290,"./axes":248,d3:9}],273:[function(t,e,n){"use strict";var r=t("../../registry").traceIs,i=t("./axis_autotype");function a(t){return{v:"x",h:"y"}[t.orientation||"v"]}function o(t,e){var n=a(t),i=r(t,"box-violin"),o=r(t._fullInput||{},"candlestick");return i&&!o&&e===n&&void 0===t[n]&&void 0===t[n+"0"]}e.exports=function(t,e,n,s){n("autotypenumbers",s.autotypenumbersDflt),"-"===n("type",(s.splomStash||{}).type)&&(function(t,e){if("-"===t.type){var n,s=t._id,l=s.charAt(0);-1!==s.indexOf("scene")&&(s=l);var c=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if("splom"===i.type&&i._length>0&&(i["_"+n+"axes"]||{})[e])return i;if((i[n+"axis"]||n)===e){if(o(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}(e,s,l);if(c)if("histogram"!==c.type||l!=={v:"y",h:"x"}[c.orientation||"v"]){var u=l+"calendar",d=c[u],h={noMultiCategory:!r(c,"cartesian")||r(c,"noMultiCategory")};if("box"===c.type&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(h.noMultiCategory=!0),h.autotypenumbers=t.autotypenumbers,o(c,l)){var f=a(c),p=[];for(n=0;n<e.length;n++){var g=e[n];r(g,"box-violin")&&(g[l+"axis"]||l)===s&&(p.push(void 0!==g[f]?g[f][0]:void 0!==g.name?g.name:"text"),g[u]!==d&&(d=void 0))}t.type=i(p,d,h)}else if("splom"===c.type){var m=c.dimensions[c._axesDim[s]];m.visible&&(t.type=i(m.values,d,h))}else t.type=i(c[l]||[c[l+"0"]],d,h)}else t.type="linear"}}(e,s.data),"-"===e.type?e.type="linear":t.type=e.type)}},{"../../registry":290,"./axis_autotype":249}],274:[function(t,e,n){"use strict";var r=t("../registry"),i=t("../lib");function a(t,e,n){var r,a,o,s=!1;if("data"===e.type)r=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;r=t._fullLayout}return a=i.nestedProperty(r,e.prop).get(),(o=n[e.type]=n[e.type]||{}).hasOwnProperty(e.prop)&&o[e.prop]!==a&&(s=!0),o[e.prop]=a,{changed:s,value:a}}function o(t,e){var n=[],r=e[0],a={};if("string"==typeof r)a[r]=e[1];else{if(!i.isPlainObject(r))return n;a=r}return l(a,function(t,e,r){n.push({type:"layout",prop:t,value:r})},"",0),n}function s(t,e){var n,r,a,o,s=[];if(a=e[1],n=e[2],o={},"string"==typeof(r=e[0]))o[r]=a;else{if(!i.isPlainObject(r))return s;o=r,void 0===n&&(n=a)}return void 0===n&&(n=null),l(o,function(e,r,i){var a,o;if(Array.isArray(i)){o=i.slice();var l=Math.min(o.length,t.data.length);n&&(l=Math.min(l,n.length)),a=[];for(var c=0;c<l;c++)a[c]=n?n[c]:c}else o=i,a=n?n.slice():null;if(null===a)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(a)){if(!Array.isArray(o)){var u=o;o=[];for(var d=0;d<a.length;d++)o[d]=u}o.length=Math.min(a.length,o.length)}s.push({type:"data",prop:e,traces:a,value:o})},"",0),s}function l(t,e,n,r){Object.keys(t).forEach(function(a){var o=t[a];if("_"!==a[0]){var s=n+(r>0?".":"")+a;i.isPlainObject(o)?l(o,e,s,r+1):e(s,a,o)}})}n.manageCommandObserver=function(t,e,r,o){var s={},l=!0;e&&e._commandObserver&&(s=e._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var c=n.hasSimpleAPICommandBindings(t,r,s.lookupTable);if(e&&e._commandObserver){if(c)return s;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,s}if(c){a(t,c,s.cache),s.check=function(){if(l){var e=a(t,c,s.cache);return e.changed&&o&&void 0!==s.lookupTable[e.value]&&(s.disable(),Promise.resolve(o({value:e.value,type:c.type,prop:c.prop,traces:c.traces,index:s.lookupTable[e.value]})).then(s.enable,s.enable)),e.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<u.length;d++)t._internalOn(u[d],s.check);s.remove=function(){for(var e=0;e<u.length;e++)t._removeInternalListener(u[e],s.check)}}else i.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},e&&(e._commandObserver=s),s},n.hasSimpleAPICommandBindings=function(t,e,r){var i,a,o=e.length;for(i=0;i<o;i++){var s,l=e[i],c=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!c)return!1;var d=n.computeAPICommandBindings(t,c,u);if(1!==d.length)return!1;if(a){if((s=d[0]).type!==a.type)return!1;if(s.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var h=0;h<a.traces.length;h++)if(a.traces[h]!==s.traces[h])return!1}else if(s.prop!==a.prop)return!1}else a=d[0],Array.isArray(a.traces)&&a.traces.sort();var f=(s=d[0]).value;if(Array.isArray(f)){if(1!==f.length)return!1;f=f[0]}r&&(r[f]=i)}return a},n.executeAPICommand=function(t,e,n){if("skip"===e)return Promise.resolve();var a=r.apiMethodRegistry[e],o=[t];Array.isArray(n)||(n=[]);for(var s=0;s<n.length;s++)o.push(n[s]);return a.apply(null,o).catch(function(t){return i.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)})},n.computeAPICommandBindings=function(t,e,n){var r;switch(Array.isArray(n)||(n=[]),e){case"restyle":r=s(t,n);break;case"relayout":r=o(0,n);break;case"update":r=s(t,[n[0],n[2]]).concat(o(0,[n[1]]));break;case"animate":r=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,n);break;default:r=[]}return r}},{"../lib":202,"../registry":290}],275:[function(t,e,n){"use strict";var r=t("../lib/extend").extendFlat;n.attributes=function(t,e){e=e||{};var n={valType:"info_array",editType:(t=t||{}).editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},i={x:r({},n,{}),y:r({},n,{}),editType:t.editType};return t.noGridCell||(i.row={valType:"integer",min:0,dflt:0,editType:t.editType},i.column={valType:"integer",min:0,dflt:0,editType:t.editType}),i},n.defaults=function(t,e,n,r){var i=r&&r.x||[0,1],a=r&&r.y||[0,1],o=e.grid;if(o){var s=n("domain.column");void 0!==s&&(s<o.columns?i=o._domains.x[s]:delete t.domain.column);var l=n("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete t.domain.row)}var c=n("domain.x",i),u=n("domain.y",a);c[0]<c[1]||(t.domain.x=i.slice()),u[0]<u[1]||(t.domain.y=a.slice())}},{"../lib/extend":196}],276:[function(t,e,n){"use strict";e.exports=function(t){var e=t.editType,n=t.colorEditType;void 0===n&&(n=e);var r={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:n},editType:e};return t.arrayOk&&(r.family.arrayOk=!0,r.size.arrayOk=!0,r.color.arrayOk=!0),r}},{}],277:[function(t,e,n){"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],278:[function(t,e,n){"use strict";var r=t("../registry"),i=t("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(t,e,n){var i=r.subplotsRegistry[e];if(!i)return[];for(var a=i.attr,o=[],s=0;s<t.length;s++){var l=t[s];l[0].trace[a]===n&&o.push(l)}return o},n.getModuleCalcData=function(t,e){var n,i=[],a=[];if(!(n="string"==typeof e?r.getModule(e).plot:"function"==typeof e?e:e.plot))return[i,t];for(var o=0;o<t.length;o++){var s=t[o],l=s[0].trace;!0===l.visible&&0!==l._length&&(l._module.plot===n?i.push(s):a.push(s))}return[i,a]},n.getSubplotData=function(t,e,n){if(!r.subplotsRegistry[e])return[];var a,o,s,l=r.subplotsRegistry[e].attr,c=[];if("gl2d"===e){var u=n.match(i);o="x"+u[1],s="y"+u[2]}for(var d=0;d<t.length;d++)a=t[d],"gl2d"===e&&r.traceIs(a,"gl2d")?a[l[0]]===o&&a[l[1]]===s&&c.push(a):a[l]===n&&c.push(a);return c}},{"../registry":290,"./cartesian/constants":254}],279:[function(t,e,n){"use strict";function r(t,e){var n,r,i=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)i[r]+=t[4*n+r]*e[n];return i}e.exports=function(t,e){return r(t.projection,r(t.view,r(t.model,[e[0],e[1],e[2],1])))}},{}],280:[function(t,e,n){"use strict";var r=t("./font_attributes"),i=t("./animation_attributes"),a=t("../components/color/attributes"),o=t("../components/shapes/draw_newshape/attributes"),s=t("./pad_attributes"),l=t("../lib/extend").extendFlat,c=r({editType:"calc"});c.family.dflt='"Open Sans", verdana, arial, sans-serif',c.size.dflt=12,c.color.dflt=a.defaultLine,e.exports={font:c,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:l({},i.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":74,"../components/shapes/draw_newshape/attributes":157,"../lib/extend":196,"./animation_attributes":242,"./font_attributes":276,"./pad_attributes":281}],281:[function(t,e,n){"use strict";e.exports=function(t){var e=t.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],282:[function(t,e,n){"use strict";var r=t("d3"),i=t("d3-time-format").timeFormatLocale,a=t("fast-isnumeric"),o=t("../registry"),s=t("../plot_api/plot_schema"),l=t("../plot_api/plot_template"),c=t("../lib"),u=t("../components/color"),d=t("../constants/numerical").BADNUM,h=t("./cartesian/axis_ids"),f=t("./cartesian/handle_outline").clearSelect,p=t("./animation_attributes"),g=t("./frame_attributes"),m=t("../plots/get_data").getModuleCalcData,v=c.relinkPrivateKeys,y=c._,b=e.exports={};c.extendFlat(b,o),b.attributes=t("./attributes"),b.attributes.type.values=b.allTypes,b.fontAttrs=t("./font_attributes"),b.layoutAttributes=t("./layout_attributes"),b.fontWeight="normal";var x=b.transformsRegistry,_=t("./command");b.executeAPICommand=_.executeAPICommand,b.computeAPICommandBindings=_.computeAPICommandBindings,b.manageCommandObserver=_.manageCommandObserver,b.hasSimpleAPICommandBindings=_.hasSimpleAPICommandBindings,b.redrawText=function(t){var e=(t=c.getGraphDiv(t))._fullLayout||{};if(e._has&&e._has("polar")||!t.data||!t.data[0]||!t.data[0].r)return new Promise(function(e){setTimeout(function(){o.getComponentMethod("annotations","draw")(t),o.getComponentMethod("legend","draw")(t),o.getComponentMethod("colorbar","draw")(t),e(b.previousPromises(t))},300)})},b.resize=function(t){var e;t=c.getGraphDiv(t);var n=new Promise(function(n,r){t&&!c.isHidden(t)||r(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._resolveResize&&(e=t._resolveResize),t._resolveResize=n,t._redrawTimer=setTimeout(function(){if(!t.layout||t.layout.width&&t.layout.height||c.isHidden(t))n(t);else{delete t.layout.width,delete t.layout.height;var e=t.changed;t.autoplay=!0,o.call("relayout",t,{autosize:!0}).then(function(){t.changed=e,t._resolveResize===n&&(delete t._resolveResize,n(t))})}},100)});return e&&e(n),n},b.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then(function(){t._promises=[]})},b.addLinks=function(t){if(t._context.showLink||t._context.showSources){var e=t._fullLayout,n=c.ensureSingle(e._paper,"text","js-plot-link-container",function(t){t.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:u.defaultLine,"pointer-events":"all"}).each(function(){var t=r.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)})}),i=n.node(),a={y:e._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=e.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=e._paper.attr("width")-7),n.attr(a);var o=n.select(".js-link-to-tool"),s=n.select(".js-link-spacer"),l=n.select(".js-sourcelinks");t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var n=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)n.on("click",function(){b.sendDataToCloud(t)});else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}(t,o),s.text(o.text()&&l.text()?" - ":"")}},b.sendDataToCloud=function(t){var e=(window.PLOTLYENV||{}).BASE_URL||t._context.plotlyServerURL;if(e){t.emit("plotly_beforeexport");var n=r.select(t).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:e+"/external",method:"post",target:"_blank"});return i.append("input").attr({type:"text",name:"data"}).node().value=b.graphJson(t,!1,"keepdata"),i.node().submit(),n.remove(),t.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],k=["year","month","dayMonth","dayMonthYear"];function T(t,e){var n=t._context.locale;n||(n="en-US");var r=!1,i={};function a(t){for(var n=!0,a=0;a<e.length;a++){var o=e[a];i[o]||(t[o]?i[o]=t[o]:n=!1)}n&&(r=!0)}for(var s=0;s<2;s++){for(var l=t._context.locales,c=0;c<2;c++){var u=(l[n]||{}).format;if(u&&(a(u),r))break;l=o.localeRegistry}var d=n.split("-")[0];if(r||d===n)break;n=d}return r||a(o.localeRegistry.en.format),i}function M(t,e){var n={_fullLayout:e},r="x"===t._id.charAt(0),i=t._mainAxis._anchorAxis,a="",o="",s="";if(i&&(s=i._mainAxis._id,a=r?t._id+s:s+t._id),!a||!e._plots[a]){a="";for(var l=t._counterAxes,c=0;c<l.length;c++){var u=l[c],d=r?t._id+u:u+t._id;o||(o=d);var f=h.getFromId(n,u);if(s&&f.overlaying===s){a=d;break}}}return a||o}function A(t){var e=t.transforms;if(Array.isArray(e)&&e.length)for(var n=0;n<e.length;n++){var r=e[n],i=r._module||x[r.type];if(i&&i.makesData)return!0}return!1}function C(t,e,n,r){for(var i=t.transforms,a=[t],o=0;o<i.length;o++){var s=i[o],l=x[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:t,fullData:e,layout:n,fullLayout:r,transformIndex:o}))}return a}function S(t){return"string"==typeof t&&"px"===t.substr(t.length-2)&&parseFloat(t)}function D(t){var e=t.margin;if(!t._size){var n=t._size={l:Math.round(e.l),r:Math.round(e.r),t:Math.round(e.t),b:Math.round(e.b),p:Math.round(e.pad)};n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b}t._pushmargin||(t._pushmargin={}),t._pushmarginIds||(t._pushmarginIds={})}b.supplyDefaults=function(t,e){var n=e&&e.skipUpdateCalc,a=t._fullLayout||{};if(a._skipDefaults)delete a._skipDefaults;else{var s,l=t._fullLayout={},u=t.layout||{},d=t._fullData||[],h=t._fullData=[],p=t.data||[],g=t.calcdata||[],m=t._context||{};t._transitionData||b.createTransitionData(t),l._dfltTitle={plot:y(t,"Click to enter Plot title"),x:y(t,"Click to enter X axis title"),y:y(t,"Click to enter Y axis title"),colorbar:y(t,"Click to enter Colorscale title"),annotation:y(t,"new text")},l._traceWord=y(t,"trace");var x=T(t,w);if(l._mapboxAccessToken=m.mapboxAccessToken,a._initialAutoSizeIsDone){var _=a.width,M=a.height;b.supplyLayoutGlobalDefaults(u,l,x),u.width||(l.width=_),u.height||(l.height=M),b.sanitizeMargins(l)}else{b.supplyLayoutGlobalDefaults(u,l,x);var A=!u.width||!u.height,C=l.autosize;A&&(C||m.autosizable)?b.plotAutoSize(t,u,l):A&&b.sanitizeMargins(l),!C&&A&&(u.width=l.width,u.height=l.height)}l._d3locale=function(t,e){return t.decimal=e.charAt(0),t.thousands=e.charAt(1),{numberFormat:r.locale(t).numberFormat,timeFormat:i(t).utcFormat}}(x,l.separators),l._extraFormat=T(t,k),l._initialAutoSizeIsDone=!0,l._dataLength=p.length,l._modules=[],l._visibleModules=[],l._basePlotModules=[];var S=l._subplots=function(){var t,e,n=o.collectableSubplotTypes,r={};if(!n){n=[];var i=o.subplotsRegistry;for(var a in i){var s=i[a].attr;if(s&&(n.push(a),Array.isArray(s)))for(e=0;e<s.length;e++)c.pushUnique(n,s[e])}}for(t=0;t<n.length;t++)r[n[t]]=[];return r}(),O=l._splomAxes={x:{},y:{}},E=l._splomSubplots={};l._splomGridDflt={},l._scatterStackOpts={},l._firstScatter={},l._alignmentOpts={},l._colorAxes={},l._requestRangeslider={},l._traceUids=function(t,e){var n,r,i=e.length,a=[];for(n=0;n<t.length;n++){var o=t[n]._fullInput;o!==r&&a.push(o),r=o}var s=a.length,l=new Array(i),u={};function d(t,e){l[e]=t,u[t]=1}function h(t,e){if(t&&"string"==typeof t&&!u[t])return d(t,e),!0}for(n=0;n<i;n++){var f=e[n].uid;"number"==typeof f&&(f=String(f)),h(f,n)||n<s&&h(a[n].uid,n)||d(c.randstr(u),n)}return l}(d,p),l._globalTransforms=(t._context||{}).globalTransforms,b.supplyDataDefaults(p,h,u,l);var L=Object.keys(O.x),P=Object.keys(O.y);if(L.length>1&&P.length>1){for(o.getComponentMethod("grid","sizeDefaults")(u,l),s=0;s<L.length;s++)c.pushUnique(S.xaxis,L[s]);for(s=0;s<P.length;s++)c.pushUnique(S.yaxis,P[s]);for(var I in E)c.pushUnique(S.cartesian,I)}if(l._has=b._hasPlotType.bind(l),d.length===h.length)for(s=0;s<h.length;s++)v(h[s],d[s]);b.supplyLayoutModuleDefaults(u,l,h,t._transitionData);var R=l._visibleModules,N=[];for(s=0;s<R.length;s++){var F=R[s].crossTraceDefaults;F&&c.pushUnique(N,F)}for(s=0;s<N.length;s++)N[s](h,l);l._hasOnlyLargeSploms=1===l._basePlotModules.length&&"splom"===l._basePlotModules[0].name&&L.length>15&&P.length>15&&0===l.shapes.length&&0===l.images.length,l._hasCartesian=l._has("cartesian"),l._hasGeo=l._has("geo"),l._hasGL3D=l._has("gl3d"),l._hasGL2D=l._has("gl2d"),l._hasTernary=l._has("ternary"),l._hasPie=l._has("pie"),b.linkSubplots(h,l,d,a),b.cleanPlot(h,l,d,a);var z=!(!a._has||!a._has("gl2d")),V=!(!l._has||!l._has("gl2d")),H=!(!a._has||!a._has("cartesian"))||z,j=!(!l._has||!l._has("cartesian"))||V;H&&!j?a._bgLayer.remove():j&&!H&&(l._shouldCreateBgLayer=!0),a._zoomlayer&&!t._dragging&&f({_fullLayout:a}),function(t,e){var n,r=[];e.meta&&(n=e._meta={meta:e.meta,layout:{meta:e.meta}});for(var i=0;i<t.length;i++){var a=t[i];a.meta?r[a.index]=a._meta={meta:a.meta}:e.meta&&(a._meta={meta:e.meta}),e.meta&&(a._meta.layout={meta:e.meta})}r.length&&(n||(n=e._meta={}),n.data=r)}(h,l),v(l,a),o.getComponentMethod("colorscale","crossTraceDefaults")(h,l),l._preGUI||(l._preGUI={}),l._tracePreGUI||(l._tracePreGUI={});var B,U=l._tracePreGUI,q={};for(B in U)q[B]="old";for(s=0;s<h.length;s++)q[B=h[s]._fullInput.uid]||(U[B]={}),q[B]="new";for(B in q)"old"===q[B]&&delete U[B];D(l),o.getComponentMethod("rangeslider","makeData")(l),n||g.length!==h.length||b.supplyDefaultsUpdateCalc(g,h)}},b.supplyDefaultsUpdateCalc=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=(t[n]||[])[0];if(i&&i.trace){var a=i.trace;if(a._hasCalcTransform){var o,s,l,u=a._arrayAttrs;for(o=0;o<u.length;o++)l=c.nestedProperty(a,s=u[o]).get().slice(),c.nestedProperty(r,s).set(l)}i.trace=r}}},b.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},b._hasPlotType=function(t){var e,n=this._basePlotModules||[];for(e=0;e<n.length;e++)if(n[e].name===t)return!0;var r=this._modules||[];for(e=0;e<r.length;e++){var i=r[e].name;if(i===t)return!0;var a=o.modules[i];if(a&&a.categories[t])return!0}return!1},b.cleanPlot=function(t,e,n,r){var i,a,o=r._basePlotModules||[];for(i=0;i<o.length;i++){var s=o[i];s.clean&&s.clean(t,e,n,r)}var l=r._has&&r._has("gl"),c=e._has&&e._has("gl");l&&!c&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null);var u=!!r._infolayer;t:for(i=0;i<n.length;i++){var d=n[i].uid;for(a=0;a<t.length;a++)if(d===t[a].uid)continue t;u&&r._infolayer.select(".cb"+d).remove()}},b.linkSubplots=function(t,e,n,r){var i,a,s=r._plots||{},l=e._plots={},u=e._subplots,d={_fullData:t,_fullLayout:e},f=u.cartesian.concat(u.gl2d||[]);for(i=0;i<f.length;i++){var p,g=f[i],m=s[g],v=h.getFromId(d,g,"x"),y=h.getFromId(d,g,"y");for(m?p=l[g]=m:(p=l[g]={}).id=g,v._counterAxes.push(y._id),y._counterAxes.push(v._id),v._subplotsWith.push(g),y._subplotsWith.push(g),p.xaxis=v,p.yaxis=y,p._hasClipOnAxisFalse=!1,a=0;a<t.length;a++){var b=t[a];if(b.xaxis===p.xaxis._id&&b.yaxis===p.yaxis._id&&!1===b.cliponaxis){p._hasClipOnAxisFalse=!0;break}}}var x,_=h.list(d,null,!0);for(i=0;i<_.length;i++){var w=null;(x=_[i]).overlaying&&(w=h.getFromId(d,x.overlaying))&&w.overlaying&&(x.overlaying=!1,w=null),x._mainAxis=w||x,w&&(x.domain=w.domain.slice()),x._anchorAxis="free"===x.anchor?null:h.getFromId(d,x.anchor)}for(i=0;i<_.length;i++)if((x=_[i])._counterAxes.sort(h.idSort),x._subplotsWith.sort(c.subplotSort),x._mainSubplot=M(x,e),x._counterAxes.length&&(x.spikemode&&-1!==x.spikemode.indexOf("across")||x.automargin&&x.mirror&&"free"!==x.anchor||o.getComponentMethod("rangeslider","isVisible")(x))){var k=1,T=0;for(a=0;a<x._counterAxes.length;a++){var A=h.getFromId(d,x._counterAxes[a]);k=Math.min(k,A.domain[0]),T=Math.max(T,A.domain[1])}k<T&&(x._counterDomainMin=k,x._counterDomainMax=T)}},b.clearExpandedTraceDefaultColors=function(t){var e,n,r;for(n=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],s.crawl(t._module.attributes,function(t,r,i,a){n[a]=r,n.length=a+1,"color"===t.valType&&void 0===t.dflt&&e.push(n.join("."))})),r=0;r<e.length;r++)c.nestedProperty(t,"_input."+e[r]).get()||c.nestedProperty(t,e[r]).set(null)},b.supplyDataDefaults=function(t,e,n,r){var i,a,s,u=r._modules,d=r._visibleModules,h=r._basePlotModules,f=0,p=0;function g(t){e.push(t);var n=t._module;n&&(c.pushUnique(u,n),!0===t.visible&&c.pushUnique(d,n),c.pushUnique(h,t._module.basePlotModule),f++,!1!==t._input.visible&&p++)}r._transformModules=[];var m={},y=[],x=l.traceTemplater((n.template||{}).data||{});for(i=0;i<t.length;i++){if((a=x.newTrace(s=t[i])).uid=r._traceUids[i],b.supplyTraceDefaults(s,a,p,r,i),a.index=i,a._input=s,a._expandedIndex=f,a.transforms&&a.transforms.length)for(var _=!1!==s.visible&&!1===a.visible,w=C(a,e,n,r),k=0;k<w.length;k++){var T=w[k],M={_template:a._template,type:a.type,uid:a.uid+k};_&&!1===T.visible&&delete T.visible,b.supplyTraceDefaults(T,M,f,r,i),v(M,T),M.index=i,M._input=s,M._fullInput=a,M._expandedIndex=f,M._expandedInput=T,g(M)}else a._fullInput=a,a._expandedInput=a,g(a);o.traceIs(a,"carpetAxis")&&(m[a.carpet]=a),o.traceIs(a,"carpetDependent")&&y.push(i)}for(i=0;i<y.length;i++)if((a=e[y[i]]).visible){var A=m[a.carpet];a._carpet=A,A&&A.visible?(a.xaxis=A.xaxis,a.yaxis=A.yaxis):a.visible=!1}},b.supplyAnimationDefaults=function(t){var e;t=t||{};var n={};function r(e,r){return c.coerce(t||{},n,p,e,r)}if(r("mode"),r("direction"),r("fromcurrent"),Array.isArray(t.frame))for(n.frame=[],e=0;e<t.frame.length;e++)n.frame[e]=b.supplyAnimationFrameDefaults(t.frame[e]||{});else n.frame=b.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(n.transition=[],e=0;e<t.transition.length;e++)n.transition[e]=b.supplyAnimationTransitionDefaults(t.transition[e]||{});else n.transition=b.supplyAnimationTransitionDefaults(t.transition||{});return n},b.supplyAnimationFrameDefaults=function(t){var e={};function n(n,r){return c.coerce(t||{},e,p.frame,n,r)}return n("duration"),n("redraw"),e},b.supplyAnimationTransitionDefaults=function(t){var e={};function n(n,r){return c.coerce(t||{},e,p.transition,n,r)}return n("duration"),n("easing"),e},b.supplyFrameDefaults=function(t){var e={};function n(n,r){return c.coerce(t,e,g,n,r)}return n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),e},b.supplyTraceDefaults=function(t,e,n,r,i){var a,s=r.colorway||u.defaults,l=s[n%s.length];function d(n,r){return c.coerce(t,e,b.attributes,n,r)}var h=d("visible");d("type"),d("name",r._traceWord+" "+i),d("uirevision",r.uirevision);var f=b.getModule(e);if(e._module=f,f){var p=f.basePlotModule,g=p.attr,m=p.attributes;if(g&&m){var v=r._subplots,y="";if(h||"gl2d"!==p.name){if(Array.isArray(g))for(a=0;a<g.length;a++){var x=g[a],_=c.coerce(t,e,m,x);v[x]&&c.pushUnique(v[x],_),y+=_}else y=c.coerce(t,e,m,g);v[p.name]&&c.pushUnique(v[p.name],y)}}}return h&&(d("customdata"),d("ids"),d("meta"),o.traceIs(e,"showLegend")?(c.coerce(t,e,f.attributes.showlegend?f.attributes:b.attributes,"showlegend"),d("legendgroup"),e._dfltShowLegend=!0):e._dfltShowLegend=!1,f&&f.supplyDefaults(t,e,l,r),o.traceIs(e,"noOpacity")||d("opacity"),o.traceIs(e,"notLegendIsolatable")&&(e.visible=!!e.visible),o.traceIs(e,"noHover")||(e.hovertemplate||c.coerceHoverinfo(t,e,r),"parcats"!==e.type&&o.getComponentMethod("fx","supplyDefaults")(t,e,l,r)),f&&f.selectPoints&&d("selectedpoints"),b.supplyTransformDefaults(t,e,r)),e},b.hasMakesDataTransform=A,b.supplyTransformDefaults=function(t,e,n){if(e._length||A(t)){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(t.transforms)||0!==r.length)for(var a=r.concat(t.transforms||[]),o=e.transforms=[],s=0;s<a.length;s++){var l,u=a[s],d=u.type,h=x[d],f=!(u._module&&u._module===h),p=h&&"function"==typeof h.transform;h||c.warn("Unrecognized transform type "+d+"."),h&&h.supplyDefaults&&(f||p)?((l=h.supplyDefaults(u,e,n,t)).type=d,l._module=h,c.pushUnique(i,h)):l=c.extendFlat({},u),o.push(l)}}},b.supplyLayoutGlobalDefaults=function(t,e,n){function r(n,r){return c.coerce(t,e,b.layoutAttributes,n,r)}var i=t.template;c.isPlainObject(i)&&(e.template=i,e._template=i.layout,e._dataTemplate=i.data),r("autotypenumbers");var a=c.coerceFont(r,"font");r("title.text",e._dfltTitle.plot),c.coerceFont(r,"title.font",{family:a.family,size:Math.round(1.4*a.size),color:a.color}),r("title.xref"),r("title.yref"),r("title.x"),r("title.y"),r("title.xanchor"),r("title.yanchor"),r("title.pad.t"),r("title.pad.r"),r("title.pad.b"),r("title.pad.l"),r("uniformtext.mode")&&r("uniformtext.minsize"),r("autosize",!(t.width&&t.height)),r("width"),r("height"),r("margin.l"),r("margin.r"),r("margin.t"),r("margin.b"),r("margin.pad"),r("margin.autoexpand"),t.width&&t.height&&b.sanitizeMargins(e),o.getComponentMethod("grid","sizeDefaults")(t,e),r("paper_bgcolor"),r("separators",n.decimal+n.thousands),r("hidesources"),r("colorway"),r("datarevision");var s=r("uirevision");r("editrevision",s),r("selectionrevision",s),r("modebar.orientation"),r("modebar.bgcolor",u.addOpacity(e.paper_bgcolor,.5));var l=u.contrast(u.rgb(e.modebar.bgcolor));r("modebar.color",u.addOpacity(l,.3)),r("modebar.activecolor",u.addOpacity(l,.7)),r("modebar.uirevision",s),o.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(t,e,r),r("meta"),c.isPlainObject(t.transition)&&(r("transition.duration"),r("transition.easing"),r("transition.ordering")),o.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),o.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,r)},b.plotAutoSize=function(t,e,n){var r,i,o=t._context||{},s=o.frameMargins,l=c.isPlotDiv(t);if(l&&t.emit("plotly_autosize"),o.fillFrame)r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else{var u=l?window.getComputedStyle(t):{};if(r=S(u.width)||S(u.maxWidth)||n.width,i=S(u.height)||S(u.maxHeight)||n.height,a(s)&&s>0){var d=1-2*s;r=Math.round(d*r),i=Math.round(d*i)}}var h=b.layoutAttributes.width.min,f=b.layoutAttributes.height.min;r<h&&(r=h),i<f&&(i=f);var p=!e.width&&Math.abs(n.width-r)>1,g=!e.height&&Math.abs(n.height-i)>1;(g||p)&&(p&&(n.width=r),g&&(n.height=i)),t._initialAutoSize||(t._initialAutoSize={width:r,height:i}),b.sanitizeMargins(n)},b.supplyLayoutModuleDefaults=function(t,e,n,r){var i,a,s,l=o.componentsRegistry,u=e._basePlotModules,d=o.subplotsRegistry.cartesian;for(i in l)(s=l[i]).includeBasePlot&&s.includeBasePlot(t,e);for(var h in u.length||u.push(d),e._has("cartesian")&&(o.getComponentMethod("grid","contentDefaults")(t,e),d.finalizeSubplots(t,e)),e._subplots)e._subplots[h].sort(c.subplotSort);for(a=0;a<u.length;a++)(s=u[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n);var f=e._modules;for(a=0;a<f.length;a++)(s=f[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n);var p=e._transformModules;for(a=0;a<p.length;a++)(s=p[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n,r);for(i in l)(s=l[i]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,n)},b.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),c.clearThrottle(),c.clearResponsive(t),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.framework,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._dragdata,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},b.style=function(t){var e,n=t._fullLayout._visibleModules,r=[];for(e=0;e<n.length;e++){var i=n[e];i.style&&c.pushUnique(r,i.style)}for(e=0;e<r.length;e++)r[e](t)},b.sanitizeMargins=function(t){if(t&&t.margin){var e,n=t.width,r=t.height,i=t.margin,a=r-(i.t+i.b);n-(i.l+i.r)<0&&(e=(n-1)/(i.l+i.r),i.l=Math.floor(e*i.l),i.r=Math.floor(e*i.r)),a<0&&(e=(r-1)/(i.t+i.b),i.t=Math.floor(e*i.t),i.b=Math.floor(e*i.b))}},b.clearAutoMarginIds=function(t){t._fullLayout._pushmarginIds={}},b.allowAutoMargin=function(t,e){t._fullLayout._pushmarginIds[e]=1},b.autoMargin=function(t,e,n){var r=t._fullLayout,i=r.width,a=r.height,o=r.margin,s=c.constrain(i-o.l-o.r,2,64),l=c.constrain(a-o.t-o.b,2,64),u=Math.max(0,i-s),d=Math.max(0,a-l),h=r._pushmargin,f=r._pushmarginIds;if(!1!==o.autoexpand){if(n){var p=n.pad;if(void 0===p&&(p=Math.min(12,o.l,o.r,o.t,o.b)),u){var g=(n.l+n.r)/u;g>1&&(n.l/=g,n.r/=g)}if(d){var m=(n.t+n.b)/d;m>1&&(n.t/=m,n.b/=m)}h[e]={l:{val:void 0!==n.xl?n.xl:n.x,size:n.l+p},r:{val:void 0!==n.xr?n.xr:n.x,size:n.r+p},b:{val:void 0!==n.yb?n.yb:n.y,size:n.b+p},t:{val:void 0!==n.yt?n.yt:n.y,size:n.t+p}},f[e]=1}else delete h[e],delete f[e];if(!r._replotting)return b.doAutoMargin(t)}},b.doAutoMargin=function(t){var e=t._fullLayout,n=e.width,r=e.height;e._size||(e._size={}),D(e);var i=e._size,s=e.margin,l=c.extendFlat({},i),u=s.l,d=s.r,f=s.t,p=s.b,g=e._pushmargin,m=e._pushmarginIds;if(!1!==e.margin.autoexpand){for(var v in g)m[v]||delete g[v];for(var y in g.base={l:{val:0,size:u},r:{val:1,size:d},t:{val:1,size:f},b:{val:0,size:p}},g){var x=g[y].l||{},_=g[y].b||{},w=x.val,k=x.size,T=_.val,M=_.size;for(var A in g){if(a(k)&&g[A].r){var C=g[A].r.val,S=g[A].r.size;if(C>w){var O=(k*C+(S-n)*w)/(C-w),E=(S*(1-w)+(k-n)*(1-C))/(C-w);O+E>u+d&&(u=O,d=E)}}if(a(M)&&g[A].t){var L=g[A].t.val,P=g[A].t.size;if(L>T){var I=(M*L+(P-r)*T)/(L-T),R=(P*(1-T)+(M-r)*(1-L))/(L-T);I+R>p+f&&(p=I,f=R)}}}}}var N=c.constrain(n-s.l-s.r,2,64),F=c.constrain(r-s.t-s.b,2,64),z=Math.max(0,n-N),V=Math.max(0,r-F);if(z){var H=(u+d)/z;H>1&&(u/=H,d/=H)}if(V){var j=(p+f)/V;j>1&&(p/=j,f/=j)}if(i.l=Math.round(u),i.r=Math.round(d),i.t=Math.round(f),i.b=Math.round(p),i.p=Math.round(s.pad),i.w=Math.round(n)-i.l-i.r,i.h=Math.round(r)-i.t-i.b,!e._replotting&&b.didMarginChange(l,i)){"_redrawFromAutoMarginCount"in e?e._redrawFromAutoMarginCount++:e._redrawFromAutoMarginCount=1;var B=3*(1+Object.keys(m).length);if(e._redrawFromAutoMarginCount<B)return o.call("plot",t);e._size=l,c.warn("Too many auto-margin redraws.")}!function(t){for(var e=h.list(t,"",!0),n=0;n<e.length;n++){var r=e[n]._hideOutOfRangeInsideTickLabels;r&&r()}}(t)};var O=["l","r","t","b","p","w","h"];function E(t,e,n){var r=!1,i=c.syncOrAsync([b.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},n.prepareFn,b.rehover,function(){return t.emit("plotly_transitioning",[]),new Promise(function(i){t._transitioning=!0,e.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push(function(){r=!0}),n.redraw&&t._transitionData._interruptCallbacks.push(function(){return o.call("redraw",t)}),t._transitionData._interruptCallbacks.push(function(){t.emit("plotly_transitioninterrupted",[])});var a=0,s=0;function l(){return a++,function(){s++,r||s!==a||function(e){t._transitionData&&(function(t){if(t)for(;t.length;)t.shift()}(t._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(n.redraw)return o.call("redraw",t)}).then(function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])}).then(e))}(i)}}n.runFn(l),setTimeout(l())})}],t);return i&&i.then||(i=Promise.resolve()),i.then(function(){return t})}b.didMarginChange=function(t,e){for(var n=0;n<O.length;n++){var r=O[n],i=t[r],o=e[r];if(!a(i)||Math.abs(o-i)>1)return!0}return!1},b.graphJson=function(t,e,n,r,i,a){(i&&e&&!t._fullData||i&&!e&&!t._fullLayout)&&b.supplyDefaults(t);var o=i?t._fullLayout:t.layout,s=(t._transitionData||{})._frames;function l(t,e){if("function"==typeof t)return e?"_function_":null;if(c.isPlainObject(t)){var r,i={};return Object.keys(t).sort().forEach(function(a){if(-1===["_","["].indexOf(a.charAt(0)))if("function"!=typeof t[a]){if("keepdata"===n){if("src"===a.substr(a.length-3))return}else if("keepstream"===n){if("string"==typeof(r=t[a+"src"])&&r.indexOf(":")>0&&!c.isPlainObject(t.stream))return}else if("keepall"!==n&&"string"==typeof(r=t[a+"src"])&&r.indexOf(":")>0)return;i[a]=l(t[a],e)}else e&&(i[a]="_function")}),i}return Array.isArray(t)?t.map(function(t){return l(t,e)}):c.isTypedArray(t)?c.simpleMap(t,c.identity):c.isJSDate(t)?c.ms2DateTimeLocal(+t):t}var u={data:((i?t._fullData:t.data)||[]).map(function(t){var n=l(t);return e&&delete n.fit,n})};if(!e&&(u.layout=l(o),i)){var d=o._size;u.layout.computed={margin:{b:d.b,l:d.l,r:d.r,t:d.t}}}return t.framework&&t.framework.isPolar&&(u=t.framework.getConfig()),s&&(u.frames=l(s)),a&&(u.config=l(t._context,!0)),"object"===r?u:JSON.stringify(u)},b.modifyFrames=function(t,e){var n,r,i,a=t._transitionData._frames,o=t._transitionData._frameHash;for(n=0;n<e.length;n++)switch((r=e[n]).type){case"replace":var s=(a[r.index]||{}).name,l=(i=r.value).name;a[r.index]=o[l]=i,l!==s&&(delete o[s],o[l]=i);break;case"insert":o[(i=r.value).name]=i,a.splice(r.index,0,i);break;case"delete":delete o[(i=a[r.index]).name],a.splice(r.index,1)}return Promise.resolve()},b.computeFrame=function(t,e){var n,r,i,a,o=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var s=o[e.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=b.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(i=r[n])&&(-1===(a=u.traces.indexOf(i))&&(u.traces[a=u.data.length]=i),u.data[a]=b.extendTrace(u.data[a],s.data[n]))}return u},b.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},n=t._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(e[i.name]=i)}},b.extendObjectWithContainers=function(t,e,n){var r,i,a,o,s,l,u,d=c.extendDeepNoArrays({},e||{}),h=c.expandObjectPaths(d),f={};if(n&&n.length)for(a=0;a<n.length;a++)void 0===(i=(r=c.nestedProperty(h,n[a])).get())?c.nestedProperty(f,n[a]).set(null):(r.set(null),c.nestedProperty(f,n[a]).set(i));if(t=c.extendDeepNoArrays(t||{},h),n&&n.length)for(a=0;a<n.length;a++)if(l=c.nestedProperty(f,n[a]).get()){for(u=(s=c.nestedProperty(t,n[a])).get(),Array.isArray(u)||s.set(u=[]),o=0;o<l.length;o++){var p=l[o];u[o]=null===p?null:b.extendObjectWithContainers(u[o],p)}s.set(u)}return t},b.dataArrayContainers=["transforms","dimensions"],b.layoutArrayContainers=o.layoutArrayContainers,b.extendTrace=function(t,e){return b.extendObjectWithContainers(t,e,b.dataArrayContainers)},b.extendLayout=function(t,e){return b.extendObjectWithContainers(t,e,b.layoutArrayContainers)},b.transition=function(t,e,n,r,i,a){var o={redraw:i.redraw},s={},l=[];return o.prepareFn=function(){for(var i=Array.isArray(e)?e.length:0,a=r.slice(0,i),o=0;o<a.length;o++){var u=a[o],d=t._fullData[u]._module;if(d){if(d.animatable){var h=d.basePlotModule.name;s[h]||(s[h]=[]),s[h].push(u)}t.data[a[o]]=b.extendTrace(t.data[a[o]],e[o])}}var f=c.expandObjectPaths(c.extendDeepNoArrays({},n)),p=/^[xy]axis[0-9]*$/;for(var g in f)p.test(g)&&delete f[g].range;b.extendLayout(t.layout,f),delete t.calcdata,b.supplyDefaults(t),b.doCalcdata(t);var m=c.expandObjectPaths(n);if(m){var v=t._fullLayout._plots;for(var y in v){var x=v[y],_=x.xaxis,w=x.yaxis,k=_.range.slice(),T=w.range.slice(),M=null,A=null,C=null,S=null;Array.isArray(m[_._name+".range"])?M=m[_._name+".range"].slice():Array.isArray((m[_._name]||{}).range)&&(M=m[_._name].range.slice()),Array.isArray(m[w._name+".range"])?A=m[w._name+".range"].slice():Array.isArray((m[w._name]||{}).range)&&(A=m[w._name].range.slice()),k&&M&&(_.r2l(k[0])!==_.r2l(M[0])||_.r2l(k[1])!==_.r2l(M[1]))&&(C={xr0:k,xr1:M}),T&&A&&(w.r2l(T[0])!==w.r2l(A[0])||w.r2l(T[1])!==w.r2l(A[1]))&&(S={yr0:T,yr1:A}),(C||S)&&l.push(c.extendFlat({plotinfo:x},C,S))}}return Promise.resolve()},o.runFn=function(e){var r,i,o=t._fullLayout._basePlotModules,u=l.length;if(n)for(i=0;i<o.length;i++)o[i].transitionAxes&&o[i].transitionAxes(t,l,a,e);for(var d in u?((r=c.extendFlat({},a)).duration=0,delete s.cartesian):r=a,s){var h=s[d];t._fullData[h[0]]._module.basePlotModule.plot(t,h,r,e)}},E(t,a,o)},b.transitionFromReact=function(t,e,n,r){var i=t._fullLayout,a=i.transition,o={},s=[];return o.prepareFn=function(){var t=i._plots;for(var a in o.redraw=!1,"some"===e.anim&&(o.redraw=!0),"some"===n.anim&&(o.redraw=!0),t){var l=t[a],u=l.xaxis,d=l.yaxis,h=r[u._name].range.slice(),f=r[d._name].range.slice(),p=u.range.slice(),g=d.range.slice();u.setScale(),d.setScale();var m=null,v=null;u.r2l(h[0])===u.r2l(p[0])&&u.r2l(h[1])===u.r2l(p[1])||(m={xr0:h,xr1:p}),d.r2l(f[0])===d.r2l(g[0])&&d.r2l(f[1])===d.r2l(g[1])||(v={yr0:f,yr1:g}),(m||v)&&s.push(c.extendFlat({plotinfo:l},m,v))}return Promise.resolve()},o.runFn=function(n){for(var r,i,o,l=t._fullData,u=t._fullLayout._basePlotModules,d=[],h=0;h<l.length;h++)d.push(h);function f(){for(var e=0;e<u.length;e++)u[e].transitionAxes&&u[e].transitionAxes(t,s,r,n)}function p(){for(var e=0;e<u.length;e++)u[e].plot(t,o,i,n)}s.length&&e.anim?"traces first"===a.ordering?(r=c.extendFlat({},a,{duration:0}),o=d,i=a,setTimeout(f,a.duration),p()):(r=a,o=null,i=c.extendFlat({},a,{duration:0}),setTimeout(p,r.duration),f()):s.length?(r=a,f()):e.anim&&(o=d,i=a,p())},E(t,a,o)},b.doCalcdata=function(t,e){var n,r,i,a,l=h.list(t),u=t._fullData,f=t._fullLayout,p=new Array(u.length),g=(t.calcdata||[]).slice();for(t.calcdata=p,f._numBoxes=0,f._numViolins=0,f._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,f._piecolormap={},f._sunburstcolormap={},f._treemapcolormap={},f._funnelareacolormap={},i=0;i<u.length;i++)Array.isArray(e)&&-1===e.indexOf(i)&&(p[i]=g[i]);for(i=0;i<u.length;i++)(n=u[i])._arrayAttrs=s.findArrayAttributes(n),n._extremes={};var m=f._subplots.polar||[];for(i=0;i<m.length;i++)l.push(f[m[i]].radialaxis,f[m[i]].angularaxis);for(var v in f._colorAxes){var y=f[v];!1!==y.cauto&&(delete y.cmin,delete y.cmax)}var b=!1;function _(e){if(r=(n=u[e])._module,!0===n.visible&&n.transforms){if(r&&r.calc){var i=r.calc(t,n);i[0]&&i[0].t&&i[0].t._scene&&delete i[0].t._scene.dirty}for(a=0;a<n.transforms.length;a++){var o=n.transforms[a];(r=x[o.type])&&r.calcTransform&&(n._hasCalcTransform=!0,b=!0,r.calcTransform(t,n,o))}}}function w(e,i){if(!!(r=(n=u[e])._module).isContainer===i){var o=[];if(!0===n.visible&&0!==n._length){delete n._indexToPoints;var s=n.transforms||[];for(a=s.length-1;a>=0;a--)if(s[a].enabled){n._indexToPoints=s[a]._indexToPoints;break}r&&r.calc&&(o=r.calc(t,n))}Array.isArray(o)&&o[0]||(o=[{x:d,y:d}]),o[0].t||(o[0].t={}),o[0].trace=n,p[e]=o}}for(P(l,u,f),i=0;i<u.length;i++)w(i,!0);for(i=0;i<u.length;i++)_(i);for(b&&P(l,u,f),i=0;i<u.length;i++)w(i,!0);for(i=0;i<u.length;i++)w(i,!1);I(t);var k=function(t,e){var n,r,i,a,s,l=[];function u(t,n,r){var i=n._id.charAt(0);if("histogram2dcontour"===t){var a=n._counterAxes[0],o=h.getFromId(e,a),s="x"===i||"x"===a&&"category"===o.type,l="y"===i||"y"===a&&"category"===o.type;return function(t,e){return 0===t||0===e||s&&t===r[e].length-1||l&&e===r.length-1?-1:("y"===i?e:t)-1}}return function(t,e){return"y"===i?e:t}}var d={min:function(t){return c.aggNums(Math.min,null,t)},max:function(t){return c.aggNums(Math.max,null,t)},sum:function(t){return c.aggNums(function(t,e){return t+e},null,t)},total:function(t){return c.aggNums(function(t,e){return t+e},null,t)},mean:function(t){return c.mean(t)},median:function(t){return c.median(t)}};for(n=0;n<t.length;n++){var f=t[n];if("category"===f.type){var p=f.categoryorder.match(L);if(p){var g=p[1],m=p[2],v=f._id.charAt(0),y="x"===v,b=[];for(r=0;r<f._categories.length;r++)b.push([f._categories[r],[]]);for(r=0;r<f._traceIndices.length;r++){var x=f._traceIndices[r],_=e._fullData[x];if(!0===_.visible){var w=_.type;o.traceIs(_,"histogram")&&(delete _._xautoBinFinished,delete _._yautoBinFinished);var k="splom"===w,T="scattergl"===w,M=e.calcdata[x];for(i=0;i<M.length;i++){var A,C,S=M[i];if(k){var D=_._axesDim[f._id];if(!y){var O=_._diag[D][0];O&&(f=e._fullLayout[h.id2name(O)])}var E=S.trace.dimensions[D].values;for(a=0;a<E.length;a++)for(A=f._categoriesMap[E[a]],s=0;s<S.trace.dimensions.length;s++)s!==D&&b[A][1].push(S.trace.dimensions[s].values[a])}else if(T){for(a=0;a<S.t.x.length;a++)y?(A=S.t.x[a],C=S.t.y[a]):(A=S.t.y[a],C=S.t.x[a]),b[A][1].push(C);S.t&&S.t._scene&&delete S.t._scene.dirty}else if(S.hasOwnProperty("z")){var P=u(_.type,f,C=S.z);for(a=0;a<C.length;a++)for(s=0;s<C[a].length;s++)(A=P(s,a))+1&&b[A][1].push(C[a][s])}else for(void 0===(A=S.p)&&(A=S[v]),void 0===(C=S.s)&&(C=S.v),void 0===C&&(C=y?S.y:S.x),Array.isArray(C)||(C=void 0===C?[]:[C]),a=0;a<C.length;a++)b[A][1].push(C[a])}}}f._categoriesValue=b;var I=[];for(r=0;r<b.length;r++)I.push([b[r][0],d[g](b[r][1])]);I.sort(function(t,e){return t[1]-e[1]}),f._categoriesAggregatedValue=I,f._initialCategories=I.map(function(t){return t[0]}),"descending"===m&&f._initialCategories.reverse(),l=l.concat(f.sortByInitialCategories())}}}return l}(l,t);if(k.length){for(f._numBoxes=0,f._numViolins=0,i=0;i<k.length;i++)w(k[i],!0);for(i=0;i<k.length;i++)w(k[i],!1);I(t)}o.getComponentMethod("fx","calc")(t),o.getComponentMethod("errorbars","calc")(t)};var L=/(total|sum|min|max|mean|median) (ascending|descending)/;function P(t,e,n){var r={};function i(t){t.clearCalc(),"multicategory"===t.type&&t.setupMultiCategory(e),r[t._id]=1}c.simpleMap(t,i);for(var a=n._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])r[s]||i(n[h.id2name(s)])}function I(t){var e,n,r,i=t._fullLayout,a=i._visibleModules,o={};for(n=0;n<a.length;n++){var s=a[n],l=s.crossTraceCalc;if(l){var u=s.basePlotModule.name;o[u]?c.pushUnique(o[u],l):o[u]=[l]}}for(r in o){var d=o[r],h=i._subplots[r];if(Array.isArray(h))for(e=0;e<h.length;e++){var f=h[e],p="cartesian"===r?i._plots[f]:i[f];for(n=0;n<d.length;n++)d[n](t,p,f)}else for(n=0;n<d.length;n++)d[n](t)}}b.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},b.redrag=function(t){t._fullLayout._redrag&&t._fullLayout._redrag()},b.generalUpdatePerTraceModule=function(t,e,n,r){var i,a=e.traceHash,o={};for(i=0;i<n.length;i++){var s=n[i],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var u in a)if(!o[u]){var d=a[u][0];d[0].trace.visible=!1,o[u]=[d]}for(var h in o){var f=o[h];f[0][0].trace._module.plot(t,e,c.filterVisible(f),r)}e.traceHash=o},b.plotBasePlot=function(t,e,n,r,i){var a=o.getModule(t),s=m(e.calcdata,a)[0];a.plot(e,s,r,i)},b.cleanBasePlot=function(t,e,n,r,i){var a=i._has&&i._has(t),o=n._has&&n._has(t);a&&!o&&i["_"+t+"layer"].selectAll("g.trace").remove()}},{"../components/color":75,"../constants/numerical":181,"../lib":202,"../plot_api/plot_schema":236,"../plot_api/plot_template":237,"../plots/get_data":278,"../registry":290,"./animation_attributes":242,"./attributes":244,"./cartesian/axis_ids":251,"./cartesian/handle_outline":258,"./command":274,"./font_attributes":276,"./frame_attributes":277,"./layout_attributes":280,d3:9,"d3-time-format":7,"fast-isnumeric":11}],283:[function(t,e,n){"use strict";var r=t("../../../traces/scatter/attributes"),i=r.marker,a=t("../../../lib/extend").extendFlat;["Area traces are deprecated!","Please switch to the *barpolar* trace type."].join(" "),e.exports={r:a({},r.r,{}),t:a({},r.t,{}),marker:{color:a({},i.color,{}),size:a({},i.size,{}),symbol:a({},i.symbol,{}),opacity:a({},i.opacity,{}),editType:"calc"}}},{"../../../lib/extend":196,"../../../traces/scatter/attributes":330}],284:[function(t,e,n){"use strict";var r=t("../../cartesian/layout_attributes"),i=t("../../../lib/extend").extendFlat,a=t("../../../plot_api/edit_types").overrideAll,o=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),s=i({},r.domain,{});function l(t,e){return i({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:o},visible:{valType:"boolean"}})}e.exports=a({radialaxis:l(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:s,orientation:{valType:"number"}}),angularaxis:l(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:s}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":196,"../../../plot_api/edit_types":230,"../../cartesian/layout_attributes":262}],285:[function(t,e,n){"use strict";(e.exports=t("./micropolar")).manager=t("./micropolar_manager")},{"./micropolar":286,"./micropolar_manager":287}],286:[function(t,e,n){var r=t("d3"),i=t("../../../lib").extendDeepAll,a=t("../../../constants/alignment").MID_SHIFT,o=e.exports={version:"0.2.2"};o.Axis=function(){var t,e,n,s,l={data:[],layout:{}},c={},u={},d=r.dispatch("hover"),h={render:function(c){return function(c){var d=l.data,h=l.layout;("string"==typeof(e=c||e)||e.nodeName)&&(e=r.select(e)),e.datum(d).each(function(e,l){var c=e.slice();u={data:o.util.cloneJson(c),layout:o.util.cloneJson(h)};var d=0;c.forEach(function(t,e){t.color||(t.color=h.defaultColorRange[d],d=(d+1)%h.defaultColorRange.length),t.strokeColor||(t.strokeColor="LinePlot"===t.geometry?t.color:r.rgb(t.color).darker().toString()),u.data[e].color=t.color,u.data[e].strokeColor=t.strokeColor,u.data[e].strokeDash=t.strokeDash,u.data[e].strokeSize=t.strokeSize});var f=c.filter(function(t,e){var n=t.visible;return void 0===n||!0===n}),p=!1,g=f.map(function(t,e){return p=p||void 0!==t.groupId,t});if(p){var m=r.nest().key(function(t,e){return void 0!==t.groupId?t.groupId:"unstacked"}).entries(g),v=[],y=m.map(function(t,e){if("unstacked"===t.key)return t.values;var n=t.values[0].r.map(function(t,e){return 0});return t.values.forEach(function(t,e,r){t.yStack=[n],v.push(n),n=o.util.sumArrays(t.r,n)}),t.values});f=r.merge(y)}f.forEach(function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]});var b=Math.min(h.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2;b=Math.max(10,b);var x,_=[h.margin.left+b,h.margin.top+b];x=p?[0,r.max(o.util.sumArrays(o.util.arrayLast(f).r[0],o.util.arrayLast(v)))]:r.extent(o.util.flattenArray(f.map(function(t,e){return t.r}))),h.radialAxis.domain!=o.DATAEXTENT&&(x[0]=0),n=r.scale.linear().domain(h.radialAxis.domain!=o.DATAEXTENT&&h.radialAxis.domain?h.radialAxis.domain:x).range([0,b]),u.layout.radialAxis.domain=n.domain();var w,k=o.util.flattenArray(f.map(function(t,e){return t.t})),T="string"==typeof k[0];T&&(k=o.util.deduplicate(k),w=k.slice(),k=r.range(k.length),f=f.map(function(t,e){var n=t;return t.t=[k],p&&(n.yStack=t.yStack),n}));var M=f.filter(function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry}).length===f.length,A=null===h.needsEndSpacing?T||!M:h.needsEndSpacing,C=h.angularAxis.domain&&h.angularAxis.domain!=o.DATAEXTENT&&!T&&h.angularAxis.domain[0]>=0?h.angularAxis.domain:r.extent(k),S=Math.abs(k[1]-k[0]);M&&!T&&(S=0);var D=C.slice();A&&T&&(D[1]+=S);var O=h.angularAxis.ticksCount||4;O>8&&(O=O/(O/8)+O%8),h.angularAxis.ticksStep&&(O=(D[1]-D[0])/O);var E=h.angularAxis.ticksStep||(D[1]-D[0])/(O*(h.minorTicks+1));w&&(E=Math.max(Math.round(E),1)),D[2]||(D[2]=E);var L=r.range.apply(this,D);if(L=L.map(function(t,e){return parseFloat(t.toPrecision(12))}),s=r.scale.linear().domain(D.slice(0,2)).range("clockwise"===h.direction?[0,360]:[360,0]),u.layout.angularAxis.domain=s.domain(),u.layout.angularAxis.endPadding=A?S:0,void 0===(t=r.select(this).select("svg.chart-root"))||t.empty()){var P=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),I=this.appendChild(this.ownerDocument.importNode(P.documentElement,!0));t=r.select(I)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var R,N=t.select(".chart-group"),F={fill:"none",stroke:h.tickColor},z={"font-size":h.font.size,"font-family":h.font.family,fill:h.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(t,e){return" "+t+" 0 "+h.font.outlineColor}).join(",")};if(h.showLegend){R=t.select(".legend-group").attr({transform:"translate("+[b,h.margin.top]+")"}).style({display:"block"});var V=f.map(function(t,e){var n=o.util.cloneJson(t);return n.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",n.visibleInLegend=void 0===t.visibleInLegend||t.visibleInLegend,n.color="LinePlot"===t.geometry?t.strokeColor:t.color,n});o.Legend().config({data:f.map(function(t,e){return t.name||"Element"+e}),legendConfig:i({},o.Legend.defaultConfig().legendConfig,{container:R,elements:V,reverseOrder:h.legend.reverseOrder})})();var H=R.node().getBBox();b=Math.min(h.width-H.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2,b=Math.max(10,b),_=[h.margin.left+b,h.margin.top+b],n.range([0,b]),u.layout.radialAxis.domain=n.domain(),R.attr("transform","translate("+[_[0]+b,_[1]-b]+")")}else R=t.select(".legend-group").style({display:"none"});t.attr({width:h.width,height:h.height}).style({opacity:h.opacity}),N.attr("transform","translate("+_+")").style({cursor:"crosshair"});var j=[(h.width-(h.margin.left+h.margin.right+2*b+(H?H.width:0)))/2,(h.height-(h.margin.top+h.margin.bottom+2*b))/2];if(j[0]=Math.max(0,j[0]),j[1]=Math.max(0,j[1]),t.select(".outer-group").attr("transform","translate("+j+")"),h.title&&h.title.text){var B=t.select("g.title-group text").style(z).text(h.title.text),U=B.node().getBBox();B.attr({x:_[0]-U.width/2,y:_[1]-b-20})}var q=t.select(".radial.axis-group");if(h.radialAxis.gridLinesVisible){var G=q.selectAll("circle.grid-circle").data(n.ticks(5));G.enter().append("circle").attr({class:"grid-circle"}).style(F),G.attr("r",n),G.exit().remove()}q.select("circle.outside-circle").attr({r:b}).style(F);var Z=t.select("circle.background-circle").attr({r:b}).style({fill:h.backgroundColor,stroke:h.stroke});function W(t,e){return s(t)%360+h.orientation}if(h.radialAxis.visible){var $=r.svg.axis().scale(n).ticks(5).tickSize(5);q.call($).attr({transform:"rotate("+h.radialAxis.orientation+")"}),q.selectAll(".domain").style(F),q.selectAll("g>text").text(function(t,e){return this.textContent+h.radialAxis.ticksSuffix}).style(z).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===h.radialAxis.tickOrientation?"rotate("+-h.radialAxis.orientation+") translate("+[0,z["font-size"]]+")":"translate("+[0,z["font-size"]]+")"}}),q.selectAll("g>line").style({stroke:"black"})}var Y=t.select(".angular.axis-group").selectAll("g.angular-tick").data(L),X=Y.enter().append("g").classed("angular-tick",!0);Y.attr({transform:function(t,e){return"rotate("+W(t)+")"}}).style({display:h.angularAxis.visible?"block":"none"}),Y.exit().remove(),X.append("line").classed("grid-line",!0).classed("major",function(t,e){return e%(h.minorTicks+1)==0}).classed("minor",function(t,e){return!(e%(h.minorTicks+1)==0)}).style(F),X.selectAll(".minor").style({stroke:h.minorTickColor}),Y.select("line.grid-line").attr({x1:h.tickLength?b-h.tickLength:0,x2:b}).style({display:h.angularAxis.gridLinesVisible?"block":"none"}),X.append("text").classed("axis-text",!0).style(z);var Q=Y.select("text.axis-text").attr({x:b+h.labelOffset,dy:a+"em",transform:function(t,e){var n=W(t),r=b+h.labelOffset,i=h.angularAxis.tickOrientation;return"horizontal"==i?"rotate("+-n+" "+r+" 0)":"radial"==i?n<270&&n>90?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&n>0?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:h.angularAxis.labelsVisible?"block":"none"}).text(function(t,e){return e%(h.minorTicks+1)!=0?"":w?w[t]+h.angularAxis.ticksSuffix:t+h.angularAxis.ticksSuffix}).style(z);h.angularAxis.rewriteTicks&&Q.text(function(t,e){return e%(h.minorTicks+1)!=0?"":h.angularAxis.rewriteTicks(this.textContent,e)});var K=r.max(N.selectAll(".angular-tick text")[0].map(function(t,e){return t.getCTM().e+t.getBBox().width}));R.attr({transform:"translate("+[b+K,h.margin.top]+")"});var J=t.select("g.geometry-group").selectAll("g").size()>0,tt=t.select("g.geometry-group").selectAll("g.geometry").data(f);if(tt.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),tt.exit().remove(),f[0]||J){var et=[];f.forEach(function(t,e){var r={};r.radialScale=n,r.angularScale=s,r.container=tt.filter(function(t,n){return n==e}),r.geometry=t.geometry,r.orientation=h.orientation,r.direction=h.direction,r.index=e,et.push({data:t,geometryConfig:r})});var nt=r.nest().key(function(t,e){return void 0!==t.data.groupId||"unstacked"}).entries(et),rt=[];nt.forEach(function(t,e){"unstacked"===t.key?rt=rt.concat(t.values.map(function(t,e){return[t]})):rt.push(t.values)}),rt.forEach(function(t,e){var n;n=Array.isArray(t)?t[0].geometryConfig.geometry:t.geometryConfig.geometry;var r=t.map(function(t,e){return i(o[n].defaultConfig(),t)});o[n]().config(r)()})}var it,at,ot=t.select(".guides-group"),st=t.select(".tooltips-group"),lt=o.tooltipPanel().config({container:st,fontSize:8})(),ct=o.tooltipPanel().config({container:st,fontSize:8})(),ut=o.tooltipPanel().config({container:st,hasTick:!0})();if(!T){var dt=ot.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});N.on("mousemove.angular-guide",function(t,e){var n=o.util.getMousePos(Z).angle;dt.attr({x2:-b,transform:"rotate("+n+")"}).style({opacity:.5}),it=s.invert((n+180+360-h.orientation)%360);var r=o.util.convertToCartesian(b+12,n+180);lt.text(o.util.round(it)).move([r[0]+_[0],r[1]+_[1]])}).on("mouseout.angular-guide",function(t,e){ot.select("line").style({opacity:0})})}var ht=ot.select("circle").style({stroke:"grey",fill:"none"});N.on("mousemove.radial-guide",function(t,e){var r=o.util.getMousePos(Z).radius;ht.attr({r:r}).style({opacity:.5}),at=n.invert(o.util.getMousePos(Z).radius);var i=o.util.convertToCartesian(r,h.radialAxis.orientation);ct.text(o.util.round(at)).move([i[0]+_[0],i[1]+_[1]])}).on("mouseout.radial-guide",function(t,e){ht.style({opacity:0}),ut.hide(),lt.hide(),ct.hide()}),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,n){var i=r.select(this),a=this.style.fill,s="black";if(i.attr({"data-opacity":this.style.opacity||1}),a&&"none"!==a){i.attr({"data-fill":a}),s=r.hsl(a).darker().toString(),i.style({fill:s,opacity:1});var l={t:o.util.round(e[0]),r:o.util.round(e[1])};T&&(l.t=w[e[0]]);var c="t: "+l.t+", r: "+l.r,u=this.getBoundingClientRect(),d=t.node().getBoundingClientRect(),h=[u.left+u.width/2-j[0]-d.left,u.top+u.height/2-j[1]-d.top];ut.config({color:s}).text(c),ut.move(h)}else i.attr({"data-stroke":a=this.style.stroke||"black"}),s=r.hsl(a).darker().toString(),i.style({stroke:s,opacity:1})}).on("mousemove.tooltip",function(t,e){if(0!=r.event.which)return!1;r.select(this).attr("data-fill")&&ut.show()}).on("mouseout.tooltip",function(t,e){ut.hide();var n=r.select(this),i=n.attr("data-fill");n.style(i?{fill:i,opacity:n.attr("data-opacity")}:{stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(c),this},config:function(t){if(!arguments.length)return l;var e=o.util.cloneJson(t);return e.data.forEach(function(t,e){l.data[e]||(l.data[e]={}),i(l.data[e],o.Axis.defaultConfig().data[0]),i(l.data[e],t)}),i(l.layout,o.Axis.defaultConfig().layout),i(l.layout,e.layout),this},getLiveConfig:function(){return u},getinputConfig:function(){return c},radialScale:function(t){return n},angularScale:function(t){return s},svg:function(){return t}};return r.rebind(h,d,"on"),h},o.Axis.defaultConfig=function(t,e){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},o.util={},o.DATAEXTENT="dataExtent",o.AREA="AreaChart",o.LINE="LinePlot",o.DOT="DotPlot",o.BAR="BarChart",o.util._override=function(t,e){for(var n in t)n in e&&(e[n]=t[n])},o.util._extend=function(t,e){for(var n in t)e[n]=t[n]},o.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},o.util.dataFromEquation2=function(t,e){var n=e||6;return r.range(0,360+n,n).map(function(e,n){var r=e*Math.PI/180;return[e,t(r)]})},o.util.dataFromEquation=function(t,e,n){var i=e||6,a=[],o=[];r.range(0,360+i,i).forEach(function(e,n){var r=e*Math.PI/180,i=t(r);a.push(e),o.push(i)});var s={t:a,r:o};return n&&(s.name=n),s},o.util.ensureArray=function(t,e){if(void 0===t)return null;var n=[].concat(t);return r.range(e).map(function(t,e){return n[e]||n[0]})},o.util.fillArrays=function(t,e,n){return e.forEach(function(e,r){t[e]=o.util.ensureArray(t[e],n)}),t},o.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},o.util.validateKeys=function(t,e){"string"==typeof e&&(e=e.split("."));var n=e.shift();return t[n]&&(!e.length||objHasKeys(t[n],e))},o.util.sumArrays=function(t,e){return r.zip(t,e).map(function(t,e){return r.sum(t)})},o.util.arrayLast=function(t){return t[t.length-1]},o.util.arrayEqual=function(t,e){for(var n=Math.max(t.length,e.length,1);n-- >=0&&t[n]===e[n];);return-2===n},o.util.flattenArray=function(t){for(var e=[];!o.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},o.util.deduplicate=function(t){return t.filter(function(t,e,n){return n.indexOf(t)==e})},o.util.convertToCartesian=function(t,e){var n=e*Math.PI/180;return[t*Math.cos(n),t*Math.sin(n)]},o.util.round=function(t,e){var n=Math.pow(10,e||2);return Math.round(t*n)/n},o.util.getMousePos=function(t){var e=r.mouse(t.node()),n=e[0],i=e[1],a={};return a.x=n,a.y=i,a.pos=e,a.angle=180*(Math.atan2(i,n)+Math.PI)/Math.PI,a.radius=Math.sqrt(n*n+i*i),a},o.util.duplicatesCount=function(t){for(var e,n={},r={},i=0,a=t.length;i<a;i++)(e=t[i])in n?(n[e]++,r[e]=n[e]):n[e]=1;return r},o.util.duplicates=function(t){return Object.keys(o.util.duplicatesCount(t))},o.util.translator=function(t,e,n,r){if(r){var i=n.slice();n=e,e=i}var a=e.reduce(function(t,e){if(void 0!==t)return t[e]},t);void 0!==a&&(e.reduce(function(t,n,r){if(void 0!==t)return r===e.length-1&&delete t[n],t[n]},t),n.reduce(function(t,e,r){return void 0===t[e]&&(t[e]={}),r===n.length-1&&(t[e]=a),t[e]},t))},o.PolyChart=function(){var t=[o.PolyChart.defaultConfig()],e=r.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};function a(){var e=t[0].geometryConfig,i=e.container;"string"==typeof i&&(i=r.select(i)),i.datum(t).each(function(t,i){var a=!!t[0].data.yStack,o=t.map(function(t,e){return a?r.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):r.zip(t.data.t[0],t.data.r[0])}),s=e.angularScale,l=e.radialScale.domain()[0],c={bar:function(n,i,a){var o=t[a].data,l=e.radialScale(n[1])-e.radialScale(0),c=e.radialScale(n[2]||0),u=o.barWidth;r.select(this).attr({class:"mark bar",d:"M"+[[l+c,-u/2],[l+c,u/2],[c,u/2],[c,-u/2]].join("L")+"Z",transform:function(t,n){return"rotate("+(e.orientation+s(t[0]))+")"}})},dot:function(n,i,a){var o=n[2]?[n[0],n[1]+n[2]]:n,s=r.svg.symbol().size(t[a].data.dotSize).type(t[a].data.dotType)(n,i);r.select(this).attr({class:"mark dot",d:s,transform:function(t,n){var r;return"translate("+[(r=function(t,n){return{r:e.radialScale(t[1]),t:(e.angularScale(t[0])+e.orientation)*Math.PI/180}}(o)).r*Math.cos(r.t),r.r*Math.sin(r.t)]+")"}})}},u=r.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});c.line=function(n,i,a){var s=n[2]?o[a].map(function(t,e){return[t[0],t[1]+t[2]]}):o[a];if(r.select(this).each(c.dot).style({opacity:function(e,n){return+t[a].data.dotVisible},fill:p.stroke(n,i,a)}).attr({class:"mark dot"}),!(i>0)){var l=r.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path"),l.attr({class:"line",d:u(s),transform:function(t,n){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return p.fill(n,i,a)},"fill-opacity":0,stroke:function(t,e){return p.stroke(n,i,a)},"stroke-width":function(t,e){return p["stroke-width"](n,i,a)},"stroke-dasharray":function(t,e){return p["stroke-dasharray"](n,i,a)},opacity:function(t,e){return p.opacity(n,i,a)},display:function(t,e){return p.display(n,i,a)}})}};var d=e.angularScale.range(),h=Math.abs(d[1]-d[0])/o[0].length*Math.PI/180,f=r.svg.arc().startAngle(function(t){return-h/2}).endAngle(function(t){return h/2}).innerRadius(function(t){return e.radialScale(l+(t[2]||0))}).outerRadius(function(t){return e.radialScale(l+(t[2]||0))+e.radialScale(t[1])});c.arc=function(t,n,i){r.select(this).attr({class:"mark arc",d:f,transform:function(t,n){return"rotate("+(e.orientation+s(t[0])+90)+")"}})};var p={fill:function(e,n,r){return t[r].data.color},stroke:function(e,n,r){return t[r].data.strokeColor},"stroke-width":function(e,n,r){return t[r].data.strokeSize+"px"},"stroke-dasharray":function(e,r,i){return n[t[i].data.strokeDash]},opacity:function(e,n,r){return t[r].data.opacity},display:function(e,n,r){return void 0===t[r].data.visible||t[r].data.visible?"block":"none"}},g=r.select(this).selectAll("g.layer").data(o);g.enter().append("g").attr({class:"layer"});var m=g.selectAll("path.mark").data(function(t,e){return t});m.enter().append("path").attr({class:"mark"}),m.style(p).each(c[e.geometryType]),m.exit().remove(),g.exit().remove()})}return a.config=function(e){return arguments.length?(e.forEach(function(e,n){t[n]||(t[n]={}),i(t[n],o.PolyChart.defaultConfig()),i(t[n],e)}),this):t},a.getColorScale=function(){},r.rebind(a,e,"on"),a},o.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}}},o.BarChart=function(){return o.PolyChart()},o.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},o.AreaChart=function(){return o.PolyChart()},o.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},o.DotPlot=function(){return o.PolyChart()},o.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},o.LinePlot=function(){return o.PolyChart()},o.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},o.Legend=function(){var t=o.Legend.defaultConfig(),e=r.dispatch("hover");function n(){var e=t.legendConfig,a=t.data.map(function(t,n){return[].concat(t).map(function(t,r){var a=i({},e.elements[n]);return a.name=t,a.color=[].concat(e.elements[n].color)[r],a})}),o=r.merge(a);o=o.filter(function(t,n){return e.elements[n]&&(e.elements[n].visibleInLegend||void 0===e.elements[n].visibleInLegend)}),e.reverseOrder&&(o=o.reverse());var s=e.container;("string"==typeof s||s.nodeName)&&(s=r.select(s));var l=o.map(function(t,e){return t.color}),c=e.fontSize,u=null==e.isContinuous?"number"==typeof o[0]:e.isContinuous,d=u?e.height:c*o.length,h=s.classed("legend-group",!0).selectAll("svg").data([0]),f=h.enter().append("svg").attr({width:300,height:d+c,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});f.append("g").classed("legend-axis",!0),f.append("g").classed("legend-marks",!0);var p=r.range(o.length),g=r.scale[u?"linear":"ordinal"]().domain(p).range(l),m=r.scale[u?"linear":"ordinal"]().domain(p)[u?"range":"rangePoints"]([0,d]);if(u){var v=h.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);v.enter().append("stop"),v.attr({offset:function(t,e){return e/(l.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),h.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var y=h.select(".legend-marks").selectAll("path.legend-mark").data(o);y.enter().append("path").classed("legend-mark",!0),y.attr({transform:function(t,e){return"translate("+[c/2,m(e)+c/2]+")"},d:function(t,e){var n,i,a;return a=3*(i=c),"line"===(n=t.symbol)?"M"+[[-i/2,-i/12],[i/2,-i/12],[i/2,i/12],[-i/2,i/12]]+"Z":-1!=r.svg.symbolTypes.indexOf(n)?r.svg.symbol().type(n).size(a)():r.svg.symbol().type("square").size(a)()},fill:function(t,e){return g(e)}}),y.exit().remove()}var b=r.svg.axis().scale(m).orient("right"),x=h.select("g.legend-axis").attr({transform:"translate("+[u?e.colorBandWidth:c,c/2]+")"}).call(b);return x.selectAll(".domain").style({fill:"none",stroke:"none"}),x.selectAll("line").style({fill:"none",stroke:u?e.textColor:"none"}),x.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(t,e){return o[e].name}),n}return n.config=function(e){return arguments.length?(i(t,e),this):t},r.rebind(n,e,"on"),n},o.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},o.tooltipPanel=function(){var t,e,n,a={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},s="tooltip-"+o.tooltipPanel.uid++,l=10,c=function(){var r=(t=a.container.selectAll("g."+s).data([0])).enter().append("g").classed(s,!0).style({"pointer-events":"none",display:"none"});return n=r.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),e=r.append("text").attr({dx:a.padding+l,dy:.3*+a.fontSize}),c};return c.text=function(i){var o=r.hsl(a.color).l,s=o>=.5?"#aaa":"white",u=i||"";e.style({fill:o>=.5?"black":"white","font-size":a.fontSize+"px"}).text(u);var d=a.padding,h=e.node().getBBox(),f={fill:a.color,stroke:s,"stroke-width":"2px"},p=h.width+2*d+l,g=h.height+2*d;return n.attr({d:"M"+[[l,-g/2],[l,-g/4],[a.hasTick?0:l,0],[l,g/4],[l,g/2],[p,g/2],[p,-g/2]].join("L")+"Z"}).style(f),t.attr({transform:"translate("+[l,-g/2+2*d]+")"}),t.style({display:"block"}),c},c.move=function(e){if(t)return t.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),c},c.hide=function(){if(t)return t.style({display:"none"}),c},c.show=function(){if(t)return t.style({display:"block"}),c},c.config=function(t){return i(a,t),c},c},o.tooltipPanel.uid=1,o.adapter={},o.adapter.plotly=function(){return{convert:function(t,e){var n={};if(t.data&&(n.data=t.data.map(function(t,n){var r=i({},t);return[[r,["marker","color"],["color"]],[r,["marker","opacity"],["opacity"]],[r,["marker","line","color"],["strokeColor"]],[r,["marker","line","dash"],["strokeDash"]],[r,["marker","line","width"],["strokeSize"]],[r,["marker","symbol"],["dotType"]],[r,["marker","size"],["dotSize"]],[r,["marker","barWidth"],["barWidth"]],[r,["line","interpolation"],["lineInterpolation"]],[r,["showlegend"],["visibleInLegend"]]].forEach(function(t,n){o.util.translator.apply(null,t.concat(e))}),e||delete r.marker,e&&delete r.groupId,e?("LinePlot"===r.geometry?(r.type="scatter",!0===r.dotVisible?(delete r.dotVisible,r.mode="lines+markers"):r.mode="lines"):"DotPlot"===r.geometry?(r.type="scatter",r.mode="markers"):"AreaChart"===r.geometry?r.type="area":"BarChart"===r.geometry&&(r.type="bar"),delete r.geometry):("scatter"===r.type?"lines"===r.mode?r.geometry="LinePlot":"markers"===r.mode?r.geometry="DotPlot":"lines+markers"===r.mode&&(r.geometry="LinePlot",r.dotVisible=!0):"area"===r.type?r.geometry="AreaChart":"bar"===r.type&&(r.geometry="BarChart"),delete r.mode,delete r.type),r}),!e&&t.layout&&"stack"===t.layout.barmode)){var a=o.util.duplicates(n.data.map(function(t,e){return t.geometry}));n.data.forEach(function(t,e){var r=a.indexOf(t.geometry);-1!=r&&(n.data[e].groupId=r)})}if(t.layout){var s=i({},t.layout);if([[s,["plot_bgcolor"],["backgroundColor"]],[s,["showlegend"],["showLegend"]],[s,["radialaxis"],["radialAxis"]],[s,["angularaxis"],["angularAxis"]],[s.angularaxis,["showline"],["gridLinesVisible"]],[s.angularaxis,["showticklabels"],["labelsVisible"]],[s.angularaxis,["nticks"],["ticksCount"]],[s.angularaxis,["tickorientation"],["tickOrientation"]],[s.angularaxis,["ticksuffix"],["ticksSuffix"]],[s.angularaxis,["range"],["domain"]],[s.angularaxis,["endpadding"],["endPadding"]],[s.radialaxis,["showline"],["gridLinesVisible"]],[s.radialaxis,["tickorientation"],["tickOrientation"]],[s.radialaxis,["ticksuffix"],["ticksSuffix"]],[s.radialaxis,["range"],["domain"]],[s.angularAxis,["showline"],["gridLinesVisible"]],[s.angularAxis,["showticklabels"],["labelsVisible"]],[s.angularAxis,["nticks"],["ticksCount"]],[s.angularAxis,["tickorientation"],["tickOrientation"]],[s.angularAxis,["ticksuffix"],["ticksSuffix"]],[s.angularAxis,["range"],["domain"]],[s.angularAxis,["endpadding"],["endPadding"]],[s.radialAxis,["showline"],["gridLinesVisible"]],[s.radialAxis,["tickorientation"],["tickOrientation"]],[s.radialAxis,["ticksuffix"],["ticksSuffix"]],[s.radialAxis,["range"],["domain"]],[s.font,["outlinecolor"],["outlineColor"]],[s.legend,["traceorder"],["reverseOrder"]],[s,["labeloffset"],["labelOffset"]],[s,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(t,n){o.util.translator.apply(null,t.concat(e))}),e?(void 0!==s.tickLength&&(s.angularaxis.ticklen=s.tickLength,delete s.tickLength),s.tickColor&&(s.angularaxis.tickcolor=s.tickColor,delete s.tickColor)):(s.angularAxis&&void 0!==s.angularAxis.ticklen&&(s.tickLength=s.angularAxis.ticklen),s.angularAxis&&void 0!==s.angularAxis.tickcolor&&(s.tickColor=s.angularAxis.tickcolor)),s.legend&&"boolean"!=typeof s.legend.reverseOrder&&(s.legend.reverseOrder="normal"!=s.legend.reverseOrder),s.legend&&"boolean"==typeof s.legend.traceorder&&(s.legend.traceorder=s.legend.traceorder?"reversed":"normal",delete s.legend.reverseOrder),s.margin&&void 0!==s.margin.t){var l=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],u={};r.entries(s.margin).forEach(function(t,e){u[c[l.indexOf(t.key)]]=t.value}),s.margin=u}e&&(delete s.needsEndSpacing,delete s.minorTickColor,delete s.minorTicks,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksStep,delete s.angularaxis.rewriteTicks,delete s.angularaxis.nticks,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksStep,delete s.radialaxis.rewriteTicks,delete s.radialaxis.nticks),n.layout=s}return n}}}},{"../../../constants/alignment":177,"../../../lib":202,d3:9}],287:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../../lib"),a=t("../../../components/color"),o=t("./micropolar"),s=t("./undo_manager"),l=i.extendDeepAll,c=e.exports={};c.framework=function(t){var e,n,i,a,u,d=new s;function h(n,s){return s&&(u=s),r.select(r.select(u).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),e=e?l(e,n):n,i||(i=o.Axis()),a=o.adapter.plotly().convert(e),i.config(a).render(u),t.data=e.data,t.layout=e.layout,c.fillLayout(t),e}return h.isPolar=!0,h.svg=function(){return i.svg()},h.getConfig=function(){return e},h.getLiveConfig=function(){return o.adapter.plotly().convert(i.getLiveConfig(),!0)},h.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},h.setUndoPoint=function(){var t,r,i=this,a=o.util.cloneJson(e);t=a,r=n,d.add({undo:function(){r&&i(r)},redo:function(){i(t)}}),n=o.util.cloneJson(a)},h.undo=function(){d.undo()},h.redo=function(){d.redo()},h},c.fillLayout=function(t){var e=r.select(t).selectAll(".plot-container"),n=e.selectAll(".svg-container"),i=t.framework&&t.framework.svg&&t.framework.svg();t._fullLayout=l({width:800,height:600,paper_bgcolor:a.background,_container:e,_paperdiv:n,_paper:i},t.layout)}},{"../../../components/color":75,"../../../lib":202,"./micropolar":286,"./undo_manager":288,d3:9}],288:[function(t,e,n){"use strict";e.exports=function(){var t,e=[],n=-1,r=!1;function i(t,e){return t?(r=!0,t[e](),r=!1,this):this}return{add:function(t){return r||(e.splice(n+1,e.length-n),e.push(t),n=e.length-1),this},setCallback:function(e){t=e},undo:function(){var r=e[n];return r?(i(r,"undo"),n-=1,t&&t(r.undo),this):this},redo:function(){var r=e[n+1];return r?(i(r,"redo"),n+=1,t&&t(r.redo),this):this},clear:function(){e=[],n=-1},hasUndo:function(){return-1!==n},hasRedo:function(){return n<e.length-1},getCommands:function(){return e},getPreviousCommand:function(){return e[n-1]},getIndex:function(){return n}}}},{}],289:[function(t,e,n){"use strict";function r(t){var e=t.description?" "+t.description:"",n=t.keys||[];if(n.length>0){for(var r=[],i=0;i<n.length;i++)r[i]="`"+n[i]+"`";e+="Finally, the template string has access to ",e=1===n.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return e}['Variables are inserted using %{variable}, for example "y: %{y}".','Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',t("../constants/docs").FORMAT_LINK,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',t("../constants/docs").DATE_FORMAT_LINK,"for details on the date formatting syntax."].join(" "),n.hovertemplateAttrs=function(t,e){t=t||{},r(e=e||{});var n={valType:"string",dflt:"",editType:t.editType||"none"};return!1!==t.arrayOk&&(n.arrayOk=!0),n},n.texttemplateAttrs=function(t,e){t=t||{},r(e=e||{});var n={valType:"string",dflt:"",editType:t.editType||"calc"};return!1!==t.arrayOk&&(n.arrayOk=!0),n}},{"../constants/docs":179}],290:[function(t,e,n){"use strict";var r=t("./lib/loggers"),i=t("./lib/noop"),a=t("./lib/push_unique"),o=t("./lib/is_plain_object"),s=t("./lib/dom").addStyleRule,l=t("./lib/extend"),c=t("./plots/attributes"),u=t("./plots/layout_attributes"),d=l.extendFlat,h=l.extendDeepAll;function f(t){var e=t.name,i=t.categories,a=t.meta;if(n.modules[e])r.log("Type "+e+" already registered");else{n.subplotsRegistry[t.basePlotModule.name]||function(t){var e=t.name;if(n.subplotsRegistry[e])r.log("Plot type "+e+" already registered.");else for(var i in v(t),n.subplotsRegistry[e]=t,n.componentsRegistry)x(i,t.name)}(t.basePlotModule);for(var o={},l=0;l<i.length;l++)o[i[l]]=!0,n.allCategories[i[l]]=!0;for(var c in n.modules[e]={_module:t,categories:o},a&&Object.keys(a).length&&(n.modules[e].meta=a),n.allTypes.push(e),n.componentsRegistry)y(c,e);t.layoutAttributes&&d(n.traceLayoutAttributes,t.layoutAttributes);var u=t.basePlotModule,h=u.name;if("mapbox"===h){var f=u.constants.styleRules;for(var p in f)s(".js-plotly-plot .plotly .mapboxgl-"+p,f[p])}"geo"!==h&&"mapbox"!==h||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function p(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var e=t.name;for(var r in n.componentsRegistry[e]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&a(n.layoutArrayContainers,e),v(t)),n.modules)y(e,r);for(var i in n.subplotsRegistry)x(e,i);for(var o in n.transformsRegistry)b(e,o);t.schema&&t.schema.layout&&h(u,t.schema.layout)}function g(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var e="Transform module "+t.name,i="function"==typeof t.transform,a="function"==typeof t.calcTransform;if(!i&&!a)throw new Error(e+" is missing a *transform* or *calcTransform* method.");for(var s in i&&a&&r.log([e+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),o(t.attributes)||r.log(e+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&r.log(e+" registered without a *supplyDefaults* method."),n.transformsRegistry[t.name]=t,n.componentsRegistry)b(s,t.name)}function m(t){var e=t.name,r=e.split("-")[0],i=t.dictionary,a=t.format,o=i&&Object.keys(i).length,s=a&&Object.keys(a).length,l=n.localeRegistry,c=l[e];if(c||(l[e]=c={}),r!==e){var u=l[r];u||(l[r]=u={}),o&&u.dictionary===c.dictionary&&(u.dictionary=i),s&&u.format===c.format&&(u.format=a)}o&&(c.dictionary=i),s&&(c.format=a)}function v(t){if(t.layoutAttributes){var e=t.layoutAttributes._arrayAttrRegexps;if(e)for(var r=0;r<e.length;r++)a(n.layoutArrayRegexes,e[r])}}function y(t,e){var r=n.componentsRegistry[t].schema;if(r&&r.traces){var i=r.traces[e];i&&h(n.modules[e]._module.attributes,i)}}function b(t,e){var r=n.componentsRegistry[t].schema;if(r&&r.transforms){var i=r.transforms[e];i&&h(n.transformsRegistry[e].attributes,i)}}function x(t,e){var r=n.componentsRegistry[t].schema;if(r&&r.subplots){var i=n.subplotsRegistry[e],a=i.layoutAttributes,o="subplot"===i.attr?i.name:i.attr;Array.isArray(o)&&(o=o[0]);var s=r.subplots[o];a&&s&&h(a,s)}}function _(t){return"object"==typeof t&&(t=t.type),t}n.modules={},n.allCategories={},n.allTypes=[],n.subplotsRegistry={},n.transformsRegistry={},n.componentsRegistry={},n.layoutArrayContainers=[],n.layoutArrayRegexes=[],n.traceLayoutAttributes={},n.localeRegistry={},n.apiMethodRegistry={},n.collectableSubplotTypes=null,n.register=function(t){if(n.collectableSubplotTypes=null,!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":f(r);break;case"transform":g(r);break;case"component":p(r);break;case"locale":m(r);break;case"apiMethod":n.apiMethodRegistry[r.name]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},n.getModule=function(t){var e=n.modules[_(t)];return!!e&&e._module},n.traceIs=function(t,e){if("various"===(t=_(t)))return!1;var i=n.modules[t];return i||(t&&"area"!==t&&r.log("Unrecognized trace type "+t+"."),i=n.modules[c.type.dflt]),!!i.categories[e]},n.getTransformIndices=function(t,e){for(var n=[],r=t.transforms||[],i=0;i<r.length;i++)r[i].type===e&&n.push(i);return n},n.hasTransform=function(t,e){for(var n=t.transforms||[],r=0;r<n.length;r++)if(n[r].type===e)return!0;return!1},n.getComponentMethod=function(t,e){var r=n.componentsRegistry[t];return r&&r[e]||i},n.call=function(){var t=arguments[0],e=[].slice.call(arguments,1);return n.apiMethodRegistry[t].apply(null,e)}},{"./lib/dom":194,"./lib/extend":196,"./lib/is_plain_object":203,"./lib/loggers":206,"./lib/noop":211,"./lib/push_unique":216,"./plots/attributes":244,"./plots/layout_attributes":280}],291:[function(t,e,n){"use strict";var r=t("../registry"),i=t("../lib"),a=i.extendFlat,o=i.extendDeep;function s(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}e.exports=function(t,e){var n;t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var i=t.layout,l=o([],t.data),c=o({},i,s(e.tileClass)),u=t._context||{};if(e.width&&(c.width=e.width),e.height&&(c.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){c.annotations=[];var d=Object.keys(c);for(n=0;n<d.length;n++)["xaxis","yaxis","zaxis"].indexOf(d[n].slice(0,5))>-1&&(c[d[n]].title={text:""});for(n=0;n<l.length;n++){var h=l[n];h.showscale=!1,h.marker&&(h.marker.showscale=!1),r.traceIs(h,"pie-like")&&(h.textposition="none")}}if(Array.isArray(e.annotations))for(n=0;n<e.annotations.length;n++)c.annotations.push(e.annotations[n]);var f=Object.keys(c).filter(function(t){return t.match(/^scene\d*$/)});if(f.length){var p={};for("thumbnail"===e.tileClass&&(p={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<f.length;n++){var g=c[f[n]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),a(g.xaxis,p),a(g.yaxis,p),a(g.zaxis,p),g._scene=null}}var m=document.createElement("div");e.tileClass&&(m.className=e.tileClass);var v={gd:m,td:m,layout:c,data:l,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return"transparent"!==e.setBackground&&(v.config.setBackground=e.setBackground||"opaque"),v.gd.defaultLayout=s(e.tileClass),v}},{"../lib":202,"../registry":290}],292:[function(t,e,n){"use strict";var r=t("../lib"),i=t("../plot_api/to_image"),a=t("./filesaver"),o=t("./helpers");e.exports=function(t,e){var n;return r.isPlainObject(t)||(n=r.getGraphDiv(t)),(e=e||{}).format=e.format||"png",e.width=e.width||null,e.height=e.height||null,e.imageDataOnly=!0,new Promise(function(s,l){n&&n._snapshotInProgress&&l(new Error("Snapshotting already in progress.")),r.isIE()&&"svg"!==e.format&&l(new Error(o.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var c=i(t,e),u=e.filename||t.fn||"newplot";u+="."+e.format.replace("-","."),c.then(function(t){return n&&(n._snapshotInProgress=!1),a(t,u,e.format)}).then(function(t){s(t)}).catch(function(t){n&&(n._snapshotInProgress=!1),l(t)})})}},{"../lib":202,"../plot_api/to_image":240,"./filesaver":293,"./helpers":294}],293:[function(t,e,n){"use strict";var r=t("../lib"),i=t("./helpers");e.exports=function(t,e,n){var a=document.createElement("a"),o="download"in a;return new Promise(function(s,l){var c,u;return r.isIE9orBelow()&&l(new Error("IE < 10 unsupported")),r.isSafari()?(i.octetStream(("svg"===n?",":";base64,")+encodeURIComponent(t)),s(e)):r.isIE()?(c=i.createBlob(t,"svg"),window.navigator.msSaveBlob(c,e),c=null,s(e)):o?(c=i.createBlob(t,n),u=i.createObjectURL(c),a.href=u,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),i.revokeObjectURL(u),c=null,s(e)):void l(new Error("download error"))})}},{"../lib":202,"./helpers":294}],294:[function(t,e,n){"use strict";var r=t("../registry");n.getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},n.getRedrawFunc=function(t){return function(){var e=t._fullLayout||{};(!e._has||!e._has("polar"))&&t.data&&t.data[0]&&t.data[0].r||r.getComponentMethod("colorbar","draw")(t)}},n.encodeSVG=function(t){return"data:image/svg+xml,"+encodeURIComponent(t)},n.encodeJSON=function(t){return"data:application/json,"+encodeURIComponent(t)};var i=window.URL||window.webkitURL;n.createObjectURL=function(t){return i.createObjectURL(t)},n.revokeObjectURL=function(t){return i.revokeObjectURL(t)},n.createBlob=function(t,e){if("svg"===e)return new window.Blob([t],{type:"image/svg+xml;charset=utf-8"});if("full-json"===e)return new window.Blob([t],{type:"application/json;charset=utf-8"});var n=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}(window.atob(t));return new window.Blob([n],{type:"image/"+e})},n.octetStream=function(t){document.location.href="data:application/octet-stream"+t},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":290}],295:[function(t,e,n){"use strict";var r=t("./helpers"),i={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};e.exports=i},{"./cloneplot":291,"./download":292,"./helpers":294,"./svgtoimg":296,"./toimage":297,"./tosvg":298}],296:[function(t,e,n){"use strict";var r=t("../lib"),i=t("events").EventEmitter,a=t("./helpers");e.exports=function(t){var e=t.emitter||new i,n=new Promise(function(i,o){var s=window.Image,l=t.svg,c=t.format||"png";if(r.isIE()&&"svg"!==c){var u=new Error(a.MSG_IE_BAD_FORMAT);return o(u),t.promise?n:e.emit("error",u)}var d,h,f=t.canvas,p=t.scale||1,g=p*(t.width||300),m=p*(t.height||150),v=f.getContext("2d"),y=new s;"svg"===c||r.isIE9orBelow()||r.isSafari()?h=a.encodeSVG(l):(d=a.createBlob(l,"svg"),h=a.createObjectURL(d)),f.width=g,f.height=m,y.onload=function(){var n;switch(d=null,a.revokeObjectURL(h),"svg"!==c&&v.drawImage(y,0,0,g,m),c){case"jpeg":n=f.toDataURL("image/jpeg");break;case"png":n=f.toDataURL("image/png");break;case"webp":n=f.toDataURL("image/webp");break;case"svg":n=h;break;default:var r="Image format is not jpeg, png, svg or webp.";if(o(new Error(r)),!t.promise)return e.emit("error",r)}i(n),t.promise||e.emit("success",n)},y.onerror=function(n){if(d=null,a.revokeObjectURL(h),o(n),!t.promise)return e.emit("error",n)},y.src=h});return t.promise?n:e}},{"../lib":202,"./helpers":294,events:6}],297:[function(t,e,n){"use strict";var r=t("events").EventEmitter,i=t("../registry"),a=t("../lib"),o=t("./helpers"),s=t("./cloneplot"),l=t("./tosvg"),c=t("./svgtoimg");e.exports=function(t,e){var n=new r,u=s(t,{format:"png"}),d=u.gd;d.style.position="absolute",d.style.left="-5000px",document.body.appendChild(d);var h=o.getRedrawFunc(d);return i.call("plot",d,u.data,u.layout,u.config).then(h).then(function(){var t=o.getDelay(d._fullLayout);setTimeout(function(){var t=l(d),r=document.createElement("canvas");r.id=a.randstr(),(n=c({format:e.format,width:d._fullLayout.width,height:d._fullLayout.height,canvas:r,emitter:n,svg:t})).clean=function(){d&&document.body.removeChild(d)}},t)}).catch(function(t){n.emit("error",t)}),n}},{"../lib":202,"../registry":290,"./cloneplot":291,"./helpers":294,"./svgtoimg":296,"./tosvg":298,events:6}],298:[function(t,e,n){"use strict";var r=t("d3"),i=t("../lib"),a=t("../components/drawing"),o=t("../components/color"),s=t("../constants/xmlns_namespaces"),l=/"/g,c=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");e.exports=function(t,e,n){var u,d=t._fullLayout,h=d._paper,f=d._toppaper,p=d.width,g=d.height;h.insert("rect",":first-child").call(a.setRect,0,0,p,g).call(o.fill,d.paper_bgcolor);var m=d._basePlotModules||[];for(u=0;u<m.length;u++){var v=m[u];v.toSVG&&v.toSVG(t)}if(f){var y=f.node().childNodes,b=Array.prototype.slice.call(y);for(u=0;u<b.length;u++){var x=b[u];x.childNodes.length&&h.node().appendChild(x)}}if(d._draggers&&d._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var t=r.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(l,"TOBESTRIPPED"))}else t.remove()}),d._gradientUrlQueryParts){var _=[];for(var w in d._gradientUrlQueryParts)_.push(w);_.length&&h.selectAll(_.join(",")).each(function(){var t=r.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(l,"TOBESTRIPPED"));var n=this.style.stroke;n&&-1!==n.indexOf("url(")&&t.style("stroke",n.replace(l,"TOBESTRIPPED"))})}"pdf"!==e&&"eps"!==e||h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(s.xmlns,"xmlns",s.svg),h.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===e&&n&&(h.attr("width",n*p),h.attr("height",n*g),h.attr("viewBox","0 0 "+p+" "+g));var k=(new window.XMLSerializer).serializeToString(h.node());return k=(k=(k=function(t){var e=r.select("body").append("div").style({display:"none"}).html(""),n=t.replace(/(&[^;]*;)/gi,function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":e.html(t).text()});return e.remove(),n}(k)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(c,"'"),i.isIE()&&(k=(k=(k=k.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),k}},{"../components/color":75,"../components/drawing":97,"../constants/xmlns_namespaces":182,"../lib":202,d3:9}],299:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;r.mergeArray(e.text,t,"tx"),r.mergeArray(e.hovertext,t,"htx");var i=e.marker;if(i){r.mergeArray(i.opacity,t,"mo",!0),r.mergeArray(i.color,t,"mc");var a=i.line;a&&(r.mergeArray(a.color,t,"mlc"),r.mergeArrayCastPositive(a.width,t,"mlw"))}}},{"../../lib":202}],300:[function(t,e,n){"use strict";var r=t("../scatter/attributes"),i=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,o=t("../../components/colorscale/attributes"),s=t("../../plots/font_attributes"),l=t("./constants"),c=t("../../lib/extend").extendFlat,u=s({editType:"calc",arrayOk:!0,colorEditType:"style"}),d=c({},r.marker.line.width,{dflt:0}),h=c({width:d,editType:"calc"},o("marker.line")),f=c({line:h,editType:"calc"},o("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,texttemplate:a({editType:"plot"},{keys:l.eventDataKeys}),hovertext:r.hovertext,hovertemplate:i({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:c({},u,{}),insidetextfont:c({},u,{}),outsidetextfont:c({},u,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:c({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:f,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":82,"../../lib/extend":196,"../../plots/font_attributes":276,"../../plots/template_attributes":289,"../scatter/attributes":330,"./constants":302}],301:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axes"),i=t("../../plots/cartesian/align_period"),a=t("../../components/colorscale/helpers").hasColorscale,o=t("../../components/colorscale/calc"),s=t("./arrays_to_calcdata"),l=t("../scatter/calc_selection");e.exports=function(t,e){var n,c,u,d,h=r.getFromId(t,e.xaxis||"x"),f=r.getFromId(t,e.yaxis||"y"),p={msUTC:!(!e.base&&0!==e.base)};"h"===e.orientation?(n=h.makeCalcdata(e,"x",p),u=f.makeCalcdata(e,"y"),c=i(e,f,"y",u),d=!!e.yperiodalignment):(n=f.makeCalcdata(e,"y",p),u=h.makeCalcdata(e,"x"),c=i(e,h,"x",u),d=!!e.xperiodalignment);for(var g=Math.min(c.length,n.length),m=new Array(g),v=0;v<g;v++)m[v]={p:c[v],s:n[v]},d&&(m[v].orig_p=u[v]),e.ids&&(m[v].id=String(e.ids[v]));return a(e,"marker")&&o(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),a(e,"marker.line")&&o(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}),s(m,e),l(m,e),m}},{"../../components/colorscale/calc":83,"../../components/colorscale/helpers":86,"../../plots/cartesian/align_period":245,"../../plots/cartesian/axes":248,"../scatter/calc_selection":332,"./arrays_to_calcdata":299}],302:[function(t,e,n){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],303:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib").isArrayOrTypedArray,a=t("../../constants/numerical").BADNUM,o=t("../../registry"),s=t("../../plots/cartesian/axes"),l=t("../../plots/cartesian/constraints").getAxisGroup,c=t("./sieve.js");function u(t,e,n,o,u){if(o.length){var x,_,w,k;switch(function(t,e){var n,a;for(n=0;n<e.length;n++){var o,s=e[n],l=s[0].trace,c="funnel"===l.type?l._base:l.base,u="h"===l.orientation?l.xcalendar:l.ycalendar,d="category"===t.type||"multicategory"===t.type?function(){return null}:t.d2c;if(i(c)){for(a=0;a<Math.min(c.length,s.length);a++)o=d(c[a],0,u),r(o)?(s[a].b=+o,s[a].hasB=1):s[a].b=0;for(;a<s.length;a++)s[a].b=0}else{o=d(c,0,u);var h=r(o);for(o=h?o:0,a=0;a<s.length;a++)s[a].b=o,h&&(s[a].hasB=1)}}}(n,o),u.mode){case"overlay":d(e,n,o,u);break;case"group":for(x=[],_=[],w=0;w<o.length;w++)void 0===(k=o[w])[0].trace.offset?_.push(k):x.push(k);_.length&&function(t,e,n,r,i){var o=new c(r,{sepNegVal:!1,overlapNoMerge:!i.norm});(function(t,e,n,r){for(var i=t._fullLayout,a=n.minDiff,o=n.traces,s=o.length,c=n.positions.length!==n.distinctPositions.length,u=a*(1-r.gap),d=l(i,e._id)+o[0][0].trace.orientation,h=i._alignmentOpts[d]||{},m=0;m<s;m++){var v,y,b=o[m],x=b[0].trace,_=Object.keys((h[x.alignmentgroup]||{}).offsetGroups||{}).length,w=(v=_?u/_:c?u/s:u)*(1-(r.groupgap||0));y=_?((2*x._offsetIndex+1-_)*v-w)/2:c?((2*m+1-s)*v-w)/2:-w/2;var k=b[0].t;k.barwidth=w,k.poffset=y,k.bargroupwidth=u,k.bardelta=a}n.binWidth=o[0][0].t.barwidth/100,f(n),p(e,n),g(e,n,c)})(t,e,o,i),function(t){for(var e=t.traces,n=0;n<e.length;n++){var r=e[n];if(void 0===r[0].trace.base)for(var i=new c([r],{sepNegVal:!0,overlapNoMerge:!0}),o=0;o<r.length;o++){var s=r[o];if(s.p!==a){var l=i.put(s.p,s.b+s.s);l&&(s.b=l)}}}}(o),i.norm?(v(o),y(n,o,i)):m(n,o)}(t,e,n,_,u),x.length&&d(e,n,x,u);break;case"stack":case"relative":for(x=[],_=[],w=0;w<o.length;w++)void 0===(k=o[w])[0].trace.base?_.push(k):x.push(k);_.length&&function(t,e,n,r,i){var o=new c(r,{sepNegVal:"relative"===i.mode,overlapNoMerge:!(i.norm||"stack"===i.mode||"relative"===i.mode)});h(e,o,i),function(t,e,n){var r,i,o,l,c,u,d=b(t),h=e.traces;for(l=0;l<h.length;l++)if("funnel"===(i=(r=h[l])[0].trace).type)for(c=0;c<r.length;c++)(u=r[c]).s!==a&&e.put(u.p,-.5*u.s);for(l=0;l<h.length;l++){o="funnel"===(i=(r=h[l])[0].trace).type;var f=[];for(c=0;c<r.length;c++)if((u=r[c]).s!==a){var p,g=e.put(u.p,p=o?u.s:u.s+u.b),m=g+p;u.b=g,u[d]=m,n.norm||(f.push(m),u.hasB&&f.push(g))}n.norm||(i._extremes[t._id]=s.findExtremes(t,f,{tozero:!0,padded:!0}))}}(n,o,i);for(var l=0;l<r.length;l++)for(var u=r[l],d=0;d<u.length;d++){var f=u[d];f.s!==a&&f.b+f.s===o.get(f.p,f.s)&&(f._outmost=!0)}i.norm&&y(n,o,i)}(0,e,n,_,u),x.length&&d(e,n,x,u)}!function(t,e){var n,i,a,o=b(e),s={},l=1/0,c=-1/0;for(n=0;n<t.length;n++)for(a=t[n],i=0;i<a.length;i++){var u=a[i].p;r(u)&&(l=Math.min(l,u),c=Math.max(c,u))}var d=1e4/(c-l),h=s.round=function(t){return String(Math.round(d*(t-l)))};for(n=0;n<t.length;n++){(a=t[n])[0].t.extents=s;var f=a[0].t.poffset,p=Array.isArray(f);for(i=0;i<a.length;i++){var g=a[i],m=g[o]-g.w/2;if(r(m)){var v=g[o]+g.w/2,y=h(g.p);s[y]=s[y]?[Math.min(m,s[y][0]),Math.max(v,s[y][1])]:[m,v]}g.p0=g.p+(p?f[i]:f),g.p1=g.p0+g.w,g.s0=g.b,g.s1=g.s0+g.s}}}(o,e)}}function d(t,e,n,r){for(var i=0;i<n.length;i++){var a=new c([n[i]],{unitMinDiff:r.xCat||r.yCat,sepNegVal:!1,overlapNoMerge:!r.norm});h(t,a,r),r.norm?(v(a),y(e,a,r)):m(e,a)}}function h(t,e,n){for(var r=e.minDiff,i=e.traces,a=r*(1-n.gap),o=a*(1-(n.groupgap||0)),s=-o/2,l=0;l<i.length;l++){var c=i[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=a,c.bardelta=r}e.binWidth=i[0][0].t.barwidth/100,f(e),p(t,e),g(t,e)}function f(t){var e,n,a=t.traces;for(e=0;e<a.length;e++){var o,s=a[e],l=s[0],c=l.trace,u=l.t,d=c._offset||c.offset,h=u.poffset;if(i(d)){for(o=Array.prototype.slice.call(d,0,s.length),n=0;n<o.length;n++)r(o[n])||(o[n]=h);for(n=o.length;n<s.length;n++)o.push(h);u.poffset=o}else void 0!==d&&(u.poffset=d);var f=c._width||c.width,p=u.barwidth;if(i(f)){var g=Array.prototype.slice.call(f,0,s.length);for(n=0;n<g.length;n++)r(g[n])||(g[n]=p);for(n=g.length;n<s.length;n++)g.push(p);if(u.barwidth=g,void 0===d){for(o=[],n=0;n<s.length;n++)o.push(h+(p-g[n])/2);u.poffset=o}}else void 0!==f&&(u.barwidth=f,void 0===d&&(u.poffset=h+(p-f)/2))}}function p(t,e){for(var n=e.traces,r=b(t),i=0;i<n.length;i++)for(var a=n[i],o=a[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),d=0;d<a.length;d++){var h=a[d],f=h.w=u?c[d]:c;h[r]=h.p+(l?s[d]:s)+f/2}}function g(t,e,n){var r=e.traces,i=e.minDiff/2;s.minDtick(t,e.minDiff,e.distinctPositions[0],n);for(var a=0;a<r.length;a++){var o,l,c,u,d=r[a],h=d[0],f=h.trace,p=[];for(u=0;u<d.length;u++)l=(o=d[u]).p-i,p.push(l,c=o.p+i);if(f.width||f.offset){var g=h.t,m=g.poffset,v=g.barwidth,y=Array.isArray(m),b=Array.isArray(v);for(u=0;u<d.length;u++)c=(l=(o=d[u]).p+(y?m[u]:m))+(b?v[u]:v),p.push(l,c)}f._extremes[t._id]=s.findExtremes(t,p,{padded:!1})}}function m(t,e){for(var n=e.traces,r=b(t),i=0;i<n.length;i++){for(var a=n[i],o=a[0].trace,l=[],c=!1,u=0;u<a.length;u++){var d=a[u],h=d.b,f=h+d.s;d[r]=f,l.push(f),d.hasB&&l.push(h),d.hasB&&d.b||(c=!0)}o._extremes[t._id]=s.findExtremes(t,l,{tozero:c,padded:!0})}}function v(t){for(var e=t.traces,n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++){var o=r[i];o.s!==a&&t.put(o.p,o.b+o.s)}}function y(t,e,n){var i=e.traces,o=b(t),l="fraction"===n.norm?1:100,c=l/1e9,u=t.l2c(t.c2l(0)),d="stack"===n.mode?l:u;function h(e){return r(t.c2l(e))&&(e<u-c||e>d+c||!r(u))}for(var f=0;f<i.length;f++){for(var p=i[f],g=p[0].trace,m=[],v=!1,y=!1,x=0;x<p.length;x++){var _=p[x];if(_.s!==a){var w=Math.abs(l/e.get(_.p,_.s));_.b*=w,_.s*=w;var k=_.b,T=k+_.s;_[o]=T,m.push(T),y=y||h(T),_.hasB&&(m.push(k),y=y||h(k)),_.hasB&&_.b||(v=!0)}}g._extremes[t._id]=s.findExtremes(t,m,{tozero:v,padded:y})}}function b(t){return t._id.charAt(0)}e.exports={crossTraceCalc:function(t,e){for(var n=e.xaxis,r=e.yaxis,i=t._fullLayout,a=t._fullData,s=t.calcdata,l=[],c=[],d=0;d<a.length;d++){var h=a[d];if(!0===h.visible&&o.traceIs(h,"bar")&&h.xaxis===n._id&&h.yaxis===r._id&&("h"===h.orientation?l.push(s[d]):c.push(s[d]),h._computePh))for(var f=t.calcdata[d],p=0;p<f.length;p++)"function"==typeof f[p].ph0&&(f[p].ph0=f[p].ph0()),"function"==typeof f[p].ph1&&(f[p].ph1=f[p].ph1())}var g={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap};u(t,n,r,c,g),u(t,r,n,l,g)},setGroupPositions:u}},{"../../constants/numerical":181,"../../lib":202,"../../plots/cartesian/axes":248,"../../plots/cartesian/constraints":255,"../../registry":290,"./sieve.js":313,"fast-isnumeric":11}],304:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../components/color"),a=t("../../registry"),o=t("../scatter/xy_defaults"),s=t("../scatter/period_defaults"),l=t("./style_defaults"),c=t("../../plots/cartesian/constraints").getAxisGroup,u=t("./attributes"),d=r.coerceFont;function h(t,e,n,r){var i=e.orientation,a=c(n,e[{v:"x",h:"y"}[i]+"axis"])+i,o=n._alignmentOpts||{},s=r("alignmentgroup"),l=o[a];l||(l=o[a]={});var u=l[s];u?u.traces.push(e):u=l[s]={traces:[e],alignmentIndex:Object.keys(l).length,offsetGroups:{}};var d=r("offsetgroup"),h=u.offsetGroups,f=h[d];d&&(f||(f=h[d]={offsetIndex:Object.keys(h).length}),e._offsetIndex=f.offsetIndex)}function f(t,e,n,i,a,o){var s=!(!1===(o=o||{}).moduleHasSelected),l=!(!1===o.moduleHasUnselected),c=!(!1===o.moduleHasConstrain),u=!(!1===o.moduleHasCliponaxis),h=!(!1===o.moduleHasTextangle),f=!(!1===o.moduleHasInsideanchor),p=!!o.hasPathbar,g=Array.isArray(a)||"auto"===a,m=g||"inside"===a,v=g||"outside"===a;if(m||v){var y=d(i,"textfont",n.font),b=r.extendFlat({},y),x=!(t.textfont&&t.textfont.color);if(x&&delete b.color,d(i,"insidetextfont",b),p){var _=r.extendFlat({},y);x&&delete _.color,d(i,"pathbar.textfont",_)}v&&d(i,"outsidetextfont",y),s&&i("selected.textfont.color"),l&&i("unselected.textfont.color"),c&&i("constraintext"),u&&i("cliponaxis"),h&&i("textangle"),i("texttemplate")}m&&f&&i("insidetextanchor")}e.exports={supplyDefaults:function(t,e,n,c){function d(n,i){return r.coerce(t,e,u,n,i)}if(o(t,e,c,d)){s(t,e,c,d),d("orientation",e.x&&!e.y?"h":"v"),d("base"),d("offset"),d("width"),d("text"),d("hovertext"),d("hovertemplate");var h=d("textposition");f(t,0,c,d,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l(t,e,d,n,c);var p=(e.marker.line||{}).color,g=a.getComponentMethod("errorbars","supplyDefaults");g(t,e,p||i.defaultLine,{axis:"y"}),g(t,e,p||i.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(e,d)}else e.visible=!1},crossTraceDefaults:function(t,e){var n;function i(t){return r.coerce(n._input,n,u,t)}if("group"===e.barmode)for(var a=0;a<t.length;a++)"bar"===(n=t[a]).type&&h(0,n,e,i)},handleGroupingDefaults:h,handleText:f}},{"../../components/color":75,"../../lib":202,"../../plots/cartesian/constraints":255,"../../registry":290,"../scatter/period_defaults":350,"../scatter/xy_defaults":357,"./attributes":300,"./style_defaults":315}],305:[function(t,e,n){"use strict";e.exports=function(t,e,n){return t.x="xVal"in e?e.xVal:e.x,t.y="yVal"in e?e.yVal:e.y,e.xa&&(t.xaxis=e.xa),e.ya&&(t.yaxis=e.ya),"h"===n.orientation?(t.label=t.y,t.value=t.x):(t.label=t.x,t.value=t.y),t}},{}],306:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("tinycolor2"),a=t("../../lib").isArrayOrTypedArray;n.coerceString=function(t,e,n){if("string"==typeof e){if(e||!t.noBlank)return e}else if(("number"==typeof e||!0===e)&&!t.strict)return String(e);return void 0!==n?n:t.dflt},n.coerceNumber=function(t,e,n){if(r(e)){e=+e;var i=t.min,a=t.max;if(!(void 0!==i&&e<i||void 0!==a&&e>a))return e}return void 0!==n?n:t.dflt},n.coerceColor=function(t,e,n){return i(e).isValid()?e:void 0!==n?n:t.dflt},n.coerceEnumerated=function(t,e,n){return t.coerceNumber&&(e=+e),-1!==t.values.indexOf(e)?e:void 0!==n?n:t.dflt},n.getValue=function(t,e){var n;return Array.isArray(t)?e<t.length&&(n=t[e]):n=t,n},n.getLineWidth=function(t,e){return 0<e.mlw?e.mlw:a(t.marker.line.width)?0:t.marker.line.width}},{"../../lib":202,"fast-isnumeric":11,tinycolor2:58}],307:[function(t,e,n){"use strict";var r=t("../../components/fx"),i=t("../../registry"),a=t("../../components/color"),o=t("../../lib").fillText,s=t("./helpers").getLineWidth,l=t("../../plots/cartesian/axes").hoverLabelText,c=t("../../constants/numerical").BADNUM;function u(t,e,n,i){var a,s,u,d,h,f,p,g=t.cd,m=g[0].trace,v=g[0].t,y="closest"===i,b="waterfall"===m.type,x=t.maxHoverDistance;function _(t){return t[u]-t.w/2}function w(t){return t[u]+t.w/2}var k=y?_:function(t){return Math.min(_(t),t.p-v.bardelta/2)},T=y?w:function(t){return Math.max(w(t),t.p+v.bardelta/2)};function M(t,e){return r.inbox(t-a,e-a,x+Math.min(1,Math.abs(e-t)/p)-1)}function A(t){return M(k(t),T(t))}function C(t){var e=s,n=t.b,i=t[d];if(b){var a=Math.abs(t.rawS)||0;e>0?i+=a:e<0&&(i-=a)}return r.inbox(n-e,i-e,x+(i-e)/(i-n)-1)}"h"===m.orientation?(a=n,s=e,u="y",d="x",h=C,f=A):(a=e,s=n,u="x",d="y",f=C,h=A);var S=t[u+"a"],D=t[d+"a"];p=Math.abs(S.r2c(S.range[1])-S.r2c(S.range[0]));var O=r.getDistanceFunction(i,h,f,function(t){return(h(t)+f(t))/2});if(r.getClosest(g,O,t),!1!==t.index&&g[t.index].p!==c){y||(k=function(t){return Math.min(_(t),t.p-v.bargroupwidth/2)},T=function(t){return Math.max(w(t),t.p+v.bargroupwidth/2)});var E=g[t.index],L=m.base?E.b+E.s:E.s;t[d+"0"]=t[d+"1"]=D.c2p(E[d],!0),t[d+"LabelVal"]=L;var P=v.extents[v.extents.round(E.p)];return t[u+"0"]=S.c2p(y?k(E):P[0],!0),t[u+"1"]=S.c2p(y?T(E):P[1],!0),t[u+"LabelVal"]=void 0!==E.orig_p?E.orig_p:E.p,t.labelLabel=l(S,t[u+"LabelVal"]),t.valueLabel=l(D,t[d+"LabelVal"]),t.baseLabel=l(D,E.b),t.spikeDistance=(C(E)+function(t){return M(_(t),w(t))}(E))/2-x,t[u+"Spike"]=S.c2p(E.p,!0),o(E,m,t),t.hovertemplate=m.hovertemplate,t}}function d(t,e){var n=e.mcc||t.marker.color,r=e.mlcc||t.marker.line.color,i=s(t,e);return a.opacity(n)?n:a.opacity(r)&&i?r:void 0}e.exports={hoverPoints:function(t,e,n,r){var a=u(t,e,n,r);if(a){var o=a.cd,s=o[0].trace,l=o[a.index];return a.color=d(s,l),i.getComponentMethod("errorbars","hoverInfo")(l,s,a),[a]}},hoverOnBars:u,getTraceColor:d}},{"../../components/color":75,"../../components/fx":115,"../../constants/numerical":181,"../../lib":202,"../../plots/cartesian/axes":248,"../../registry":290,"./helpers":306}],308:[function(t,e,n){"use strict";e.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,colorbar:t("../scatter/marker_colorbar"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"bar",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":261,"../scatter/marker_colorbar":348,"./arrays_to_calcdata":299,"./attributes":300,"./calc":301,"./cross_trace_calc":303,"./defaults":304,"./event_data":305,"./hover":307,"./layout_attributes":309,"./layout_defaults":310,"./plot":311,"./select":312,"./style":314}],309:[function(t,e,n){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],310:[function(t,e,n){"use strict";var r=t("../../registry"),i=t("../../plots/cartesian/axes"),a=t("../../lib"),o=t("./layout_attributes");e.exports=function(t,e,n){function s(n,r){return a.coerce(t,e,o,n,r)}for(var l=!1,c=!1,u=!1,d={},h=s("barmode"),f=0;f<n.length;f++){var p=n[f];if(r.traceIs(p,"bar")&&p.visible){if(l=!0,"group"===h){var g=p.xaxis+p.yaxis;d[g]&&(u=!0),d[g]=!0}p.visible&&"histogram"===p.type&&"category"!==i.getFromId({_fullLayout:e},p["v"===p.orientation?"xaxis":"yaxis"]).type&&(c=!0)}}l?("overlay"!==h&&s("barnorm"),s("bargap",c&&!u?0:.2),s("bargroupgap")):delete e.barmode}},{"../../lib":202,"../../plots/cartesian/axes":248,"../../registry":290,"./layout_attributes":309}],311:[function(t,e,n){"use strict";var r=t("d3"),i=t("fast-isnumeric"),a=t("../../lib"),o=t("../../lib/svg_text_utils"),s=t("../../components/color"),l=t("../../components/drawing"),c=t("../../registry"),u=t("../../plots/cartesian/axes").tickText,d=t("./uniform_text"),h=d.recordMinTextSize,f=d.clearMinTextSize,p=t("./style"),g=t("./helpers"),m=t("./constants"),v=t("./attributes"),y=v.text,b=v.textposition,x=t("../../components/fx/helpers").appendArrayPointValue,_=m.TEXTPAD;function w(t){return t.id}function k(t){if(t.ids)return w}function T(t,e){return t<e?1:-1}function M(t,e,n,r){var i;return!e.uniformtext.mode&&A(n)?(r&&(i=r()),t.transition().duration(n.duration).ease(n.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()})):t}function A(t){return t&&t.duration>0}function C(t){return"auto"===t?0:t}function S(t,e){var n=Math.PI/180*e,r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));return{x:t.width*i+t.height*r,y:t.width*r+t.height*i}}function D(t,e,n,r,i,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,c=a.anchor||"end",u="end"===c,d="start"===c,h=((a.leftToRight||0)+1)/2,f=1-h,p=i.width,g=i.height,m=Math.abs(e-t),v=Math.abs(r-n),y=m>2*_&&v>2*_?_:0;m-=2*y,v-=2*y;var b=C(l);"auto"!==l||p<=m&&g<=v||!(p>m||g>v)||(p>v||g>m)&&p<g==m<v||(b+=90);var x=S(i,b),w=1;s&&(w=Math.min(1,m/x.x,v/x.y));var k=i.left*f+i.right*h,M=(i.top+i.bottom)/2,A=(t+_)*f+(e-_)*h,D=(n+r)/2,O=0,E=0;if(d||u){var L=(o?x.x:x.y)/2,P=o?T(t,e):T(n,r);o?d?(A=t+P*y,O=-P*L):(A=e-P*y,O=P*L):d?(D=n+P*y,E=-P*L):(D=r-P*y,E=P*L)}return{textX:k,textY:M,targetX:A,targetY:D,anchorX:O,anchorY:E,scale:w,rotate:b}}e.exports={plot:function(t,e,n,d,m,v){var w=e.xaxis,O=e.yaxis,E=t._fullLayout;m||(m={mode:E.barmode,norm:E.barmode,gap:E.bargap,groupgap:E.bargroupgap},f("bar",E));var L=a.makeTraceGroups(d,n,"trace bars").each(function(n){var c=r.select(this),d=n[0].trace,f="bar"===d.type||"funnel"===d.type,L=0;"waterfall"===d.type&&d.connector.visible&&"between"===d.connector.mode&&(L=d.connector.line.width/2);var P="h"===d.orientation,I=A(m),R=a.ensureSingle(c,"g","points"),N=k(d),F=R.selectAll("g.point").data(a.identity,N);F.enter().append("g").classed("point",!0),F.exit().remove(),F.each(function(c,k){var A,R,N=r.select(this),F=function(t,e,n,r){var i=[],a=[],o=r?e:n,s=r?n:e;return i[0]=o.c2p(t.s0,!0),a[0]=s.c2p(t.p0,!0),i[1]=o.c2p(t.s1,!0),a[1]=s.c2p(t.p1,!0),r?[i,a]:[a,i]}(c,w,O,P),z=F[0][0],V=F[0][1],H=F[1][0],j=F[1][1],B=0==(P?V-z:j-H);if(B&&f&&g.getLineWidth(d,c)&&(B=!1),B||(B=!(i(z)&&i(V)&&i(H)&&i(j))),c.isBlank=B,B&&(P?V=z:j=H),L&&!B&&(P?(z-=T(z,V)*L,V+=T(z,V)*L):(H-=T(H,j)*L,j+=T(H,j)*L)),"waterfall"===d.type){if(!B){var U=d[c.dir].marker;A=U.line.width,R=U.color}}else A=g.getLineWidth(d,c),R=c.mc||d.marker.color;function q(t){var e=r.round(A/2%1,2);return 0===m.gap&&0===m.groupgap?r.round(Math.round(t)-e,2):t}if(!t._context.staticPlot){var G=s.opacity(R)<1||A>.01?q:function(t,e,n){return n&&t===e?t:Math.abs(t-e)>=2?q(t):t>e?Math.ceil(t):Math.floor(t)};z=G(z,V,P),V=G(V,z,P),H=G(H,j,!P),j=G(j,H,!P)}var Z=M(a.ensureSingle(N,"path"),E,m,v);if(Z.style("vector-effect","non-scaling-stroke").attr("d",isNaN((V-z)*(j-H))||B&&t._context.staticPlot?"M0,0Z":"M"+z+","+H+"V"+j+"H"+V+"V"+H+"Z").call(l.setClipUrl,e.layerClipId,t),!E.uniformtext.mode&&I){var W=l.makePointStyleFns(d);l.singlePointStyle(c,Z,d,W,t)}!function(t,e,n,r,i,s,c,d,f,m,v){var w,k=e.xaxis,A=e.yaxis,O=t._fullLayout;function E(e,n,r){return a.ensureSingle(e,"text").text(n).attr({class:"bartext bartext-"+w,"text-anchor":"middle","data-notex":1}).call(l.font,r).call(o.convertToTspans,t)}var L=r[0].trace,P="h"===L.orientation,I=function(t,e,n,r,i){var o,s=e[0].trace;return o=s.texttemplate?function(t,e,n,r,i){var o=e[0].trace,s=a.castOption(o,n,"texttemplate");if(!s)return"";var l,c,d,h,f="waterfall"===o.type,p="funnel"===o.type;function g(t){return u(h,+t,!0).text}"h"===o.orientation?(l="y",c=i,d="x",h=r):(l="x",c=r,d="y",h=i);var m=e[n],v={};v.label=m.p,v.labelLabel=v[l+"Label"]=u(c,m.p,!0).text;var y=a.castOption(o,m.i,"text");(0===y||y)&&(v.text=y),v.value=m.s,v.valueLabel=v[d+"Label"]=g(m.s);var b={};x(b,o,m.i),f&&(v.delta=+m.rawS||m.s,v.deltaLabel=g(v.delta),v.final=m.v,v.finalLabel=g(v.final),v.initial=v.final-v.delta,v.initialLabel=g(v.initial)),p&&(v.value=m.s,v.valueLabel=g(v.value),v.percentInitial=m.begR,v.percentInitialLabel=a.formatPercent(m.begR),v.percentPrevious=m.difR,v.percentPreviousLabel=a.formatPercent(m.difR),v.percentTotal=m.sumR,v.percenTotalLabel=a.formatPercent(m.sumR));var _=a.castOption(o,m.i,"customdata");return _&&(v.customdata=_),a.texttemplateString(s,v,t._d3locale,b,v,o._meta||{})}(t,e,n,r,i):s.textinfo?function(t,e,n,r){var i=t[0].trace,o="h"===i.orientation,s="waterfall"===i.type,l="funnel"===i.type;function c(t){return u(o?n:r,+t,!0).text}var d,h=t[e],f=i.textinfo.split("+"),p=[],g=function(t){return-1!==f.indexOf(t)};if(g("label")&&p.push(u(o?r:n,t[e].p,!0).text),g("text")&&(0===(d=a.castOption(i,h.i,"text"))||d)&&p.push(d),s){var m=+h.rawS||h.s,v=h.v,y=v-m;g("initial")&&p.push(c(y)),g("delta")&&p.push(c(m)),g("final")&&p.push(c(v))}if(l){g("value")&&p.push(c(h.s));var b=0;g("percent initial")&&b++,g("percent previous")&&b++,g("percent total")&&b++;var x=b>1;g("percent initial")&&(d=a.formatPercent(h.begR),x&&(d+=" of initial"),p.push(d)),g("percent previous")&&(d=a.formatPercent(h.difR),x&&(d+=" of previous"),p.push(d)),g("percent total")&&(d=a.formatPercent(h.sumR),x&&(d+=" of total"),p.push(d))}return p.join("<br>")}(e,n,r,i):g.getValue(s.text,n),g.coerceString(y,o)}(O,r,i,k,A);w=function(t,e){var n=g.getValue(t.textposition,e);return g.coerceEnumerated(b,n)}(L,i);var R=r[i],N=!("stack"===m.mode||"relative"===m.mode)||R._outmost;if(I&&"none"!==w&&(!R.isBlank&&s!==c&&d!==f||"auto"!==w&&"inside"!==w)){var F=O.font,z=p.getBarColor(r[i],L),V=p.getInsideTextFont(L,i,F,z),H=p.getOutsideTextFont(L,i,F),j=n.datum();P?"log"===k.type&&j.s0<=0&&(s=k.range[0]<k.range[1]?0:k._length):"log"===A.type&&j.s0<=0&&(d=A.range[0]<A.range[1]?A._length:0);var B,U,q,G,Z,W=Math.abs(c-s)-2*_,$=Math.abs(f-d)-2*_;if("outside"===w&&(N||R.hasB||(w="inside")),"auto"===w&&(N?(w="inside",B=E(n,I,Z=a.ensureUniformFontSize(t,V)),G=(U=l.bBox(B.node())).height,(q=U.width)>0&&G>0&&(q<=W&&G<=$||q<=$&&G<=W||(P?W>=q*($/G):$>=G*(W/q)))?w="inside":(w="outside",B.remove(),B=null)):w="inside"),!B){var Y=(B=E(n,I,Z=a.ensureUniformFontSize(t,"outside"===w?H:V))).attr("transform");if(B.attr("transform",""),q=(U=l.bBox(B.node())).width,G=U.height,B.attr("transform",Y),q<=0||G<=0)return void B.remove()}var X,Q=L.textangle;(X="outside"===w?function(t,e,n,r,i,a){var o,s=!!a.isHorizontal,l=!!a.constrained,c=a.angle||0,u=i.width,d=i.height,h=Math.abs(e-t),f=Math.abs(r-n);o=s?f>2*_?_:0:h>2*_?_:0;var p=1;l&&(p=s?Math.min(1,f/d):Math.min(1,h/u));var g=C(c),m=S(i,g),v=(s?m.x:m.y)/2,y=(i.left+i.right)/2,b=(i.top+i.bottom)/2,x=(t+e)/2,w=(n+r)/2,k=0,M=0,A=s?T(e,t):T(n,r);return s?(x=e-A*o,k=A*v):(w=r+A*o,M=-A*v),{textX:y,textY:b,targetX:x,targetY:w,anchorX:k,anchorY:M,scale:p,rotate:g}}(s,c,d,f,U,{isHorizontal:P,constrained:"both"===L.constraintext||"outside"===L.constraintext,angle:Q}):D(s,c,d,f,U,{isHorizontal:P,constrained:"both"===L.constraintext||"inside"===L.constraintext,angle:Q,anchor:L.insidetextanchor})).fontSize=Z.size,h(L.type,X,O),R.transform=X,M(B,O,m,v).attr("transform",a.getTextTransform(X))}else n.select("text").remove()}(t,e,N,n,k,z,V,H,j,m,v),e.layerClipId&&l.hideOutsideRangePoint(c,N.select("text"),w,O,d.xcalendar,d.ycalendar)}),l.setClipUrl(c,!1===d.cliponaxis?null:e.layerClipId,t)});c.getComponentMethod("errorbars","plot")(t,L,e,m)},toMoveInsideBar:D}},{"../../components/color":75,"../../components/drawing":97,"../../components/fx/helpers":111,"../../lib":202,"../../lib/svg_text_utils":224,"../../plots/cartesian/axes":248,"../../registry":290,"./attributes":300,"./constants":302,"./helpers":306,"./style":314,"./uniform_text":316,d3:9,"fast-isnumeric":11}],312:[function(t,e,n){"use strict";function r(t,e,n,r,i){var a=e.c2p(r?t.s0:t.p0,!0),o=e.c2p(r?t.s1:t.p1,!0),s=n.c2p(r?t.p0:t.s0,!0),l=n.c2p(r?t.p1:t.s1,!0);return i?[(a+o)/2,(s+l)/2]:r?[o,(s+l)/2]:[(a+o)/2,l]}e.exports=function(t,e){var n,i=t.cd,a=t.xaxis,o=t.yaxis,s=i[0].trace,l="funnel"===s.type,c="h"===s.orientation,u=[];if(!1===e)for(n=0;n<i.length;n++)i[n].selected=0;else for(n=0;n<i.length;n++){var d=i[n],h="ct"in d?d.ct:r(d,a,o,c,l);e.contains(h,!1,n,t)?(u.push({pointNumber:n,x:a.c2d(d.x),y:o.c2d(d.y)}),d.selected=1):d.selected=0}return u}},{}],313:[function(t,e,n){"use strict";e.exports=a;var r=t("../../lib").distinctVals,i=t("../../constants/numerical").BADNUM;function a(t,e){this.traces=t,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var n=1/0,a=[],o=0;o<t.length;o++){for(var s=t[o],l=0;l<s.length;l++){var c=s[l];c.p!==i&&a.push(c.p)}s[0]&&s[0].width1&&(n=Math.min(s[0].width1,n))}this.positions=a;var u=r(a,{unitMinDiff:e.unitMinDiff});this.distinctPositions=u.vals,this.minDiff=1===u.vals.length&&n!==1/0?n:Math.min(u.minDiff,n),this.binWidth=this.minDiff,this.bins={}}a.prototype.put=function(t,e){var n=this.getLabel(t,e),r=this.bins[n]||0;return this.bins[n]=r+e,r},a.prototype.get=function(t,e){var n=this.getLabel(t,e);return this.bins[n]||0},a.prototype.getLabel=function(t,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?t:Math.round(t/this.binWidth))}},{"../../constants/numerical":181,"../../lib":202}],314:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/color"),a=t("../../components/drawing"),o=t("../../lib"),s=t("../../registry"),l=t("./uniform_text").resizeText,c=t("./attributes"),u=c.textfont,d=c.insidetextfont,h=c.outsidetextfont,f=t("./helpers");function p(t,e,n){a.pointStyle(t.selectAll("path"),e,n),g(t,e,n)}function g(t,e,n){t.selectAll("text").each(function(t){var i=r.select(this),s=o.ensureUniformFontSize(n,m(i,t,e,n));a.font(i,s)})}function m(t,e,n,r){var i=r._fullLayout.font,a=n.textfont;if(t.classed("bartext-inside")){var o=_(e,n);a=y(n,e.i,i,o)}else t.classed("bartext-outside")&&(a=b(n,e.i,i));return a}function v(t,e,n){return x(u,t.textfont,e,n)}function y(t,e,n,r){var a=v(t,e,n);return(void 0===t._input.textfont||void 0===t._input.textfont.color||Array.isArray(t.textfont.color)&&void 0===t.textfont.color[e])&&(a={color:i.contrast(r),family:a.family,size:a.size}),x(d,t.insidetextfont,e,a)}function b(t,e,n){var r=v(t,e,n);return x(h,t.outsidetextfont,e,r)}function x(t,e,n,r){var i=f.getValue((e=e||{}).family,n),a=f.getValue(e.size,n),o=f.getValue(e.color,n);return{family:f.coerceString(t.family,i,r.family),size:f.coerceNumber(t.size,a,r.size),color:f.coerceColor(t.color,o,r.color)}}function _(t,e){return"waterfall"===e.type?e[t.dir].marker.color:t.mc||e.marker.color}e.exports={style:function(t){var e=r.select(t).selectAll("g.barlayer").selectAll("g.trace");l(t,e,"bar");var n=e.size(),i=t._fullLayout;e.style("opacity",function(t){return t[0].trace.opacity}).each(function(t){("stack"===i.barmode&&n>1||0===i.bargap&&0===i.bargroupgap&&!t[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),e.selectAll("g.points").each(function(e){p(r.select(this),e[0].trace,t)}),s.getComponentMethod("errorbars","style")(e)},styleTextPoints:g,styleOnSelect:function(t,e,n){var i=e[0].trace;i.selectedpoints?function(t,e,n){a.selectedPointStyle(t.selectAll("path"),e),function(t,e,n){t.each(function(t){var i,s=r.select(this);if(t.selected){i=o.ensureUniformFontSize(n,m(s,t,e,n));var l=e.selected.textfont&&e.selected.textfont.color;l&&(i.color=l),a.font(s,i)}else a.selectedTextStyle(s,e)})}(t.selectAll("text"),e,n)}(n,i,t):(p(n,i,t),s.getComponentMethod("errorbars","style")(n))},getInsideTextFont:y,getOutsideTextFont:b,getBarColor:_,resizeText:l}},{"../../components/color":75,"../../components/drawing":97,"../../lib":202,"../../registry":290,"./attributes":300,"./helpers":306,"./uniform_text":316,d3:9}],315:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/defaults");e.exports=function(t,e,n,o,s){n("marker.color",o),i(t,"marker")&&a(t,e,s,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),i(t,"marker.line")&&a(t,e,s,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":75,"../../components/colorscale/defaults":85,"../../components/colorscale/helpers":86}],316:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../lib");function a(t){return"_"+t+"Text_minsize"}e.exports={recordMinTextSize:function(t,e,n){if(n.uniformtext.mode){var r=a(t),i=n.uniformtext.minsize,o=e.scale*e.fontSize;e.hide=o<i,n[r]=n[r]||1/0,e.hide||(n[r]=Math.min(n[r],Math.max(o,i)))}},clearMinTextSize:function(t,e){e[a(t)]=void 0},resizeText:function(t,e,n){var a=t._fullLayout,o=a["_"+n+"Text_minsize"];if(o){var s,l="hide"===a.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}e.selectAll(s).each(function(t){var e=t.transform;e&&(e.scale=l&&e.hide?0:o/e.fontSize,r.select(this).select("text").attr("transform",i.getTextTransform(e)))})}}}},{"../../lib":202,d3:9}],317:[function(t,e,n){"use strict";var r=t("../../plots/attributes"),i=t("../../plots/domain").attributes,a=t("../../plots/font_attributes"),o=t("../../components/color/attributes"),s=t("../../plots/template_attributes").hovertemplateAttrs,l=t("../../plots/template_attributes").texttemplateAttrs,c=t("../../lib/extend").extendFlat,u=a({editType:"plot",arrayOk:!0,colorEditType:"plot"});e.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:c({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:c({},u,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:c({},u,{}),outsidetextfont:c({},u,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:c({},u,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:i({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:c({},u,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":74,"../../lib/extend":196,"../../plots/attributes":244,"../../plots/domain":275,"../../plots/font_attributes":276,"../../plots/template_attributes":289}],318:[function(t,e,n){"use strict";var r=t("../../plots/plots");n.name="pie",n.plot=function(t,e,i,a){r.plotBasePlot(n.name,t,e,i,a)},n.clean=function(t,e,i,a){r.cleanBasePlot(n.name,t,e,i,a)}},{"../../plots/plots":282}],319:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("tinycolor2"),a=t("../../components/color"),o={};function s(t){return function(e,n){return!!e&&!!(e=i(e)).isValid()&&(e=a.addOpacity(e,e.getAlpha()),t[n]||(t[n]=e),e)}}function l(t,e){var n,r=JSON.stringify(t),a=e[r];if(!a){for(a=t.slice(),n=0;n<t.length;n++)a.push(i(t[n]).lighten(20).toHexString());for(n=0;n<t.length;n++)a.push(i(t[n]).darken(20).toHexString());e[r]=a}return a}e.exports={calc:function(t,e){var n,i,a=[],o=t._fullLayout,l=o.hiddenlabels||[],c=e.labels,u=e.marker.colors||[],d=e.values,h=e._length,f=e._hasValues&&h;if(e.dlabel)for(c=new Array(h),n=0;n<h;n++)c[n]=String(e.label0+n*e.dlabel);var p={},g=s(o["_"+e.type+"colormap"]),m=0,v=!1;for(n=0;n<h;n++){var y,b,x;if(f){if(!r(y=d[n]))continue;if((y=+y)<0)continue}else y=1;void 0!==(b=c[n])&&""!==b||(b=n);var _=p[b=String(b)];void 0===_?(p[b]=a.length,(x=-1!==l.indexOf(b))||(m+=y),a.push({v:y,label:b,color:g(u[n],b),i:n,pts:[n],hidden:x})):(v=!0,(i=a[_]).v+=y,i.pts.push(n),i.hidden||(m+=y),!1===i.color&&u[n]&&(i.color=g(u[n],b)))}return("funnelarea"===e.type?v:e.sort)&&a.sort(function(t,e){return e.v-t.v}),a[0]&&(a[0].vTotal=m),a},crossTraceCalc:function(t,e){var n=(e||{}).type;n||(n="pie");var r=t._fullLayout,i=t.calcdata,a=r[n+"colorway"],s=r["_"+n+"colormap"];r["extend"+n+"colors"]&&(a=l(a,o));for(var c=0,u=0;u<i.length;u++){var d=i[u];if(d[0].trace.type===n)for(var h=0;h<d.length;h++){var f=d[h];!1===f.color&&(s[f.label]?f.color=s[f.label]:(s[f.label]=f.color=a[c%a.length],c++))}}},makePullColorFn:s,generateExtendedColors:l}},{"../../components/color":75,"fast-isnumeric":11,tinycolor2:58}],320:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("./attributes"),o=t("../../plots/domain").defaults,s=t("../bar/defaults").handleText;function l(t,e){var n=Array.isArray(t),a=i.isArrayOrTypedArray(e),o=Math.min(n?t.length:1/0,a?e.length:1/0);if(isFinite(o)||(o=0),o&&a){for(var s,l=0;l<o;l++){var c=e[l];if(r(c)&&c>0){s=!0;break}}s||(o=0)}return{hasLabels:n,hasValues:a,len:o}}e.exports={handleLabelsAndValues:l,supplyDefaults:function(t,e,n,r){function c(n,r){return i.coerce(t,e,a,n,r)}var u=l(c("labels"),c("values")),d=u.len;if(e._hasLabels=u.hasLabels,e._hasValues=u.hasValues,!e._hasLabels&&e._hasValues&&(c("label0"),c("dlabel")),d){e._length=d,c("marker.line.width")&&c("marker.line.color"),c("marker.colors"),c("scalegroup");var h,f=c("text"),p=c("texttemplate");if(p||(h=c("textinfo",Array.isArray(f)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),p||h&&"none"!==h){var g=c("textposition");s(t,e,r,c,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(g)||"auto"===g||"outside"===g)&&c("automargin"),("inside"===g||"auto"===g||Array.isArray(g))&&c("insidetextorientation")}o(e,r,c);var m=c("hole");if(c("title.text")){var v=c("title.position",m?"middle center":"top center");m||"middle center"!==v||(e.title.position="top center"),i.coerceFont(c,"title.font",r.font)}c("sort"),c("direction"),c("rotation"),c("pull")}else e.visible=!1}}},{"../../lib":202,"../../plots/domain":275,"../bar/defaults":304,"./attributes":317,"fast-isnumeric":11}],321:[function(t,e,n){"use strict";var r=t("../../components/fx/helpers").appendArrayMultiPointValues;e.exports=function(t,e){var n={curveNumber:e.index,pointNumbers:t.pts,data:e._input,fullData:e,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,v:t.v};return 1===t.pts.length&&(n.pointNumber=n.i=t.pts[0]),r(n,e,t.pts),"funnelarea"===e.type&&(delete n.v,delete n.i),n}},{"../../components/fx/helpers":111}],322:[function(t,e,n){"use strict";var r=t("../../lib");function i(t){return-1!==t.indexOf("e")?t.replace(/[.]?0+e/,"e"):-1!==t.indexOf(".")?t.replace(/[.]?0+$/,""):t}n.formatPiePercent=function(t,e){var n=i((100*t).toPrecision(3));return r.numSeparate(n,e)+"%"},n.formatPieValue=function(t,e){var n=i(t.toPrecision(10));return r.numSeparate(n,e)},n.getFirstFilled=function(t,e){if(Array.isArray(t))for(var n=0;n<e.length;n++){var r=t[e[n]];if(r||0===r||""===r)return r}},n.castOption=function(t,e){return Array.isArray(t)?n.getFirstFilled(t,e):t||void 0},n.getRotationAngle=function(t){return("auto"===t?0:t)*Math.PI/180}},{"../../lib":202}],323:[function(t,e,n){"use strict";e.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,supplyLayoutDefaults:t("./layout_defaults"),layoutAttributes:t("./layout_attributes"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style"),styleOne:t("./style_one"),moduleType:"trace",name:"pie",basePlotModule:t("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":317,"./base_plot":318,"./calc":319,"./defaults":320,"./layout_attributes":324,"./layout_defaults":325,"./plot":326,"./style":327,"./style_one":328}],324:[function(t,e,n){"use strict";e.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],325:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e){function n(n,a){return r.coerce(t,e,i,n,a)}n("hiddenlabels"),n("piecolorway",e.colorway),n("extendpiecolors")}},{"../../lib":202,"./layout_attributes":324}],326:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../plots/plots"),a=t("../../components/fx"),o=t("../../components/color"),s=t("../../components/drawing"),l=t("../../lib"),c=l.strScale,u=l.strTranslate,d=t("../../lib/svg_text_utils"),h=t("../bar/uniform_text"),f=h.recordMinTextSize,p=h.clearMinTextSize,g=t("../bar/constants").TEXTPAD,m=t("./helpers"),v=t("./event_data"),y=t("../../lib").isValidTextValue;function b(t,e,n){var i=n[0],o=i.trace,s=i.cx,c=i.cy;"_hasHoverLabel"in o||(o._hasHoverLabel=!1),"_hasHoverEvent"in o||(o._hasHoverEvent=!1),t.on("mouseover",function(t){var n=e._fullLayout,u=e._fullData[o.index];if(!e._dragging&&!1!==n.hovermode){var d=u.hoverinfo;if(Array.isArray(d)&&(d=a.castHoverinfo({hoverinfo:[m.castOption(d,t.pts)],_module:o._module},n,0)),"all"===d&&(d="label+text+value+percent+name"),u.hovertemplate||"none"!==d&&"skip"!==d&&d){var h=t.rInscribed||0,f=s+t.pxmid[0]*(1-h),p=c+t.pxmid[1]*(1-h),g=n.separators,y=[];if(d&&-1!==d.indexOf("label")&&y.push(t.label),t.text=m.castOption(u.hovertext||u.text,t.pts),d&&-1!==d.indexOf("text")){var b=t.text;l.isValidTextValue(b)&&y.push(b)}t.value=t.v,t.valueLabel=m.formatPieValue(t.v,g),d&&-1!==d.indexOf("value")&&y.push(t.valueLabel),t.percent=t.v/i.vTotal,t.percentLabel=m.formatPiePercent(t.percent,g),d&&-1!==d.indexOf("percent")&&y.push(t.percentLabel);var x=u.hoverlabel,_=x.font;a.loneHover({trace:o,x0:f-h*i.r,x1:f+h*i.r,y:p,text:y.join("<br>"),name:u.hovertemplate||-1!==d.indexOf("name")?u.name:void 0,idealAlign:t.pxmid[0]<0?"left":"right",color:m.castOption(x.bgcolor,t.pts)||t.color,borderColor:m.castOption(x.bordercolor,t.pts),fontFamily:m.castOption(_.family,t.pts),fontSize:m.castOption(_.size,t.pts),fontColor:m.castOption(_.color,t.pts),nameLength:m.castOption(x.namelength,t.pts),textAlign:m.castOption(x.align,t.pts),hovertemplate:m.castOption(u.hovertemplate,t.pts),hovertemplateLabels:t,eventData:[v(t,u)]},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e}),o._hasHoverLabel=!0}o._hasHoverEvent=!0,e.emit("plotly_hover",{points:[v(t,u)],event:r.event})}}),t.on("mouseout",function(t){var n=e._fullLayout,i=e._fullData[o.index],s=r.select(this).datum();o._hasHoverEvent&&(t.originalEvent=r.event,e.emit("plotly_unhover",{points:[v(s,i)],event:r.event}),o._hasHoverEvent=!1),o._hasHoverLabel&&(a.loneUnhover(n._hoverlayer.node()),o._hasHoverLabel=!1)}),t.on("click",function(t){e._dragging||!1===e._fullLayout.hovermode||(e._hoverdata=[v(t,e._fullData[o.index])],a.click(e,r.event))})}function x(t,e,n){var r=m.castOption(t.insidetextfont.color,e.pts);!r&&t._input.textfont&&(r=m.castOption(t._input.textfont.color,e.pts));var i=m.castOption(t.insidetextfont.family,e.pts)||m.castOption(t.textfont.family,e.pts)||n.family,a=m.castOption(t.insidetextfont.size,e.pts)||m.castOption(t.textfont.size,e.pts)||n.size;return{color:r||o.contrast(e.color),family:i,size:a}}function _(t,e){for(var n,r,i=0;i<t.length;i++)if((r=(n=t[i][0]).trace).title.text){var a=r.title.text;r._meta&&(a=l.templateString(a,r._meta));var o=s.tester.append("text").attr("data-notex",1).text(a).call(s.font,r.title.font).call(d.convertToTspans,e),c=s.bBox(o.node(),!0);n.titleBox={width:c.width,height:c.height},o.remove()}}function w(t,e,n){var r=n.r||e.rpx1,i=e.rInscribed;if(e.startangle===e.stopangle)return{rCenter:1-i,scale:0,rotate:0,textPosAngle:0};var a,o=e.ring,s=1===o&&Math.abs(e.startangle-e.stopangle)===2*Math.PI,l=e.halfangle,c=e.midangle,u=n.trace.insidetextorientation,d="horizontal"===u,h="tangential"===u,f="radial"===u,p="auto"===u,g=[];if(!p){var m,v=function(n,i){if(function(t,e){var n=t.startangle,r=t.stopangle;return n>e&&e>r||n<e&&e<r}(e,n)){var s=Math.abs(n-e.startangle),l=Math.abs(n-e.stopangle),c=s<l?s:l;(a="tan"===i?T(t,r,o,c,0):k(t,r,o,c,Math.PI/2)).textPosAngle=n,g.push(a)}};if(d||h){for(m=4;m>=-4;m-=2)v(Math.PI*m,"tan");for(m=4;m>=-4;m-=2)v(Math.PI*(m+1),"tan")}if(d||f){for(m=4;m>=-4;m-=2)v(Math.PI*(m+1.5),"rad");for(m=4;m>=-4;m-=2)v(Math.PI*(m+.5),"rad")}}if(s||p||d){var y=Math.sqrt(t.width*t.width+t.height*t.height);if((a={scale:i*r*2/y,rCenter:1-i,rotate:0}).textPosAngle=(e.startangle+e.stopangle)/2,a.scale>=1)return a;g.push(a)}(p||f)&&((a=k(t,r,o,l,c)).textPosAngle=(e.startangle+e.stopangle)/2,g.push(a)),(p||h)&&((a=T(t,r,o,l,c)).textPosAngle=(e.startangle+e.stopangle)/2,g.push(a));for(var b=0,x=0,_=0;_<g.length;_++){var w=g[_].scale;if(x<w&&(x=w,b=_),!p&&x>=1)break}return g[b]}function k(t,e,n,r,i){e=Math.max(0,e-2*g);var a=t.width/t.height,o=C(a,r,e,n);return{scale:2*o/t.height,rCenter:M(a,o/e),rotate:A(i)}}function T(t,e,n,r,i){e=Math.max(0,e-2*g);var a=t.height/t.width,o=C(a,r,e,n);return{scale:2*o/t.width,rCenter:M(a,o/e),rotate:A(i+Math.PI/2)}}function M(t,e){return Math.cos(e)-t*e}function A(t){return(180/Math.PI*t+720)%180-90}function C(t,e,n,r){var i=t+1/(2*Math.tan(e));return n*Math.min(1/(Math.sqrt(i*i+.5)+i),r/(Math.sqrt(t*t+r/2)+t))}function S(t,e){return t.v!==e.vTotal||e.trace.hole?Math.min(1/(1+1/Math.sin(t.halfangle)),t.ring/2):1}function D(t,e){var n=e.pxmid[0],r=e.pxmid[1],i=t.width/2,a=t.height/2;return n<0&&(i*=-1),r<0&&(a*=-1),{scale:1,rCenter:1,rotate:0,x:i+Math.abs(a)*(i>0?1:-1)/2,y:a/(1+n*n/(r*r)),outside:!0}}function O(t,e){var n,r,i,a=t.trace,o={x:t.cx,y:t.cy},s={tx:0,ty:0};s.ty+=a.title.font.size,i=L(a),-1!==a.title.position.indexOf("top")?(o.y-=(1+i)*t.r,s.ty-=t.titleBox.height):-1!==a.title.position.indexOf("bottom")&&(o.y+=(1+i)*t.r);var l,c=t.r/(void 0===(l=t.trace.aspectratio)?1:l),u=e.w*(a.domain.x[1]-a.domain.x[0])/2;return-1!==a.title.position.indexOf("left")?(u+=c,o.x-=(1+i)*c,s.tx+=t.titleBox.width/2):-1!==a.title.position.indexOf("center")?u*=2:-1!==a.title.position.indexOf("right")&&(u+=c,o.x+=(1+i)*c,s.tx-=t.titleBox.width/2),n=u/t.titleBox.width,r=E(t,e)/t.titleBox.height,{x:o.x,y:o.y,scale:Math.min(n,r),tx:s.tx,ty:s.ty}}function E(t,e){var n=t.trace;return Math.min(t.titleBox.height,e.h*(n.domain.y[1]-n.domain.y[0])/2)}function L(t){var e,n=t.pull;if(!n)return 0;if(Array.isArray(n))for(n=0,e=0;e<t.pull.length;e++)t.pull[e]>n&&(n=t.pull[e]);return n}function P(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r][0],a=i.trace,o=a.domain,s=e.w*(o.x[1]-o.x[0]),l=e.h*(o.y[1]-o.y[0]);a.title.text&&"middle center"!==a.title.position&&(l-=E(i,e));var c=l/2;"funnelarea"!==a.type||a.scalegroup||(c/=a.aspectratio),i.r=Math.min(s/2,c)/(1+L(a)),i.cx=e.l+e.w*(a.domain.x[1]+a.domain.x[0])/2,i.cy=e.t+e.h*(1-a.domain.y[0])-l/2,a.title.text&&-1!==a.title.position.indexOf("bottom")&&(i.cy-=E(i,e)),a.scalegroup&&-1===n.indexOf(a.scalegroup)&&n.push(a.scalegroup)}!function(t,e){for(var n,r,i,a=0;a<e.length;a++){var o=1/0,s=e[a];for(r=0;r<t.length;r++)if((i=(n=t[r][0]).trace).scalegroup===s){var l;if("pie"===i.type)l=n.r*n.r;else if("funnelarea"===i.type){var c,u;i.aspectratio>1?u=(c=n.r)/i.aspectratio:c=(u=n.r)*i.aspectratio,l=(c*=(1+i.baseratio)/2)*u}o=Math.min(o,l/n.vTotal)}for(r=0;r<t.length;r++)if((i=(n=t[r][0]).trace).scalegroup===s){var d=o*n.vTotal;"funnelarea"===i.type&&(d/=(1+i.baseratio)/2,d/=i.aspectratio),n.r=Math.sqrt(d)}}}(t,n)}function I(t,e){return[t*Math.sin(e),-t*Math.cos(e)]}function R(t,e,n){var r=t._fullLayout,i=n.trace,a=i.texttemplate,o=i.textinfo;if(!a&&o&&"none"!==o){var s,c=o.split("+"),u=function(t){return-1!==c.indexOf(t)},d=u("label"),h=u("text"),f=u("value"),p=u("percent"),g=r.separators;if(s=d?[e.label]:[],h){var v=m.getFirstFilled(i.text,e.pts);y(v)&&s.push(v)}f&&s.push(m.formatPieValue(e.v,g)),p&&s.push(m.formatPiePercent(e.v/n.vTotal,g)),e.text=s.join("<br>")}if(a){var b=l.castOption(i,e.i,"texttemplate");if(b){var x=function(t){return{label:t.label,value:t.v,valueLabel:m.formatPieValue(t.v,r.separators),percent:t.v/n.vTotal,percentLabel:m.formatPiePercent(t.v/n.vTotal,r.separators),color:t.color,text:t.text,customdata:l.castOption(i,t.i,"customdata")}}(e),_=m.getFirstFilled(i.text,e.pts);(y(_)||""===_)&&(x.text=_),e.text=l.texttemplateString(b,x,t._fullLayout._d3locale,x,i._meta||{})}else e.text=""}}function N(t,e){var n=t.rotate*Math.PI/180,r=Math.cos(n),i=Math.sin(n),a=(e.left+e.right)/2,o=(e.top+e.bottom)/2;t.textX=a*r-o*i,t.textY=a*i+o*r,t.noCenter=!0}e.exports={plot:function(t,e){var n=t._fullLayout,a=n._size;p("pie",n),_(e,t),P(e,a);var h=l.makeTraceGroups(n._pielayer,e,"trace").each(function(e){var h=r.select(this),p=e[0],g=p.trace;!function(t){var e,n,r,i=t[0],a=i.r,o=i.trace,s=m.getRotationAngle(o.rotation),l=2*Math.PI/i.vTotal,c="px0",u="px1";if("counterclockwise"===o.direction){for(e=0;e<t.length&&t[e].hidden;e++);if(e===t.length)return;s+=l*t[e].v,l*=-1,c="px1",u="px0"}for(r=I(a,s),e=0;e<t.length;e++)(n=t[e]).hidden||(n[c]=r,n.startangle=s,n.pxmid=I(a,s+=l*n.v/2),n.midangle=s,r=I(a,s+=l*n.v/2),n.stopangle=s,n[u]=r,n.largeArc=n.v>i.vTotal/2?1:0,n.halfangle=Math.PI*Math.min(n.v/i.vTotal,.5),n.ring=1-o.hole,n.rInscribed=S(n,i))}(e),h.attr("stroke-linejoin","round"),h.each(function(){var v=r.select(this).selectAll("g.slice").data(e);v.enter().append("g").classed("slice",!0),v.exit().remove();var y=[[[],[]],[[],[]]],_=!1;v.each(function(i,a){if(i.hidden)r.select(this).selectAll("path,g").remove();else{i.pointNumber=i.i,i.curveNumber=g.index,y[i.pxmid[1]<0?0:1][i.pxmid[0]<0?0:1].push(i);var o=p.cx,c=p.cy,u=r.select(this),h=u.selectAll("path.surface").data([i]);if(h.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),u.call(b,t,e),g.pull){var v=+m.castOption(g.pull,i.pts)||0;v>0&&(o+=v*i.pxmid[0],c+=v*i.pxmid[1])}i.cxFinal=o,i.cyFinal=c;var k=g.hole;if(i.v===p.vTotal){var T="M"+(o+i.px0[0])+","+(c+i.px0[1])+O(i.px0,i.pxmid,!0,1)+O(i.pxmid,i.px0,!0,1)+"Z";h.attr("d",k?"M"+(o+k*i.px0[0])+","+(c+k*i.px0[1])+O(i.px0,i.pxmid,!1,k)+O(i.pxmid,i.px0,!1,k)+"Z"+T:T)}else{var M=O(i.px0,i.px1,!0,1);if(k){var A=1-k;h.attr("d","M"+(o+k*i.px1[0])+","+(c+k*i.px1[1])+O(i.px1,i.px0,!1,k)+"l"+A*i.px0[0]+","+A*i.px0[1]+M+"Z")}else h.attr("d","M"+o+","+c+"l"+i.px0[0]+","+i.px0[1]+M+"Z")}R(t,i,p);var C=m.castOption(g.textposition,i.pts),S=u.selectAll("g.slicetext").data(i.text&&"none"!==C?[0]:[]);S.enter().append("g").classed("slicetext",!0),S.exit().remove(),S.each(function(){var u=l.ensureSingle(r.select(this),"text","",function(t){t.attr("data-notex",1)}),h=l.ensureUniformFontSize(t,"outside"===C?function(t,e,n){return{color:m.castOption(t.outsidetextfont.color,e.pts)||m.castOption(t.textfont.color,e.pts)||n.color,family:m.castOption(t.outsidetextfont.family,e.pts)||m.castOption(t.textfont.family,e.pts)||n.family,size:m.castOption(t.outsidetextfont.size,e.pts)||m.castOption(t.textfont.size,e.pts)||n.size}}(g,i,n.font):x(g,i,n.font));u.text(i.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(s.font,h).call(d.convertToTspans,t);var v,y=s.bBox(u.node());if("outside"===C)v=D(y,i);else if(v=w(y,i,p),"auto"===C&&v.scale<1){var b=l.ensureUniformFontSize(t,g.outsidetextfont);u.call(s.font,b),v=D(y=s.bBox(u.node()),i)}var k=v.textPosAngle,T=void 0===k?i.pxmid:I(p.r,k);if(v.targetX=o+T[0]*v.rCenter+(v.x||0),v.targetY=c+T[1]*v.rCenter+(v.y||0),N(v,y),v.outside){var M=v.targetY;i.yLabelMin=M-y.height/2,i.yLabelMid=M,i.yLabelMax=M+y.height/2,i.labelExtraX=0,i.labelExtraY=0,_=!0}v.fontSize=h.size,f(g.type,v,n),e[a].transform=v,u.attr("transform",l.getTextTransform(v))})}function O(t,e,n,r){return"a"+r*p.r+","+r*p.r+" 0 "+i.largeArc+(n?" 1 ":" 0 ")+r*(e[0]-t[0])+","+r*(e[1]-t[1])}});var k=r.select(this).selectAll("g.titletext").data(g.title.text?[0]:[]);if(k.enter().append("g").classed("titletext",!0),k.exit().remove(),k.each(function(){var e,n=l.ensureSingle(r.select(this),"text","",function(t){t.attr("data-notex",1)}),i=g.title.text;g._meta&&(i=l.templateString(i,g._meta)),n.text(i).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(s.font,g.title.font).call(d.convertToTspans,t),e="middle center"===g.title.position?function(t){var e=Math.sqrt(t.titleBox.width*t.titleBox.width+t.titleBox.height*t.titleBox.height);return{x:t.cx,y:t.cy,scale:t.trace.hole*t.r*2/e,tx:0,ty:-t.titleBox.height/2+t.trace.title.font.size}}(p):O(p,a),n.attr("transform",u(e.x,e.y)+c(Math.min(1,e.scale))+u(e.tx,e.ty))}),_&&function(t,e){var n,r,i,a,o,s,l,c,u,d,h,f,p;function g(t,e){return t.pxmid[1]-e.pxmid[1]}function v(t,e){return e.pxmid[1]-t.pxmid[1]}function y(t,n){n||(n={});var i,c,u,h,f=n.labelExtraY+(r?n.yLabelMax:n.yLabelMin),p=r?t.yLabelMin:t.yLabelMax,g=r?t.yLabelMax:t.yLabelMin,v=t.cyFinal+o(t.px0[1],t.px1[1]),y=f-p;if(y*l>0&&(t.labelExtraY=y),Array.isArray(e.pull))for(c=0;c<d.length;c++)(u=d[c])===t||(m.castOption(e.pull,t.pts)||0)>=(m.castOption(e.pull,u.pts)||0)||((t.pxmid[1]-u.pxmid[1])*l>0?(y=u.cyFinal+o(u.px0[1],u.px1[1])-p-t.labelExtraY)*l>0&&(t.labelExtraY+=y):(g+t.labelExtraY-v)*l>0&&(i=3*s*Math.abs(c-d.indexOf(t)),(h=u.cxFinal+a(u.px0[0],u.px1[0])+i-(t.cxFinal+t.pxmid[0])-t.labelExtraX)*s>0&&(t.labelExtraX+=h)))}for(r=0;r<2;r++)for(i=r?g:v,o=r?Math.max:Math.min,l=r?1:-1,n=0;n<2;n++){for(a=n?Math.max:Math.min,s=n?1:-1,(c=t[r][n]).sort(i),d=(u=t[1-r][n]).concat(c),f=[],h=0;h<c.length;h++)void 0!==c[h].yLabelMid&&f.push(c[h]);for(p=!1,h=0;r&&h<u.length;h++)if(void 0!==u[h].yLabelMid){p=u[h];break}for(h=0;h<f.length;h++){var b=h&&f[h-1];p&&!h&&(b=p),y(f[h],b)}}}(y,g),function(t,e){t.each(function(t){var n=r.select(this);if(t.labelExtraX||t.labelExtraY){var i=n.select("g.slicetext text");t.transform.targetX+=t.labelExtraX,t.transform.targetY+=t.labelExtraY,i.attr("transform",l.getTextTransform(t.transform));var a=t.cxFinal+t.pxmid[0],s="M"+a+","+(t.cyFinal+t.pxmid[1]),c=(t.yLabelMax-t.yLabelMin)*(t.pxmid[0]<0?-1:1)/4;if(t.labelExtraX){var u=t.labelExtraX*t.pxmid[1]/t.pxmid[0],d=t.yLabelMid+t.labelExtraY-(t.cyFinal+t.pxmid[1]);Math.abs(u)>Math.abs(d)?s+="l"+d*t.pxmid[0]/t.pxmid[1]+","+d+"H"+(a+t.labelExtraX+c):s+="l"+t.labelExtraX+","+u+"v"+(d-u)+"h"+c}else s+="V"+(t.yLabelMid+t.labelExtraY)+"h"+c;l.ensureSingle(n,"path","textline").call(o.stroke,e.outsidetextfont.color).attr({"stroke-width":Math.min(2,e.outsidetextfont.size/8),d:s,fill:"none"})}else n.select("path.textline").remove()})}(v,g),_&&g.automargin){var T=s.bBox(h.node()),M=g.domain,A=(a.w*(M.x[1]-M.x[0])*.5-p.r)/a.w,C=(a.h*(M.y[1]-M.y[0])*.5-p.r)/a.h;i.autoMargin(t,"pie."+g.uid+".automargin",{xl:M.x[0]-A,xr:M.x[1]+A,yb:M.y[0]-C,yt:M.y[1]+C,l:Math.max(p.cx-p.r-T.left,0),r:Math.max(T.right-(p.cx+p.r),0),b:Math.max(T.bottom-(p.cy+p.r),0),t:Math.max(p.cy-p.r-T.top,0),pad:5})}})});setTimeout(function(){h.selectAll("tspan").each(function(){var t=r.select(this);t.attr("dy")&&t.attr("dy",t.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:w,determineInsideTextFont:x,positionTitleOutside:O,prerenderTitles:_,layoutAreas:P,attachFxHandlers:b,computeTransform:N}},{"../../components/color":75,"../../components/drawing":97,"../../components/fx":115,"../../lib":202,"../../lib/svg_text_utils":224,"../../plots/plots":282,"../bar/constants":302,"../bar/uniform_text":316,"./event_data":321,"./helpers":322,d3:9}],327:[function(t,e,n){"use strict";var r=t("d3"),i=t("./style_one"),a=t("../bar/uniform_text").resizeText;e.exports=function(t){var e=t._fullLayout._pielayer.selectAll(".trace");a(t,e,"pie"),e.each(function(t){var e=t[0].trace,n=r.select(this);n.style({opacity:e.opacity}),n.selectAll("path.surface").each(function(t){r.select(this).call(i,t,e)})})}},{"../bar/uniform_text":316,"./style_one":328,d3:9}],328:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("./helpers").castOption;e.exports=function(t,e,n){var a=n.marker.line,o=i(a.color,e.pts)||r.defaultLine,s=i(a.width,e.pts)||0;t.style("stroke-width",s).call(r.fill,e.color).call(r.stroke,o)}},{"../../components/color":75,"./helpers":322}],329:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){for(var n=0;n<t.length;n++)t[n].i=n;r.mergeArray(e.text,t,"tx"),r.mergeArray(e.texttemplate,t,"txt"),r.mergeArray(e.hovertext,t,"htx"),r.mergeArray(e.customdata,t,"data"),r.mergeArray(e.textposition,t,"tp"),e.textfont&&(r.mergeArrayCastPositive(e.textfont.size,t,"ts"),r.mergeArray(e.textfont.color,t,"tc"),r.mergeArray(e.textfont.family,t,"tf"));var i=e.marker;if(i){r.mergeArrayCastPositive(i.size,t,"ms"),r.mergeArrayCastPositive(i.opacity,t,"mo"),r.mergeArray(i.symbol,t,"mx"),r.mergeArray(i.color,t,"mc");var a=i.line;i.line&&(r.mergeArray(a.color,t,"mlc"),r.mergeArrayCastPositive(a.width,t,"mlw"));var o=i.gradient;o&&"none"!==o.type&&(r.mergeArray(o.type,t,"mgt"),r.mergeArray(o.color,t,"mgc"))}}},{"../../lib":202}],330:[function(t,e,n){"use strict";var r=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../components/colorscale/attributes"),o=t("../../plots/font_attributes"),s=t("../../components/drawing/attributes").dash,l=t("../../components/drawing"),c=t("./constants"),u=t("../../lib/extend").extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:r({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:c.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:u({},s,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:u({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:u({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},a("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},a("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:o({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":82,"../../components/drawing":97,"../../components/drawing/attributes":96,"../../lib/extend":196,"../../plots/font_attributes":276,"../../plots/template_attributes":289,"./constants":334}],331:[function(t,e,n){"use strict";var r=t("fast-isnumeric"),i=t("../../lib"),a=t("../../plots/cartesian/axes"),o=t("../../plots/cartesian/align_period"),s=t("../../constants/numerical").BADNUM,l=t("./subtypes"),c=t("./colorscale_calc"),u=t("./arrays_to_calcdata"),d=t("./calc_selection");function h(t,e,n,r,i,o,s){var c=e._length,u=t._fullLayout,d=n._id,h=r._id,f=u._firstScatter[g(e)]===e.uid,p=(m(e,u,n,r)||{}).orientation,v=e.fill;n._minDtick=0,r._minDtick=0;var y={padded:!0},b={padded:!0};s&&(y.ppad=b.ppad=s);var x=c<2||i[0]!==i[c-1]||o[0]!==o[c-1];x&&("tozerox"===v||"tonextx"===v&&(f||"h"===p))?y.tozero=!0:(e.error_y||{}).visible||"tonexty"!==v&&"tozeroy"!==v&&(l.hasMarkers(e)||l.hasText(e))||(y.padded=!1,y.ppad=0),x&&("tozeroy"===v||"tonexty"===v&&(f||"v"===p))?b.tozero=!0:"tonextx"!==v&&"tozerox"!==v||(b.padded=!1),d&&(e._extremes[d]=a.findExtremes(n,i,y)),h&&(e._extremes[h]=a.findExtremes(r,o,b))}function f(t,e){if(l.hasMarkers(t)){var n,r=t.marker,o=1.6*(t.marker.sizeref||1);if(n="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/o),3)}:function(t){return Math.max((t||0)/o,3)},i.isArrayOrTypedArray(r.size)){var s={type:"linear"};a.setConvert(s);for(var c=s.makeCalcdata(t.marker,"size"),u=new Array(e),d=0;d<e;d++)u[d]=n(c[d]);return u}return n(r.size)}}function p(t,e){var n=g(e),r=t._firstScatter;r[n]||(r[n]=e.uid)}function g(t){var e=t.stackgroup;return t.xaxis+t.yaxis+t.type+(e?"-"+e:"")}function m(t,e,n,r){var i=t.stackgroup;if(i){var a=e._scatterStackOpts[n._id+r._id][i],o="v"===a.orientation?r:n;return"linear"===o.type||"log"===o.type?a:void 0}}e.exports={calc:function(t,e){var n,l,g,v,y,b,x=t._fullLayout,_=a.getFromId(t,e.xaxis||"x"),w=a.getFromId(t,e.yaxis||"y"),k=_.makeCalcdata(e,"x"),T=w.makeCalcdata(e,"y"),M=o(e,_,"x",k),A=o(e,w,"y",T),C=e._length,S=new Array(C),D=e.ids,O=m(e,x,_,w),E=!1;p(x,e);var L,P="x",I="y";O?(i.pushUnique(O.traceIndices,e._expandedIndex),(n="v"===O.orientation)?(I="s",L="x"):(P="s",L="y"),y="interpolate"===O.stackgaps):h(t,e,_,w,M,A,f(e,C));var R=!!e.xperiodalignment,N=!!e.yperiodalignment;for(l=0;l<C;l++){var F=S[l]={},z=r(M[l]),V=r(A[l]);z&&V?(F[P]=M[l],F[I]=A[l],R&&(F.orig_x=k[l]),N&&(F.orig_y=T[l])):O&&(n?z:V)?(F[L]=n?M[l]:A[l],F.gap=!0,y?(F.s=s,E=!0):F.s=0):F[P]=F[I]=s,D&&(F.id=String(D[l]))}if(u(S,e),c(t,e),d(S,e),O){for(l=0;l<S.length;)S[l][L]===s?S.splice(l,1):l++;if(i.sort(S,function(t,e){return t[L]-e[L]||t.i-e.i}),E){for(l=0;l<S.length-1&&S[l].gap;)l++;for((b=S[l].s)||(b=S[l].s=0),g=0;g<l;g++)S[g].s=b;for(v=S.length-1;v>l&&S[v].gap;)v--;for(b=S[v].s,g=S.length-1;g>v;g--)S[g].s=b;for(;l<v;)if(S[++l].gap){for(g=l+1;S[g].gap;)g++;for(var H=S[l-1][L],j=S[l-1].s,B=(S[g].s-j)/(S[g][L]-H);l<g;)S[l].s=j+(S[l][L]-H)*B,l++}}}return S},calcMarkerSize:f,calcAxisExpansion:h,setFirstScatter:p,getStackOpts:m}},{"../../constants/numerical":181,"../../lib":202,"../../plots/cartesian/align_period":245,"../../plots/cartesian/axes":248,"./arrays_to_calcdata":329,"./calc_selection":332,"./colorscale_calc":333,"./subtypes":355,"fast-isnumeric":11}],332:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e){r.isArrayOrTypedArray(e.selectedpoints)&&r.tagSelected(t,e)}},{"../../lib":202}],333:[function(t,e,n){"use strict";var r=t("../../components/colorscale/helpers").hasColorscale,i=t("../../components/colorscale/calc"),a=t("./subtypes");e.exports=function(t,e){a.hasLines(e)&&r(e,"line")&&i(t,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(e)&&(r(e,"marker")&&i(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),r(e,"marker.line")&&i(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":83,"../../components/colorscale/helpers":86,"./subtypes":355}],334:[function(t,e,n){"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],335:[function(t,e,n){"use strict";var r=t("./calc");function i(t,e,n,r,i,a,o){i[r]=!0;var s={i:null,gap:!0,s:0};if(s[o]=n,t.splice(e,0,s),e&&n===t[e-1][o]){var l=t[e-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=function(t,e,n,r){var i=t[e-1],a=t[e+1];return a?i?i.s+(a.s-i.s)*(n-i[r])/(a[r]-i[r]):a.s:i.s}(t,e,n,o));e||(t[0].t=t[1].t,t[0].trace=t[1].trace,delete t[1].t,delete t[1].trace)}e.exports=function(t,e){var n=e.xaxis,a=e.yaxis,o=t._fullLayout._scatterStackOpts[n._id+a._id];if(o){var s,l,c,u,d,h,f,p,g,m,v,y,b,x,_,w=t.calcdata;for(var k in o){var T=(m=o[k]).traceIndices;if(T.length){for(v="interpolate"===m.stackgaps,y=m.groupnorm,"v"===m.orientation?(b="x",x="y"):(b="y",x="x"),_=new Array(T.length),s=0;s<_.length;s++)_[s]=!1;h=w[T[0]];var M=new Array(h.length);for(s=0;s<h.length;s++)M[s]=h[s][b];for(s=1;s<T.length;s++){for(d=w[T[s]],l=c=0;l<d.length;l++){for(f=d[l][b];f>M[c]&&c<M.length;c++)i(d,l,M[c],s,_,v,b),l++;if(f!==M[c]){for(u=0;u<s;u++)i(w[T[u]],c,f,u,_,v,b);M.splice(c,0,f)}c++}for(;c<M.length;c++)i(d,l,M[c],s,_,v,b),l++}var A=M.length;for(l=0;l<h.length;l++){for(p=h[l][x]=h[l].s,s=1;s<T.length;s++)(d=w[T[s]])[0].trace._rawLength=d[0].trace._length,d[0].trace._length=A,d[l][x]=p+=d[l].s;if(y)for(g=("fraction"===y?p:p/100)||1,s=0;s<T.length;s++){var C=w[T[s]][l];C[x]/=g,C.sNorm=C.s/g}}for(s=0;s<T.length;s++){var S=(d=w[T[s]])[0].trace,D=r.calcMarkerSize(S,S._rawLength),O=Array.isArray(D);if(D&&_[s]||O){var E=D;for(D=new Array(A),l=0;l<A;l++)D[l]=d[l].gap?0:O?E[d[l].i]:E}var L=new Array(A),P=new Array(A);for(l=0;l<A;l++)L[l]=d[l].x,P[l]=d[l].y;r.calcAxisExpansion(t,S,n,a,L,P,D),d[0].t.orientation=m.orientation}}}}}},{"./calc":331}],336:[function(t,e,n){"use strict";e.exports=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=e-1;i>=0;i--){var a=t[i];if("scatter"===a.type&&a.xaxis===n.xaxis&&a.yaxis===n.yaxis){a.opacity=void 0;break}}}}}},{}],337:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry"),a=t("./attributes"),o=t("./constants"),s=t("./subtypes"),l=t("./xy_defaults"),c=t("./period_defaults"),u=t("./stack_defaults"),d=t("./marker_defaults"),h=t("./line_defaults"),f=t("./line_shape_defaults"),p=t("./text_defaults"),g=t("./fillcolor_defaults");e.exports=function(t,e,n,m){function v(n,i){return r.coerce(t,e,a,n,i)}var y=l(t,e,m,v);if(y||(e.visible=!1),e.visible){c(t,e,m,v);var b=u(t,e,m,v),x=!b&&y<o.PTS_LINESONLY?"lines+markers":"lines";v("text"),v("hovertext"),v("mode",x),s.hasLines(e)&&(h(t,e,n,m,v),f(t,e,v),v("connectgaps"),v("line.simplify")),s.hasMarkers(e)&&d(t,e,n,m,v,{gradient:!0}),s.hasText(e)&&(v("texttemplate"),p(t,e,m,v));var _=[];(s.hasMarkers(e)||s.hasText(e))&&(v("cliponaxis"),v("marker.maxdisplayed"),_.push("points")),v("fill",b?b.fillDflt:"none"),"none"!==e.fill&&(g(t,e,n,v),s.hasLines(e)||f(t,e,v));var w=(e.line||{}).color,k=(e.marker||{}).color;"tonext"!==e.fill&&"toself"!==e.fill||_.push("fills"),v("hoveron",_.join("+")||"points"),"fills"!==e.hoveron&&v("hovertemplate");var T=i.getComponentMethod("errorbars","supplyDefaults");T(t,e,w||k||n,{axis:"y"}),T(t,e,w||k||n,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(e,v)}}},{"../../lib":202,"../../registry":290,"./attributes":330,"./constants":334,"./fillcolor_defaults":338,"./line_defaults":343,"./line_shape_defaults":345,"./marker_defaults":349,"./period_defaults":350,"./stack_defaults":353,"./subtypes":355,"./text_defaults":356,"./xy_defaults":357}],338:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("../../lib").isArrayOrTypedArray;e.exports=function(t,e,n,a){var o=!1;if(e.marker){var s=e.marker.color,l=(e.marker.line||{}).color;s&&!i(s)?o=s:l&&!i(l)&&(o=l)}a("fillcolor",r.addOpacity((e.line||{}).color||o||n,.5))}},{"../../components/color":75,"../../lib":202}],339:[function(t,e,n){"use strict";var r=t("../../plots/cartesian/axes");e.exports=function(t,e,n){var i={},a={_fullLayout:n},o=r.getFromTrace(a,e,"x"),s=r.getFromTrace(a,e,"y");return i.xLabel=r.tickText(o,t.x,!0).text,i.yLabel=r.tickText(s,t.y,!0).text,i}},{"../../plots/cartesian/axes":248}],340:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("./subtypes");e.exports=function(t,e){var n,a;if("lines"===t.mode)return(n=t.line.color)&&r.opacity(n)?n:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var o=e.mcc||(t.marker||{}).color,s=e.mlcc||((t.marker||{}).line||{}).color;return(a=o&&r.opacity(o)?o:s&&r.opacity(s)&&(e.mlw||((t.marker||{}).line||{}).width)?s:"")?r.opacity(a)<.3?r.addOpacity(a,.3):a:(n=(t.line||{}).color)&&r.opacity(n)&&i.hasLines(t)&&t.line.width?n:t.fillcolor}},{"../../components/color":75,"./subtypes":355}],341:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../components/fx"),a=t("../../registry"),o=t("./get_trace_color"),s=t("../../components/color"),l=r.fillText;e.exports=function(t,e,n,c){var u=t.cd,d=u[0].trace,h=t.xa,f=t.ya,p=h.c2p(e),g=f.c2p(n),m=[p,g],v=d.hoveron||"",y=-1!==d.mode.indexOf("markers")?3:.5;if(-1!==v.indexOf("points")){var b=function(t){var e=Math.max(y,t.mrc||0),n=h.c2p(t.x)-p,r=f.c2p(t.y)-g;return Math.max(Math.sqrt(n*n+r*r)-e,1-y/e)},x=i.getDistanceFunction(c,function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,r=Math.abs(h.c2p(t.x)-p);return r<e?n*r/e:r-e+n},function(t){var e=Math.max(3,t.mrc||0),n=1-1/e,r=Math.abs(f.c2p(t.y)-g);return r<e?n*r/e:r-e+n},b);if(i.getClosest(u,x,t),!1!==t.index){var _=u[t.index],w=h.c2p(_.x,!0),k=f.c2p(_.y,!0),T=_.mrc||1;t.index=_.i;var M=u[0].t.orientation,A=M&&(_.sNorm||_.s),C="h"===M?A:void 0!==_.orig_x?_.orig_x:_.x,S="v"===M?A:void 0!==_.orig_y?_.orig_y:_.y;return r.extendFlat(t,{color:o(d,_),x0:w-T,x1:w+T,xLabelVal:C,y0:k-T,y1:k+T,yLabelVal:S,spikeDistance:b(_),hovertemplate:d.hovertemplate}),l(_,d,t),a.getComponentMethod("errorbars","hoverInfo")(_,d,t),[t]}}if(-1!==v.indexOf("fills")&&d._polygons){var D,O,E,L,P,I,R,N,F=d._polygons,z=[],V=!1,H=1/0,j=-1/0,B=1/0,U=-1/0;for(D=0;D<F.length;D++)(E=F[D]).contains(m)&&(V=!V,z.push(E),B=Math.min(B,E.ymin),U=Math.max(U,E.ymax));if(V){var q=((B=Math.max(B,0))+(U=Math.min(U,f._length)))/2;for(D=0;D<z.length;D++)for(L=z[D].pts,O=1;O<L.length;O++)(R=L[O-1][1])>q!=(N=L[O][1])>=q&&(I=L[O-1][0],N-R&&(P=I+(L[O][0]-I)*(q-R)/(N-R),H=Math.min(H,P),j=Math.max(j,P)));H=Math.max(H,0),j=Math.min(j,h._length);var G=s.defaultLine;return s.opacity(d.fillcolor)?G=d.fillcolor:s.opacity((d.line||{}).color)&&(G=d.line.color),r.extendFlat(t,{distance:t.maxHoverDistance,x0:H,x1:j,y0:q,y1:q,color:G,hovertemplate:!1}),delete t.index,t.text=d.text&&!Array.isArray(d.text)?String(d.text):d.name,[t]}}}},{"../../components/color":75,"../../components/fx":115,"../../lib":202,"../../registry":290,"./get_trace_color":340}],342:[function(t,e,n){"use strict";var r=t("./subtypes");e.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),formatLabels:t("./format_labels"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":261,"./arrays_to_calcdata":329,"./attributes":330,"./calc":331,"./cross_trace_calc":335,"./cross_trace_defaults":336,"./defaults":337,"./format_labels":339,"./hover":341,"./marker_colorbar":348,"./plot":351,"./select":352,"./style":354,"./subtypes":355}],343:[function(t,e,n){"use strict";var r=t("../../lib").isArrayOrTypedArray,i=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/defaults");e.exports=function(t,e,n,o,s,l){var c=(t.marker||{}).color;s("line.color",n),i(t,"line")?a(t,e,o,s,{prefix:"line.",cLetter:"c"}):s("line.color",!r(c)&&c||n),s("line.width"),(l||{}).noDash||s("line.dash")}},{"../../components/colorscale/defaults":85,"../../components/colorscale/helpers":86,"../../lib":202}],344:[function(t,e,n){"use strict";var r=t("../../constants/numerical"),i=r.BADNUM,a=r.LOG_CLIP,o=a+.5,s=a-.5,l=t("../../lib"),c=l.segmentsIntersect,u=l.constrain,d=t("./constants");e.exports=function(t,e){var n,r,a,h,f,p,g,m,v,y,b,x,_,w,k,T,M,A,C=e.xaxis,S=e.yaxis,D="log"===C.type,O="log"===S.type,E=C._length,L=S._length,P=e.connectGaps,I=e.baseTolerance,R=e.shape,N="linear"===R,F=e.fill&&"none"!==e.fill,z=[],V=d.minTolerance,H=t.length,j=new Array(H),B=0;function U(n){var r=t[n];if(!r)return!1;var a=e.linearized?C.l2p(r.x):C.c2p(r.x),l=e.linearized?S.l2p(r.y):S.c2p(r.y);if(a===i){if(D&&(a=C.c2p(r.x,!0)),a===i)return!1;O&&l===i&&(a*=Math.abs(C._m*L*(C._m>0?o:s)/(S._m*E*(S._m>0?o:s)))),a*=1e3}if(l===i){if(O&&(l=S.c2p(r.y,!0)),l===i)return!1;l*=1e3}return[a,l]}function q(t,e,n,r){var i=n-t,a=r-e,o=.5-t,s=.5-e,l=i*i+a*a,c=i*o+a*s;if(c>0&&c<l){var u=o*a-s*i;if(u*u<l)return!0}}function G(t,e){var n=t[0]/E,r=t[1]/L,i=Math.max(0,-n,n-1,-r,r-1);return i&&void 0!==M&&q(n,r,M,A)&&(i=0),i&&e&&q(n,r,e[0]/E,e[1]/L)&&(i=0),(1+d.toleranceGrowth*i)*I}function Z(t,e){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}var W,$,Y,X,Q,K,J,tt=d.maxScreensAway,et=-E*tt,nt=E*(1+tt),rt=-L*tt,it=L*(1+tt),at=[[et,rt,nt,rt],[nt,rt,nt,it],[nt,it,et,it],[et,it,et,rt]];function ot(t){if(t[0]<et||t[0]>nt||t[1]<rt||t[1]>it)return[u(t[0],et,nt),u(t[1],rt,it)]}function st(t,e){return t[0]===e[0]&&(t[0]===et||t[0]===nt)||t[1]===e[1]&&(t[1]===rt||t[1]===it)||void 0}function lt(t,e,n){return function(r,i){var a=ot(r),o=ot(i),s=[];if(a&&o&&st(a,o))return s;a&&s.push(a),o&&s.push(o);var c=2*l.constrain((r[t]+i[t])/2,e,n)-((a||r)[t]+(o||i)[t]);return c&&((a&&o?c>0==a[t]>o[t]?a:o:a||o)[t]+=c),s}}function ct(t){var e=t[0],n=t[1],r=e===j[B-1][0],i=n===j[B-1][1];if(!r||!i)if(B>1){var a=e===j[B-2][0],o=n===j[B-2][1];r&&(e===et||e===nt)&&a?o?B--:j[B-1]=t:i&&(n===rt||n===it)&&o?a?B--:j[B-1]=t:j[B++]=t}else j[B++]=t}function ut(t){j[B-1][0]!==t[0]&&j[B-1][1]!==t[1]&&ct([Y,X]),ct(t),Q=null,Y=X=0}function dt(t){if(M=t[0]/E,A=t[1]/L,$=t[1]<rt?rt:t[1]>it?it:0,(W=t[0]<et?et:t[0]>nt?nt:0)||$){if(B)if(Q){var e=J(Q,t);e.length>1&&(ut(e[0]),j[B++]=e[1])}else K=J(j[B-1],t)[0],j[B++]=K;else j[B++]=[W||t[0],$||t[1]];var n=j[B-1];W&&$&&(n[0]!==W||n[1]!==$)?(Q&&(Y!==W&&X!==$?ct(Y&&X?(a=(i=t)[0]-(r=Q)[0],o=(i[1]-r[1])/a,(r[1]*i[0]-i[1]*r[0])/a>0?[o>0?et:nt,it]:[o>0?nt:et,rt]):[Y||W,X||$]):Y&&X&&ct([Y,X])),ct([W,$])):Y-W&&X-$&&ct([W||Y,$||X]),Q=t,Y=W,X=$}else Q&&ut(J(Q,t)[0]),j[B++]=t;var r,i,a,o}for("linear"===R||"spline"===R?J=function(t,e){for(var n=[],r=0,i=0;i<4;i++){var a=at[i],o=c(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);o&&(!r||Math.abs(o.x-n[0][0])>1||Math.abs(o.y-n[0][1])>1)&&(o=[o.x,o.y],r&&Z(o,t)<Z(n[0],t)?n.unshift(o):n.push(o),r++)}return n}:"hv"===R||"vh"===R?J=function(t,e){var n=[],r=ot(t),i=ot(e);return r&&i&&st(r,i)||(r&&n.push(r),i&&n.push(i)),n}:"hvh"===R?J=lt(0,et,nt):"vhv"===R&&(J=lt(1,rt,it)),n=0;n<H;n++)if(r=U(n)){for(B=0,Q=null,dt(r),n++;n<H;n++){if(!(h=U(n))){if(P)continue;break}if(N&&e.simplify){var ht=U(n+1);if(y=Z(h,r),F&&(0===B||B===H-1)||!(y<G(h,ht)*V)){for(m=[(h[0]-r[0])/y,(h[1]-r[1])/y],f=r,b=y,x=w=k=0,g=!1,a=h,n++;n<t.length;n++){if(p=ht,ht=U(n+1),!p){if(P)continue;break}if(T=(v=[p[0]-r[0],p[1]-r[1]])[0]*m[1]-v[1]*m[0],w=Math.min(w,T),(k=Math.max(k,T))-w>G(p,ht))break;a=p,(_=v[0]*m[0]+v[1]*m[1])>b?(b=_,h=p,g=!1):_<x&&(x=_,f=p,g=!0)}if(g?(dt(h),a!==f&&dt(f)):(f!==r&&dt(f),a!==h&&dt(h)),dt(a),n>=t.length||!p)break;dt(p),r=p}}else dt(h)}Q&&ct([Y||Q[0],X||Q[1]]),z.push(j.slice(0,B))}return z}},{"../../constants/numerical":181,"../../lib":202,"./constants":334}],345:[function(t,e,n){"use strict";e.exports=function(t,e,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],346:[function(t,e,n){"use strict";var r={tonextx:1,tonexty:1,tonext:1};e.exports=function(t,e,n){var i,a,o,s,l,c={},u=!1,d=-1,h=0,f=-1;for(a=0;a<n.length;a++)(o=(i=n[a][0].trace).stackgroup||"")?o in c?l=c[o]:(l=c[o]=h,h++):i.fill in r&&f>=0?l=f:(l=f=h,h++),l<d&&(u=!0),i._groupIndex=d=l;var p=n.slice();u&&p.sort(function(t,e){var n=t[0].trace,r=e[0].trace;return n._groupIndex-r._groupIndex||n.index-r.index});var g={};for(a=0;a<p.length;a++)o=(i=p[a][0].trace).stackgroup||"",!0===i.visible?(i._nexttrace=null,i.fill in r&&(i._prevtrace=(s=g[o])||null,s&&(s._nexttrace=i)),i._ownfill=i.fill&&("tozero"===i.fill.substr(0,6)||"toself"===i.fill||"to"===i.fill.substr(0,2)&&!i._prevtrace),g[o]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return p}},{}],347:[function(t,e,n){"use strict";var r=t("fast-isnumeric");e.exports=function(t){var e=t.marker,n=e.sizeref||1,i=e.sizemin||0,a="area"===e.sizemode?function(t){return Math.sqrt(t/n)}:function(t){return t/n};return function(t){var e=a(t/2);return r(e)&&e>0?Math.max(e,i):0}}},{"fast-isnumeric":11}],348:[function(t,e,n){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},{}],349:[function(t,e,n){"use strict";var r=t("../../components/color"),i=t("../../components/colorscale/helpers").hasColorscale,a=t("../../components/colorscale/defaults"),o=t("./subtypes");e.exports=function(t,e,n,s,l,c){var u=o.isBubble(t),d=(t.line||{}).color;c=c||{},d&&(n=d),l("marker.symbol"),l("marker.opacity",u?.7:1),l("marker.size"),l("marker.color",n),i(t,"marker")&&a(t,e,s,l,{prefix:"marker.",cLetter:"c"}),c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),c.noLine||(l("marker.line.color",d&&!Array.isArray(d)&&e.marker.color!==d?d:u?r.background:r.defaultLine),i(t,"marker.line")&&a(t,e,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",u?1:0)),u&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),c.gradient&&"none"!==l("marker.gradient.type")&&l("marker.gradient.color")}},{"../../components/color":75,"../../components/colorscale/defaults":85,"../../components/colorscale/helpers":86,"./subtypes":355}],350:[function(t,e,n){"use strict";var r=t("../../lib").dateTick0,i=t("../../constants/numerical").ONEWEEK;function a(t,e){return r(e,t%i==0?1:0)}e.exports=function(t,e,n,r,i){if(i||(i={x:!0,y:!0}),i.x){var o=r("xperiod");o&&(r("xperiod0",a(o,e.xcalendar)),r("xperiodalignment"))}if(i.y){var s=r("yperiod");s&&(r("yperiod0",a(s,e.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":181,"../../lib":202}],351:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../registry"),a=t("../../lib"),o=a.ensureSingle,s=a.identity,l=t("../../components/drawing"),c=t("./subtypes"),u=t("./line_points"),d=t("./link_traces"),h=t("../../lib/polygon").tester;function f(t,e,n,d,f,p,g){var m;!function(t,e,n,i,o){var s=n.xaxis,l=n.yaxis,u=r.extent(a.simpleMap(s.range,s.r2c)),d=r.extent(a.simpleMap(l.range,l.r2c)),h=i[0].trace;if(c.hasMarkers(h)){var f=h.marker.maxdisplayed;if(0!==f){var p=i.filter(function(t){return t.x>=u[0]&&t.x<=u[1]&&t.y>=d[0]&&t.y<=d[1]}),g=Math.ceil(p.length/f),m=0;o.forEach(function(t,n){var r=t[0].trace;c.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<e&&m++});var v=Math.round(m*g/3+Math.floor(m/3)*g/7.1);i.forEach(function(t){delete t.vis}),p.forEach(function(t,e){0===Math.round((e+v)%g)&&(t.vis=!0)})}}}(0,e,n,d,f);var v=!!g&&g.duration>0;function y(t){return v?t.transition():t}var b=n.xaxis,x=n.yaxis,_=d[0].trace,w=_.line,k=r.select(p),T=o(k,"g","errorbars"),M=o(k,"g","lines"),A=o(k,"g","points"),C=o(k,"g","text");if(i.getComponentMethod("errorbars","plot")(t,T,n,g),!0===_.visible){var S,D;y(k).style("opacity",_.opacity);var O=_.fill.charAt(_.fill.length-1);"x"!==O&&"y"!==O&&(O=""),d[0][n.isRangePlot?"nodeRangePlot3":"node3"]=k;var E,L,P="",I=[],R=_._prevtrace;R&&(P=R._prevRevpath||"",D=R._nextFill,I=R._polygons);var N,F,z,V,H,j,B,U="",q="",G=[],Z=a.noop;if(S=_._ownFill,c.hasLines(_)||"none"!==_.fill){for(D&&D.datum(d),-1!==["hv","vh","hvh","vhv"].indexOf(w.shape)?(N=l.steps(w.shape),F=l.steps(w.shape.split("").reverse().join(""))):N=F="spline"===w.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?l.smoothclosed(t.slice(1),w.smoothing):l.smoothopen(t,w.smoothing)}:function(t){return"M"+t.join("L")},z=function(t){return F(t.reverse())},G=u(d,{xaxis:b,yaxis:x,connectGaps:_.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,simplify:w.simplify,fill:_.fill}),B=_._polygons=new Array(G.length),m=0;m<G.length;m++)_._polygons[m]=h(G[m]);G.length&&(V=G[0][0],j=(H=G[G.length-1])[H.length-1]),Z=function(t){return function(e){if(E=N(e),L=z(e),U?O?(U+="L"+E.substr(1),q=L+"L"+q.substr(1)):(U+="Z"+E,q=L+"Z"+q):(U=E,q=L),c.hasLines(_)&&e.length>1){var n=r.select(this);if(n.datum(d),t)y(n.style("opacity",0).attr("d",E).call(l.lineGroupStyle)).style("opacity",1);else{var i=y(n);i.attr("d",E),l.singleLineStyle(d,i)}}}}}var W=M.selectAll(".js-line").data(G);y(W.exit()).style("opacity",0).remove(),W.each(Z(!1)),W.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(Z(!0)),l.setClipUrl(W,n.layerClipId,t),G.length?(S?(S.datum(d),V&&j&&(O?("y"===O?V[1]=j[1]=x.c2p(0,!0):"x"===O&&(V[0]=j[0]=b.c2p(0,!0)),y(S).attr("d","M"+j+"L"+V+"L"+U.substr(1)).call(l.singleFillStyle)):y(S).attr("d",U+"Z").call(l.singleFillStyle))):D&&("tonext"===_.fill.substr(0,6)&&U&&P?("tonext"===_.fill?y(D).attr("d",U+"Z"+P+"Z").call(l.singleFillStyle):y(D).attr("d",U+"L"+P.substr(1)+"Z").call(l.singleFillStyle),_._polygons=_._polygons.concat(I)):(Y(D),_._polygons=null)),_._prevRevpath=q,_._prevPolygons=B):(S?Y(S):D&&Y(D),_._polygons=_._prevRevpath=_._prevPolygons=null),A.datum(d),C.datum(d),function(e,i,a){var o,u=a[0].trace,d=c.hasMarkers(u),h=c.hasText(u),f=function(t){if(t.ids)return J}(u),p=tt,g=tt;if(d||h){var m=s,_=u.stackgroup,w=_&&"infer zero"===t._fullLayout._scatterStackOpts[b._id+x._id][_].stackgaps;u.marker.maxdisplayed||u._needsCull?m=w?Q:X:_&&!w&&(m=K),d&&(p=m),h&&(g=m)}var k,T=(o=e.selectAll("path.point").data(p,f)).enter().append("path").classed("point",!0);v&&T.call(l.pointStyle,u,t).call(l.translatePoints,b,x).style("opacity",0).transition().style("opacity",1),o.order(),d&&(k=l.makePointStyleFns(u)),o.each(function(e){var i=r.select(this),a=y(i);l.translatePoint(e,a,b,x)?(l.singlePointStyle(e,a,u,k,t),n.layerClipId&&l.hideOutsideRangePoint(e,a,b,x,u.xcalendar,u.ycalendar),u.customdata&&i.classed("plotly-customdata",null!=e.data)):a.remove()}),v?o.exit().transition().style("opacity",0).remove():o.exit().remove(),(o=i.selectAll("g").data(g,f)).enter().append("g").classed("textpoint",!0).append("text"),o.order(),o.each(function(t){var e=r.select(this),i=y(e.select("text"));l.translatePoint(t,i,b,x)?n.layerClipId&&l.hideOutsideRangePoint(t,e,b,x,u.xcalendar,u.ycalendar):e.remove()}),o.selectAll("text").call(l.textPointStyle,u,t).each(function(t){var e=b.c2p(t.x),n=x.c2p(t.y);r.select(this).selectAll("tspan.line").each(function(){y(r.select(this)).attr({x:e,y:n})})}),o.exit().remove()}(A,C,d);var $=!1===_.cliponaxis?null:n.layerClipId;l.setClipUrl(A,$,t),l.setClipUrl(C,$,t)}function Y(t){y(t).attr("d","M0,0Z")}function X(t){return t.filter(function(t){return!t.gap&&t.vis})}function Q(t){return t.filter(function(t){return t.vis})}function K(t){return t.filter(function(t){return!t.gap})}function J(t){return t.id}function tt(){return!1}}e.exports=function(t,e,n,i,a,c){var u,h,p=!a,g=!!a&&a.duration>0,m=d(t,e,n);(u=i.selectAll("g.trace").data(m,function(t){return t[0].trace.uid})).enter().append("g").attr("class",function(t){return"trace scatter trace"+t[0].trace.uid}).style("stroke-miterlimit",2),u.order(),function(t,e,n){e.each(function(e){var i=o(r.select(this),"g","fills");l.setClipUrl(i,n.layerClipId,t);var a=e[0].trace,c=[];a._ownfill&&c.push("_ownFill"),a._nexttrace&&c.push("_nextFill");var u=i.selectAll("g").data(c,s);u.enter().append("g"),u.exit().each(function(t){a[t]=null}).remove(),u.order().each(function(t){a[t]=o(r.select(this),"path","js-fill")})})}(t,u,e),g?(c&&(h=c()),r.transition().duration(a.duration).ease(a.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).each(function(){i.selectAll("g.trace").each(function(n,r){f(t,r,e,n,m,this,a)})})):u.each(function(n,r){f(t,r,e,n,m,this,a)}),p&&u.exit().remove(),i.selectAll("path:not([d])").remove()}},{"../../components/drawing":97,"../../lib":202,"../../lib/polygon":214,"../../registry":290,"./line_points":344,"./link_traces":346,"./subtypes":355,d3:9}],352:[function(t,e,n){"use strict";var r=t("./subtypes");e.exports=function(t,e){var n,i,a,o,s=t.cd,l=t.xaxis,c=t.yaxis,u=[],d=s[0].trace;if(!r.hasMarkers(d)&&!r.hasText(d))return[];if(!1===e)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)a=l.c2p((i=s[n]).x),o=c.c2p(i.y),null!==i.i&&e.contains([a,o],!1,n,t)?(u.push({pointNumber:i.i,x:l.c2d(i.x),y:c.c2d(i.y)}),i.selected=1):i.selected=0;return u}},{"./subtypes":355}],353:[function(t,e,n){"use strict";var r=["orientation","groupnorm","stackgaps"];e.exports=function(t,e,n,i){var a=n._scatterStackOpts,o=i("stackgroup");if(o){var s=e.xaxis+e.yaxis,l=a[s];l||(l=a[s]={});var c=l[o],u=!1;c?c.traces.push(e):(c=l[o]={traceIndices:[],traces:[e]},u=!0);for(var d={orientation:e.x&&!e.y?"h":"v"},h=0;h<r.length;h++){var f=r[h],p=f+"Found";if(!c[p]){var g=void 0!==t[f],m="orientation"===f;if((g||u)&&(c[f]=i(f,d[f]),m&&(c.fillDflt="h"===c[f]?"tonextx":"tonexty"),g&&(c[p]=!0,!u&&(delete c.traces[0][f],m))))for(var v=0;v<c.traces.length-1;v++){var y=c.traces[v];y._input.fill!==y.fill&&(y.fill=c.fillDflt)}}}return c}}},{}],354:[function(t,e,n){"use strict";var r=t("d3"),i=t("../../components/drawing"),a=t("../../registry");function o(t,e,n){i.pointStyle(t.selectAll("path.point"),e,n)}function s(t,e,n){i.textPointStyle(t.selectAll("text"),e,n)}e.exports={style:function(t){var e=r.select(t).selectAll("g.trace.scatter");e.style("opacity",function(t){return t[0].trace.opacity}),e.selectAll("g.points").each(function(e){o(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.text").each(function(e){s(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.trace path.js-line").call(i.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),a.getComponentMethod("errorbars","style")(e)},stylePoints:o,styleText:s,styleOnSelect:function(t,e,n){var r=e[0].trace;r.selectedpoints?(i.selectedPointStyle(n.selectAll("path.point"),r),i.selectedTextStyle(n.selectAll("text"),r)):(o(n,r,t),s(n,r,t))}}},{"../../components/drawing":97,"../../registry":290,d3:9}],355:[function(t,e,n){"use strict";var r=t("../../lib");e.exports={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return r.isPlainObject(t.marker)&&r.isArrayOrTypedArray(t.marker.size)}}},{"../../lib":202}],356:[function(t,e,n){"use strict";var r=t("../../lib");e.exports=function(t,e,n,i,a){a=a||{},i("textposition"),r.coerceFont(i,"textfont",n.font),a.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}},{"../../lib":202}],357:[function(t,e,n){"use strict";var r=t("../../lib"),i=t("../../registry");e.exports=function(t,e,n,a){var o,s=a("x"),l=a("y");if(i.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],n),s){var c=r.minRowLength(s);l?o=Math.min(c,r.minRowLength(l)):(o=c,a("y0"),a("dy"))}else{if(!l)return 0;o=r.minRowLength(l),a("x0"),a("dx")}return e._length=o,o}},{"../../lib":202,"../../registry":290}],358:[function(t,e,n){"use strict";n.version="1.58.4"},{}]},{},[4])(4)},566:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=566,t.exports=e}},t=>{"use strict";t(t.s=644)}]);