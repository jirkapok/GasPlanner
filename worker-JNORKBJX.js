var ym=Object.create;var wo=Object.defineProperty;var Tm=Object.getOwnPropertyDescriptor;var Pm=Object.getOwnPropertyNames;var Am=Object.getPrototypeOf,Cm=Object.prototype.hasOwnProperty;var Om=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports);var bm=(a,n,i,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of Pm(n))!Cm.call(a,h)&&h!==i&&wo(a,h,{get:()=>n[h],enumerable:!(u=Tm(n,h))||u.enumerable});return a};var xo=(a,n,i)=>(i=a!=null?ym(Am(a)):{},bm(n||!a||!a.__esModule?wo(i,"default",{value:a,enumerable:!0}):i,a));var Os=Om((hn,Un)=>{"use strict";(function(){var a,n="4.17.21",i=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",p="Invalid `variable` option passed into `_.template`",S="__lodash_hash_undefined__",y=500,T="__lodash_placeholder__",C=1,k=2,Z=4,Q=1,q=2,X=1,yt=2,re=4,Mt=8,ve=16,Ot=32,Se=64,ie=128,Dn=256,ai=512,Co=30,Oo="...",bo=800,Eo=16,Us=1,Io=2,Ro=3,Re=1/0,De=9007199254740991,Bo=17976931348623157e292,er=NaN,Qt=4294967295,Lo=Qt-1,Mo=Qt>>>1,No=[["ary",ie],["bind",X],["bindKey",yt],["curry",Mt],["curryRight",ve],["flip",ai],["partial",Ot],["partialRight",Se],["rearg",Dn]],qe="[object Arguments]",nr="[object Array]",Ho="[object AsyncFunction]",_n="[object Boolean]",wn="[object Date]",Fo="[object DOMException]",rr="[object Error]",ir="[object Function]",zs="[object GeneratorFunction]",Kt="[object Map]",xn="[object Number]",Go="[object Null]",se="[object Object]",$s="[object Promise]",Wo="[object Proxy]",yn="[object RegExp]",Yt="[object Set]",Tn="[object String]",sr="[object Symbol]",ko="[object Undefined]",Pn="[object WeakMap]",Uo="[object WeakSet]",An="[object ArrayBuffer]",Ve="[object DataView]",ui="[object Float32Array]",oi="[object Float64Array]",ci="[object Int8Array]",hi="[object Int16Array]",fi="[object Int32Array]",li="[object Uint8Array]",pi="[object Uint8ClampedArray]",di="[object Uint16Array]",gi="[object Uint32Array]",zo=/\b__p \+= '';/g,$o=/\b(__p \+=) '' \+/g,Ko=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ks=/&(?:amp|lt|gt|quot|#39);/g,Ys=/[&<>"']/g,Yo=RegExp(Ks.source),Zo=RegExp(Ys.source),qo=/<%-([\s\S]+?)%>/g,Vo=/<%([\s\S]+?)%>/g,Zs=/<%=([\s\S]+?)%>/g,Xo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jo=/^\w*$/,Qo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mi=/[\\^$.*+?()[\]{}|]/g,jo=RegExp(mi.source),vi=/^\s+/,tc=/\s/,ec=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nc=/\{\n\/\* \[wrapped with (.+)\] \*/,rc=/,? & /,ic=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sc=/[()=,{}\[\]\/\s]/,ac=/\\(\\)?/g,uc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qs=/\w*$/,oc=/^[-+]0x[0-9a-f]+$/i,cc=/^0b[01]+$/i,hc=/^\[object .+?Constructor\]$/,fc=/^0o[0-7]+$/i,lc=/^(?:0|[1-9]\d*)$/,pc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ar=/($^)/,dc=/['\n\r\u2028\u2029\\]/g,ur="\\ud800-\\udfff",gc="\\u0300-\\u036f",mc="\\ufe20-\\ufe2f",vc="\\u20d0-\\u20ff",Vs=gc+mc+vc,Xs="\\u2700-\\u27bf",Js="a-z\\xdf-\\xf6\\xf8-\\xff",Sc="\\xac\\xb1\\xd7\\xf7",Dc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_c="\\u2000-\\u206f",wc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qs="A-Z\\xc0-\\xd6\\xd8-\\xde",js="\\ufe0e\\ufe0f",ta=Sc+Dc+_c+wc,Si="['\u2019]",xc="["+ur+"]",ea="["+ta+"]",or="["+Vs+"]",na="\\d+",yc="["+Xs+"]",ra="["+Js+"]",ia="[^"+ur+ta+na+Xs+Js+Qs+"]",Di="\\ud83c[\\udffb-\\udfff]",Tc="(?:"+or+"|"+Di+")",sa="[^"+ur+"]",_i="(?:\\ud83c[\\udde6-\\uddff]){2}",wi="[\\ud800-\\udbff][\\udc00-\\udfff]",Xe="["+Qs+"]",aa="\\u200d",ua="(?:"+ra+"|"+ia+")",Pc="(?:"+Xe+"|"+ia+")",oa="(?:"+Si+"(?:d|ll|m|re|s|t|ve))?",ca="(?:"+Si+"(?:D|LL|M|RE|S|T|VE))?",ha=Tc+"?",fa="["+js+"]?",Ac="(?:"+aa+"(?:"+[sa,_i,wi].join("|")+")"+fa+ha+")*",Cc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Oc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",la=fa+ha+Ac,bc="(?:"+[yc,_i,wi].join("|")+")"+la,Ec="(?:"+[sa+or+"?",or,_i,wi,xc].join("|")+")",Ic=RegExp(Si,"g"),Rc=RegExp(or,"g"),xi=RegExp(Di+"(?="+Di+")|"+Ec+la,"g"),Bc=RegExp([Xe+"?"+ra+"+"+oa+"(?="+[ea,Xe,"$"].join("|")+")",Pc+"+"+ca+"(?="+[ea,Xe+ua,"$"].join("|")+")",Xe+"?"+ua+"+"+oa,Xe+"+"+ca,Oc,Cc,na,bc].join("|"),"g"),Lc=RegExp("["+aa+ur+Vs+js+"]"),Mc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Nc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hc=-1,J={};J[ui]=J[oi]=J[ci]=J[hi]=J[fi]=J[li]=J[pi]=J[di]=J[gi]=!0,J[qe]=J[nr]=J[An]=J[_n]=J[Ve]=J[wn]=J[rr]=J[ir]=J[Kt]=J[xn]=J[se]=J[yn]=J[Yt]=J[Tn]=J[Pn]=!1;var V={};V[qe]=V[nr]=V[An]=V[Ve]=V[_n]=V[wn]=V[ui]=V[oi]=V[ci]=V[hi]=V[fi]=V[Kt]=V[xn]=V[se]=V[yn]=V[Yt]=V[Tn]=V[sr]=V[li]=V[pi]=V[di]=V[gi]=!0,V[rr]=V[ir]=V[Pn]=!1;var Fc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Gc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Uc=parseFloat,zc=parseInt,pa=typeof global=="object"&&global&&global.Object===Object&&global,$c=typeof self=="object"&&self&&self.Object===Object&&self,lt=pa||$c||Function("return this")(),yi=typeof hn=="object"&&hn&&!hn.nodeType&&hn,Be=yi&&typeof Un=="object"&&Un&&!Un.nodeType&&Un,da=Be&&Be.exports===yi,Ti=da&&pa.process,Nt=function(){try{var g=Be&&Be.require&&Be.require("util").types;return g||Ti&&Ti.binding&&Ti.binding("util")}catch{}}(),ga=Nt&&Nt.isArrayBuffer,ma=Nt&&Nt.isDate,va=Nt&&Nt.isMap,Sa=Nt&&Nt.isRegExp,Da=Nt&&Nt.isSet,_a=Nt&&Nt.isTypedArray;function bt(g,D,v){switch(v.length){case 0:return g.call(D);case 1:return g.call(D,v[0]);case 2:return g.call(D,v[0],v[1]);case 3:return g.call(D,v[0],v[1],v[2])}return g.apply(D,v)}function Kc(g,D,v,A){for(var R=-1,U=g==null?0:g.length;++R<U;){var ut=g[R];D(A,ut,v(ut),g)}return A}function Ht(g,D){for(var v=-1,A=g==null?0:g.length;++v<A&&D(g[v],v,g)!==!1;);return g}function Yc(g,D){for(var v=g==null?0:g.length;v--&&D(g[v],v,g)!==!1;);return g}function wa(g,D){for(var v=-1,A=g==null?0:g.length;++v<A;)if(!D(g[v],v,g))return!1;return!0}function _e(g,D){for(var v=-1,A=g==null?0:g.length,R=0,U=[];++v<A;){var ut=g[v];D(ut,v,g)&&(U[R++]=ut)}return U}function cr(g,D){var v=g==null?0:g.length;return!!v&&Je(g,D,0)>-1}function Pi(g,D,v){for(var A=-1,R=g==null?0:g.length;++A<R;)if(v(D,g[A]))return!0;return!1}function j(g,D){for(var v=-1,A=g==null?0:g.length,R=Array(A);++v<A;)R[v]=D(g[v],v,g);return R}function we(g,D){for(var v=-1,A=D.length,R=g.length;++v<A;)g[R+v]=D[v];return g}function Ai(g,D,v,A){var R=-1,U=g==null?0:g.length;for(A&&U&&(v=g[++R]);++R<U;)v=D(v,g[R],R,g);return v}function Zc(g,D,v,A){var R=g==null?0:g.length;for(A&&R&&(v=g[--R]);R--;)v=D(v,g[R],R,g);return v}function Ci(g,D){for(var v=-1,A=g==null?0:g.length;++v<A;)if(D(g[v],v,g))return!0;return!1}var qc=Oi("length");function Vc(g){return g.split("")}function Xc(g){return g.match(ic)||[]}function xa(g,D,v){var A;return v(g,function(R,U,ut){if(D(R,U,ut))return A=U,!1}),A}function hr(g,D,v,A){for(var R=g.length,U=v+(A?1:-1);A?U--:++U<R;)if(D(g[U],U,g))return U;return-1}function Je(g,D,v){return D===D?oh(g,D,v):hr(g,ya,v)}function Jc(g,D,v,A){for(var R=v-1,U=g.length;++R<U;)if(A(g[R],D))return R;return-1}function ya(g){return g!==g}function Ta(g,D){var v=g==null?0:g.length;return v?Ei(g,D)/v:er}function Oi(g){return function(D){return D==null?a:D[g]}}function bi(g){return function(D){return g==null?a:g[D]}}function Pa(g,D,v,A,R){return R(g,function(U,ut,K){v=A?(A=!1,U):D(v,U,ut,K)}),v}function Qc(g,D){var v=g.length;for(g.sort(D);v--;)g[v]=g[v].value;return g}function Ei(g,D){for(var v,A=-1,R=g.length;++A<R;){var U=D(g[A]);U!==a&&(v=v===a?U:v+U)}return v}function Ii(g,D){for(var v=-1,A=Array(g);++v<g;)A[v]=D(v);return A}function jc(g,D){return j(D,function(v){return[v,g[v]]})}function Aa(g){return g&&g.slice(0,Ea(g)+1).replace(vi,"")}function Et(g){return function(D){return g(D)}}function Ri(g,D){return j(D,function(v){return g[v]})}function Cn(g,D){return g.has(D)}function Ca(g,D){for(var v=-1,A=g.length;++v<A&&Je(D,g[v],0)>-1;);return v}function Oa(g,D){for(var v=g.length;v--&&Je(D,g[v],0)>-1;);return v}function th(g,D){for(var v=g.length,A=0;v--;)g[v]===D&&++A;return A}var eh=bi(Fc),nh=bi(Gc);function rh(g){return"\\"+kc[g]}function ih(g,D){return g==null?a:g[D]}function Qe(g){return Lc.test(g)}function sh(g){return Mc.test(g)}function ah(g){for(var D,v=[];!(D=g.next()).done;)v.push(D.value);return v}function Bi(g){var D=-1,v=Array(g.size);return g.forEach(function(A,R){v[++D]=[R,A]}),v}function ba(g,D){return function(v){return g(D(v))}}function xe(g,D){for(var v=-1,A=g.length,R=0,U=[];++v<A;){var ut=g[v];(ut===D||ut===T)&&(g[v]=T,U[R++]=v)}return U}function fr(g){var D=-1,v=Array(g.size);return g.forEach(function(A){v[++D]=A}),v}function uh(g){var D=-1,v=Array(g.size);return g.forEach(function(A){v[++D]=[A,A]}),v}function oh(g,D,v){for(var A=v-1,R=g.length;++A<R;)if(g[A]===D)return A;return-1}function ch(g,D,v){for(var A=v+1;A--;)if(g[A]===D)return A;return A}function je(g){return Qe(g)?fh(g):qc(g)}function Zt(g){return Qe(g)?lh(g):Vc(g)}function Ea(g){for(var D=g.length;D--&&tc.test(g.charAt(D)););return D}var hh=bi(Wc);function fh(g){for(var D=xi.lastIndex=0;xi.test(g);)++D;return D}function lh(g){return g.match(xi)||[]}function ph(g){return g.match(Bc)||[]}var dh=function g(D){D=D==null?lt:ye.defaults(lt.Object(),D,ye.pick(lt,Nc));var v=D.Array,A=D.Date,R=D.Error,U=D.Function,ut=D.Math,K=D.Object,Li=D.RegExp,gh=D.String,Ft=D.TypeError,lr=v.prototype,mh=U.prototype,tn=K.prototype,pr=D["__core-js_shared__"],dr=mh.toString,$=tn.hasOwnProperty,vh=0,Ia=function(){var t=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gr=tn.toString,Sh=dr.call(K),Dh=lt._,_h=Li("^"+dr.call($).replace(mi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mr=da?D.Buffer:a,Te=D.Symbol,vr=D.Uint8Array,Ra=mr?mr.allocUnsafe:a,Sr=ba(K.getPrototypeOf,K),Ba=K.create,La=tn.propertyIsEnumerable,Dr=lr.splice,Ma=Te?Te.isConcatSpreadable:a,On=Te?Te.iterator:a,Le=Te?Te.toStringTag:a,_r=function(){try{var t=Ge(K,"defineProperty");return t({},"",{}),t}catch{}}(),wh=D.clearTimeout!==lt.clearTimeout&&D.clearTimeout,xh=A&&A.now!==lt.Date.now&&A.now,yh=D.setTimeout!==lt.setTimeout&&D.setTimeout,wr=ut.ceil,xr=ut.floor,Mi=K.getOwnPropertySymbols,Th=mr?mr.isBuffer:a,Na=D.isFinite,Ph=lr.join,Ah=ba(K.keys,K),ot=ut.max,mt=ut.min,Ch=A.now,Oh=D.parseInt,Ha=ut.random,bh=lr.reverse,Ni=Ge(D,"DataView"),bn=Ge(D,"Map"),Hi=Ge(D,"Promise"),en=Ge(D,"Set"),En=Ge(D,"WeakMap"),In=Ge(K,"create"),yr=En&&new En,nn={},Eh=We(Ni),Ih=We(bn),Rh=We(Hi),Bh=We(en),Lh=We(En),Tr=Te?Te.prototype:a,Rn=Tr?Tr.valueOf:a,Fa=Tr?Tr.toString:a;function c(t){if(et(t)&&!B(t)&&!(t instanceof F)){if(t instanceof Gt)return t;if($.call(t,"__wrapped__"))return Gu(t)}return new Gt(t)}var rn=function(){function t(){}return function(e){if(!tt(e))return{};if(Ba)return Ba(e);t.prototype=e;var r=new t;return t.prototype=a,r}}();function Pr(){}function Gt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}c.templateSettings={escape:qo,evaluate:Vo,interpolate:Zs,variable:"",imports:{_:c}},c.prototype=Pr.prototype,c.prototype.constructor=c,Gt.prototype=rn(Pr.prototype),Gt.prototype.constructor=Gt;function F(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qt,this.__views__=[]}function Mh(){var t=new F(this.__wrapped__);return t.__actions__=Tt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Tt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Tt(this.__views__),t}function Nh(){if(this.__filtered__){var t=new F(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Hh(){var t=this.__wrapped__.value(),e=this.__dir__,r=B(t),s=e<0,o=r?t.length:0,f=Xf(0,o,this.__views__),l=f.start,d=f.end,m=d-l,_=s?d:l-1,w=this.__iteratees__,x=w.length,P=0,O=mt(m,this.__takeCount__);if(!r||!s&&o==m&&O==m)return ou(t,this.__actions__);var E=[];t:for(;m--&&P<O;){_+=e;for(var M=-1,I=t[_];++M<x;){var H=w[M],G=H.iteratee,Bt=H.type,wt=G(I);if(Bt==Io)I=wt;else if(!wt){if(Bt==Us)continue t;break t}}E[P++]=I}return E}F.prototype=rn(Pr.prototype),F.prototype.constructor=F;function Me(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function Fh(){this.__data__=In?In(null):{},this.size=0}function Gh(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Wh(t){var e=this.__data__;if(In){var r=e[t];return r===S?a:r}return $.call(e,t)?e[t]:a}function kh(t){var e=this.__data__;return In?e[t]!==a:$.call(e,t)}function Uh(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=In&&e===a?S:e,this}Me.prototype.clear=Fh,Me.prototype.delete=Gh,Me.prototype.get=Wh,Me.prototype.has=kh,Me.prototype.set=Uh;function ae(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function zh(){this.__data__=[],this.size=0}function $h(t){var e=this.__data__,r=Ar(e,t);if(r<0)return!1;var s=e.length-1;return r==s?e.pop():Dr.call(e,r,1),--this.size,!0}function Kh(t){var e=this.__data__,r=Ar(e,t);return r<0?a:e[r][1]}function Yh(t){return Ar(this.__data__,t)>-1}function Zh(t,e){var r=this.__data__,s=Ar(r,t);return s<0?(++this.size,r.push([t,e])):r[s][1]=e,this}ae.prototype.clear=zh,ae.prototype.delete=$h,ae.prototype.get=Kh,ae.prototype.has=Yh,ae.prototype.set=Zh;function ue(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function qh(){this.size=0,this.__data__={hash:new Me,map:new(bn||ae),string:new Me}}function Vh(t){var e=Fr(this,t).delete(t);return this.size-=e?1:0,e}function Xh(t){return Fr(this,t).get(t)}function Jh(t){return Fr(this,t).has(t)}function Qh(t,e){var r=Fr(this,t),s=r.size;return r.set(t,e),this.size+=r.size==s?0:1,this}ue.prototype.clear=qh,ue.prototype.delete=Vh,ue.prototype.get=Xh,ue.prototype.has=Jh,ue.prototype.set=Qh;function Ne(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new ue;++e<r;)this.add(t[e])}function jh(t){return this.__data__.set(t,S),this}function tf(t){return this.__data__.has(t)}Ne.prototype.add=Ne.prototype.push=jh,Ne.prototype.has=tf;function qt(t){var e=this.__data__=new ae(t);this.size=e.size}function ef(){this.__data__=new ae,this.size=0}function nf(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function rf(t){return this.__data__.get(t)}function sf(t){return this.__data__.has(t)}function af(t,e){var r=this.__data__;if(r instanceof ae){var s=r.__data__;if(!bn||s.length<i-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new ue(s)}return r.set(t,e),this.size=r.size,this}qt.prototype.clear=ef,qt.prototype.delete=nf,qt.prototype.get=rf,qt.prototype.has=sf,qt.prototype.set=af;function Ga(t,e){var r=B(t),s=!r&&ke(t),o=!r&&!s&&be(t),f=!r&&!s&&!o&&on(t),l=r||s||o||f,d=l?Ii(t.length,gh):[],m=d.length;for(var _ in t)(e||$.call(t,_))&&!(l&&(_=="length"||o&&(_=="offset"||_=="parent")||f&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||fe(_,m)))&&d.push(_);return d}function Wa(t){var e=t.length;return e?t[qi(0,e-1)]:a}function uf(t,e){return Gr(Tt(t),He(e,0,t.length))}function of(t){return Gr(Tt(t))}function Fi(t,e,r){(r!==a&&!Vt(t[e],r)||r===a&&!(e in t))&&oe(t,e,r)}function Bn(t,e,r){var s=t[e];(!($.call(t,e)&&Vt(s,r))||r===a&&!(e in t))&&oe(t,e,r)}function Ar(t,e){for(var r=t.length;r--;)if(Vt(t[r][0],e))return r;return-1}function cf(t,e,r,s){return Pe(t,function(o,f,l){e(s,o,r(o),l)}),s}function ka(t,e){return t&&te(e,pt(e),t)}function hf(t,e){return t&&te(e,At(e),t)}function oe(t,e,r){e=="__proto__"&&_r?_r(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Gi(t,e){for(var r=-1,s=e.length,o=v(s),f=t==null;++r<s;)o[r]=f?a:Ds(t,e[r]);return o}function He(t,e,r){return t===t&&(r!==a&&(t=t<=r?t:r),e!==a&&(t=t>=e?t:e)),t}function Wt(t,e,r,s,o,f){var l,d=e&C,m=e&k,_=e&Z;if(r&&(l=o?r(t,s,o,f):r(t)),l!==a)return l;if(!tt(t))return t;var w=B(t);if(w){if(l=Qf(t),!d)return Tt(t,l)}else{var x=vt(t),P=x==ir||x==zs;if(be(t))return fu(t,d);if(x==se||x==qe||P&&!o){if(l=m||P?{}:Eu(t),!d)return m?kf(t,hf(l,t)):Wf(t,ka(l,t))}else{if(!V[x])return o?t:{};l=jf(t,x,d)}}f||(f=new qt);var O=f.get(t);if(O)return O;f.set(t,l),so(t)?t.forEach(function(I){l.add(Wt(I,e,r,I,t,f))}):ro(t)&&t.forEach(function(I,H){l.set(H,Wt(I,e,r,H,t,f))});var E=_?m?ss:is:m?At:pt,M=w?a:E(t);return Ht(M||t,function(I,H){M&&(H=I,I=t[H]),Bn(l,H,Wt(I,e,r,H,t,f))}),l}function ff(t){var e=pt(t);return function(r){return Ua(r,t,e)}}function Ua(t,e,r){var s=r.length;if(t==null)return!s;for(t=K(t);s--;){var o=r[s],f=e[o],l=t[o];if(l===a&&!(o in t)||!f(l))return!1}return!0}function za(t,e,r){if(typeof t!="function")throw new Ft(h);return Wn(function(){t.apply(a,r)},e)}function Ln(t,e,r,s){var o=-1,f=cr,l=!0,d=t.length,m=[],_=e.length;if(!d)return m;r&&(e=j(e,Et(r))),s?(f=Pi,l=!1):e.length>=i&&(f=Cn,l=!1,e=new Ne(e));t:for(;++o<d;){var w=t[o],x=r==null?w:r(w);if(w=s||w!==0?w:0,l&&x===x){for(var P=_;P--;)if(e[P]===x)continue t;m.push(w)}else f(e,x,s)||m.push(w)}return m}var Pe=mu(jt),$a=mu(ki,!0);function lf(t,e){var r=!0;return Pe(t,function(s,o,f){return r=!!e(s,o,f),r}),r}function Cr(t,e,r){for(var s=-1,o=t.length;++s<o;){var f=t[s],l=e(f);if(l!=null&&(d===a?l===l&&!Rt(l):r(l,d)))var d=l,m=f}return m}function pf(t,e,r,s){var o=t.length;for(r=L(r),r<0&&(r=-r>o?0:o+r),s=s===a||s>o?o:L(s),s<0&&(s+=o),s=r>s?0:uo(s);r<s;)t[r++]=e;return t}function Ka(t,e){var r=[];return Pe(t,function(s,o,f){e(s,o,f)&&r.push(s)}),r}function dt(t,e,r,s,o){var f=-1,l=t.length;for(r||(r=el),o||(o=[]);++f<l;){var d=t[f];e>0&&r(d)?e>1?dt(d,e-1,r,s,o):we(o,d):s||(o[o.length]=d)}return o}var Wi=vu(),Ya=vu(!0);function jt(t,e){return t&&Wi(t,e,pt)}function ki(t,e){return t&&Ya(t,e,pt)}function Or(t,e){return _e(e,function(r){return le(t[r])})}function Fe(t,e){e=Ce(e,t);for(var r=0,s=e.length;t!=null&&r<s;)t=t[ee(e[r++])];return r&&r==s?t:a}function Za(t,e,r){var s=e(t);return B(t)?s:we(s,r(t))}function Dt(t){return t==null?t===a?ko:Go:Le&&Le in K(t)?Vf(t):ol(t)}function Ui(t,e){return t>e}function df(t,e){return t!=null&&$.call(t,e)}function gf(t,e){return t!=null&&e in K(t)}function mf(t,e,r){return t>=mt(e,r)&&t<ot(e,r)}function zi(t,e,r){for(var s=r?Pi:cr,o=t[0].length,f=t.length,l=f,d=v(f),m=1/0,_=[];l--;){var w=t[l];l&&e&&(w=j(w,Et(e))),m=mt(w.length,m),d[l]=!r&&(e||o>=120&&w.length>=120)?new Ne(l&&w):a}w=t[0];var x=-1,P=d[0];t:for(;++x<o&&_.length<m;){var O=w[x],E=e?e(O):O;if(O=r||O!==0?O:0,!(P?Cn(P,E):s(_,E,r))){for(l=f;--l;){var M=d[l];if(!(M?Cn(M,E):s(t[l],E,r)))continue t}P&&P.push(E),_.push(O)}}return _}function vf(t,e,r,s){return jt(t,function(o,f,l){e(s,r(o),f,l)}),s}function Mn(t,e,r){e=Ce(e,t),t=Lu(t,e);var s=t==null?t:t[ee(Ut(e))];return s==null?a:bt(s,t,r)}function qa(t){return et(t)&&Dt(t)==qe}function Sf(t){return et(t)&&Dt(t)==An}function Df(t){return et(t)&&Dt(t)==wn}function Nn(t,e,r,s,o){return t===e?!0:t==null||e==null||!et(t)&&!et(e)?t!==t&&e!==e:_f(t,e,r,s,Nn,o)}function _f(t,e,r,s,o,f){var l=B(t),d=B(e),m=l?nr:vt(t),_=d?nr:vt(e);m=m==qe?se:m,_=_==qe?se:_;var w=m==se,x=_==se,P=m==_;if(P&&be(t)){if(!be(e))return!1;l=!0,w=!1}if(P&&!w)return f||(f=new qt),l||on(t)?Cu(t,e,r,s,o,f):Zf(t,e,m,r,s,o,f);if(!(r&Q)){var O=w&&$.call(t,"__wrapped__"),E=x&&$.call(e,"__wrapped__");if(O||E){var M=O?t.value():t,I=E?e.value():e;return f||(f=new qt),o(M,I,r,s,f)}}return P?(f||(f=new qt),qf(t,e,r,s,o,f)):!1}function wf(t){return et(t)&&vt(t)==Kt}function $i(t,e,r,s){var o=r.length,f=o,l=!s;if(t==null)return!f;for(t=K(t);o--;){var d=r[o];if(l&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++o<f;){d=r[o];var m=d[0],_=t[m],w=d[1];if(l&&d[2]){if(_===a&&!(m in t))return!1}else{var x=new qt;if(s)var P=s(_,w,m,t,e,x);if(!(P===a?Nn(w,_,Q|q,s,x):P))return!1}}return!0}function Va(t){if(!tt(t)||rl(t))return!1;var e=le(t)?_h:hc;return e.test(We(t))}function xf(t){return et(t)&&Dt(t)==yn}function yf(t){return et(t)&&vt(t)==Yt}function Tf(t){return et(t)&&Kr(t.length)&&!!J[Dt(t)]}function Xa(t){return typeof t=="function"?t:t==null?Ct:typeof t=="object"?B(t)?ja(t[0],t[1]):Qa(t):Do(t)}function Ki(t){if(!Gn(t))return Ah(t);var e=[];for(var r in K(t))$.call(t,r)&&r!="constructor"&&e.push(r);return e}function Pf(t){if(!tt(t))return ul(t);var e=Gn(t),r=[];for(var s in t)s=="constructor"&&(e||!$.call(t,s))||r.push(s);return r}function Yi(t,e){return t<e}function Ja(t,e){var r=-1,s=Pt(t)?v(t.length):[];return Pe(t,function(o,f,l){s[++r]=e(o,f,l)}),s}function Qa(t){var e=us(t);return e.length==1&&e[0][2]?Ru(e[0][0],e[0][1]):function(r){return r===t||$i(r,t,e)}}function ja(t,e){return cs(t)&&Iu(e)?Ru(ee(t),e):function(r){var s=Ds(r,t);return s===a&&s===e?_s(r,t):Nn(e,s,Q|q)}}function br(t,e,r,s,o){t!==e&&Wi(e,function(f,l){if(o||(o=new qt),tt(f))Af(t,e,l,r,br,s,o);else{var d=s?s(fs(t,l),f,l+"",t,e,o):a;d===a&&(d=f),Fi(t,l,d)}},At)}function Af(t,e,r,s,o,f,l){var d=fs(t,r),m=fs(e,r),_=l.get(m);if(_){Fi(t,r,_);return}var w=f?f(d,m,r+"",t,e,l):a,x=w===a;if(x){var P=B(m),O=!P&&be(m),E=!P&&!O&&on(m);w=m,P||O||E?B(d)?w=d:rt(d)?w=Tt(d):O?(x=!1,w=fu(m,!0)):E?(x=!1,w=lu(m,!0)):w=[]:kn(m)||ke(m)?(w=d,ke(d)?w=oo(d):(!tt(d)||le(d))&&(w=Eu(m))):x=!1}x&&(l.set(m,w),o(w,m,s,f,l),l.delete(m)),Fi(t,r,w)}function tu(t,e){var r=t.length;if(r)return e+=e<0?r:0,fe(e,r)?t[e]:a}function eu(t,e,r){e.length?e=j(e,function(f){return B(f)?function(l){return Fe(l,f.length===1?f[0]:f)}:f}):e=[Ct];var s=-1;e=j(e,Et(b()));var o=Ja(t,function(f,l,d){var m=j(e,function(_){return _(f)});return{criteria:m,index:++s,value:f}});return Qc(o,function(f,l){return Gf(f,l,r)})}function Cf(t,e){return nu(t,e,function(r,s){return _s(t,s)})}function nu(t,e,r){for(var s=-1,o=e.length,f={};++s<o;){var l=e[s],d=Fe(t,l);r(d,l)&&Hn(f,Ce(l,t),d)}return f}function Of(t){return function(e){return Fe(e,t)}}function Zi(t,e,r,s){var o=s?Jc:Je,f=-1,l=e.length,d=t;for(t===e&&(e=Tt(e)),r&&(d=j(t,Et(r)));++f<l;)for(var m=0,_=e[f],w=r?r(_):_;(m=o(d,w,m,s))>-1;)d!==t&&Dr.call(d,m,1),Dr.call(t,m,1);return t}function ru(t,e){for(var r=t?e.length:0,s=r-1;r--;){var o=e[r];if(r==s||o!==f){var f=o;fe(o)?Dr.call(t,o,1):Ji(t,o)}}return t}function qi(t,e){return t+xr(Ha()*(e-t+1))}function bf(t,e,r,s){for(var o=-1,f=ot(wr((e-t)/(r||1)),0),l=v(f);f--;)l[s?f:++o]=t,t+=r;return l}function Vi(t,e){var r="";if(!t||e<1||e>De)return r;do e%2&&(r+=t),e=xr(e/2),e&&(t+=t);while(e);return r}function N(t,e){return ls(Bu(t,e,Ct),t+"")}function Ef(t){return Wa(cn(t))}function If(t,e){var r=cn(t);return Gr(r,He(e,0,r.length))}function Hn(t,e,r,s){if(!tt(t))return t;e=Ce(e,t);for(var o=-1,f=e.length,l=f-1,d=t;d!=null&&++o<f;){var m=ee(e[o]),_=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return t;if(o!=l){var w=d[m];_=s?s(w,m,d):a,_===a&&(_=tt(w)?w:fe(e[o+1])?[]:{})}Bn(d,m,_),d=d[m]}return t}var iu=yr?function(t,e){return yr.set(t,e),t}:Ct,Rf=_r?function(t,e){return _r(t,"toString",{configurable:!0,enumerable:!1,value:xs(e),writable:!0})}:Ct;function Bf(t){return Gr(cn(t))}function kt(t,e,r){var s=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var f=v(o);++s<o;)f[s]=t[s+e];return f}function Lf(t,e){var r;return Pe(t,function(s,o,f){return r=e(s,o,f),!r}),!!r}function Er(t,e,r){var s=0,o=t==null?s:t.length;if(typeof e=="number"&&e===e&&o<=Mo){for(;s<o;){var f=s+o>>>1,l=t[f];l!==null&&!Rt(l)&&(r?l<=e:l<e)?s=f+1:o=f}return o}return Xi(t,e,Ct,r)}function Xi(t,e,r,s){var o=0,f=t==null?0:t.length;if(f===0)return 0;e=r(e);for(var l=e!==e,d=e===null,m=Rt(e),_=e===a;o<f;){var w=xr((o+f)/2),x=r(t[w]),P=x!==a,O=x===null,E=x===x,M=Rt(x);if(l)var I=s||E;else _?I=E&&(s||P):d?I=E&&P&&(s||!O):m?I=E&&P&&!O&&(s||!M):O||M?I=!1:I=s?x<=e:x<e;I?o=w+1:f=w}return mt(f,Lo)}function su(t,e){for(var r=-1,s=t.length,o=0,f=[];++r<s;){var l=t[r],d=e?e(l):l;if(!r||!Vt(d,m)){var m=d;f[o++]=l===0?0:l}}return f}function au(t){return typeof t=="number"?t:Rt(t)?er:+t}function It(t){if(typeof t=="string")return t;if(B(t))return j(t,It)+"";if(Rt(t))return Fa?Fa.call(t):"";var e=t+"";return e=="0"&&1/t==-Re?"-0":e}function Ae(t,e,r){var s=-1,o=cr,f=t.length,l=!0,d=[],m=d;if(r)l=!1,o=Pi;else if(f>=i){var _=e?null:Kf(t);if(_)return fr(_);l=!1,o=Cn,m=new Ne}else m=e?[]:d;t:for(;++s<f;){var w=t[s],x=e?e(w):w;if(w=r||w!==0?w:0,l&&x===x){for(var P=m.length;P--;)if(m[P]===x)continue t;e&&m.push(x),d.push(w)}else o(m,x,r)||(m!==d&&m.push(x),d.push(w))}return d}function Ji(t,e){return e=Ce(e,t),t=Lu(t,e),t==null||delete t[ee(Ut(e))]}function uu(t,e,r,s){return Hn(t,e,r(Fe(t,e)),s)}function Ir(t,e,r,s){for(var o=t.length,f=s?o:-1;(s?f--:++f<o)&&e(t[f],f,t););return r?kt(t,s?0:f,s?f+1:o):kt(t,s?f+1:0,s?o:f)}function ou(t,e){var r=t;return r instanceof F&&(r=r.value()),Ai(e,function(s,o){return o.func.apply(o.thisArg,we([s],o.args))},r)}function Qi(t,e,r){var s=t.length;if(s<2)return s?Ae(t[0]):[];for(var o=-1,f=v(s);++o<s;)for(var l=t[o],d=-1;++d<s;)d!=o&&(f[o]=Ln(f[o]||l,t[d],e,r));return Ae(dt(f,1),e,r)}function cu(t,e,r){for(var s=-1,o=t.length,f=e.length,l={};++s<o;){var d=s<f?e[s]:a;r(l,t[s],d)}return l}function ji(t){return rt(t)?t:[]}function ts(t){return typeof t=="function"?t:Ct}function Ce(t,e){return B(t)?t:cs(t,e)?[t]:Fu(z(t))}var Mf=N;function Oe(t,e,r){var s=t.length;return r=r===a?s:r,!e&&r>=s?t:kt(t,e,r)}var hu=wh||function(t){return lt.clearTimeout(t)};function fu(t,e){if(e)return t.slice();var r=t.length,s=Ra?Ra(r):new t.constructor(r);return t.copy(s),s}function es(t){var e=new t.constructor(t.byteLength);return new vr(e).set(new vr(t)),e}function Nf(t,e){var r=e?es(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Hf(t){var e=new t.constructor(t.source,qs.exec(t));return e.lastIndex=t.lastIndex,e}function Ff(t){return Rn?K(Rn.call(t)):{}}function lu(t,e){var r=e?es(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function pu(t,e){if(t!==e){var r=t!==a,s=t===null,o=t===t,f=Rt(t),l=e!==a,d=e===null,m=e===e,_=Rt(e);if(!d&&!_&&!f&&t>e||f&&l&&m&&!d&&!_||s&&l&&m||!r&&m||!o)return 1;if(!s&&!f&&!_&&t<e||_&&r&&o&&!s&&!f||d&&r&&o||!l&&o||!m)return-1}return 0}function Gf(t,e,r){for(var s=-1,o=t.criteria,f=e.criteria,l=o.length,d=r.length;++s<l;){var m=pu(o[s],f[s]);if(m){if(s>=d)return m;var _=r[s];return m*(_=="desc"?-1:1)}}return t.index-e.index}function du(t,e,r,s){for(var o=-1,f=t.length,l=r.length,d=-1,m=e.length,_=ot(f-l,0),w=v(m+_),x=!s;++d<m;)w[d]=e[d];for(;++o<l;)(x||o<f)&&(w[r[o]]=t[o]);for(;_--;)w[d++]=t[o++];return w}function gu(t,e,r,s){for(var o=-1,f=t.length,l=-1,d=r.length,m=-1,_=e.length,w=ot(f-d,0),x=v(w+_),P=!s;++o<w;)x[o]=t[o];for(var O=o;++m<_;)x[O+m]=e[m];for(;++l<d;)(P||o<f)&&(x[O+r[l]]=t[o++]);return x}function Tt(t,e){var r=-1,s=t.length;for(e||(e=v(s));++r<s;)e[r]=t[r];return e}function te(t,e,r,s){var o=!r;r||(r={});for(var f=-1,l=e.length;++f<l;){var d=e[f],m=s?s(r[d],t[d],d,r,t):a;m===a&&(m=t[d]),o?oe(r,d,m):Bn(r,d,m)}return r}function Wf(t,e){return te(t,os(t),e)}function kf(t,e){return te(t,Ou(t),e)}function Rr(t,e){return function(r,s){var o=B(r)?Kc:cf,f=e?e():{};return o(r,t,b(s,2),f)}}function sn(t){return N(function(e,r){var s=-1,o=r.length,f=o>1?r[o-1]:a,l=o>2?r[2]:a;for(f=t.length>3&&typeof f=="function"?(o--,f):a,l&&_t(r[0],r[1],l)&&(f=o<3?a:f,o=1),e=K(e);++s<o;){var d=r[s];d&&t(e,d,s,f)}return e})}function mu(t,e){return function(r,s){if(r==null)return r;if(!Pt(r))return t(r,s);for(var o=r.length,f=e?o:-1,l=K(r);(e?f--:++f<o)&&s(l[f],f,l)!==!1;);return r}}function vu(t){return function(e,r,s){for(var o=-1,f=K(e),l=s(e),d=l.length;d--;){var m=l[t?d:++o];if(r(f[m],m,f)===!1)break}return e}}function Uf(t,e,r){var s=e&X,o=Fn(t);function f(){var l=this&&this!==lt&&this instanceof f?o:t;return l.apply(s?r:this,arguments)}return f}function Su(t){return function(e){e=z(e);var r=Qe(e)?Zt(e):a,s=r?r[0]:e.charAt(0),o=r?Oe(r,1).join(""):e.slice(1);return s[t]()+o}}function an(t){return function(e){return Ai(vo(mo(e).replace(Ic,"")),t,"")}}function Fn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=rn(t.prototype),s=t.apply(r,e);return tt(s)?s:r}}function zf(t,e,r){var s=Fn(t);function o(){for(var f=arguments.length,l=v(f),d=f,m=un(o);d--;)l[d]=arguments[d];var _=f<3&&l[0]!==m&&l[f-1]!==m?[]:xe(l,m);if(f-=_.length,f<r)return yu(t,e,Br,o.placeholder,a,l,_,a,a,r-f);var w=this&&this!==lt&&this instanceof o?s:t;return bt(w,this,l)}return o}function Du(t){return function(e,r,s){var o=K(e);if(!Pt(e)){var f=b(r,3);e=pt(e),r=function(d){return f(o[d],d,o)}}var l=t(e,r,s);return l>-1?o[f?e[l]:l]:a}}function _u(t){return he(function(e){var r=e.length,s=r,o=Gt.prototype.thru;for(t&&e.reverse();s--;){var f=e[s];if(typeof f!="function")throw new Ft(h);if(o&&!l&&Hr(f)=="wrapper")var l=new Gt([],!0)}for(s=l?s:r;++s<r;){f=e[s];var d=Hr(f),m=d=="wrapper"?as(f):a;m&&hs(m[0])&&m[1]==(ie|Mt|Ot|Dn)&&!m[4].length&&m[9]==1?l=l[Hr(m[0])].apply(l,m[3]):l=f.length==1&&hs(f)?l[d]():l.thru(f)}return function(){var _=arguments,w=_[0];if(l&&_.length==1&&B(w))return l.plant(w).value();for(var x=0,P=r?e[x].apply(this,_):w;++x<r;)P=e[x].call(this,P);return P}})}function Br(t,e,r,s,o,f,l,d,m,_){var w=e&ie,x=e&X,P=e&yt,O=e&(Mt|ve),E=e&ai,M=P?a:Fn(t);function I(){for(var H=arguments.length,G=v(H),Bt=H;Bt--;)G[Bt]=arguments[Bt];if(O)var wt=un(I),Lt=th(G,wt);if(s&&(G=du(G,s,o,O)),f&&(G=gu(G,f,l,O)),H-=Lt,O&&H<_){var it=xe(G,wt);return yu(t,e,Br,I.placeholder,r,G,it,d,m,_-H)}var Xt=x?r:this,de=P?Xt[t]:t;return H=G.length,d?G=cl(G,d):E&&H>1&&G.reverse(),w&&m<H&&(G.length=m),this&&this!==lt&&this instanceof I&&(de=M||Fn(de)),de.apply(Xt,G)}return I}function wu(t,e){return function(r,s){return vf(r,t,e(s),{})}}function Lr(t,e){return function(r,s){var o;if(r===a&&s===a)return e;if(r!==a&&(o=r),s!==a){if(o===a)return s;typeof r=="string"||typeof s=="string"?(r=It(r),s=It(s)):(r=au(r),s=au(s)),o=t(r,s)}return o}}function ns(t){return he(function(e){return e=j(e,Et(b())),N(function(r){var s=this;return t(e,function(o){return bt(o,s,r)})})})}function Mr(t,e){e=e===a?" ":It(e);var r=e.length;if(r<2)return r?Vi(e,t):e;var s=Vi(e,wr(t/je(e)));return Qe(e)?Oe(Zt(s),0,t).join(""):s.slice(0,t)}function $f(t,e,r,s){var o=e&X,f=Fn(t);function l(){for(var d=-1,m=arguments.length,_=-1,w=s.length,x=v(w+m),P=this&&this!==lt&&this instanceof l?f:t;++_<w;)x[_]=s[_];for(;m--;)x[_++]=arguments[++d];return bt(P,o?r:this,x)}return l}function xu(t){return function(e,r,s){return s&&typeof s!="number"&&_t(e,r,s)&&(r=s=a),e=pe(e),r===a?(r=e,e=0):r=pe(r),s=s===a?e<r?1:-1:pe(s),bf(e,r,s,t)}}function Nr(t){return function(e,r){return typeof e=="string"&&typeof r=="string"||(e=zt(e),r=zt(r)),t(e,r)}}function yu(t,e,r,s,o,f,l,d,m,_){var w=e&Mt,x=w?l:a,P=w?a:l,O=w?f:a,E=w?a:f;e|=w?Ot:Se,e&=~(w?Se:Ot),e&re||(e&=~(X|yt));var M=[t,e,o,O,x,E,P,d,m,_],I=r.apply(a,M);return hs(t)&&Mu(I,M),I.placeholder=s,Nu(I,t,e)}function rs(t){var e=ut[t];return function(r,s){if(r=zt(r),s=s==null?0:mt(L(s),292),s&&Na(r)){var o=(z(r)+"e").split("e"),f=e(o[0]+"e"+(+o[1]+s));return o=(z(f)+"e").split("e"),+(o[0]+"e"+(+o[1]-s))}return e(r)}}var Kf=en&&1/fr(new en([,-0]))[1]==Re?function(t){return new en(t)}:Ps;function Tu(t){return function(e){var r=vt(e);return r==Kt?Bi(e):r==Yt?uh(e):jc(e,t(e))}}function ce(t,e,r,s,o,f,l,d){var m=e&yt;if(!m&&typeof t!="function")throw new Ft(h);var _=s?s.length:0;if(_||(e&=~(Ot|Se),s=o=a),l=l===a?l:ot(L(l),0),d=d===a?d:L(d),_-=o?o.length:0,e&Se){var w=s,x=o;s=o=a}var P=m?a:as(t),O=[t,e,r,s,o,w,x,f,l,d];if(P&&al(O,P),t=O[0],e=O[1],r=O[2],s=O[3],o=O[4],d=O[9]=O[9]===a?m?0:t.length:ot(O[9]-_,0),!d&&e&(Mt|ve)&&(e&=~(Mt|ve)),!e||e==X)var E=Uf(t,e,r);else e==Mt||e==ve?E=zf(t,e,d):(e==Ot||e==(X|Ot))&&!o.length?E=$f(t,e,r,s):E=Br.apply(a,O);var M=P?iu:Mu;return Nu(M(E,O),t,e)}function Pu(t,e,r,s){return t===a||Vt(t,tn[r])&&!$.call(s,r)?e:t}function Au(t,e,r,s,o,f){return tt(t)&&tt(e)&&(f.set(e,t),br(t,e,a,Au,f),f.delete(e)),t}function Yf(t){return kn(t)?a:t}function Cu(t,e,r,s,o,f){var l=r&Q,d=t.length,m=e.length;if(d!=m&&!(l&&m>d))return!1;var _=f.get(t),w=f.get(e);if(_&&w)return _==e&&w==t;var x=-1,P=!0,O=r&q?new Ne:a;for(f.set(t,e),f.set(e,t);++x<d;){var E=t[x],M=e[x];if(s)var I=l?s(M,E,x,e,t,f):s(E,M,x,t,e,f);if(I!==a){if(I)continue;P=!1;break}if(O){if(!Ci(e,function(H,G){if(!Cn(O,G)&&(E===H||o(E,H,r,s,f)))return O.push(G)})){P=!1;break}}else if(!(E===M||o(E,M,r,s,f))){P=!1;break}}return f.delete(t),f.delete(e),P}function Zf(t,e,r,s,o,f,l){switch(r){case Ve:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case An:return!(t.byteLength!=e.byteLength||!f(new vr(t),new vr(e)));case _n:case wn:case xn:return Vt(+t,+e);case rr:return t.name==e.name&&t.message==e.message;case yn:case Tn:return t==e+"";case Kt:var d=Bi;case Yt:var m=s&Q;if(d||(d=fr),t.size!=e.size&&!m)return!1;var _=l.get(t);if(_)return _==e;s|=q,l.set(t,e);var w=Cu(d(t),d(e),s,o,f,l);return l.delete(t),w;case sr:if(Rn)return Rn.call(t)==Rn.call(e)}return!1}function qf(t,e,r,s,o,f){var l=r&Q,d=is(t),m=d.length,_=is(e),w=_.length;if(m!=w&&!l)return!1;for(var x=m;x--;){var P=d[x];if(!(l?P in e:$.call(e,P)))return!1}var O=f.get(t),E=f.get(e);if(O&&E)return O==e&&E==t;var M=!0;f.set(t,e),f.set(e,t);for(var I=l;++x<m;){P=d[x];var H=t[P],G=e[P];if(s)var Bt=l?s(G,H,P,e,t,f):s(H,G,P,t,e,f);if(!(Bt===a?H===G||o(H,G,r,s,f):Bt)){M=!1;break}I||(I=P=="constructor")}if(M&&!I){var wt=t.constructor,Lt=e.constructor;wt!=Lt&&"constructor"in t&&"constructor"in e&&!(typeof wt=="function"&&wt instanceof wt&&typeof Lt=="function"&&Lt instanceof Lt)&&(M=!1)}return f.delete(t),f.delete(e),M}function he(t){return ls(Bu(t,a,Uu),t+"")}function is(t){return Za(t,pt,os)}function ss(t){return Za(t,At,Ou)}var as=yr?function(t){return yr.get(t)}:Ps;function Hr(t){for(var e=t.name+"",r=nn[e],s=$.call(nn,e)?r.length:0;s--;){var o=r[s],f=o.func;if(f==null||f==t)return o.name}return e}function un(t){var e=$.call(c,"placeholder")?c:t;return e.placeholder}function b(){var t=c.iteratee||ys;return t=t===ys?Xa:t,arguments.length?t(arguments[0],arguments[1]):t}function Fr(t,e){var r=t.__data__;return nl(e)?r[typeof e=="string"?"string":"hash"]:r.map}function us(t){for(var e=pt(t),r=e.length;r--;){var s=e[r],o=t[s];e[r]=[s,o,Iu(o)]}return e}function Ge(t,e){var r=ih(t,e);return Va(r)?r:a}function Vf(t){var e=$.call(t,Le),r=t[Le];try{t[Le]=a;var s=!0}catch{}var o=gr.call(t);return s&&(e?t[Le]=r:delete t[Le]),o}var os=Mi?function(t){return t==null?[]:(t=K(t),_e(Mi(t),function(e){return La.call(t,e)}))}:As,Ou=Mi?function(t){for(var e=[];t;)we(e,os(t)),t=Sr(t);return e}:As,vt=Dt;(Ni&&vt(new Ni(new ArrayBuffer(1)))!=Ve||bn&&vt(new bn)!=Kt||Hi&&vt(Hi.resolve())!=$s||en&&vt(new en)!=Yt||En&&vt(new En)!=Pn)&&(vt=function(t){var e=Dt(t),r=e==se?t.constructor:a,s=r?We(r):"";if(s)switch(s){case Eh:return Ve;case Ih:return Kt;case Rh:return $s;case Bh:return Yt;case Lh:return Pn}return e});function Xf(t,e,r){for(var s=-1,o=r.length;++s<o;){var f=r[s],l=f.size;switch(f.type){case"drop":t+=l;break;case"dropRight":e-=l;break;case"take":e=mt(e,t+l);break;case"takeRight":t=ot(t,e-l);break}}return{start:t,end:e}}function Jf(t){var e=t.match(nc);return e?e[1].split(rc):[]}function bu(t,e,r){e=Ce(e,t);for(var s=-1,o=e.length,f=!1;++s<o;){var l=ee(e[s]);if(!(f=t!=null&&r(t,l)))break;t=t[l]}return f||++s!=o?f:(o=t==null?0:t.length,!!o&&Kr(o)&&fe(l,o)&&(B(t)||ke(t)))}function Qf(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&$.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Eu(t){return typeof t.constructor=="function"&&!Gn(t)?rn(Sr(t)):{}}function jf(t,e,r){var s=t.constructor;switch(e){case An:return es(t);case _n:case wn:return new s(+t);case Ve:return Nf(t,r);case ui:case oi:case ci:case hi:case fi:case li:case pi:case di:case gi:return lu(t,r);case Kt:return new s;case xn:case Tn:return new s(t);case yn:return Hf(t);case Yt:return new s;case sr:return Ff(t)}}function tl(t,e){var r=e.length;if(!r)return t;var s=r-1;return e[s]=(r>1?"& ":"")+e[s],e=e.join(r>2?", ":" "),t.replace(ec,`{
/* [wrapped with `+e+`] */
`)}function el(t){return B(t)||ke(t)||!!(Ma&&t&&t[Ma])}function fe(t,e){var r=typeof t;return e=e??De,!!e&&(r=="number"||r!="symbol"&&lc.test(t))&&t>-1&&t%1==0&&t<e}function _t(t,e,r){if(!tt(r))return!1;var s=typeof e;return(s=="number"?Pt(r)&&fe(e,r.length):s=="string"&&e in r)?Vt(r[e],t):!1}function cs(t,e){if(B(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Rt(t)?!0:Jo.test(t)||!Xo.test(t)||e!=null&&t in K(e)}function nl(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function hs(t){var e=Hr(t),r=c[e];if(typeof r!="function"||!(e in F.prototype))return!1;if(t===r)return!0;var s=as(r);return!!s&&t===s[0]}function rl(t){return!!Ia&&Ia in t}var il=pr?le:Cs;function Gn(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||tn;return t===r}function Iu(t){return t===t&&!tt(t)}function Ru(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==a||t in K(r))}}function sl(t){var e=zr(t,function(s){return r.size===y&&r.clear(),s}),r=e.cache;return e}function al(t,e){var r=t[1],s=e[1],o=r|s,f=o<(X|yt|ie),l=s==ie&&r==Mt||s==ie&&r==Dn&&t[7].length<=e[8]||s==(ie|Dn)&&e[7].length<=e[8]&&r==Mt;if(!(f||l))return t;s&X&&(t[2]=e[2],o|=r&X?0:re);var d=e[3];if(d){var m=t[3];t[3]=m?du(m,d,e[4]):d,t[4]=m?xe(t[3],T):e[4]}return d=e[5],d&&(m=t[5],t[5]=m?gu(m,d,e[6]):d,t[6]=m?xe(t[5],T):e[6]),d=e[7],d&&(t[7]=d),s&ie&&(t[8]=t[8]==null?e[8]:mt(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function ul(t){var e=[];if(t!=null)for(var r in K(t))e.push(r);return e}function ol(t){return gr.call(t)}function Bu(t,e,r){return e=ot(e===a?t.length-1:e,0),function(){for(var s=arguments,o=-1,f=ot(s.length-e,0),l=v(f);++o<f;)l[o]=s[e+o];o=-1;for(var d=v(e+1);++o<e;)d[o]=s[o];return d[e]=r(l),bt(t,this,d)}}function Lu(t,e){return e.length<2?t:Fe(t,kt(e,0,-1))}function cl(t,e){for(var r=t.length,s=mt(e.length,r),o=Tt(t);s--;){var f=e[s];t[s]=fe(f,r)?o[f]:a}return t}function fs(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Mu=Hu(iu),Wn=yh||function(t,e){return lt.setTimeout(t,e)},ls=Hu(Rf);function Nu(t,e,r){var s=e+"";return ls(t,tl(s,hl(Jf(s),r)))}function Hu(t){var e=0,r=0;return function(){var s=Ch(),o=Eo-(s-r);if(r=s,o>0){if(++e>=bo)return arguments[0]}else e=0;return t.apply(a,arguments)}}function Gr(t,e){var r=-1,s=t.length,o=s-1;for(e=e===a?s:e;++r<e;){var f=qi(r,o),l=t[f];t[f]=t[r],t[r]=l}return t.length=e,t}var Fu=sl(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Qo,function(r,s,o,f){e.push(o?f.replace(ac,"$1"):s||r)}),e});function ee(t){if(typeof t=="string"||Rt(t))return t;var e=t+"";return e=="0"&&1/t==-Re?"-0":e}function We(t){if(t!=null){try{return dr.call(t)}catch{}try{return t+""}catch{}}return""}function hl(t,e){return Ht(No,function(r){var s="_."+r[0];e&r[1]&&!cr(t,s)&&t.push(s)}),t.sort()}function Gu(t){if(t instanceof F)return t.clone();var e=new Gt(t.__wrapped__,t.__chain__);return e.__actions__=Tt(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function fl(t,e,r){(r?_t(t,e,r):e===a)?e=1:e=ot(L(e),0);var s=t==null?0:t.length;if(!s||e<1)return[];for(var o=0,f=0,l=v(wr(s/e));o<s;)l[f++]=kt(t,o,o+=e);return l}function ll(t){for(var e=-1,r=t==null?0:t.length,s=0,o=[];++e<r;){var f=t[e];f&&(o[s++]=f)}return o}function pl(){var t=arguments.length;if(!t)return[];for(var e=v(t-1),r=arguments[0],s=t;s--;)e[s-1]=arguments[s];return we(B(r)?Tt(r):[r],dt(e,1))}var dl=N(function(t,e){return rt(t)?Ln(t,dt(e,1,rt,!0)):[]}),gl=N(function(t,e){var r=Ut(e);return rt(r)&&(r=a),rt(t)?Ln(t,dt(e,1,rt,!0),b(r,2)):[]}),ml=N(function(t,e){var r=Ut(e);return rt(r)&&(r=a),rt(t)?Ln(t,dt(e,1,rt,!0),a,r):[]});function vl(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:L(e),kt(t,e<0?0:e,s)):[]}function Sl(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:L(e),e=s-e,kt(t,0,e<0?0:e)):[]}function Dl(t,e){return t&&t.length?Ir(t,b(e,3),!0,!0):[]}function _l(t,e){return t&&t.length?Ir(t,b(e,3),!0):[]}function wl(t,e,r,s){var o=t==null?0:t.length;return o?(r&&typeof r!="number"&&_t(t,e,r)&&(r=0,s=o),pf(t,e,r,s)):[]}function Wu(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=r==null?0:L(r);return o<0&&(o=ot(s+o,0)),hr(t,b(e,3),o)}function ku(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=s-1;return r!==a&&(o=L(r),o=r<0?ot(s+o,0):mt(o,s-1)),hr(t,b(e,3),o,!0)}function Uu(t){var e=t==null?0:t.length;return e?dt(t,1):[]}function xl(t){var e=t==null?0:t.length;return e?dt(t,Re):[]}function yl(t,e){var r=t==null?0:t.length;return r?(e=e===a?1:L(e),dt(t,e)):[]}function Tl(t){for(var e=-1,r=t==null?0:t.length,s={};++e<r;){var o=t[e];s[o[0]]=o[1]}return s}function zu(t){return t&&t.length?t[0]:a}function Pl(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=r==null?0:L(r);return o<0&&(o=ot(s+o,0)),Je(t,e,o)}function Al(t){var e=t==null?0:t.length;return e?kt(t,0,-1):[]}var Cl=N(function(t){var e=j(t,ji);return e.length&&e[0]===t[0]?zi(e):[]}),Ol=N(function(t){var e=Ut(t),r=j(t,ji);return e===Ut(r)?e=a:r.pop(),r.length&&r[0]===t[0]?zi(r,b(e,2)):[]}),bl=N(function(t){var e=Ut(t),r=j(t,ji);return e=typeof e=="function"?e:a,e&&r.pop(),r.length&&r[0]===t[0]?zi(r,a,e):[]});function El(t,e){return t==null?"":Ph.call(t,e)}function Ut(t){var e=t==null?0:t.length;return e?t[e-1]:a}function Il(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=s;return r!==a&&(o=L(r),o=o<0?ot(s+o,0):mt(o,s-1)),e===e?ch(t,e,o):hr(t,ya,o,!0)}function Rl(t,e){return t&&t.length?tu(t,L(e)):a}var Bl=N($u);function $u(t,e){return t&&t.length&&e&&e.length?Zi(t,e):t}function Ll(t,e,r){return t&&t.length&&e&&e.length?Zi(t,e,b(r,2)):t}function Ml(t,e,r){return t&&t.length&&e&&e.length?Zi(t,e,a,r):t}var Nl=he(function(t,e){var r=t==null?0:t.length,s=Gi(t,e);return ru(t,j(e,function(o){return fe(o,r)?+o:o}).sort(pu)),s});function Hl(t,e){var r=[];if(!(t&&t.length))return r;var s=-1,o=[],f=t.length;for(e=b(e,3);++s<f;){var l=t[s];e(l,s,t)&&(r.push(l),o.push(s))}return ru(t,o),r}function ps(t){return t==null?t:bh.call(t)}function Fl(t,e,r){var s=t==null?0:t.length;return s?(r&&typeof r!="number"&&_t(t,e,r)?(e=0,r=s):(e=e==null?0:L(e),r=r===a?s:L(r)),kt(t,e,r)):[]}function Gl(t,e){return Er(t,e)}function Wl(t,e,r){return Xi(t,e,b(r,2))}function kl(t,e){var r=t==null?0:t.length;if(r){var s=Er(t,e);if(s<r&&Vt(t[s],e))return s}return-1}function Ul(t,e){return Er(t,e,!0)}function zl(t,e,r){return Xi(t,e,b(r,2),!0)}function $l(t,e){var r=t==null?0:t.length;if(r){var s=Er(t,e,!0)-1;if(Vt(t[s],e))return s}return-1}function Kl(t){return t&&t.length?su(t):[]}function Yl(t,e){return t&&t.length?su(t,b(e,2)):[]}function Zl(t){var e=t==null?0:t.length;return e?kt(t,1,e):[]}function ql(t,e,r){return t&&t.length?(e=r||e===a?1:L(e),kt(t,0,e<0?0:e)):[]}function Vl(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:L(e),e=s-e,kt(t,e<0?0:e,s)):[]}function Xl(t,e){return t&&t.length?Ir(t,b(e,3),!1,!0):[]}function Jl(t,e){return t&&t.length?Ir(t,b(e,3)):[]}var Ql=N(function(t){return Ae(dt(t,1,rt,!0))}),jl=N(function(t){var e=Ut(t);return rt(e)&&(e=a),Ae(dt(t,1,rt,!0),b(e,2))}),tp=N(function(t){var e=Ut(t);return e=typeof e=="function"?e:a,Ae(dt(t,1,rt,!0),a,e)});function ep(t){return t&&t.length?Ae(t):[]}function np(t,e){return t&&t.length?Ae(t,b(e,2)):[]}function rp(t,e){return e=typeof e=="function"?e:a,t&&t.length?Ae(t,a,e):[]}function ds(t){if(!(t&&t.length))return[];var e=0;return t=_e(t,function(r){if(rt(r))return e=ot(r.length,e),!0}),Ii(e,function(r){return j(t,Oi(r))})}function Ku(t,e){if(!(t&&t.length))return[];var r=ds(t);return e==null?r:j(r,function(s){return bt(e,a,s)})}var ip=N(function(t,e){return rt(t)?Ln(t,e):[]}),sp=N(function(t){return Qi(_e(t,rt))}),ap=N(function(t){var e=Ut(t);return rt(e)&&(e=a),Qi(_e(t,rt),b(e,2))}),up=N(function(t){var e=Ut(t);return e=typeof e=="function"?e:a,Qi(_e(t,rt),a,e)}),op=N(ds);function cp(t,e){return cu(t||[],e||[],Bn)}function hp(t,e){return cu(t||[],e||[],Hn)}var fp=N(function(t){var e=t.length,r=e>1?t[e-1]:a;return r=typeof r=="function"?(t.pop(),r):a,Ku(t,r)});function Yu(t){var e=c(t);return e.__chain__=!0,e}function lp(t,e){return e(t),t}function Wr(t,e){return e(t)}var pp=he(function(t){var e=t.length,r=e?t[0]:0,s=this.__wrapped__,o=function(f){return Gi(f,t)};return e>1||this.__actions__.length||!(s instanceof F)||!fe(r)?this.thru(o):(s=s.slice(r,+r+(e?1:0)),s.__actions__.push({func:Wr,args:[o],thisArg:a}),new Gt(s,this.__chain__).thru(function(f){return e&&!f.length&&f.push(a),f}))});function dp(){return Yu(this)}function gp(){return new Gt(this.value(),this.__chain__)}function mp(){this.__values__===a&&(this.__values__=ao(this.value()));var t=this.__index__>=this.__values__.length,e=t?a:this.__values__[this.__index__++];return{done:t,value:e}}function vp(){return this}function Sp(t){for(var e,r=this;r instanceof Pr;){var s=Gu(r);s.__index__=0,s.__values__=a,e?o.__wrapped__=s:e=s;var o=s;r=r.__wrapped__}return o.__wrapped__=t,e}function Dp(){var t=this.__wrapped__;if(t instanceof F){var e=t;return this.__actions__.length&&(e=new F(this)),e=e.reverse(),e.__actions__.push({func:Wr,args:[ps],thisArg:a}),new Gt(e,this.__chain__)}return this.thru(ps)}function _p(){return ou(this.__wrapped__,this.__actions__)}var wp=Rr(function(t,e,r){$.call(t,r)?++t[r]:oe(t,r,1)});function xp(t,e,r){var s=B(t)?wa:lf;return r&&_t(t,e,r)&&(e=a),s(t,b(e,3))}function yp(t,e){var r=B(t)?_e:Ka;return r(t,b(e,3))}var Tp=Du(Wu),Pp=Du(ku);function Ap(t,e){return dt(kr(t,e),1)}function Cp(t,e){return dt(kr(t,e),Re)}function Op(t,e,r){return r=r===a?1:L(r),dt(kr(t,e),r)}function Zu(t,e){var r=B(t)?Ht:Pe;return r(t,b(e,3))}function qu(t,e){var r=B(t)?Yc:$a;return r(t,b(e,3))}var bp=Rr(function(t,e,r){$.call(t,r)?t[r].push(e):oe(t,r,[e])});function Ep(t,e,r,s){t=Pt(t)?t:cn(t),r=r&&!s?L(r):0;var o=t.length;return r<0&&(r=ot(o+r,0)),Yr(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&Je(t,e,r)>-1}var Ip=N(function(t,e,r){var s=-1,o=typeof e=="function",f=Pt(t)?v(t.length):[];return Pe(t,function(l){f[++s]=o?bt(e,l,r):Mn(l,e,r)}),f}),Rp=Rr(function(t,e,r){oe(t,r,e)});function kr(t,e){var r=B(t)?j:Ja;return r(t,b(e,3))}function Bp(t,e,r,s){return t==null?[]:(B(e)||(e=e==null?[]:[e]),r=s?a:r,B(r)||(r=r==null?[]:[r]),eu(t,e,r))}var Lp=Rr(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]});function Mp(t,e,r){var s=B(t)?Ai:Pa,o=arguments.length<3;return s(t,b(e,4),r,o,Pe)}function Np(t,e,r){var s=B(t)?Zc:Pa,o=arguments.length<3;return s(t,b(e,4),r,o,$a)}function Hp(t,e){var r=B(t)?_e:Ka;return r(t,$r(b(e,3)))}function Fp(t){var e=B(t)?Wa:Ef;return e(t)}function Gp(t,e,r){(r?_t(t,e,r):e===a)?e=1:e=L(e);var s=B(t)?uf:If;return s(t,e)}function Wp(t){var e=B(t)?of:Bf;return e(t)}function kp(t){if(t==null)return 0;if(Pt(t))return Yr(t)?je(t):t.length;var e=vt(t);return e==Kt||e==Yt?t.size:Ki(t).length}function Up(t,e,r){var s=B(t)?Ci:Lf;return r&&_t(t,e,r)&&(e=a),s(t,b(e,3))}var zp=N(function(t,e){if(t==null)return[];var r=e.length;return r>1&&_t(t,e[0],e[1])?e=[]:r>2&&_t(e[0],e[1],e[2])&&(e=[e[0]]),eu(t,dt(e,1),[])}),Ur=xh||function(){return lt.Date.now()};function $p(t,e){if(typeof e!="function")throw new Ft(h);return t=L(t),function(){if(--t<1)return e.apply(this,arguments)}}function Vu(t,e,r){return e=r?a:e,e=t&&e==null?t.length:e,ce(t,ie,a,a,a,a,e)}function Xu(t,e){var r;if(typeof e!="function")throw new Ft(h);return t=L(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=a),r}}var gs=N(function(t,e,r){var s=X;if(r.length){var o=xe(r,un(gs));s|=Ot}return ce(t,s,e,r,o)}),Ju=N(function(t,e,r){var s=X|yt;if(r.length){var o=xe(r,un(Ju));s|=Ot}return ce(e,s,t,r,o)});function Qu(t,e,r){e=r?a:e;var s=ce(t,Mt,a,a,a,a,a,e);return s.placeholder=Qu.placeholder,s}function ju(t,e,r){e=r?a:e;var s=ce(t,ve,a,a,a,a,a,e);return s.placeholder=ju.placeholder,s}function to(t,e,r){var s,o,f,l,d,m,_=0,w=!1,x=!1,P=!0;if(typeof t!="function")throw new Ft(h);e=zt(e)||0,tt(r)&&(w=!!r.leading,x="maxWait"in r,f=x?ot(zt(r.maxWait)||0,e):f,P="trailing"in r?!!r.trailing:P);function O(it){var Xt=s,de=o;return s=o=a,_=it,l=t.apply(de,Xt),l}function E(it){return _=it,d=Wn(H,e),w?O(it):l}function M(it){var Xt=it-m,de=it-_,_o=e-Xt;return x?mt(_o,f-de):_o}function I(it){var Xt=it-m,de=it-_;return m===a||Xt>=e||Xt<0||x&&de>=f}function H(){var it=Ur();if(I(it))return G(it);d=Wn(H,M(it))}function G(it){return d=a,P&&s?O(it):(s=o=a,l)}function Bt(){d!==a&&hu(d),_=0,s=m=o=d=a}function wt(){return d===a?l:G(Ur())}function Lt(){var it=Ur(),Xt=I(it);if(s=arguments,o=this,m=it,Xt){if(d===a)return E(m);if(x)return hu(d),d=Wn(H,e),O(m)}return d===a&&(d=Wn(H,e)),l}return Lt.cancel=Bt,Lt.flush=wt,Lt}var Kp=N(function(t,e){return za(t,1,e)}),Yp=N(function(t,e,r){return za(t,zt(e)||0,r)});function Zp(t){return ce(t,ai)}function zr(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new Ft(h);var r=function(){var s=arguments,o=e?e.apply(this,s):s[0],f=r.cache;if(f.has(o))return f.get(o);var l=t.apply(this,s);return r.cache=f.set(o,l)||f,l};return r.cache=new(zr.Cache||ue),r}zr.Cache=ue;function $r(t){if(typeof t!="function")throw new Ft(h);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function qp(t){return Xu(2,t)}var Vp=Mf(function(t,e){e=e.length==1&&B(e[0])?j(e[0],Et(b())):j(dt(e,1),Et(b()));var r=e.length;return N(function(s){for(var o=-1,f=mt(s.length,r);++o<f;)s[o]=e[o].call(this,s[o]);return bt(t,this,s)})}),ms=N(function(t,e){var r=xe(e,un(ms));return ce(t,Ot,a,e,r)}),eo=N(function(t,e){var r=xe(e,un(eo));return ce(t,Se,a,e,r)}),Xp=he(function(t,e){return ce(t,Dn,a,a,a,e)});function Jp(t,e){if(typeof t!="function")throw new Ft(h);return e=e===a?e:L(e),N(t,e)}function Qp(t,e){if(typeof t!="function")throw new Ft(h);return e=e==null?0:ot(L(e),0),N(function(r){var s=r[e],o=Oe(r,0,e);return s&&we(o,s),bt(t,this,o)})}function jp(t,e,r){var s=!0,o=!0;if(typeof t!="function")throw new Ft(h);return tt(r)&&(s="leading"in r?!!r.leading:s,o="trailing"in r?!!r.trailing:o),to(t,e,{leading:s,maxWait:e,trailing:o})}function td(t){return Vu(t,1)}function ed(t,e){return ms(ts(e),t)}function nd(){if(!arguments.length)return[];var t=arguments[0];return B(t)?t:[t]}function rd(t){return Wt(t,Z)}function id(t,e){return e=typeof e=="function"?e:a,Wt(t,Z,e)}function sd(t){return Wt(t,C|Z)}function ad(t,e){return e=typeof e=="function"?e:a,Wt(t,C|Z,e)}function ud(t,e){return e==null||Ua(t,e,pt(e))}function Vt(t,e){return t===e||t!==t&&e!==e}var od=Nr(Ui),cd=Nr(function(t,e){return t>=e}),ke=qa(function(){return arguments}())?qa:function(t){return et(t)&&$.call(t,"callee")&&!La.call(t,"callee")},B=v.isArray,hd=ga?Et(ga):Sf;function Pt(t){return t!=null&&Kr(t.length)&&!le(t)}function rt(t){return et(t)&&Pt(t)}function fd(t){return t===!0||t===!1||et(t)&&Dt(t)==_n}var be=Th||Cs,ld=ma?Et(ma):Df;function pd(t){return et(t)&&t.nodeType===1&&!kn(t)}function dd(t){if(t==null)return!0;if(Pt(t)&&(B(t)||typeof t=="string"||typeof t.splice=="function"||be(t)||on(t)||ke(t)))return!t.length;var e=vt(t);if(e==Kt||e==Yt)return!t.size;if(Gn(t))return!Ki(t).length;for(var r in t)if($.call(t,r))return!1;return!0}function gd(t,e){return Nn(t,e)}function md(t,e,r){r=typeof r=="function"?r:a;var s=r?r(t,e):a;return s===a?Nn(t,e,a,r):!!s}function vs(t){if(!et(t))return!1;var e=Dt(t);return e==rr||e==Fo||typeof t.message=="string"&&typeof t.name=="string"&&!kn(t)}function vd(t){return typeof t=="number"&&Na(t)}function le(t){if(!tt(t))return!1;var e=Dt(t);return e==ir||e==zs||e==Ho||e==Wo}function no(t){return typeof t=="number"&&t==L(t)}function Kr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=De}function tt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function et(t){return t!=null&&typeof t=="object"}var ro=va?Et(va):wf;function Sd(t,e){return t===e||$i(t,e,us(e))}function Dd(t,e,r){return r=typeof r=="function"?r:a,$i(t,e,us(e),r)}function _d(t){return io(t)&&t!=+t}function wd(t){if(il(t))throw new R(u);return Va(t)}function xd(t){return t===null}function yd(t){return t==null}function io(t){return typeof t=="number"||et(t)&&Dt(t)==xn}function kn(t){if(!et(t)||Dt(t)!=se)return!1;var e=Sr(t);if(e===null)return!0;var r=$.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&dr.call(r)==Sh}var Ss=Sa?Et(Sa):xf;function Td(t){return no(t)&&t>=-De&&t<=De}var so=Da?Et(Da):yf;function Yr(t){return typeof t=="string"||!B(t)&&et(t)&&Dt(t)==Tn}function Rt(t){return typeof t=="symbol"||et(t)&&Dt(t)==sr}var on=_a?Et(_a):Tf;function Pd(t){return t===a}function Ad(t){return et(t)&&vt(t)==Pn}function Cd(t){return et(t)&&Dt(t)==Uo}var Od=Nr(Yi),bd=Nr(function(t,e){return t<=e});function ao(t){if(!t)return[];if(Pt(t))return Yr(t)?Zt(t):Tt(t);if(On&&t[On])return ah(t[On]());var e=vt(t),r=e==Kt?Bi:e==Yt?fr:cn;return r(t)}function pe(t){if(!t)return t===0?t:0;if(t=zt(t),t===Re||t===-Re){var e=t<0?-1:1;return e*Bo}return t===t?t:0}function L(t){var e=pe(t),r=e%1;return e===e?r?e-r:e:0}function uo(t){return t?He(L(t),0,Qt):0}function zt(t){if(typeof t=="number")return t;if(Rt(t))return er;if(tt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=tt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Aa(t);var r=cc.test(t);return r||fc.test(t)?zc(t.slice(2),r?2:8):oc.test(t)?er:+t}function oo(t){return te(t,At(t))}function Ed(t){return t?He(L(t),-De,De):t===0?t:0}function z(t){return t==null?"":It(t)}var Id=sn(function(t,e){if(Gn(e)||Pt(e)){te(e,pt(e),t);return}for(var r in e)$.call(e,r)&&Bn(t,r,e[r])}),co=sn(function(t,e){te(e,At(e),t)}),Zr=sn(function(t,e,r,s){te(e,At(e),t,s)}),Rd=sn(function(t,e,r,s){te(e,pt(e),t,s)}),Bd=he(Gi);function Ld(t,e){var r=rn(t);return e==null?r:ka(r,e)}var Md=N(function(t,e){t=K(t);var r=-1,s=e.length,o=s>2?e[2]:a;for(o&&_t(e[0],e[1],o)&&(s=1);++r<s;)for(var f=e[r],l=At(f),d=-1,m=l.length;++d<m;){var _=l[d],w=t[_];(w===a||Vt(w,tn[_])&&!$.call(t,_))&&(t[_]=f[_])}return t}),Nd=N(function(t){return t.push(a,Au),bt(ho,a,t)});function Hd(t,e){return xa(t,b(e,3),jt)}function Fd(t,e){return xa(t,b(e,3),ki)}function Gd(t,e){return t==null?t:Wi(t,b(e,3),At)}function Wd(t,e){return t==null?t:Ya(t,b(e,3),At)}function kd(t,e){return t&&jt(t,b(e,3))}function Ud(t,e){return t&&ki(t,b(e,3))}function zd(t){return t==null?[]:Or(t,pt(t))}function $d(t){return t==null?[]:Or(t,At(t))}function Ds(t,e,r){var s=t==null?a:Fe(t,e);return s===a?r:s}function Kd(t,e){return t!=null&&bu(t,e,df)}function _s(t,e){return t!=null&&bu(t,e,gf)}var Yd=wu(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=gr.call(e)),t[e]=r},xs(Ct)),Zd=wu(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=gr.call(e)),$.call(t,e)?t[e].push(r):t[e]=[r]},b),qd=N(Mn);function pt(t){return Pt(t)?Ga(t):Ki(t)}function At(t){return Pt(t)?Ga(t,!0):Pf(t)}function Vd(t,e){var r={};return e=b(e,3),jt(t,function(s,o,f){oe(r,e(s,o,f),s)}),r}function Xd(t,e){var r={};return e=b(e,3),jt(t,function(s,o,f){oe(r,o,e(s,o,f))}),r}var Jd=sn(function(t,e,r){br(t,e,r)}),ho=sn(function(t,e,r,s){br(t,e,r,s)}),Qd=he(function(t,e){var r={};if(t==null)return r;var s=!1;e=j(e,function(f){return f=Ce(f,t),s||(s=f.length>1),f}),te(t,ss(t),r),s&&(r=Wt(r,C|k|Z,Yf));for(var o=e.length;o--;)Ji(r,e[o]);return r});function jd(t,e){return fo(t,$r(b(e)))}var tg=he(function(t,e){return t==null?{}:Cf(t,e)});function fo(t,e){if(t==null)return{};var r=j(ss(t),function(s){return[s]});return e=b(e),nu(t,r,function(s,o){return e(s,o[0])})}function eg(t,e,r){e=Ce(e,t);var s=-1,o=e.length;for(o||(o=1,t=a);++s<o;){var f=t==null?a:t[ee(e[s])];f===a&&(s=o,f=r),t=le(f)?f.call(t):f}return t}function ng(t,e,r){return t==null?t:Hn(t,e,r)}function rg(t,e,r,s){return s=typeof s=="function"?s:a,t==null?t:Hn(t,e,r,s)}var lo=Tu(pt),po=Tu(At);function ig(t,e,r){var s=B(t),o=s||be(t)||on(t);if(e=b(e,4),r==null){var f=t&&t.constructor;o?r=s?new f:[]:tt(t)?r=le(f)?rn(Sr(t)):{}:r={}}return(o?Ht:jt)(t,function(l,d,m){return e(r,l,d,m)}),r}function sg(t,e){return t==null?!0:Ji(t,e)}function ag(t,e,r){return t==null?t:uu(t,e,ts(r))}function ug(t,e,r,s){return s=typeof s=="function"?s:a,t==null?t:uu(t,e,ts(r),s)}function cn(t){return t==null?[]:Ri(t,pt(t))}function og(t){return t==null?[]:Ri(t,At(t))}function cg(t,e,r){return r===a&&(r=e,e=a),r!==a&&(r=zt(r),r=r===r?r:0),e!==a&&(e=zt(e),e=e===e?e:0),He(zt(t),e,r)}function hg(t,e,r){return e=pe(e),r===a?(r=e,e=0):r=pe(r),t=zt(t),mf(t,e,r)}function fg(t,e,r){if(r&&typeof r!="boolean"&&_t(t,e,r)&&(e=r=a),r===a&&(typeof e=="boolean"?(r=e,e=a):typeof t=="boolean"&&(r=t,t=a)),t===a&&e===a?(t=0,e=1):(t=pe(t),e===a?(e=t,t=0):e=pe(e)),t>e){var s=t;t=e,e=s}if(r||t%1||e%1){var o=Ha();return mt(t+o*(e-t+Uc("1e-"+((o+"").length-1))),e)}return qi(t,e)}var lg=an(function(t,e,r){return e=e.toLowerCase(),t+(r?go(e):e)});function go(t){return ws(z(t).toLowerCase())}function mo(t){return t=z(t),t&&t.replace(pc,eh).replace(Rc,"")}function pg(t,e,r){t=z(t),e=It(e);var s=t.length;r=r===a?s:He(L(r),0,s);var o=r;return r-=e.length,r>=0&&t.slice(r,o)==e}function dg(t){return t=z(t),t&&Zo.test(t)?t.replace(Ys,nh):t}function gg(t){return t=z(t),t&&jo.test(t)?t.replace(mi,"\\$&"):t}var mg=an(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),vg=an(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),Sg=Su("toLowerCase");function Dg(t,e,r){t=z(t),e=L(e);var s=e?je(t):0;if(!e||s>=e)return t;var o=(e-s)/2;return Mr(xr(o),r)+t+Mr(wr(o),r)}function _g(t,e,r){t=z(t),e=L(e);var s=e?je(t):0;return e&&s<e?t+Mr(e-s,r):t}function wg(t,e,r){t=z(t),e=L(e);var s=e?je(t):0;return e&&s<e?Mr(e-s,r)+t:t}function xg(t,e,r){return r||e==null?e=0:e&&(e=+e),Oh(z(t).replace(vi,""),e||0)}function yg(t,e,r){return(r?_t(t,e,r):e===a)?e=1:e=L(e),Vi(z(t),e)}function Tg(){var t=arguments,e=z(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var Pg=an(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});function Ag(t,e,r){return r&&typeof r!="number"&&_t(t,e,r)&&(e=r=a),r=r===a?Qt:r>>>0,r?(t=z(t),t&&(typeof e=="string"||e!=null&&!Ss(e))&&(e=It(e),!e&&Qe(t))?Oe(Zt(t),0,r):t.split(e,r)):[]}var Cg=an(function(t,e,r){return t+(r?" ":"")+ws(e)});function Og(t,e,r){return t=z(t),r=r==null?0:He(L(r),0,t.length),e=It(e),t.slice(r,r+e.length)==e}function bg(t,e,r){var s=c.templateSettings;r&&_t(t,e,r)&&(e=a),t=z(t),e=Zr({},e,s,Pu);var o=Zr({},e.imports,s.imports,Pu),f=pt(o),l=Ri(o,f),d,m,_=0,w=e.interpolate||ar,x="__p += '",P=Li((e.escape||ar).source+"|"+w.source+"|"+(w===Zs?uc:ar).source+"|"+(e.evaluate||ar).source+"|$","g"),O="//# sourceURL="+($.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hc+"]")+`
`;t.replace(P,function(I,H,G,Bt,wt,Lt){return G||(G=Bt),x+=t.slice(_,Lt).replace(dc,rh),H&&(d=!0,x+=`' +
__e(`+H+`) +
'`),wt&&(m=!0,x+=`';
`+wt+`;
__p += '`),G&&(x+=`' +
((__t = (`+G+`)) == null ? '' : __t) +
'`),_=Lt+I.length,I}),x+=`';
`;var E=$.call(e,"variable")&&e.variable;if(!E)x=`with (obj) {
`+x+`
}
`;else if(sc.test(E))throw new R(p);x=(m?x.replace(zo,""):x).replace($o,"$1").replace(Ko,"$1;"),x="function("+(E||"obj")+`) {
`+(E?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(d?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var M=So(function(){return U(f,O+"return "+x).apply(a,l)});if(M.source=x,vs(M))throw M;return M}function Eg(t){return z(t).toLowerCase()}function Ig(t){return z(t).toUpperCase()}function Rg(t,e,r){if(t=z(t),t&&(r||e===a))return Aa(t);if(!t||!(e=It(e)))return t;var s=Zt(t),o=Zt(e),f=Ca(s,o),l=Oa(s,o)+1;return Oe(s,f,l).join("")}function Bg(t,e,r){if(t=z(t),t&&(r||e===a))return t.slice(0,Ea(t)+1);if(!t||!(e=It(e)))return t;var s=Zt(t),o=Oa(s,Zt(e))+1;return Oe(s,0,o).join("")}function Lg(t,e,r){if(t=z(t),t&&(r||e===a))return t.replace(vi,"");if(!t||!(e=It(e)))return t;var s=Zt(t),o=Ca(s,Zt(e));return Oe(s,o).join("")}function Mg(t,e){var r=Co,s=Oo;if(tt(e)){var o="separator"in e?e.separator:o;r="length"in e?L(e.length):r,s="omission"in e?It(e.omission):s}t=z(t);var f=t.length;if(Qe(t)){var l=Zt(t);f=l.length}if(r>=f)return t;var d=r-je(s);if(d<1)return s;var m=l?Oe(l,0,d).join(""):t.slice(0,d);if(o===a)return m+s;if(l&&(d+=m.length-d),Ss(o)){if(t.slice(d).search(o)){var _,w=m;for(o.global||(o=Li(o.source,z(qs.exec(o))+"g")),o.lastIndex=0;_=o.exec(w);)var x=_.index;m=m.slice(0,x===a?d:x)}}else if(t.indexOf(It(o),d)!=d){var P=m.lastIndexOf(o);P>-1&&(m=m.slice(0,P))}return m+s}function Ng(t){return t=z(t),t&&Yo.test(t)?t.replace(Ks,hh):t}var Hg=an(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),ws=Su("toUpperCase");function vo(t,e,r){return t=z(t),e=r?a:e,e===a?sh(t)?ph(t):Xc(t):t.match(e)||[]}var So=N(function(t,e){try{return bt(t,a,e)}catch(r){return vs(r)?r:new R(r)}}),Fg=he(function(t,e){return Ht(e,function(r){r=ee(r),oe(t,r,gs(t[r],t))}),t});function Gg(t){var e=t==null?0:t.length,r=b();return t=e?j(t,function(s){if(typeof s[1]!="function")throw new Ft(h);return[r(s[0]),s[1]]}):[],N(function(s){for(var o=-1;++o<e;){var f=t[o];if(bt(f[0],this,s))return bt(f[1],this,s)}})}function Wg(t){return ff(Wt(t,C))}function xs(t){return function(){return t}}function kg(t,e){return t==null||t!==t?e:t}var Ug=_u(),zg=_u(!0);function Ct(t){return t}function ys(t){return Xa(typeof t=="function"?t:Wt(t,C))}function $g(t){return Qa(Wt(t,C))}function Kg(t,e){return ja(t,Wt(e,C))}var Yg=N(function(t,e){return function(r){return Mn(r,t,e)}}),Zg=N(function(t,e){return function(r){return Mn(t,r,e)}});function Ts(t,e,r){var s=pt(e),o=Or(e,s);r==null&&!(tt(e)&&(o.length||!s.length))&&(r=e,e=t,t=this,o=Or(e,pt(e)));var f=!(tt(r)&&"chain"in r)||!!r.chain,l=le(t);return Ht(o,function(d){var m=e[d];t[d]=m,l&&(t.prototype[d]=function(){var _=this.__chain__;if(f||_){var w=t(this.__wrapped__),x=w.__actions__=Tt(this.__actions__);return x.push({func:m,args:arguments,thisArg:t}),w.__chain__=_,w}return m.apply(t,we([this.value()],arguments))})}),t}function qg(){return lt._===this&&(lt._=Dh),this}function Ps(){}function Vg(t){return t=L(t),N(function(e){return tu(e,t)})}var Xg=ns(j),Jg=ns(wa),Qg=ns(Ci);function Do(t){return cs(t)?Oi(ee(t)):Of(t)}function jg(t){return function(e){return t==null?a:Fe(t,e)}}var tm=xu(),em=xu(!0);function As(){return[]}function Cs(){return!1}function nm(){return{}}function rm(){return""}function im(){return!0}function sm(t,e){if(t=L(t),t<1||t>De)return[];var r=Qt,s=mt(t,Qt);e=b(e),t-=Qt;for(var o=Ii(s,e);++r<t;)e(r);return o}function am(t){return B(t)?j(t,ee):Rt(t)?[t]:Tt(Fu(z(t)))}function um(t){var e=++vh;return z(t)+e}var om=Lr(function(t,e){return t+e},0),cm=rs("ceil"),hm=Lr(function(t,e){return t/e},1),fm=rs("floor");function lm(t){return t&&t.length?Cr(t,Ct,Ui):a}function pm(t,e){return t&&t.length?Cr(t,b(e,2),Ui):a}function dm(t){return Ta(t,Ct)}function gm(t,e){return Ta(t,b(e,2))}function mm(t){return t&&t.length?Cr(t,Ct,Yi):a}function vm(t,e){return t&&t.length?Cr(t,b(e,2),Yi):a}var Sm=Lr(function(t,e){return t*e},1),Dm=rs("round"),_m=Lr(function(t,e){return t-e},0);function wm(t){return t&&t.length?Ei(t,Ct):0}function xm(t,e){return t&&t.length?Ei(t,b(e,2)):0}return c.after=$p,c.ary=Vu,c.assign=Id,c.assignIn=co,c.assignInWith=Zr,c.assignWith=Rd,c.at=Bd,c.before=Xu,c.bind=gs,c.bindAll=Fg,c.bindKey=Ju,c.castArray=nd,c.chain=Yu,c.chunk=fl,c.compact=ll,c.concat=pl,c.cond=Gg,c.conforms=Wg,c.constant=xs,c.countBy=wp,c.create=Ld,c.curry=Qu,c.curryRight=ju,c.debounce=to,c.defaults=Md,c.defaultsDeep=Nd,c.defer=Kp,c.delay=Yp,c.difference=dl,c.differenceBy=gl,c.differenceWith=ml,c.drop=vl,c.dropRight=Sl,c.dropRightWhile=Dl,c.dropWhile=_l,c.fill=wl,c.filter=yp,c.flatMap=Ap,c.flatMapDeep=Cp,c.flatMapDepth=Op,c.flatten=Uu,c.flattenDeep=xl,c.flattenDepth=yl,c.flip=Zp,c.flow=Ug,c.flowRight=zg,c.fromPairs=Tl,c.functions=zd,c.functionsIn=$d,c.groupBy=bp,c.initial=Al,c.intersection=Cl,c.intersectionBy=Ol,c.intersectionWith=bl,c.invert=Yd,c.invertBy=Zd,c.invokeMap=Ip,c.iteratee=ys,c.keyBy=Rp,c.keys=pt,c.keysIn=At,c.map=kr,c.mapKeys=Vd,c.mapValues=Xd,c.matches=$g,c.matchesProperty=Kg,c.memoize=zr,c.merge=Jd,c.mergeWith=ho,c.method=Yg,c.methodOf=Zg,c.mixin=Ts,c.negate=$r,c.nthArg=Vg,c.omit=Qd,c.omitBy=jd,c.once=qp,c.orderBy=Bp,c.over=Xg,c.overArgs=Vp,c.overEvery=Jg,c.overSome=Qg,c.partial=ms,c.partialRight=eo,c.partition=Lp,c.pick=tg,c.pickBy=fo,c.property=Do,c.propertyOf=jg,c.pull=Bl,c.pullAll=$u,c.pullAllBy=Ll,c.pullAllWith=Ml,c.pullAt=Nl,c.range=tm,c.rangeRight=em,c.rearg=Xp,c.reject=Hp,c.remove=Hl,c.rest=Jp,c.reverse=ps,c.sampleSize=Gp,c.set=ng,c.setWith=rg,c.shuffle=Wp,c.slice=Fl,c.sortBy=zp,c.sortedUniq=Kl,c.sortedUniqBy=Yl,c.split=Ag,c.spread=Qp,c.tail=Zl,c.take=ql,c.takeRight=Vl,c.takeRightWhile=Xl,c.takeWhile=Jl,c.tap=lp,c.throttle=jp,c.thru=Wr,c.toArray=ao,c.toPairs=lo,c.toPairsIn=po,c.toPath=am,c.toPlainObject=oo,c.transform=ig,c.unary=td,c.union=Ql,c.unionBy=jl,c.unionWith=tp,c.uniq=ep,c.uniqBy=np,c.uniqWith=rp,c.unset=sg,c.unzip=ds,c.unzipWith=Ku,c.update=ag,c.updateWith=ug,c.values=cn,c.valuesIn=og,c.without=ip,c.words=vo,c.wrap=ed,c.xor=sp,c.xorBy=ap,c.xorWith=up,c.zip=op,c.zipObject=cp,c.zipObjectDeep=hp,c.zipWith=fp,c.entries=lo,c.entriesIn=po,c.extend=co,c.extendWith=Zr,Ts(c,c),c.add=om,c.attempt=So,c.camelCase=lg,c.capitalize=go,c.ceil=cm,c.clamp=cg,c.clone=rd,c.cloneDeep=sd,c.cloneDeepWith=ad,c.cloneWith=id,c.conformsTo=ud,c.deburr=mo,c.defaultTo=kg,c.divide=hm,c.endsWith=pg,c.eq=Vt,c.escape=dg,c.escapeRegExp=gg,c.every=xp,c.find=Tp,c.findIndex=Wu,c.findKey=Hd,c.findLast=Pp,c.findLastIndex=ku,c.findLastKey=Fd,c.floor=fm,c.forEach=Zu,c.forEachRight=qu,c.forIn=Gd,c.forInRight=Wd,c.forOwn=kd,c.forOwnRight=Ud,c.get=Ds,c.gt=od,c.gte=cd,c.has=Kd,c.hasIn=_s,c.head=zu,c.identity=Ct,c.includes=Ep,c.indexOf=Pl,c.inRange=hg,c.invoke=qd,c.isArguments=ke,c.isArray=B,c.isArrayBuffer=hd,c.isArrayLike=Pt,c.isArrayLikeObject=rt,c.isBoolean=fd,c.isBuffer=be,c.isDate=ld,c.isElement=pd,c.isEmpty=dd,c.isEqual=gd,c.isEqualWith=md,c.isError=vs,c.isFinite=vd,c.isFunction=le,c.isInteger=no,c.isLength=Kr,c.isMap=ro,c.isMatch=Sd,c.isMatchWith=Dd,c.isNaN=_d,c.isNative=wd,c.isNil=yd,c.isNull=xd,c.isNumber=io,c.isObject=tt,c.isObjectLike=et,c.isPlainObject=kn,c.isRegExp=Ss,c.isSafeInteger=Td,c.isSet=so,c.isString=Yr,c.isSymbol=Rt,c.isTypedArray=on,c.isUndefined=Pd,c.isWeakMap=Ad,c.isWeakSet=Cd,c.join=El,c.kebabCase=mg,c.last=Ut,c.lastIndexOf=Il,c.lowerCase=vg,c.lowerFirst=Sg,c.lt=Od,c.lte=bd,c.max=lm,c.maxBy=pm,c.mean=dm,c.meanBy=gm,c.min=mm,c.minBy=vm,c.stubArray=As,c.stubFalse=Cs,c.stubObject=nm,c.stubString=rm,c.stubTrue=im,c.multiply=Sm,c.nth=Rl,c.noConflict=qg,c.noop=Ps,c.now=Ur,c.pad=Dg,c.padEnd=_g,c.padStart=wg,c.parseInt=xg,c.random=fg,c.reduce=Mp,c.reduceRight=Np,c.repeat=yg,c.replace=Tg,c.result=eg,c.round=Dm,c.runInContext=g,c.sample=Fp,c.size=kp,c.snakeCase=Pg,c.some=Up,c.sortedIndex=Gl,c.sortedIndexBy=Wl,c.sortedIndexOf=kl,c.sortedLastIndex=Ul,c.sortedLastIndexBy=zl,c.sortedLastIndexOf=$l,c.startCase=Cg,c.startsWith=Og,c.subtract=_m,c.sum=wm,c.sumBy=xm,c.template=bg,c.times=sm,c.toFinite=pe,c.toInteger=L,c.toLength=uo,c.toLower=Eg,c.toNumber=zt,c.toSafeInteger=Ed,c.toString=z,c.toUpper=Ig,c.trim=Rg,c.trimEnd=Bg,c.trimStart=Lg,c.truncate=Mg,c.unescape=Ng,c.uniqueId=um,c.upperCase=Hg,c.upperFirst=ws,c.each=Zu,c.eachRight=qu,c.first=zu,Ts(c,function(){var t={};return jt(c,function(e,r){$.call(c.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),c.VERSION=n,Ht(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){c[t].placeholder=c}),Ht(["drop","take"],function(t,e){F.prototype[t]=function(r){r=r===a?1:ot(L(r),0);var s=this.__filtered__&&!e?new F(this):this.clone();return s.__filtered__?s.__takeCount__=mt(r,s.__takeCount__):s.__views__.push({size:mt(r,Qt),type:t+(s.__dir__<0?"Right":"")}),s},F.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),Ht(["filter","map","takeWhile"],function(t,e){var r=e+1,s=r==Us||r==Ro;F.prototype[t]=function(o){var f=this.clone();return f.__iteratees__.push({iteratee:b(o,3),type:r}),f.__filtered__=f.__filtered__||s,f}}),Ht(["head","last"],function(t,e){var r="take"+(e?"Right":"");F.prototype[t]=function(){return this[r](1).value()[0]}}),Ht(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");F.prototype[t]=function(){return this.__filtered__?new F(this):this[r](1)}}),F.prototype.compact=function(){return this.filter(Ct)},F.prototype.find=function(t){return this.filter(t).head()},F.prototype.findLast=function(t){return this.reverse().find(t)},F.prototype.invokeMap=N(function(t,e){return typeof t=="function"?new F(this):this.map(function(r){return Mn(r,t,e)})}),F.prototype.reject=function(t){return this.filter($r(b(t)))},F.prototype.slice=function(t,e){t=L(t);var r=this;return r.__filtered__&&(t>0||e<0)?new F(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==a&&(e=L(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},F.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},F.prototype.toArray=function(){return this.take(Qt)},jt(F.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),s=/^(?:head|last)$/.test(e),o=c[s?"take"+(e=="last"?"Right":""):e],f=s||/^find/.test(e);o&&(c.prototype[e]=function(){var l=this.__wrapped__,d=s?[1]:arguments,m=l instanceof F,_=d[0],w=m||B(l),x=function(H){var G=o.apply(c,we([H],d));return s&&P?G[0]:G};w&&r&&typeof _=="function"&&_.length!=1&&(m=w=!1);var P=this.__chain__,O=!!this.__actions__.length,E=f&&!P,M=m&&!O;if(!f&&w){l=M?l:new F(this);var I=t.apply(l,d);return I.__actions__.push({func:Wr,args:[x],thisArg:a}),new Gt(I,P)}return E&&M?t.apply(this,d):(I=this.thru(x),E?s?I.value()[0]:I.value():I)})}),Ht(["pop","push","shift","sort","splice","unshift"],function(t){var e=lr[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);c.prototype[t]=function(){var o=arguments;if(s&&!this.__chain__){var f=this.value();return e.apply(B(f)?f:[],o)}return this[r](function(l){return e.apply(B(l)?l:[],o)})}}),jt(F.prototype,function(t,e){var r=c[e];if(r){var s=r.name+"";$.call(nn,s)||(nn[s]=[]),nn[s].push({name:e,func:r})}}),nn[Br(a,yt).name]=[{name:"wrapper",func:a}],F.prototype.clone=Mh,F.prototype.reverse=Nh,F.prototype.value=Hh,c.prototype.at=pp,c.prototype.chain=dp,c.prototype.commit=gp,c.prototype.next=mp,c.prototype.plant=Sp,c.prototype.reverse=Dp,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=_p,c.prototype.first=c.prototype.head,On&&(c.prototype[On]=vp),c},ye=dh();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(lt._=ye,define(function(){return ye})):Be?((Be.exports=ye)._=ye,yi._=ye):lt._=ye}).call(hn)});var ge=xo(Os(),1),pn;(function(a){a[a.fresh=1]="fresh",a[a.brackish=2]="brackish",a[a.salt=3]="salt"})(pn||(pn={}));var fn=class{static{this.fresh=1e3}static{this.brackish=1020}static{this.salt=1030}},qr=class{static{this.standard=9.80665}},$e=class a{static{this.coefficient=1e5}static pascalToBar(n){return n/a.coefficient}static barToPascal(n){return n*a.coefficient}},Vr=class a{static{this.standard=1.01325}static{this.standardPascals=$e.barToPascal(a.standard)}static{this.gasConstant=8.31432}static{this.temperature=288.15}static{this.lapsRate=-.0065}static{this.molarMass=.0289644}static{this.exponent=qr.standard*a.molarMass/(a.gasConstant*a.lapsRate)}static{this.invertedExponent=1/a.exponent}static pressure(n){let i=a.temperature/(a.temperature+a.lapsRate*n);return a.standardPascals*Math.pow(i,a.exponent)}static altitude(n){if(n>=a.standardPascals)return 0;let i=n/a.standardPascals,u=Math.pow(i,a.invertedExponent);return(a.temperature/u-a.temperature)/a.lapsRate}};var ct=class{constructor(n,i,u,h,p,S){this._n2HalfTime=n,this._n2A=i,this._n2B=u,this._heHalfTime=h,this._heA=p,this._heB=S}get n2HalfTime(){return this._n2HalfTime}get n2A(){return this._n2A}get n2B(){return this._n2B}get heHalfTime(){return this._heHalfTime}get heA(){return this._heA}get heB(){return this._heB}},ze=class{static{this.buhlmannZHL16C=[new ct(5,1.1696,.5578,1.88,1.6189,.477),new ct(8,1,.6514,3.02,1.383,.5747),new ct(12.5,.8618,.7222,4.72,1.1919,.6527),new ct(18.5,.7562,.7826,6.99,1.0458,.7223),new ct(27,.62,.8125,10.21,.922,.7582),new ct(38.3,.5043,.8434,14.48,.8205,.7957),new ct(54.3,.441,.8693,20.53,.7305,.8279),new ct(77,.4,.891,29.11,.6502,.8553),new ct(109,.375,.9092,41.2,.595,.8757),new ct(146,.35,.9222,55.19,.5545,.8903),new ct(187,.3295,.9319,70.69,.5333,.8997),new ct(239,.3065,.9403,90.34,.5189,.9073),new ct(305,.2835,.9477,115.29,.5181,.9122),new ct(390,.261,.9544,147.42,.5176,.9171),new ct(498,.248,.9602,188.24,.5172,.9217),new ct(635,.2327,.9653,240.03,.5119,.9267)]}},xt=class a{static{this.o2InAir=.209}static{this.nitroxInAir=1-a.o2InAir}static{this.minPpO2=.18}static{this.maxEnd=30}static partialPressure(n,i){return n*i}static mod(n,i){return n/i}static bestMix(n,i,u){let h=u.toBar(i),p=n/h;return p>1?1:p}static ead(n,i,u=a.o2InAir){let h=1-n,p=1-u;return a.end(i,h)/p}static end(n,i,u=0){let h=this.narcoticIndex(u,i);return n*h}static mnd(n,i,u=0){let h=this.narcoticIndex(u,i);return n/h}static ceiling(n,i){let h=a.minPpO2/n*i;return h<i?i:h}static narcoticIndex(n,i=0){return i+n}};var zn=class a extends ct{constructor(n,i){super(n.n2HalfTime,n.n2A,n.n2B,n.heHalfTime,n.heA,n.heB),this._pN2=0,this._pHe=0,this._pTotal=0,this._a=0,this._b=0,this._pN2=a.inspiredN2Pressure(i),this._pHe=0,this.updateCoefficients()}get pN2(){return this._pN2}get pHe(){return this._pHe}get pTotal(){return this._pTotal}get a(){return this._a}get b(){return this._b}static totalPressure(n){return n.pN2+n.pHe}static fromCurrent(n,i){let u=new a(i,1);return u.restoreFrom(n),u}static inspiredN2Pressure(n){let i=a.pressureInLungs(n);return xt.partialPressure(i,xt.nitroxInAir)}static pressureInLungs(n){return n-.0627}restoreFrom(n){this._pN2=n.pN2,this._pHe=n.pHe,this.updateCoefficients()}copy(){return a.fromCurrent(this,this)}mValue(n){return this.a+n/this.b}gradientFactor(n){let i=this.mValue(n),u=(this.pTotal-n)/(i-n);return u<0?0:u}saturationRatio(n){return this.pTotal<n?this.pTotal/n-1:this.gradientFactor(n)}ceiling(n){return(this.pTotal-this.a*n)/(n/this.b+1-n)}load(n,i){this._pN2=this.loadGas(n,i.fN2,this.pN2,this.n2HalfTime),this._pHe=this.loadGas(n,i.fHe,this.pHe,this.heHalfTime);let u=this.pTotal;return this.updateCoefficients(),this.pTotal-u}loadGas(n,i,u,h){let p=n.speed*i,S=a.pressureInLungs(n.startPressure)*i;return this.schreinerEquation(u,S,n.duration,h,p)}schreinerEquation(n,i,u,h,p){let y=.01155245301/h,T=Math.exp(-y*u);return i+p*(u-1/y)-(i-n-p/y)*T}updateCoefficients(){this._pTotal=a.totalPressure(this),this._a=(this.n2A*this.pN2+this.heA*this.pHe)/this.pTotal,this._b=(this.n2B*this.pN2+this.heB*this.pHe)/this.pTotal}},Ee=class a{constructor(n){this._compartments=n}get compartments(){return this._compartments}static createLoaded(n){if(n.length!==ze.buhlmannZHL16C.length)throw new Error("Provided incompatible count of tissues");let i=(0,ge.default)(n).map((u,h)=>{let p=ze.buhlmannZHL16C[h];return zn.fromCurrent(u,p)}).value();return new a(i)}static create(n){let i=[];for(let u=0;u<ze.buhlmannZHL16C.length;u++){let h=ze.buhlmannZHL16C[u],p=new zn(h,n);i.push(p)}return new a(i)}static createLoadedAt(n){let i=Vr.pressure(n),u=$e.pascalToBar(i);return a.create(u).finalState()}static copy(n){let i=[];for(let u=0;u<n.length;u++){let h=n[u].copy();i.push(h)}return i}restoreFrom(n){this._compartments.forEach((i,u)=>i.restoreFrom(n[u]))}finalState(){return(0,ge.default)(this._compartments).map(n=>({pN2:n.pN2,pHe:n.pHe})).value()}saturationRatio(n){return(0,ge.default)(this._compartments).map(i=>i.saturationRatio(n)).value()}ceiling(n){let i=0;for(let u=0;u<this._compartments.length;u++){let h=this._compartments[u].ceiling(n);h>i&&(i=h)}return i}load(n,i){let u=0;for(let h=0;h<this._compartments.length;h++){let S=this._compartments[h].load(n,i);u=u+S}return u}gradientFactor(n){return(0,ge.default)(this._compartments).map(u=>u.gradientFactor(n)).max()||0}},Xr=class a{static validTissue(n){return n.pN2>0&&n.pHe>=0}static validCount(n){return!!n&&n.length===ze.buhlmannZHL16C.length}static valid(n){return a.validCount(n)?(0,ge.default)(n).every(u=>a.validTissue(u)):!1}},nt=class a{static fix(n){return Number(n.toFixed(10))}static roundTwoDecimals(n){return a.round(n,2)}static round(n,i=0){return a.adapt(Math.round,n,i)}static floorTwoDecimals(n){return a.floor(n,2)}static floor(n,i=0){return a.adapt(Math.floor,n,i)}static ceilTwoDecimals(n){return a.ceil(n,2)}static ceil(n,i=0){return a.adapt(Math.ceil,n,i)}static ceilDistance(n,i){return a.adaptDistance(Math.ceil,n,i)}static roundDistance(n,i){return a.adaptDistance(Math.round,n,i)}static floorDistance(n,i){return a.adaptDistance(Math.floor,n,i)}static adapt(n,i,u){let h=Math.pow(10,u);return n(i*h)/h}static adaptDistance(n,i,u){return n(i/u)*u}},me=class{constructor(n){this.options=n}create(){switch(this.options.salinity){case pn.salt:return Ke.forSaltWater(this.options.altitude);case pn.brackish:return Ke.forBrackishWater(this.options.altitude);default:return Ke.forFreshWater(this.options.altitude)}}},Ke=class a{constructor(n,i){this.density=n,this._gravity=qr.standard;let u=Vr.pressure(i);this._surfacePressure=$e.pascalToBar(u)}get surfacePressure(){return this._surfacePressure}static forSaltWater(n=0){return new a(fn.salt,n)}static forBrackishWater(n=0){return new a(fn.brackish,n)}static forFreshWater(n=0){return new a(fn.fresh,n)}static simple(){let n=new a(fn.fresh,0);return n._surfacePressure=1,n._gravity=10,n}toBar(n){let i=this.density*this._gravity;return $e.pascalToBar(n*i)+this._surfacePressure}fromBar(n){if(n<this._surfacePressure)throw new Error("Lower pressure than altitude isn`t convertible to depth.");let i=this.density*this._gravity;return $e.barToPascal(n-this._surfacePressure)/i}},$n;(function(a){a[a.never=1]="never",a[a.auto=2]="auto",a[a.always=3]="always"})($n||($n={}));var Y=class a{static{this.altitude=0}static{this.saltWater=pn.salt}static{this.roundStopsToMinutes=!1}static{this.gasSwitchDuration=2}static{this.problemSolvingDuration=1}static{this.lastStopDepth=3}static{this.lastStopDepthRecre=5}static{this.safetyStopRecre=$n.auto}static{this.decoStopDistance=3}static{this.minimumAutoStopDepth=10}static{this.addSafetyStop=!0}static{this.maxEND=xt.maxEnd}static{this.oxygenNarcotic=!0}static{this.ascentSpeed6m=3}static{this.ascentSpeed50percTo6m=3}static{this.ascentSpeed50perc=9}static{this.descentSpeed=18}static{this.gfLow=.4}static{this.gfHigh=.85}static{this.maxPpO2=1.4}static{this.maxDecoPpO2=1.6}static{this.airBreakOxygenDuration=20}static{this.airBreakBottomGasDuration=5}static setMediumConservatism(n){n.gfLow=a.gfLow,n.gfHigh=a.gfHigh}static useGeneralRecommended(n){n.safetyStop=a.safetyStopRecre,n.roundStopsToMinutes=a.roundStopsToMinutes,n.gasSwitchDuration=a.gasSwitchDuration,n.oxygenNarcotic=a.oxygenNarcotic}},bs=class{constructor(n=!1,i=Y.airBreakOxygenDuration,u=Y.airBreakBottomGasDuration){this.enabled=n,this.oxygenDuration=i,this.bottomGasDuration=u}loadFrom(n){this.enabled=n.enabled,this.oxygenDuration=n.oxygenDuration,this.bottomGasDuration=n.bottomGasDuration}},Kn=class{constructor(n=Y.gfLow,i=Y.gfHigh,u=Y.maxPpO2,h=Y.maxDecoPpO2,p=Y.saltWater){this.gfLow=n,this.gfHigh=i,this.maxPpO2=u,this.maxDecoPpO2=h,this.salinity=p,this.altitude=Y.altitude,this.roundStopsToMinutes=Y.roundStopsToMinutes,this.gasSwitchDuration=Y.gasSwitchDuration,this.safetyStop=Y.safetyStopRecre,this.lastStopDepth=Y.lastStopDepth,this.decoStopDistance=Y.decoStopDistance,this.minimumAutoStopDepth=Y.minimumAutoStopDepth,this.maxEND=Y.maxEND,this.oxygenNarcotic=!0,this.ascentSpeed6m=Y.ascentSpeed6m,this.ascentSpeed50percTo6m=Y.ascentSpeed50percTo6m,this.ascentSpeed50perc=Y.ascentSpeed50perc,this.descentSpeed=Y.descentSpeed,this.problemSolvingDuration=Y.problemSolvingDuration,this._airBreaks=new bs,this.gfLow=n||Y.gfLow,this.gfHigh=i||Y.gfHigh,this.maxPpO2=u||Y.maxPpO2,this.maxDecoPpO2=h||Y.maxDecoPpO2,this.salinity=p||Y.saltWater}get airBreaks(){return this._airBreaks}loadFrom(n){this.gfLow=n.gfLow||this.gfLow,this.gfHigh=n.gfHigh||this.gfHigh,this.maxPpO2=n.maxPpO2||this.maxPpO2,this.maxDecoPpO2=n.maxDecoPpO2||this.maxDecoPpO2,this.oxygenNarcotic=n.oxygenNarcotic,this.salinity=n.salinity||this.salinity,this.altitude=n.altitude||n.altitude===0?n.altitude:this.altitude,this.roundStopsToMinutes=n.roundStopsToMinutes,this.gasSwitchDuration=n.gasSwitchDuration||this.gasSwitchDuration,this.problemSolvingDuration=n.problemSolvingDuration||this.problemSolvingDuration,this.lastStopDepth=n.lastStopDepth||this.lastStopDepth,this.decoStopDistance=n.decoStopDistance||this.decoStopDistance,this.minimumAutoStopDepth=n.minimumAutoStopDepth||this.minimumAutoStopDepth,this.safetyStop=n.safetyStop||this.safetyStop,this.maxEND=n.maxEND||this.maxEND,this.ascentSpeed6m=n.ascentSpeed6m||this.ascentSpeed6m,this.ascentSpeed50percTo6m=n.ascentSpeed50percTo6m||this.ascentSpeed50percTo6m,this.ascentSpeed50perc=n.ascentSpeed50perc||this.ascentSpeed50perc,this.descentSpeed=n.descentSpeed||this.descentSpeed,this.airBreaks.loadFrom(n.airBreaks)}},Yn=class{constructor(n,i){this.depthConverter=n,this.options=i}toDecoStop(n){let i=this.depthConverter.fromBar(n);return nt.roundDistance(i,this.options.decoStopDistance)}nextStop(n){if(n<=this.options.lastStopDepth)return 0;let i=nt.floorDistance(n,this.options.decoStopDistance);if(i!==n)return i;let u=n-this.options.decoStopDistance;return u<=this.options.lastStopDepth?this.options.lastStopDepth:u}addSafetyStop(n,i){return(this.options.safetyStop===$n.always||this.options.safetyStop===$n.auto&&i>this.options.minimumAutoStopDepth)&&n===this.options.lastStopDepth}},dn=class{static createAtSurface(n=0){return Ee.createLoadedAt(n)}surfaceGradient(n,i){return Ee.createLoaded(n).gradientFactor(i)}offgasingStart(n){let u=(0,ge.default)(n).map(S=>{if(S.length!==16)throw new Error("Wrong number of tissues in any sample");return zn.totalPressure(S[4])}),h=u.findLastIndex((S,y,T)=>(y>0?T[y-1]:S)<S);if(h<0)return n.length===0?-1:n.length-1;let p=u.findIndex((S,y,T)=>(y>0?T[y-1]:S)>S,h);return p<0?h:p}},gt;(function(a){a[a.noAction=0]="noAction",a[a.error=1]="error",a[a.gasSwitch=2]="gasSwitch",a[a.noDecoEnd=3]="noDecoEnd",a[a.lowPpO2=4]="lowPpO2",a[a.highPpO2=5]="highPpO2",a[a.highAscentSpeed=6]="highAscentSpeed",a[a.highDescentSpeed=7]="highDescentSpeed",a[a.brokenCeiling=8]="brokenCeiling",a[a.maxEndExceeded=9]="maxEndExceeded",a[a.isobaricCounterDiffusion=10]="isobaricCounterDiffusion",a[a.highGasDensity=11]="highGasDensity",a[a.safetyStop=12]="safetyStop",a[a.minDepth=13]="minDepth",a[a.maxDepth=14]="maxDepth",a[a.missingAirBreak=15]="missingAirBreak"})(gt||(gt={}));var ht=class a{constructor(n,i,u,h,p){this.timeStamp=n,this.depth=i,this.type=u,this.message=h,this.gas=p}static create(n,i,u,h){return new a(i,u,n,"",h)}static createError(n){return new a(0,0,gt.error,n)}},st=class{static createError(n){return ht.createError(n)}static createSafetyStopStart(n,i){return ht.create(gt.safetyStop,n,i)}static createNoDecoEnd(n,i){return ht.create(gt.noDecoEnd,n,i)}static createGasSwitch(n,i,u){return ht.create(gt.gasSwitch,n,i,u)}static createLowPpO2(n,i){return ht.create(gt.lowPpO2,n,i)}static createHighPpO2(n,i){return ht.create(gt.highPpO2,n,i)}static createHighAscentSpeed(n,i){return ht.create(gt.highAscentSpeed,n,i)}static createHighDescentSpeed(n,i){return ht.create(gt.highDescentSpeed,n,i)}static createBrokenCeiling(n,i){return ht.create(gt.brokenCeiling,n,i)}static createMaxEndExceeded(n,i,u){return ht.create(gt.maxEndExceeded,n,i,u)}static createIsobaricCounterDiffusion(n,i,u){return ht.create(gt.isobaricCounterDiffusion,n,i,u)}static createHighDensity(n,i,u){return ht.create(gt.highGasDensity,n,i,u)}static createShallowDepth(n){return ht.create(gt.minDepth,0,n)}static createMaxDepth(n){return ht.create(gt.maxDepth,0,n)}static createMissingAirBreak(n,i){return ht.create(gt.missingAirBreak,n,i)}},Zn=class{constructor(){this.items=[]}add(n){this.items.push(n)}},Es=class{constructor(n,i){this.time=n,this.depth=i}get notAtSurface(){return this.depth>0}static isDecoDive(n){for(let i of n)if(i.notAtSurface)return!0;return!1}},Ie=class a{static{this.emptyTissueOverPressures=[]}constructor(n,i,u){this.seg=n,this._finalTissues=i,this.err=u}get segments(){return this.seg}get finalTissues(){return this._finalTissues}get errors(){return this.err}static fromErrors(n,i){return new a(n,dn.createAtSurface(),i)}static fromProfile(n,i){return new a(n,i,[])}},gn=class a extends Ie{constructor(n,i,u,h,p,S){super(n,u,S),this.ceil=i,this._tissues=h,this._tissueOverPressures=p}get ceilings(){return this.ceil}get tissues(){return this._tissues}static fromStatisticsProfile(n,i,u,h,p){return new a(n,i,h,p,u,[])}static fromStatisticsErrors(n,i){return new a(n,[],dn.createAtSurface(),[],Ie.emptyTissueOverPressures,i)}get tissueOverPressures(){return this._tissueOverPressures}},qn=class a{static{this.airName="Air"}static{this.oxygenName="Oxygen"}static nameFor(n,i=0){let h=nt.round(n*100),p=nt.round(i*100);return h<=0?"":p<=0?h>=100?a.oxygenName:h===21?a.airName:"EAN"+h.toString():`${h>=21?"Helitrox":"Trimix"} ${h.toString()}/${p.toString()}`}},Is=class{static validate(n){let i=[];if(!n.hasBottomGas){let u=st.createError("At least one bottom gas has to be defined.");return i.push(u),i}return i}},Rs=class{constructor(n,i){this.gases=n,this.depthConverter=Ke.simple(),this.depthLevels=new Yn(this.depthConverter,i)}bestGas(n){let i=this.depthConverter.toBar(n.currentDepth),u=this.depthConverter.toBar(n.maxEnd),h=n.currentGas;return this.gases.all.forEach(p=>{let S=p.mod(n.maxDecoPpO2),y=this.depthLevels.toDecoStop(S),T=p.end(i,n.oxygenNarcotic);n.currentDepth<=y&&T<=u&&(!h||h.fO2<p.fO2)&&(h=p)}),h}airBreakGas(n,i){let u=this.depthConverter.toBar(n);return(0,ge.default)(this.gases.all).filter(p=>xt.partialPressure(u,p.fO2)>=xt.minPpO2).minBy(p=>p.fO2)||i}},Vn=class{constructor(){this.items=[]}get all(){return this.items.slice()}get hasBottomGas(){return this.items.length>=1}add(n){this.items.push(n)}isRegistered(n){return this.items.includes(n)}},ft=class a{constructor(n,i){if(this._fO2=n,this._fHe=i,this._contentCode=0,this.contentExceeds100percent())throw new Error("O2 + He can't exceed 100 %");this.updateContentCode()}get fN2(){return 1-this._fO2-this._fHe}get fO2(){return this._fO2}get fHe(){return this._fHe}get name(){return qn.nameFor(this.fO2,this.fHe)}get contentCode(){return this._contentCode}set fO2(n){this._fO2=n>1?1:n,this.contentExceeds100percent()&&(this._fHe=this.countRemaining(this._fO2)),this.updateContentCode()}set fHe(n){this._fHe=n>.99?.99:n,this.contentExceeds100percent()&&(this._fO2=this.countRemaining(this._fHe)),this.updateContentCode()}copy(){return new a(this._fO2,this._fHe)}mod(n){return xt.mod(n,this._fO2)}end(n,i){let u=i?this._fO2:0;return xt.end(n,this.fN2,u)}mnd(n,i){let u=i?this._fO2:0;return xt.mnd(n,this.fN2,u)}ceiling(n){return xt.ceiling(this._fO2,n)}compositionEquals(n){return!!n&&this._fO2===n._fO2&&this._fHe===n._fHe}toString(){return`Gas:${this.name}`}contentExceeds100percent(){return this._fO2+this._fHe>1}countRemaining(n){let i=1-n;return nt.round(i,5)}updateContentCode(){this._contentCode=nt.round(this._fO2*1e4*1e4)+nt.round(this._fHe*1e4)}},Jt=class a{static{this.oxygen=new ft(1,0)}static{this.ean50=new ft(.5,0)}static{this.ean38=new ft(.38,0)}static{this.ean36=new ft(.36,0)}static{this.ean32=new ft(.32,0)}static{this.trimix3525=new ft(.35,.25)}static{this.trimix2525=new ft(.25,.25)}static{this.air=new ft(xt.o2InAir,0)}static{this.trimix2135=new ft(.21,.35)}static{this.trimix1845=new ft(.18,.45)}static{this.trimix1555=new ft(.15,.55)}static{this.trimix1260=new ft(.12,.6)}static{this.trimix1070=new ft(.1,.7)}static{this.namesRegEx=/[EAN](?<fO2>\d{2})|(?<fO2b>\d{2})\/(?<fHe>\d{2})/i}static{this.map=new Map([[qn.airName,a.air],["EAN32",a.ean32],["EAN36",a.ean36],["EAN38",a.ean38],["EAN50",a.ean50],[qn.oxygenName,a.oxygen],["Helitrox 35/25",a.trimix3525],["Helitrox 25/25",a.trimix2525],["Helitrox 21/35",a.trimix2135],["Trimix 18/45",a.trimix1845],["Trimix 15/55",a.trimix1555],["Trimix 12/60",a.trimix1260],["Trimix 10/70",a.trimix1070]])}static nitroxNames(){return a.allNames().slice(0,6)}static allNames(){return Array.from(a.map.keys())}static byName(n){let i=[...a.map.keys()],u=(0,ge.default)(i).filter(p=>p.toLowerCase()===n.toLowerCase()).first();if(u)return a.map.get(u)??null;let h=a.namesRegEx.exec(n);if(h){if(h[1]){let p=Number(h[1])/100;if(p>0)return new ft(p,0)}if(h[2]&&h[3]){let p=Number(h[2])/100,S=Number(h[3])/100;if(p>0&&S>0)return new ft(p,S)}}return null}},ne=class a{static toGases(n){let i=new Vn;return n.forEach(u=>{i.add(u.gas)}),i}static haveReserve(n){for(let i=0;i<n.length;i++)if(!n[i].hasReserve)return!1;return!0}static resetConsumption(n){n.forEach(i=>{i.consumed=0,i.reserve=0})}static removeTank(n,i){let u=n.filter(h=>h!==i);return a.renumberIds(u),u}static renumberIds(n){for(let i=0;i<n.length;i++){let u=n[i];u.id=i+1}}},Xn=class a{constructor(n,i,u){this.size=n,this.startPressure=i,this.id=0,this.consumed=0,this.reserve=0,this._gas=Jt.air.copy(),this.o2=u}get gas(){return this._gas}get o2(){return Jr.getO2(this.gas.fO2,this.gas.fHe)}get he(){let n=this.gas.fHe*100;return nt.roundTwoDecimals(n)}get n2(){let n=100-this.o2-this.he;return nt.roundTwoDecimals(n)}get volume(){return a.volume(this)}get reserveVolume(){return a.volume2(this.size,this.reserve)}get consumedVolume(){return a.volume2(this.size,this.consumed)}get name(){return this._gas.name}get endPressure(){let n=this.startPressure-this.consumed;return n>0?n:0}get percentsRemaining(){return this.endPressure/this.startPressure*100}get percentsReserve(){let n=this.reserve/this.startPressure*100;return n>100?100:n}get hasReserve(){return this.endPressure>=this.reserve}set o2(n){this._gas.fO2=Jr.setO2(n,this.gas.fHe)}set he(n){this.gas.fHe=n/100}static createDefault(){return new a(15,200,xt.o2InAir*100)}static volume(n){return a.volume2(n.size,n.startPressure)}static volume2(n,i){return n*i}assignStandardGas(n){let i=Jt.byName(n);i&&(this.gas.fO2=i.fO2,this.gas.fHe=i.fHe)}loadFrom(n){this.size=n.size,this.startPressure=n.startPressure,this.consumed=n.consumed,this.reserve=n.reserve,this.gas.fO2=n._gas.fO2,this.gas.fHe=n._gas.fHe}toString(){return`Tank ${this.id}:${this.name},${this.size} L,${this.startPressure} b`}},Jr=class a{static{this.pinnedO2=21}static{this.o2InAirPercent=xt.o2InAir*100}static getO2(n,i){let u=n*100;return this.isInAirRange(u,i)?a.pinnedO2:nt.roundTwoDecimals(u)}static setO2(n,i){return this.isInAirRange(n,i)?xt.o2InAir:n/100}static isInAirRange(n,i){return a.o2InAirPercent<=n&&n<=a.pinnedO2&&i===0}},Ye=class a{static speed(n,i){let u=n.end-n.start;return a.speedByXChange(i.start,i.end,u)}static speedByXChange(n,i,u){return(i-n)/u}static yValueAt(n,i,u){return n+i*u}static xValueAtAbsolute(n,i,u){let h=this.speed(n,i);return n.start+a.xValueAt(i.start,h,u)}static xValueAt(n,i,u){return i===0?0:(u-n)/i}},Bs=class a{static validate(n,i){let u=[];if(!n.any()){let h=st.createError("There needs to be at least one segment at depth.");u.push(h)}return n.items.forEach(h=>{a.validateRegisteredGas(u,i,h)}),u}static validateRegisteredGas(n,i,u){if(!i.isRegistered(u.gas)){let h=`Segment ${u.startDepth}-${u.endDepth} has gas not registered in gases.`,p=st.createError(h);n.push(p)}}},$t=class a{constructor(n,i,u,h){this._startDepth=n,this._endDepth=i,this._duration=h,u instanceof Xn?(this._tank=u,this._gas=u.gas):this._gas=u}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}get duration(){return this._duration}get gas(){return this._gas}get tank(){return this._tank}get speed(){return a.speed(this.startDepth,this.endDepth,this.duration)}get averageDepth(){return(this.startDepth+this.endDepth)/2}set startDepth(n){this._startDepth=n}set endDepth(n){this._endDepth=n}set duration(n){this._duration=n}set tank(n){this._tank=n,n&&(this._gas=n.gas)}static from(n){let i=new a(n.startDepth,n.endDepth,n._gas,n.duration);return i.tank=n.tank,i}static speed(n,i,u){return Ye.speedByXChange(n,i,u)}static depthAt(n,i,u){return Ye.yValueAt(n,i,u)}static timeAt(n,i,u){return Ye.xValueAt(n,i,u)}contentEquals(n){return this.speed===n.speed&&this._gas.compositionEquals(n._gas)}depthAt(n){return a.depthAt(this.startDepth,this.speed,n)}mergeFrom(n){this.duration+=n.duration,this.endDepth=n.endDepth}toString(){return`Segment:${this.startDepth}-${this.endDepth} m,${this.duration} s, ${this.gas.toString()}`}},St=class a{constructor(){this.segments=[],this._maxDepth=0}get startAscentIndex(){return this.deepestPart().length}get startAscentTime(){let n=this.deepestPart();return a.duration(n)}get length(){return this.segments.length}get items(){return this.segments.slice()}get maxDepth(){return this._maxDepth}get currentDepth(){return this.any()?this.last().endDepth:0}get duration(){return a.duration(this.segments)}static from(n){return a.fromCollection(n.segments)}static fromCollection(n){let i=new a;return n.forEach(u=>{let h=$t.from(u);i.segments.push(h),i.updateMaxDepth(h)}),i}static duration(n){let i=0;for(let u of n)i+=u.duration;return i}static depthAt(n,i){let u=0;for(let h=0;h<n.length;h++){let p=n[h],S=i-u;if(u<=i&&S<=p.duration)return p.depthAt(S);u+=p.duration}return 0}static averageDepth(n){if(n.length<=0)return 0;let i=0,u=0;return n.forEach(h=>{if(h.duration>0){let p=h.averageDepth*h.duration+u*i;u+=h.duration,i=p/u}}),i}add(n,i,u){let h=new $t(this.currentDepth,n,i,u);return this.segments.push(h),this.updateMaxDepth(h),h}addFlat(n,i){return this.add(this.currentDepth,n,i)}mergeFlat(n=0){if(n<0)return this.items;let i=[];for(let u=this.segments.length-1;u>n;u--){let h=this.segments[u-1],p=this.segments[u];h.contentEquals(p)&&(h.mergeFrom(p),i.push(p))}return this.segments=this.segments.filter(u=>!i.includes(u)),this.items}remove(n){this.segments=this.segments.filter(i=>i!==n),this.fixStartDepths()}cutDown(n){let i=this.segments.length-n;this.segments=this.segments.slice(0,i),this.fixStartDepths()}any(){return this.segments.length!==0}last(){return this.segments[this.segments.length-1]}copy(){return a.from(this)}fixStartDepths(){this.any()&&(this.segments[0].startDepth=0);for(let n=0;n<this.segments.length-1;n++){let i=this.segments[n],u=this.segments[n+1];u.startDepth=i.endDepth,this.updateMaxDepth(u)}}deepestPart(){for(let n=this.segments.length-1;n>=0;n--)if(this.segments[n].endDepth===this.maxDepth)return this.items.slice(0,n+1);return[]}updateMaxDepth(n){n.endDepth>this._maxDepth&&(this._maxDepth=n.endDepth)}},W=class a{static{this.oneSecond=1}static{this.oneMinute=60}static{this.oneHour=a.oneMinute*60}static{this.oneDay=a.oneHour*24}static{this.safetyStopDuration=a.oneMinute*3}static toSeconds(n){return n*a.oneMinute}static toMinutes(n){return n/a.oneMinute}static toHours(n){return n/a.oneHour}},Qr=class a{static{this.minimalStep=1}constructor(){}search(n){if(n.maxValue<n.initialValue)throw Error("Max value cant be smaller than initial value");if(n.estimationStep>n.maxValue-n.initialValue)throw Error("Step cant be larger than range");let i=this.findInitialLimit(n);return this.searchInsideInterval(n,i)}searchInsideInterval(n,i){for(;i.right-i.left>a.minimalStep;){let u=i.left+(i.right-i.left)/2;u=Math.round(u),n.doWork(u),n.meetsCondition()?i.left=u:i.right=u}return i.left}findInitialLimit(n){let i=n.initialValue;for(n.doWork(i);n.meetsCondition()&&i<=n.maxValue;)i+=n.estimationStep,n.doWork(i);let u=i-n.estimationStep;u=u<n.initialValue?n.initialValue:u;let h=i>n.maxValue?n.maxValue:i;return{left:u,right:h}}},Ls=class{constructor(n,i,u){this.depthConverter=n,this.options=i,this.tissues=u,this.lowestCeiling=0,this.lowestCeiling=this.depthConverter.surfacePressure+1}ceiling(){let n=this.tolerated();return n<this.depthConverter.surfacePressure&&(n=this.depthConverter.surfacePressure),this.depthConverter.fromBar(n)}toleratedTissues(n,i,u,h){let p=this.tissues.compartments,S=0;for(let y=0;y<p.length;y++){let T=p[y],C=S;(n/T.b+T.a-n)*u+n<(i/T.b+T.a-i)*h+i&&(C=(-T.a*T.b*(u*i-h*n)-(1-T.b)*(u-h)*i*n+T.b*(i-n)*T.pTotal)/(-T.a*T.b*(u-h)+(1-T.b)*(h*i-u*n)+T.b*(i-n))),C>=S&&(S=C)}return S}tolerated(){let n=this.options.gfLow,i=this.options.gfHigh,u=this.depthConverter.surfacePressure,h=this.tissues.ceiling(n);return h>this.lowestCeiling&&(this.lowestCeiling=h),this.toleratedTissues(u,this.lowestCeiling,i,n)}},jr=class a{static{this.sixMeters=6}constructor(n){this.options=n,this.averageDepth=0}markAverageDepth(n){let i=n.deepestPart();this.averageDepth=St.averageDepth(i)}ascent(n){let i=this.averageDepth/2;return n>a.sixMeters?n>i?this.options.ascentSpeed50perc:this.options.ascentSpeed50percTo6m:this.options.ascentSpeed6m}},Ue=class a{constructor(n,i,u,h,p){this.gases=n,this.segments=i,this.options=u,this.depthConverter=h,this.ceilings=[],this.tissueOverPressures=[],this.tissuesHistory=[],this.runTime=0,this._oxygenStarted=0,this.collectStatistics=this.noStatistics,this.tissues=Ee.createLoaded(p),this.gradients=new Ls(h,u,this.tissues);let S=i.last();this._currentGas=S.gas,this.bestGasOptions={currentDepth:this.currentDepth,maxDecoPpO2:this.options.maxDecoPpO2,oxygenNarcotic:this.options.oxygenNarcotic,maxEnd:this.options.maxEND,currentGas:this.currentGas},this.speeds=new jr(this.options),this.levels=new Yn(h,u),this.gasSource=new Rs(n,u)}static createWithoutStatistics(n,i,u,h,p){return new a(n,i,u,h,p)}static createForCeilings(n,i,u,h,p){let S=new a(n,i,u,h,p);return S.collectStatistics=S.addCeilingStatistics,S}static createForFullStatistics(n,i,u,h,p){let S=new a(n,i,u,h,p);return S.collectStatistics=S.addFullStatistics,S}get currentGas(){return this._currentGas}get ascentSpeed(){return this.speeds.ascent(this.currentDepth)}get currentDepth(){return this.segments.currentDepth}get addSafetyStop(){return this.levels.addSafetyStop(this.currentDepth,this.segments.maxDepth)}get decoStopDuration(){return this.options.roundStopsToMinutes?W.oneMinute:W.oneSecond}get isAtSurface(){return this.segments.last().endDepth===0}get shouldAddAirBreaks(){return this.isBreathingOxygen&&this.options.airBreaks.enabled}get runTimeOnOxygen(){return this.runTime-this._oxygenStarted}get finalTissues(){return this.tissues.finalState()}get isBreathingOxygen(){return this.currentGas.compositionEquals(Jt.oxygen)}set currentGas(n){n.compositionEquals(Jt.oxygen)&&!this.isBreathingOxygen&&(this._oxygenStarted=this.runTime),this._currentGas=n}markAverageDepth(){this.speeds.markAverageDepth(this.segments)}withoutStatistics(){return this.collectStatistics=this.noStatistics,this}addCeiling(){let n=this.ceiling(),i=new Es(this.runTime,n);this.ceilings.push(i)}ceiling(){return this.gradients.ceiling()}bestDecoGas(){return this.bestGasOptions.currentDepth=this.currentDepth,this.bestGasOptions.currentGas=this.currentGas,this.gasSource.bestGas(this.bestGasOptions)}addStatistics(n){this.collectStatistics(n)}noStatistics(n){}addCeilingStatistics(n){this.addCeiling()}addFullStatistics(n){this.addCeiling(),this.tissuesHistory.push(this.tissues.finalState());let i=this.depthConverter.toBar(n),u=this.tissues.saturationRatio(i);this.tissueOverPressures.push(u)}loadTissues(n,i){return this.tissues.load(n,i)}createMemento(){return{runTime:this.runTime,oxygenStarted:this._oxygenStarted,tissuesHistory:this.tissuesHistory.length,lastTissues:this.finalTissues,ceilings:this.ceilings.length,tissueOverPressures:this.tissueOverPressures.length,segments:this.segments.length,lowestCeiling:this.gradients.lowestCeiling}}restore(n){this.tissuesHistory=this.tissuesHistory.slice(0,n.tissuesHistory),this.tissues.restoreFrom(n.lastTissues),this.gradients.lowestCeiling=n.lowestCeiling,this.runTime=n.runTime,this._oxygenStarted=n.oxygenStarted,this.ceilings=this.ceilings.slice(0,n.ceilings),this.tissueOverPressures=this.tissueOverPressures.slice(0,n.tissueOverPressures);let i=this.segments.length-n.segments;this.segments.cutDown(i)}nextStop(n){return this.levels.nextStop(n)}shouldSwitchTo(n){return n&&!this.currentGas.compositionEquals(n)}addAscentSegment(n,i){return this.segments.add(n,this.currentGas,i)}addGasSwitchSegment(){let n=this.options.gasSwitchDuration*W.oneMinute;return this.addStopSegment(n)}addStopSegment(n){return this.segments.addFlat(this.currentGas,n)}airBreakGas(){return this.gasSource.airBreakGas(this.currentDepth,this.currentGas)}},Ms=class{constructor(n,i){this.context=n,this.remainingStopTime=i,this.maxOxygenTime=this.context.options.airBreaks.oxygenDuration*W.oneMinute,this.maxBottomGasTime=this.context.options.airBreaks.bottomGasDuration*W.oneMinute,this._initialStopDuration=Math.min(this.remainingStopTime,this.remainingOxygenTime)}get needsStop(){return this.remainingStopTime>0}get maxGasTime(){return this.context.isBreathingOxygen?this.maxOxygenTime:this.maxBottomGasTime}get stopDuration(){return this._initialStopDuration>0?this._initialStopDuration:Math.min(this.remainingStopTime,this.maxGasTime)}get remainingOxygenTime(){let n=this.maxOxygenTime-this.context.runTimeOnOxygen;return n>0?n:0}switchStopGas(){if(!(this._initialStopDuration>0)){if(this.context.isBreathingOxygen){this.context.currentGas=this.context.airBreakGas();return}this.context.currentGas=this.context.bestDecoGas()}}subtractStopDuration(){if(this._initialStopDuration>0){this.subtractRemainingStopTime(this._initialStopDuration),this._initialStopDuration=0;return}this.subtractRemainingStopTime(this.stopDuration)}subtractRemainingStopTime(n){this.remainingStopTime-=n}},Ao=(a,n)=>{let i=W.toMinutes(n);return a/i},mn=class{constructor(n,i){this.current=n,this.surfaceInterval=i}},Ns=class{constructor(n,i,u){this.previousTissues=n,this.altitude=i,this.surfaceInterval=u}},vn=class a{constructor(n,i,u,h){this._segments=n,this._gases=i,this._options=u,this._surface=this.resolveSurfaceParameters(h)}get segments(){return this._segments}get gases(){return this._gases}get options(){return this._options}get surfaceInterval(){return new Ns(this._surface.current,this.options.altitude,this._surface.surfaceInterval)}static forSimpleDive(n,i,u,h){let p=new Vn;p.add(i);let S=new St,y=Ao(n,u.descentSpeed);return S.add(n,i,y),new a(S,p,u,h)}static forMultilevelDive(n,i,u,h){return new a(n,i,u,h)}resolveSurfaceParameters(n){if(n&&Xr.valid(n?.current))return n;let i=Ee.createLoadedAt(this.options.altitude);return new mn(i,Number.POSITIVE_INFINITY)}},Ze=class{noDecoLimit({segments:n,gases:i,options:u,surfaceInterval:h}){let p=new me(u).create(),S=this.applySurfaceInterval(h),y=Ue.createForCeilings(i,n,u,p,S.finalTissues);return this.swimNoDecoLimit(n,i,y)}decompression(n){return this.decompressionInternal(n,Ue.createWithoutStatistics,this.toSimpleProfile,(u,h)=>Ie.fromErrors(u,h))}decompressionStatistics(n){return this.decompressionInternal(n,Ue.createForFullStatistics,this.toFullProfile,(u,h)=>gn.fromStatisticsErrors(u,h))}applySurfaceInterval(n){return this.applySurfaceIntervalInternal(n,Ue.createWithoutStatistics,()=>({finalTissues:Ee.createLoadedAt(n.altitude)}),u=>({finalTissues:u.finalTissues}))}applySurfaceIntervalStatistics(n){return this.applySurfaceIntervalInternal(n,Ue.createForFullStatistics,()=>({finalTissues:Ee.createLoadedAt(n.altitude),tissueOverPressures:[]}),u=>({finalTissues:u.finalTissues,tissueOverPressures:u.tissueOverPressures}))}decompressionInternal(n,i,u,h){let{segments:p,gases:S,options:y,surfaceInterval:T}=n,C=p.copy(),k=this.validate(p,S);if(k.length>0){let yt=C.mergeFlat(p.length);return h(yt,k)}let Z=this.applySurfaceInterval(T),Q=new me(y).create(),q=i(S,C,y,Q,Z.finalTissues);this.swimPlan(q),q.markAverageDepth();let X=q.nextStop(q.currentDepth);for(;X>=0&&!q.isAtSurface;)this.tryGasSwitch(q),this.stayAtDecoStop(q,X),this.stayAtSafetyStop(q),this.ascentToNextStop(q,X),X=q.nextStop(X);return u(q,n)}toFullProfile(n,i){let u=n.segments.mergeFlat(i.segments.length);return gn.fromStatisticsProfile(u,n.ceilings,n.tissueOverPressures,n.finalTissues,n.tissuesHistory)}toSimpleProfile(n,i){let u=n.segments.mergeFlat(i.segments.length);return Ie.fromProfile(u,n.finalTissues)}applySurfaceIntervalInternal({previousTissues:n,altitude:i,surfaceInterval:u},h,p,S){if(!Xr.valid(n))throw Error("Provided tissues collection isn`t valid. It needs have valid items of 16 compartments ordered by halftime.");if(i<0)throw Error("Altitude needs to be positive number or 0.");if(u<0)throw Error("Surface interval needs to be positive number or 0.");if(u===Number.POSITIVE_INFINITY)return p();let y=new St,T=y.addFlat(Jt.air,u),C=new Vn;C.add(Jt.air);let k=new Kn(1,1,1.6,1.6,pn.salt);k.altitude=i;let Z=new me(k).create(),Q=h(C,y,k,Z,n);return this.swim(Q,T),S(Q)}tryGasSwitch(n){let i=n.bestDecoGas();if(n.shouldSwitchTo(i)){n.currentGas=i;let u=n.addGasSwitchSegment();this.swim(n,u)}}stayAtDecoStop(n,i){if(this.needsDecoStop(n,i)){let u=n.createMemento(),h={estimationStep:W.oneMinute*20,initialValue:0,maxValue:W.oneDay,doWork:T=>this.swimDecoStop(n,u,T),meetsCondition:()=>this.needsDecoStop(n,i)},S=new Qr().search(h)+W.oneSecond,y=nt.ceilDistance(S,n.decoStopDuration);this.swimDecoStop(n,u,y)}}swimDecoStop(n,i,u){n.restore(i),this.stayAtStop(n,u)}stayAtSafetyStop(n){n.addSafetyStop&&this.stayAtStop(n,W.safetyStopDuration)}stayAtStop(n,i){n.shouldAddAirBreaks?this.swimOxygenStop(n,i):this.swimStopDuration(n,i)}swimOxygenStop(n,i){let u=new Ms(n,i);for(;u.needsStop;)u.switchStopGas(),this.swimStopDuration(n,u.stopDuration),u.subtractStopDuration();n.currentGas=Jt.oxygen}swimStopDuration(n,i){let u=n.addStopSegment(i);this.swim(n,u)}needsDecoStop(n,i){if(i>=n.ceiling())return!1;let u=n.createMemento();this.ascentToNextStop(n,i);let h=i<n.ceiling();return n.restore(u),h}ascentToNextStop(n,i){let u=n.currentDepth-i,h=Ao(u,n.ascentSpeed),p=n.addAscentSegment(i,h);this.swim(n,p)}validate(n,i){let u=Bs.validate(n,i);if(u.length>0)return u;let h=Is.validate(i);return h.length>0?h:[]}swimPlan(n){let i=n.segments.items;n.addStatistics(i[0].startDepth),i.forEach(u=>{this.swim(n,u)})}swim(n,i){let u=i.startDepth,h=W.oneSecond;for(let p=0;p<i.duration;p+=h){let S=$t.depthAt(u,i.speed,h),y=new $t(u,S,i.gas,h);this.swimPart(n,y),u=y.endDepth}}swimPart(n,i){let u=this.toLoadSegment(n.depthConverter,i);n.loadTissues(u,i.gas),n.runTime+=i.duration,n.addStatistics(i.averageDepth)}swimNoDecoLimit(n,i,u){if(this.validate(n,i).length>0)return 0;this.swimPlan(u);let p=this.currentNdl(u.ceilings);return p!==Number.POSITIVE_INFINITY?p:(u=u.withoutStatistics(),this.predictNoDecoLimit(n,u))}predictNoDecoLimit(n,i){let u=n.last(),h=u.endDepth,p=new $t(h,h,u.gas,W.oneMinute),S=this.toLoadSegment(i.depthConverter,p),y=1;for(;i.ceiling()<=0&&y>0;)y=i.loadTissues(S,u.gas),i.runTime+=W.oneMinute;return y===0||h===0?Number.POSITIVE_INFINITY:this.floorNdl(i.runTime)}floorNdl(n){let i=W.toMinutes(n);return i=nt.floor(i),i-1}currentNdl(n){for(let i=0;i<n.length;i+=W.oneMinute){let u=n[i];if(u.notAtSurface)return this.floorNdl(u.time)}return Number.POSITIVE_INFINITY}toLoadSegment(n,i){let u=n.toBar(i.speed)-n.surfacePressure;return{startPressure:n.toBar(i.startDepth),duration:i.duration,speed:u}}},Jn=class a{static createPlan(n,i,u,h){let p=new St,S=a.descentDuration(n,h);p.add(n,u,S);let y=W.toSeconds(i)-S;return y=y<0?0:y,p.addFlat(u,y),p}static descentDuration(n,i){let u=n/i.descentSpeed;return u=nt.ceil(u,1),u=W.toSeconds(u),nt.ceil(u)}static emergencyAscent(n,i,u,h){let S=St.fromCollection(n).deepestPart(),y=S.length;a.addSolvingSegment(S,i.problemSolvingDuration),a.addUserDefinedAscent(S,n,y);let T=St.fromCollection(S),C=ne.toGases(u),k=new Ze,Z=vn.forMultilevelDive(T,C,i,h),q=k.decompression(Z).segments;return q.slice(y,q.length)}static addSolvingSegment(n,i){if(n.length===0)return;let u=i*W.oneMinute,h=n[n.length-1],p=h.endDepth,S=h.tank??h.gas,y=new $t(p,p,S,u);n.push(y)}static addUserDefinedAscent(n,i,u){for(let h=u;h<i.length;h++){let p=i[h];if(!p.tank)return;n.push(p)}}},ti=class{constructor(){this.remaining=new Map}get(n){return this.remaining.get(n)||0}set(n,i){let u=i>0?i:0;this.remaining.set(n,u)}},ei=class a{static{this.defaultPrimaryReserve=30}static{this.defaultStageReserve=20}constructor(n){this.depthConverter=n}static calculateDecompression(n,i,u,h){let p=ne.toGases(i),S=new Ze,y=n.copy(),T=vn.forMultilevelDive(y,p,u,h);return S.decompression(T)}consumeFromTanks(n,i,u,h,p){if(n.length<2)throw new Error("Profile needs to contain at least 2 segments.");let S=Jn.emergencyAscent(n,i,u,p);this.consumeFromTanks2(n,S,u,h)}consumeFromTanks2(n,i,u,h){if(n.length<2)throw new Error("Profile needs to contain at least 2 segments.");if(i.length<1)throw new Error("Emergency ascent needs to contain at least 1 segment.");ne.resetConsumption(u),this.updateReserve(i,u,h);let p=C=>C.reserve,S=h.diver.rmv,y=C=>S,T=this.toBeConsumedYet(n,new ti,y,C=>!!C.tank);T=this.consumeByTanks(n,T,S,p),T=this.consumeByTanksRemaining(n,T,()=>0),T=this.toBeConsumedYet(n,T,y,C=>!C.tank),T=this.consumeByGases(u,T,p),this.consumeByGases(u,T,()=>0),this.roundTanksConsumedToBars(u)}calculateMaxBottomTime(n,i,u,h,p){let S=this.createTestProfile(n),y=S.last(),T={estimationStep:W.oneMinute*40,initialValue:0,maxValue:W.oneDay,doWork:Q=>{y.duration=Q,this.consumeFromProfile(S,i,u,h,p)},meetsCondition:()=>ne.haveReserve(i)},k=new Qr().search(T);if(k===0)return 0;let Z=W.toMinutes(n.duration+k);return nt.floor(Z)}consumeFromProfile(n,i,u,h,p){let S=a.calculateDecompression(n,i,h,p);this.consumeFromTanks(S.segments,h,i,u,p)}createTestProfile(n){let i=n.copy(),u=n.last();return i.addFlat(u.gas,0),i}resolveReserveSacBySegment(n,i,u){return u.tank===i||u.gas.compositionEquals(i.gas)?n.teamStressRmv:n.stressRmv}updateReserve(n,i,u){let h=n[0]?.tank??i[0],p=y=>this.resolveReserveSacBySegment(u.diver,h,y),S=this.toBeConsumedYet(n,new ti,p,()=>!0);for(let y=0;y<=i.length-1;y++){let T=i[y],C=T.gas.contentCode,k=S.get(C);this.updateTankReserve(T,y,u,k);let Z=k-T.reserve*T.size;S.set(C,Z)}}updateTankReserve(n,i,u,h){let p=nt.ceil(h/n.size),S=p>n.startPressure?n.startPressure:p;n.reserve=this.ensureMinimalReserve(S,i,u)}ensureMinimalReserve(n,i,u){let h=i===0?u.primaryTankReserve:u.stageTankReserve;return n<h?h:n}consumeByGases(n,i,u){for(let h=n.length-1;h>=0;h--){let p=n[h],S=p.gas.contentCode,y=i.get(S),T=this.consumeFromTank(p,y,u);T=T<0?0:T,y-=T,i.set(S,y)}return i}consumeByTanks(n,i,u,h){let p=W.toMinutes(u);return this.consumeBySegmentTank(n,i,h,S=>this.consumedBySegment(S,p))}consumeByTanksRemaining(n,i,u){return this.consumeBySegmentTank(n,i,u,(h,p)=>p)}consumeBySegmentTank(n,i,u,h){return n.forEach(p=>{if(p.tank){let S=p.gas.contentCode,y=i.get(S),T=h(p,y),C=this.consumeFromTank(p.tank,T,u);C=C<0?0:C,y-=C,i.set(S,y)}}),i}consumeFromTank(n,i,u){let h=n.endPressure-u(n);h=h>0?h:0;let p=h*n.size,S=i>p?p:i;return n.consumed+=S/n.size,S}toBeConsumedYet(n,i,u,h){for(let p=0;p<n.length;p++){let S=n[p],y=u(S),T=W.toMinutes(y);if(h(S)){let k=S.gas.contentCode,Z=this.consumedBySegment(S,T),Q=i.get(k);Q+=Z,i.set(k,Q)}}return i}consumedBySegment(n,i){let u=this.depthConverter.toBar(n.averageDepth);return nt.roundTwoDecimals(n.duration)*u*i}roundTanksConsumedToBars(n){n.forEach(i=>i.consumed=nt.ceil(i.consumed))}};var ni=class{constructor(n){this.depthConverter=n,this.minimumPpO2=.5}calculateForProfile(n){let i=0;return n.forEach(u=>{let h=u.gas.fO2,p=this.calculate(h,u.startDepth,u.endDepth,u.duration);i+=p}),i}calculate(n,i,u,h){let p=(i+u)/2,S=this.depthConverter.toBar(p),y=n*S;if(y<=this.minimumPpO2)return 0;let T=this.exponentByPpO2(y),C=Math.exp(T);return h*C*100}exponentByPpO2(n){return n<=1.5?-11.7853+1.93873*n:-23.6349+9.80829*n}},ln=class{static{this.imperialTankSize=124.1}static{this.imperialTankWorkPressure=3442}static{this.imperialStageSize=80.1}static{this.imperialStageWorkPressure=3e3}static{this.mertricTankSize=15}static{this.metricStageSize=11.1}},Hs=class{get available(){return[this.primary,this.stage,{name:"2xLP85",size:165,workingPressure:2640},{name:"S40",size:41.3,workingPressure:3e3},{name:"LP85",size:82.5,workingPressure:2640},{name:"HP80",size:84.4,workingPressure:3442},{name:"HP100",size:106.7,workingPressure:3442}]}get primary(){return{name:"HP117",size:ln.imperialTankSize,workingPressure:ln.imperialTankWorkPressure}}get stage(){return{name:"S80",size:ln.imperialStageSize,workingPressure:ln.imperialStageWorkPressure}}};var yo=class a{static{this.lastStopDepth=15}static{this.depthDistance=10}static{this.descentSpeed=a.depthDistance*6}static{this.recreSpeed=a.depthDistance*3}static{this.maxEnd=a.depthDistance*10}get tanks(){return new Hs}get lastSpeedLevel(){return 20}get autoStopLevel(){return 33}get stopsDistance(){return a.depthDistance}get recreationalOptions(){return{ascentSpeed50perc:a.recreSpeed,ascentSpeed50percTo6m:a.recreSpeed,ascentSpeed6m:a.recreSpeed,descentSpeed:a.descentSpeed,lastStopDepth:a.lastStopDepth,maxEND:a.maxEnd}}get recommendedOptions(){return{ascentSpeed50perc:a.recreSpeed,ascentSpeed50percTo6m:a.depthDistance*2,ascentSpeed6m:a.depthDistance,descentSpeed:a.descentSpeed,lastStopDepth:a.depthDistance,maxEND:a.maxEnd}}},Sn=class a{static{this.defaultSac=20}constructor(n=a.defaultSac,i){this.rmv=n,this.stressRmv=i||n*1.5}get teamStressRmv(){return this.stressRmv*2}static gasSac(n,i){return n/i}gasSac(n){return a.gasSac(this.rmv,n.size)}loadFrom(n){this.rmv=n.rmv,this.stressRmv=n.stressRmv}};var Qn=class a{constructor(n,i,u){this.gas=n,this.depth=i,this.density=u}static createDefault(){return new a(Jt.air,0,0)}applyHigher(n,i,u){u>this.density&&(this.gas=n,this.density=u,this.depth=i)}},Fs=class{constructor(){this.helium=.179,this.nitrogen=1.251,this.oxygen=1.428}static{this.recommendedMaximum=5.7}forGas(n){return this.forContent(n.fO2,n.fHe)}forContent(n,i){let u=1-n-i,h=this.nitrogen*u,p=this.oxygen*n,S=this.helium*i;return h+p+S}},jn=class{constructor(n){this.depthConverter=n,this.density=new Fs}forProfile(n){let i=Qn.createDefault();return n.forEach(u=>{let h=u.gas,p=this.density.forGas(h);this.applyHigher(i,h,u.startDepth,p),this.applyHigher(i,h,u.endDepth,p)}),i}atDepth(n,i){let u=this.density.forGas(n);return this.fromAtaDensity(u,i)}applyHigher(n,i,u,h){let p=this.fromAtaDensity(h,u);n.applyHigher(i,u,p)}fromAtaDensity(n,i){let u=this.depthConverter.toBar(i);return n*u}};var ri=class{static{this.dailyLimit=300}constructor(n){this.depthConverter=n,this.minPressure=.5}calculateForProfile(n){let i=0;return n.forEach(u=>{let h=u.gas.fO2,p=this.calculate(u.duration,h,u.startDepth,u.endDepth);i+=p}),i}calculate(n,i,u,h){let p=W.toMinutes(n),S=this.depthConverter.toBar(u),y=this.depthConverter.toBar(h),T=S*i,C=y*i;if(T<=this.minPressure&&C<=this.minPressure)return 0;T<=this.minPressure?(p=p*(C-this.minPressure)/(C-T),T=.501):C<=this.minPressure&&(p=p*(T-this.minPressure)/(T-C),C=.501);let k=T+C-1;return Math.pow(k,5/6)*(1-5*Math.pow(C-T,2)/216/Math.pow(k,2))*p}},Gs=class{constructor(n,i,u){this.startDepth=n,this.endDepth=i,this.duration=u}get minDepth(){return Math.min(this.startDepth,this.endDepth)}get maxDepth(){return Math.max(this.startDepth,this.endDepth)}get isDescent(){return this.startDepth<this.endDepth}get isStop(){return this.startDepth===this.endDepth}get isAscent(){return this.startDepth>this.endDepth}timeAt(n){let i=$t.speed(this.startDepth,this.endDepth,this.duration),u=$t.timeAt(this.startDepth,i,n);return nt.round(u)}},Ws=class{constructor(n){this.simpleDepths=Ke.simple(),this.events=new Zn,this.elapsed=0,this.index=0,this.fixedMnd=!0,this.profile=n.profile,this.options=n.profileOptions,this.startAscentIndex=n.startAscentIndex,this.maxDensity=n.maxDensity,this.exactDepths=new me(this.options).create(),this.levels=new Yn(this.exactDepths,this.options),this.densityAtDepth=new jn(this.exactDepths),this.speeds=new jr(this.options);let i=St.fromCollection(this.profile);this._maxDepth=i.maxDepth,this._totalDuration=i.duration,this.speeds.markAverageDepth(i),this._mndBars=this.simpleDepths.toBar(this.options.maxEND)}get maxDepth(){return this._maxDepth}get totalDuration(){return this._totalDuration}get previous(){return this.index>0?this.profile[this.index-1]:null}get isBeforeDecoAscent(){return this.index<this.startAscentIndex}get maxPpo(){return this.isBeforeDecoAscent?this.options.maxPpO2:this.options.maxDecoPpO2}get current(){return this.profile[this.index]}get switchingGas(){return!!this.previous&&!this.current.gas.compositionEquals(this.previous.gas)}get switchingTank(){return!!this.previous&&!!this.previous.tank&&!!this.current.tank&&this.previous.tank!==this.current.tank}get brokenOxygenDuration(){return this.current.gas.compositionEquals(Jt.oxygen)&&this.current.duration>W.oneMinute*20}get maxMnd(){return this._mndBars}get currentEndTime(){return this.elapsed+this.current.duration}get atSafetyStop(){if(this.index!==this.profile.length-2)return!1;let n=this.current.startDepth;return this.levels.addSafetyStop(n,this.maxDepth)}gasEnd(n){let i=this.current.gas,u=this.options.oxygenNarcotic;return i.end(n,u)}addElapsed(){this.elapsed=this.currentEndTime}},ii=class a{static fromProfile(n){let i=new Ws(n),u=new ks(i.events,i.current);for(i.index=0;i.index<n.profile.length;i.index++){let h=this.toPressureSegment(i.current,i.simpleDepths);this.addHighPpO2(i,h),this.addLowPpO2(i,h),this.addGasSwitch(i),this.addUserTankSwitch(i),this.addHighDescentSpeed(i),this.addHighAscentSpeed(i),this.addIsobaricCounterDiffusion(i),this.addMndExceeded(i,h),this.addDensityExceeded(i),this.addSafetyStop(i),this.addMissingAirBreak(i,h),u.assignSegment(i.current),a.addBrokenCeiling(u,n.ceilings),i.addElapsed()}return this.addShallowDepth(i),this.addMaximumDepth(i),i.events}static addHighAscentSpeed(n){let i=n.current,u=W.toSeconds(i.speed);if(u=nt.roundTwoDecimals(u),-u>n.speeds.ascent(i.startDepth)){let h=st.createHighAscentSpeed(n.elapsed,i.startDepth);n.events.add(h)}}static addHighDescentSpeed(n){let i=n.current;if(W.toSeconds(i.speed)>n.options.descentSpeed){let h=st.createHighDescentSpeed(n.elapsed,i.startDepth);n.events.add(h)}}static addGasSwitch(n){if(n.switchingGas){let i=n.current,u=st.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(u)}}static addUserTankSwitch(n){if(n.switchingTank){let i=n.current,u=st.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(u)}}static toPressureSegment(n,i){let u=i.toBar(n.startDepth),h=i.toBar(n.endDepth);return new Gs(u,h,n.duration)}static addHighPpO2(n,i){if(i.isDescent||n.isBeforeDecoAscent&&n.switchingGas){let u=n.current.gas.mod(n.maxPpo);if(i.maxDepth>u){let h=i.startDepth,p=n.elapsed;i.startDepth<u&&(h=u,p+=i.timeAt(h));let S=n.simpleDepths.fromBar(h),y=st.createHighPpO2(p,S);n.events.add(y)}}}static addLowPpO2(n,i){let u=n.current,h=u.gas.ceiling(n.simpleDepths.surfacePressure);if(i.minDepth<h&&n.switchingGas||i.startDepth>h&&h>i.endDepth&&i.isAscent||u.startDepth===0&&i.startDepth<h&&i.isDescent){let S=i.startDepth,y=n.elapsed;i.startDepth>h&&(S=h,y+=i.timeAt(S));let T=n.simpleDepths.fromBar(S),C=st.createLowPpO2(y,T);n.events.add(C)}}static addBrokenCeiling(n,i){for(;n.lastCeilingIndex<n.currentSegmentEndTime&&n.lastCeilingIndex<i.length-1;){let u=i[n.lastCeilingIndex];n.lastCeilingIndex++,this.addNdlEnd(n,u);let h=n.belowCeiling(u);if(!h&&n.fixedBrokenCeiling){let p=st.createBrokenCeiling(u.time,u.depth);n.events.add(p),n.fixedBrokenCeiling=!1;break}if(h&&!n.fixedBrokenCeiling&&(n.fixedBrokenCeiling=!0),u.time>n.currentSegmentEndTime)break}}static addNdlEnd(n,i){if(!n.ndlCeilingMarked&&i.depth>0){n.ndlCeilingMarked=!0;let u=i.time-n.currentSegmentStartTime,h=n.current.depthAt(u),p=st.createNoDecoEnd(i.time,h);n.events.add(p)}}static addIsobaricCounterDiffusion(n){let i=n.current,u=n.previous;if(n.switchingGas&&u){let h=i.gas.fN2-u.gas.fN2,p=i.gas.fHe-u.gas.fHe;if(u.gas.fHe>0&&h*5>-p){let S=st.createIsobaricCounterDiffusion(n.elapsed,i.startDepth,i.gas);n.events.add(S)}}}static addMndExceeded(n,i){let u=n.current,h=n.gasEnd(i.startDepth),p=n.gasEnd(i.endDepth);if(n.maxMnd<h&&n.fixedMnd||n.maxMnd<p&&n.fixedMnd)if(i.startDepth>n.maxMnd)this.addMndEvent(n,n.elapsed,u.startDepth);else{let S={start:i.startDepth,end:i.endDepth},y={start:n.elapsed,end:n.elapsed+u.duration},T=Ye.xValueAtAbsolute(y,S,n.maxMnd),C=u.depthAt(T-n.elapsed);this.addMndEvent(n,T,C)}n.fixedMnd=p<=n.maxMnd}static addMndEvent(n,i,u){let h=n.current.gas,p=st.createMaxEndExceeded(i,u,h);n.events.add(p),n.fixedMnd=!0}static addDensityExceeded(n){let i=n.current,u=i.gas,h=i.startDepth,p=i.endDepth,S=i.endDepth>i.startDepth,y=n.switchingGas,T=n.densityAtDepth.atDepth(u,h),C=n.densityAtDepth.atDepth(u,p);if(y&&T>n.maxDensity||S&&C>n.maxDensity)if(i.startDepth>i.endDepth){let k=st.createHighDensity(n.elapsed,i.startDepth,i.gas);n.events.add(k)}else{let k={start:T,end:C},Z={start:n.elapsed,end:n.elapsed+i.duration},Q=Ye.xValueAtAbsolute(Z,k,n.maxDensity),q=i.depthAt(Q-n.elapsed),X=st.createHighDensity(Q,q,i.gas);n.events.add(X)}}static addSafetyStop(n){let i=n.current;if(n.atSafetyStop&&i.duration>=W.safetyStopDuration){let u=n.elapsed+i.duration-W.safetyStopDuration,h=st.createSafetyStopStart(u,i.endDepth);n.events.add(h)}}static addShallowDepth(n){if(n.maxDepth<9&&n.totalDuration>W.oneHour*5){let i=st.createShallowDepth(n.maxDepth);n.events.add(i)}}static addMaximumDepth(n){if(n.maxDepth>120){let i=st.createMaxDepth(n.maxDepth);n.events.add(i)}}static addMissingAirBreak(n,i){if(n.brokenOxygenDuration&&i.isStop){let u=n.elapsed+n.options.airBreaks.oxygenDuration,h=st.createMissingAirBreak(u,n.current.startDepth);n.events.add(h)}}},ks=class{constructor(n,i){this.events=n,this.lastCeilingIndex=0,this.currentSegmentStartTime=0,this.currentSegmentEndTime=0,this.fixedBrokenCeiling=!0,this.ndlCeilingMarked=!1,this._current=i}get current(){return this._current}assignSegment(n){this.currentSegmentStartTime=this.currentSegmentEndTime,this.currentSegmentEndTime=this.currentSegmentStartTime+n.duration,this._current=n}belowCeiling(n){let i=n.time-this.currentSegmentStartTime;return this._current.depthAt(i)>=n.depth}};var To=class a{static{this.psiRate=14.503773773022}static{this.cftRate=28.316846592}static{this.lbRate=2.20462262185}static{this.footRate=.3048}static{this.poundRate=.00220462262}static{this.lbPerCuftRate=a.poundRate*a.cftRate}get name(){return"Imperial"}get lengthShortcut(){return"ft"}get pressureShortcut(){return"psi"}get volumeShortcut(){return"cuft"}get weightShortcut(){return"lb"}get altitudeShortcut(){return"ft.a.s.l"}get densityShortcut(){return"lb/cuft"}toMeters(n){return n*a.footRate}fromMeters(n){return n/a.footRate}toBar(n){return n/a.psiRate}fromBar(n){return n*a.psiRate}toLiter(n){return n*a.cftRate}fromLiter(n){return n/a.cftRate}fromTankLiters(n,i){return this.fromLiter(n)*i}toTankLiters(n,i){return this.toLiter(n)/i}fromGramPerLiter(n){return n*a.lbPerCuftRate}toGramPerLiter(n){return n/a.lbPerCuftRate}fromKilogram(n){return n*a.lbRate}toKilogram(n){return n/a.lbRate}},Po=class a{static{this.airDensity=1.225}static tankVolumeWeight(n){let i=n.consumedVolume;return a.volumeWeight(i)}static volumeWeight(n){return n*a.airDensity/1e3}};var tr=xo(Os());var at=class a{static toTanks(n){let i=[];return n.forEach(u=>{let h=new Xn(u.size,u.startPressure,0);h.id=u.id,h.gas.fO2=u.gas.fO2,h.gas.fHe=u.gas.fHe,i.push(h)}),ne.renumberIds(i),i}static fromTanks(n){let i=[];return n.forEach(u=>{let h=u.tank,p={id:h.id,size:h.size,workPressure:u.workingPressureBars,startPressure:h.startPressure,gas:a.fromGas(h.gas)};i.push(p)}),i}static toConsumed(n){let i=[];for(let u=0;u<n.length;u++){let h=n[u],p={id:h.id,consumed:h.consumed,reserve:h.reserve};i.push(p)}return i}static toSegments(n,i){let u=[];for(let h=0;h<n.length;h++){let p=n[h],S=a.toGas(p.gas),y=new $t(p.startDepth,p.endDepth,S,p.duration);if(p.tankId>0&&p.tankId<=i.length){let T=p.tankId-1;y.tank=i[T]}u.push(y)}return u}static fromSegments(n){let i=[];return n.forEach(u=>{let h=u.tank?u.tank.id:0,p={startDepth:u.startDepth,endDepth:u.endDepth,duration:u.duration,tankId:h,gas:a.fromGas(u.gas)};i.push(p)}),i}static toProfile(n,i){let u=a.toSegments(n.segments,i);if(n.errors.length>0){let p=a.toEvents(n.errors);return gn.fromStatisticsErrors(u,p.items)}let h=a.toTissues(n.finalTissues);return Ie.fromProfile(u,h)}static fromProfile(n){return{segments:a.fromSegments(n.segments),finalTissues:a.fromTissues(n.finalTissues),errors:a.fromEvents(n.errors)}}static toTissues(n){return(0,tr.default)(n).map(i=>({pN2:i.pN2,pHe:i.pHe})).value()}static toTissuesHistory(n){return(0,tr.default)(n).map(i=>a.toTissues(i)).value()}static fromTissues(n){return(0,tr.default)(n).map(i=>({pN2:i.pN2,pHe:i.pHe})).value()}static fromTissuesHistory(n){return(0,tr.default)(n).map(i=>a.fromTissues(i)).value()}static toEvents(n){let i=new Zn;return n.forEach(u=>{let h=ht.create(u.type,u.timeStamp,u.depth);h.message=u.message,u.gas&&(h.gas=a.toGas(u.gas)),i.add(h)}),i}static fromEvents(n){let i=[];return n.forEach(u=>{let h={timeStamp:u.timeStamp,depth:u.depth,type:u.type,message:u.message};u.gas&&(h.gas=a.fromGas(u.gas)),i.push(h)}),i}static fromDiver(n){return{rmv:n.rmv,stressRmv:n.stressRmv}}static toDiver(n){return new Sn(n.rmv,n.stressRmv)}static fromOptions(n){return{gfLow:n.gfLow,gfHigh:n.gfHigh,maxPpO2:n.maxPpO2,maxDecoPpO2:n.maxDecoPpO2,salinity:n.salinity,altitude:n.altitude,roundStopsToMinutes:n.roundStopsToMinutes,gasSwitchDuration:n.gasSwitchDuration,safetyStop:n.safetyStop,lastStopDepth:n.lastStopDepth,decoStopDistance:n.decoStopDistance,minimumAutoStopDepth:n.minimumAutoStopDepth,maxEND:n.maxEND,oxygenNarcotic:n.oxygenNarcotic,ascentSpeed6m:n.ascentSpeed6m,ascentSpeed50percTo6m:n.ascentSpeed50percTo6m,ascentSpeed50perc:n.ascentSpeed50perc,descentSpeed:n.descentSpeed,problemSolvingDuration:n.problemSolvingDuration,airBreaks:a.fromAirBreaks(n.airBreaks)}}static toOptions(n){let i=new Kn(n.gfLow,n.gfHigh,n.maxPpO2,n.maxDecoPpO2,n.salinity);return i.altitude=n.altitude,i.roundStopsToMinutes=n.roundStopsToMinutes,i.gasSwitchDuration=n.gasSwitchDuration,i.safetyStop=n.safetyStop,i.lastStopDepth=n.lastStopDepth,i.decoStopDistance=n.decoStopDistance,i.minimumAutoStopDepth=n.minimumAutoStopDepth,i.maxEND=n.maxEND,i.oxygenNarcotic=n.oxygenNarcotic,i.ascentSpeed6m=n.ascentSpeed6m,i.ascentSpeed50percTo6m=n.ascentSpeed50percTo6m,i.ascentSpeed50perc=n.ascentSpeed50perc,i.descentSpeed=n.descentSpeed,i.problemSolvingDuration=n.problemSolvingDuration,a.toAirBreaks(i.airBreaks,n.airBreaks),i}static fromDensity(n){return{gas:a.fromGas(n.gas),depth:n.depth,density:n.density}}static toDensity(n){let i=a.toGas(n.gas);return new Qn(i,n.depth,n.density)}static toGas(n){return new ft(n.fO2,n.fHe)}static fromGas(n){return{fO2:n.fO2,fHe:n.fHe}}static fromAirBreaks(n){return{enabled:n.enabled,oxygenDuration:n.oxygenDuration,bottomGasDuration:n.bottomGasDuration}}static toAirBreaks(n,i){i&&(n.enabled=i.enabled,n.oxygenDuration=i.oxygenDuration,n.bottomGasDuration=i.bottomGasDuration)}};var si=class a{static calculateDecompression(n){let i=at.toTanks(n.tanks),u=this.profileParametersFromTask(n,i),p=new Ze().decompression(u),S=at.fromProfile(p);return{diveId:n.diveId,profile:S}}static diveInfo(n){let i=at.toTanks(n.tanks),u=this.profileParametersFromTask(n,i),h=new Ze,p=h.decompressionStatistics(u),S=h.noDecoLimit(u),y=new me(n.options).create(),T=at.toSegments(n.calculatedProfile,i),C=new ri(y).calculateForProfile(T),k=new ni(y).calculateForProfile(T),Z=new jn(y).forProfile(T),Q=St.averageDepth(T),q={maxDensity:n.eventOptions.maxDensity,startAscentIndex:u.segments.startAscentIndex,profile:T,ceilings:p.ceilings,profileOptions:u.options},X=ii.fromProfile(q),yt=at.fromEvents(X.items),re=new dn,Mt=at.toTissues(n.calculatedTissues),ve=re.surfaceGradient(Mt,y.surfacePressure),Ot=re.offgasingStart(p.tissues),Se=St.depthAt(T,Ot);return{diveId:n.diveId,noDeco:S,otu:C,cns:k,density:at.fromDensity(Z),averageDepth:Q,events:yt,surfaceGradient:ve,offgasingStartTime:Ot,offgasingStartDepth:Se,ceilings:p.ceilings,tissues:at.fromTissuesHistory(p.tissues),tissueOverPressures:p.tissueOverPressures}}static calculateConsumption(n){let i=new me(n.options).create(),u=new ei(i),h=at.toTanks(n.tanks),p=at.toSegments(n.profile,h),S=at.toSegments(n.plan,h),y=n.consumptionOptions.diver,T=new Sn(y.rmv,y.stressRmv),C=at.toOptions(n.options),k=a.selectConsumptionPlan(S,n.isComplex),Z={diver:T,primaryTankReserve:n.consumptionOptions.primaryTankReserve,stageTankReserve:n.consumptionOptions.stageTankReserve},Q=at.toTissues(n.previousTissues),q=new mn(Q,n.surfaceInterval),X=u.calculateMaxBottomTime(k,h,Z,C,q),yt=Jn.emergencyAscent(p,C,h,q),re=St.duration(yt);return re=W.toMinutes(re),u.consumeFromTanks2(p,yt,h,Z),{diveId:n.diveId,maxTime:X,timeToSurface:re,tanks:at.toConsumed(h)}}static selectConsumptionPlan(n,i){if(i)return St.fromCollection(n);let u=n.slice(0,1);return St.fromCollection(u)}static profileParametersFromTask(n,i){let u=ne.toGases(i),h=at.toSegments(n.plan,i),p=St.fromCollection(h),S=at.toOptions(n.options),y=at.toTissues(n.previousTissues),T=new mn(y,n.surfaceInterval);return vn.forMultilevelDive(p,u,S,T)}};addEventListener("message",({data:a})=>{let n=si.calculateDecompression(a);postMessage(n)});
