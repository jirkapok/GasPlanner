var Tm=Object.create;var Po=Object.defineProperty;var Am=Object.getOwnPropertyDescriptor;var Cm=Object.getOwnPropertyNames;var Om=Object.getPrototypeOf,bm=Object.prototype.hasOwnProperty;var Em=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports);var Im=(a,n,i,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of Cm(n))!bm.call(a,h)&&h!==i&&Po(a,h,{get:()=>n[h],enumerable:!(u=Am(n,h))||u.enumerable});return a};var yo=(a,n,i)=>(i=a!=null?Tm(Om(a)):{},Im(n||!a||!a.__esModule?Po(i,"default",{value:a,enumerable:!0}):i,a));var bs=Em((hn,zn)=>{"use strict";(function(){var a,n="4.17.21",i=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",p="Invalid `variable` option passed into `_.template`",S="__lodash_hash_undefined__",P=500,y="__lodash_placeholder__",O=1,H=2,U=4,Q=1,Y=2,X=1,Dt=2,re=4,Mt=8,ve=16,Ot=32,Se=64,ie=128,_n=256,ui=512,bo=30,Eo="...",Io=800,Ro=16,Vs=1,Lo=2,Bo=3,Re=1/0,De=9007199254740991,Mo=17976931348623157e292,er=NaN,Qt=4294967295,No=Qt-1,Ho=Qt>>>1,Fo=[["ary",ie],["bind",X],["bindKey",Dt],["curry",Mt],["curryRight",ve],["flip",ui],["partial",Ot],["partialRight",Se],["rearg",_n]],Ye="[object Arguments]",nr="[object Array]",Go="[object AsyncFunction]",wn="[object Boolean]",xn="[object Date]",Wo="[object DOMException]",rr="[object Error]",ir="[object Function]",$s="[object GeneratorFunction]",$t="[object Map]",Pn="[object Number]",ko="[object Null]",se="[object Object]",Zs="[object Promise]",Uo="[object Proxy]",yn="[object RegExp]",Zt="[object Set]",Tn="[object String]",sr="[object Symbol]",zo="[object Undefined]",An="[object WeakMap]",Vo="[object WeakSet]",Cn="[object ArrayBuffer]",qe="[object DataView]",oi="[object Float32Array]",ci="[object Float64Array]",hi="[object Int8Array]",li="[object Int16Array]",fi="[object Int32Array]",pi="[object Uint8Array]",di="[object Uint8ClampedArray]",gi="[object Uint16Array]",mi="[object Uint32Array]",$o=/\b__p \+= '';/g,Zo=/\b(__p \+=) '' \+/g,Ko=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ks=/&(?:amp|lt|gt|quot|#39);/g,Ys=/[&<>"']/g,Yo=RegExp(Ks.source),qo=RegExp(Ys.source),Xo=/<%-([\s\S]+?)%>/g,Jo=/<%([\s\S]+?)%>/g,qs=/<%=([\s\S]+?)%>/g,Qo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jo=/^\w*$/,tc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vi=/[\\^$.*+?()[\]{}|]/g,ec=RegExp(vi.source),Si=/^\s+/,nc=/\s/,rc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ic=/\{\n\/\* \[wrapped with (.+)\] \*/,sc=/,? & /,ac=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uc=/[()=,{}\[\]\/\s]/,oc=/\\(\\)?/g,cc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xs=/\w*$/,hc=/^[-+]0x[0-9a-f]+$/i,lc=/^0b[01]+$/i,fc=/^\[object .+?Constructor\]$/,pc=/^0o[0-7]+$/i,dc=/^(?:0|[1-9]\d*)$/,gc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ar=/($^)/,mc=/['\n\r\u2028\u2029\\]/g,ur="\\ud800-\\udfff",vc="\\u0300-\\u036f",Sc="\\ufe20-\\ufe2f",Dc="\\u20d0-\\u20ff",Js=vc+Sc+Dc,Qs="\\u2700-\\u27bf",js="a-z\\xdf-\\xf6\\xf8-\\xff",_c="\\xac\\xb1\\xd7\\xf7",wc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xc="\\u2000-\\u206f",Pc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ta="A-Z\\xc0-\\xd6\\xd8-\\xde",ea="\\ufe0e\\ufe0f",na=_c+wc+xc+Pc,Di="['\u2019]",yc="["+ur+"]",ra="["+na+"]",or="["+Js+"]",ia="\\d+",Tc="["+Qs+"]",sa="["+js+"]",aa="[^"+ur+na+ia+Qs+js+ta+"]",_i="\\ud83c[\\udffb-\\udfff]",Ac="(?:"+or+"|"+_i+")",ua="[^"+ur+"]",wi="(?:\\ud83c[\\udde6-\\uddff]){2}",xi="[\\ud800-\\udbff][\\udc00-\\udfff]",Xe="["+ta+"]",oa="\\u200d",ca="(?:"+sa+"|"+aa+")",Cc="(?:"+Xe+"|"+aa+")",ha="(?:"+Di+"(?:d|ll|m|re|s|t|ve))?",la="(?:"+Di+"(?:D|LL|M|RE|S|T|VE))?",fa=Ac+"?",pa="["+ea+"]?",Oc="(?:"+oa+"(?:"+[ua,wi,xi].join("|")+")"+pa+fa+")*",bc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ec="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",da=pa+fa+Oc,Ic="(?:"+[Tc,wi,xi].join("|")+")"+da,Rc="(?:"+[ua+or+"?",or,wi,xi,yc].join("|")+")",Lc=RegExp(Di,"g"),Bc=RegExp(or,"g"),Pi=RegExp(_i+"(?="+_i+")|"+Rc+da,"g"),Mc=RegExp([Xe+"?"+sa+"+"+ha+"(?="+[ra,Xe,"$"].join("|")+")",Cc+"+"+la+"(?="+[ra,Xe+ca,"$"].join("|")+")",Xe+"?"+ca+"+"+ha,Xe+"+"+la,Ec,bc,ia,Ic].join("|"),"g"),Nc=RegExp("["+oa+ur+Js+ea+"]"),Hc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gc=-1,J={};J[oi]=J[ci]=J[hi]=J[li]=J[fi]=J[pi]=J[di]=J[gi]=J[mi]=!0,J[Ye]=J[nr]=J[Cn]=J[wn]=J[qe]=J[xn]=J[rr]=J[ir]=J[$t]=J[Pn]=J[se]=J[yn]=J[Zt]=J[Tn]=J[An]=!1;var q={};q[Ye]=q[nr]=q[Cn]=q[qe]=q[wn]=q[xn]=q[oi]=q[ci]=q[hi]=q[li]=q[fi]=q[$t]=q[Pn]=q[se]=q[yn]=q[Zt]=q[Tn]=q[sr]=q[pi]=q[di]=q[gi]=q[mi]=!0,q[rr]=q[ir]=q[An]=!1;var Wc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},kc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vc=parseFloat,$c=parseInt,ga=typeof global=="object"&&global&&global.Object===Object&&global,Zc=typeof self=="object"&&self&&self.Object===Object&&self,ft=ga||Zc||Function("return this")(),yi=typeof hn=="object"&&hn&&!hn.nodeType&&hn,Le=yi&&typeof zn=="object"&&zn&&!zn.nodeType&&zn,ma=Le&&Le.exports===yi,Ti=ma&&ga.process,Nt=function(){try{var g=Le&&Le.require&&Le.require("util").types;return g||Ti&&Ti.binding&&Ti.binding("util")}catch{}}(),va=Nt&&Nt.isArrayBuffer,Sa=Nt&&Nt.isDate,Da=Nt&&Nt.isMap,_a=Nt&&Nt.isRegExp,wa=Nt&&Nt.isSet,xa=Nt&&Nt.isTypedArray;function bt(g,D,v){switch(v.length){case 0:return g.call(D);case 1:return g.call(D,v[0]);case 2:return g.call(D,v[0],v[1]);case 3:return g.call(D,v[0],v[1],v[2])}return g.apply(D,v)}function Kc(g,D,v,A){for(var R=-1,z=g==null?0:g.length;++R<z;){var ut=g[R];D(A,ut,v(ut),g)}return A}function Ht(g,D){for(var v=-1,A=g==null?0:g.length;++v<A&&D(g[v],v,g)!==!1;);return g}function Yc(g,D){for(var v=g==null?0:g.length;v--&&D(g[v],v,g)!==!1;);return g}function Pa(g,D){for(var v=-1,A=g==null?0:g.length;++v<A;)if(!D(g[v],v,g))return!1;return!0}function _e(g,D){for(var v=-1,A=g==null?0:g.length,R=0,z=[];++v<A;){var ut=g[v];D(ut,v,g)&&(z[R++]=ut)}return z}function cr(g,D){var v=g==null?0:g.length;return!!v&&Je(g,D,0)>-1}function Ai(g,D,v){for(var A=-1,R=g==null?0:g.length;++A<R;)if(v(D,g[A]))return!0;return!1}function j(g,D){for(var v=-1,A=g==null?0:g.length,R=Array(A);++v<A;)R[v]=D(g[v],v,g);return R}function we(g,D){for(var v=-1,A=D.length,R=g.length;++v<A;)g[R+v]=D[v];return g}function Ci(g,D,v,A){var R=-1,z=g==null?0:g.length;for(A&&z&&(v=g[++R]);++R<z;)v=D(v,g[R],R,g);return v}function qc(g,D,v,A){var R=g==null?0:g.length;for(A&&R&&(v=g[--R]);R--;)v=D(v,g[R],R,g);return v}function Oi(g,D){for(var v=-1,A=g==null?0:g.length;++v<A;)if(D(g[v],v,g))return!0;return!1}var Xc=bi("length");function Jc(g){return g.split("")}function Qc(g){return g.match(ac)||[]}function ya(g,D,v){var A;return v(g,function(R,z,ut){if(D(R,z,ut))return A=z,!1}),A}function hr(g,D,v,A){for(var R=g.length,z=v+(A?1:-1);A?z--:++z<R;)if(D(g[z],z,g))return z;return-1}function Je(g,D,v){return D===D?hh(g,D,v):hr(g,Ta,v)}function jc(g,D,v,A){for(var R=v-1,z=g.length;++R<z;)if(A(g[R],D))return R;return-1}function Ta(g){return g!==g}function Aa(g,D){var v=g==null?0:g.length;return v?Ii(g,D)/v:er}function bi(g){return function(D){return D==null?a:D[g]}}function Ei(g){return function(D){return g==null?a:g[D]}}function Ca(g,D,v,A,R){return R(g,function(z,ut,Z){v=A?(A=!1,z):D(v,z,ut,Z)}),v}function th(g,D){var v=g.length;for(g.sort(D);v--;)g[v]=g[v].value;return g}function Ii(g,D){for(var v,A=-1,R=g.length;++A<R;){var z=D(g[A]);z!==a&&(v=v===a?z:v+z)}return v}function Ri(g,D){for(var v=-1,A=Array(g);++v<g;)A[v]=D(v);return A}function eh(g,D){return j(D,function(v){return[v,g[v]]})}function Oa(g){return g&&g.slice(0,Ra(g)+1).replace(Si,"")}function Et(g){return function(D){return g(D)}}function Li(g,D){return j(D,function(v){return g[v]})}function On(g,D){return g.has(D)}function ba(g,D){for(var v=-1,A=g.length;++v<A&&Je(D,g[v],0)>-1;);return v}function Ea(g,D){for(var v=g.length;v--&&Je(D,g[v],0)>-1;);return v}function nh(g,D){for(var v=g.length,A=0;v--;)g[v]===D&&++A;return A}var rh=Ei(Wc),ih=Ei(kc);function sh(g){return"\\"+zc[g]}function ah(g,D){return g==null?a:g[D]}function Qe(g){return Nc.test(g)}function uh(g){return Hc.test(g)}function oh(g){for(var D,v=[];!(D=g.next()).done;)v.push(D.value);return v}function Bi(g){var D=-1,v=Array(g.size);return g.forEach(function(A,R){v[++D]=[R,A]}),v}function Ia(g,D){return function(v){return g(D(v))}}function xe(g,D){for(var v=-1,A=g.length,R=0,z=[];++v<A;){var ut=g[v];(ut===D||ut===y)&&(g[v]=y,z[R++]=v)}return z}function lr(g){var D=-1,v=Array(g.size);return g.forEach(function(A){v[++D]=A}),v}function ch(g){var D=-1,v=Array(g.size);return g.forEach(function(A){v[++D]=[A,A]}),v}function hh(g,D,v){for(var A=v-1,R=g.length;++A<R;)if(g[A]===D)return A;return-1}function lh(g,D,v){for(var A=v+1;A--;)if(g[A]===D)return A;return A}function je(g){return Qe(g)?ph(g):Xc(g)}function Kt(g){return Qe(g)?dh(g):Jc(g)}function Ra(g){for(var D=g.length;D--&&nc.test(g.charAt(D)););return D}var fh=Ei(Uc);function ph(g){for(var D=Pi.lastIndex=0;Pi.test(g);)++D;return D}function dh(g){return g.match(Pi)||[]}function gh(g){return g.match(Mc)||[]}var mh=function g(D){D=D==null?ft:Pe.defaults(ft.Object(),D,Pe.pick(ft,Fc));var v=D.Array,A=D.Date,R=D.Error,z=D.Function,ut=D.Math,Z=D.Object,Mi=D.RegExp,vh=D.String,Ft=D.TypeError,fr=v.prototype,Sh=z.prototype,tn=Z.prototype,pr=D["__core-js_shared__"],dr=Sh.toString,$=tn.hasOwnProperty,Dh=0,La=function(){var t=/[^.]+$/.exec(pr&&pr.keys&&pr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gr=tn.toString,_h=dr.call(Z),wh=ft._,xh=Mi("^"+dr.call($).replace(vi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mr=ma?D.Buffer:a,ye=D.Symbol,vr=D.Uint8Array,Ba=mr?mr.allocUnsafe:a,Sr=Ia(Z.getPrototypeOf,Z),Ma=Z.create,Na=tn.propertyIsEnumerable,Dr=fr.splice,Ha=ye?ye.isConcatSpreadable:a,bn=ye?ye.iterator:a,Be=ye?ye.toStringTag:a,_r=function(){try{var t=Ge(Z,"defineProperty");return t({},"",{}),t}catch{}}(),Ph=D.clearTimeout!==ft.clearTimeout&&D.clearTimeout,yh=A&&A.now!==ft.Date.now&&A.now,Th=D.setTimeout!==ft.setTimeout&&D.setTimeout,wr=ut.ceil,xr=ut.floor,Ni=Z.getOwnPropertySymbols,Ah=mr?mr.isBuffer:a,Fa=D.isFinite,Ch=fr.join,Oh=Ia(Z.keys,Z),ot=ut.max,mt=ut.min,bh=A.now,Eh=D.parseInt,Ga=ut.random,Ih=fr.reverse,Hi=Ge(D,"DataView"),En=Ge(D,"Map"),Fi=Ge(D,"Promise"),en=Ge(D,"Set"),In=Ge(D,"WeakMap"),Rn=Ge(Z,"create"),Pr=In&&new In,nn={},Rh=We(Hi),Lh=We(En),Bh=We(Fi),Mh=We(en),Nh=We(In),yr=ye?ye.prototype:a,Ln=yr?yr.valueOf:a,Wa=yr?yr.toString:a;function c(t){if(nt(t)&&!L(t)&&!(t instanceof G)){if(t instanceof Gt)return t;if($.call(t,"__wrapped__"))return ku(t)}return new Gt(t)}var rn=function(){function t(){}return function(e){if(!tt(e))return{};if(Ma)return Ma(e);t.prototype=e;var r=new t;return t.prototype=a,r}}();function Tr(){}function Gt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}c.templateSettings={escape:Xo,evaluate:Jo,interpolate:qs,variable:"",imports:{_:c}},c.prototype=Tr.prototype,c.prototype.constructor=c,Gt.prototype=rn(Tr.prototype),Gt.prototype.constructor=Gt;function G(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qt,this.__views__=[]}function Hh(){var t=new G(this.__wrapped__);return t.__actions__=yt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=yt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=yt(this.__views__),t}function Fh(){if(this.__filtered__){var t=new G(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Gh(){var t=this.__wrapped__.value(),e=this.__dir__,r=L(t),s=e<0,o=r?t.length:0,l=Jl(0,o,this.__views__),f=l.start,d=l.end,m=d-f,_=s?d:f-1,w=this.__iteratees__,x=w.length,T=0,C=mt(m,this.__takeCount__);if(!r||!s&&o==m&&C==m)return hu(t,this.__actions__);var E=[];t:for(;m--&&T<C;){_+=e;for(var M=-1,I=t[_];++M<x;){var F=w[M],W=F.iteratee,Lt=F.type,xt=W(I);if(Lt==Lo)I=xt;else if(!xt){if(Lt==Vs)continue t;break t}}E[T++]=I}return E}G.prototype=rn(Tr.prototype),G.prototype.constructor=G;function Me(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function Wh(){this.__data__=Rn?Rn(null):{},this.size=0}function kh(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Uh(t){var e=this.__data__;if(Rn){var r=e[t];return r===S?a:r}return $.call(e,t)?e[t]:a}function zh(t){var e=this.__data__;return Rn?e[t]!==a:$.call(e,t)}function Vh(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Rn&&e===a?S:e,this}Me.prototype.clear=Wh,Me.prototype.delete=kh,Me.prototype.get=Uh,Me.prototype.has=zh,Me.prototype.set=Vh;function ae(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function $h(){this.__data__=[],this.size=0}function Zh(t){var e=this.__data__,r=Ar(e,t);if(r<0)return!1;var s=e.length-1;return r==s?e.pop():Dr.call(e,r,1),--this.size,!0}function Kh(t){var e=this.__data__,r=Ar(e,t);return r<0?a:e[r][1]}function Yh(t){return Ar(this.__data__,t)>-1}function qh(t,e){var r=this.__data__,s=Ar(r,t);return s<0?(++this.size,r.push([t,e])):r[s][1]=e,this}ae.prototype.clear=$h,ae.prototype.delete=Zh,ae.prototype.get=Kh,ae.prototype.has=Yh,ae.prototype.set=qh;function ue(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function Xh(){this.size=0,this.__data__={hash:new Me,map:new(En||ae),string:new Me}}function Jh(t){var e=Fr(this,t).delete(t);return this.size-=e?1:0,e}function Qh(t){return Fr(this,t).get(t)}function jh(t){return Fr(this,t).has(t)}function tl(t,e){var r=Fr(this,t),s=r.size;return r.set(t,e),this.size+=r.size==s?0:1,this}ue.prototype.clear=Xh,ue.prototype.delete=Jh,ue.prototype.get=Qh,ue.prototype.has=jh,ue.prototype.set=tl;function Ne(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new ue;++e<r;)this.add(t[e])}function el(t){return this.__data__.set(t,S),this}function nl(t){return this.__data__.has(t)}Ne.prototype.add=Ne.prototype.push=el,Ne.prototype.has=nl;function Yt(t){var e=this.__data__=new ae(t);this.size=e.size}function rl(){this.__data__=new ae,this.size=0}function il(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function sl(t){return this.__data__.get(t)}function al(t){return this.__data__.has(t)}function ul(t,e){var r=this.__data__;if(r instanceof ae){var s=r.__data__;if(!En||s.length<i-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new ue(s)}return r.set(t,e),this.size=r.size,this}Yt.prototype.clear=rl,Yt.prototype.delete=il,Yt.prototype.get=sl,Yt.prototype.has=al,Yt.prototype.set=ul;function ka(t,e){var r=L(t),s=!r&&ke(t),o=!r&&!s&&be(t),l=!r&&!s&&!o&&on(t),f=r||s||o||l,d=f?Ri(t.length,vh):[],m=d.length;for(var _ in t)(e||$.call(t,_))&&!(f&&(_=="length"||o&&(_=="offset"||_=="parent")||l&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||le(_,m)))&&d.push(_);return d}function Ua(t){var e=t.length;return e?t[qi(0,e-1)]:a}function ol(t,e){return Gr(yt(t),He(e,0,t.length))}function cl(t){return Gr(yt(t))}function Gi(t,e,r){(r!==a&&!qt(t[e],r)||r===a&&!(e in t))&&oe(t,e,r)}function Bn(t,e,r){var s=t[e];(!($.call(t,e)&&qt(s,r))||r===a&&!(e in t))&&oe(t,e,r)}function Ar(t,e){for(var r=t.length;r--;)if(qt(t[r][0],e))return r;return-1}function hl(t,e,r,s){return Te(t,function(o,l,f){e(s,o,r(o),f)}),s}function za(t,e){return t&&te(e,pt(e),t)}function ll(t,e){return t&&te(e,At(e),t)}function oe(t,e,r){e=="__proto__"&&_r?_r(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Wi(t,e){for(var r=-1,s=e.length,o=v(s),l=t==null;++r<s;)o[r]=l?a:_s(t,e[r]);return o}function He(t,e,r){return t===t&&(r!==a&&(t=t<=r?t:r),e!==a&&(t=t>=e?t:e)),t}function Wt(t,e,r,s,o,l){var f,d=e&O,m=e&H,_=e&U;if(r&&(f=o?r(t,s,o,l):r(t)),f!==a)return f;if(!tt(t))return t;var w=L(t);if(w){if(f=jl(t),!d)return yt(t,f)}else{var x=vt(t),T=x==ir||x==$s;if(be(t))return pu(t,d);if(x==se||x==Ye||T&&!o){if(f=m||T?{}:Ru(t),!d)return m?Ul(t,ll(f,t)):kl(t,za(f,t))}else{if(!q[x])return o?t:{};f=tf(t,x,d)}}l||(l=new Yt);var C=l.get(t);if(C)return C;l.set(t,f),uo(t)?t.forEach(function(I){f.add(Wt(I,e,r,I,t,l))}):so(t)&&t.forEach(function(I,F){f.set(F,Wt(I,e,r,F,t,l))});var E=_?m?as:ss:m?At:pt,M=w?a:E(t);return Ht(M||t,function(I,F){M&&(F=I,I=t[F]),Bn(f,F,Wt(I,e,r,F,t,l))}),f}function fl(t){var e=pt(t);return function(r){return Va(r,t,e)}}function Va(t,e,r){var s=r.length;if(t==null)return!s;for(t=Z(t);s--;){var o=r[s],l=e[o],f=t[o];if(f===a&&!(o in t)||!l(f))return!1}return!0}function $a(t,e,r){if(typeof t!="function")throw new Ft(h);return kn(function(){t.apply(a,r)},e)}function Mn(t,e,r,s){var o=-1,l=cr,f=!0,d=t.length,m=[],_=e.length;if(!d)return m;r&&(e=j(e,Et(r))),s?(l=Ai,f=!1):e.length>=i&&(l=On,f=!1,e=new Ne(e));t:for(;++o<d;){var w=t[o],x=r==null?w:r(w);if(w=s||w!==0?w:0,f&&x===x){for(var T=_;T--;)if(e[T]===x)continue t;m.push(w)}else l(e,x,s)||m.push(w)}return m}var Te=Su(jt),Za=Su(Ui,!0);function pl(t,e){var r=!0;return Te(t,function(s,o,l){return r=!!e(s,o,l),r}),r}function Cr(t,e,r){for(var s=-1,o=t.length;++s<o;){var l=t[s],f=e(l);if(f!=null&&(d===a?f===f&&!Rt(f):r(f,d)))var d=f,m=l}return m}function dl(t,e,r,s){var o=t.length;for(r=B(r),r<0&&(r=-r>o?0:o+r),s=s===a||s>o?o:B(s),s<0&&(s+=o),s=r>s?0:co(s);r<s;)t[r++]=e;return t}function Ka(t,e){var r=[];return Te(t,function(s,o,l){e(s,o,l)&&r.push(s)}),r}function dt(t,e,r,s,o){var l=-1,f=t.length;for(r||(r=nf),o||(o=[]);++l<f;){var d=t[l];e>0&&r(d)?e>1?dt(d,e-1,r,s,o):we(o,d):s||(o[o.length]=d)}return o}var ki=Du(),Ya=Du(!0);function jt(t,e){return t&&ki(t,e,pt)}function Ui(t,e){return t&&Ya(t,e,pt)}function Or(t,e){return _e(e,function(r){return fe(t[r])})}function Fe(t,e){e=Ce(e,t);for(var r=0,s=e.length;t!=null&&r<s;)t=t[ee(e[r++])];return r&&r==s?t:a}function qa(t,e,r){var s=e(t);return L(t)?s:we(s,r(t))}function _t(t){return t==null?t===a?zo:ko:Be&&Be in Z(t)?Xl(t):hf(t)}function zi(t,e){return t>e}function gl(t,e){return t!=null&&$.call(t,e)}function ml(t,e){return t!=null&&e in Z(t)}function vl(t,e,r){return t>=mt(e,r)&&t<ot(e,r)}function Vi(t,e,r){for(var s=r?Ai:cr,o=t[0].length,l=t.length,f=l,d=v(l),m=1/0,_=[];f--;){var w=t[f];f&&e&&(w=j(w,Et(e))),m=mt(w.length,m),d[f]=!r&&(e||o>=120&&w.length>=120)?new Ne(f&&w):a}w=t[0];var x=-1,T=d[0];t:for(;++x<o&&_.length<m;){var C=w[x],E=e?e(C):C;if(C=r||C!==0?C:0,!(T?On(T,E):s(_,E,r))){for(f=l;--f;){var M=d[f];if(!(M?On(M,E):s(t[f],E,r)))continue t}T&&T.push(E),_.push(C)}}return _}function Sl(t,e,r,s){return jt(t,function(o,l,f){e(s,r(o),l,f)}),s}function Nn(t,e,r){e=Ce(e,t),t=Nu(t,e);var s=t==null?t:t[ee(Ut(e))];return s==null?a:bt(s,t,r)}function Xa(t){return nt(t)&&_t(t)==Ye}function Dl(t){return nt(t)&&_t(t)==Cn}function _l(t){return nt(t)&&_t(t)==xn}function Hn(t,e,r,s,o){return t===e?!0:t==null||e==null||!nt(t)&&!nt(e)?t!==t&&e!==e:wl(t,e,r,s,Hn,o)}function wl(t,e,r,s,o,l){var f=L(t),d=L(e),m=f?nr:vt(t),_=d?nr:vt(e);m=m==Ye?se:m,_=_==Ye?se:_;var w=m==se,x=_==se,T=m==_;if(T&&be(t)){if(!be(e))return!1;f=!0,w=!1}if(T&&!w)return l||(l=new Yt),f||on(t)?bu(t,e,r,s,o,l):Yl(t,e,m,r,s,o,l);if(!(r&Q)){var C=w&&$.call(t,"__wrapped__"),E=x&&$.call(e,"__wrapped__");if(C||E){var M=C?t.value():t,I=E?e.value():e;return l||(l=new Yt),o(M,I,r,s,l)}}return T?(l||(l=new Yt),ql(t,e,r,s,o,l)):!1}function xl(t){return nt(t)&&vt(t)==$t}function $i(t,e,r,s){var o=r.length,l=o,f=!s;if(t==null)return!l;for(t=Z(t);o--;){var d=r[o];if(f&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++o<l;){d=r[o];var m=d[0],_=t[m],w=d[1];if(f&&d[2]){if(_===a&&!(m in t))return!1}else{var x=new Yt;if(s)var T=s(_,w,m,t,e,x);if(!(T===a?Hn(w,_,Q|Y,s,x):T))return!1}}return!0}function Ja(t){if(!tt(t)||sf(t))return!1;var e=fe(t)?xh:fc;return e.test(We(t))}function Pl(t){return nt(t)&&_t(t)==yn}function yl(t){return nt(t)&&vt(t)==Zt}function Tl(t){return nt(t)&&$r(t.length)&&!!J[_t(t)]}function Qa(t){return typeof t=="function"?t:t==null?Ct:typeof t=="object"?L(t)?eu(t[0],t[1]):tu(t):wo(t)}function Zi(t){if(!Wn(t))return Oh(t);var e=[];for(var r in Z(t))$.call(t,r)&&r!="constructor"&&e.push(r);return e}function Al(t){if(!tt(t))return cf(t);var e=Wn(t),r=[];for(var s in t)s=="constructor"&&(e||!$.call(t,s))||r.push(s);return r}function Ki(t,e){return t<e}function ja(t,e){var r=-1,s=Tt(t)?v(t.length):[];return Te(t,function(o,l,f){s[++r]=e(o,l,f)}),s}function tu(t){var e=os(t);return e.length==1&&e[0][2]?Bu(e[0][0],e[0][1]):function(r){return r===t||$i(r,t,e)}}function eu(t,e){return hs(t)&&Lu(e)?Bu(ee(t),e):function(r){var s=_s(r,t);return s===a&&s===e?ws(r,t):Hn(e,s,Q|Y)}}function br(t,e,r,s,o){t!==e&&ki(e,function(l,f){if(o||(o=new Yt),tt(l))Cl(t,e,f,r,br,s,o);else{var d=s?s(fs(t,f),l,f+"",t,e,o):a;d===a&&(d=l),Gi(t,f,d)}},At)}function Cl(t,e,r,s,o,l,f){var d=fs(t,r),m=fs(e,r),_=f.get(m);if(_){Gi(t,r,_);return}var w=l?l(d,m,r+"",t,e,f):a,x=w===a;if(x){var T=L(m),C=!T&&be(m),E=!T&&!C&&on(m);w=m,T||C||E?L(d)?w=d:rt(d)?w=yt(d):C?(x=!1,w=pu(m,!0)):E?(x=!1,w=du(m,!0)):w=[]:Un(m)||ke(m)?(w=d,ke(d)?w=ho(d):(!tt(d)||fe(d))&&(w=Ru(m))):x=!1}x&&(f.set(m,w),o(w,m,s,l,f),f.delete(m)),Gi(t,r,w)}function nu(t,e){var r=t.length;if(r)return e+=e<0?r:0,le(e,r)?t[e]:a}function ru(t,e,r){e.length?e=j(e,function(l){return L(l)?function(f){return Fe(f,l.length===1?l[0]:l)}:l}):e=[Ct];var s=-1;e=j(e,Et(b()));var o=ja(t,function(l,f,d){var m=j(e,function(_){return _(l)});return{criteria:m,index:++s,value:l}});return th(o,function(l,f){return Wl(l,f,r)})}function Ol(t,e){return iu(t,e,function(r,s){return ws(t,s)})}function iu(t,e,r){for(var s=-1,o=e.length,l={};++s<o;){var f=e[s],d=Fe(t,f);r(d,f)&&Fn(l,Ce(f,t),d)}return l}function bl(t){return function(e){return Fe(e,t)}}function Yi(t,e,r,s){var o=s?jc:Je,l=-1,f=e.length,d=t;for(t===e&&(e=yt(e)),r&&(d=j(t,Et(r)));++l<f;)for(var m=0,_=e[l],w=r?r(_):_;(m=o(d,w,m,s))>-1;)d!==t&&Dr.call(d,m,1),Dr.call(t,m,1);return t}function su(t,e){for(var r=t?e.length:0,s=r-1;r--;){var o=e[r];if(r==s||o!==l){var l=o;le(o)?Dr.call(t,o,1):Qi(t,o)}}return t}function qi(t,e){return t+xr(Ga()*(e-t+1))}function El(t,e,r,s){for(var o=-1,l=ot(wr((e-t)/(r||1)),0),f=v(l);l--;)f[s?l:++o]=t,t+=r;return f}function Xi(t,e){var r="";if(!t||e<1||e>De)return r;do e%2&&(r+=t),e=xr(e/2),e&&(t+=t);while(e);return r}function N(t,e){return ps(Mu(t,e,Ct),t+"")}function Il(t){return Ua(cn(t))}function Rl(t,e){var r=cn(t);return Gr(r,He(e,0,r.length))}function Fn(t,e,r,s){if(!tt(t))return t;e=Ce(e,t);for(var o=-1,l=e.length,f=l-1,d=t;d!=null&&++o<l;){var m=ee(e[o]),_=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return t;if(o!=f){var w=d[m];_=s?s(w,m,d):a,_===a&&(_=tt(w)?w:le(e[o+1])?[]:{})}Bn(d,m,_),d=d[m]}return t}var au=Pr?function(t,e){return Pr.set(t,e),t}:Ct,Ll=_r?function(t,e){return _r(t,"toString",{configurable:!0,enumerable:!1,value:Ps(e),writable:!0})}:Ct;function Bl(t){return Gr(cn(t))}function kt(t,e,r){var s=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var l=v(o);++s<o;)l[s]=t[s+e];return l}function Ml(t,e){var r;return Te(t,function(s,o,l){return r=e(s,o,l),!r}),!!r}function Er(t,e,r){var s=0,o=t==null?s:t.length;if(typeof e=="number"&&e===e&&o<=Ho){for(;s<o;){var l=s+o>>>1,f=t[l];f!==null&&!Rt(f)&&(r?f<=e:f<e)?s=l+1:o=l}return o}return Ji(t,e,Ct,r)}function Ji(t,e,r,s){var o=0,l=t==null?0:t.length;if(l===0)return 0;e=r(e);for(var f=e!==e,d=e===null,m=Rt(e),_=e===a;o<l;){var w=xr((o+l)/2),x=r(t[w]),T=x!==a,C=x===null,E=x===x,M=Rt(x);if(f)var I=s||E;else _?I=E&&(s||T):d?I=E&&T&&(s||!C):m?I=E&&T&&!C&&(s||!M):C||M?I=!1:I=s?x<=e:x<e;I?o=w+1:l=w}return mt(l,No)}function uu(t,e){for(var r=-1,s=t.length,o=0,l=[];++r<s;){var f=t[r],d=e?e(f):f;if(!r||!qt(d,m)){var m=d;l[o++]=f===0?0:f}}return l}function ou(t){return typeof t=="number"?t:Rt(t)?er:+t}function It(t){if(typeof t=="string")return t;if(L(t))return j(t,It)+"";if(Rt(t))return Wa?Wa.call(t):"";var e=t+"";return e=="0"&&1/t==-Re?"-0":e}function Ae(t,e,r){var s=-1,o=cr,l=t.length,f=!0,d=[],m=d;if(r)f=!1,o=Ai;else if(l>=i){var _=e?null:Zl(t);if(_)return lr(_);f=!1,o=On,m=new Ne}else m=e?[]:d;t:for(;++s<l;){var w=t[s],x=e?e(w):w;if(w=r||w!==0?w:0,f&&x===x){for(var T=m.length;T--;)if(m[T]===x)continue t;e&&m.push(x),d.push(w)}else o(m,x,r)||(m!==d&&m.push(x),d.push(w))}return d}function Qi(t,e){return e=Ce(e,t),t=Nu(t,e),t==null||delete t[ee(Ut(e))]}function cu(t,e,r,s){return Fn(t,e,r(Fe(t,e)),s)}function Ir(t,e,r,s){for(var o=t.length,l=s?o:-1;(s?l--:++l<o)&&e(t[l],l,t););return r?kt(t,s?0:l,s?l+1:o):kt(t,s?l+1:0,s?o:l)}function hu(t,e){var r=t;return r instanceof G&&(r=r.value()),Ci(e,function(s,o){return o.func.apply(o.thisArg,we([s],o.args))},r)}function ji(t,e,r){var s=t.length;if(s<2)return s?Ae(t[0]):[];for(var o=-1,l=v(s);++o<s;)for(var f=t[o],d=-1;++d<s;)d!=o&&(l[o]=Mn(l[o]||f,t[d],e,r));return Ae(dt(l,1),e,r)}function lu(t,e,r){for(var s=-1,o=t.length,l=e.length,f={};++s<o;){var d=s<l?e[s]:a;r(f,t[s],d)}return f}function ts(t){return rt(t)?t:[]}function es(t){return typeof t=="function"?t:Ct}function Ce(t,e){return L(t)?t:hs(t,e)?[t]:Wu(V(t))}var Nl=N;function Oe(t,e,r){var s=t.length;return r=r===a?s:r,!e&&r>=s?t:kt(t,e,r)}var fu=Ph||function(t){return ft.clearTimeout(t)};function pu(t,e){if(e)return t.slice();var r=t.length,s=Ba?Ba(r):new t.constructor(r);return t.copy(s),s}function ns(t){var e=new t.constructor(t.byteLength);return new vr(e).set(new vr(t)),e}function Hl(t,e){var r=e?ns(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Fl(t){var e=new t.constructor(t.source,Xs.exec(t));return e.lastIndex=t.lastIndex,e}function Gl(t){return Ln?Z(Ln.call(t)):{}}function du(t,e){var r=e?ns(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function gu(t,e){if(t!==e){var r=t!==a,s=t===null,o=t===t,l=Rt(t),f=e!==a,d=e===null,m=e===e,_=Rt(e);if(!d&&!_&&!l&&t>e||l&&f&&m&&!d&&!_||s&&f&&m||!r&&m||!o)return 1;if(!s&&!l&&!_&&t<e||_&&r&&o&&!s&&!l||d&&r&&o||!f&&o||!m)return-1}return 0}function Wl(t,e,r){for(var s=-1,o=t.criteria,l=e.criteria,f=o.length,d=r.length;++s<f;){var m=gu(o[s],l[s]);if(m){if(s>=d)return m;var _=r[s];return m*(_=="desc"?-1:1)}}return t.index-e.index}function mu(t,e,r,s){for(var o=-1,l=t.length,f=r.length,d=-1,m=e.length,_=ot(l-f,0),w=v(m+_),x=!s;++d<m;)w[d]=e[d];for(;++o<f;)(x||o<l)&&(w[r[o]]=t[o]);for(;_--;)w[d++]=t[o++];return w}function vu(t,e,r,s){for(var o=-1,l=t.length,f=-1,d=r.length,m=-1,_=e.length,w=ot(l-d,0),x=v(w+_),T=!s;++o<w;)x[o]=t[o];for(var C=o;++m<_;)x[C+m]=e[m];for(;++f<d;)(T||o<l)&&(x[C+r[f]]=t[o++]);return x}function yt(t,e){var r=-1,s=t.length;for(e||(e=v(s));++r<s;)e[r]=t[r];return e}function te(t,e,r,s){var o=!r;r||(r={});for(var l=-1,f=e.length;++l<f;){var d=e[l],m=s?s(r[d],t[d],d,r,t):a;m===a&&(m=t[d]),o?oe(r,d,m):Bn(r,d,m)}return r}function kl(t,e){return te(t,cs(t),e)}function Ul(t,e){return te(t,Eu(t),e)}function Rr(t,e){return function(r,s){var o=L(r)?Kc:hl,l=e?e():{};return o(r,t,b(s,2),l)}}function sn(t){return N(function(e,r){var s=-1,o=r.length,l=o>1?r[o-1]:a,f=o>2?r[2]:a;for(l=t.length>3&&typeof l=="function"?(o--,l):a,f&&wt(r[0],r[1],f)&&(l=o<3?a:l,o=1),e=Z(e);++s<o;){var d=r[s];d&&t(e,d,s,l)}return e})}function Su(t,e){return function(r,s){if(r==null)return r;if(!Tt(r))return t(r,s);for(var o=r.length,l=e?o:-1,f=Z(r);(e?l--:++l<o)&&s(f[l],l,f)!==!1;);return r}}function Du(t){return function(e,r,s){for(var o=-1,l=Z(e),f=s(e),d=f.length;d--;){var m=f[t?d:++o];if(r(l[m],m,l)===!1)break}return e}}function zl(t,e,r){var s=e&X,o=Gn(t);function l(){var f=this&&this!==ft&&this instanceof l?o:t;return f.apply(s?r:this,arguments)}return l}function _u(t){return function(e){e=V(e);var r=Qe(e)?Kt(e):a,s=r?r[0]:e.charAt(0),o=r?Oe(r,1).join(""):e.slice(1);return s[t]()+o}}function an(t){return function(e){return Ci(Do(So(e).replace(Lc,"")),t,"")}}function Gn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=rn(t.prototype),s=t.apply(r,e);return tt(s)?s:r}}function Vl(t,e,r){var s=Gn(t);function o(){for(var l=arguments.length,f=v(l),d=l,m=un(o);d--;)f[d]=arguments[d];var _=l<3&&f[0]!==m&&f[l-1]!==m?[]:xe(f,m);if(l-=_.length,l<r)return Tu(t,e,Lr,o.placeholder,a,f,_,a,a,r-l);var w=this&&this!==ft&&this instanceof o?s:t;return bt(w,this,f)}return o}function wu(t){return function(e,r,s){var o=Z(e);if(!Tt(e)){var l=b(r,3);e=pt(e),r=function(d){return l(o[d],d,o)}}var f=t(e,r,s);return f>-1?o[l?e[f]:f]:a}}function xu(t){return he(function(e){var r=e.length,s=r,o=Gt.prototype.thru;for(t&&e.reverse();s--;){var l=e[s];if(typeof l!="function")throw new Ft(h);if(o&&!f&&Hr(l)=="wrapper")var f=new Gt([],!0)}for(s=f?s:r;++s<r;){l=e[s];var d=Hr(l),m=d=="wrapper"?us(l):a;m&&ls(m[0])&&m[1]==(ie|Mt|Ot|_n)&&!m[4].length&&m[9]==1?f=f[Hr(m[0])].apply(f,m[3]):f=l.length==1&&ls(l)?f[d]():f.thru(l)}return function(){var _=arguments,w=_[0];if(f&&_.length==1&&L(w))return f.plant(w).value();for(var x=0,T=r?e[x].apply(this,_):w;++x<r;)T=e[x].call(this,T);return T}})}function Lr(t,e,r,s,o,l,f,d,m,_){var w=e&ie,x=e&X,T=e&Dt,C=e&(Mt|ve),E=e&ui,M=T?a:Gn(t);function I(){for(var F=arguments.length,W=v(F),Lt=F;Lt--;)W[Lt]=arguments[Lt];if(C)var xt=un(I),Bt=nh(W,xt);if(s&&(W=mu(W,s,o,C)),l&&(W=vu(W,l,f,C)),F-=Bt,C&&F<_){var it=xe(W,xt);return Tu(t,e,Lr,I.placeholder,r,W,it,d,m,_-F)}var Xt=x?r:this,de=T?Xt[t]:t;return F=W.length,d?W=lf(W,d):E&&F>1&&W.reverse(),w&&m<F&&(W.length=m),this&&this!==ft&&this instanceof I&&(de=M||Gn(de)),de.apply(Xt,W)}return I}function Pu(t,e){return function(r,s){return Sl(r,t,e(s),{})}}function Br(t,e){return function(r,s){var o;if(r===a&&s===a)return e;if(r!==a&&(o=r),s!==a){if(o===a)return s;typeof r=="string"||typeof s=="string"?(r=It(r),s=It(s)):(r=ou(r),s=ou(s)),o=t(r,s)}return o}}function rs(t){return he(function(e){return e=j(e,Et(b())),N(function(r){var s=this;return t(e,function(o){return bt(o,s,r)})})})}function Mr(t,e){e=e===a?" ":It(e);var r=e.length;if(r<2)return r?Xi(e,t):e;var s=Xi(e,wr(t/je(e)));return Qe(e)?Oe(Kt(s),0,t).join(""):s.slice(0,t)}function $l(t,e,r,s){var o=e&X,l=Gn(t);function f(){for(var d=-1,m=arguments.length,_=-1,w=s.length,x=v(w+m),T=this&&this!==ft&&this instanceof f?l:t;++_<w;)x[_]=s[_];for(;m--;)x[_++]=arguments[++d];return bt(T,o?r:this,x)}return f}function yu(t){return function(e,r,s){return s&&typeof s!="number"&&wt(e,r,s)&&(r=s=a),e=pe(e),r===a?(r=e,e=0):r=pe(r),s=s===a?e<r?1:-1:pe(s),El(e,r,s,t)}}function Nr(t){return function(e,r){return typeof e=="string"&&typeof r=="string"||(e=zt(e),r=zt(r)),t(e,r)}}function Tu(t,e,r,s,o,l,f,d,m,_){var w=e&Mt,x=w?f:a,T=w?a:f,C=w?l:a,E=w?a:l;e|=w?Ot:Se,e&=~(w?Se:Ot),e&re||(e&=~(X|Dt));var M=[t,e,o,C,x,E,T,d,m,_],I=r.apply(a,M);return ls(t)&&Hu(I,M),I.placeholder=s,Fu(I,t,e)}function is(t){var e=ut[t];return function(r,s){if(r=zt(r),s=s==null?0:mt(B(s),292),s&&Fa(r)){var o=(V(r)+"e").split("e"),l=e(o[0]+"e"+(+o[1]+s));return o=(V(l)+"e").split("e"),+(o[0]+"e"+(+o[1]-s))}return e(r)}}var Zl=en&&1/lr(new en([,-0]))[1]==Re?function(t){return new en(t)}:As;function Au(t){return function(e){var r=vt(e);return r==$t?Bi(e):r==Zt?ch(e):eh(e,t(e))}}function ce(t,e,r,s,o,l,f,d){var m=e&Dt;if(!m&&typeof t!="function")throw new Ft(h);var _=s?s.length:0;if(_||(e&=~(Ot|Se),s=o=a),f=f===a?f:ot(B(f),0),d=d===a?d:B(d),_-=o?o.length:0,e&Se){var w=s,x=o;s=o=a}var T=m?a:us(t),C=[t,e,r,s,o,w,x,l,f,d];if(T&&of(C,T),t=C[0],e=C[1],r=C[2],s=C[3],o=C[4],d=C[9]=C[9]===a?m?0:t.length:ot(C[9]-_,0),!d&&e&(Mt|ve)&&(e&=~(Mt|ve)),!e||e==X)var E=zl(t,e,r);else e==Mt||e==ve?E=Vl(t,e,d):(e==Ot||e==(X|Ot))&&!o.length?E=$l(t,e,r,s):E=Lr.apply(a,C);var M=T?au:Hu;return Fu(M(E,C),t,e)}function Cu(t,e,r,s){return t===a||qt(t,tn[r])&&!$.call(s,r)?e:t}function Ou(t,e,r,s,o,l){return tt(t)&&tt(e)&&(l.set(e,t),br(t,e,a,Ou,l),l.delete(e)),t}function Kl(t){return Un(t)?a:t}function bu(t,e,r,s,o,l){var f=r&Q,d=t.length,m=e.length;if(d!=m&&!(f&&m>d))return!1;var _=l.get(t),w=l.get(e);if(_&&w)return _==e&&w==t;var x=-1,T=!0,C=r&Y?new Ne:a;for(l.set(t,e),l.set(e,t);++x<d;){var E=t[x],M=e[x];if(s)var I=f?s(M,E,x,e,t,l):s(E,M,x,t,e,l);if(I!==a){if(I)continue;T=!1;break}if(C){if(!Oi(e,function(F,W){if(!On(C,W)&&(E===F||o(E,F,r,s,l)))return C.push(W)})){T=!1;break}}else if(!(E===M||o(E,M,r,s,l))){T=!1;break}}return l.delete(t),l.delete(e),T}function Yl(t,e,r,s,o,l,f){switch(r){case qe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Cn:return!(t.byteLength!=e.byteLength||!l(new vr(t),new vr(e)));case wn:case xn:case Pn:return qt(+t,+e);case rr:return t.name==e.name&&t.message==e.message;case yn:case Tn:return t==e+"";case $t:var d=Bi;case Zt:var m=s&Q;if(d||(d=lr),t.size!=e.size&&!m)return!1;var _=f.get(t);if(_)return _==e;s|=Y,f.set(t,e);var w=bu(d(t),d(e),s,o,l,f);return f.delete(t),w;case sr:if(Ln)return Ln.call(t)==Ln.call(e)}return!1}function ql(t,e,r,s,o,l){var f=r&Q,d=ss(t),m=d.length,_=ss(e),w=_.length;if(m!=w&&!f)return!1;for(var x=m;x--;){var T=d[x];if(!(f?T in e:$.call(e,T)))return!1}var C=l.get(t),E=l.get(e);if(C&&E)return C==e&&E==t;var M=!0;l.set(t,e),l.set(e,t);for(var I=f;++x<m;){T=d[x];var F=t[T],W=e[T];if(s)var Lt=f?s(W,F,T,e,t,l):s(F,W,T,t,e,l);if(!(Lt===a?F===W||o(F,W,r,s,l):Lt)){M=!1;break}I||(I=T=="constructor")}if(M&&!I){var xt=t.constructor,Bt=e.constructor;xt!=Bt&&"constructor"in t&&"constructor"in e&&!(typeof xt=="function"&&xt instanceof xt&&typeof Bt=="function"&&Bt instanceof Bt)&&(M=!1)}return l.delete(t),l.delete(e),M}function he(t){return ps(Mu(t,a,Vu),t+"")}function ss(t){return qa(t,pt,cs)}function as(t){return qa(t,At,Eu)}var us=Pr?function(t){return Pr.get(t)}:As;function Hr(t){for(var e=t.name+"",r=nn[e],s=$.call(nn,e)?r.length:0;s--;){var o=r[s],l=o.func;if(l==null||l==t)return o.name}return e}function un(t){var e=$.call(c,"placeholder")?c:t;return e.placeholder}function b(){var t=c.iteratee||ys;return t=t===ys?Qa:t,arguments.length?t(arguments[0],arguments[1]):t}function Fr(t,e){var r=t.__data__;return rf(e)?r[typeof e=="string"?"string":"hash"]:r.map}function os(t){for(var e=pt(t),r=e.length;r--;){var s=e[r],o=t[s];e[r]=[s,o,Lu(o)]}return e}function Ge(t,e){var r=ah(t,e);return Ja(r)?r:a}function Xl(t){var e=$.call(t,Be),r=t[Be];try{t[Be]=a;var s=!0}catch{}var o=gr.call(t);return s&&(e?t[Be]=r:delete t[Be]),o}var cs=Ni?function(t){return t==null?[]:(t=Z(t),_e(Ni(t),function(e){return Na.call(t,e)}))}:Cs,Eu=Ni?function(t){for(var e=[];t;)we(e,cs(t)),t=Sr(t);return e}:Cs,vt=_t;(Hi&&vt(new Hi(new ArrayBuffer(1)))!=qe||En&&vt(new En)!=$t||Fi&&vt(Fi.resolve())!=Zs||en&&vt(new en)!=Zt||In&&vt(new In)!=An)&&(vt=function(t){var e=_t(t),r=e==se?t.constructor:a,s=r?We(r):"";if(s)switch(s){case Rh:return qe;case Lh:return $t;case Bh:return Zs;case Mh:return Zt;case Nh:return An}return e});function Jl(t,e,r){for(var s=-1,o=r.length;++s<o;){var l=r[s],f=l.size;switch(l.type){case"drop":t+=f;break;case"dropRight":e-=f;break;case"take":e=mt(e,t+f);break;case"takeRight":t=ot(t,e-f);break}}return{start:t,end:e}}function Ql(t){var e=t.match(ic);return e?e[1].split(sc):[]}function Iu(t,e,r){e=Ce(e,t);for(var s=-1,o=e.length,l=!1;++s<o;){var f=ee(e[s]);if(!(l=t!=null&&r(t,f)))break;t=t[f]}return l||++s!=o?l:(o=t==null?0:t.length,!!o&&$r(o)&&le(f,o)&&(L(t)||ke(t)))}function jl(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&$.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Ru(t){return typeof t.constructor=="function"&&!Wn(t)?rn(Sr(t)):{}}function tf(t,e,r){var s=t.constructor;switch(e){case Cn:return ns(t);case wn:case xn:return new s(+t);case qe:return Hl(t,r);case oi:case ci:case hi:case li:case fi:case pi:case di:case gi:case mi:return du(t,r);case $t:return new s;case Pn:case Tn:return new s(t);case yn:return Fl(t);case Zt:return new s;case sr:return Gl(t)}}function ef(t,e){var r=e.length;if(!r)return t;var s=r-1;return e[s]=(r>1?"& ":"")+e[s],e=e.join(r>2?", ":" "),t.replace(rc,`{
/* [wrapped with `+e+`] */
`)}function nf(t){return L(t)||ke(t)||!!(Ha&&t&&t[Ha])}function le(t,e){var r=typeof t;return e=e??De,!!e&&(r=="number"||r!="symbol"&&dc.test(t))&&t>-1&&t%1==0&&t<e}function wt(t,e,r){if(!tt(r))return!1;var s=typeof e;return(s=="number"?Tt(r)&&le(e,r.length):s=="string"&&e in r)?qt(r[e],t):!1}function hs(t,e){if(L(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Rt(t)?!0:jo.test(t)||!Qo.test(t)||e!=null&&t in Z(e)}function rf(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ls(t){var e=Hr(t),r=c[e];if(typeof r!="function"||!(e in G.prototype))return!1;if(t===r)return!0;var s=us(r);return!!s&&t===s[0]}function sf(t){return!!La&&La in t}var af=pr?fe:Os;function Wn(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||tn;return t===r}function Lu(t){return t===t&&!tt(t)}function Bu(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==a||t in Z(r))}}function uf(t){var e=zr(t,function(s){return r.size===P&&r.clear(),s}),r=e.cache;return e}function of(t,e){var r=t[1],s=e[1],o=r|s,l=o<(X|Dt|ie),f=s==ie&&r==Mt||s==ie&&r==_n&&t[7].length<=e[8]||s==(ie|_n)&&e[7].length<=e[8]&&r==Mt;if(!(l||f))return t;s&X&&(t[2]=e[2],o|=r&X?0:re);var d=e[3];if(d){var m=t[3];t[3]=m?mu(m,d,e[4]):d,t[4]=m?xe(t[3],y):e[4]}return d=e[5],d&&(m=t[5],t[5]=m?vu(m,d,e[6]):d,t[6]=m?xe(t[5],y):e[6]),d=e[7],d&&(t[7]=d),s&ie&&(t[8]=t[8]==null?e[8]:mt(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function cf(t){var e=[];if(t!=null)for(var r in Z(t))e.push(r);return e}function hf(t){return gr.call(t)}function Mu(t,e,r){return e=ot(e===a?t.length-1:e,0),function(){for(var s=arguments,o=-1,l=ot(s.length-e,0),f=v(l);++o<l;)f[o]=s[e+o];o=-1;for(var d=v(e+1);++o<e;)d[o]=s[o];return d[e]=r(f),bt(t,this,d)}}function Nu(t,e){return e.length<2?t:Fe(t,kt(e,0,-1))}function lf(t,e){for(var r=t.length,s=mt(e.length,r),o=yt(t);s--;){var l=e[s];t[s]=le(l,r)?o[l]:a}return t}function fs(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Hu=Gu(au),kn=Th||function(t,e){return ft.setTimeout(t,e)},ps=Gu(Ll);function Fu(t,e,r){var s=e+"";return ps(t,ef(s,ff(Ql(s),r)))}function Gu(t){var e=0,r=0;return function(){var s=bh(),o=Ro-(s-r);if(r=s,o>0){if(++e>=Io)return arguments[0]}else e=0;return t.apply(a,arguments)}}function Gr(t,e){var r=-1,s=t.length,o=s-1;for(e=e===a?s:e;++r<e;){var l=qi(r,o),f=t[l];t[l]=t[r],t[r]=f}return t.length=e,t}var Wu=uf(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(tc,function(r,s,o,l){e.push(o?l.replace(oc,"$1"):s||r)}),e});function ee(t){if(typeof t=="string"||Rt(t))return t;var e=t+"";return e=="0"&&1/t==-Re?"-0":e}function We(t){if(t!=null){try{return dr.call(t)}catch{}try{return t+""}catch{}}return""}function ff(t,e){return Ht(Fo,function(r){var s="_."+r[0];e&r[1]&&!cr(t,s)&&t.push(s)}),t.sort()}function ku(t){if(t instanceof G)return t.clone();var e=new Gt(t.__wrapped__,t.__chain__);return e.__actions__=yt(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function pf(t,e,r){(r?wt(t,e,r):e===a)?e=1:e=ot(B(e),0);var s=t==null?0:t.length;if(!s||e<1)return[];for(var o=0,l=0,f=v(wr(s/e));o<s;)f[l++]=kt(t,o,o+=e);return f}function df(t){for(var e=-1,r=t==null?0:t.length,s=0,o=[];++e<r;){var l=t[e];l&&(o[s++]=l)}return o}function gf(){var t=arguments.length;if(!t)return[];for(var e=v(t-1),r=arguments[0],s=t;s--;)e[s-1]=arguments[s];return we(L(r)?yt(r):[r],dt(e,1))}var mf=N(function(t,e){return rt(t)?Mn(t,dt(e,1,rt,!0)):[]}),vf=N(function(t,e){var r=Ut(e);return rt(r)&&(r=a),rt(t)?Mn(t,dt(e,1,rt,!0),b(r,2)):[]}),Sf=N(function(t,e){var r=Ut(e);return rt(r)&&(r=a),rt(t)?Mn(t,dt(e,1,rt,!0),a,r):[]});function Df(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:B(e),kt(t,e<0?0:e,s)):[]}function _f(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:B(e),e=s-e,kt(t,0,e<0?0:e)):[]}function wf(t,e){return t&&t.length?Ir(t,b(e,3),!0,!0):[]}function xf(t,e){return t&&t.length?Ir(t,b(e,3),!0):[]}function Pf(t,e,r,s){var o=t==null?0:t.length;return o?(r&&typeof r!="number"&&wt(t,e,r)&&(r=0,s=o),dl(t,e,r,s)):[]}function Uu(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=r==null?0:B(r);return o<0&&(o=ot(s+o,0)),hr(t,b(e,3),o)}function zu(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=s-1;return r!==a&&(o=B(r),o=r<0?ot(s+o,0):mt(o,s-1)),hr(t,b(e,3),o,!0)}function Vu(t){var e=t==null?0:t.length;return e?dt(t,1):[]}function yf(t){var e=t==null?0:t.length;return e?dt(t,Re):[]}function Tf(t,e){var r=t==null?0:t.length;return r?(e=e===a?1:B(e),dt(t,e)):[]}function Af(t){for(var e=-1,r=t==null?0:t.length,s={};++e<r;){var o=t[e];s[o[0]]=o[1]}return s}function $u(t){return t&&t.length?t[0]:a}function Cf(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=r==null?0:B(r);return o<0&&(o=ot(s+o,0)),Je(t,e,o)}function Of(t){var e=t==null?0:t.length;return e?kt(t,0,-1):[]}var bf=N(function(t){var e=j(t,ts);return e.length&&e[0]===t[0]?Vi(e):[]}),Ef=N(function(t){var e=Ut(t),r=j(t,ts);return e===Ut(r)?e=a:r.pop(),r.length&&r[0]===t[0]?Vi(r,b(e,2)):[]}),If=N(function(t){var e=Ut(t),r=j(t,ts);return e=typeof e=="function"?e:a,e&&r.pop(),r.length&&r[0]===t[0]?Vi(r,a,e):[]});function Rf(t,e){return t==null?"":Ch.call(t,e)}function Ut(t){var e=t==null?0:t.length;return e?t[e-1]:a}function Lf(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=s;return r!==a&&(o=B(r),o=o<0?ot(s+o,0):mt(o,s-1)),e===e?lh(t,e,o):hr(t,Ta,o,!0)}function Bf(t,e){return t&&t.length?nu(t,B(e)):a}var Mf=N(Zu);function Zu(t,e){return t&&t.length&&e&&e.length?Yi(t,e):t}function Nf(t,e,r){return t&&t.length&&e&&e.length?Yi(t,e,b(r,2)):t}function Hf(t,e,r){return t&&t.length&&e&&e.length?Yi(t,e,a,r):t}var Ff=he(function(t,e){var r=t==null?0:t.length,s=Wi(t,e);return su(t,j(e,function(o){return le(o,r)?+o:o}).sort(gu)),s});function Gf(t,e){var r=[];if(!(t&&t.length))return r;var s=-1,o=[],l=t.length;for(e=b(e,3);++s<l;){var f=t[s];e(f,s,t)&&(r.push(f),o.push(s))}return su(t,o),r}function ds(t){return t==null?t:Ih.call(t)}function Wf(t,e,r){var s=t==null?0:t.length;return s?(r&&typeof r!="number"&&wt(t,e,r)?(e=0,r=s):(e=e==null?0:B(e),r=r===a?s:B(r)),kt(t,e,r)):[]}function kf(t,e){return Er(t,e)}function Uf(t,e,r){return Ji(t,e,b(r,2))}function zf(t,e){var r=t==null?0:t.length;if(r){var s=Er(t,e);if(s<r&&qt(t[s],e))return s}return-1}function Vf(t,e){return Er(t,e,!0)}function $f(t,e,r){return Ji(t,e,b(r,2),!0)}function Zf(t,e){var r=t==null?0:t.length;if(r){var s=Er(t,e,!0)-1;if(qt(t[s],e))return s}return-1}function Kf(t){return t&&t.length?uu(t):[]}function Yf(t,e){return t&&t.length?uu(t,b(e,2)):[]}function qf(t){var e=t==null?0:t.length;return e?kt(t,1,e):[]}function Xf(t,e,r){return t&&t.length?(e=r||e===a?1:B(e),kt(t,0,e<0?0:e)):[]}function Jf(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:B(e),e=s-e,kt(t,e<0?0:e,s)):[]}function Qf(t,e){return t&&t.length?Ir(t,b(e,3),!1,!0):[]}function jf(t,e){return t&&t.length?Ir(t,b(e,3)):[]}var tp=N(function(t){return Ae(dt(t,1,rt,!0))}),ep=N(function(t){var e=Ut(t);return rt(e)&&(e=a),Ae(dt(t,1,rt,!0),b(e,2))}),np=N(function(t){var e=Ut(t);return e=typeof e=="function"?e:a,Ae(dt(t,1,rt,!0),a,e)});function rp(t){return t&&t.length?Ae(t):[]}function ip(t,e){return t&&t.length?Ae(t,b(e,2)):[]}function sp(t,e){return e=typeof e=="function"?e:a,t&&t.length?Ae(t,a,e):[]}function gs(t){if(!(t&&t.length))return[];var e=0;return t=_e(t,function(r){if(rt(r))return e=ot(r.length,e),!0}),Ri(e,function(r){return j(t,bi(r))})}function Ku(t,e){if(!(t&&t.length))return[];var r=gs(t);return e==null?r:j(r,function(s){return bt(e,a,s)})}var ap=N(function(t,e){return rt(t)?Mn(t,e):[]}),up=N(function(t){return ji(_e(t,rt))}),op=N(function(t){var e=Ut(t);return rt(e)&&(e=a),ji(_e(t,rt),b(e,2))}),cp=N(function(t){var e=Ut(t);return e=typeof e=="function"?e:a,ji(_e(t,rt),a,e)}),hp=N(gs);function lp(t,e){return lu(t||[],e||[],Bn)}function fp(t,e){return lu(t||[],e||[],Fn)}var pp=N(function(t){var e=t.length,r=e>1?t[e-1]:a;return r=typeof r=="function"?(t.pop(),r):a,Ku(t,r)});function Yu(t){var e=c(t);return e.__chain__=!0,e}function dp(t,e){return e(t),t}function Wr(t,e){return e(t)}var gp=he(function(t){var e=t.length,r=e?t[0]:0,s=this.__wrapped__,o=function(l){return Wi(l,t)};return e>1||this.__actions__.length||!(s instanceof G)||!le(r)?this.thru(o):(s=s.slice(r,+r+(e?1:0)),s.__actions__.push({func:Wr,args:[o],thisArg:a}),new Gt(s,this.__chain__).thru(function(l){return e&&!l.length&&l.push(a),l}))});function mp(){return Yu(this)}function vp(){return new Gt(this.value(),this.__chain__)}function Sp(){this.__values__===a&&(this.__values__=oo(this.value()));var t=this.__index__>=this.__values__.length,e=t?a:this.__values__[this.__index__++];return{done:t,value:e}}function Dp(){return this}function _p(t){for(var e,r=this;r instanceof Tr;){var s=ku(r);s.__index__=0,s.__values__=a,e?o.__wrapped__=s:e=s;var o=s;r=r.__wrapped__}return o.__wrapped__=t,e}function wp(){var t=this.__wrapped__;if(t instanceof G){var e=t;return this.__actions__.length&&(e=new G(this)),e=e.reverse(),e.__actions__.push({func:Wr,args:[ds],thisArg:a}),new Gt(e,this.__chain__)}return this.thru(ds)}function xp(){return hu(this.__wrapped__,this.__actions__)}var Pp=Rr(function(t,e,r){$.call(t,r)?++t[r]:oe(t,r,1)});function yp(t,e,r){var s=L(t)?Pa:pl;return r&&wt(t,e,r)&&(e=a),s(t,b(e,3))}function Tp(t,e){var r=L(t)?_e:Ka;return r(t,b(e,3))}var Ap=wu(Uu),Cp=wu(zu);function Op(t,e){return dt(kr(t,e),1)}function bp(t,e){return dt(kr(t,e),Re)}function Ep(t,e,r){return r=r===a?1:B(r),dt(kr(t,e),r)}function qu(t,e){var r=L(t)?Ht:Te;return r(t,b(e,3))}function Xu(t,e){var r=L(t)?Yc:Za;return r(t,b(e,3))}var Ip=Rr(function(t,e,r){$.call(t,r)?t[r].push(e):oe(t,r,[e])});function Rp(t,e,r,s){t=Tt(t)?t:cn(t),r=r&&!s?B(r):0;var o=t.length;return r<0&&(r=ot(o+r,0)),Zr(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&Je(t,e,r)>-1}var Lp=N(function(t,e,r){var s=-1,o=typeof e=="function",l=Tt(t)?v(t.length):[];return Te(t,function(f){l[++s]=o?bt(e,f,r):Nn(f,e,r)}),l}),Bp=Rr(function(t,e,r){oe(t,r,e)});function kr(t,e){var r=L(t)?j:ja;return r(t,b(e,3))}function Mp(t,e,r,s){return t==null?[]:(L(e)||(e=e==null?[]:[e]),r=s?a:r,L(r)||(r=r==null?[]:[r]),ru(t,e,r))}var Np=Rr(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]});function Hp(t,e,r){var s=L(t)?Ci:Ca,o=arguments.length<3;return s(t,b(e,4),r,o,Te)}function Fp(t,e,r){var s=L(t)?qc:Ca,o=arguments.length<3;return s(t,b(e,4),r,o,Za)}function Gp(t,e){var r=L(t)?_e:Ka;return r(t,Vr(b(e,3)))}function Wp(t){var e=L(t)?Ua:Il;return e(t)}function kp(t,e,r){(r?wt(t,e,r):e===a)?e=1:e=B(e);var s=L(t)?ol:Rl;return s(t,e)}function Up(t){var e=L(t)?cl:Bl;return e(t)}function zp(t){if(t==null)return 0;if(Tt(t))return Zr(t)?je(t):t.length;var e=vt(t);return e==$t||e==Zt?t.size:Zi(t).length}function Vp(t,e,r){var s=L(t)?Oi:Ml;return r&&wt(t,e,r)&&(e=a),s(t,b(e,3))}var $p=N(function(t,e){if(t==null)return[];var r=e.length;return r>1&&wt(t,e[0],e[1])?e=[]:r>2&&wt(e[0],e[1],e[2])&&(e=[e[0]]),ru(t,dt(e,1),[])}),Ur=yh||function(){return ft.Date.now()};function Zp(t,e){if(typeof e!="function")throw new Ft(h);return t=B(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ju(t,e,r){return e=r?a:e,e=t&&e==null?t.length:e,ce(t,ie,a,a,a,a,e)}function Qu(t,e){var r;if(typeof e!="function")throw new Ft(h);return t=B(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=a),r}}var ms=N(function(t,e,r){var s=X;if(r.length){var o=xe(r,un(ms));s|=Ot}return ce(t,s,e,r,o)}),ju=N(function(t,e,r){var s=X|Dt;if(r.length){var o=xe(r,un(ju));s|=Ot}return ce(e,s,t,r,o)});function to(t,e,r){e=r?a:e;var s=ce(t,Mt,a,a,a,a,a,e);return s.placeholder=to.placeholder,s}function eo(t,e,r){e=r?a:e;var s=ce(t,ve,a,a,a,a,a,e);return s.placeholder=eo.placeholder,s}function no(t,e,r){var s,o,l,f,d,m,_=0,w=!1,x=!1,T=!0;if(typeof t!="function")throw new Ft(h);e=zt(e)||0,tt(r)&&(w=!!r.leading,x="maxWait"in r,l=x?ot(zt(r.maxWait)||0,e):l,T="trailing"in r?!!r.trailing:T);function C(it){var Xt=s,de=o;return s=o=a,_=it,f=t.apply(de,Xt),f}function E(it){return _=it,d=kn(F,e),w?C(it):f}function M(it){var Xt=it-m,de=it-_,xo=e-Xt;return x?mt(xo,l-de):xo}function I(it){var Xt=it-m,de=it-_;return m===a||Xt>=e||Xt<0||x&&de>=l}function F(){var it=Ur();if(I(it))return W(it);d=kn(F,M(it))}function W(it){return d=a,T&&s?C(it):(s=o=a,f)}function Lt(){d!==a&&fu(d),_=0,s=m=o=d=a}function xt(){return d===a?f:W(Ur())}function Bt(){var it=Ur(),Xt=I(it);if(s=arguments,o=this,m=it,Xt){if(d===a)return E(m);if(x)return fu(d),d=kn(F,e),C(m)}return d===a&&(d=kn(F,e)),f}return Bt.cancel=Lt,Bt.flush=xt,Bt}var Kp=N(function(t,e){return $a(t,1,e)}),Yp=N(function(t,e,r){return $a(t,zt(e)||0,r)});function qp(t){return ce(t,ui)}function zr(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new Ft(h);var r=function(){var s=arguments,o=e?e.apply(this,s):s[0],l=r.cache;if(l.has(o))return l.get(o);var f=t.apply(this,s);return r.cache=l.set(o,f)||l,f};return r.cache=new(zr.Cache||ue),r}zr.Cache=ue;function Vr(t){if(typeof t!="function")throw new Ft(h);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Xp(t){return Qu(2,t)}var Jp=Nl(function(t,e){e=e.length==1&&L(e[0])?j(e[0],Et(b())):j(dt(e,1),Et(b()));var r=e.length;return N(function(s){for(var o=-1,l=mt(s.length,r);++o<l;)s[o]=e[o].call(this,s[o]);return bt(t,this,s)})}),vs=N(function(t,e){var r=xe(e,un(vs));return ce(t,Ot,a,e,r)}),ro=N(function(t,e){var r=xe(e,un(ro));return ce(t,Se,a,e,r)}),Qp=he(function(t,e){return ce(t,_n,a,a,a,e)});function jp(t,e){if(typeof t!="function")throw new Ft(h);return e=e===a?e:B(e),N(t,e)}function td(t,e){if(typeof t!="function")throw new Ft(h);return e=e==null?0:ot(B(e),0),N(function(r){var s=r[e],o=Oe(r,0,e);return s&&we(o,s),bt(t,this,o)})}function ed(t,e,r){var s=!0,o=!0;if(typeof t!="function")throw new Ft(h);return tt(r)&&(s="leading"in r?!!r.leading:s,o="trailing"in r?!!r.trailing:o),no(t,e,{leading:s,maxWait:e,trailing:o})}function nd(t){return Ju(t,1)}function rd(t,e){return vs(es(e),t)}function id(){if(!arguments.length)return[];var t=arguments[0];return L(t)?t:[t]}function sd(t){return Wt(t,U)}function ad(t,e){return e=typeof e=="function"?e:a,Wt(t,U,e)}function ud(t){return Wt(t,O|U)}function od(t,e){return e=typeof e=="function"?e:a,Wt(t,O|U,e)}function cd(t,e){return e==null||Va(t,e,pt(e))}function qt(t,e){return t===e||t!==t&&e!==e}var hd=Nr(zi),ld=Nr(function(t,e){return t>=e}),ke=Xa(function(){return arguments}())?Xa:function(t){return nt(t)&&$.call(t,"callee")&&!Na.call(t,"callee")},L=v.isArray,fd=va?Et(va):Dl;function Tt(t){return t!=null&&$r(t.length)&&!fe(t)}function rt(t){return nt(t)&&Tt(t)}function pd(t){return t===!0||t===!1||nt(t)&&_t(t)==wn}var be=Ah||Os,dd=Sa?Et(Sa):_l;function gd(t){return nt(t)&&t.nodeType===1&&!Un(t)}function md(t){if(t==null)return!0;if(Tt(t)&&(L(t)||typeof t=="string"||typeof t.splice=="function"||be(t)||on(t)||ke(t)))return!t.length;var e=vt(t);if(e==$t||e==Zt)return!t.size;if(Wn(t))return!Zi(t).length;for(var r in t)if($.call(t,r))return!1;return!0}function vd(t,e){return Hn(t,e)}function Sd(t,e,r){r=typeof r=="function"?r:a;var s=r?r(t,e):a;return s===a?Hn(t,e,a,r):!!s}function Ss(t){if(!nt(t))return!1;var e=_t(t);return e==rr||e==Wo||typeof t.message=="string"&&typeof t.name=="string"&&!Un(t)}function Dd(t){return typeof t=="number"&&Fa(t)}function fe(t){if(!tt(t))return!1;var e=_t(t);return e==ir||e==$s||e==Go||e==Uo}function io(t){return typeof t=="number"&&t==B(t)}function $r(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=De}function tt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function nt(t){return t!=null&&typeof t=="object"}var so=Da?Et(Da):xl;function _d(t,e){return t===e||$i(t,e,os(e))}function wd(t,e,r){return r=typeof r=="function"?r:a,$i(t,e,os(e),r)}function xd(t){return ao(t)&&t!=+t}function Pd(t){if(af(t))throw new R(u);return Ja(t)}function yd(t){return t===null}function Td(t){return t==null}function ao(t){return typeof t=="number"||nt(t)&&_t(t)==Pn}function Un(t){if(!nt(t)||_t(t)!=se)return!1;var e=Sr(t);if(e===null)return!0;var r=$.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&dr.call(r)==_h}var Ds=_a?Et(_a):Pl;function Ad(t){return io(t)&&t>=-De&&t<=De}var uo=wa?Et(wa):yl;function Zr(t){return typeof t=="string"||!L(t)&&nt(t)&&_t(t)==Tn}function Rt(t){return typeof t=="symbol"||nt(t)&&_t(t)==sr}var on=xa?Et(xa):Tl;function Cd(t){return t===a}function Od(t){return nt(t)&&vt(t)==An}function bd(t){return nt(t)&&_t(t)==Vo}var Ed=Nr(Ki),Id=Nr(function(t,e){return t<=e});function oo(t){if(!t)return[];if(Tt(t))return Zr(t)?Kt(t):yt(t);if(bn&&t[bn])return oh(t[bn]());var e=vt(t),r=e==$t?Bi:e==Zt?lr:cn;return r(t)}function pe(t){if(!t)return t===0?t:0;if(t=zt(t),t===Re||t===-Re){var e=t<0?-1:1;return e*Mo}return t===t?t:0}function B(t){var e=pe(t),r=e%1;return e===e?r?e-r:e:0}function co(t){return t?He(B(t),0,Qt):0}function zt(t){if(typeof t=="number")return t;if(Rt(t))return er;if(tt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=tt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Oa(t);var r=lc.test(t);return r||pc.test(t)?$c(t.slice(2),r?2:8):hc.test(t)?er:+t}function ho(t){return te(t,At(t))}function Rd(t){return t?He(B(t),-De,De):t===0?t:0}function V(t){return t==null?"":It(t)}var Ld=sn(function(t,e){if(Wn(e)||Tt(e)){te(e,pt(e),t);return}for(var r in e)$.call(e,r)&&Bn(t,r,e[r])}),lo=sn(function(t,e){te(e,At(e),t)}),Kr=sn(function(t,e,r,s){te(e,At(e),t,s)}),Bd=sn(function(t,e,r,s){te(e,pt(e),t,s)}),Md=he(Wi);function Nd(t,e){var r=rn(t);return e==null?r:za(r,e)}var Hd=N(function(t,e){t=Z(t);var r=-1,s=e.length,o=s>2?e[2]:a;for(o&&wt(e[0],e[1],o)&&(s=1);++r<s;)for(var l=e[r],f=At(l),d=-1,m=f.length;++d<m;){var _=f[d],w=t[_];(w===a||qt(w,tn[_])&&!$.call(t,_))&&(t[_]=l[_])}return t}),Fd=N(function(t){return t.push(a,Ou),bt(fo,a,t)});function Gd(t,e){return ya(t,b(e,3),jt)}function Wd(t,e){return ya(t,b(e,3),Ui)}function kd(t,e){return t==null?t:ki(t,b(e,3),At)}function Ud(t,e){return t==null?t:Ya(t,b(e,3),At)}function zd(t,e){return t&&jt(t,b(e,3))}function Vd(t,e){return t&&Ui(t,b(e,3))}function $d(t){return t==null?[]:Or(t,pt(t))}function Zd(t){return t==null?[]:Or(t,At(t))}function _s(t,e,r){var s=t==null?a:Fe(t,e);return s===a?r:s}function Kd(t,e){return t!=null&&Iu(t,e,gl)}function ws(t,e){return t!=null&&Iu(t,e,ml)}var Yd=Pu(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=gr.call(e)),t[e]=r},Ps(Ct)),qd=Pu(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=gr.call(e)),$.call(t,e)?t[e].push(r):t[e]=[r]},b),Xd=N(Nn);function pt(t){return Tt(t)?ka(t):Zi(t)}function At(t){return Tt(t)?ka(t,!0):Al(t)}function Jd(t,e){var r={};return e=b(e,3),jt(t,function(s,o,l){oe(r,e(s,o,l),s)}),r}function Qd(t,e){var r={};return e=b(e,3),jt(t,function(s,o,l){oe(r,o,e(s,o,l))}),r}var jd=sn(function(t,e,r){br(t,e,r)}),fo=sn(function(t,e,r,s){br(t,e,r,s)}),tg=he(function(t,e){var r={};if(t==null)return r;var s=!1;e=j(e,function(l){return l=Ce(l,t),s||(s=l.length>1),l}),te(t,as(t),r),s&&(r=Wt(r,O|H|U,Kl));for(var o=e.length;o--;)Qi(r,e[o]);return r});function eg(t,e){return po(t,Vr(b(e)))}var ng=he(function(t,e){return t==null?{}:Ol(t,e)});function po(t,e){if(t==null)return{};var r=j(as(t),function(s){return[s]});return e=b(e),iu(t,r,function(s,o){return e(s,o[0])})}function rg(t,e,r){e=Ce(e,t);var s=-1,o=e.length;for(o||(o=1,t=a);++s<o;){var l=t==null?a:t[ee(e[s])];l===a&&(s=o,l=r),t=fe(l)?l.call(t):l}return t}function ig(t,e,r){return t==null?t:Fn(t,e,r)}function sg(t,e,r,s){return s=typeof s=="function"?s:a,t==null?t:Fn(t,e,r,s)}var go=Au(pt),mo=Au(At);function ag(t,e,r){var s=L(t),o=s||be(t)||on(t);if(e=b(e,4),r==null){var l=t&&t.constructor;o?r=s?new l:[]:tt(t)?r=fe(l)?rn(Sr(t)):{}:r={}}return(o?Ht:jt)(t,function(f,d,m){return e(r,f,d,m)}),r}function ug(t,e){return t==null?!0:Qi(t,e)}function og(t,e,r){return t==null?t:cu(t,e,es(r))}function cg(t,e,r,s){return s=typeof s=="function"?s:a,t==null?t:cu(t,e,es(r),s)}function cn(t){return t==null?[]:Li(t,pt(t))}function hg(t){return t==null?[]:Li(t,At(t))}function lg(t,e,r){return r===a&&(r=e,e=a),r!==a&&(r=zt(r),r=r===r?r:0),e!==a&&(e=zt(e),e=e===e?e:0),He(zt(t),e,r)}function fg(t,e,r){return e=pe(e),r===a?(r=e,e=0):r=pe(r),t=zt(t),vl(t,e,r)}function pg(t,e,r){if(r&&typeof r!="boolean"&&wt(t,e,r)&&(e=r=a),r===a&&(typeof e=="boolean"?(r=e,e=a):typeof t=="boolean"&&(r=t,t=a)),t===a&&e===a?(t=0,e=1):(t=pe(t),e===a?(e=t,t=0):e=pe(e)),t>e){var s=t;t=e,e=s}if(r||t%1||e%1){var o=Ga();return mt(t+o*(e-t+Vc("1e-"+((o+"").length-1))),e)}return qi(t,e)}var dg=an(function(t,e,r){return e=e.toLowerCase(),t+(r?vo(e):e)});function vo(t){return xs(V(t).toLowerCase())}function So(t){return t=V(t),t&&t.replace(gc,rh).replace(Bc,"")}function gg(t,e,r){t=V(t),e=It(e);var s=t.length;r=r===a?s:He(B(r),0,s);var o=r;return r-=e.length,r>=0&&t.slice(r,o)==e}function mg(t){return t=V(t),t&&qo.test(t)?t.replace(Ys,ih):t}function vg(t){return t=V(t),t&&ec.test(t)?t.replace(vi,"\\$&"):t}var Sg=an(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Dg=an(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),_g=_u("toLowerCase");function wg(t,e,r){t=V(t),e=B(e);var s=e?je(t):0;if(!e||s>=e)return t;var o=(e-s)/2;return Mr(xr(o),r)+t+Mr(wr(o),r)}function xg(t,e,r){t=V(t),e=B(e);var s=e?je(t):0;return e&&s<e?t+Mr(e-s,r):t}function Pg(t,e,r){t=V(t),e=B(e);var s=e?je(t):0;return e&&s<e?Mr(e-s,r)+t:t}function yg(t,e,r){return r||e==null?e=0:e&&(e=+e),Eh(V(t).replace(Si,""),e||0)}function Tg(t,e,r){return(r?wt(t,e,r):e===a)?e=1:e=B(e),Xi(V(t),e)}function Ag(){var t=arguments,e=V(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var Cg=an(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});function Og(t,e,r){return r&&typeof r!="number"&&wt(t,e,r)&&(e=r=a),r=r===a?Qt:r>>>0,r?(t=V(t),t&&(typeof e=="string"||e!=null&&!Ds(e))&&(e=It(e),!e&&Qe(t))?Oe(Kt(t),0,r):t.split(e,r)):[]}var bg=an(function(t,e,r){return t+(r?" ":"")+xs(e)});function Eg(t,e,r){return t=V(t),r=r==null?0:He(B(r),0,t.length),e=It(e),t.slice(r,r+e.length)==e}function Ig(t,e,r){var s=c.templateSettings;r&&wt(t,e,r)&&(e=a),t=V(t),e=Kr({},e,s,Cu);var o=Kr({},e.imports,s.imports,Cu),l=pt(o),f=Li(o,l),d,m,_=0,w=e.interpolate||ar,x="__p += '",T=Mi((e.escape||ar).source+"|"+w.source+"|"+(w===qs?cc:ar).source+"|"+(e.evaluate||ar).source+"|$","g"),C="//# sourceURL="+($.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gc+"]")+`
`;t.replace(T,function(I,F,W,Lt,xt,Bt){return W||(W=Lt),x+=t.slice(_,Bt).replace(mc,sh),F&&(d=!0,x+=`' +
__e(`+F+`) +
'`),xt&&(m=!0,x+=`';
`+xt+`;
__p += '`),W&&(x+=`' +
((__t = (`+W+`)) == null ? '' : __t) +
'`),_=Bt+I.length,I}),x+=`';
`;var E=$.call(e,"variable")&&e.variable;if(!E)x=`with (obj) {
`+x+`
}
`;else if(uc.test(E))throw new R(p);x=(m?x.replace($o,""):x).replace(Zo,"$1").replace(Ko,"$1;"),x="function("+(E||"obj")+`) {
`+(E?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(d?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var M=_o(function(){return z(l,C+"return "+x).apply(a,f)});if(M.source=x,Ss(M))throw M;return M}function Rg(t){return V(t).toLowerCase()}function Lg(t){return V(t).toUpperCase()}function Bg(t,e,r){if(t=V(t),t&&(r||e===a))return Oa(t);if(!t||!(e=It(e)))return t;var s=Kt(t),o=Kt(e),l=ba(s,o),f=Ea(s,o)+1;return Oe(s,l,f).join("")}function Mg(t,e,r){if(t=V(t),t&&(r||e===a))return t.slice(0,Ra(t)+1);if(!t||!(e=It(e)))return t;var s=Kt(t),o=Ea(s,Kt(e))+1;return Oe(s,0,o).join("")}function Ng(t,e,r){if(t=V(t),t&&(r||e===a))return t.replace(Si,"");if(!t||!(e=It(e)))return t;var s=Kt(t),o=ba(s,Kt(e));return Oe(s,o).join("")}function Hg(t,e){var r=bo,s=Eo;if(tt(e)){var o="separator"in e?e.separator:o;r="length"in e?B(e.length):r,s="omission"in e?It(e.omission):s}t=V(t);var l=t.length;if(Qe(t)){var f=Kt(t);l=f.length}if(r>=l)return t;var d=r-je(s);if(d<1)return s;var m=f?Oe(f,0,d).join(""):t.slice(0,d);if(o===a)return m+s;if(f&&(d+=m.length-d),Ds(o)){if(t.slice(d).search(o)){var _,w=m;for(o.global||(o=Mi(o.source,V(Xs.exec(o))+"g")),o.lastIndex=0;_=o.exec(w);)var x=_.index;m=m.slice(0,x===a?d:x)}}else if(t.indexOf(It(o),d)!=d){var T=m.lastIndexOf(o);T>-1&&(m=m.slice(0,T))}return m+s}function Fg(t){return t=V(t),t&&Yo.test(t)?t.replace(Ks,fh):t}var Gg=an(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),xs=_u("toUpperCase");function Do(t,e,r){return t=V(t),e=r?a:e,e===a?uh(t)?gh(t):Qc(t):t.match(e)||[]}var _o=N(function(t,e){try{return bt(t,a,e)}catch(r){return Ss(r)?r:new R(r)}}),Wg=he(function(t,e){return Ht(e,function(r){r=ee(r),oe(t,r,ms(t[r],t))}),t});function kg(t){var e=t==null?0:t.length,r=b();return t=e?j(t,function(s){if(typeof s[1]!="function")throw new Ft(h);return[r(s[0]),s[1]]}):[],N(function(s){for(var o=-1;++o<e;){var l=t[o];if(bt(l[0],this,s))return bt(l[1],this,s)}})}function Ug(t){return fl(Wt(t,O))}function Ps(t){return function(){return t}}function zg(t,e){return t==null||t!==t?e:t}var Vg=xu(),$g=xu(!0);function Ct(t){return t}function ys(t){return Qa(typeof t=="function"?t:Wt(t,O))}function Zg(t){return tu(Wt(t,O))}function Kg(t,e){return eu(t,Wt(e,O))}var Yg=N(function(t,e){return function(r){return Nn(r,t,e)}}),qg=N(function(t,e){return function(r){return Nn(t,r,e)}});function Ts(t,e,r){var s=pt(e),o=Or(e,s);r==null&&!(tt(e)&&(o.length||!s.length))&&(r=e,e=t,t=this,o=Or(e,pt(e)));var l=!(tt(r)&&"chain"in r)||!!r.chain,f=fe(t);return Ht(o,function(d){var m=e[d];t[d]=m,f&&(t.prototype[d]=function(){var _=this.__chain__;if(l||_){var w=t(this.__wrapped__),x=w.__actions__=yt(this.__actions__);return x.push({func:m,args:arguments,thisArg:t}),w.__chain__=_,w}return m.apply(t,we([this.value()],arguments))})}),t}function Xg(){return ft._===this&&(ft._=wh),this}function As(){}function Jg(t){return t=B(t),N(function(e){return nu(e,t)})}var Qg=rs(j),jg=rs(Pa),tm=rs(Oi);function wo(t){return hs(t)?bi(ee(t)):bl(t)}function em(t){return function(e){return t==null?a:Fe(t,e)}}var nm=yu(),rm=yu(!0);function Cs(){return[]}function Os(){return!1}function im(){return{}}function sm(){return""}function am(){return!0}function um(t,e){if(t=B(t),t<1||t>De)return[];var r=Qt,s=mt(t,Qt);e=b(e),t-=Qt;for(var o=Ri(s,e);++r<t;)e(r);return o}function om(t){return L(t)?j(t,ee):Rt(t)?[t]:yt(Wu(V(t)))}function cm(t){var e=++Dh;return V(t)+e}var hm=Br(function(t,e){return t+e},0),lm=is("ceil"),fm=Br(function(t,e){return t/e},1),pm=is("floor");function dm(t){return t&&t.length?Cr(t,Ct,zi):a}function gm(t,e){return t&&t.length?Cr(t,b(e,2),zi):a}function mm(t){return Aa(t,Ct)}function vm(t,e){return Aa(t,b(e,2))}function Sm(t){return t&&t.length?Cr(t,Ct,Ki):a}function Dm(t,e){return t&&t.length?Cr(t,b(e,2),Ki):a}var _m=Br(function(t,e){return t*e},1),wm=is("round"),xm=Br(function(t,e){return t-e},0);function Pm(t){return t&&t.length?Ii(t,Ct):0}function ym(t,e){return t&&t.length?Ii(t,b(e,2)):0}return c.after=Zp,c.ary=Ju,c.assign=Ld,c.assignIn=lo,c.assignInWith=Kr,c.assignWith=Bd,c.at=Md,c.before=Qu,c.bind=ms,c.bindAll=Wg,c.bindKey=ju,c.castArray=id,c.chain=Yu,c.chunk=pf,c.compact=df,c.concat=gf,c.cond=kg,c.conforms=Ug,c.constant=Ps,c.countBy=Pp,c.create=Nd,c.curry=to,c.curryRight=eo,c.debounce=no,c.defaults=Hd,c.defaultsDeep=Fd,c.defer=Kp,c.delay=Yp,c.difference=mf,c.differenceBy=vf,c.differenceWith=Sf,c.drop=Df,c.dropRight=_f,c.dropRightWhile=wf,c.dropWhile=xf,c.fill=Pf,c.filter=Tp,c.flatMap=Op,c.flatMapDeep=bp,c.flatMapDepth=Ep,c.flatten=Vu,c.flattenDeep=yf,c.flattenDepth=Tf,c.flip=qp,c.flow=Vg,c.flowRight=$g,c.fromPairs=Af,c.functions=$d,c.functionsIn=Zd,c.groupBy=Ip,c.initial=Of,c.intersection=bf,c.intersectionBy=Ef,c.intersectionWith=If,c.invert=Yd,c.invertBy=qd,c.invokeMap=Lp,c.iteratee=ys,c.keyBy=Bp,c.keys=pt,c.keysIn=At,c.map=kr,c.mapKeys=Jd,c.mapValues=Qd,c.matches=Zg,c.matchesProperty=Kg,c.memoize=zr,c.merge=jd,c.mergeWith=fo,c.method=Yg,c.methodOf=qg,c.mixin=Ts,c.negate=Vr,c.nthArg=Jg,c.omit=tg,c.omitBy=eg,c.once=Xp,c.orderBy=Mp,c.over=Qg,c.overArgs=Jp,c.overEvery=jg,c.overSome=tm,c.partial=vs,c.partialRight=ro,c.partition=Np,c.pick=ng,c.pickBy=po,c.property=wo,c.propertyOf=em,c.pull=Mf,c.pullAll=Zu,c.pullAllBy=Nf,c.pullAllWith=Hf,c.pullAt=Ff,c.range=nm,c.rangeRight=rm,c.rearg=Qp,c.reject=Gp,c.remove=Gf,c.rest=jp,c.reverse=ds,c.sampleSize=kp,c.set=ig,c.setWith=sg,c.shuffle=Up,c.slice=Wf,c.sortBy=$p,c.sortedUniq=Kf,c.sortedUniqBy=Yf,c.split=Og,c.spread=td,c.tail=qf,c.take=Xf,c.takeRight=Jf,c.takeRightWhile=Qf,c.takeWhile=jf,c.tap=dp,c.throttle=ed,c.thru=Wr,c.toArray=oo,c.toPairs=go,c.toPairsIn=mo,c.toPath=om,c.toPlainObject=ho,c.transform=ag,c.unary=nd,c.union=tp,c.unionBy=ep,c.unionWith=np,c.uniq=rp,c.uniqBy=ip,c.uniqWith=sp,c.unset=ug,c.unzip=gs,c.unzipWith=Ku,c.update=og,c.updateWith=cg,c.values=cn,c.valuesIn=hg,c.without=ap,c.words=Do,c.wrap=rd,c.xor=up,c.xorBy=op,c.xorWith=cp,c.zip=hp,c.zipObject=lp,c.zipObjectDeep=fp,c.zipWith=pp,c.entries=go,c.entriesIn=mo,c.extend=lo,c.extendWith=Kr,Ts(c,c),c.add=hm,c.attempt=_o,c.camelCase=dg,c.capitalize=vo,c.ceil=lm,c.clamp=lg,c.clone=sd,c.cloneDeep=ud,c.cloneDeepWith=od,c.cloneWith=ad,c.conformsTo=cd,c.deburr=So,c.defaultTo=zg,c.divide=fm,c.endsWith=gg,c.eq=qt,c.escape=mg,c.escapeRegExp=vg,c.every=yp,c.find=Ap,c.findIndex=Uu,c.findKey=Gd,c.findLast=Cp,c.findLastIndex=zu,c.findLastKey=Wd,c.floor=pm,c.forEach=qu,c.forEachRight=Xu,c.forIn=kd,c.forInRight=Ud,c.forOwn=zd,c.forOwnRight=Vd,c.get=_s,c.gt=hd,c.gte=ld,c.has=Kd,c.hasIn=ws,c.head=$u,c.identity=Ct,c.includes=Rp,c.indexOf=Cf,c.inRange=fg,c.invoke=Xd,c.isArguments=ke,c.isArray=L,c.isArrayBuffer=fd,c.isArrayLike=Tt,c.isArrayLikeObject=rt,c.isBoolean=pd,c.isBuffer=be,c.isDate=dd,c.isElement=gd,c.isEmpty=md,c.isEqual=vd,c.isEqualWith=Sd,c.isError=Ss,c.isFinite=Dd,c.isFunction=fe,c.isInteger=io,c.isLength=$r,c.isMap=so,c.isMatch=_d,c.isMatchWith=wd,c.isNaN=xd,c.isNative=Pd,c.isNil=Td,c.isNull=yd,c.isNumber=ao,c.isObject=tt,c.isObjectLike=nt,c.isPlainObject=Un,c.isRegExp=Ds,c.isSafeInteger=Ad,c.isSet=uo,c.isString=Zr,c.isSymbol=Rt,c.isTypedArray=on,c.isUndefined=Cd,c.isWeakMap=Od,c.isWeakSet=bd,c.join=Rf,c.kebabCase=Sg,c.last=Ut,c.lastIndexOf=Lf,c.lowerCase=Dg,c.lowerFirst=_g,c.lt=Ed,c.lte=Id,c.max=dm,c.maxBy=gm,c.mean=mm,c.meanBy=vm,c.min=Sm,c.minBy=Dm,c.stubArray=Cs,c.stubFalse=Os,c.stubObject=im,c.stubString=sm,c.stubTrue=am,c.multiply=_m,c.nth=Bf,c.noConflict=Xg,c.noop=As,c.now=Ur,c.pad=wg,c.padEnd=xg,c.padStart=Pg,c.parseInt=yg,c.random=pg,c.reduce=Hp,c.reduceRight=Fp,c.repeat=Tg,c.replace=Ag,c.result=rg,c.round=wm,c.runInContext=g,c.sample=Wp,c.size=zp,c.snakeCase=Cg,c.some=Vp,c.sortedIndex=kf,c.sortedIndexBy=Uf,c.sortedIndexOf=zf,c.sortedLastIndex=Vf,c.sortedLastIndexBy=$f,c.sortedLastIndexOf=Zf,c.startCase=bg,c.startsWith=Eg,c.subtract=xm,c.sum=Pm,c.sumBy=ym,c.template=Ig,c.times=um,c.toFinite=pe,c.toInteger=B,c.toLength=co,c.toLower=Rg,c.toNumber=zt,c.toSafeInteger=Rd,c.toString=V,c.toUpper=Lg,c.trim=Bg,c.trimEnd=Mg,c.trimStart=Ng,c.truncate=Hg,c.unescape=Fg,c.uniqueId=cm,c.upperCase=Gg,c.upperFirst=xs,c.each=qu,c.eachRight=Xu,c.first=$u,Ts(c,function(){var t={};return jt(c,function(e,r){$.call(c.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),c.VERSION=n,Ht(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){c[t].placeholder=c}),Ht(["drop","take"],function(t,e){G.prototype[t]=function(r){r=r===a?1:ot(B(r),0);var s=this.__filtered__&&!e?new G(this):this.clone();return s.__filtered__?s.__takeCount__=mt(r,s.__takeCount__):s.__views__.push({size:mt(r,Qt),type:t+(s.__dir__<0?"Right":"")}),s},G.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),Ht(["filter","map","takeWhile"],function(t,e){var r=e+1,s=r==Vs||r==Bo;G.prototype[t]=function(o){var l=this.clone();return l.__iteratees__.push({iteratee:b(o,3),type:r}),l.__filtered__=l.__filtered__||s,l}}),Ht(["head","last"],function(t,e){var r="take"+(e?"Right":"");G.prototype[t]=function(){return this[r](1).value()[0]}}),Ht(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");G.prototype[t]=function(){return this.__filtered__?new G(this):this[r](1)}}),G.prototype.compact=function(){return this.filter(Ct)},G.prototype.find=function(t){return this.filter(t).head()},G.prototype.findLast=function(t){return this.reverse().find(t)},G.prototype.invokeMap=N(function(t,e){return typeof t=="function"?new G(this):this.map(function(r){return Nn(r,t,e)})}),G.prototype.reject=function(t){return this.filter(Vr(b(t)))},G.prototype.slice=function(t,e){t=B(t);var r=this;return r.__filtered__&&(t>0||e<0)?new G(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==a&&(e=B(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},G.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},G.prototype.toArray=function(){return this.take(Qt)},jt(G.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),s=/^(?:head|last)$/.test(e),o=c[s?"take"+(e=="last"?"Right":""):e],l=s||/^find/.test(e);o&&(c.prototype[e]=function(){var f=this.__wrapped__,d=s?[1]:arguments,m=f instanceof G,_=d[0],w=m||L(f),x=function(F){var W=o.apply(c,we([F],d));return s&&T?W[0]:W};w&&r&&typeof _=="function"&&_.length!=1&&(m=w=!1);var T=this.__chain__,C=!!this.__actions__.length,E=l&&!T,M=m&&!C;if(!l&&w){f=M?f:new G(this);var I=t.apply(f,d);return I.__actions__.push({func:Wr,args:[x],thisArg:a}),new Gt(I,T)}return E&&M?t.apply(this,d):(I=this.thru(x),E?s?I.value()[0]:I.value():I)})}),Ht(["pop","push","shift","sort","splice","unshift"],function(t){var e=fr[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);c.prototype[t]=function(){var o=arguments;if(s&&!this.__chain__){var l=this.value();return e.apply(L(l)?l:[],o)}return this[r](function(f){return e.apply(L(f)?f:[],o)})}}),jt(G.prototype,function(t,e){var r=c[e];if(r){var s=r.name+"";$.call(nn,s)||(nn[s]=[]),nn[s].push({name:e,func:r})}}),nn[Lr(a,Dt).name]=[{name:"wrapper",func:a}],G.prototype.clone=Hh,G.prototype.reverse=Fh,G.prototype.value=Gh,c.prototype.at=gp,c.prototype.chain=mp,c.prototype.commit=vp,c.prototype.next=Sp,c.prototype.plant=_p,c.prototype.reverse=wp,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=xp,c.prototype.first=c.prototype.head,bn&&(c.prototype[bn]=Dp),c},Pe=mh();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ft._=Pe,define(function(){return Pe})):Le?((Le.exports=Pe)._=Pe,yi._=Pe):ft._=Pe}).call(hn)});var ge=yo(bs(),1),pn;(function(a){a[a.fresh=1]="fresh",a[a.brackish=2]="brackish",a[a.salt=3]="salt"})(pn||(pn={}));var ln=class{static{this.fresh=1e3}static{this.brackish=1020}static{this.salt=1030}},Yr=class{static{this.standard=9.80665}},Ve=class a{static{this.coefficient=1e5}static pascalToBar(n){return n/a.coefficient}static barToPascal(n){return n*a.coefficient}},qr=class a{static{this.standard=1.01325}static{this.standardPascals=Ve.barToPascal(a.standard)}static{this.gasConstant=8.31432}static{this.temperature=288.15}static{this.lapsRate=-.0065}static{this.molarMass=.0289644}static{this.exponent=Yr.standard*a.molarMass/(a.gasConstant*a.lapsRate)}static{this.invertedExponent=1/a.exponent}static pressure(n){let i=a.temperature/(a.temperature+a.lapsRate*n);return a.standardPascals*Math.pow(i,a.exponent)}static altitude(n){if(n>=a.standardPascals)return 0;let i=n/a.standardPascals,u=Math.pow(i,a.invertedExponent);return(a.temperature/u-a.temperature)/a.lapsRate}};var ct=class{constructor(n,i,u,h,p,S){this._n2HalfTime=n,this._n2A=i,this._n2B=u,this._heHalfTime=h,this._heA=p,this._heB=S}get n2HalfTime(){return this._n2HalfTime}get n2A(){return this._n2A}get n2B(){return this._n2B}get heHalfTime(){return this._heHalfTime}get heA(){return this._heA}get heB(){return this._heB}},ze=class{static{this.buhlmannZHL16C=[new ct(5,1.1696,.5578,1.88,1.6189,.477),new ct(8,1,.6514,3.02,1.383,.5747),new ct(12.5,.8618,.7222,4.72,1.1919,.6527),new ct(18.5,.7562,.7826,6.99,1.0458,.7223),new ct(27,.62,.8125,10.21,.922,.7582),new ct(38.3,.5043,.8434,14.48,.8205,.7957),new ct(54.3,.441,.8693,20.53,.7305,.8279),new ct(77,.4,.891,29.11,.6502,.8553),new ct(109,.375,.9092,41.2,.595,.8757),new ct(146,.35,.9222,55.19,.5545,.8903),new ct(187,.3295,.9319,70.69,.5333,.8997),new ct(239,.3065,.9403,90.34,.5189,.9073),new ct(305,.2835,.9477,115.29,.5181,.9122),new ct(390,.261,.9544,147.42,.5176,.9171),new ct(498,.248,.9602,188.24,.5172,.9217),new ct(635,.2327,.9653,240.03,.5119,.9267)]}},Pt=class a{static{this.o2InAir=.209}static{this.nitroxInAir=1-a.o2InAir}static{this.minPpO2=.18}static{this.maxEnd=30}static partialPressure(n,i){return n*i}static mod(n,i){return n/i}static bestMix(n,i,u){let h=u.toBar(i),p=n/h;return p>1?1:p}static ead(n,i,u=a.o2InAir){let h=1-n,p=1-u;return a.end(i,h)/p}static end(n,i,u=0){let h=this.narcoticIndex(u,i);return n*h}static mnd(n,i,u=0){let h=this.narcoticIndex(u,i);return n/h}static ceiling(n,i){let h=a.minPpO2/n*i;return h<i?i:h}static narcoticIndex(n,i=0){return i+n}};var Vn=class a extends ct{constructor(n,i){super(n.n2HalfTime,n.n2A,n.n2B,n.heHalfTime,n.heA,n.heB),this._pN2=0,this._pHe=0,this._pTotal=0,this._a=0,this._b=0,this._pN2=a.inspiredN2Pressure(i),this._pHe=0,this.updateCoefficients()}get pN2(){return this._pN2}get pHe(){return this._pHe}get pTotal(){return this._pTotal}get a(){return this._a}get b(){return this._b}static totalPressure(n){return n.pN2+n.pHe}static fromCurrent(n,i){let u=new a(i,1);return u.restoreFrom(n),u}static inspiredN2Pressure(n){let i=a.pressureInLungs(n);return Pt.partialPressure(i,Pt.nitroxInAir)}static pressureInLungs(n){return n-.0627}restoreFrom(n){this._pN2=n.pN2,this._pHe=n.pHe,this.updateCoefficients()}copy(){return a.fromCurrent(this,this)}mValue(n){return this.a+n/this.b}gradientFactor(n){let i=this.mValue(n),u=(this.pTotal-n)/(i-n);return u<0?0:u}saturationRatio(n){return this.pTotal<n?this.pTotal/n-1:this.gradientFactor(n)}ceiling(n){return(this.pTotal-this.a*n)/(n/this.b+1-n)}load(n,i){this._pN2=this.loadGas(n,i.fN2,this.pN2,this.n2HalfTime),this._pHe=this.loadGas(n,i.fHe,this.pHe,this.heHalfTime);let u=this.pTotal;return this.updateCoefficients(),this.pTotal-u}loadGas(n,i,u,h){let p=n.speed*i,S=a.pressureInLungs(n.startPressure)*i;return this.schreinerEquation(u,S,n.duration,h,p)}schreinerEquation(n,i,u,h,p){let P=.01155245301/h,y=Math.exp(-P*u);return i+p*(u-1/P)-(i-n-p/P)*y}updateCoefficients(){this._pTotal=a.totalPressure(this),this._a=(this.n2A*this.pN2+this.heA*this.pHe)/this.pTotal,this._b=(this.n2B*this.pN2+this.heB*this.pHe)/this.pTotal}},Ee=class a{constructor(n){this._compartments=n}get compartments(){return this._compartments}static createLoaded(n){if(n.length!==ze.buhlmannZHL16C.length)throw new Error("Provided incompatible count of tissues");let i=(0,ge.default)(n).map((u,h)=>{let p=ze.buhlmannZHL16C[h];return Vn.fromCurrent(u,p)}).value();return new a(i)}static create(n){let i=[];for(let u=0;u<ze.buhlmannZHL16C.length;u++){let h=ze.buhlmannZHL16C[u],p=new Vn(h,n);i.push(p)}return new a(i)}static createLoadedAt(n){let i=qr.pressure(n),u=Ve.pascalToBar(i);return a.create(u).finalState()}static copy(n){let i=[];for(let u=0;u<n.length;u++){let h=n[u].copy();i.push(h)}return i}restoreFrom(n){this._compartments.forEach((i,u)=>i.restoreFrom(n[u]))}finalState(){return(0,ge.default)(this._compartments).map(n=>({pN2:n.pN2,pHe:n.pHe})).value()}saturationRatio(n){return(0,ge.default)(this._compartments).map(i=>i.saturationRatio(n)).value()}ceiling(n){let i=0;for(let u=0;u<this._compartments.length;u++){let h=this._compartments[u].ceiling(n);h>i&&(i=h)}return i}load(n,i){let u=0;for(let h=0;h<this._compartments.length;h++){let S=this._compartments[h].load(n,i);u=u+S}return u}gradientFactor(n){return(0,ge.default)(this._compartments).map(u=>u.gradientFactor(n)).max()||0}},Xr=class a{static validTissue(n){return n.pN2>0&&n.pHe>=0}static validCount(n){return!!n&&n.length===ze.buhlmannZHL16C.length}static valid(n){return a.validCount(n)?(0,ge.default)(n).every(u=>a.validTissue(u)):!1}},et=class a{static fix(n){return Number(n.toFixed(10))}static roundTwoDecimals(n){return a.round(n,2)}static round(n,i=0){return a.adapt(Math.round,n,i)}static floorTwoDecimals(n){return a.floor(n,2)}static floor(n,i=0){return a.adapt(Math.floor,n,i)}static ceilTwoDecimals(n){return a.ceil(n,2)}static ceil(n,i=0){return a.adapt(Math.ceil,n,i)}static ceilDistance(n,i){return a.adaptDistance(Math.ceil,n,i)}static roundDistance(n,i){return a.adaptDistance(Math.round,n,i)}static floorDistance(n,i){return a.adaptDistance(Math.floor,n,i)}static adapt(n,i,u){let h=Math.pow(10,u);return n(i*h)/h}static adaptDistance(n,i,u){return n(i/u)*u}},me=class{constructor(n){this.options=n}create(){switch(this.options.salinity){case pn.salt:return $e.forSaltWater(this.options.altitude);case pn.brackish:return $e.forBrackishWater(this.options.altitude);default:return $e.forFreshWater(this.options.altitude)}}},$e=class a{constructor(n,i){this.density=n,this._gravity=Yr.standard;let u=qr.pressure(i);this._surfacePressure=Ve.pascalToBar(u)}get surfacePressure(){return this._surfacePressure}static forSaltWater(n=0){return new a(ln.salt,n)}static forBrackishWater(n=0){return new a(ln.brackish,n)}static forFreshWater(n=0){return new a(ln.fresh,n)}static simple(){let n=new a(ln.fresh,0);return n._surfacePressure=1,n._gravity=10,n}toBar(n){let i=this.density*this._gravity;return Ve.pascalToBar(n*i)+this._surfacePressure}fromBar(n){if(n<this._surfacePressure)throw new Error("Lower pressure than altitude isn`t convertible to depth.");let i=this.density*this._gravity;return Ve.barToPascal(n-this._surfacePressure)/i}},$n;(function(a){a[a.never=1]="never",a[a.auto=2]="auto",a[a.always=3]="always"})($n||($n={}));var K=class a{static{this.altitude=0}static{this.saltWater=pn.salt}static{this.roundStopsToMinutes=!1}static{this.gasSwitchDuration=2}static{this.problemSolvingDuration=1}static{this.lastStopDepth=3}static{this.lastStopDepthRecre=5}static{this.safetyStopRecre=$n.auto}static{this.decoStopDistance=3}static{this.minimumAutoStopDepth=10}static{this.addSafetyStop=!0}static{this.maxEND=Pt.maxEnd}static{this.oxygenNarcotic=!0}static{this.ascentSpeed6m=3}static{this.ascentSpeed50percTo6m=3}static{this.ascentSpeed50perc=9}static{this.descentSpeed=18}static{this.gfLow=.4}static{this.gfHigh=.85}static{this.maxPpO2=1.4}static{this.maxDecoPpO2=1.6}static{this.airBreakOxygenDuration=20}static{this.airBreakBottomGasDuration=5}static setMediumConservatism(n){n.gfLow=a.gfLow,n.gfHigh=a.gfHigh}static useGeneralRecommended(n){n.safetyStop=a.safetyStopRecre,n.roundStopsToMinutes=a.roundStopsToMinutes,n.gasSwitchDuration=a.gasSwitchDuration,n.oxygenNarcotic=a.oxygenNarcotic}},Es=class{constructor(n=!1,i=K.airBreakOxygenDuration,u=K.airBreakBottomGasDuration){this.enabled=n,this.oxygenDuration=i,this.bottomGasDuration=u}loadFrom(n){this.enabled=n.enabled,this.oxygenDuration=n.oxygenDuration,this.bottomGasDuration=n.bottomGasDuration}},Zn=class{constructor(n=K.gfLow,i=K.gfHigh,u=K.maxPpO2,h=K.maxDecoPpO2,p=K.saltWater){this.gfLow=n,this.gfHigh=i,this.maxPpO2=u,this.maxDecoPpO2=h,this.salinity=p,this.altitude=K.altitude,this.roundStopsToMinutes=K.roundStopsToMinutes,this.gasSwitchDuration=K.gasSwitchDuration,this.safetyStop=K.safetyStopRecre,this.lastStopDepth=K.lastStopDepth,this.decoStopDistance=K.decoStopDistance,this.minimumAutoStopDepth=K.minimumAutoStopDepth,this.maxEND=K.maxEND,this.oxygenNarcotic=!0,this.ascentSpeed6m=K.ascentSpeed6m,this.ascentSpeed50percTo6m=K.ascentSpeed50percTo6m,this.ascentSpeed50perc=K.ascentSpeed50perc,this.descentSpeed=K.descentSpeed,this.problemSolvingDuration=K.problemSolvingDuration,this._airBreaks=new Es,this.gfLow=n||K.gfLow,this.gfHigh=i||K.gfHigh,this.maxPpO2=u||K.maxPpO2,this.maxDecoPpO2=h||K.maxDecoPpO2,this.salinity=p||K.saltWater}get airBreaks(){return this._airBreaks}loadFrom(n){this.gfLow=n.gfLow||this.gfLow,this.gfHigh=n.gfHigh||this.gfHigh,this.maxPpO2=n.maxPpO2||this.maxPpO2,this.maxDecoPpO2=n.maxDecoPpO2||this.maxDecoPpO2,this.oxygenNarcotic=n.oxygenNarcotic,this.salinity=n.salinity||this.salinity,this.altitude=n.altitude||n.altitude===0?n.altitude:this.altitude,this.roundStopsToMinutes=n.roundStopsToMinutes,this.gasSwitchDuration=n.gasSwitchDuration||this.gasSwitchDuration,this.problemSolvingDuration=n.problemSolvingDuration||this.problemSolvingDuration,this.lastStopDepth=n.lastStopDepth||this.lastStopDepth,this.decoStopDistance=n.decoStopDistance||this.decoStopDistance,this.minimumAutoStopDepth=n.minimumAutoStopDepth||this.minimumAutoStopDepth,this.safetyStop=n.safetyStop||this.safetyStop,this.maxEND=n.maxEND||this.maxEND,this.ascentSpeed6m=n.ascentSpeed6m||this.ascentSpeed6m,this.ascentSpeed50percTo6m=n.ascentSpeed50percTo6m||this.ascentSpeed50percTo6m,this.ascentSpeed50perc=n.ascentSpeed50perc||this.ascentSpeed50perc,this.descentSpeed=n.descentSpeed||this.descentSpeed,this.airBreaks.loadFrom(n.airBreaks)}},Kn=class{constructor(n,i){this.depthConverter=n,this.options=i}toDecoStop(n){let i=this.depthConverter.fromBar(n);return et.roundDistance(i,this.options.decoStopDistance)}nextStop(n){if(n<=this.options.lastStopDepth)return 0;let i=et.floorDistance(n,this.options.decoStopDistance);if(i!==n)return i;let u=n-this.options.decoStopDistance;return u<=this.options.lastStopDepth?this.options.lastStopDepth:u}addSafetyStop(n,i){return(this.options.safetyStop===$n.always||this.options.safetyStop===$n.auto&&i>this.options.minimumAutoStopDepth)&&n===this.options.lastStopDepth}},dn=class{static createAtSurface(n=0){return Ee.createLoadedAt(n)}surfaceGradient(n,i){return Ee.createLoaded(n).gradientFactor(i)}offgasingStart(n){let u=(0,ge.default)(n).map(S=>{if(S.length!==16)throw new Error("Wrong number of tissues in any sample");return Vn.totalPressure(S[4])}),h=u.findLastIndex((S,P,y)=>(P>0?y[P-1]:S)<S);if(h<0)return n.length===0?-1:n.length-1;let p=u.findIndex((S,P,y)=>(P>0?y[P-1]:S)>S,h);return p<0?h:p}},gt;(function(a){a[a.noAction=0]="noAction",a[a.error=1]="error",a[a.gasSwitch=2]="gasSwitch",a[a.noDecoEnd=3]="noDecoEnd",a[a.lowPpO2=4]="lowPpO2",a[a.highPpO2=5]="highPpO2",a[a.highAscentSpeed=6]="highAscentSpeed",a[a.highDescentSpeed=7]="highDescentSpeed",a[a.brokenCeiling=8]="brokenCeiling",a[a.maxEndExceeded=9]="maxEndExceeded",a[a.isobaricCounterDiffusion=10]="isobaricCounterDiffusion",a[a.highGasDensity=11]="highGasDensity",a[a.safetyStop=12]="safetyStop",a[a.minDepth=13]="minDepth",a[a.maxDepth=14]="maxDepth",a[a.missingAirBreak=15]="missingAirBreak"})(gt||(gt={}));var ht=class a{constructor(n,i,u,h,p){this.timeStamp=n,this.depth=i,this.type=u,this.message=h,this.gas=p}static create(n,i,u,h){return new a(i,u,n,"",h)}static createError(n){return new a(0,0,gt.error,n)}},st=class{static createError(n){return ht.createError(n)}static createSafetyStopStart(n,i){return ht.create(gt.safetyStop,n,i)}static createNoDecoEnd(n,i){return ht.create(gt.noDecoEnd,n,i)}static createGasSwitch(n,i,u){return ht.create(gt.gasSwitch,n,i,u)}static createLowPpO2(n,i){return ht.create(gt.lowPpO2,n,i)}static createHighPpO2(n,i){return ht.create(gt.highPpO2,n,i)}static createHighAscentSpeed(n,i){return ht.create(gt.highAscentSpeed,n,i)}static createHighDescentSpeed(n,i){return ht.create(gt.highDescentSpeed,n,i)}static createBrokenCeiling(n,i){return ht.create(gt.brokenCeiling,n,i)}static createMaxEndExceeded(n,i,u){return ht.create(gt.maxEndExceeded,n,i,u)}static createIsobaricCounterDiffusion(n,i,u){return ht.create(gt.isobaricCounterDiffusion,n,i,u)}static createHighDensity(n,i,u){return ht.create(gt.highGasDensity,n,i,u)}static createShallowDepth(n){return ht.create(gt.minDepth,0,n)}static createMaxDepth(n){return ht.create(gt.maxDepth,0,n)}static createMissingAirBreak(n,i){return ht.create(gt.missingAirBreak,n,i)}},Yn=class{constructor(){this.items=[]}add(n){this.items.push(n)}},Is=class{constructor(n,i){this.time=n,this.depth=i}get notAtSurface(){return this.depth>0}static isDecoDive(n){for(let i of n)if(i.notAtSurface)return!0;return!1}},Ie=class a{static{this.emptyTissueOverPressures=[]}constructor(n,i,u){this.seg=n,this._finalTissues=i,this.err=u}get segments(){return this.seg}get finalTissues(){return this._finalTissues}get errors(){return this.err}static fromErrors(n,i){return new a(n,dn.createAtSurface(),i)}static fromProfile(n,i){return new a(n,i,[])}},gn=class a extends Ie{constructor(n,i,u,h,p,S){super(n,u,S),this.ceil=i,this._tissues=h,this._tissueOverPressures=p}get ceilings(){return this.ceil}get tissues(){return this._tissues}static fromStatisticsProfile(n,i,u,h,p){return new a(n,i,h,p,u,[])}static fromStatisticsErrors(n,i){return new a(n,[],dn.createAtSurface(),[],Ie.emptyTissueOverPressures,i)}get tissueOverPressures(){return this._tissueOverPressures}},qn=class a{static{this.airName="Air"}static{this.oxygenName="Oxygen"}static nameFor(n,i=0){let h=et.round(n*100),p=et.round(i*100);return h<=0?"":p<=0?h>=100?a.oxygenName:h===21?a.airName:"EAN"+h.toString():`${h>=21?"Helitrox":"Trimix"} ${h.toString()}/${p.toString()}`}},Rs=class{static validate(n){let i=[];if(!n.hasBottomGas){let u=st.createError("At least one bottom gas has to be defined.");return i.push(u),i}return i}},Ls=class{constructor(n,i){this.gases=n,this.depthConverter=$e.simple(),this.depthLevels=new Kn(this.depthConverter,i)}bestGas(n){let i=this.depthConverter.toBar(n.currentDepth),u=this.depthConverter.toBar(n.maxEnd),h=n.currentGas;return this.gases.all.forEach(p=>{let S=p.mod(n.maxDecoPpO2),P=this.depthLevels.toDecoStop(S),y=p.end(i,n.oxygenNarcotic);n.currentDepth<=P&&y<=u&&(!h||h.fO2<p.fO2)&&(h=p)}),h}airBreakGas(n,i){let u=this.depthConverter.toBar(n);return(0,ge.default)(this.gases.all).filter(p=>Pt.partialPressure(u,p.fO2)>=Pt.minPpO2).minBy(p=>p.fO2)||i}},Xn=class{constructor(){this.items=[]}get all(){return this.items.slice()}get hasBottomGas(){return this.items.length>=1}add(n){this.items.push(n)}isRegistered(n){return this.items.includes(n)}},lt=class a{constructor(n,i){if(this._fO2=n,this._fHe=i,this._contentCode=0,this.contentExceeds100percent())throw new Error("O2 + He can't exceed 100 %");this.updateContentCode()}get fN2(){return 1-this._fO2-this._fHe}get fO2(){return this._fO2}get fHe(){return this._fHe}get name(){return qn.nameFor(this.fO2,this.fHe)}get contentCode(){return this._contentCode}set fO2(n){this._fO2=n>1?1:n,this.contentExceeds100percent()&&(this._fHe=this.countRemaining(this._fO2)),this.updateContentCode()}set fHe(n){this._fHe=n>1?1:n,this.contentExceeds100percent()&&(this._fO2=this.countRemaining(this._fHe)),this.updateContentCode()}copy(){return new a(this._fO2,this._fHe)}mod(n){return Pt.mod(n,this._fO2)}end(n,i){let u=i?this._fO2:0;return Pt.end(n,this.fN2,u)}mnd(n,i){let u=i?this._fO2:0;return Pt.mnd(n,this.fN2,u)}ceiling(n){return Pt.ceiling(this._fO2,n)}compositionEquals(n){return!!n&&this._fO2===n._fO2&&this._fHe===n._fHe}toString(){return`Gas:${this.name}`}contentExceeds100percent(){return this._fO2+this._fHe>1}countRemaining(n){let i=1-n;return et.round(i,5)}updateContentCode(){this._contentCode=et.round(this._fO2*1e4*1e4)+et.round(this._fHe*1e4)}},Jt=class a{static{this.oxygen=new lt(1,0)}static{this.ean50=new lt(.5,0)}static{this.ean38=new lt(.38,0)}static{this.ean36=new lt(.36,0)}static{this.ean32=new lt(.32,0)}static{this.trimix3525=new lt(.35,.25)}static{this.trimix2525=new lt(.25,.25)}static{this.air=new lt(Pt.o2InAir,0)}static{this.trimix2135=new lt(.21,.35)}static{this.trimix1845=new lt(.18,.45)}static{this.trimix1555=new lt(.15,.55)}static{this.trimix1260=new lt(.12,.6)}static{this.trimix1070=new lt(.1,.7)}static{this.namesRegEx=/[EAN](?<fO2>\d{2})|(?<fO2b>\d{2})\/(?<fHe>\d{2})/i}static{this.map=new Map([[qn.airName,a.air],["EAN32",a.ean32],["EAN36",a.ean36],["EAN38",a.ean38],["EAN50",a.ean50],[qn.oxygenName,a.oxygen],["Helitrox 35/25",a.trimix3525],["Helitrox 25/25",a.trimix2525],["Helitrox 21/35",a.trimix2135],["Trimix 18/45",a.trimix1845],["Trimix 15/55",a.trimix1555],["Trimix 12/60",a.trimix1260],["Trimix 10/70",a.trimix1070]])}static nitroxNames(){return a.allNames().slice(0,6)}static allNames(){return Array.from(a.map.keys())}static byName(n){let i=[...a.map.keys()],u=(0,ge.default)(i).filter(p=>p.toLowerCase()===n.toLowerCase()).first();if(u)return a.map.get(u)??null;let h=a.namesRegEx.exec(n);if(h){if(h[1]){let p=Number(h[1])/100;if(p>0)return new lt(p,0)}if(h[2]&&h[3]){let p=Number(h[2])/100,S=Number(h[3])/100;if(p>0&&S>0)return new lt(p,S)}}return null}},Jr=class{constructor(){this.normalPressure=1,this.o2Coefficients=[-.000718092073703,281852572808e-17,-150290620492e-20],this.n2Coefficients=[-.000219260353292,292844845532e-17,-207613482075e-20],this.heCoefficients=[.000487320026468,-883632921053e-19,533304543646e-22]}virial(n,i){return i[0]*n+i[1]*n*n+i[2]*n*n*n}zFactor(n,i){return 1+i.fO2*this.virial(n,this.o2Coefficients)+i.fHe*this.virial(n,this.heCoefficients)+i.fN2*this.virial(n,this.n2Coefficients)}tankVolume(n,i){let u=n.startPressure+this.normalPressure;return this.normalVolume(u,i)*n.size-n.size}tankPressure(n,i,u){let h=(u+i)/i;return this.pressure(n,h)-this.normalPressure}normalVolume(n,i){return n*this.zFactor(this.normalPressure,i)/this.zFactor(n,i)}pressure(n,i){if(i>750)throw new Error("Volume cannot be larger than 750 L");let u=i,h=this.zFactor(this.normalPressure,n);for(;Math.abs(h*u-this.zFactor(u,n)*i)>1e-6;)u=i*this.zFactor(u,n)/h;return u}},ne=class a{static toGases(n){let i=new Xn;return n.forEach(u=>{i.add(u.gas)}),i}static haveReserve(n){for(let i=0;i<n.length;i++)if(!n[i].hasReserve)return!1;return!0}static resetConsumption(n){n.forEach(i=>{i.consumed=0,i.reserve=0})}static removeTank(n,i){let u=n.filter(h=>h!==i);return a.renumberIds(u),u}static renumberIds(n){for(let i=0;i<n.length;i++){let u=n[i];u.id=i+1}}},mn=class a{static{this.minimumSize=.1}static{this.minimumZero=0}constructor(n,i,u){if(this.id=0,this._size=0,this._startVolume=0,this._consumedVolume=0,this._reserveVolume=0,this._startPressure=0,this._consumed=0,this._reserve=0,this._gas=Jt.air.copy(),n<a.minimumSize)throw new Error("Size needs to be non zero positive amount in liters");if(i<a.minimumZero)throw new Error("Start pressure needs to be positive number greater than atmospheric pressure in bars");this._size=n,this.o2=u,this.startPressure=i}get startPressure(){return this._startPressure}get size(){return this._size}get consumed(){return this._consumed}get endPressure(){let n=this.startPressure-this.consumed;return n>a.minimumZero?n:a.minimumZero}get endVolume(){let n=this.volume-this.consumedVolume;return n>a.minimumZero?n:a.minimumZero}get reserve(){return this._reserve}get gas(){return this._gas}get o2(){return Qr.getO2(this.gas.fO2,this.gas.fHe)}get he(){let n=this.gas.fHe*100;return et.roundTwoDecimals(n)}get n2(){let n=100-this.o2-this.he;return et.roundTwoDecimals(n)}get volume(){return this._startVolume}get reserveVolume(){return this._reserveVolume}get consumedVolume(){return this._consumedVolume}get name(){return this._gas.name}get percentsRemaining(){return this.endPressure/this.startPressure*100}get percentsReserve(){let n=this.reserve/this.startPressure*100;return n>100?100:n}get hasReserve(){return this.endPressure>=this.reserve}set o2(n){this._gas.fO2=Qr.setO2(n,this.gas.fHe),this.startPressure=this.startPressure}set he(n){this.gas.fHe=n/100,this.startPressure=this.startPressure}set startPressure(n){n<a.minimumZero?this._startPressure=a.minimumZero:this._startPressure=n,this.fitStoredVolumes()}set size(n){n<a.minimumSize?this._size=a.minimumSize:this._size=n,this.fitStoredVolumes()}set consumed(n){let i=a.realVolume2(this.size,n,this.gas);this.updateConsumed(n,i)}set consumedVolume(n){n>this.volume&&(n=this.volume);let i=a.toTankPressure(this.gas,this.size,n);i=et.ceil(i),this.updateConsumed(i,n)}set reserve(n){let i=a.realVolume2(this.size,n,this.gas);this.updateReserve(n,i)}set reserveVolume(n){n>this.volume&&(n=this.volume);let i=a.toTankPressure(this.gas,this.size,n);i=et.ceil(i),this.updateReserve(i,n)}static createDefault(){return new a(15,200,Pt.o2InAir*100)}static realVolume(n,i){return new Jr().tankVolume(n,i)}static toTankPressure(n,i,u){return new Jr().tankPressure(n,i,u)}static realVolume2(n,i,u){let h={size:n,startPressure:i};return a.realVolume(h,u)}assignStandardGas(n){let i=Jt.byName(n);i&&(this.gas.fO2=i.fO2,this.gas.fHe=i.fHe)}loadFrom(n){this.gas.fO2=n._gas.fO2,this.gas.fHe=n._gas.fHe,this.size=n.size,this.startPressure=n.startPressure,this.consumedVolume=n.consumedVolume,this.reserve=n.reserve}toString(){return`Tank ${this.id}:${this.name},${this.size} L,${this.startPressure} b`}fitStoredVolumes(){this._startVolume=a.realVolume2(this.size,this.startPressure,this.gas);let n=this.consumedVolume>this._startVolume?this._startVolume:this.consumedVolume,i=a.toTankPressure(this.gas,this.size,n);i=et.ceil(i),this.updateConsumed(i,n)}updateConsumed(n,i){i>this.volume?this._consumedVolume=this.volume:i<a.minimumZero?this._consumedVolume=a.minimumZero:this._consumedVolume=i,n>this.startPressure?this._consumed=this.startPressure:n<a.minimumZero?this._consumed=a.minimumZero:this._consumed=n}updateReserve(n,i){i>this.volume?this._reserveVolume=this.volume:i<a.minimumZero?this._reserveVolume=a.minimumZero:this._reserveVolume=i,n>this.startPressure?this._reserve=this.startPressure:n<a.minimumZero?this._reserve=a.minimumZero:this._reserve=n}},Qr=class a{static{this.pinnedO2=21}static{this.o2InAirPercent=Pt.o2InAir*100}static getO2(n,i){let u=n*100;return this.isInAirRange(u,i)?a.pinnedO2:et.roundTwoDecimals(u)}static setO2(n,i){return this.isInAirRange(n,i)?Pt.o2InAir:n/100}static isInAirRange(n,i){return a.o2InAirPercent<=n&&n<=a.pinnedO2&&i===0}},Ze=class a{static speed(n,i){let u=n.end-n.start;return a.speedByXChange(i.start,i.end,u)}static speedByXChange(n,i,u){return(i-n)/u}static yValueAt(n,i,u){return n+i*u}static xValueAtAbsolute(n,i,u){let h=this.speed(n,i);return n.start+a.xValueAt(i.start,h,u)}static xValueAt(n,i,u){return i===0?0:(u-n)/i}},Bs=class a{static validate(n,i){let u=[];if(!n.any()){let h=st.createError("There needs to be at least one segment at depth.");u.push(h)}return n.items.forEach(h=>{a.validateRegisteredGas(u,i,h)}),u}static validateRegisteredGas(n,i,u){if(!i.isRegistered(u.gas)){let h=`Segment ${u.startDepth}-${u.endDepth} has gas not registered in gases.`,p=st.createError(h);n.push(p)}}},Vt=class a{constructor(n,i,u,h){this._startDepth=n,this._endDepth=i,this._duration=h,u instanceof mn?(this._tank=u,this._gas=u.gas):this._gas=u}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}get duration(){return this._duration}get gas(){return this._gas}get tank(){return this._tank}get speed(){return a.speed(this.startDepth,this.endDepth,this.duration)}get averageDepth(){return(this.startDepth+this.endDepth)/2}set startDepth(n){this._startDepth=n}set endDepth(n){this._endDepth=n}set duration(n){this._duration=n}set tank(n){this._tank=n,n&&(this._gas=n.gas)}static from(n){let i=new a(n.startDepth,n.endDepth,n._gas,n.duration);return i.tank=n.tank,i}static speed(n,i,u){return Ze.speedByXChange(n,i,u)}static depthAt(n,i,u){return Ze.yValueAt(n,i,u)}static timeAt(n,i,u){return Ze.xValueAt(n,i,u)}contentEquals(n){return this.speed===n.speed&&this._gas.compositionEquals(n._gas)}depthAt(n){return a.depthAt(this.startDepth,this.speed,n)}mergeFrom(n){this.duration+=n.duration,this.endDepth=n.endDepth}toString(){return`Segment:${this.startDepth}-${this.endDepth} m,${this.duration} s, ${this.gas.toString()}`}},St=class a{constructor(){this.segments=[],this._maxDepth=0}get startAscentIndex(){return this.deepestPart().length}get startAscentTime(){let n=this.deepestPart();return a.duration(n)}get length(){return this.segments.length}get items(){return this.segments.slice()}get maxDepth(){return this._maxDepth}get currentDepth(){return this.any()?this.last().endDepth:0}get duration(){return a.duration(this.segments)}static from(n){return a.fromCollection(n.segments)}static fromCollection(n){let i=new a;return n.forEach(u=>{let h=Vt.from(u);i.segments.push(h),i.updateMaxDepth(h)}),i}static duration(n){let i=0;for(let u of n)i+=u.duration;return i}static depthAt(n,i){let u=0;for(let h=0;h<n.length;h++){let p=n[h],S=i-u;if(u<=i&&S<=p.duration)return p.depthAt(S);u+=p.duration}return 0}static averageDepth(n){if(n.length<=0)return 0;let i=0,u=0;return n.forEach(h=>{if(h.duration>0){let p=h.averageDepth*h.duration+u*i;u+=h.duration,i=p/u}}),i}add(n,i,u){let h=new Vt(this.currentDepth,n,i,u);return this.segments.push(h),this.updateMaxDepth(h),h}addFlat(n,i){return this.add(this.currentDepth,n,i)}mergeFlat(n=0){if(n<0)return this.items;let i=[];for(let u=this.segments.length-1;u>n;u--){let h=this.segments[u-1],p=this.segments[u];h.contentEquals(p)&&(h.mergeFrom(p),i.push(p))}return this.segments=this.segments.filter(u=>!i.includes(u)),this.items}remove(n){this.segments=this.segments.filter(i=>i!==n),this.fixStartDepths()}cutDown(n){let i=this.segments.length-n;this.segments=this.segments.slice(0,i),this.fixStartDepths()}any(){return this.segments.length!==0}last(){return this.segments[this.segments.length-1]}copy(){return a.from(this)}fixStartDepths(){this.any()&&(this.segments[0].startDepth=0);for(let n=0;n<this.segments.length-1;n++){let i=this.segments[n],u=this.segments[n+1];u.startDepth=i.endDepth,this.updateMaxDepth(u)}}deepestPart(){for(let n=this.segments.length-1;n>=0;n--)if(this.segments[n].endDepth===this.maxDepth)return this.items.slice(0,n+1);return[]}updateMaxDepth(n){n.endDepth>this._maxDepth&&(this._maxDepth=n.endDepth)}},k=class a{static{this.oneSecond=1}static{this.oneMinute=60}static{this.oneHour=a.oneMinute*60}static{this.oneDay=a.oneHour*24}static{this.safetyStopDuration=a.oneMinute*3}static toSeconds(n){return n*a.oneMinute}static toMinutes(n){return n/a.oneMinute}static toHours(n){return n/a.oneHour}},jr=class a{static{this.minimalStep=1}constructor(){}search(n){if(n.maxValue<n.initialValue)throw Error("Max value cant be smaller than initial value");if(n.estimationStep>n.maxValue-n.initialValue)throw Error("Step cant be larger than range");let i=this.findInitialLimit(n);return this.searchInsideInterval(n,i)}searchInsideInterval(n,i){for(;i.right-i.left>a.minimalStep;){let u=i.left+(i.right-i.left)/2;u=Math.round(u),n.doWork(u),n.meetsCondition()?i.left=u:i.right=u}return i.left}findInitialLimit(n){let i=n.initialValue;for(n.doWork(i);n.meetsCondition()&&i<=n.maxValue;)i+=n.estimationStep,n.doWork(i);let u=i-n.estimationStep;u=u<n.initialValue?n.initialValue:u;let h=i>n.maxValue?n.maxValue:i;return{left:u,right:h}}},Ms=class{constructor(n,i,u){this.depthConverter=n,this.options=i,this.tissues=u,this.lowestCeiling=0,this.lowestCeiling=this.depthConverter.surfacePressure+1}ceiling(){let n=this.tolerated();return n<this.depthConverter.surfacePressure&&(n=this.depthConverter.surfacePressure),this.depthConverter.fromBar(n)}toleratedTissues(n,i,u,h){let p=this.tissues.compartments,S=0;for(let P=0;P<p.length;P++){let y=p[P],O=S;(n/y.b+y.a-n)*u+n<(i/y.b+y.a-i)*h+i&&(O=(-y.a*y.b*(u*i-h*n)-(1-y.b)*(u-h)*i*n+y.b*(i-n)*y.pTotal)/(-y.a*y.b*(u-h)+(1-y.b)*(h*i-u*n)+y.b*(i-n))),O>=S&&(S=O)}return S}tolerated(){let n=this.options.gfLow,i=this.options.gfHigh,u=this.depthConverter.surfacePressure,h=this.tissues.ceiling(n);return h>this.lowestCeiling&&(this.lowestCeiling=h),this.toleratedTissues(u,this.lowestCeiling,i,n)}},ti=class a{static{this.sixMeters=6}constructor(n){this.options=n,this.averageDepth=0}markAverageDepth(n){let i=n.deepestPart();this.averageDepth=St.averageDepth(i)}ascent(n){let i=this.averageDepth/2;return n>a.sixMeters?n>i?this.options.ascentSpeed50perc:this.options.ascentSpeed50percTo6m:this.options.ascentSpeed6m}},Ue=class a{constructor(n,i,u,h,p){this.gases=n,this.segments=i,this.options=u,this.depthConverter=h,this.ceilings=[],this.tissueOverPressures=[],this.tissuesHistory=[],this.runTime=0,this._oxygenStarted=0,this.collectStatistics=this.noStatistics,this.tissues=Ee.createLoaded(p),this.gradients=new Ms(h,u,this.tissues);let S=i.last();this._currentGas=S.gas,this.bestGasOptions={currentDepth:this.currentDepth,maxDecoPpO2:this.options.maxDecoPpO2,oxygenNarcotic:this.options.oxygenNarcotic,maxEnd:this.options.maxEND,currentGas:this.currentGas},this.speeds=new ti(this.options),this.levels=new Kn(h,u),this.gasSource=new Ls(n,u)}static createWithoutStatistics(n,i,u,h,p){return new a(n,i,u,h,p)}static createForCeilings(n,i,u,h,p){let S=new a(n,i,u,h,p);return S.collectStatistics=S.addCeilingStatistics,S}static createForFullStatistics(n,i,u,h,p){let S=new a(n,i,u,h,p);return S.collectStatistics=S.addFullStatistics,S}get currentGas(){return this._currentGas}get ascentSpeed(){return this.speeds.ascent(this.currentDepth)}get currentDepth(){return this.segments.currentDepth}get addSafetyStop(){return this.levels.addSafetyStop(this.currentDepth,this.segments.maxDepth)}get decoStopDuration(){return this.options.roundStopsToMinutes?k.oneMinute:k.oneSecond}get isAtSurface(){return this.segments.last().endDepth===0}get shouldAddAirBreaks(){return this.isBreathingOxygen&&this.options.airBreaks.enabled}get runTimeOnOxygen(){return this.runTime-this._oxygenStarted}get finalTissues(){return this.tissues.finalState()}get isBreathingOxygen(){return this.currentGas.compositionEquals(Jt.oxygen)}set currentGas(n){n.compositionEquals(Jt.oxygen)&&!this.isBreathingOxygen&&(this._oxygenStarted=this.runTime),this._currentGas=n}markAverageDepth(){this.speeds.markAverageDepth(this.segments)}withoutStatistics(){return this.collectStatistics=this.noStatistics,this}addCeiling(){let n=this.ceiling(),i=new Is(this.runTime,n);this.ceilings.push(i)}ceiling(){return this.gradients.ceiling()}bestDecoGas(){return this.bestGasOptions.currentDepth=this.currentDepth,this.bestGasOptions.currentGas=this.currentGas,this.gasSource.bestGas(this.bestGasOptions)}addStatistics(n){this.collectStatistics(n)}noStatistics(n){}addCeilingStatistics(n){this.addCeiling()}addFullStatistics(n){this.addCeiling(),this.tissuesHistory.push(this.tissues.finalState());let i=this.depthConverter.toBar(n),u=this.tissues.saturationRatio(i);this.tissueOverPressures.push(u)}loadTissues(n,i){return this.tissues.load(n,i)}createMemento(){return{runTime:this.runTime,oxygenStarted:this._oxygenStarted,tissuesHistory:this.tissuesHistory.length,lastTissues:this.finalTissues,ceilings:this.ceilings.length,tissueOverPressures:this.tissueOverPressures.length,segments:this.segments.length,lowestCeiling:this.gradients.lowestCeiling}}restore(n){this.tissuesHistory=this.tissuesHistory.slice(0,n.tissuesHistory),this.tissues.restoreFrom(n.lastTissues),this.gradients.lowestCeiling=n.lowestCeiling,this.runTime=n.runTime,this._oxygenStarted=n.oxygenStarted,this.ceilings=this.ceilings.slice(0,n.ceilings),this.tissueOverPressures=this.tissueOverPressures.slice(0,n.tissueOverPressures);let i=this.segments.length-n.segments;this.segments.cutDown(i)}nextStop(n){return this.levels.nextStop(n)}shouldSwitchTo(n){return n&&!this.currentGas.compositionEquals(n)}addAscentSegment(n,i){return this.segments.add(n,this.currentGas,i)}addGasSwitchSegment(){let n=this.options.gasSwitchDuration*k.oneMinute;return this.addStopSegment(n)}addStopSegment(n){return this.segments.addFlat(this.currentGas,n)}airBreakGas(){return this.gasSource.airBreakGas(this.currentDepth,this.currentGas)}},Ns=class{constructor(n,i){this.context=n,this.remainingStopTime=i,this.maxOxygenTime=this.context.options.airBreaks.oxygenDuration*k.oneMinute,this.maxBottomGasTime=this.context.options.airBreaks.bottomGasDuration*k.oneMinute,this._initialStopDuration=Math.min(this.remainingStopTime,this.remainingOxygenTime)}get needsStop(){return this.remainingStopTime>0}get maxGasTime(){return this.context.isBreathingOxygen?this.maxOxygenTime:this.maxBottomGasTime}get stopDuration(){return this._initialStopDuration>0?this._initialStopDuration:Math.min(this.remainingStopTime,this.maxGasTime)}get remainingOxygenTime(){let n=this.maxOxygenTime-this.context.runTimeOnOxygen;return n>0?n:0}switchStopGas(){if(!(this._initialStopDuration>0)){if(this.context.isBreathingOxygen){this.context.currentGas=this.context.airBreakGas();return}this.context.currentGas=this.context.bestDecoGas()}}subtractStopDuration(){if(this._initialStopDuration>0){this.subtractRemainingStopTime(this._initialStopDuration),this._initialStopDuration=0;return}this.subtractRemainingStopTime(this.stopDuration)}subtractRemainingStopTime(n){this.remainingStopTime-=n}},Oo=(a,n)=>{let i=k.toMinutes(n);return a/i},vn=class{constructor(n,i){this.current=n,this.surfaceInterval=i}},Hs=class{constructor(n,i,u){this.previousTissues=n,this.altitude=i,this.surfaceInterval=u}},Sn=class a{constructor(n,i,u,h){this._segments=n,this._gases=i,this._options=u,this._surface=this.resolveSurfaceParameters(h)}get segments(){return this._segments}get gases(){return this._gases}get options(){return this._options}get surfaceInterval(){return new Hs(this._surface.current,this.options.altitude,this._surface.surfaceInterval)}static forSimpleDive(n,i,u,h){let p=new Xn;p.add(i);let S=new St,P=Oo(n,u.descentSpeed);return S.add(n,i,P),new a(S,p,u,h)}static forMultilevelDive(n,i,u,h){return new a(n,i,u,h)}resolveSurfaceParameters(n){if(n&&Xr.valid(n?.current))return n;let i=Ee.createLoadedAt(this.options.altitude);return new vn(i,Number.POSITIVE_INFINITY)}},Ke=class{noDecoLimit({segments:n,gases:i,options:u,surfaceInterval:h}){let p=new me(u).create(),S=this.applySurfaceInterval(h),P=Ue.createForCeilings(i,n,u,p,S.finalTissues);return this.swimNoDecoLimit(n,i,P)}decompression(n){return this.decompressionInternal(n,Ue.createWithoutStatistics,this.toSimpleProfile,(u,h)=>Ie.fromErrors(u,h))}decompressionStatistics(n){return this.decompressionInternal(n,Ue.createForFullStatistics,this.toFullProfile,(u,h)=>gn.fromStatisticsErrors(u,h))}applySurfaceInterval(n){return this.applySurfaceIntervalInternal(n,Ue.createWithoutStatistics,()=>({finalTissues:Ee.createLoadedAt(n.altitude)}),u=>({finalTissues:u.finalTissues}))}applySurfaceIntervalStatistics(n){return this.applySurfaceIntervalInternal(n,Ue.createForFullStatistics,()=>({finalTissues:Ee.createLoadedAt(n.altitude),tissueOverPressures:[]}),u=>({finalTissues:u.finalTissues,tissueOverPressures:u.tissueOverPressures}))}decompressionInternal(n,i,u,h){let{segments:p,gases:S,options:P,surfaceInterval:y}=n,O=p.copy(),H=this.validate(p,S);if(H.length>0){let Dt=O.mergeFlat(p.length);return h(Dt,H)}let U=this.applySurfaceInterval(y),Q=new me(P).create(),Y=i(S,O,P,Q,U.finalTissues);this.swimPlan(Y),Y.markAverageDepth();let X=Y.nextStop(Y.currentDepth);for(;X>=0&&!Y.isAtSurface;)this.tryGasSwitch(Y),this.stayAtDecoStop(Y,X),this.stayAtSafetyStop(Y),this.ascentToNextStop(Y,X),X=Y.nextStop(X);return u(Y,n)}toFullProfile(n,i){let u=n.segments.mergeFlat(i.segments.length);return gn.fromStatisticsProfile(u,n.ceilings,n.tissueOverPressures,n.finalTissues,n.tissuesHistory)}toSimpleProfile(n,i){let u=n.segments.mergeFlat(i.segments.length);return Ie.fromProfile(u,n.finalTissues)}applySurfaceIntervalInternal({previousTissues:n,altitude:i,surfaceInterval:u},h,p,S){if(!Xr.valid(n))throw Error("Provided tissues collection isn`t valid. It needs have valid items of 16 compartments ordered by halftime.");if(i<0)throw Error("Altitude needs to be positive number or 0.");if(u<0)throw Error("Surface interval needs to be positive number or 0.");if(u===Number.POSITIVE_INFINITY)return p();let P=new St,y=P.addFlat(Jt.air,u),O=new Xn;O.add(Jt.air);let H=new Zn(1,1,1.6,1.6,pn.salt);H.altitude=i;let U=new me(H).create(),Q=h(O,P,H,U,n);return this.swim(Q,y),S(Q)}tryGasSwitch(n){let i=n.bestDecoGas();if(n.shouldSwitchTo(i)){n.currentGas=i;let u=n.addGasSwitchSegment();this.swim(n,u)}}stayAtDecoStop(n,i){if(this.needsDecoStop(n,i)){let u=n.createMemento(),h={estimationStep:k.oneMinute*20,initialValue:0,maxValue:k.oneDay,doWork:y=>this.swimDecoStop(n,u,y),meetsCondition:()=>this.needsDecoStop(n,i)},S=new jr().search(h)+k.oneSecond,P=et.ceilDistance(S,n.decoStopDuration);this.swimDecoStop(n,u,P)}}swimDecoStop(n,i,u){n.restore(i),this.stayAtStop(n,u)}stayAtSafetyStop(n){n.addSafetyStop&&this.stayAtStop(n,k.safetyStopDuration)}stayAtStop(n,i){n.shouldAddAirBreaks?this.swimOxygenStop(n,i):this.swimStopDuration(n,i)}swimOxygenStop(n,i){let u=new Ns(n,i);for(;u.needsStop;)u.switchStopGas(),this.swimStopDuration(n,u.stopDuration),u.subtractStopDuration();n.currentGas=Jt.oxygen}swimStopDuration(n,i){let u=n.addStopSegment(i);this.swim(n,u)}needsDecoStop(n,i){if(i>=n.ceiling())return!1;let u=n.createMemento();this.ascentToNextStop(n,i);let h=i<n.ceiling();return n.restore(u),h}ascentToNextStop(n,i){let u=n.currentDepth-i,h=Oo(u,n.ascentSpeed),p=n.addAscentSegment(i,h);this.swim(n,p)}validate(n,i){let u=Bs.validate(n,i);if(u.length>0)return u;let h=Rs.validate(i);return h.length>0?h:[]}swimPlan(n){let i=n.segments.items;n.addStatistics(i[0].startDepth),i.forEach(u=>{this.swim(n,u)})}swim(n,i){let u=i.startDepth,h=k.oneSecond;for(let p=0;p<i.duration;p+=h){let S=Vt.depthAt(u,i.speed,h),P=new Vt(u,S,i.gas,h);this.swimPart(n,P),u=P.endDepth}}swimPart(n,i){let u=this.toLoadSegment(n.depthConverter,i);n.loadTissues(u,i.gas),n.runTime+=i.duration,n.addStatistics(i.averageDepth)}swimNoDecoLimit(n,i,u){if(this.validate(n,i).length>0)return 0;this.swimPlan(u);let p=this.currentNdl(u.ceilings);return p!==Number.POSITIVE_INFINITY?p:(u=u.withoutStatistics(),this.predictNoDecoLimit(n,u))}predictNoDecoLimit(n,i){let u=n.last(),h=u.endDepth,p=new Vt(h,h,u.gas,k.oneMinute),S=this.toLoadSegment(i.depthConverter,p),P=1;for(;i.ceiling()<=0&&P>0;)P=i.loadTissues(S,u.gas),i.runTime+=k.oneMinute;return P===0||h===0?Number.POSITIVE_INFINITY:this.floorNdl(i.runTime)}floorNdl(n){let i=k.toMinutes(n);return i=et.floor(i),i-1}currentNdl(n){for(let i=0;i<n.length;i+=k.oneMinute){let u=n[i];if(u.notAtSurface)return this.floorNdl(u.time)}return Number.POSITIVE_INFINITY}toLoadSegment(n,i){let u=n.toBar(i.speed)-n.surfacePressure;return{startPressure:n.toBar(i.startDepth),duration:i.duration,speed:u}}},Jn=class a{static createPlan(n,i,u,h){let p=new St,S=a.descentDuration(n,h);p.add(n,u,S);let P=k.toSeconds(i)-S;return P=P<0?0:P,p.addFlat(u,P),p}static descentDuration(n,i){let u=n/i.descentSpeed;return u=et.ceil(u,1),u=k.toSeconds(u),et.ceil(u)}static emergencyAscent(n,i,u,h){let S=St.fromCollection(n).deepestPart(),P=S.length;a.addSolvingSegment(S,i.problemSolvingDuration),a.addUserDefinedAscent(S,n,P);let y=St.fromCollection(S),O=ne.toGases(u),H=new Ke,U=Sn.forMultilevelDive(y,O,i,h),Y=H.decompression(U).segments;return Y.slice(P,Y.length)}static addSolvingSegment(n,i){if(n.length===0)return;let u=i*k.oneMinute,h=n[n.length-1],p=h.endDepth,S=h.tank??h.gas,P=new Vt(p,p,S,u);n.push(P)}static addUserDefinedAscent(n,i,u){for(let h=u;h<i.length;h++){let p=i[h];if(!p.tank)return;n.push(p)}}},ei=class{constructor(){this.remaining=new Map}get(n){return this.remaining.get(n)||0}add(n,i){i=i>0?i:0;let u=this.get(n)+i;this.remaining.set(n,u)}subtract(n,i){let u=this.get(n);i=i>0?i:0;let h=u-i;h=h<0?0:h,this.remaining.set(n,h)}},Fs=class{constructor(n,i){this.options=n,this.bottomTank=i,this.rmvPerSecond=k.toMinutes(n.diver.rmv),this._teamStressRmvPerSecond=k.toMinutes(n.diver.teamStressRmv),this._stressRmvPerSecond=k.toMinutes(n.diver.stressRmv)}stressRmvPerSecond(n){return n.tank===this.bottomTank||n.gas.compositionEquals(this.bottomTank.gas)?this._teamStressRmvPerSecond:this._stressRmvPerSecond}ensureMinimalReserve(n,i){let h=n===this.bottomTank?this.options.primaryTankReserve:this.options.stageTankReserve,p=mn.realVolume2(n.size,h,n.gas);return i<p?p:i}},ni=class a{static{this.defaultPrimaryReserve=30}static{this.defaultStageReserve=20}constructor(n){this.depthConverter=n}static calculateDecompression(n,i,u,h){let p=ne.toGases(i),S=new Ke,P=n.copy(),y=Sn.forMultilevelDive(P,p,u,h);return S.decompression(y)}consumeFromTanks(n,i,u,h,p){if(n.length<2)throw new Error("Profile needs to contain at least 2 segments.");let S=Jn.emergencyAscent(n,i,u,p);this.consumeFromTanks2(n,S,u,h)}consumeFromTanks2(n,i,u,h){if(n.length<2)throw new Error("Profile needs to contain at least 2 segments.");if(i.length<1)throw new Error("Emergency ascent needs to contain at least 1 segment.");ne.resetConsumption(u);let p=i[0]?.tank??u[0],S=new Fs(h,p);this.updateReserve(i,u,S);let P=U=>U.reserveVolume,y=U=>S.rmvPerSecond,O=(U,Q)=>this.consumedBySegment(U,S.rmvPerSecond),H=this.toBeConsumedYet(n,new ei,y,U=>!!U.tank);H=this.consumeBySegmentTank(n,H,P,O),H=this.consumeBySegmentTank(n,H,()=>0,(U,Q)=>Q),H=this.toBeConsumedYet(n,H,y,U=>!U.tank),H=this.consumeByGases(u,H,P),this.consumeByGases(u,H,()=>0)}calculateMaxBottomTime(n,i,u,h,p){let S=this.createTestProfile(n),P=S.last(),y={estimationStep:k.oneMinute*40,initialValue:0,maxValue:k.oneDay,doWork:Q=>{P.duration=Q,this.consumeFromProfile(S,i,u,h,p)},meetsCondition:()=>ne.haveReserve(i)},H=new jr().search(y);if(H===0)return 0;let U=k.toMinutes(n.duration+H);return et.floor(U)}consumeFromProfile(n,i,u,h,p){let S=a.calculateDecompression(n,i,h,p);this.consumeFromTanks(S.segments,h,i,u,p)}createTestProfile(n){let i=n.copy(),u=n.last();return i.addFlat(u.gas,0),i}updateReserve(n,i,u){let h=S=>u.stressRmvPerSecond(S),p=this.toBeConsumedYet(n,new ei,h,()=>!0);for(let S=0;S<=i.length-1;S++){let P=i[S],y=P.gas.contentCode,O=p.get(y);P.reserveVolume=u.ensureMinimalReserve(P,O),p.subtract(y,P.reserveVolume)}}consumeByGases(n,i,u){for(let h=n.length-1;h>=0;h--){let p=n[h],S=p.gas.contentCode,P=i.get(S),y=this.consumeFromTank(p,P,u);i.subtract(S,y)}return i}consumeBySegmentTank(n,i,u,h){return n.forEach(p=>{if(p.tank){let S=p.gas.contentCode,P=i.get(S),y=h(p,P),O=this.consumeFromTank(p.tank,y,u);i.subtract(S,O)}}),i}consumeFromTank(n,i,u){let h=n.endVolume-u(n);h=h>0?h:0;let p=i>h?h:i;return n.consumedVolume+=p,p}toBeConsumedYet(n,i,u,h){for(let p=0;p<n.length;p++){let S=n[p];if(h(S)){let y=S.gas.contentCode,O=u(S),H=this.consumedBySegment(S,O);i.add(y,H)}}return i}consumedBySegment(n,i){let u=this.depthConverter.toBar(n.averageDepth);return et.roundTwoDecimals(n.duration)*u*i}};var ri=class{constructor(n){this.depthConverter=n,this.minimumPpO2=.5}calculateForProfile(n){let i=0;return n.forEach(u=>{let h=u.gas.fO2,p=this.calculate(h,u.startDepth,u.endDepth,u.duration);i+=p}),i}calculate(n,i,u,h){let p=(i+u)/2,S=this.depthConverter.toBar(p),P=n*S;if(P<=this.minimumPpO2)return 0;let y=this.exponentByPpO2(P),O=Math.exp(y);return h*O*100}exponentByPpO2(n){return n<=1.5?-11.7853+1.93873*n:-23.6349+9.80829*n}},fn=class{static{this.imperialTankSize=124.1}static{this.imperialTankWorkPressure=3442}static{this.imperialStageSize=80.1}static{this.imperialStageWorkPressure=3e3}static{this.mertricTankSize=15}static{this.metricStageSize=11.1}},Gs=class{get available(){return[this.primary,this.stage,{name:"2xLP85",size:165,workingPressure:2640},{name:"S40",size:41.3,workingPressure:3e3},{name:"LP85",size:82.5,workingPressure:2640},{name:"HP80",size:84.4,workingPressure:3442},{name:"HP100",size:106.7,workingPressure:3442}]}get primary(){return{name:"HP117",size:fn.imperialTankSize,workingPressure:fn.imperialTankWorkPressure}}get stage(){return{name:"S80",size:fn.imperialStageSize,workingPressure:fn.imperialStageWorkPressure}}};var To=class a{static{this.lastStopDepth=15}static{this.depthDistance=10}static{this.descentSpeed=a.depthDistance*6}static{this.recreSpeed=a.depthDistance*3}static{this.maxEnd=a.depthDistance*10}get tanks(){return new Gs}get lastSpeedLevel(){return 20}get autoStopLevel(){return 33}get stopsDistance(){return a.depthDistance}get recreationalOptions(){return{ascentSpeed50perc:a.recreSpeed,ascentSpeed50percTo6m:a.recreSpeed,ascentSpeed6m:a.recreSpeed,descentSpeed:a.descentSpeed,lastStopDepth:a.lastStopDepth,maxEND:a.maxEnd}}get recommendedOptions(){return{ascentSpeed50perc:a.recreSpeed,ascentSpeed50percTo6m:a.depthDistance*2,ascentSpeed6m:a.depthDistance,descentSpeed:a.descentSpeed,lastStopDepth:a.depthDistance,maxEND:a.maxEnd}}},Dn=class a{static{this.defaultSac=20}constructor(n=a.defaultSac,i){this.rmv=n,this.stressRmv=i||n*1.5}get teamStressRmv(){return this.stressRmv*2}static gasSac(n,i){return n/i}gasSac(n){return a.gasSac(this.rmv,n.size)}loadFrom(n){this.rmv=n.rmv,this.stressRmv=n.stressRmv}};var Qn=class a{constructor(n,i,u){this.gas=n,this.depth=i,this.density=u}static createDefault(){return new a(Jt.air,0,0)}applyHigher(n,i,u){u>this.density&&(this.gas=n,this.density=u,this.depth=i)}},Ws=class{constructor(){this.helium=.179,this.nitrogen=1.251,this.oxygen=1.428}static{this.recommendedMaximum=5.7}forGas(n){return this.forContent(n.fO2,n.fHe)}forContent(n,i){let u=1-n-i,h=this.nitrogen*u,p=this.oxygen*n,S=this.helium*i;return h+p+S}},jn=class{constructor(n){this.depthConverter=n,this.density=new Ws}forProfile(n){let i=Qn.createDefault();return n.forEach(u=>{let h=u.gas,p=this.density.forGas(h);this.applyHigher(i,h,u.startDepth,p),this.applyHigher(i,h,u.endDepth,p)}),i}atDepth(n,i){let u=this.density.forGas(n);return this.fromAtaDensity(u,i)}applyHigher(n,i,u,h){let p=this.fromAtaDensity(h,u);n.applyHigher(i,u,p)}fromAtaDensity(n,i){let u=this.depthConverter.toBar(i);return n*u}};var ii=class{static{this.dailyLimit=300}constructor(n){this.depthConverter=n,this.minPressure=.5}calculateForProfile(n){let i=0;return n.forEach(u=>{let h=u.gas.fO2,p=this.calculate(u.duration,h,u.startDepth,u.endDepth);i+=p}),i}calculate(n,i,u,h){let p=k.toMinutes(n),S=this.depthConverter.toBar(u),P=this.depthConverter.toBar(h),y=S*i,O=P*i;if(y<=this.minPressure&&O<=this.minPressure)return 0;y<=this.minPressure?(p=p*(O-this.minPressure)/(O-y),y=.501):O<=this.minPressure&&(p=p*(y-this.minPressure)/(y-O),O=.501);let H=y+O-1;return Math.pow(H,5/6)*(1-5*Math.pow(O-y,2)/216/Math.pow(H,2))*p}},ks=class{constructor(n,i,u){this.startDepth=n,this.endDepth=i,this.duration=u}get minDepth(){return Math.min(this.startDepth,this.endDepth)}get maxDepth(){return Math.max(this.startDepth,this.endDepth)}get isDescent(){return this.startDepth<this.endDepth}get isStop(){return this.startDepth===this.endDepth}get isAscent(){return this.startDepth>this.endDepth}timeAt(n){let i=Vt.speed(this.startDepth,this.endDepth,this.duration),u=Vt.timeAt(this.startDepth,i,n);return et.round(u)}},Us=class{constructor(n){this.simpleDepths=$e.simple(),this.events=new Yn,this.elapsed=0,this.index=0,this.fixedMnd=!0,this.profile=n.profile,this.options=n.profileOptions,this.startAscentIndex=n.startAscentIndex,this.maxDensity=n.maxDensity,this.exactDepths=new me(this.options).create(),this.levels=new Kn(this.exactDepths,this.options),this.densityAtDepth=new jn(this.exactDepths),this.speeds=new ti(this.options);let i=St.fromCollection(this.profile);this._maxDepth=i.maxDepth,this._totalDuration=i.duration,this.speeds.markAverageDepth(i),this._mndBars=this.simpleDepths.toBar(this.options.maxEND)}get maxDepth(){return this._maxDepth}get totalDuration(){return this._totalDuration}get previous(){return this.index>0?this.profile[this.index-1]:null}get isBeforeDecoAscent(){return this.index<this.startAscentIndex}get maxPpo(){return this.isBeforeDecoAscent?this.options.maxPpO2:this.options.maxDecoPpO2}get current(){return this.profile[this.index]}get switchingGas(){return!!this.previous&&!this.current.gas.compositionEquals(this.previous.gas)}get switchingTank(){return!!this.previous&&!!this.previous.tank&&!!this.current.tank&&this.previous.tank!==this.current.tank}get brokenOxygenDuration(){return this.current.gas.compositionEquals(Jt.oxygen)&&this.current.duration>k.oneMinute*20}get maxMnd(){return this._mndBars}get currentEndTime(){return this.elapsed+this.current.duration}get atSafetyStop(){if(this.index!==this.profile.length-2)return!1;let n=this.current.startDepth;return this.levels.addSafetyStop(n,this.maxDepth)}gasEnd(n){let i=this.current.gas,u=this.options.oxygenNarcotic;return i.end(n,u)}addElapsed(){this.elapsed=this.currentEndTime}},si=class a{static fromProfile(n){let i=new Us(n),u=new zs(i.events,i.current);for(i.index=0;i.index<n.profile.length;i.index++){let h=this.toPressureSegment(i.current,i.simpleDepths);this.addHighPpO2(i,h),this.addLowPpO2(i,h),this.addGasSwitch(i),this.addUserTankSwitch(i),this.addHighDescentSpeed(i),this.addHighAscentSpeed(i),this.addIsobaricCounterDiffusion(i),this.addMndExceeded(i,h),this.addDensityExceeded(i),this.addSafetyStop(i),this.addMissingAirBreak(i,h),u.assignSegment(i.current),a.addBrokenCeiling(u,n.ceilings),i.addElapsed()}return this.addShallowDepth(i),this.addMaximumDepth(i),i.events}static addHighAscentSpeed(n){let i=n.current,u=k.toSeconds(i.speed);if(u=et.roundTwoDecimals(u),-u>n.speeds.ascent(i.startDepth)){let h=st.createHighAscentSpeed(n.elapsed,i.startDepth);n.events.add(h)}}static addHighDescentSpeed(n){let i=n.current;if(k.toSeconds(i.speed)>n.options.descentSpeed){let h=st.createHighDescentSpeed(n.elapsed,i.startDepth);n.events.add(h)}}static addGasSwitch(n){if(n.switchingGas){let i=n.current,u=st.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(u)}}static addUserTankSwitch(n){if(n.switchingTank){let i=n.current,u=st.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(u)}}static toPressureSegment(n,i){let u=i.toBar(n.startDepth),h=i.toBar(n.endDepth);return new ks(u,h,n.duration)}static addHighPpO2(n,i){if(i.isDescent||n.isBeforeDecoAscent&&n.switchingGas){let u=n.current.gas.mod(n.maxPpo);if(i.maxDepth>u){let h=i.startDepth,p=n.elapsed;i.startDepth<u&&(h=u,p+=i.timeAt(h));let S=n.simpleDepths.fromBar(h),P=st.createHighPpO2(p,S);n.events.add(P)}}}static addLowPpO2(n,i){let u=n.current,h=u.gas.ceiling(n.simpleDepths.surfacePressure);if(i.minDepth<h&&n.switchingGas||i.startDepth>h&&h>i.endDepth&&i.isAscent||u.startDepth===0&&i.startDepth<h&&i.isDescent){let S=i.startDepth,P=n.elapsed;i.startDepth>h&&(S=h,P+=i.timeAt(S));let y=n.simpleDepths.fromBar(S),O=st.createLowPpO2(P,y);n.events.add(O)}}static addBrokenCeiling(n,i){for(;n.lastCeilingIndex<n.currentSegmentEndTime&&n.lastCeilingIndex<i.length-1;){let u=i[n.lastCeilingIndex];n.lastCeilingIndex++,this.addNdlEnd(n,u);let h=n.belowCeiling(u);if(!h&&n.fixedBrokenCeiling){let p=st.createBrokenCeiling(u.time,u.depth);n.events.add(p),n.fixedBrokenCeiling=!1;break}if(h&&!n.fixedBrokenCeiling&&(n.fixedBrokenCeiling=!0),u.time>n.currentSegmentEndTime)break}}static addNdlEnd(n,i){if(!n.ndlCeilingMarked&&i.depth>0){n.ndlCeilingMarked=!0;let u=i.time-n.currentSegmentStartTime,h=n.current.depthAt(u),p=st.createNoDecoEnd(i.time,h);n.events.add(p)}}static addIsobaricCounterDiffusion(n){let i=n.current,u=n.previous;if(n.switchingGas&&u){let h=i.gas.fN2-u.gas.fN2,p=i.gas.fHe-u.gas.fHe;if(u.gas.fHe>0&&h*5>-p){let S=st.createIsobaricCounterDiffusion(n.elapsed,i.startDepth,i.gas);n.events.add(S)}}}static addMndExceeded(n,i){let u=n.current,h=n.gasEnd(i.startDepth),p=n.gasEnd(i.endDepth);if(n.maxMnd<h&&n.fixedMnd||n.maxMnd<p&&n.fixedMnd)if(i.startDepth>n.maxMnd)this.addMndEvent(n,n.elapsed,u.startDepth);else{let S={start:i.startDepth,end:i.endDepth},P={start:n.elapsed,end:n.elapsed+u.duration},y=Ze.xValueAtAbsolute(P,S,n.maxMnd),O=u.depthAt(y-n.elapsed);this.addMndEvent(n,y,O)}n.fixedMnd=p<=n.maxMnd}static addMndEvent(n,i,u){let h=n.current.gas,p=st.createMaxEndExceeded(i,u,h);n.events.add(p),n.fixedMnd=!0}static addDensityExceeded(n){let i=n.current,u=i.gas,h=i.startDepth,p=i.endDepth,S=i.endDepth>i.startDepth,P=n.switchingGas,y=n.densityAtDepth.atDepth(u,h),O=n.densityAtDepth.atDepth(u,p);if(P&&y>n.maxDensity||S&&O>n.maxDensity)if(i.startDepth>i.endDepth){let H=st.createHighDensity(n.elapsed,i.startDepth,i.gas);n.events.add(H)}else{let H={start:y,end:O},U={start:n.elapsed,end:n.elapsed+i.duration},Q=Ze.xValueAtAbsolute(U,H,n.maxDensity),Y=i.depthAt(Q-n.elapsed),X=st.createHighDensity(Q,Y,i.gas);n.events.add(X)}}static addSafetyStop(n){let i=n.current;if(n.atSafetyStop&&i.duration>=k.safetyStopDuration){let u=n.elapsed+i.duration-k.safetyStopDuration,h=st.createSafetyStopStart(u,i.endDepth);n.events.add(h)}}static addShallowDepth(n){if(n.maxDepth<9&&n.totalDuration>k.oneHour*5){let i=st.createShallowDepth(n.maxDepth);n.events.add(i)}}static addMaximumDepth(n){if(n.maxDepth>120){let i=st.createMaxDepth(n.maxDepth);n.events.add(i)}}static addMissingAirBreak(n,i){if(n.brokenOxygenDuration&&i.isStop){let u=n.elapsed+n.options.airBreaks.oxygenDuration,h=st.createMissingAirBreak(u,n.current.startDepth);n.events.add(h)}}},zs=class{constructor(n,i){this.events=n,this.lastCeilingIndex=0,this.currentSegmentStartTime=0,this.currentSegmentEndTime=0,this.fixedBrokenCeiling=!0,this.ndlCeilingMarked=!1,this._current=i}get current(){return this._current}assignSegment(n){this.currentSegmentStartTime=this.currentSegmentEndTime,this.currentSegmentEndTime=this.currentSegmentStartTime+n.duration,this._current=n}belowCeiling(n){let i=n.time-this.currentSegmentStartTime;return this._current.depthAt(i)>=n.depth}};var Ao=class a{static{this.psiRate=14.503773773022}static{this.cftRate=28.316846592}static{this.lbRate=2.20462262185}static{this.footRate=.3048}static{this.poundRate=.00220462262}static{this.lbPerCuftRate=a.poundRate*a.cftRate}get name(){return"Imperial"}get lengthShortcut(){return"ft"}get pressureShortcut(){return"psi"}get volumeShortcut(){return"cuft"}get weightShortcut(){return"lb"}get altitudeShortcut(){return"ft.a.s.l"}get densityShortcut(){return"lb/cuft"}toMeters(n){return n*a.footRate}fromMeters(n){return n/a.footRate}toBar(n){return n/a.psiRate}fromBar(n){return n*a.psiRate}toLiter(n){return n*a.cftRate}fromLiter(n){return n/a.cftRate}fromTankLiters(n,i){return this.fromLiter(n)*i}toTankLiters(n,i){return this.toLiter(n)/i}fromGramPerLiter(n){return n*a.lbPerCuftRate}toGramPerLiter(n){return n/a.lbPerCuftRate}fromKilogram(n){return n*a.lbRate}toKilogram(n){return n/a.lbRate}},Co=class a{static{this.airDensity=1.225}static tankVolumeWeight(n){let i=n.consumedVolume;return a.volumeWeight(i)}static volumeWeight(n){return n*a.airDensity/1e3}};var tr=yo(bs());var at=class a{static toTanks(n){let i=[];return n.forEach(u=>{let h=new mn(u.size,u.startPressure,0);h.id=u.id,h.gas.fO2=u.gas.fO2,h.gas.fHe=u.gas.fHe,h.startPressure=u.startPressure,i.push(h)}),ne.renumberIds(i),i}static fromTanks(n){let i=[];return n.forEach(u=>{let h=u.tank,p={id:h.id,size:h.size,workPressure:u.workingPressureBars,startPressure:h.startPressure,gas:a.fromGas(h.gas)};i.push(p)}),i}static toConsumed(n){let i=[];for(let u=0;u<n.length;u++){let h=n[u],p={id:h.id,consumed:h.consumed,reserve:h.reserve};i.push(p)}return i}static toSegments(n,i){let u=[];for(let h=0;h<n.length;h++){let p=n[h],S=a.toGas(p.gas),P=new Vt(p.startDepth,p.endDepth,S,p.duration);if(p.tankId>0&&p.tankId<=i.length){let y=p.tankId-1;P.tank=i[y]}u.push(P)}return u}static fromSegments(n){let i=[];return n.forEach(u=>{let h=u.tank?u.tank.id:0,p={startDepth:u.startDepth,endDepth:u.endDepth,duration:u.duration,tankId:h,gas:a.fromGas(u.gas)};i.push(p)}),i}static toProfile(n,i){let u=a.toSegments(n.segments,i);if(n.errors.length>0){let p=a.toEvents(n.errors);return gn.fromStatisticsErrors(u,p.items)}let h=a.toTissues(n.finalTissues);return Ie.fromProfile(u,h)}static fromProfile(n){return{segments:a.fromSegments(n.segments),finalTissues:a.fromTissues(n.finalTissues),errors:a.fromEvents(n.errors)}}static toTissues(n){return(0,tr.default)(n).map(i=>({pN2:i.pN2,pHe:i.pHe})).value()}static toTissuesHistory(n){return(0,tr.default)(n).map(i=>a.toTissues(i)).value()}static fromTissues(n){return(0,tr.default)(n).map(i=>({pN2:i.pN2,pHe:i.pHe})).value()}static fromTissuesHistory(n){return(0,tr.default)(n).map(i=>a.fromTissues(i)).value()}static toEvents(n){let i=new Yn;return n.forEach(u=>{let h=ht.create(u.type,u.timeStamp,u.depth);h.message=u.message,u.gas&&(h.gas=a.toGas(u.gas)),i.add(h)}),i}static fromEvents(n){let i=[];return n.forEach(u=>{let h={timeStamp:u.timeStamp,depth:u.depth,type:u.type,message:u.message};u.gas&&(h.gas=a.fromGas(u.gas)),i.push(h)}),i}static fromDiver(n){return{rmv:n.rmv,stressRmv:n.stressRmv}}static toDiver(n){return new Dn(n.rmv,n.stressRmv)}static fromOptions(n){return{gfLow:n.gfLow,gfHigh:n.gfHigh,maxPpO2:n.maxPpO2,maxDecoPpO2:n.maxDecoPpO2,salinity:n.salinity,altitude:n.altitude,roundStopsToMinutes:n.roundStopsToMinutes,gasSwitchDuration:n.gasSwitchDuration,safetyStop:n.safetyStop,lastStopDepth:n.lastStopDepth,decoStopDistance:n.decoStopDistance,minimumAutoStopDepth:n.minimumAutoStopDepth,maxEND:n.maxEND,oxygenNarcotic:n.oxygenNarcotic,ascentSpeed6m:n.ascentSpeed6m,ascentSpeed50percTo6m:n.ascentSpeed50percTo6m,ascentSpeed50perc:n.ascentSpeed50perc,descentSpeed:n.descentSpeed,problemSolvingDuration:n.problemSolvingDuration,airBreaks:a.fromAirBreaks(n.airBreaks)}}static toOptions(n){let i=new Zn(n.gfLow,n.gfHigh,n.maxPpO2,n.maxDecoPpO2,n.salinity);return i.altitude=n.altitude,i.roundStopsToMinutes=n.roundStopsToMinutes,i.gasSwitchDuration=n.gasSwitchDuration,i.safetyStop=n.safetyStop,i.lastStopDepth=n.lastStopDepth,i.decoStopDistance=n.decoStopDistance,i.minimumAutoStopDepth=n.minimumAutoStopDepth,i.maxEND=n.maxEND,i.oxygenNarcotic=n.oxygenNarcotic,i.ascentSpeed6m=n.ascentSpeed6m,i.ascentSpeed50percTo6m=n.ascentSpeed50percTo6m,i.ascentSpeed50perc=n.ascentSpeed50perc,i.descentSpeed=n.descentSpeed,i.problemSolvingDuration=n.problemSolvingDuration,a.toAirBreaks(i.airBreaks,n.airBreaks),i}static fromDensity(n){return{gas:a.fromGas(n.gas),depth:n.depth,density:n.density}}static toDensity(n){let i=a.toGas(n.gas);return new Qn(i,n.depth,n.density)}static toGas(n){return new lt(n.fO2,n.fHe)}static fromGas(n){return{fO2:n.fO2,fHe:n.fHe}}static fromAirBreaks(n){return{enabled:n.enabled,oxygenDuration:n.oxygenDuration,bottomGasDuration:n.bottomGasDuration}}static toAirBreaks(n,i){i&&(n.enabled=i.enabled,n.oxygenDuration=i.oxygenDuration,n.bottomGasDuration=i.bottomGasDuration)}};var ai=class a{static calculateDecompression(n){let i=at.toTanks(n.tanks),u=this.profileParametersFromTask(n,i),p=new Ke().decompression(u),S=at.fromProfile(p);return{diveId:n.diveId,profile:S}}static diveInfo(n){let i=at.toTanks(n.tanks),u=this.profileParametersFromTask(n,i),h=new Ke,p=h.decompressionStatistics(u),S=h.noDecoLimit(u),P=new me(n.options).create(),y=at.toSegments(n.calculatedProfile,i),O=new ii(P).calculateForProfile(y),H=new ri(P).calculateForProfile(y),U=new jn(P).forProfile(y),Q=St.averageDepth(y),Y={maxDensity:n.eventOptions.maxDensity,startAscentIndex:u.segments.startAscentIndex,profile:y,ceilings:p.ceilings,profileOptions:u.options},X=si.fromProfile(Y),Dt=at.fromEvents(X.items),re=new dn,Mt=at.toTissues(n.calculatedTissues),ve=re.surfaceGradient(Mt,P.surfacePressure),Ot=re.offgasingStart(p.tissues),Se=St.depthAt(y,Ot);return{diveId:n.diveId,noDeco:S,otu:O,cns:H,density:at.fromDensity(U),averageDepth:Q,events:Dt,surfaceGradient:ve,offgasingStartTime:Ot,offgasingStartDepth:Se,ceilings:p.ceilings,tissues:at.fromTissuesHistory(p.tissues),tissueOverPressures:p.tissueOverPressures}}static calculateConsumption(n){let i=new me(n.options).create(),u=new ni(i),h=at.toTanks(n.tanks),p=at.toSegments(n.profile,h),S=at.toSegments(n.plan,h),P=n.consumptionOptions.diver,y=new Dn(P.rmv,P.stressRmv),O=at.toOptions(n.options),H=a.selectConsumptionPlan(S,n.isComplex),U={diver:y,primaryTankReserve:n.consumptionOptions.primaryTankReserve,stageTankReserve:n.consumptionOptions.stageTankReserve},Q=at.toTissues(n.previousTissues),Y=new vn(Q,n.surfaceInterval),X=u.calculateMaxBottomTime(H,h,U,O,Y),Dt=Jn.emergencyAscent(p,O,h,Y),re=St.duration(Dt);return re=k.toMinutes(re),u.consumeFromTanks2(p,Dt,h,U),{diveId:n.diveId,maxTime:X,timeToSurface:re,tanks:at.toConsumed(h),emergencyAscent:at.fromSegments(Dt)}}static selectConsumptionPlan(n,i){if(i)return St.fromCollection(n);let u=n.slice(0,1);return St.fromCollection(u)}static profileParametersFromTask(n,i){let u=ne.toGases(i),h=at.toSegments(n.plan,i),p=St.fromCollection(h),S=at.toOptions(n.options),P=at.toTissues(n.previousTissues),y=new vn(P,n.surfaceInterval);return Sn.forMultilevelDive(p,u,S,y)}};addEventListener("message",({data:a})=>{let n=ai.diveInfo(a);postMessage(n)});
