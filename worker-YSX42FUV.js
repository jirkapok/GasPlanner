var ym=Object.create;var wo=Object.defineProperty;var Tm=Object.getOwnPropertyDescriptor;var Pm=Object.getOwnPropertyNames;var Am=Object.getPrototypeOf,Cm=Object.prototype.hasOwnProperty;var Om=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports);var bm=(a,n,i,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let h of Pm(n))!Cm.call(a,h)&&h!==i&&wo(a,h,{get:()=>n[h],enumerable:!(u=Tm(n,h))||u.enumerable});return a};var xo=(a,n,i)=>(i=a!=null?ym(Am(a)):{},bm(n||!a||!a.__esModule?wo(i,"default",{value:a,enumerable:!0}):i,a));var Cs=Om((cn,Un)=>{"use strict";(function(){var a,n="4.17.21",i=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",p="Invalid `variable` option passed into `_.template`",S="__lodash_hash_undefined__",y=500,T="__lodash_placeholder__",O=1,K=2,X=4,nt=1,J=2,Z=1,$t=2,Sn=4,Bt=8,ge=16,Ct=32,me=64,ne=128,Dn=256,si=512,Co=30,Oo="...",bo=800,Eo=16,Us=1,Io=2,Ro=3,Ie=1/0,ve=9007199254740991,Lo=17976931348623157e292,tr=NaN,Qt=4294967295,Bo=Qt-1,Mo=Qt>>>1,No=[["ary",ne],["bind",Z],["bindKey",$t],["curry",Bt],["curryRight",ge],["flip",si],["partial",Ct],["partialRight",me],["rearg",Dn]],Ze="[object Arguments]",er="[object Array]",Ho="[object AsyncFunction]",_n="[object Boolean]",wn="[object Date]",Fo="[object DOMException]",nr="[object Error]",rr="[object Function]",zs="[object GeneratorFunction]",Yt="[object Map]",xn="[object Number]",Go="[object Null]",re="[object Object]",Ks="[object Promise]",Wo="[object Proxy]",yn="[object RegExp]",Zt="[object Set]",Tn="[object String]",ir="[object Symbol]",ko="[object Undefined]",Pn="[object WeakMap]",Uo="[object WeakSet]",An="[object ArrayBuffer]",qe="[object DataView]",ai="[object Float32Array]",ui="[object Float64Array]",oi="[object Int8Array]",ci="[object Int16Array]",hi="[object Int32Array]",fi="[object Uint8Array]",li="[object Uint8ClampedArray]",pi="[object Uint16Array]",di="[object Uint32Array]",zo=/\b__p \+= '';/g,Ko=/\b(__p \+=) '' \+/g,$o=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$s=/&(?:amp|lt|gt|quot|#39);/g,Ys=/[&<>"']/g,Yo=RegExp($s.source),Zo=RegExp(Ys.source),qo=/<%-([\s\S]+?)%>/g,Vo=/<%([\s\S]+?)%>/g,Zs=/<%=([\s\S]+?)%>/g,Xo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jo=/^\w*$/,Qo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gi=/[\\^$.*+?()[\]{}|]/g,jo=RegExp(gi.source),mi=/^\s+/,tc=/\s/,ec=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nc=/\{\n\/\* \[wrapped with (.+)\] \*/,rc=/,? & /,ic=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sc=/[()=,{}\[\]\/\s]/,ac=/\\(\\)?/g,uc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qs=/\w*$/,oc=/^[-+]0x[0-9a-f]+$/i,cc=/^0b[01]+$/i,hc=/^\[object .+?Constructor\]$/,fc=/^0o[0-7]+$/i,lc=/^(?:0|[1-9]\d*)$/,pc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sr=/($^)/,dc=/['\n\r\u2028\u2029\\]/g,ar="\\ud800-\\udfff",gc="\\u0300-\\u036f",mc="\\ufe20-\\ufe2f",vc="\\u20d0-\\u20ff",Vs=gc+mc+vc,Xs="\\u2700-\\u27bf",Js="a-z\\xdf-\\xf6\\xf8-\\xff",Sc="\\xac\\xb1\\xd7\\xf7",Dc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_c="\\u2000-\\u206f",wc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qs="A-Z\\xc0-\\xd6\\xd8-\\xde",js="\\ufe0e\\ufe0f",ta=Sc+Dc+_c+wc,vi="['\u2019]",xc="["+ar+"]",ea="["+ta+"]",ur="["+Vs+"]",na="\\d+",yc="["+Xs+"]",ra="["+Js+"]",ia="[^"+ar+ta+na+Xs+Js+Qs+"]",Si="\\ud83c[\\udffb-\\udfff]",Tc="(?:"+ur+"|"+Si+")",sa="[^"+ar+"]",Di="(?:\\ud83c[\\udde6-\\uddff]){2}",_i="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Qs+"]",aa="\\u200d",ua="(?:"+ra+"|"+ia+")",Pc="(?:"+Ve+"|"+ia+")",oa="(?:"+vi+"(?:d|ll|m|re|s|t|ve))?",ca="(?:"+vi+"(?:D|LL|M|RE|S|T|VE))?",ha=Tc+"?",fa="["+js+"]?",Ac="(?:"+aa+"(?:"+[sa,Di,_i].join("|")+")"+fa+ha+")*",Cc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Oc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",la=fa+ha+Ac,bc="(?:"+[yc,Di,_i].join("|")+")"+la,Ec="(?:"+[sa+ur+"?",ur,Di,_i,xc].join("|")+")",Ic=RegExp(vi,"g"),Rc=RegExp(ur,"g"),wi=RegExp(Si+"(?="+Si+")|"+Ec+la,"g"),Lc=RegExp([Ve+"?"+ra+"+"+oa+"(?="+[ea,Ve,"$"].join("|")+")",Pc+"+"+ca+"(?="+[ea,Ve+ua,"$"].join("|")+")",Ve+"?"+ua+"+"+oa,Ve+"+"+ca,Oc,Cc,na,bc].join("|"),"g"),Bc=RegExp("["+aa+ar+Vs+js+"]"),Mc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Nc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hc=-1,V={};V[ai]=V[ui]=V[oi]=V[ci]=V[hi]=V[fi]=V[li]=V[pi]=V[di]=!0,V[Ze]=V[er]=V[An]=V[_n]=V[qe]=V[wn]=V[nr]=V[rr]=V[Yt]=V[xn]=V[re]=V[yn]=V[Zt]=V[Tn]=V[Pn]=!1;var q={};q[Ze]=q[er]=q[An]=q[qe]=q[_n]=q[wn]=q[ai]=q[ui]=q[oi]=q[ci]=q[hi]=q[Yt]=q[xn]=q[re]=q[yn]=q[Zt]=q[Tn]=q[ir]=q[fi]=q[li]=q[pi]=q[di]=!0,q[nr]=q[rr]=q[Pn]=!1;var Fc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Gc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Uc=parseFloat,zc=parseInt,pa=typeof global=="object"&&global&&global.Object===Object&&global,Kc=typeof self=="object"&&self&&self.Object===Object&&self,lt=pa||Kc||Function("return this")(),xi=typeof cn=="object"&&cn&&!cn.nodeType&&cn,Re=xi&&typeof Un=="object"&&Un&&!Un.nodeType&&Un,da=Re&&Re.exports===xi,yi=da&&pa.process,Mt=function(){try{var g=Re&&Re.require&&Re.require("util").types;return g||yi&&yi.binding&&yi.binding("util")}catch{}}(),ga=Mt&&Mt.isArrayBuffer,ma=Mt&&Mt.isDate,va=Mt&&Mt.isMap,Sa=Mt&&Mt.isRegExp,Da=Mt&&Mt.isSet,_a=Mt&&Mt.isTypedArray;function Ot(g,D,v){switch(v.length){case 0:return g.call(D);case 1:return g.call(D,v[0]);case 2:return g.call(D,v[0],v[1]);case 3:return g.call(D,v[0],v[1],v[2])}return g.apply(D,v)}function $c(g,D,v,A){for(var R=-1,k=g==null?0:g.length;++R<k;){var ut=g[R];D(A,ut,v(ut),g)}return A}function Nt(g,D){for(var v=-1,A=g==null?0:g.length;++v<A&&D(g[v],v,g)!==!1;);return g}function Yc(g,D){for(var v=g==null?0:g.length;v--&&D(g[v],v,g)!==!1;);return g}function wa(g,D){for(var v=-1,A=g==null?0:g.length;++v<A;)if(!D(g[v],v,g))return!1;return!0}function Se(g,D){for(var v=-1,A=g==null?0:g.length,R=0,k=[];++v<A;){var ut=g[v];D(ut,v,g)&&(k[R++]=ut)}return k}function or(g,D){var v=g==null?0:g.length;return!!v&&Xe(g,D,0)>-1}function Ti(g,D,v){for(var A=-1,R=g==null?0:g.length;++A<R;)if(v(D,g[A]))return!0;return!1}function Q(g,D){for(var v=-1,A=g==null?0:g.length,R=Array(A);++v<A;)R[v]=D(g[v],v,g);return R}function De(g,D){for(var v=-1,A=D.length,R=g.length;++v<A;)g[R+v]=D[v];return g}function Pi(g,D,v,A){var R=-1,k=g==null?0:g.length;for(A&&k&&(v=g[++R]);++R<k;)v=D(v,g[R],R,g);return v}function Zc(g,D,v,A){var R=g==null?0:g.length;for(A&&R&&(v=g[--R]);R--;)v=D(v,g[R],R,g);return v}function Ai(g,D){for(var v=-1,A=g==null?0:g.length;++v<A;)if(D(g[v],v,g))return!0;return!1}var qc=Ci("length");function Vc(g){return g.split("")}function Xc(g){return g.match(ic)||[]}function xa(g,D,v){var A;return v(g,function(R,k,ut){if(D(R,k,ut))return A=k,!1}),A}function cr(g,D,v,A){for(var R=g.length,k=v+(A?1:-1);A?k--:++k<R;)if(D(g[k],k,g))return k;return-1}function Xe(g,D,v){return D===D?oh(g,D,v):cr(g,ya,v)}function Jc(g,D,v,A){for(var R=v-1,k=g.length;++R<k;)if(A(g[R],D))return R;return-1}function ya(g){return g!==g}function Ta(g,D){var v=g==null?0:g.length;return v?bi(g,D)/v:tr}function Ci(g){return function(D){return D==null?a:D[g]}}function Oi(g){return function(D){return g==null?a:g[D]}}function Pa(g,D,v,A,R){return R(g,function(k,ut,$){v=A?(A=!1,k):D(v,k,ut,$)}),v}function Qc(g,D){var v=g.length;for(g.sort(D);v--;)g[v]=g[v].value;return g}function bi(g,D){for(var v,A=-1,R=g.length;++A<R;){var k=D(g[A]);k!==a&&(v=v===a?k:v+k)}return v}function Ei(g,D){for(var v=-1,A=Array(g);++v<g;)A[v]=D(v);return A}function jc(g,D){return Q(D,function(v){return[v,g[v]]})}function Aa(g){return g&&g.slice(0,Ea(g)+1).replace(mi,"")}function bt(g){return function(D){return g(D)}}function Ii(g,D){return Q(D,function(v){return g[v]})}function Cn(g,D){return g.has(D)}function Ca(g,D){for(var v=-1,A=g.length;++v<A&&Xe(D,g[v],0)>-1;);return v}function Oa(g,D){for(var v=g.length;v--&&Xe(D,g[v],0)>-1;);return v}function th(g,D){for(var v=g.length,A=0;v--;)g[v]===D&&++A;return A}var eh=Oi(Fc),nh=Oi(Gc);function rh(g){return"\\"+kc[g]}function ih(g,D){return g==null?a:g[D]}function Je(g){return Bc.test(g)}function sh(g){return Mc.test(g)}function ah(g){for(var D,v=[];!(D=g.next()).done;)v.push(D.value);return v}function Ri(g){var D=-1,v=Array(g.size);return g.forEach(function(A,R){v[++D]=[R,A]}),v}function ba(g,D){return function(v){return g(D(v))}}function _e(g,D){for(var v=-1,A=g.length,R=0,k=[];++v<A;){var ut=g[v];(ut===D||ut===T)&&(g[v]=T,k[R++]=v)}return k}function hr(g){var D=-1,v=Array(g.size);return g.forEach(function(A){v[++D]=A}),v}function uh(g){var D=-1,v=Array(g.size);return g.forEach(function(A){v[++D]=[A,A]}),v}function oh(g,D,v){for(var A=v-1,R=g.length;++A<R;)if(g[A]===D)return A;return-1}function ch(g,D,v){for(var A=v+1;A--;)if(g[A]===D)return A;return A}function Qe(g){return Je(g)?fh(g):qc(g)}function qt(g){return Je(g)?lh(g):Vc(g)}function Ea(g){for(var D=g.length;D--&&tc.test(g.charAt(D)););return D}var hh=Oi(Wc);function fh(g){for(var D=wi.lastIndex=0;wi.test(g);)++D;return D}function lh(g){return g.match(wi)||[]}function ph(g){return g.match(Lc)||[]}var dh=function g(D){D=D==null?lt:we.defaults(lt.Object(),D,we.pick(lt,Nc));var v=D.Array,A=D.Date,R=D.Error,k=D.Function,ut=D.Math,$=D.Object,Li=D.RegExp,gh=D.String,Ht=D.TypeError,fr=v.prototype,mh=k.prototype,je=$.prototype,lr=D["__core-js_shared__"],pr=mh.toString,z=je.hasOwnProperty,vh=0,Ia=function(){var t=/[^.]+$/.exec(lr&&lr.keys&&lr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),dr=je.toString,Sh=pr.call($),Dh=lt._,_h=Li("^"+pr.call(z).replace(gi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gr=da?D.Buffer:a,xe=D.Symbol,mr=D.Uint8Array,Ra=gr?gr.allocUnsafe:a,vr=ba($.getPrototypeOf,$),La=$.create,Ba=je.propertyIsEnumerable,Sr=fr.splice,Ma=xe?xe.isConcatSpreadable:a,On=xe?xe.iterator:a,Le=xe?xe.toStringTag:a,Dr=function(){try{var t=Fe($,"defineProperty");return t({},"",{}),t}catch{}}(),wh=D.clearTimeout!==lt.clearTimeout&&D.clearTimeout,xh=A&&A.now!==lt.Date.now&&A.now,yh=D.setTimeout!==lt.setTimeout&&D.setTimeout,_r=ut.ceil,wr=ut.floor,Bi=$.getOwnPropertySymbols,Th=gr?gr.isBuffer:a,Na=D.isFinite,Ph=fr.join,Ah=ba($.keys,$),ot=ut.max,mt=ut.min,Ch=A.now,Oh=D.parseInt,Ha=ut.random,bh=fr.reverse,Mi=Fe(D,"DataView"),bn=Fe(D,"Map"),Ni=Fe(D,"Promise"),tn=Fe(D,"Set"),En=Fe(D,"WeakMap"),In=Fe($,"create"),xr=En&&new En,en={},Eh=Ge(Mi),Ih=Ge(bn),Rh=Ge(Ni),Lh=Ge(tn),Bh=Ge(En),yr=xe?xe.prototype:a,Rn=yr?yr.valueOf:a,Fa=yr?yr.toString:a;function c(t){if(tt(t)&&!L(t)&&!(t instanceof F)){if(t instanceof Ft)return t;if(z.call(t,"__wrapped__"))return Gu(t)}return new Ft(t)}var nn=function(){function t(){}return function(e){if(!j(e))return{};if(La)return La(e);t.prototype=e;var r=new t;return t.prototype=a,r}}();function Tr(){}function Ft(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}c.templateSettings={escape:qo,evaluate:Vo,interpolate:Zs,variable:"",imports:{_:c}},c.prototype=Tr.prototype,c.prototype.constructor=c,Ft.prototype=nn(Tr.prototype),Ft.prototype.constructor=Ft;function F(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qt,this.__views__=[]}function Mh(){var t=new F(this.__wrapped__);return t.__actions__=yt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=yt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=yt(this.__views__),t}function Nh(){if(this.__filtered__){var t=new F(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Hh(){var t=this.__wrapped__.value(),e=this.__dir__,r=L(t),s=e<0,o=r?t.length:0,f=Xf(0,o,this.__views__),l=f.start,d=f.end,m=d-l,_=s?d:l-1,w=this.__iteratees__,x=w.length,P=0,C=mt(m,this.__takeCount__);if(!r||!s&&o==m&&C==m)return ou(t,this.__actions__);var E=[];t:for(;m--&&P<C;){_+=e;for(var M=-1,I=t[_];++M<x;){var H=w[M],G=H.iteratee,Rt=H.type,wt=G(I);if(Rt==Io)I=wt;else if(!wt){if(Rt==Us)continue t;break t}}E[P++]=I}return E}F.prototype=nn(Tr.prototype),F.prototype.constructor=F;function Be(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function Fh(){this.__data__=In?In(null):{},this.size=0}function Gh(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Wh(t){var e=this.__data__;if(In){var r=e[t];return r===S?a:r}return z.call(e,t)?e[t]:a}function kh(t){var e=this.__data__;return In?e[t]!==a:z.call(e,t)}function Uh(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=In&&e===a?S:e,this}Be.prototype.clear=Fh,Be.prototype.delete=Gh,Be.prototype.get=Wh,Be.prototype.has=kh,Be.prototype.set=Uh;function ie(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function zh(){this.__data__=[],this.size=0}function Kh(t){var e=this.__data__,r=Pr(e,t);if(r<0)return!1;var s=e.length-1;return r==s?e.pop():Sr.call(e,r,1),--this.size,!0}function $h(t){var e=this.__data__,r=Pr(e,t);return r<0?a:e[r][1]}function Yh(t){return Pr(this.__data__,t)>-1}function Zh(t,e){var r=this.__data__,s=Pr(r,t);return s<0?(++this.size,r.push([t,e])):r[s][1]=e,this}ie.prototype.clear=zh,ie.prototype.delete=Kh,ie.prototype.get=$h,ie.prototype.has=Yh,ie.prototype.set=Zh;function se(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function qh(){this.size=0,this.__data__={hash:new Be,map:new(bn||ie),string:new Be}}function Vh(t){var e=Hr(this,t).delete(t);return this.size-=e?1:0,e}function Xh(t){return Hr(this,t).get(t)}function Jh(t){return Hr(this,t).has(t)}function Qh(t,e){var r=Hr(this,t),s=r.size;return r.set(t,e),this.size+=r.size==s?0:1,this}se.prototype.clear=qh,se.prototype.delete=Vh,se.prototype.get=Xh,se.prototype.has=Jh,se.prototype.set=Qh;function Me(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new se;++e<r;)this.add(t[e])}function jh(t){return this.__data__.set(t,S),this}function tf(t){return this.__data__.has(t)}Me.prototype.add=Me.prototype.push=jh,Me.prototype.has=tf;function Vt(t){var e=this.__data__=new ie(t);this.size=e.size}function ef(){this.__data__=new ie,this.size=0}function nf(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function rf(t){return this.__data__.get(t)}function sf(t){return this.__data__.has(t)}function af(t,e){var r=this.__data__;if(r instanceof ie){var s=r.__data__;if(!bn||s.length<i-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new se(s)}return r.set(t,e),this.size=r.size,this}Vt.prototype.clear=ef,Vt.prototype.delete=nf,Vt.prototype.get=rf,Vt.prototype.has=sf,Vt.prototype.set=af;function Ga(t,e){var r=L(t),s=!r&&We(t),o=!r&&!s&&Ce(t),f=!r&&!s&&!o&&un(t),l=r||s||o||f,d=l?Ei(t.length,gh):[],m=d.length;for(var _ in t)(e||z.call(t,_))&&!(l&&(_=="length"||o&&(_=="offset"||_=="parent")||f&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||ce(_,m)))&&d.push(_);return d}function Wa(t){var e=t.length;return e?t[Zi(0,e-1)]:a}function uf(t,e){return Fr(yt(t),Ne(e,0,t.length))}function of(t){return Fr(yt(t))}function Hi(t,e,r){(r!==a&&!Xt(t[e],r)||r===a&&!(e in t))&&ae(t,e,r)}function Ln(t,e,r){var s=t[e];(!(z.call(t,e)&&Xt(s,r))||r===a&&!(e in t))&&ae(t,e,r)}function Pr(t,e){for(var r=t.length;r--;)if(Xt(t[r][0],e))return r;return-1}function cf(t,e,r,s){return ye(t,function(o,f,l){e(s,o,r(o),l)}),s}function ka(t,e){return t&&te(e,pt(e),t)}function hf(t,e){return t&&te(e,Pt(e),t)}function ae(t,e,r){e=="__proto__"&&Dr?Dr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Fi(t,e){for(var r=-1,s=e.length,o=v(s),f=t==null;++r<s;)o[r]=f?a:Ss(t,e[r]);return o}function Ne(t,e,r){return t===t&&(r!==a&&(t=t<=r?t:r),e!==a&&(t=t>=e?t:e)),t}function Gt(t,e,r,s,o,f){var l,d=e&O,m=e&K,_=e&X;if(r&&(l=o?r(t,s,o,f):r(t)),l!==a)return l;if(!j(t))return t;var w=L(t);if(w){if(l=Qf(t),!d)return yt(t,l)}else{var x=vt(t),P=x==rr||x==zs;if(Ce(t))return fu(t,d);if(x==re||x==Ze||P&&!o){if(l=m||P?{}:Eu(t),!d)return m?kf(t,hf(l,t)):Wf(t,ka(l,t))}else{if(!q[x])return o?t:{};l=jf(t,x,d)}}f||(f=new Vt);var C=f.get(t);if(C)return C;f.set(t,l),so(t)?t.forEach(function(I){l.add(Gt(I,e,r,I,t,f))}):ro(t)&&t.forEach(function(I,H){l.set(H,Gt(I,e,r,H,t,f))});var E=_?m?is:rs:m?Pt:pt,M=w?a:E(t);return Nt(M||t,function(I,H){M&&(H=I,I=t[H]),Ln(l,H,Gt(I,e,r,H,t,f))}),l}function ff(t){var e=pt(t);return function(r){return Ua(r,t,e)}}function Ua(t,e,r){var s=r.length;if(t==null)return!s;for(t=$(t);s--;){var o=r[s],f=e[o],l=t[o];if(l===a&&!(o in t)||!f(l))return!1}return!0}function za(t,e,r){if(typeof t!="function")throw new Ht(h);return Wn(function(){t.apply(a,r)},e)}function Bn(t,e,r,s){var o=-1,f=or,l=!0,d=t.length,m=[],_=e.length;if(!d)return m;r&&(e=Q(e,bt(r))),s?(f=Ti,l=!1):e.length>=i&&(f=Cn,l=!1,e=new Me(e));t:for(;++o<d;){var w=t[o],x=r==null?w:r(w);if(w=s||w!==0?w:0,l&&x===x){for(var P=_;P--;)if(e[P]===x)continue t;m.push(w)}else f(e,x,s)||m.push(w)}return m}var ye=mu(jt),Ka=mu(Wi,!0);function lf(t,e){var r=!0;return ye(t,function(s,o,f){return r=!!e(s,o,f),r}),r}function Ar(t,e,r){for(var s=-1,o=t.length;++s<o;){var f=t[s],l=e(f);if(l!=null&&(d===a?l===l&&!It(l):r(l,d)))var d=l,m=f}return m}function pf(t,e,r,s){var o=t.length;for(r=B(r),r<0&&(r=-r>o?0:o+r),s=s===a||s>o?o:B(s),s<0&&(s+=o),s=r>s?0:uo(s);r<s;)t[r++]=e;return t}function $a(t,e){var r=[];return ye(t,function(s,o,f){e(s,o,f)&&r.push(s)}),r}function dt(t,e,r,s,o){var f=-1,l=t.length;for(r||(r=el),o||(o=[]);++f<l;){var d=t[f];e>0&&r(d)?e>1?dt(d,e-1,r,s,o):De(o,d):s||(o[o.length]=d)}return o}var Gi=vu(),Ya=vu(!0);function jt(t,e){return t&&Gi(t,e,pt)}function Wi(t,e){return t&&Ya(t,e,pt)}function Cr(t,e){return Se(e,function(r){return he(t[r])})}function He(t,e){e=Pe(e,t);for(var r=0,s=e.length;t!=null&&r<s;)t=t[ee(e[r++])];return r&&r==s?t:a}function Za(t,e,r){var s=e(t);return L(t)?s:De(s,r(t))}function Dt(t){return t==null?t===a?ko:Go:Le&&Le in $(t)?Vf(t):ol(t)}function ki(t,e){return t>e}function df(t,e){return t!=null&&z.call(t,e)}function gf(t,e){return t!=null&&e in $(t)}function mf(t,e,r){return t>=mt(e,r)&&t<ot(e,r)}function Ui(t,e,r){for(var s=r?Ti:or,o=t[0].length,f=t.length,l=f,d=v(f),m=1/0,_=[];l--;){var w=t[l];l&&e&&(w=Q(w,bt(e))),m=mt(w.length,m),d[l]=!r&&(e||o>=120&&w.length>=120)?new Me(l&&w):a}w=t[0];var x=-1,P=d[0];t:for(;++x<o&&_.length<m;){var C=w[x],E=e?e(C):C;if(C=r||C!==0?C:0,!(P?Cn(P,E):s(_,E,r))){for(l=f;--l;){var M=d[l];if(!(M?Cn(M,E):s(t[l],E,r)))continue t}P&&P.push(E),_.push(C)}}return _}function vf(t,e,r,s){return jt(t,function(o,f,l){e(s,r(o),f,l)}),s}function Mn(t,e,r){e=Pe(e,t),t=Bu(t,e);var s=t==null?t:t[ee(kt(e))];return s==null?a:Ot(s,t,r)}function qa(t){return tt(t)&&Dt(t)==Ze}function Sf(t){return tt(t)&&Dt(t)==An}function Df(t){return tt(t)&&Dt(t)==wn}function Nn(t,e,r,s,o){return t===e?!0:t==null||e==null||!tt(t)&&!tt(e)?t!==t&&e!==e:_f(t,e,r,s,Nn,o)}function _f(t,e,r,s,o,f){var l=L(t),d=L(e),m=l?er:vt(t),_=d?er:vt(e);m=m==Ze?re:m,_=_==Ze?re:_;var w=m==re,x=_==re,P=m==_;if(P&&Ce(t)){if(!Ce(e))return!1;l=!0,w=!1}if(P&&!w)return f||(f=new Vt),l||un(t)?Cu(t,e,r,s,o,f):Zf(t,e,m,r,s,o,f);if(!(r&nt)){var C=w&&z.call(t,"__wrapped__"),E=x&&z.call(e,"__wrapped__");if(C||E){var M=C?t.value():t,I=E?e.value():e;return f||(f=new Vt),o(M,I,r,s,f)}}return P?(f||(f=new Vt),qf(t,e,r,s,o,f)):!1}function wf(t){return tt(t)&&vt(t)==Yt}function zi(t,e,r,s){var o=r.length,f=o,l=!s;if(t==null)return!f;for(t=$(t);o--;){var d=r[o];if(l&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++o<f;){d=r[o];var m=d[0],_=t[m],w=d[1];if(l&&d[2]){if(_===a&&!(m in t))return!1}else{var x=new Vt;if(s)var P=s(_,w,m,t,e,x);if(!(P===a?Nn(w,_,nt|J,s,x):P))return!1}}return!0}function Va(t){if(!j(t)||rl(t))return!1;var e=he(t)?_h:hc;return e.test(Ge(t))}function xf(t){return tt(t)&&Dt(t)==yn}function yf(t){return tt(t)&&vt(t)==Zt}function Tf(t){return tt(t)&&Kr(t.length)&&!!V[Dt(t)]}function Xa(t){return typeof t=="function"?t:t==null?At:typeof t=="object"?L(t)?ja(t[0],t[1]):Qa(t):Do(t)}function Ki(t){if(!Gn(t))return Ah(t);var e=[];for(var r in $(t))z.call(t,r)&&r!="constructor"&&e.push(r);return e}function Pf(t){if(!j(t))return ul(t);var e=Gn(t),r=[];for(var s in t)s=="constructor"&&(e||!z.call(t,s))||r.push(s);return r}function $i(t,e){return t<e}function Ja(t,e){var r=-1,s=Tt(t)?v(t.length):[];return ye(t,function(o,f,l){s[++r]=e(o,f,l)}),s}function Qa(t){var e=as(t);return e.length==1&&e[0][2]?Ru(e[0][0],e[0][1]):function(r){return r===t||zi(r,t,e)}}function ja(t,e){return os(t)&&Iu(e)?Ru(ee(t),e):function(r){var s=Ss(r,t);return s===a&&s===e?Ds(r,t):Nn(e,s,nt|J)}}function Or(t,e,r,s,o){t!==e&&Gi(e,function(f,l){if(o||(o=new Vt),j(f))Af(t,e,l,r,Or,s,o);else{var d=s?s(hs(t,l),f,l+"",t,e,o):a;d===a&&(d=f),Hi(t,l,d)}},Pt)}function Af(t,e,r,s,o,f,l){var d=hs(t,r),m=hs(e,r),_=l.get(m);if(_){Hi(t,r,_);return}var w=f?f(d,m,r+"",t,e,l):a,x=w===a;if(x){var P=L(m),C=!P&&Ce(m),E=!P&&!C&&un(m);w=m,P||C||E?L(d)?w=d:rt(d)?w=yt(d):C?(x=!1,w=fu(m,!0)):E?(x=!1,w=lu(m,!0)):w=[]:kn(m)||We(m)?(w=d,We(d)?w=oo(d):(!j(d)||he(d))&&(w=Eu(m))):x=!1}x&&(l.set(m,w),o(w,m,s,f,l),l.delete(m)),Hi(t,r,w)}function tu(t,e){var r=t.length;if(r)return e+=e<0?r:0,ce(e,r)?t[e]:a}function eu(t,e,r){e.length?e=Q(e,function(f){return L(f)?function(l){return He(l,f.length===1?f[0]:f)}:f}):e=[At];var s=-1;e=Q(e,bt(b()));var o=Ja(t,function(f,l,d){var m=Q(e,function(_){return _(f)});return{criteria:m,index:++s,value:f}});return Qc(o,function(f,l){return Gf(f,l,r)})}function Cf(t,e){return nu(t,e,function(r,s){return Ds(t,s)})}function nu(t,e,r){for(var s=-1,o=e.length,f={};++s<o;){var l=e[s],d=He(t,l);r(d,l)&&Hn(f,Pe(l,t),d)}return f}function Of(t){return function(e){return He(e,t)}}function Yi(t,e,r,s){var o=s?Jc:Xe,f=-1,l=e.length,d=t;for(t===e&&(e=yt(e)),r&&(d=Q(t,bt(r)));++f<l;)for(var m=0,_=e[f],w=r?r(_):_;(m=o(d,w,m,s))>-1;)d!==t&&Sr.call(d,m,1),Sr.call(t,m,1);return t}function ru(t,e){for(var r=t?e.length:0,s=r-1;r--;){var o=e[r];if(r==s||o!==f){var f=o;ce(o)?Sr.call(t,o,1):Xi(t,o)}}return t}function Zi(t,e){return t+wr(Ha()*(e-t+1))}function bf(t,e,r,s){for(var o=-1,f=ot(_r((e-t)/(r||1)),0),l=v(f);f--;)l[s?f:++o]=t,t+=r;return l}function qi(t,e){var r="";if(!t||e<1||e>ve)return r;do e%2&&(r+=t),e=wr(e/2),e&&(t+=t);while(e);return r}function N(t,e){return fs(Lu(t,e,At),t+"")}function Ef(t){return Wa(on(t))}function If(t,e){var r=on(t);return Fr(r,Ne(e,0,r.length))}function Hn(t,e,r,s){if(!j(t))return t;e=Pe(e,t);for(var o=-1,f=e.length,l=f-1,d=t;d!=null&&++o<f;){var m=ee(e[o]),_=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return t;if(o!=l){var w=d[m];_=s?s(w,m,d):a,_===a&&(_=j(w)?w:ce(e[o+1])?[]:{})}Ln(d,m,_),d=d[m]}return t}var iu=xr?function(t,e){return xr.set(t,e),t}:At,Rf=Dr?function(t,e){return Dr(t,"toString",{configurable:!0,enumerable:!1,value:ws(e),writable:!0})}:At;function Lf(t){return Fr(on(t))}function Wt(t,e,r){var s=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var f=v(o);++s<o;)f[s]=t[s+e];return f}function Bf(t,e){var r;return ye(t,function(s,o,f){return r=e(s,o,f),!r}),!!r}function br(t,e,r){var s=0,o=t==null?s:t.length;if(typeof e=="number"&&e===e&&o<=Mo){for(;s<o;){var f=s+o>>>1,l=t[f];l!==null&&!It(l)&&(r?l<=e:l<e)?s=f+1:o=f}return o}return Vi(t,e,At,r)}function Vi(t,e,r,s){var o=0,f=t==null?0:t.length;if(f===0)return 0;e=r(e);for(var l=e!==e,d=e===null,m=It(e),_=e===a;o<f;){var w=wr((o+f)/2),x=r(t[w]),P=x!==a,C=x===null,E=x===x,M=It(x);if(l)var I=s||E;else _?I=E&&(s||P):d?I=E&&P&&(s||!C):m?I=E&&P&&!C&&(s||!M):C||M?I=!1:I=s?x<=e:x<e;I?o=w+1:f=w}return mt(f,Bo)}function su(t,e){for(var r=-1,s=t.length,o=0,f=[];++r<s;){var l=t[r],d=e?e(l):l;if(!r||!Xt(d,m)){var m=d;f[o++]=l===0?0:l}}return f}function au(t){return typeof t=="number"?t:It(t)?tr:+t}function Et(t){if(typeof t=="string")return t;if(L(t))return Q(t,Et)+"";if(It(t))return Fa?Fa.call(t):"";var e=t+"";return e=="0"&&1/t==-Ie?"-0":e}function Te(t,e,r){var s=-1,o=or,f=t.length,l=!0,d=[],m=d;if(r)l=!1,o=Ti;else if(f>=i){var _=e?null:$f(t);if(_)return hr(_);l=!1,o=Cn,m=new Me}else m=e?[]:d;t:for(;++s<f;){var w=t[s],x=e?e(w):w;if(w=r||w!==0?w:0,l&&x===x){for(var P=m.length;P--;)if(m[P]===x)continue t;e&&m.push(x),d.push(w)}else o(m,x,r)||(m!==d&&m.push(x),d.push(w))}return d}function Xi(t,e){return e=Pe(e,t),t=Bu(t,e),t==null||delete t[ee(kt(e))]}function uu(t,e,r,s){return Hn(t,e,r(He(t,e)),s)}function Er(t,e,r,s){for(var o=t.length,f=s?o:-1;(s?f--:++f<o)&&e(t[f],f,t););return r?Wt(t,s?0:f,s?f+1:o):Wt(t,s?f+1:0,s?o:f)}function ou(t,e){var r=t;return r instanceof F&&(r=r.value()),Pi(e,function(s,o){return o.func.apply(o.thisArg,De([s],o.args))},r)}function Ji(t,e,r){var s=t.length;if(s<2)return s?Te(t[0]):[];for(var o=-1,f=v(s);++o<s;)for(var l=t[o],d=-1;++d<s;)d!=o&&(f[o]=Bn(f[o]||l,t[d],e,r));return Te(dt(f,1),e,r)}function cu(t,e,r){for(var s=-1,o=t.length,f=e.length,l={};++s<o;){var d=s<f?e[s]:a;r(l,t[s],d)}return l}function Qi(t){return rt(t)?t:[]}function ji(t){return typeof t=="function"?t:At}function Pe(t,e){return L(t)?t:os(t,e)?[t]:Fu(U(t))}var Mf=N;function Ae(t,e,r){var s=t.length;return r=r===a?s:r,!e&&r>=s?t:Wt(t,e,r)}var hu=wh||function(t){return lt.clearTimeout(t)};function fu(t,e){if(e)return t.slice();var r=t.length,s=Ra?Ra(r):new t.constructor(r);return t.copy(s),s}function ts(t){var e=new t.constructor(t.byteLength);return new mr(e).set(new mr(t)),e}function Nf(t,e){var r=e?ts(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Hf(t){var e=new t.constructor(t.source,qs.exec(t));return e.lastIndex=t.lastIndex,e}function Ff(t){return Rn?$(Rn.call(t)):{}}function lu(t,e){var r=e?ts(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function pu(t,e){if(t!==e){var r=t!==a,s=t===null,o=t===t,f=It(t),l=e!==a,d=e===null,m=e===e,_=It(e);if(!d&&!_&&!f&&t>e||f&&l&&m&&!d&&!_||s&&l&&m||!r&&m||!o)return 1;if(!s&&!f&&!_&&t<e||_&&r&&o&&!s&&!f||d&&r&&o||!l&&o||!m)return-1}return 0}function Gf(t,e,r){for(var s=-1,o=t.criteria,f=e.criteria,l=o.length,d=r.length;++s<l;){var m=pu(o[s],f[s]);if(m){if(s>=d)return m;var _=r[s];return m*(_=="desc"?-1:1)}}return t.index-e.index}function du(t,e,r,s){for(var o=-1,f=t.length,l=r.length,d=-1,m=e.length,_=ot(f-l,0),w=v(m+_),x=!s;++d<m;)w[d]=e[d];for(;++o<l;)(x||o<f)&&(w[r[o]]=t[o]);for(;_--;)w[d++]=t[o++];return w}function gu(t,e,r,s){for(var o=-1,f=t.length,l=-1,d=r.length,m=-1,_=e.length,w=ot(f-d,0),x=v(w+_),P=!s;++o<w;)x[o]=t[o];for(var C=o;++m<_;)x[C+m]=e[m];for(;++l<d;)(P||o<f)&&(x[C+r[l]]=t[o++]);return x}function yt(t,e){var r=-1,s=t.length;for(e||(e=v(s));++r<s;)e[r]=t[r];return e}function te(t,e,r,s){var o=!r;r||(r={});for(var f=-1,l=e.length;++f<l;){var d=e[f],m=s?s(r[d],t[d],d,r,t):a;m===a&&(m=t[d]),o?ae(r,d,m):Ln(r,d,m)}return r}function Wf(t,e){return te(t,us(t),e)}function kf(t,e){return te(t,Ou(t),e)}function Ir(t,e){return function(r,s){var o=L(r)?$c:cf,f=e?e():{};return o(r,t,b(s,2),f)}}function rn(t){return N(function(e,r){var s=-1,o=r.length,f=o>1?r[o-1]:a,l=o>2?r[2]:a;for(f=t.length>3&&typeof f=="function"?(o--,f):a,l&&_t(r[0],r[1],l)&&(f=o<3?a:f,o=1),e=$(e);++s<o;){var d=r[s];d&&t(e,d,s,f)}return e})}function mu(t,e){return function(r,s){if(r==null)return r;if(!Tt(r))return t(r,s);for(var o=r.length,f=e?o:-1,l=$(r);(e?f--:++f<o)&&s(l[f],f,l)!==!1;);return r}}function vu(t){return function(e,r,s){for(var o=-1,f=$(e),l=s(e),d=l.length;d--;){var m=l[t?d:++o];if(r(f[m],m,f)===!1)break}return e}}function Uf(t,e,r){var s=e&Z,o=Fn(t);function f(){var l=this&&this!==lt&&this instanceof f?o:t;return l.apply(s?r:this,arguments)}return f}function Su(t){return function(e){e=U(e);var r=Je(e)?qt(e):a,s=r?r[0]:e.charAt(0),o=r?Ae(r,1).join(""):e.slice(1);return s[t]()+o}}function sn(t){return function(e){return Pi(vo(mo(e).replace(Ic,"")),t,"")}}function Fn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=nn(t.prototype),s=t.apply(r,e);return j(s)?s:r}}function zf(t,e,r){var s=Fn(t);function o(){for(var f=arguments.length,l=v(f),d=f,m=an(o);d--;)l[d]=arguments[d];var _=f<3&&l[0]!==m&&l[f-1]!==m?[]:_e(l,m);if(f-=_.length,f<r)return yu(t,e,Rr,o.placeholder,a,l,_,a,a,r-f);var w=this&&this!==lt&&this instanceof o?s:t;return Ot(w,this,l)}return o}function Du(t){return function(e,r,s){var o=$(e);if(!Tt(e)){var f=b(r,3);e=pt(e),r=function(d){return f(o[d],d,o)}}var l=t(e,r,s);return l>-1?o[f?e[l]:l]:a}}function _u(t){return oe(function(e){var r=e.length,s=r,o=Ft.prototype.thru;for(t&&e.reverse();s--;){var f=e[s];if(typeof f!="function")throw new Ht(h);if(o&&!l&&Nr(f)=="wrapper")var l=new Ft([],!0)}for(s=l?s:r;++s<r;){f=e[s];var d=Nr(f),m=d=="wrapper"?ss(f):a;m&&cs(m[0])&&m[1]==(ne|Bt|Ct|Dn)&&!m[4].length&&m[9]==1?l=l[Nr(m[0])].apply(l,m[3]):l=f.length==1&&cs(f)?l[d]():l.thru(f)}return function(){var _=arguments,w=_[0];if(l&&_.length==1&&L(w))return l.plant(w).value();for(var x=0,P=r?e[x].apply(this,_):w;++x<r;)P=e[x].call(this,P);return P}})}function Rr(t,e,r,s,o,f,l,d,m,_){var w=e&ne,x=e&Z,P=e&$t,C=e&(Bt|ge),E=e&si,M=P?a:Fn(t);function I(){for(var H=arguments.length,G=v(H),Rt=H;Rt--;)G[Rt]=arguments[Rt];if(C)var wt=an(I),Lt=th(G,wt);if(s&&(G=du(G,s,o,C)),f&&(G=gu(G,f,l,C)),H-=Lt,C&&H<_){var it=_e(G,wt);return yu(t,e,Rr,I.placeholder,r,G,it,d,m,_-H)}var Jt=x?r:this,le=P?Jt[t]:t;return H=G.length,d?G=cl(G,d):E&&H>1&&G.reverse(),w&&m<H&&(G.length=m),this&&this!==lt&&this instanceof I&&(le=M||Fn(le)),le.apply(Jt,G)}return I}function wu(t,e){return function(r,s){return vf(r,t,e(s),{})}}function Lr(t,e){return function(r,s){var o;if(r===a&&s===a)return e;if(r!==a&&(o=r),s!==a){if(o===a)return s;typeof r=="string"||typeof s=="string"?(r=Et(r),s=Et(s)):(r=au(r),s=au(s)),o=t(r,s)}return o}}function es(t){return oe(function(e){return e=Q(e,bt(b())),N(function(r){var s=this;return t(e,function(o){return Ot(o,s,r)})})})}function Br(t,e){e=e===a?" ":Et(e);var r=e.length;if(r<2)return r?qi(e,t):e;var s=qi(e,_r(t/Qe(e)));return Je(e)?Ae(qt(s),0,t).join(""):s.slice(0,t)}function Kf(t,e,r,s){var o=e&Z,f=Fn(t);function l(){for(var d=-1,m=arguments.length,_=-1,w=s.length,x=v(w+m),P=this&&this!==lt&&this instanceof l?f:t;++_<w;)x[_]=s[_];for(;m--;)x[_++]=arguments[++d];return Ot(P,o?r:this,x)}return l}function xu(t){return function(e,r,s){return s&&typeof s!="number"&&_t(e,r,s)&&(r=s=a),e=fe(e),r===a?(r=e,e=0):r=fe(r),s=s===a?e<r?1:-1:fe(s),bf(e,r,s,t)}}function Mr(t){return function(e,r){return typeof e=="string"&&typeof r=="string"||(e=Ut(e),r=Ut(r)),t(e,r)}}function yu(t,e,r,s,o,f,l,d,m,_){var w=e&Bt,x=w?l:a,P=w?a:l,C=w?f:a,E=w?a:f;e|=w?Ct:me,e&=~(w?me:Ct),e&Sn||(e&=~(Z|$t));var M=[t,e,o,C,x,E,P,d,m,_],I=r.apply(a,M);return cs(t)&&Mu(I,M),I.placeholder=s,Nu(I,t,e)}function ns(t){var e=ut[t];return function(r,s){if(r=Ut(r),s=s==null?0:mt(B(s),292),s&&Na(r)){var o=(U(r)+"e").split("e"),f=e(o[0]+"e"+(+o[1]+s));return o=(U(f)+"e").split("e"),+(o[0]+"e"+(+o[1]-s))}return e(r)}}var $f=tn&&1/hr(new tn([,-0]))[1]==Ie?function(t){return new tn(t)}:Ts;function Tu(t){return function(e){var r=vt(e);return r==Yt?Ri(e):r==Zt?uh(e):jc(e,t(e))}}function ue(t,e,r,s,o,f,l,d){var m=e&$t;if(!m&&typeof t!="function")throw new Ht(h);var _=s?s.length:0;if(_||(e&=~(Ct|me),s=o=a),l=l===a?l:ot(B(l),0),d=d===a?d:B(d),_-=o?o.length:0,e&me){var w=s,x=o;s=o=a}var P=m?a:ss(t),C=[t,e,r,s,o,w,x,f,l,d];if(P&&al(C,P),t=C[0],e=C[1],r=C[2],s=C[3],o=C[4],d=C[9]=C[9]===a?m?0:t.length:ot(C[9]-_,0),!d&&e&(Bt|ge)&&(e&=~(Bt|ge)),!e||e==Z)var E=Uf(t,e,r);else e==Bt||e==ge?E=zf(t,e,d):(e==Ct||e==(Z|Ct))&&!o.length?E=Kf(t,e,r,s):E=Rr.apply(a,C);var M=P?iu:Mu;return Nu(M(E,C),t,e)}function Pu(t,e,r,s){return t===a||Xt(t,je[r])&&!z.call(s,r)?e:t}function Au(t,e,r,s,o,f){return j(t)&&j(e)&&(f.set(e,t),Or(t,e,a,Au,f),f.delete(e)),t}function Yf(t){return kn(t)?a:t}function Cu(t,e,r,s,o,f){var l=r&nt,d=t.length,m=e.length;if(d!=m&&!(l&&m>d))return!1;var _=f.get(t),w=f.get(e);if(_&&w)return _==e&&w==t;var x=-1,P=!0,C=r&J?new Me:a;for(f.set(t,e),f.set(e,t);++x<d;){var E=t[x],M=e[x];if(s)var I=l?s(M,E,x,e,t,f):s(E,M,x,t,e,f);if(I!==a){if(I)continue;P=!1;break}if(C){if(!Ai(e,function(H,G){if(!Cn(C,G)&&(E===H||o(E,H,r,s,f)))return C.push(G)})){P=!1;break}}else if(!(E===M||o(E,M,r,s,f))){P=!1;break}}return f.delete(t),f.delete(e),P}function Zf(t,e,r,s,o,f,l){switch(r){case qe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case An:return!(t.byteLength!=e.byteLength||!f(new mr(t),new mr(e)));case _n:case wn:case xn:return Xt(+t,+e);case nr:return t.name==e.name&&t.message==e.message;case yn:case Tn:return t==e+"";case Yt:var d=Ri;case Zt:var m=s&nt;if(d||(d=hr),t.size!=e.size&&!m)return!1;var _=l.get(t);if(_)return _==e;s|=J,l.set(t,e);var w=Cu(d(t),d(e),s,o,f,l);return l.delete(t),w;case ir:if(Rn)return Rn.call(t)==Rn.call(e)}return!1}function qf(t,e,r,s,o,f){var l=r&nt,d=rs(t),m=d.length,_=rs(e),w=_.length;if(m!=w&&!l)return!1;for(var x=m;x--;){var P=d[x];if(!(l?P in e:z.call(e,P)))return!1}var C=f.get(t),E=f.get(e);if(C&&E)return C==e&&E==t;var M=!0;f.set(t,e),f.set(e,t);for(var I=l;++x<m;){P=d[x];var H=t[P],G=e[P];if(s)var Rt=l?s(G,H,P,e,t,f):s(H,G,P,t,e,f);if(!(Rt===a?H===G||o(H,G,r,s,f):Rt)){M=!1;break}I||(I=P=="constructor")}if(M&&!I){var wt=t.constructor,Lt=e.constructor;wt!=Lt&&"constructor"in t&&"constructor"in e&&!(typeof wt=="function"&&wt instanceof wt&&typeof Lt=="function"&&Lt instanceof Lt)&&(M=!1)}return f.delete(t),f.delete(e),M}function oe(t){return fs(Lu(t,a,Uu),t+"")}function rs(t){return Za(t,pt,us)}function is(t){return Za(t,Pt,Ou)}var ss=xr?function(t){return xr.get(t)}:Ts;function Nr(t){for(var e=t.name+"",r=en[e],s=z.call(en,e)?r.length:0;s--;){var o=r[s],f=o.func;if(f==null||f==t)return o.name}return e}function an(t){var e=z.call(c,"placeholder")?c:t;return e.placeholder}function b(){var t=c.iteratee||xs;return t=t===xs?Xa:t,arguments.length?t(arguments[0],arguments[1]):t}function Hr(t,e){var r=t.__data__;return nl(e)?r[typeof e=="string"?"string":"hash"]:r.map}function as(t){for(var e=pt(t),r=e.length;r--;){var s=e[r],o=t[s];e[r]=[s,o,Iu(o)]}return e}function Fe(t,e){var r=ih(t,e);return Va(r)?r:a}function Vf(t){var e=z.call(t,Le),r=t[Le];try{t[Le]=a;var s=!0}catch{}var o=dr.call(t);return s&&(e?t[Le]=r:delete t[Le]),o}var us=Bi?function(t){return t==null?[]:(t=$(t),Se(Bi(t),function(e){return Ba.call(t,e)}))}:Ps,Ou=Bi?function(t){for(var e=[];t;)De(e,us(t)),t=vr(t);return e}:Ps,vt=Dt;(Mi&&vt(new Mi(new ArrayBuffer(1)))!=qe||bn&&vt(new bn)!=Yt||Ni&&vt(Ni.resolve())!=Ks||tn&&vt(new tn)!=Zt||En&&vt(new En)!=Pn)&&(vt=function(t){var e=Dt(t),r=e==re?t.constructor:a,s=r?Ge(r):"";if(s)switch(s){case Eh:return qe;case Ih:return Yt;case Rh:return Ks;case Lh:return Zt;case Bh:return Pn}return e});function Xf(t,e,r){for(var s=-1,o=r.length;++s<o;){var f=r[s],l=f.size;switch(f.type){case"drop":t+=l;break;case"dropRight":e-=l;break;case"take":e=mt(e,t+l);break;case"takeRight":t=ot(t,e-l);break}}return{start:t,end:e}}function Jf(t){var e=t.match(nc);return e?e[1].split(rc):[]}function bu(t,e,r){e=Pe(e,t);for(var s=-1,o=e.length,f=!1;++s<o;){var l=ee(e[s]);if(!(f=t!=null&&r(t,l)))break;t=t[l]}return f||++s!=o?f:(o=t==null?0:t.length,!!o&&Kr(o)&&ce(l,o)&&(L(t)||We(t)))}function Qf(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&z.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Eu(t){return typeof t.constructor=="function"&&!Gn(t)?nn(vr(t)):{}}function jf(t,e,r){var s=t.constructor;switch(e){case An:return ts(t);case _n:case wn:return new s(+t);case qe:return Nf(t,r);case ai:case ui:case oi:case ci:case hi:case fi:case li:case pi:case di:return lu(t,r);case Yt:return new s;case xn:case Tn:return new s(t);case yn:return Hf(t);case Zt:return new s;case ir:return Ff(t)}}function tl(t,e){var r=e.length;if(!r)return t;var s=r-1;return e[s]=(r>1?"& ":"")+e[s],e=e.join(r>2?", ":" "),t.replace(ec,`{
/* [wrapped with `+e+`] */
`)}function el(t){return L(t)||We(t)||!!(Ma&&t&&t[Ma])}function ce(t,e){var r=typeof t;return e=e??ve,!!e&&(r=="number"||r!="symbol"&&lc.test(t))&&t>-1&&t%1==0&&t<e}function _t(t,e,r){if(!j(r))return!1;var s=typeof e;return(s=="number"?Tt(r)&&ce(e,r.length):s=="string"&&e in r)?Xt(r[e],t):!1}function os(t,e){if(L(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||It(t)?!0:Jo.test(t)||!Xo.test(t)||e!=null&&t in $(e)}function nl(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function cs(t){var e=Nr(t),r=c[e];if(typeof r!="function"||!(e in F.prototype))return!1;if(t===r)return!0;var s=ss(r);return!!s&&t===s[0]}function rl(t){return!!Ia&&Ia in t}var il=lr?he:As;function Gn(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||je;return t===r}function Iu(t){return t===t&&!j(t)}function Ru(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==a||t in $(r))}}function sl(t){var e=Ur(t,function(s){return r.size===y&&r.clear(),s}),r=e.cache;return e}function al(t,e){var r=t[1],s=e[1],o=r|s,f=o<(Z|$t|ne),l=s==ne&&r==Bt||s==ne&&r==Dn&&t[7].length<=e[8]||s==(ne|Dn)&&e[7].length<=e[8]&&r==Bt;if(!(f||l))return t;s&Z&&(t[2]=e[2],o|=r&Z?0:Sn);var d=e[3];if(d){var m=t[3];t[3]=m?du(m,d,e[4]):d,t[4]=m?_e(t[3],T):e[4]}return d=e[5],d&&(m=t[5],t[5]=m?gu(m,d,e[6]):d,t[6]=m?_e(t[5],T):e[6]),d=e[7],d&&(t[7]=d),s&ne&&(t[8]=t[8]==null?e[8]:mt(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function ul(t){var e=[];if(t!=null)for(var r in $(t))e.push(r);return e}function ol(t){return dr.call(t)}function Lu(t,e,r){return e=ot(e===a?t.length-1:e,0),function(){for(var s=arguments,o=-1,f=ot(s.length-e,0),l=v(f);++o<f;)l[o]=s[e+o];o=-1;for(var d=v(e+1);++o<e;)d[o]=s[o];return d[e]=r(l),Ot(t,this,d)}}function Bu(t,e){return e.length<2?t:He(t,Wt(e,0,-1))}function cl(t,e){for(var r=t.length,s=mt(e.length,r),o=yt(t);s--;){var f=e[s];t[s]=ce(f,r)?o[f]:a}return t}function hs(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Mu=Hu(iu),Wn=yh||function(t,e){return lt.setTimeout(t,e)},fs=Hu(Rf);function Nu(t,e,r){var s=e+"";return fs(t,tl(s,hl(Jf(s),r)))}function Hu(t){var e=0,r=0;return function(){var s=Ch(),o=Eo-(s-r);if(r=s,o>0){if(++e>=bo)return arguments[0]}else e=0;return t.apply(a,arguments)}}function Fr(t,e){var r=-1,s=t.length,o=s-1;for(e=e===a?s:e;++r<e;){var f=Zi(r,o),l=t[f];t[f]=t[r],t[r]=l}return t.length=e,t}var Fu=sl(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Qo,function(r,s,o,f){e.push(o?f.replace(ac,"$1"):s||r)}),e});function ee(t){if(typeof t=="string"||It(t))return t;var e=t+"";return e=="0"&&1/t==-Ie?"-0":e}function Ge(t){if(t!=null){try{return pr.call(t)}catch{}try{return t+""}catch{}}return""}function hl(t,e){return Nt(No,function(r){var s="_."+r[0];e&r[1]&&!or(t,s)&&t.push(s)}),t.sort()}function Gu(t){if(t instanceof F)return t.clone();var e=new Ft(t.__wrapped__,t.__chain__);return e.__actions__=yt(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function fl(t,e,r){(r?_t(t,e,r):e===a)?e=1:e=ot(B(e),0);var s=t==null?0:t.length;if(!s||e<1)return[];for(var o=0,f=0,l=v(_r(s/e));o<s;)l[f++]=Wt(t,o,o+=e);return l}function ll(t){for(var e=-1,r=t==null?0:t.length,s=0,o=[];++e<r;){var f=t[e];f&&(o[s++]=f)}return o}function pl(){var t=arguments.length;if(!t)return[];for(var e=v(t-1),r=arguments[0],s=t;s--;)e[s-1]=arguments[s];return De(L(r)?yt(r):[r],dt(e,1))}var dl=N(function(t,e){return rt(t)?Bn(t,dt(e,1,rt,!0)):[]}),gl=N(function(t,e){var r=kt(e);return rt(r)&&(r=a),rt(t)?Bn(t,dt(e,1,rt,!0),b(r,2)):[]}),ml=N(function(t,e){var r=kt(e);return rt(r)&&(r=a),rt(t)?Bn(t,dt(e,1,rt,!0),a,r):[]});function vl(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:B(e),Wt(t,e<0?0:e,s)):[]}function Sl(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:B(e),e=s-e,Wt(t,0,e<0?0:e)):[]}function Dl(t,e){return t&&t.length?Er(t,b(e,3),!0,!0):[]}function _l(t,e){return t&&t.length?Er(t,b(e,3),!0):[]}function wl(t,e,r,s){var o=t==null?0:t.length;return o?(r&&typeof r!="number"&&_t(t,e,r)&&(r=0,s=o),pf(t,e,r,s)):[]}function Wu(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=r==null?0:B(r);return o<0&&(o=ot(s+o,0)),cr(t,b(e,3),o)}function ku(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=s-1;return r!==a&&(o=B(r),o=r<0?ot(s+o,0):mt(o,s-1)),cr(t,b(e,3),o,!0)}function Uu(t){var e=t==null?0:t.length;return e?dt(t,1):[]}function xl(t){var e=t==null?0:t.length;return e?dt(t,Ie):[]}function yl(t,e){var r=t==null?0:t.length;return r?(e=e===a?1:B(e),dt(t,e)):[]}function Tl(t){for(var e=-1,r=t==null?0:t.length,s={};++e<r;){var o=t[e];s[o[0]]=o[1]}return s}function zu(t){return t&&t.length?t[0]:a}function Pl(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=r==null?0:B(r);return o<0&&(o=ot(s+o,0)),Xe(t,e,o)}function Al(t){var e=t==null?0:t.length;return e?Wt(t,0,-1):[]}var Cl=N(function(t){var e=Q(t,Qi);return e.length&&e[0]===t[0]?Ui(e):[]}),Ol=N(function(t){var e=kt(t),r=Q(t,Qi);return e===kt(r)?e=a:r.pop(),r.length&&r[0]===t[0]?Ui(r,b(e,2)):[]}),bl=N(function(t){var e=kt(t),r=Q(t,Qi);return e=typeof e=="function"?e:a,e&&r.pop(),r.length&&r[0]===t[0]?Ui(r,a,e):[]});function El(t,e){return t==null?"":Ph.call(t,e)}function kt(t){var e=t==null?0:t.length;return e?t[e-1]:a}function Il(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=s;return r!==a&&(o=B(r),o=o<0?ot(s+o,0):mt(o,s-1)),e===e?ch(t,e,o):cr(t,ya,o,!0)}function Rl(t,e){return t&&t.length?tu(t,B(e)):a}var Ll=N(Ku);function Ku(t,e){return t&&t.length&&e&&e.length?Yi(t,e):t}function Bl(t,e,r){return t&&t.length&&e&&e.length?Yi(t,e,b(r,2)):t}function Ml(t,e,r){return t&&t.length&&e&&e.length?Yi(t,e,a,r):t}var Nl=oe(function(t,e){var r=t==null?0:t.length,s=Fi(t,e);return ru(t,Q(e,function(o){return ce(o,r)?+o:o}).sort(pu)),s});function Hl(t,e){var r=[];if(!(t&&t.length))return r;var s=-1,o=[],f=t.length;for(e=b(e,3);++s<f;){var l=t[s];e(l,s,t)&&(r.push(l),o.push(s))}return ru(t,o),r}function ls(t){return t==null?t:bh.call(t)}function Fl(t,e,r){var s=t==null?0:t.length;return s?(r&&typeof r!="number"&&_t(t,e,r)?(e=0,r=s):(e=e==null?0:B(e),r=r===a?s:B(r)),Wt(t,e,r)):[]}function Gl(t,e){return br(t,e)}function Wl(t,e,r){return Vi(t,e,b(r,2))}function kl(t,e){var r=t==null?0:t.length;if(r){var s=br(t,e);if(s<r&&Xt(t[s],e))return s}return-1}function Ul(t,e){return br(t,e,!0)}function zl(t,e,r){return Vi(t,e,b(r,2),!0)}function Kl(t,e){var r=t==null?0:t.length;if(r){var s=br(t,e,!0)-1;if(Xt(t[s],e))return s}return-1}function $l(t){return t&&t.length?su(t):[]}function Yl(t,e){return t&&t.length?su(t,b(e,2)):[]}function Zl(t){var e=t==null?0:t.length;return e?Wt(t,1,e):[]}function ql(t,e,r){return t&&t.length?(e=r||e===a?1:B(e),Wt(t,0,e<0?0:e)):[]}function Vl(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:B(e),e=s-e,Wt(t,e<0?0:e,s)):[]}function Xl(t,e){return t&&t.length?Er(t,b(e,3),!1,!0):[]}function Jl(t,e){return t&&t.length?Er(t,b(e,3)):[]}var Ql=N(function(t){return Te(dt(t,1,rt,!0))}),jl=N(function(t){var e=kt(t);return rt(e)&&(e=a),Te(dt(t,1,rt,!0),b(e,2))}),tp=N(function(t){var e=kt(t);return e=typeof e=="function"?e:a,Te(dt(t,1,rt,!0),a,e)});function ep(t){return t&&t.length?Te(t):[]}function np(t,e){return t&&t.length?Te(t,b(e,2)):[]}function rp(t,e){return e=typeof e=="function"?e:a,t&&t.length?Te(t,a,e):[]}function ps(t){if(!(t&&t.length))return[];var e=0;return t=Se(t,function(r){if(rt(r))return e=ot(r.length,e),!0}),Ei(e,function(r){return Q(t,Ci(r))})}function $u(t,e){if(!(t&&t.length))return[];var r=ps(t);return e==null?r:Q(r,function(s){return Ot(e,a,s)})}var ip=N(function(t,e){return rt(t)?Bn(t,e):[]}),sp=N(function(t){return Ji(Se(t,rt))}),ap=N(function(t){var e=kt(t);return rt(e)&&(e=a),Ji(Se(t,rt),b(e,2))}),up=N(function(t){var e=kt(t);return e=typeof e=="function"?e:a,Ji(Se(t,rt),a,e)}),op=N(ps);function cp(t,e){return cu(t||[],e||[],Ln)}function hp(t,e){return cu(t||[],e||[],Hn)}var fp=N(function(t){var e=t.length,r=e>1?t[e-1]:a;return r=typeof r=="function"?(t.pop(),r):a,$u(t,r)});function Yu(t){var e=c(t);return e.__chain__=!0,e}function lp(t,e){return e(t),t}function Gr(t,e){return e(t)}var pp=oe(function(t){var e=t.length,r=e?t[0]:0,s=this.__wrapped__,o=function(f){return Fi(f,t)};return e>1||this.__actions__.length||!(s instanceof F)||!ce(r)?this.thru(o):(s=s.slice(r,+r+(e?1:0)),s.__actions__.push({func:Gr,args:[o],thisArg:a}),new Ft(s,this.__chain__).thru(function(f){return e&&!f.length&&f.push(a),f}))});function dp(){return Yu(this)}function gp(){return new Ft(this.value(),this.__chain__)}function mp(){this.__values__===a&&(this.__values__=ao(this.value()));var t=this.__index__>=this.__values__.length,e=t?a:this.__values__[this.__index__++];return{done:t,value:e}}function vp(){return this}function Sp(t){for(var e,r=this;r instanceof Tr;){var s=Gu(r);s.__index__=0,s.__values__=a,e?o.__wrapped__=s:e=s;var o=s;r=r.__wrapped__}return o.__wrapped__=t,e}function Dp(){var t=this.__wrapped__;if(t instanceof F){var e=t;return this.__actions__.length&&(e=new F(this)),e=e.reverse(),e.__actions__.push({func:Gr,args:[ls],thisArg:a}),new Ft(e,this.__chain__)}return this.thru(ls)}function _p(){return ou(this.__wrapped__,this.__actions__)}var wp=Ir(function(t,e,r){z.call(t,r)?++t[r]:ae(t,r,1)});function xp(t,e,r){var s=L(t)?wa:lf;return r&&_t(t,e,r)&&(e=a),s(t,b(e,3))}function yp(t,e){var r=L(t)?Se:$a;return r(t,b(e,3))}var Tp=Du(Wu),Pp=Du(ku);function Ap(t,e){return dt(Wr(t,e),1)}function Cp(t,e){return dt(Wr(t,e),Ie)}function Op(t,e,r){return r=r===a?1:B(r),dt(Wr(t,e),r)}function Zu(t,e){var r=L(t)?Nt:ye;return r(t,b(e,3))}function qu(t,e){var r=L(t)?Yc:Ka;return r(t,b(e,3))}var bp=Ir(function(t,e,r){z.call(t,r)?t[r].push(e):ae(t,r,[e])});function Ep(t,e,r,s){t=Tt(t)?t:on(t),r=r&&!s?B(r):0;var o=t.length;return r<0&&(r=ot(o+r,0)),$r(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&Xe(t,e,r)>-1}var Ip=N(function(t,e,r){var s=-1,o=typeof e=="function",f=Tt(t)?v(t.length):[];return ye(t,function(l){f[++s]=o?Ot(e,l,r):Mn(l,e,r)}),f}),Rp=Ir(function(t,e,r){ae(t,r,e)});function Wr(t,e){var r=L(t)?Q:Ja;return r(t,b(e,3))}function Lp(t,e,r,s){return t==null?[]:(L(e)||(e=e==null?[]:[e]),r=s?a:r,L(r)||(r=r==null?[]:[r]),eu(t,e,r))}var Bp=Ir(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]});function Mp(t,e,r){var s=L(t)?Pi:Pa,o=arguments.length<3;return s(t,b(e,4),r,o,ye)}function Np(t,e,r){var s=L(t)?Zc:Pa,o=arguments.length<3;return s(t,b(e,4),r,o,Ka)}function Hp(t,e){var r=L(t)?Se:$a;return r(t,zr(b(e,3)))}function Fp(t){var e=L(t)?Wa:Ef;return e(t)}function Gp(t,e,r){(r?_t(t,e,r):e===a)?e=1:e=B(e);var s=L(t)?uf:If;return s(t,e)}function Wp(t){var e=L(t)?of:Lf;return e(t)}function kp(t){if(t==null)return 0;if(Tt(t))return $r(t)?Qe(t):t.length;var e=vt(t);return e==Yt||e==Zt?t.size:Ki(t).length}function Up(t,e,r){var s=L(t)?Ai:Bf;return r&&_t(t,e,r)&&(e=a),s(t,b(e,3))}var zp=N(function(t,e){if(t==null)return[];var r=e.length;return r>1&&_t(t,e[0],e[1])?e=[]:r>2&&_t(e[0],e[1],e[2])&&(e=[e[0]]),eu(t,dt(e,1),[])}),kr=xh||function(){return lt.Date.now()};function Kp(t,e){if(typeof e!="function")throw new Ht(h);return t=B(t),function(){if(--t<1)return e.apply(this,arguments)}}function Vu(t,e,r){return e=r?a:e,e=t&&e==null?t.length:e,ue(t,ne,a,a,a,a,e)}function Xu(t,e){var r;if(typeof e!="function")throw new Ht(h);return t=B(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=a),r}}var ds=N(function(t,e,r){var s=Z;if(r.length){var o=_e(r,an(ds));s|=Ct}return ue(t,s,e,r,o)}),Ju=N(function(t,e,r){var s=Z|$t;if(r.length){var o=_e(r,an(Ju));s|=Ct}return ue(e,s,t,r,o)});function Qu(t,e,r){e=r?a:e;var s=ue(t,Bt,a,a,a,a,a,e);return s.placeholder=Qu.placeholder,s}function ju(t,e,r){e=r?a:e;var s=ue(t,ge,a,a,a,a,a,e);return s.placeholder=ju.placeholder,s}function to(t,e,r){var s,o,f,l,d,m,_=0,w=!1,x=!1,P=!0;if(typeof t!="function")throw new Ht(h);e=Ut(e)||0,j(r)&&(w=!!r.leading,x="maxWait"in r,f=x?ot(Ut(r.maxWait)||0,e):f,P="trailing"in r?!!r.trailing:P);function C(it){var Jt=s,le=o;return s=o=a,_=it,l=t.apply(le,Jt),l}function E(it){return _=it,d=Wn(H,e),w?C(it):l}function M(it){var Jt=it-m,le=it-_,_o=e-Jt;return x?mt(_o,f-le):_o}function I(it){var Jt=it-m,le=it-_;return m===a||Jt>=e||Jt<0||x&&le>=f}function H(){var it=kr();if(I(it))return G(it);d=Wn(H,M(it))}function G(it){return d=a,P&&s?C(it):(s=o=a,l)}function Rt(){d!==a&&hu(d),_=0,s=m=o=d=a}function wt(){return d===a?l:G(kr())}function Lt(){var it=kr(),Jt=I(it);if(s=arguments,o=this,m=it,Jt){if(d===a)return E(m);if(x)return hu(d),d=Wn(H,e),C(m)}return d===a&&(d=Wn(H,e)),l}return Lt.cancel=Rt,Lt.flush=wt,Lt}var $p=N(function(t,e){return za(t,1,e)}),Yp=N(function(t,e,r){return za(t,Ut(e)||0,r)});function Zp(t){return ue(t,si)}function Ur(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new Ht(h);var r=function(){var s=arguments,o=e?e.apply(this,s):s[0],f=r.cache;if(f.has(o))return f.get(o);var l=t.apply(this,s);return r.cache=f.set(o,l)||f,l};return r.cache=new(Ur.Cache||se),r}Ur.Cache=se;function zr(t){if(typeof t!="function")throw new Ht(h);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function qp(t){return Xu(2,t)}var Vp=Mf(function(t,e){e=e.length==1&&L(e[0])?Q(e[0],bt(b())):Q(dt(e,1),bt(b()));var r=e.length;return N(function(s){for(var o=-1,f=mt(s.length,r);++o<f;)s[o]=e[o].call(this,s[o]);return Ot(t,this,s)})}),gs=N(function(t,e){var r=_e(e,an(gs));return ue(t,Ct,a,e,r)}),eo=N(function(t,e){var r=_e(e,an(eo));return ue(t,me,a,e,r)}),Xp=oe(function(t,e){return ue(t,Dn,a,a,a,e)});function Jp(t,e){if(typeof t!="function")throw new Ht(h);return e=e===a?e:B(e),N(t,e)}function Qp(t,e){if(typeof t!="function")throw new Ht(h);return e=e==null?0:ot(B(e),0),N(function(r){var s=r[e],o=Ae(r,0,e);return s&&De(o,s),Ot(t,this,o)})}function jp(t,e,r){var s=!0,o=!0;if(typeof t!="function")throw new Ht(h);return j(r)&&(s="leading"in r?!!r.leading:s,o="trailing"in r?!!r.trailing:o),to(t,e,{leading:s,maxWait:e,trailing:o})}function td(t){return Vu(t,1)}function ed(t,e){return gs(ji(e),t)}function nd(){if(!arguments.length)return[];var t=arguments[0];return L(t)?t:[t]}function rd(t){return Gt(t,X)}function id(t,e){return e=typeof e=="function"?e:a,Gt(t,X,e)}function sd(t){return Gt(t,O|X)}function ad(t,e){return e=typeof e=="function"?e:a,Gt(t,O|X,e)}function ud(t,e){return e==null||Ua(t,e,pt(e))}function Xt(t,e){return t===e||t!==t&&e!==e}var od=Mr(ki),cd=Mr(function(t,e){return t>=e}),We=qa(function(){return arguments}())?qa:function(t){return tt(t)&&z.call(t,"callee")&&!Ba.call(t,"callee")},L=v.isArray,hd=ga?bt(ga):Sf;function Tt(t){return t!=null&&Kr(t.length)&&!he(t)}function rt(t){return tt(t)&&Tt(t)}function fd(t){return t===!0||t===!1||tt(t)&&Dt(t)==_n}var Ce=Th||As,ld=ma?bt(ma):Df;function pd(t){return tt(t)&&t.nodeType===1&&!kn(t)}function dd(t){if(t==null)return!0;if(Tt(t)&&(L(t)||typeof t=="string"||typeof t.splice=="function"||Ce(t)||un(t)||We(t)))return!t.length;var e=vt(t);if(e==Yt||e==Zt)return!t.size;if(Gn(t))return!Ki(t).length;for(var r in t)if(z.call(t,r))return!1;return!0}function gd(t,e){return Nn(t,e)}function md(t,e,r){r=typeof r=="function"?r:a;var s=r?r(t,e):a;return s===a?Nn(t,e,a,r):!!s}function ms(t){if(!tt(t))return!1;var e=Dt(t);return e==nr||e==Fo||typeof t.message=="string"&&typeof t.name=="string"&&!kn(t)}function vd(t){return typeof t=="number"&&Na(t)}function he(t){if(!j(t))return!1;var e=Dt(t);return e==rr||e==zs||e==Ho||e==Wo}function no(t){return typeof t=="number"&&t==B(t)}function Kr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ve}function j(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function tt(t){return t!=null&&typeof t=="object"}var ro=va?bt(va):wf;function Sd(t,e){return t===e||zi(t,e,as(e))}function Dd(t,e,r){return r=typeof r=="function"?r:a,zi(t,e,as(e),r)}function _d(t){return io(t)&&t!=+t}function wd(t){if(il(t))throw new R(u);return Va(t)}function xd(t){return t===null}function yd(t){return t==null}function io(t){return typeof t=="number"||tt(t)&&Dt(t)==xn}function kn(t){if(!tt(t)||Dt(t)!=re)return!1;var e=vr(t);if(e===null)return!0;var r=z.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&pr.call(r)==Sh}var vs=Sa?bt(Sa):xf;function Td(t){return no(t)&&t>=-ve&&t<=ve}var so=Da?bt(Da):yf;function $r(t){return typeof t=="string"||!L(t)&&tt(t)&&Dt(t)==Tn}function It(t){return typeof t=="symbol"||tt(t)&&Dt(t)==ir}var un=_a?bt(_a):Tf;function Pd(t){return t===a}function Ad(t){return tt(t)&&vt(t)==Pn}function Cd(t){return tt(t)&&Dt(t)==Uo}var Od=Mr($i),bd=Mr(function(t,e){return t<=e});function ao(t){if(!t)return[];if(Tt(t))return $r(t)?qt(t):yt(t);if(On&&t[On])return ah(t[On]());var e=vt(t),r=e==Yt?Ri:e==Zt?hr:on;return r(t)}function fe(t){if(!t)return t===0?t:0;if(t=Ut(t),t===Ie||t===-Ie){var e=t<0?-1:1;return e*Lo}return t===t?t:0}function B(t){var e=fe(t),r=e%1;return e===e?r?e-r:e:0}function uo(t){return t?Ne(B(t),0,Qt):0}function Ut(t){if(typeof t=="number")return t;if(It(t))return tr;if(j(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=j(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Aa(t);var r=cc.test(t);return r||fc.test(t)?zc(t.slice(2),r?2:8):oc.test(t)?tr:+t}function oo(t){return te(t,Pt(t))}function Ed(t){return t?Ne(B(t),-ve,ve):t===0?t:0}function U(t){return t==null?"":Et(t)}var Id=rn(function(t,e){if(Gn(e)||Tt(e)){te(e,pt(e),t);return}for(var r in e)z.call(e,r)&&Ln(t,r,e[r])}),co=rn(function(t,e){te(e,Pt(e),t)}),Yr=rn(function(t,e,r,s){te(e,Pt(e),t,s)}),Rd=rn(function(t,e,r,s){te(e,pt(e),t,s)}),Ld=oe(Fi);function Bd(t,e){var r=nn(t);return e==null?r:ka(r,e)}var Md=N(function(t,e){t=$(t);var r=-1,s=e.length,o=s>2?e[2]:a;for(o&&_t(e[0],e[1],o)&&(s=1);++r<s;)for(var f=e[r],l=Pt(f),d=-1,m=l.length;++d<m;){var _=l[d],w=t[_];(w===a||Xt(w,je[_])&&!z.call(t,_))&&(t[_]=f[_])}return t}),Nd=N(function(t){return t.push(a,Au),Ot(ho,a,t)});function Hd(t,e){return xa(t,b(e,3),jt)}function Fd(t,e){return xa(t,b(e,3),Wi)}function Gd(t,e){return t==null?t:Gi(t,b(e,3),Pt)}function Wd(t,e){return t==null?t:Ya(t,b(e,3),Pt)}function kd(t,e){return t&&jt(t,b(e,3))}function Ud(t,e){return t&&Wi(t,b(e,3))}function zd(t){return t==null?[]:Cr(t,pt(t))}function Kd(t){return t==null?[]:Cr(t,Pt(t))}function Ss(t,e,r){var s=t==null?a:He(t,e);return s===a?r:s}function $d(t,e){return t!=null&&bu(t,e,df)}function Ds(t,e){return t!=null&&bu(t,e,gf)}var Yd=wu(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=dr.call(e)),t[e]=r},ws(At)),Zd=wu(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=dr.call(e)),z.call(t,e)?t[e].push(r):t[e]=[r]},b),qd=N(Mn);function pt(t){return Tt(t)?Ga(t):Ki(t)}function Pt(t){return Tt(t)?Ga(t,!0):Pf(t)}function Vd(t,e){var r={};return e=b(e,3),jt(t,function(s,o,f){ae(r,e(s,o,f),s)}),r}function Xd(t,e){var r={};return e=b(e,3),jt(t,function(s,o,f){ae(r,o,e(s,o,f))}),r}var Jd=rn(function(t,e,r){Or(t,e,r)}),ho=rn(function(t,e,r,s){Or(t,e,r,s)}),Qd=oe(function(t,e){var r={};if(t==null)return r;var s=!1;e=Q(e,function(f){return f=Pe(f,t),s||(s=f.length>1),f}),te(t,is(t),r),s&&(r=Gt(r,O|K|X,Yf));for(var o=e.length;o--;)Xi(r,e[o]);return r});function jd(t,e){return fo(t,zr(b(e)))}var tg=oe(function(t,e){return t==null?{}:Cf(t,e)});function fo(t,e){if(t==null)return{};var r=Q(is(t),function(s){return[s]});return e=b(e),nu(t,r,function(s,o){return e(s,o[0])})}function eg(t,e,r){e=Pe(e,t);var s=-1,o=e.length;for(o||(o=1,t=a);++s<o;){var f=t==null?a:t[ee(e[s])];f===a&&(s=o,f=r),t=he(f)?f.call(t):f}return t}function ng(t,e,r){return t==null?t:Hn(t,e,r)}function rg(t,e,r,s){return s=typeof s=="function"?s:a,t==null?t:Hn(t,e,r,s)}var lo=Tu(pt),po=Tu(Pt);function ig(t,e,r){var s=L(t),o=s||Ce(t)||un(t);if(e=b(e,4),r==null){var f=t&&t.constructor;o?r=s?new f:[]:j(t)?r=he(f)?nn(vr(t)):{}:r={}}return(o?Nt:jt)(t,function(l,d,m){return e(r,l,d,m)}),r}function sg(t,e){return t==null?!0:Xi(t,e)}function ag(t,e,r){return t==null?t:uu(t,e,ji(r))}function ug(t,e,r,s){return s=typeof s=="function"?s:a,t==null?t:uu(t,e,ji(r),s)}function on(t){return t==null?[]:Ii(t,pt(t))}function og(t){return t==null?[]:Ii(t,Pt(t))}function cg(t,e,r){return r===a&&(r=e,e=a),r!==a&&(r=Ut(r),r=r===r?r:0),e!==a&&(e=Ut(e),e=e===e?e:0),Ne(Ut(t),e,r)}function hg(t,e,r){return e=fe(e),r===a?(r=e,e=0):r=fe(r),t=Ut(t),mf(t,e,r)}function fg(t,e,r){if(r&&typeof r!="boolean"&&_t(t,e,r)&&(e=r=a),r===a&&(typeof e=="boolean"?(r=e,e=a):typeof t=="boolean"&&(r=t,t=a)),t===a&&e===a?(t=0,e=1):(t=fe(t),e===a?(e=t,t=0):e=fe(e)),t>e){var s=t;t=e,e=s}if(r||t%1||e%1){var o=Ha();return mt(t+o*(e-t+Uc("1e-"+((o+"").length-1))),e)}return Zi(t,e)}var lg=sn(function(t,e,r){return e=e.toLowerCase(),t+(r?go(e):e)});function go(t){return _s(U(t).toLowerCase())}function mo(t){return t=U(t),t&&t.replace(pc,eh).replace(Rc,"")}function pg(t,e,r){t=U(t),e=Et(e);var s=t.length;r=r===a?s:Ne(B(r),0,s);var o=r;return r-=e.length,r>=0&&t.slice(r,o)==e}function dg(t){return t=U(t),t&&Zo.test(t)?t.replace(Ys,nh):t}function gg(t){return t=U(t),t&&jo.test(t)?t.replace(gi,"\\$&"):t}var mg=sn(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),vg=sn(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),Sg=Su("toLowerCase");function Dg(t,e,r){t=U(t),e=B(e);var s=e?Qe(t):0;if(!e||s>=e)return t;var o=(e-s)/2;return Br(wr(o),r)+t+Br(_r(o),r)}function _g(t,e,r){t=U(t),e=B(e);var s=e?Qe(t):0;return e&&s<e?t+Br(e-s,r):t}function wg(t,e,r){t=U(t),e=B(e);var s=e?Qe(t):0;return e&&s<e?Br(e-s,r)+t:t}function xg(t,e,r){return r||e==null?e=0:e&&(e=+e),Oh(U(t).replace(mi,""),e||0)}function yg(t,e,r){return(r?_t(t,e,r):e===a)?e=1:e=B(e),qi(U(t),e)}function Tg(){var t=arguments,e=U(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var Pg=sn(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});function Ag(t,e,r){return r&&typeof r!="number"&&_t(t,e,r)&&(e=r=a),r=r===a?Qt:r>>>0,r?(t=U(t),t&&(typeof e=="string"||e!=null&&!vs(e))&&(e=Et(e),!e&&Je(t))?Ae(qt(t),0,r):t.split(e,r)):[]}var Cg=sn(function(t,e,r){return t+(r?" ":"")+_s(e)});function Og(t,e,r){return t=U(t),r=r==null?0:Ne(B(r),0,t.length),e=Et(e),t.slice(r,r+e.length)==e}function bg(t,e,r){var s=c.templateSettings;r&&_t(t,e,r)&&(e=a),t=U(t),e=Yr({},e,s,Pu);var o=Yr({},e.imports,s.imports,Pu),f=pt(o),l=Ii(o,f),d,m,_=0,w=e.interpolate||sr,x="__p += '",P=Li((e.escape||sr).source+"|"+w.source+"|"+(w===Zs?uc:sr).source+"|"+(e.evaluate||sr).source+"|$","g"),C="//# sourceURL="+(z.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hc+"]")+`
`;t.replace(P,function(I,H,G,Rt,wt,Lt){return G||(G=Rt),x+=t.slice(_,Lt).replace(dc,rh),H&&(d=!0,x+=`' +
__e(`+H+`) +
'`),wt&&(m=!0,x+=`';
`+wt+`;
__p += '`),G&&(x+=`' +
((__t = (`+G+`)) == null ? '' : __t) +
'`),_=Lt+I.length,I}),x+=`';
`;var E=z.call(e,"variable")&&e.variable;if(!E)x=`with (obj) {
`+x+`
}
`;else if(sc.test(E))throw new R(p);x=(m?x.replace(zo,""):x).replace(Ko,"$1").replace($o,"$1;"),x="function("+(E||"obj")+`) {
`+(E?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(d?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var M=So(function(){return k(f,C+"return "+x).apply(a,l)});if(M.source=x,ms(M))throw M;return M}function Eg(t){return U(t).toLowerCase()}function Ig(t){return U(t).toUpperCase()}function Rg(t,e,r){if(t=U(t),t&&(r||e===a))return Aa(t);if(!t||!(e=Et(e)))return t;var s=qt(t),o=qt(e),f=Ca(s,o),l=Oa(s,o)+1;return Ae(s,f,l).join("")}function Lg(t,e,r){if(t=U(t),t&&(r||e===a))return t.slice(0,Ea(t)+1);if(!t||!(e=Et(e)))return t;var s=qt(t),o=Oa(s,qt(e))+1;return Ae(s,0,o).join("")}function Bg(t,e,r){if(t=U(t),t&&(r||e===a))return t.replace(mi,"");if(!t||!(e=Et(e)))return t;var s=qt(t),o=Ca(s,qt(e));return Ae(s,o).join("")}function Mg(t,e){var r=Co,s=Oo;if(j(e)){var o="separator"in e?e.separator:o;r="length"in e?B(e.length):r,s="omission"in e?Et(e.omission):s}t=U(t);var f=t.length;if(Je(t)){var l=qt(t);f=l.length}if(r>=f)return t;var d=r-Qe(s);if(d<1)return s;var m=l?Ae(l,0,d).join(""):t.slice(0,d);if(o===a)return m+s;if(l&&(d+=m.length-d),vs(o)){if(t.slice(d).search(o)){var _,w=m;for(o.global||(o=Li(o.source,U(qs.exec(o))+"g")),o.lastIndex=0;_=o.exec(w);)var x=_.index;m=m.slice(0,x===a?d:x)}}else if(t.indexOf(Et(o),d)!=d){var P=m.lastIndexOf(o);P>-1&&(m=m.slice(0,P))}return m+s}function Ng(t){return t=U(t),t&&Yo.test(t)?t.replace($s,hh):t}var Hg=sn(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),_s=Su("toUpperCase");function vo(t,e,r){return t=U(t),e=r?a:e,e===a?sh(t)?ph(t):Xc(t):t.match(e)||[]}var So=N(function(t,e){try{return Ot(t,a,e)}catch(r){return ms(r)?r:new R(r)}}),Fg=oe(function(t,e){return Nt(e,function(r){r=ee(r),ae(t,r,ds(t[r],t))}),t});function Gg(t){var e=t==null?0:t.length,r=b();return t=e?Q(t,function(s){if(typeof s[1]!="function")throw new Ht(h);return[r(s[0]),s[1]]}):[],N(function(s){for(var o=-1;++o<e;){var f=t[o];if(Ot(f[0],this,s))return Ot(f[1],this,s)}})}function Wg(t){return ff(Gt(t,O))}function ws(t){return function(){return t}}function kg(t,e){return t==null||t!==t?e:t}var Ug=_u(),zg=_u(!0);function At(t){return t}function xs(t){return Xa(typeof t=="function"?t:Gt(t,O))}function Kg(t){return Qa(Gt(t,O))}function $g(t,e){return ja(t,Gt(e,O))}var Yg=N(function(t,e){return function(r){return Mn(r,t,e)}}),Zg=N(function(t,e){return function(r){return Mn(t,r,e)}});function ys(t,e,r){var s=pt(e),o=Cr(e,s);r==null&&!(j(e)&&(o.length||!s.length))&&(r=e,e=t,t=this,o=Cr(e,pt(e)));var f=!(j(r)&&"chain"in r)||!!r.chain,l=he(t);return Nt(o,function(d){var m=e[d];t[d]=m,l&&(t.prototype[d]=function(){var _=this.__chain__;if(f||_){var w=t(this.__wrapped__),x=w.__actions__=yt(this.__actions__);return x.push({func:m,args:arguments,thisArg:t}),w.__chain__=_,w}return m.apply(t,De([this.value()],arguments))})}),t}function qg(){return lt._===this&&(lt._=Dh),this}function Ts(){}function Vg(t){return t=B(t),N(function(e){return tu(e,t)})}var Xg=es(Q),Jg=es(wa),Qg=es(Ai);function Do(t){return os(t)?Ci(ee(t)):Of(t)}function jg(t){return function(e){return t==null?a:He(t,e)}}var tm=xu(),em=xu(!0);function Ps(){return[]}function As(){return!1}function nm(){return{}}function rm(){return""}function im(){return!0}function sm(t,e){if(t=B(t),t<1||t>ve)return[];var r=Qt,s=mt(t,Qt);e=b(e),t-=Qt;for(var o=Ei(s,e);++r<t;)e(r);return o}function am(t){return L(t)?Q(t,ee):It(t)?[t]:yt(Fu(U(t)))}function um(t){var e=++vh;return U(t)+e}var om=Lr(function(t,e){return t+e},0),cm=ns("ceil"),hm=Lr(function(t,e){return t/e},1),fm=ns("floor");function lm(t){return t&&t.length?Ar(t,At,ki):a}function pm(t,e){return t&&t.length?Ar(t,b(e,2),ki):a}function dm(t){return Ta(t,At)}function gm(t,e){return Ta(t,b(e,2))}function mm(t){return t&&t.length?Ar(t,At,$i):a}function vm(t,e){return t&&t.length?Ar(t,b(e,2),$i):a}var Sm=Lr(function(t,e){return t*e},1),Dm=ns("round"),_m=Lr(function(t,e){return t-e},0);function wm(t){return t&&t.length?bi(t,At):0}function xm(t,e){return t&&t.length?bi(t,b(e,2)):0}return c.after=Kp,c.ary=Vu,c.assign=Id,c.assignIn=co,c.assignInWith=Yr,c.assignWith=Rd,c.at=Ld,c.before=Xu,c.bind=ds,c.bindAll=Fg,c.bindKey=Ju,c.castArray=nd,c.chain=Yu,c.chunk=fl,c.compact=ll,c.concat=pl,c.cond=Gg,c.conforms=Wg,c.constant=ws,c.countBy=wp,c.create=Bd,c.curry=Qu,c.curryRight=ju,c.debounce=to,c.defaults=Md,c.defaultsDeep=Nd,c.defer=$p,c.delay=Yp,c.difference=dl,c.differenceBy=gl,c.differenceWith=ml,c.drop=vl,c.dropRight=Sl,c.dropRightWhile=Dl,c.dropWhile=_l,c.fill=wl,c.filter=yp,c.flatMap=Ap,c.flatMapDeep=Cp,c.flatMapDepth=Op,c.flatten=Uu,c.flattenDeep=xl,c.flattenDepth=yl,c.flip=Zp,c.flow=Ug,c.flowRight=zg,c.fromPairs=Tl,c.functions=zd,c.functionsIn=Kd,c.groupBy=bp,c.initial=Al,c.intersection=Cl,c.intersectionBy=Ol,c.intersectionWith=bl,c.invert=Yd,c.invertBy=Zd,c.invokeMap=Ip,c.iteratee=xs,c.keyBy=Rp,c.keys=pt,c.keysIn=Pt,c.map=Wr,c.mapKeys=Vd,c.mapValues=Xd,c.matches=Kg,c.matchesProperty=$g,c.memoize=Ur,c.merge=Jd,c.mergeWith=ho,c.method=Yg,c.methodOf=Zg,c.mixin=ys,c.negate=zr,c.nthArg=Vg,c.omit=Qd,c.omitBy=jd,c.once=qp,c.orderBy=Lp,c.over=Xg,c.overArgs=Vp,c.overEvery=Jg,c.overSome=Qg,c.partial=gs,c.partialRight=eo,c.partition=Bp,c.pick=tg,c.pickBy=fo,c.property=Do,c.propertyOf=jg,c.pull=Ll,c.pullAll=Ku,c.pullAllBy=Bl,c.pullAllWith=Ml,c.pullAt=Nl,c.range=tm,c.rangeRight=em,c.rearg=Xp,c.reject=Hp,c.remove=Hl,c.rest=Jp,c.reverse=ls,c.sampleSize=Gp,c.set=ng,c.setWith=rg,c.shuffle=Wp,c.slice=Fl,c.sortBy=zp,c.sortedUniq=$l,c.sortedUniqBy=Yl,c.split=Ag,c.spread=Qp,c.tail=Zl,c.take=ql,c.takeRight=Vl,c.takeRightWhile=Xl,c.takeWhile=Jl,c.tap=lp,c.throttle=jp,c.thru=Gr,c.toArray=ao,c.toPairs=lo,c.toPairsIn=po,c.toPath=am,c.toPlainObject=oo,c.transform=ig,c.unary=td,c.union=Ql,c.unionBy=jl,c.unionWith=tp,c.uniq=ep,c.uniqBy=np,c.uniqWith=rp,c.unset=sg,c.unzip=ps,c.unzipWith=$u,c.update=ag,c.updateWith=ug,c.values=on,c.valuesIn=og,c.without=ip,c.words=vo,c.wrap=ed,c.xor=sp,c.xorBy=ap,c.xorWith=up,c.zip=op,c.zipObject=cp,c.zipObjectDeep=hp,c.zipWith=fp,c.entries=lo,c.entriesIn=po,c.extend=co,c.extendWith=Yr,ys(c,c),c.add=om,c.attempt=So,c.camelCase=lg,c.capitalize=go,c.ceil=cm,c.clamp=cg,c.clone=rd,c.cloneDeep=sd,c.cloneDeepWith=ad,c.cloneWith=id,c.conformsTo=ud,c.deburr=mo,c.defaultTo=kg,c.divide=hm,c.endsWith=pg,c.eq=Xt,c.escape=dg,c.escapeRegExp=gg,c.every=xp,c.find=Tp,c.findIndex=Wu,c.findKey=Hd,c.findLast=Pp,c.findLastIndex=ku,c.findLastKey=Fd,c.floor=fm,c.forEach=Zu,c.forEachRight=qu,c.forIn=Gd,c.forInRight=Wd,c.forOwn=kd,c.forOwnRight=Ud,c.get=Ss,c.gt=od,c.gte=cd,c.has=$d,c.hasIn=Ds,c.head=zu,c.identity=At,c.includes=Ep,c.indexOf=Pl,c.inRange=hg,c.invoke=qd,c.isArguments=We,c.isArray=L,c.isArrayBuffer=hd,c.isArrayLike=Tt,c.isArrayLikeObject=rt,c.isBoolean=fd,c.isBuffer=Ce,c.isDate=ld,c.isElement=pd,c.isEmpty=dd,c.isEqual=gd,c.isEqualWith=md,c.isError=ms,c.isFinite=vd,c.isFunction=he,c.isInteger=no,c.isLength=Kr,c.isMap=ro,c.isMatch=Sd,c.isMatchWith=Dd,c.isNaN=_d,c.isNative=wd,c.isNil=yd,c.isNull=xd,c.isNumber=io,c.isObject=j,c.isObjectLike=tt,c.isPlainObject=kn,c.isRegExp=vs,c.isSafeInteger=Td,c.isSet=so,c.isString=$r,c.isSymbol=It,c.isTypedArray=un,c.isUndefined=Pd,c.isWeakMap=Ad,c.isWeakSet=Cd,c.join=El,c.kebabCase=mg,c.last=kt,c.lastIndexOf=Il,c.lowerCase=vg,c.lowerFirst=Sg,c.lt=Od,c.lte=bd,c.max=lm,c.maxBy=pm,c.mean=dm,c.meanBy=gm,c.min=mm,c.minBy=vm,c.stubArray=Ps,c.stubFalse=As,c.stubObject=nm,c.stubString=rm,c.stubTrue=im,c.multiply=Sm,c.nth=Rl,c.noConflict=qg,c.noop=Ts,c.now=kr,c.pad=Dg,c.padEnd=_g,c.padStart=wg,c.parseInt=xg,c.random=fg,c.reduce=Mp,c.reduceRight=Np,c.repeat=yg,c.replace=Tg,c.result=eg,c.round=Dm,c.runInContext=g,c.sample=Fp,c.size=kp,c.snakeCase=Pg,c.some=Up,c.sortedIndex=Gl,c.sortedIndexBy=Wl,c.sortedIndexOf=kl,c.sortedLastIndex=Ul,c.sortedLastIndexBy=zl,c.sortedLastIndexOf=Kl,c.startCase=Cg,c.startsWith=Og,c.subtract=_m,c.sum=wm,c.sumBy=xm,c.template=bg,c.times=sm,c.toFinite=fe,c.toInteger=B,c.toLength=uo,c.toLower=Eg,c.toNumber=Ut,c.toSafeInteger=Ed,c.toString=U,c.toUpper=Ig,c.trim=Rg,c.trimEnd=Lg,c.trimStart=Bg,c.truncate=Mg,c.unescape=Ng,c.uniqueId=um,c.upperCase=Hg,c.upperFirst=_s,c.each=Zu,c.eachRight=qu,c.first=zu,ys(c,function(){var t={};return jt(c,function(e,r){z.call(c.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),c.VERSION=n,Nt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){c[t].placeholder=c}),Nt(["drop","take"],function(t,e){F.prototype[t]=function(r){r=r===a?1:ot(B(r),0);var s=this.__filtered__&&!e?new F(this):this.clone();return s.__filtered__?s.__takeCount__=mt(r,s.__takeCount__):s.__views__.push({size:mt(r,Qt),type:t+(s.__dir__<0?"Right":"")}),s},F.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),Nt(["filter","map","takeWhile"],function(t,e){var r=e+1,s=r==Us||r==Ro;F.prototype[t]=function(o){var f=this.clone();return f.__iteratees__.push({iteratee:b(o,3),type:r}),f.__filtered__=f.__filtered__||s,f}}),Nt(["head","last"],function(t,e){var r="take"+(e?"Right":"");F.prototype[t]=function(){return this[r](1).value()[0]}}),Nt(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");F.prototype[t]=function(){return this.__filtered__?new F(this):this[r](1)}}),F.prototype.compact=function(){return this.filter(At)},F.prototype.find=function(t){return this.filter(t).head()},F.prototype.findLast=function(t){return this.reverse().find(t)},F.prototype.invokeMap=N(function(t,e){return typeof t=="function"?new F(this):this.map(function(r){return Mn(r,t,e)})}),F.prototype.reject=function(t){return this.filter(zr(b(t)))},F.prototype.slice=function(t,e){t=B(t);var r=this;return r.__filtered__&&(t>0||e<0)?new F(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==a&&(e=B(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},F.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},F.prototype.toArray=function(){return this.take(Qt)},jt(F.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),s=/^(?:head|last)$/.test(e),o=c[s?"take"+(e=="last"?"Right":""):e],f=s||/^find/.test(e);o&&(c.prototype[e]=function(){var l=this.__wrapped__,d=s?[1]:arguments,m=l instanceof F,_=d[0],w=m||L(l),x=function(H){var G=o.apply(c,De([H],d));return s&&P?G[0]:G};w&&r&&typeof _=="function"&&_.length!=1&&(m=w=!1);var P=this.__chain__,C=!!this.__actions__.length,E=f&&!P,M=m&&!C;if(!f&&w){l=M?l:new F(this);var I=t.apply(l,d);return I.__actions__.push({func:Gr,args:[x],thisArg:a}),new Ft(I,P)}return E&&M?t.apply(this,d):(I=this.thru(x),E?s?I.value()[0]:I.value():I)})}),Nt(["pop","push","shift","sort","splice","unshift"],function(t){var e=fr[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);c.prototype[t]=function(){var o=arguments;if(s&&!this.__chain__){var f=this.value();return e.apply(L(f)?f:[],o)}return this[r](function(l){return e.apply(L(l)?l:[],o)})}}),jt(F.prototype,function(t,e){var r=c[e];if(r){var s=r.name+"";z.call(en,s)||(en[s]=[]),en[s].push({name:e,func:r})}}),en[Rr(a,$t).name]=[{name:"wrapper",func:a}],F.prototype.clone=Mh,F.prototype.reverse=Nh,F.prototype.value=Hh,c.prototype.at=pp,c.prototype.chain=dp,c.prototype.commit=gp,c.prototype.next=mp,c.prototype.plant=Sp,c.prototype.reverse=Dp,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=_p,c.prototype.first=c.prototype.head,On&&(c.prototype[On]=vp),c},we=dh();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(lt._=we,define(function(){return we})):Re?((Re.exports=we)._=we,xi._=we):lt._=we}).call(cn)});var pe=xo(Cs(),1),ln;(function(a){a[a.fresh=1]="fresh",a[a.brackish=2]="brackish",a[a.salt=3]="salt"})(ln||(ln={}));var hn=class{static{this.fresh=1e3}static{this.brackish=1020}static{this.salt=1030}},Zr=class{static{this.standard=9.80665}},ze=class a{static{this.coefficient=1e5}static pascalToBar(n){return n/a.coefficient}static barToPascal(n){return n*a.coefficient}},qr=class a{static{this.standard=1.01325}static{this.standardPascals=ze.barToPascal(a.standard)}static{this.gasConstant=8.31432}static{this.temperature=288.15}static{this.lapsRate=-.0065}static{this.molarMass=.0289644}static{this.exponent=Zr.standard*a.molarMass/(a.gasConstant*a.lapsRate)}static{this.invertedExponent=1/a.exponent}static pressure(n){let i=a.temperature/(a.temperature+a.lapsRate*n);return a.standardPascals*Math.pow(i,a.exponent)}static altitude(n){if(n>=a.standardPascals)return 0;let i=n/a.standardPascals,u=Math.pow(i,a.invertedExponent);return(a.temperature/u-a.temperature)/a.lapsRate}};var ct=class{constructor(n,i,u,h,p,S){this._n2HalfTime=n,this._n2A=i,this._n2B=u,this._heHalfTime=h,this._heA=p,this._heB=S}get n2HalfTime(){return this._n2HalfTime}get n2A(){return this._n2A}get n2B(){return this._n2B}get heHalfTime(){return this._heHalfTime}get heA(){return this._heA}get heB(){return this._heB}},Ue=class{static{this.buhlmannZHL16C=[new ct(5,1.1696,.5578,1.88,1.6189,.477),new ct(8,1,.6514,3.02,1.383,.5747),new ct(12.5,.8618,.7222,4.72,1.1919,.6527),new ct(18.5,.7562,.7826,6.99,1.0458,.7223),new ct(27,.62,.8125,10.21,.922,.7582),new ct(38.3,.5043,.8434,14.48,.8205,.7957),new ct(54.3,.441,.8693,20.53,.7305,.8279),new ct(77,.4,.891,29.11,.6502,.8553),new ct(109,.375,.9092,41.2,.595,.8757),new ct(146,.35,.9222,55.19,.5545,.8903),new ct(187,.3295,.9319,70.69,.5333,.8997),new ct(239,.3065,.9403,90.34,.5189,.9073),new ct(305,.2835,.9477,115.29,.5181,.9122),new ct(390,.261,.9544,147.42,.5176,.9171),new ct(498,.248,.9602,188.24,.5172,.9217),new ct(635,.2327,.9653,240.03,.5119,.9267)]}},xt=class a{static{this.o2InAir=.209}static{this.nitroxInAir=1-a.o2InAir}static{this.minPpO2=.18}static{this.maxEnd=30}static partialPressure(n,i){return n*i}static mod(n,i){return n/i}static bestMix(n,i,u){let h=u.toBar(i),p=n/h;return p>1?1:p}static ead(n,i,u=a.o2InAir){let h=1-n,p=1-u;return a.end(i,h)/p}static end(n,i,u=0){let h=this.narcoticIndex(u,i);return n*h}static mnd(n,i,u=0){let h=this.narcoticIndex(u,i);return n/h}static ceiling(n,i){let h=a.minPpO2/n*i;return h<i?i:h}static narcoticIndex(n,i=0){return i+n}};var zn=class a extends ct{constructor(n,i){super(n.n2HalfTime,n.n2A,n.n2B,n.heHalfTime,n.heA,n.heB),this._pN2=0,this._pHe=0,this._pTotal=0,this._a=0,this._b=0,this._pN2=a.inspiredN2Pressure(i),this._pHe=0,this.updateCoefficients()}get pN2(){return this._pN2}get pHe(){return this._pHe}get pTotal(){return this._pTotal}get a(){return this._a}get b(){return this._b}static totalPressure(n){return n.pN2+n.pHe}static fromCurrent(n,i){let u=new a(i,1);return u.restoreFrom(n),u}static inspiredN2Pressure(n){let i=a.pressureInLungs(n);return xt.partialPressure(i,xt.nitroxInAir)}static pressureInLungs(n){return n-.0627}restoreFrom(n){this._pN2=n.pN2,this._pHe=n.pHe,this.updateCoefficients()}copy(){return a.fromCurrent(this,this)}mValue(n){return this.a+n/this.b}gradientFactor(n){let i=this.mValue(n),u=(this.pTotal-n)/(i-n);return u<0?0:u}saturationRatio(n){return this.pTotal<n?this.pTotal/n-1:this.gradientFactor(n)}ceiling(n){return(this.pTotal-this.a*n)/(n/this.b+1-n)}load(n,i){this._pN2=this.loadGas(n,i.fN2,this.pN2,this.n2HalfTime),this._pHe=this.loadGas(n,i.fHe,this.pHe,this.heHalfTime);let u=this.pTotal;return this.updateCoefficients(),this.pTotal-u}loadGas(n,i,u,h){let p=n.speed*i,S=a.pressureInLungs(n.startPressure)*i;return this.schreinerEquation(u,S,n.duration,h,p)}schreinerEquation(n,i,u,h,p){let y=.01155245301/h,T=Math.exp(-y*u);return i+p*(u-1/y)-(i-n-p/y)*T}updateCoefficients(){this._pTotal=a.totalPressure(this),this._a=(this.n2A*this.pN2+this.heA*this.pHe)/this.pTotal,this._b=(this.n2B*this.pN2+this.heB*this.pHe)/this.pTotal}},Oe=class a{constructor(n){this._compartments=n}get compartments(){return this._compartments}static createLoaded(n){if(n.length!==Ue.buhlmannZHL16C.length)throw new Error("Provided incompatible count of tissues");let i=(0,pe.default)(n).map((u,h)=>{let p=Ue.buhlmannZHL16C[h];return zn.fromCurrent(u,p)}).value();return new a(i)}static create(n){let i=[];for(let u=0;u<Ue.buhlmannZHL16C.length;u++){let h=Ue.buhlmannZHL16C[u],p=new zn(h,n);i.push(p)}return new a(i)}static createLoadedAt(n){let i=qr.pressure(n),u=ze.pascalToBar(i);return a.create(u).finalState()}static copy(n){let i=[];for(let u=0;u<n.length;u++){let h=n[u].copy();i.push(h)}return i}restoreFrom(n){this._compartments.forEach((i,u)=>i.restoreFrom(n[u]))}finalState(){return(0,pe.default)(this._compartments).map(n=>({pN2:n.pN2,pHe:n.pHe})).value()}saturationRatio(n){return(0,pe.default)(this._compartments).map(i=>i.saturationRatio(n)).value()}ceiling(n){let i=0;for(let u=0;u<this._compartments.length;u++){let h=this._compartments[u].ceiling(n);h>i&&(i=h)}return i}load(n,i){let u=0;for(let h=0;h<this._compartments.length;h++){let S=this._compartments[h].load(n,i);u=u+S}return u}gradientFactor(n){return(0,pe.default)(this._compartments).map(u=>u.gradientFactor(n)).max()||0}},Vr=class a{static validTissue(n){return n.pN2>0&&n.pHe>=0}static validCount(n){return!!n&&n.length===Ue.buhlmannZHL16C.length}static valid(n){return a.validCount(n)?(0,pe.default)(n).every(u=>a.validTissue(u)):!1}},et=class a{static fix(n){return Number(n.toFixed(10))}static roundTwoDecimals(n){return a.round(n,2)}static round(n,i=0){return a.adapt(Math.round,n,i)}static floorTwoDecimals(n){return a.floor(n,2)}static floor(n,i=0){return a.adapt(Math.floor,n,i)}static ceilTwoDecimals(n){return a.ceil(n,2)}static ceil(n,i=0){return a.adapt(Math.ceil,n,i)}static ceilDistance(n,i){return a.adaptDistance(Math.ceil,n,i)}static roundDistance(n,i){return a.adaptDistance(Math.round,n,i)}static floorDistance(n,i){return a.adaptDistance(Math.floor,n,i)}static adapt(n,i,u){let h=Math.pow(10,u);return n(i*h)/h}static adaptDistance(n,i,u){return n(i/u)*u}},de=class{constructor(n){this.options=n}create(){switch(this.options.salinity){case ln.salt:return Ke.forSaltWater(this.options.altitude);case ln.brackish:return Ke.forBrackishWater(this.options.altitude);default:return Ke.forFreshWater(this.options.altitude)}}},Ke=class a{constructor(n,i){this.density=n,this._gravity=Zr.standard;let u=qr.pressure(i);this._surfacePressure=ze.pascalToBar(u)}get surfacePressure(){return this._surfacePressure}static forSaltWater(n=0){return new a(hn.salt,n)}static forBrackishWater(n=0){return new a(hn.brackish,n)}static forFreshWater(n=0){return new a(hn.fresh,n)}static simple(){let n=new a(hn.fresh,0);return n._surfacePressure=1,n._gravity=10,n}toBar(n){let i=this.density*this._gravity;return ze.pascalToBar(n*i)+this._surfacePressure}fromBar(n){if(n<this._surfacePressure)throw new Error("Lower pressure than altitude isn`t convertible to depth.");let i=this.density*this._gravity;return ze.barToPascal(n-this._surfacePressure)/i}},Kn;(function(a){a[a.never=1]="never",a[a.auto=2]="auto",a[a.always=3]="always"})(Kn||(Kn={}));var Y=class a{static{this.altitude=0}static{this.saltWater=ln.salt}static{this.roundStopsToMinutes=!1}static{this.gasSwitchDuration=2}static{this.problemSolvingDuration=1}static{this.lastStopDepth=3}static{this.lastStopDepthRecre=5}static{this.safetyStopRecre=Kn.auto}static{this.decoStopDistance=3}static{this.minimumAutoStopDepth=10}static{this.addSafetyStop=!0}static{this.maxEND=xt.maxEnd}static{this.oxygenNarcotic=!0}static{this.ascentSpeed6m=3}static{this.ascentSpeed50percTo6m=3}static{this.ascentSpeed50perc=9}static{this.descentSpeed=18}static{this.gfLow=.4}static{this.gfHigh=.85}static{this.maxPpO2=1.4}static{this.maxDecoPpO2=1.6}static{this.airBreakOxygenDuration=20}static{this.airBreakBottomGasDuration=5}static setMediumConservatism(n){n.gfLow=a.gfLow,n.gfHigh=a.gfHigh}static useGeneralRecommended(n){n.safetyStop=a.safetyStopRecre,n.roundStopsToMinutes=a.roundStopsToMinutes,n.gasSwitchDuration=a.gasSwitchDuration,n.oxygenNarcotic=a.oxygenNarcotic}},Os=class{constructor(n=!1,i=Y.airBreakOxygenDuration,u=Y.airBreakBottomGasDuration){this.enabled=n,this.oxygenDuration=i,this.bottomGasDuration=u}loadFrom(n){this.enabled=n.enabled,this.oxygenDuration=n.oxygenDuration,this.bottomGasDuration=n.bottomGasDuration}},$n=class{constructor(n=Y.gfLow,i=Y.gfHigh,u=Y.maxPpO2,h=Y.maxDecoPpO2,p=Y.saltWater){this.gfLow=n,this.gfHigh=i,this.maxPpO2=u,this.maxDecoPpO2=h,this.salinity=p,this.altitude=Y.altitude,this.roundStopsToMinutes=Y.roundStopsToMinutes,this.gasSwitchDuration=Y.gasSwitchDuration,this.safetyStop=Y.safetyStopRecre,this.lastStopDepth=Y.lastStopDepth,this.decoStopDistance=Y.decoStopDistance,this.minimumAutoStopDepth=Y.minimumAutoStopDepth,this.maxEND=Y.maxEND,this.oxygenNarcotic=!0,this.ascentSpeed6m=Y.ascentSpeed6m,this.ascentSpeed50percTo6m=Y.ascentSpeed50percTo6m,this.ascentSpeed50perc=Y.ascentSpeed50perc,this.descentSpeed=Y.descentSpeed,this.problemSolvingDuration=Y.problemSolvingDuration,this._airBreaks=new Os,this.gfLow=n||Y.gfLow,this.gfHigh=i||Y.gfHigh,this.maxPpO2=u||Y.maxPpO2,this.maxDecoPpO2=h||Y.maxDecoPpO2,this.salinity=p||Y.saltWater}get airBreaks(){return this._airBreaks}loadFrom(n){this.gfLow=n.gfLow||this.gfLow,this.gfHigh=n.gfHigh||this.gfHigh,this.maxPpO2=n.maxPpO2||this.maxPpO2,this.maxDecoPpO2=n.maxDecoPpO2||this.maxDecoPpO2,this.oxygenNarcotic=n.oxygenNarcotic,this.salinity=n.salinity||this.salinity,this.altitude=n.altitude||n.altitude===0?n.altitude:this.altitude,this.roundStopsToMinutes=n.roundStopsToMinutes,this.gasSwitchDuration=n.gasSwitchDuration||this.gasSwitchDuration,this.problemSolvingDuration=n.problemSolvingDuration||this.problemSolvingDuration,this.lastStopDepth=n.lastStopDepth||this.lastStopDepth,this.decoStopDistance=n.decoStopDistance||this.decoStopDistance,this.minimumAutoStopDepth=n.minimumAutoStopDepth||this.minimumAutoStopDepth,this.safetyStop=n.safetyStop||this.safetyStop,this.maxEND=n.maxEND||this.maxEND,this.ascentSpeed6m=n.ascentSpeed6m||this.ascentSpeed6m,this.ascentSpeed50percTo6m=n.ascentSpeed50percTo6m||this.ascentSpeed50percTo6m,this.ascentSpeed50perc=n.ascentSpeed50perc||this.ascentSpeed50perc,this.descentSpeed=n.descentSpeed||this.descentSpeed,this.airBreaks.loadFrom(n.airBreaks)}},Yn=class{constructor(n,i){this.depthConverter=n,this.options=i}toDecoStop(n){let i=this.depthConverter.fromBar(n);return et.roundDistance(i,this.options.decoStopDistance)}nextStop(n){if(n<=this.options.lastStopDepth)return 0;let i=et.floorDistance(n,this.options.decoStopDistance);if(i!==n)return i;let u=n-this.options.decoStopDistance;return u<=this.options.lastStopDepth?this.options.lastStopDepth:u}addSafetyStop(n,i){return(this.options.safetyStop===Kn.always||this.options.safetyStop===Kn.auto&&i>this.options.minimumAutoStopDepth)&&n===this.options.lastStopDepth}},pn=class{static createAtSurface(n=0){return Oe.createLoadedAt(n)}surfaceGradient(n,i){return Oe.createLoaded(n).gradientFactor(i)}offgasingStart(n){let u=(0,pe.default)(n).map(S=>{if(S.length!==16)throw new Error("Wrong number of tissues in any sample");return zn.totalPressure(S[4])}),h=u.findLastIndex((S,y,T)=>(y>0?T[y-1]:S)<S);if(h<0)return n.length===0?-1:n.length-1;let p=u.findIndex((S,y,T)=>(y>0?T[y-1]:S)>S,h);return p<0?h:p}},gt;(function(a){a[a.noAction=0]="noAction",a[a.error=1]="error",a[a.gasSwitch=2]="gasSwitch",a[a.noDecoEnd=3]="noDecoEnd",a[a.lowPpO2=4]="lowPpO2",a[a.highPpO2=5]="highPpO2",a[a.highAscentSpeed=6]="highAscentSpeed",a[a.highDescentSpeed=7]="highDescentSpeed",a[a.brokenCeiling=8]="brokenCeiling",a[a.maxEndExceeded=9]="maxEndExceeded",a[a.isobaricCounterDiffusion=10]="isobaricCounterDiffusion",a[a.highGasDensity=11]="highGasDensity",a[a.safetyStop=12]="safetyStop",a[a.minDepth=13]="minDepth",a[a.maxDepth=14]="maxDepth",a[a.missingAirBreak=15]="missingAirBreak"})(gt||(gt={}));var ht=class a{constructor(n,i,u,h,p){this.timeStamp=n,this.depth=i,this.type=u,this.message=h,this.gas=p}static create(n,i,u,h){return new a(i,u,n,"",h)}static createError(n){return new a(0,0,gt.error,n)}},st=class{static createError(n){return ht.createError(n)}static createSafetyStopStart(n,i){return ht.create(gt.safetyStop,n,i)}static createNoDecoEnd(n,i){return ht.create(gt.noDecoEnd,n,i)}static createGasSwitch(n,i,u){return ht.create(gt.gasSwitch,n,i,u)}static createLowPpO2(n,i){return ht.create(gt.lowPpO2,n,i)}static createHighPpO2(n,i){return ht.create(gt.highPpO2,n,i)}static createHighAscentSpeed(n,i){return ht.create(gt.highAscentSpeed,n,i)}static createHighDescentSpeed(n,i){return ht.create(gt.highDescentSpeed,n,i)}static createBrokenCeiling(n,i){return ht.create(gt.brokenCeiling,n,i)}static createMaxEndExceeded(n,i,u){return ht.create(gt.maxEndExceeded,n,i,u)}static createIsobaricCounterDiffusion(n,i,u){return ht.create(gt.isobaricCounterDiffusion,n,i,u)}static createHighDensity(n,i,u){return ht.create(gt.highGasDensity,n,i,u)}static createShallowDepth(n){return ht.create(gt.minDepth,0,n)}static createMaxDepth(n){return ht.create(gt.maxDepth,0,n)}static createMissingAirBreak(n,i){return ht.create(gt.missingAirBreak,n,i)}},Zn=class{constructor(){this.items=[]}add(n){this.items.push(n)}},bs=class{constructor(n,i){this.time=n,this.depth=i}get notAtSurface(){return this.depth>0}static isDecoDive(n){for(let i of n)if(i.notAtSurface)return!0;return!1}},be=class a{static{this.emptyTissueOverPressures=[]}constructor(n,i,u){this.seg=n,this._finalTissues=i,this.err=u}get segments(){return this.seg}get finalTissues(){return this._finalTissues}get errors(){return this.err}static fromErrors(n,i){return new a(n,pn.createAtSurface(),i)}static fromProfile(n,i){return new a(n,i,[])}},dn=class a extends be{constructor(n,i,u,h,p,S){super(n,u,S),this.ceil=i,this._tissues=h,this._tissueOverPressures=p}get ceilings(){return this.ceil}get tissues(){return this._tissues}static fromStatisticsProfile(n,i,u,h,p){return new a(n,i,h,p,u,[])}static fromStatisticsErrors(n,i){return new a(n,[],pn.createAtSurface(),[],be.emptyTissueOverPressures,i)}get tissueOverPressures(){return this._tissueOverPressures}},Es=class{static validate(n){let i=[];if(!n.hasBottomGas){let u=st.createError("At least one bottom gas has to be defined.");return i.push(u),i}return i}},Is=class{constructor(n,i){this.gases=n,this.depthConverter=Ke.simple(),this.depthLevels=new Yn(this.depthConverter,i)}bestGas(n){let i=this.depthConverter.toBar(n.currentDepth),u=this.depthConverter.toBar(n.maxEnd),h=n.currentGas;return this.gases.all.forEach(p=>{let S=p.mod(n.maxDecoPpO2),y=this.depthLevels.toDecoStop(S),T=p.end(i,n.oxygenNarcotic);n.currentDepth<=y&&T<=u&&(!h||h.fO2<p.fO2)&&(h=p)}),h}airBreakGas(n,i){let u=this.depthConverter.toBar(n);return(0,pe.default)(this.gases.all).filter(p=>xt.partialPressure(u,p.fO2)>=xt.minPpO2).minBy(p=>p.fO2)||i}},Ee=class a{constructor(){this.items=[]}get all(){return this.items.slice()}get hasBottomGas(){return this.items.length>=1}static fromTanks(n){let i=new a;return n.forEach(u=>{i.add(u.gas)}),i}add(n){this.items.push(n)}isRegistered(n){return this.items.includes(n)}},at=class a{constructor(n,i){if(this._fO2=n,this._fHe=i,this._contentCode=0,this.contentExceeds100percent())throw new Error("O2 + He can't exceed 100 %");this.updateContentCode()}get fN2(){return 1-this._fO2-this._fHe}get fO2(){return this._fO2}get fHe(){return this._fHe}get name(){return a.nameFor(this.fO2,this.fHe)}get contentCode(){return this._contentCode}set fO2(n){this._fO2=n>1?1:n,this.contentExceeds100percent()&&(this._fHe=this.countRemaining(this._fO2)),this.updateContentCode()}set fHe(n){this._fHe=n>.99?.99:n,this.contentExceeds100percent()&&(this._fO2=this.countRemaining(this._fHe)),this.updateContentCode()}static init(n,i){a.nameFor=n,a.byName=i}copy(){return new a(this._fO2,this._fHe)}mod(n){return xt.mod(n,this._fO2)}end(n,i){let u=i?this._fO2:0;return xt.end(n,this.fN2,u)}mnd(n,i){let u=i?this._fO2:0;return xt.mnd(n,this.fN2,u)}ceiling(n){return xt.ceiling(this._fO2,n)}compositionEquals(n){return!!n&&this._fO2===n._fO2&&this._fHe===n._fHe}assignStandardGas(n){let i=a.byName(n);i&&(this.fO2=i.fO2,this.fHe=i.fHe)}contentExceeds100percent(){return this._fO2+this._fHe>1}countRemaining(n){let i=1-n;return et.round(i,5)}updateContentCode(){this._contentCode=et.round(this._fO2*1e4*1e4)+et.round(this._fHe*1e4)}},zt=class a{static{this.oxygen=new at(1,0)}static{this.ean50=new at(.5,0)}static{this.ean38=new at(.38,0)}static{this.ean36=new at(.36,0)}static{this.ean32=new at(.32,0)}static{this.trimix3525=new at(.35,.25)}static{this.trimix2525=new at(.25,.25)}static{this.air=new at(xt.o2InAir,0)}static{this.trimix2135=new at(.21,.35)}static{this.trimix1845=new at(.18,.45)}static{this.trimix1555=new at(.15,.55)}static{this.trimix1260=new at(.12,.6)}static{this.trimix1070=new at(.1,.7)}static{this.airName="Air"}static{this.oxygenName="Oxygen"}static{this.namesRegEx=/[EAN](?<fO2>\d{2})|(?<fO2b>\d{2})\/(?<fHe>\d{2})/i}static{this.map=new Map([[a.airName,a.air],["EAN32",a.ean32],["EAN36",a.ean36],["EAN38",a.ean38],["EAN50",a.ean50],[a.oxygenName,a.oxygen],["Helitrox 35/25",a.trimix3525],["Helitrox 25/25",a.trimix2525],["Helitrox 21/35",a.trimix2135],["Trimix 18/45",a.trimix1845],["Trimix 15/55",a.trimix1555],["Trimix 12/60",a.trimix1260],["Trimix 10/70",a.trimix1070]])}static nitroxNames(){return a.allNames().slice(0,6)}static allNames(){return Array.from(a.map.keys())}static nameFor(n,i=0){let h=et.round(n*100),p=et.round(i*100);return h<=0?"":p<=0?h>=100?a.oxygenName:h===21?a.airName:"EAN"+h.toString():`${h>=21?"Helitrox":"Trimix"} ${h.toString()}/${p.toString()}`}static byName(n){let i=[...a.map.keys()],u=(0,pe.default)(i).filter(p=>p.toLowerCase()===n.toLowerCase()).first();if(u)return a.map.get(u)??null;let h=a.namesRegEx.exec(n);if(h){if(h[1]){let p=Number(h[1])/100;if(p>0)return new at(p,0)}if(h[2]&&h[3]){let p=Number(h[2])/100,S=Number(h[3])/100;if(p>0&&S>0)return new at(p,S)}}return null}};at.init((a,n)=>zt.nameFor(a,n),a=>zt.byName(a));var gn=class a{static haveReserve(n){for(let i=0;i<n.length;i++)if(!n[i].hasReserve)return!1;return!0}static resetConsumption(n){n.forEach(i=>{i.consumed=0,i.reserve=0})}static removeTank(n,i){let u=n.filter(h=>h!==i);return a.renumberIds(u),u}static renumberIds(n){for(let i=0;i<n.length;i++){let u=n[i];u.id=i+1}}},qn=class a{constructor(n,i,u){this.size=n,this.startPressure=i,this.id=0,this.consumed=0,this.reserve=0,this._gas=zt.air.copy(),this.o2=u}get gas(){return this._gas}get o2(){return Xr.getO2(this.gas.fO2,this.gas.fHe)}get he(){let n=this.gas.fHe*100;return et.roundTwoDecimals(n)}get n2(){let n=100-this.o2-this.he;return et.roundTwoDecimals(n)}get volume(){return a.volume(this)}get reserveVolume(){return a.volume2(this.size,this.reserve)}get consumedVolume(){return a.volume2(this.size,this.consumed)}get name(){return this._gas.name}get endPressure(){let n=this.startPressure-this.consumed;return n>0?n:0}get percentsRemaining(){return this.endPressure/this.startPressure*100}get percentsReserve(){let n=this.reserve/this.startPressure*100;return n>100?100:n}get hasReserve(){return this.endPressure>=this.reserve}set o2(n){this._gas.fO2=Xr.setO2(n,this.gas.fHe)}set he(n){this.gas.fHe=n/100}static createDefault(){return new a(15,200,xt.o2InAir*100)}static volume(n){return a.volume2(n.size,n.startPressure)}static volume2(n,i){return n*i}assignStandardGas(n){this.gas.assignStandardGas(n)}loadFrom(n){this.size=n.size,this.startPressure=n.startPressure,this.consumed=n.consumed,this.reserve=n.reserve,this.gas.fO2=n._gas.fO2,this.gas.fHe=n._gas.fHe}},Xr=class a{static{this.pinnedO2=21}static{this.o2InAirPercent=xt.o2InAir*100}static getO2(n,i){let u=n*100;return this.isInAirRange(u,i)?a.pinnedO2:et.roundTwoDecimals(u)}static setO2(n,i){return this.isInAirRange(n,i)?xt.o2InAir:n/100}static isInAirRange(n,i){return a.o2InAirPercent<=n&&n<=a.pinnedO2&&i===0}},$e=class a{static speed(n,i){let u=n.end-n.start;return a.speedByXChange(i.start,i.end,u)}static speedByXChange(n,i,u){return(i-n)/u}static yValueAt(n,i,u){return n+i*u}static xValueAtAbsolute(n,i,u){let h=this.speed(n,i);return n.start+a.xValueAt(i.start,h,u)}static xValueAt(n,i,u){return i===0?0:(u-n)/i}},Rs=class a{static validate(n,i){let u=[];if(!n.any()){let h=st.createError("There needs to be at least one segment at depth.");u.push(h)}return n.items.forEach(h=>{a.validateRegisteredGas(u,i,h)}),u}static validateRegisteredGas(n,i,u){if(!i.isRegistered(u.gas)){let h=`Segment ${u.startDepth}-${u.endDepth} has gas not registered in gases.`,p=st.createError(h);n.push(p)}}},Kt=class a{constructor(n,i,u,h){this._startDepth=n,this._endDepth=i,this._duration=h,u instanceof qn?(this._tank=u,this._gas=u.gas):this._gas=u}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}get duration(){return this._duration}get gas(){return this._gas}get tank(){return this._tank}get speed(){return a.speed(this.startDepth,this.endDepth,this.duration)}get averageDepth(){return(this.startDepth+this.endDepth)/2}set startDepth(n){this._startDepth=n}set endDepth(n){this._endDepth=n}set duration(n){this._duration=n}set tank(n){this._tank=n,n&&(this._gas=n.gas)}static from(n){let i=new a(n.startDepth,n.endDepth,n._gas,n.duration);return i.tank=n.tank,i}static speed(n,i,u){return $e.speedByXChange(n,i,u)}static depthAt(n,i,u){return $e.yValueAt(n,i,u)}static timeAt(n,i,u){return $e.xValueAt(n,i,u)}contentEquals(n){return this.speed===n.speed&&this._gas.compositionEquals(n._gas)}depthAt(n){return a.depthAt(this.startDepth,this.speed,n)}mergeFrom(n){this.duration+=n.duration,this.endDepth=n.endDepth}},St=class a{constructor(){this.segments=[],this._maxDepth=0}get startAscentIndex(){return this.deepestPart().length}get startAscentTime(){let n=this.deepestPart();return a.duration(n)}get length(){return this.segments.length}get items(){return this.segments.slice()}get maxDepth(){return this._maxDepth}get currentDepth(){return this.any()?this.last().endDepth:0}get duration(){return a.duration(this.segments)}static from(n){return a.fromCollection(n.segments)}static fromCollection(n){let i=new a;return n.forEach(u=>{let h=Kt.from(u);i.segments.push(h),i.updateMaxDepth(h)}),i}static duration(n){let i=0;for(let u of n)i+=u.duration;return i}static depthAt(n,i){let u=0;for(let h=0;h<n.length;h++){let p=n[h],S=i-u;if(u<=i&&S<=p.duration)return p.depthAt(S);u+=p.duration}return 0}static averageDepth(n){if(n.length<=0)return 0;let i=0,u=0;return n.forEach(h=>{if(h.duration>0){let p=h.averageDepth*h.duration+u*i;u+=h.duration,i=p/u}}),i}add(n,i,u){let h=new Kt(this.currentDepth,n,i,u);return this.segments.push(h),this.updateMaxDepth(h),h}addFlat(n,i){return this.add(this.currentDepth,n,i)}mergeFlat(n=0){if(n<0)return this.items;let i=[];for(let u=this.segments.length-1;u>n;u--){let h=this.segments[u-1],p=this.segments[u];h.contentEquals(p)&&(h.mergeFrom(p),i.push(p))}return this.segments=this.segments.filter(u=>!i.includes(u)),this.items}remove(n){this.segments=this.segments.filter(i=>i!==n),this.fixStartDepths()}cutDown(n){let i=this.segments.length-n;this.segments=this.segments.slice(0,i),this.fixStartDepths()}any(){return this.segments.length!==0}last(){return this.segments[this.segments.length-1]}copy(){return a.from(this)}fixStartDepths(){this.any()&&(this.segments[0].startDepth=0);for(let n=0;n<this.segments.length-1;n++){let i=this.segments[n],u=this.segments[n+1];u.startDepth=i.endDepth,this.updateMaxDepth(u)}}deepestPart(){for(let n=this.segments.length-1;n>=0;n--)if(this.segments[n].endDepth===this.maxDepth)return this.items.slice(0,n+1);return[]}updateMaxDepth(n){n.endDepth>this._maxDepth&&(this._maxDepth=n.endDepth)}},W=class a{static{this.oneSecond=1}static{this.oneMinute=60}static{this.oneHour=a.oneMinute*60}static{this.oneDay=a.oneHour*24}static{this.safetyStopDuration=a.oneMinute*3}static toSeconds(n){return n*a.oneMinute}static toMinutes(n){return n/a.oneMinute}static toHours(n){return n/a.oneHour}},Jr=class a{static{this.minimalStep=1}constructor(){}search(n){if(n.maxValue<n.initialValue)throw Error("Max value cant be smaller than initial value");if(n.estimationStep>n.maxValue-n.initialValue)throw Error("Step cant be larger than range");let i=this.findInitialLimit(n);return this.searchInsideInterval(n,i)}searchInsideInterval(n,i){for(;i.right-i.left>a.minimalStep;){let u=i.left+(i.right-i.left)/2;u=Math.round(u),n.doWork(u),n.meetsCondition()?i.left=u:i.right=u}return i.left}findInitialLimit(n){let i=n.initialValue;for(n.doWork(i);n.meetsCondition()&&i<=n.maxValue;)i+=n.estimationStep,n.doWork(i);let u=i-n.estimationStep;u=u<n.initialValue?n.initialValue:u;let h=i>n.maxValue?n.maxValue:i;return{left:u,right:h}}},Ls=class{constructor(n,i,u){this.depthConverter=n,this.options=i,this.tissues=u,this.lowestCeiling=0,this.lowestCeiling=this.depthConverter.surfacePressure+1}ceiling(){let n=this.tolerated();return n<this.depthConverter.surfacePressure&&(n=this.depthConverter.surfacePressure),this.depthConverter.fromBar(n)}toleratedTissues(n,i,u,h){let p=this.tissues.compartments,S=0;for(let y=0;y<p.length;y++){let T=p[y],O=S;(n/T.b+T.a-n)*u+n<(i/T.b+T.a-i)*h+i&&(O=(-T.a*T.b*(u*i-h*n)-(1-T.b)*(u-h)*i*n+T.b*(i-n)*T.pTotal)/(-T.a*T.b*(u-h)+(1-T.b)*(h*i-u*n)+T.b*(i-n))),O>=S&&(S=O)}return S}tolerated(){let n=this.options.gfLow,i=this.options.gfHigh,u=this.depthConverter.surfacePressure,h=this.tissues.ceiling(n);return h>this.lowestCeiling&&(this.lowestCeiling=h),this.toleratedTissues(u,this.lowestCeiling,i,n)}},Qr=class a{static{this.sixMeters=6}constructor(n){this.options=n,this.averageDepth=0}markAverageDepth(n){let i=n.deepestPart();this.averageDepth=St.averageDepth(i)}ascent(n){let i=this.averageDepth/2;return n>a.sixMeters?n>i?this.options.ascentSpeed50perc:this.options.ascentSpeed50percTo6m:this.options.ascentSpeed6m}},Bs=class a{constructor(){this.collectSaturation=!0}static get Instance(){return a._instance||(a._instance=new a)}},ke=class a{constructor(n,i,u,h,p){this.gases=n,this.segments=i,this.options=u,this.depthConverter=h,this.ceilings=[],this.tissueOverPressures=[],this.tissuesHistory=[],this.runTime=0,this._oxygenStarted=0,this.collectStatistics=this.noStatistics,this.tissues=Oe.createLoaded(p),this.gradients=new Ls(h,u,this.tissues);let S=i.last();this._currentGas=S.gas,this.bestGasOptions={currentDepth:this.currentDepth,maxDecoPpO2:this.options.maxDecoPpO2,oxygenNarcotic:this.options.oxygenNarcotic,maxEnd:this.options.maxEND,currentGas:this.currentGas},this.speeds=new Qr(this.options),this.levels=new Yn(h,u),this.gasSource=new Is(n,u)}static createWithoutStatistics(n,i,u,h,p){return new a(n,i,u,h,p)}static createForCeilings(n,i,u,h,p){let S=new a(n,i,u,h,p);return S.collectStatistics=S.addCeilingStatistics,S}static createForFullStatistics(n,i,u,h,p){let S=new a(n,i,u,h,p);return S.collectStatistics=S.addFullStatistics,S}get currentGas(){return this._currentGas}get ascentSpeed(){return this.speeds.ascent(this.currentDepth)}get currentDepth(){return this.segments.currentDepth}get addSafetyStop(){return this.levels.addSafetyStop(this.currentDepth,this.segments.maxDepth)}get decoStopDuration(){return this.options.roundStopsToMinutes?W.oneMinute:W.oneSecond}get isAtSurface(){return this.segments.last().endDepth===0}get shouldAddAirBreaks(){return this.isBreathingOxygen&&this.options.airBreaks.enabled}get runTimeOnOxygen(){return this.runTime-this._oxygenStarted}get finalTissues(){return this.tissues.finalState()}get isBreathingOxygen(){return this.currentGas.compositionEquals(zt.oxygen)}set currentGas(n){n.compositionEquals(zt.oxygen)&&!this.isBreathingOxygen&&(this._oxygenStarted=this.runTime),this._currentGas=n}markAverageDepth(){this.speeds.markAverageDepth(this.segments)}withoutStatistics(){return this.collectStatistics=this.noStatistics,this}addCeiling(){let n=this.ceiling(),i=new bs(this.runTime,n);this.ceilings.push(i)}ceiling(){return this.gradients.ceiling()}bestDecoGas(){return this.bestGasOptions.currentDepth=this.currentDepth,this.bestGasOptions.currentGas=this.currentGas,this.gasSource.bestGas(this.bestGasOptions)}addStatistics(n){this.collectStatistics(n)}noStatistics(n){}addCeilingStatistics(n){this.addCeiling()}addFullStatistics(n){if(this.addCeiling(),this.tissuesHistory.push(this.tissues.finalState()),!Bs.Instance.collectSaturation)return;let i=this.depthConverter.toBar(n),u=this.tissues.saturationRatio(i);this.tissueOverPressures.push(u)}loadTissues(n,i){return this.tissues.load(n,i)}createMemento(){return{runTime:this.runTime,oxygenStarted:this._oxygenStarted,tissuesHistory:this.tissuesHistory.length,lastTissues:this.finalTissues,ceilings:this.ceilings.length,tissueOverPressures:this.tissueOverPressures.length,segments:this.segments.length,lowestCeiling:this.gradients.lowestCeiling}}restore(n){this.tissuesHistory=this.tissuesHistory.slice(0,n.tissuesHistory),this.tissues.restoreFrom(n.lastTissues),this.gradients.lowestCeiling=n.lowestCeiling,this.runTime=n.runTime,this._oxygenStarted=n.oxygenStarted,this.ceilings=this.ceilings.slice(0,n.ceilings),this.tissueOverPressures=this.tissueOverPressures.slice(0,n.tissueOverPressures);let i=this.segments.length-n.segments;this.segments.cutDown(i)}nextStop(n){return this.levels.nextStop(n)}shouldSwitchTo(n){return n&&!this.currentGas.compositionEquals(n)}addAscentSegment(n,i){return this.segments.add(n,this.currentGas,i)}addGasSwitchSegment(){let n=this.options.gasSwitchDuration*W.oneMinute;return this.addStopSegment(n)}addStopSegment(n){return this.segments.addFlat(this.currentGas,n)}airBreakGas(){return this.gasSource.airBreakGas(this.currentDepth,this.currentGas)}},Ms=class{constructor(n,i){this.context=n,this.remainingStopTime=i,this.maxOxygenTime=this.context.options.airBreaks.oxygenDuration*W.oneMinute,this.maxBottomGasTime=this.context.options.airBreaks.bottomGasDuration*W.oneMinute,this._initialStopDuration=Math.min(this.remainingStopTime,this.remainingOxygenTime)}get needsStop(){return this.remainingStopTime>0}get maxGasTime(){return this.context.isBreathingOxygen?this.maxOxygenTime:this.maxBottomGasTime}get stopDuration(){return this._initialStopDuration>0?this._initialStopDuration:Math.min(this.remainingStopTime,this.maxGasTime)}get remainingOxygenTime(){let n=this.maxOxygenTime-this.context.runTimeOnOxygen;return n>0?n:0}switchStopGas(){if(!(this._initialStopDuration>0)){if(this.context.isBreathingOxygen){this.context.currentGas=this.context.airBreakGas();return}this.context.currentGas=this.context.bestDecoGas()}}subtractStopDuration(){if(this._initialStopDuration>0){this.subtractRemainingStopTime(this._initialStopDuration),this._initialStopDuration=0;return}this.subtractRemainingStopTime(this.stopDuration)}subtractRemainingStopTime(n){this.remainingStopTime-=n}},Ao=(a,n)=>{let i=W.toMinutes(n);return a/i},Vn=class{constructor(n,i){this.current=n,this.surfaceInterval=i}},Ns=class{constructor(n,i,u){this.previousTissues=n,this.altitude=i,this.surfaceInterval=u}},mn=class a{constructor(n,i,u,h){this._segments=n,this._gases=i,this._options=u,this._surface=this.resolveSurfaceParameters(h)}get segments(){return this._segments}get gases(){return this._gases}get options(){return this._options}get surfaceInterval(){return new Ns(this._surface.current,this.options.altitude,this._surface.surfaceInterval)}static forSimpleDive(n,i,u,h){let p=new Ee;p.add(i);let S=new St,y=Ao(n,u.descentSpeed);return S.add(n,i,y),new a(S,p,u,h)}static forMultilevelDive(n,i,u,h){return new a(n,i,u,h)}resolveSurfaceParameters(n){if(n&&Vr.valid(n?.current))return n;let i=Oe.createLoadedAt(this.options.altitude);return new Vn(i,Number.POSITIVE_INFINITY)}},Ye=class{noDecoLimit({segments:n,gases:i,options:u,surfaceInterval:h}){let p=new de(u).create(),S=this.applySurfaceInterval(h),y=ke.createForCeilings(i,n,u,p,S.finalTissues);return this.swimNoDecoLimit(n,i,y)}decompression(n){return this.decompressionInternal(n,ke.createWithoutStatistics,this.toSimpleProfile,(u,h)=>be.fromErrors(u,h))}decompressionStatistics(n){return this.decompressionInternal(n,ke.createForFullStatistics,this.toFullProfile,(u,h)=>dn.fromStatisticsErrors(u,h))}applySurfaceInterval(n){return this.applySurfaceIntervalInternal(n,ke.createWithoutStatistics,()=>({finalTissues:Oe.createLoadedAt(n.altitude)}),u=>({finalTissues:u.finalTissues}))}applySurfaceIntervalStatistics(n){return this.applySurfaceIntervalInternal(n,ke.createForFullStatistics,()=>({finalTissues:Oe.createLoadedAt(n.altitude),tissueOverPressures:[]}),u=>({finalTissues:u.finalTissues,tissueOverPressures:u.tissueOverPressures}))}decompressionInternal(n,i,u,h){let{segments:p,gases:S,options:y,surfaceInterval:T}=n,O=p.copy(),K=this.validate(p,S);if(K.length>0){let $t=O.mergeFlat(p.length);return h($t,K)}let X=this.applySurfaceInterval(T),nt=new de(y).create(),J=i(S,O,y,nt,X.finalTissues);this.swimPlan(J),J.markAverageDepth();let Z=J.nextStop(J.currentDepth);for(;Z>=0&&!J.isAtSurface;)this.tryGasSwitch(J),this.stayAtDecoStop(J,Z),this.stayAtSafetyStop(J),this.ascentToNextStop(J,Z),Z=J.nextStop(Z);return u(J,n)}toFullProfile(n,i){let u=n.segments.mergeFlat(i.segments.length);return dn.fromStatisticsProfile(u,n.ceilings,n.tissueOverPressures,n.finalTissues,n.tissuesHistory)}toSimpleProfile(n,i){let u=n.segments.mergeFlat(i.segments.length);return be.fromProfile(u,n.finalTissues)}applySurfaceIntervalInternal({previousTissues:n,altitude:i,surfaceInterval:u},h,p,S){if(!Vr.valid(n))throw Error("Provided tissues collection isn`t valid. It needs have valid items of 16 compartments ordered by halftime.");if(i<0)throw Error("Altitude needs to be positive number or 0.");if(u<0)throw Error("Surface interval needs to be positive number or 0.");if(u===Number.POSITIVE_INFINITY)return p();let y=new St,T=y.addFlat(zt.air,u),O=new Ee;O.add(zt.air);let K=new $n(1,1,1.6,1.6,ln.salt);K.altitude=i;let X=new de(K).create(),nt=h(O,y,K,X,n);return this.swim(nt,T),S(nt)}tryGasSwitch(n){let i=n.bestDecoGas();if(n.shouldSwitchTo(i)){n.currentGas=i;let u=n.addGasSwitchSegment();this.swim(n,u)}}stayAtDecoStop(n,i){if(this.needsDecoStop(n,i)){let u=n.createMemento(),h={estimationStep:W.oneMinute*20,initialValue:0,maxValue:W.oneDay,doWork:T=>this.swimDecoStop(n,u,T),meetsCondition:()=>this.needsDecoStop(n,i)},S=new Jr().search(h)+W.oneSecond,y=et.ceilDistance(S,n.decoStopDuration);this.swimDecoStop(n,u,y)}}swimDecoStop(n,i,u){n.restore(i),this.stayAtStop(n,u)}stayAtSafetyStop(n){n.addSafetyStop&&this.stayAtStop(n,W.safetyStopDuration)}stayAtStop(n,i){n.shouldAddAirBreaks?this.swimOxygenStop(n,i):this.swimStopDuration(n,i)}swimOxygenStop(n,i){let u=new Ms(n,i);for(;u.needsStop;)u.switchStopGas(),this.swimStopDuration(n,u.stopDuration),u.subtractStopDuration();n.currentGas=zt.oxygen}swimStopDuration(n,i){let u=n.addStopSegment(i);this.swim(n,u)}needsDecoStop(n,i){if(i>=n.ceiling())return!1;let u=n.createMemento();this.ascentToNextStop(n,i);let h=i<n.ceiling();return n.restore(u),h}ascentToNextStop(n,i){let u=n.currentDepth-i,h=Ao(u,n.ascentSpeed),p=n.addAscentSegment(i,h);this.swim(n,p)}validate(n,i){let u=Rs.validate(n,i);if(u.length>0)return u;let h=Es.validate(i);return h.length>0?h:[]}swimPlan(n){let i=n.segments.items;n.addStatistics(i[0].startDepth),i.forEach(u=>{this.swim(n,u)})}swim(n,i){let u=i.startDepth,h=W.oneSecond;for(let p=0;p<i.duration;p+=h){let S=Kt.depthAt(u,i.speed,h),y=new Kt(u,S,i.gas,h);this.swimPart(n,y),u=y.endDepth}}swimPart(n,i){let u=this.toLoadSegment(n.depthConverter,i);n.loadTissues(u,i.gas),n.runTime+=i.duration,n.addStatistics(i.averageDepth)}swimNoDecoLimit(n,i,u){if(this.validate(n,i).length>0)return 0;this.swimPlan(u);let p=this.currentNdl(u.ceilings);return p!==Number.POSITIVE_INFINITY?p:(u=u.withoutStatistics(),this.predictNoDecoLimit(n,u))}predictNoDecoLimit(n,i){let u=n.last(),h=u.endDepth,p=new Kt(h,h,u.gas,W.oneMinute),S=this.toLoadSegment(i.depthConverter,p),y=1;for(;i.ceiling()<=0&&y>0;)y=i.loadTissues(S,u.gas),i.runTime+=W.oneMinute;return y===0||h===0?Number.POSITIVE_INFINITY:this.floorNdl(i.runTime)}floorNdl(n){let i=W.toMinutes(n);return i=et.floor(i),i-1}currentNdl(n){for(let i=0;i<n.length;i+=W.oneMinute){let u=n[i];if(u.notAtSurface)return this.floorNdl(u.time)}return Number.POSITIVE_INFINITY}toLoadSegment(n,i){let u=n.toBar(i.speed)-n.surfacePressure;return{startPressure:n.toBar(i.startDepth),duration:i.duration,speed:u}}},Xn=class a{static createPlan(n,i,u,h){let p=new St,S=a.descentDuration(n,h);p.add(n,u,S);let y=W.toSeconds(i)-S;return y=y<0?0:y,p.addFlat(u,y),p}static descentDuration(n,i){let u=n/i.descentSpeed;return u=et.ceil(u,1),u=W.toSeconds(u),et.ceil(u)}static emergencyAscent(n,i,u){let p=St.fromCollection(n).deepestPart(),S=p.length;a.addSolvingSegment(p,i.problemSolvingDuration),a.addUserDefinedAscent(p,n,S);let y=St.fromCollection(p),T=Ee.fromTanks(u),O=new Ye,K=mn.forMultilevelDive(y,T,i),nt=O.decompression(K).segments;return nt.slice(S,nt.length)}static addSolvingSegment(n,i){if(n.length===0)return;let u=i*W.oneMinute,h=n[n.length-1],p=h.endDepth,S=new Kt(p,p,h.gas,u);n.push(S)}static addUserDefinedAscent(n,i,u){for(let h=u;h<i.length;h++){let p=i[h];if(!p.tank)return;n.push(p)}}},jr=class{constructor(){this.remaining=new Map}get(n){return this.remaining.get(n)||0}set(n,i){let u=i>0?i:0;this.remaining.set(n,u)}},ti=class a{static{this.defaultPrimaryReserve=30}static{this.defaultStageReserve=20}constructor(n){this.depthConverter=n}static calculateDecompression(n,i,u){let h=Ee.fromTanks(i),p=new Ye,S=n.copy(),y=mn.forMultilevelDive(S,h,u);return p.decompression(y)}consumeFromTanks(n,i,u,h){if(n.length<2)throw new Error("Profile needs to contain at least 2 segments.");let p=Xn.emergencyAscent(n,i,u);this.consumeFromTanks2(n,p,u,h)}consumeFromTanks2(n,i,u,h){if(n.length<2)throw new Error("Profile needs to contain at least 2 segments.");gn.resetConsumption(u),this.updateReserve(i,u,h);let p=T=>T.reserve,S=h.diver.rmv,y=this.toBeConsumedYet(n,S,new jr,T=>!!T.tank);y=this.consumeByTanks(n,y,S,p),y=this.consumeByTanksRemaining(n,y,()=>0),y=this.toBeConsumedYet(n,S,y,T=>!T.tank),y=this.consumeByGases(u,y,p),this.consumeByGases(u,y,()=>0),this.roundTanksConsumedToBars(u)}calculateMaxBottomTime(n,i,u,h){let p=this.createTestProfile(n),S=p.last(),y={estimationStep:W.oneMinute*40,initialValue:0,maxValue:W.oneDay,doWork:X=>{S.duration=X,this.consumeFromProfile(p,i,u,h)},meetsCondition:()=>gn.haveReserve(i)},O=new Jr().search(y);if(O===0)return 0;let K=W.toMinutes(n.duration+O);return et.floor(K)}consumeFromProfile(n,i,u,h){let p=a.calculateDecompression(n,i,h);this.consumeFromTanks(p.segments,h,i,u)}createTestProfile(n){let i=n.copy(),u=n.last();return i.addFlat(u.gas,0),i}updateReserve(n,i,u){let h=this.toBeConsumedYet(n,u.diver.teamStressRmv,new jr,()=>!0);for(let p=0;p<=i.length-1;p++){let S=i[p],y=S.gas.contentCode,T=h.get(y);this.updateTankReserve(S,p,u,T);let O=T-S.reserve*S.size;h.set(y,O)}}updateTankReserve(n,i,u,h){let p=et.ceil(h/n.size),S=p>n.startPressure?n.startPressure:p;n.reserve=this.ensureMinimalReserve(S,i,u)}ensureMinimalReserve(n,i,u){let h=i===0?u.primaryTankReserve:u.stageTankReserve;return n<h?h:n}consumeByGases(n,i,u){for(let h=n.length-1;h>=0;h--){let p=n[h],S=p.gas.contentCode,y=i.get(S),T=this.consumeFromTank(p,y,u);T=T<0?0:T,y-=T,i.set(S,y)}return i}consumeByTanks(n,i,u,h){let p=W.toMinutes(u);return this.consumeBySegmentTank(n,i,h,S=>this.consumedBySegment(S,p))}consumeByTanksRemaining(n,i,u){return this.consumeBySegmentTank(n,i,u,(h,p)=>p)}consumeBySegmentTank(n,i,u,h){return n.forEach(p=>{if(p.tank){let S=p.gas.contentCode,y=i.get(S),T=h(p,y),O=this.consumeFromTank(p.tank,T,u);O=O<0?0:O,y-=O,i.set(S,y)}}),i}consumeFromTank(n,i,u){let h=n.endPressure-u(n);h=h>0?h:0;let p=h*n.size,S=i>p?p:i;return n.consumed+=S/n.size,S}toBeConsumedYet(n,i,u,h){let p=W.toMinutes(i);for(let S=0;S<n.length;S++){let y=n[S];if(h(y)){let O=y.gas.contentCode,K=this.consumedBySegment(y,p),X=u.get(O);X+=K,u.set(O,X)}}return u}consumedBySegment(n,i){let u=this.depthConverter.toBar(n.averageDepth);return et.roundTwoDecimals(n.duration)*u*i}roundTanksConsumedToBars(n){n.forEach(i=>i.consumed=et.ceil(i.consumed))}};var ei=class{constructor(n){this.depthConverter=n,this.minimumPpO2=.5}calculateForProfile(n){let i=0;return n.forEach(u=>{let h=u.gas.fO2,p=this.calculate(h,u.startDepth,u.endDepth,u.duration);i+=p}),i}calculate(n,i,u,h){let p=(i+u)/2,S=this.depthConverter.toBar(p),y=n*S;if(y<=this.minimumPpO2)return 0;let T=this.exponentByPpO2(y),O=Math.exp(T);return h*O*100}exponentByPpO2(n){return n<=1.5?-11.7853+1.93873*n:-23.6349+9.80829*n}},fn=class{static{this.imperialTankSize=124.1}static{this.imperialTankWorkPressure=3442}static{this.imperialStageSize=80.1}static{this.imperialStageWorkPressure=3e3}static{this.mertricTankSize=15}static{this.metricStageSize=11.1}},Hs=class{get available(){return[this.primary,this.stage,{name:"2xLP85",size:165,workingPressure:2640},{name:"S40",size:41.3,workingPressure:3e3},{name:"LP85",size:82.5,workingPressure:2640},{name:"HP80",size:84.4,workingPressure:3442},{name:"HP100",size:106.7,workingPressure:3442}]}get primary(){return{name:"HP117",size:fn.imperialTankSize,workingPressure:fn.imperialTankWorkPressure}}get stage(){return{name:"S80",size:fn.imperialStageSize,workingPressure:fn.imperialStageWorkPressure}}};var yo=class a{static{this.lastStopDepth=15}static{this.depthDistance=10}static{this.descentSpeed=a.depthDistance*6}static{this.recreSpeed=a.depthDistance*3}static{this.maxEnd=a.depthDistance*10}get tanks(){return new Hs}get lastSpeedLevel(){return 20}get autoStopLevel(){return 33}get stopsDistance(){return a.depthDistance}get recreationalOptions(){return{ascentSpeed50perc:a.recreSpeed,ascentSpeed50percTo6m:a.recreSpeed,ascentSpeed6m:a.recreSpeed,descentSpeed:a.descentSpeed,lastStopDepth:a.lastStopDepth,maxEND:a.maxEnd}}get recommendedOptions(){return{ascentSpeed50perc:a.recreSpeed,ascentSpeed50percTo6m:a.depthDistance*2,ascentSpeed6m:a.depthDistance,descentSpeed:a.descentSpeed,lastStopDepth:a.depthDistance,maxEND:a.maxEnd}}},vn=class a{static{this.defaultSac=20}constructor(n=a.defaultSac,i){this.rmv=n,this.stressRmv=i||n*1.5}get teamStressRmv(){return this.stressRmv*2}static gasSac(n,i){return n/i}gasSac(n){return a.gasSac(this.rmv,n.size)}loadFrom(n){this.rmv=n.rmv,this.stressRmv=n.stressRmv}};var Jn=class a{constructor(n,i,u){this.gas=n,this.depth=i,this.density=u}static createDefault(){return new a(zt.air,0,0)}applyHigher(n,i,u){u>this.density&&(this.gas=n,this.density=u,this.depth=i)}},Fs=class{constructor(){this.helium=.179,this.nitrogen=1.251,this.oxygen=1.428}static{this.recommendedMaximum=5.7}forGas(n){return this.forContent(n.fO2,n.fHe)}forContent(n,i){let u=1-n-i,h=this.nitrogen*u,p=this.oxygen*n,S=this.helium*i;return h+p+S}},Qn=class{constructor(n){this.depthConverter=n,this.density=new Fs}forProfile(n){let i=Jn.createDefault();return n.forEach(u=>{let h=u.gas,p=this.density.forGas(h);this.applyHigher(i,h,u.startDepth,p),this.applyHigher(i,h,u.endDepth,p)}),i}atDepth(n,i){let u=this.density.forGas(n);return this.fromAtaDensity(u,i)}applyHigher(n,i,u,h){let p=this.fromAtaDensity(h,u);n.applyHigher(i,u,p)}fromAtaDensity(n,i){let u=this.depthConverter.toBar(i);return n*u}};var ni=class{static{this.dailyLimit=300}constructor(n){this.depthConverter=n,this.minPressure=.5}calculateForProfile(n){let i=0;return n.forEach(u=>{let h=u.gas.fO2,p=this.calculate(u.duration,h,u.startDepth,u.endDepth);i+=p}),i}calculate(n,i,u,h){let p=W.toMinutes(n),S=this.depthConverter.toBar(u),y=this.depthConverter.toBar(h),T=S*i,O=y*i;if(T<=this.minPressure&&O<=this.minPressure)return 0;T<=this.minPressure?(p=p*(O-this.minPressure)/(O-T),T=.501):O<=this.minPressure&&(p=p*(T-this.minPressure)/(T-O),O=.501);let K=T+O-1;return Math.pow(K,5/6)*(1-5*Math.pow(O-T,2)/216/Math.pow(K,2))*p}},Gs=class{constructor(n,i,u){this.startDepth=n,this.endDepth=i,this.duration=u}get minDepth(){return Math.min(this.startDepth,this.endDepth)}get maxDepth(){return Math.max(this.startDepth,this.endDepth)}get isDescent(){return this.startDepth<this.endDepth}get isStop(){return this.startDepth===this.endDepth}get isAscent(){return this.startDepth>this.endDepth}timeAt(n){let i=Kt.speed(this.startDepth,this.endDepth,this.duration),u=Kt.timeAt(this.startDepth,i,n);return et.round(u)}},Ws=class{constructor(n){this.simpleDepths=Ke.simple(),this.events=new Zn,this.elapsed=0,this.index=0,this.fixedMnd=!0,this.profile=n.profile,this.options=n.profileOptions,this.startAscentIndex=n.startAscentIndex,this.maxDensity=n.maxDensity,this.exactDepths=new de(this.options).create(),this.levels=new Yn(this.exactDepths,this.options),this.densityAtDepth=new Qn(this.exactDepths),this.speeds=new Qr(this.options);let i=St.fromCollection(this.profile);this._maxDepth=i.maxDepth,this._totalDuration=i.duration,this.speeds.markAverageDepth(i),this._mndBars=this.simpleDepths.toBar(this.options.maxEND)}get maxDepth(){return this._maxDepth}get totalDuration(){return this._totalDuration}get previous(){return this.index>0?this.profile[this.index-1]:null}get isBeforeDecoAscent(){return this.index<this.startAscentIndex}get maxPpo(){return this.isBeforeDecoAscent?this.options.maxPpO2:this.options.maxDecoPpO2}get current(){return this.profile[this.index]}get switchingGas(){return!!this.previous&&!this.current.gas.compositionEquals(this.previous.gas)}get switchingTank(){return!!this.previous&&!!this.previous.tank&&!!this.current.tank&&this.previous.tank!==this.current.tank}get brokenOxygenDuration(){return this.current.gas.compositionEquals(zt.oxygen)&&this.current.duration>W.oneMinute*20}get maxMnd(){return this._mndBars}get currentEndTime(){return this.elapsed+this.current.duration}get atSafetyStop(){if(this.index!==this.profile.length-2)return!1;let n=this.current.startDepth;return this.levels.addSafetyStop(n,this.maxDepth)}gasEnd(n){let i=this.current.gas,u=this.options.oxygenNarcotic;return i.end(n,u)}addElapsed(){this.elapsed=this.currentEndTime}},ri=class a{static fromProfile(n){let i=new Ws(n),u=new ks(i.events,i.current);for(i.index=0;i.index<n.profile.length;i.index++){let h=this.toPressureSegment(i.current,i.simpleDepths);this.addHighPpO2(i,h),this.addLowPpO2(i,h),this.addGasSwitch(i),this.addUserTankSwitch(i),this.addHighDescentSpeed(i),this.addHighAscentSpeed(i),this.addIsobaricCounterDiffusion(i),this.addMndExceeded(i,h),this.addDensityExceeded(i),this.addSafetyStop(i),this.addMissingAirBreak(i,h),u.assignSegment(i.current),a.addBrokenCeiling(u,n.ceilings),i.addElapsed()}return this.addShallowDepth(i),this.addMaximumDepth(i),i.events}static addHighAscentSpeed(n){let i=n.current,u=W.toSeconds(i.speed);if(u=et.roundTwoDecimals(u),-u>n.speeds.ascent(i.startDepth)){let h=st.createHighAscentSpeed(n.elapsed,i.startDepth);n.events.add(h)}}static addHighDescentSpeed(n){let i=n.current;if(W.toSeconds(i.speed)>n.options.descentSpeed){let h=st.createHighDescentSpeed(n.elapsed,i.startDepth);n.events.add(h)}}static addGasSwitch(n){if(n.switchingGas){let i=n.current,u=st.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(u)}}static addUserTankSwitch(n){if(n.switchingTank){let i=n.current,u=st.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(u)}}static toPressureSegment(n,i){let u=i.toBar(n.startDepth),h=i.toBar(n.endDepth);return new Gs(u,h,n.duration)}static addHighPpO2(n,i){if(i.isDescent||n.isBeforeDecoAscent&&n.switchingGas){let u=n.current.gas.mod(n.maxPpo);if(i.maxDepth>u){let h=i.startDepth,p=n.elapsed;i.startDepth<u&&(h=u,p+=i.timeAt(h));let S=n.simpleDepths.fromBar(h),y=st.createHighPpO2(p,S);n.events.add(y)}}}static addLowPpO2(n,i){let u=n.current,h=u.gas.ceiling(n.simpleDepths.surfacePressure);if(i.minDepth<h&&n.switchingGas||i.startDepth>h&&h>i.endDepth&&i.isAscent||u.startDepth===0&&i.startDepth<h&&i.isDescent){let S=i.startDepth,y=n.elapsed;i.startDepth>h&&(S=h,y+=i.timeAt(S));let T=n.simpleDepths.fromBar(S),O=st.createLowPpO2(y,T);n.events.add(O)}}static addBrokenCeiling(n,i){for(;n.lastCeilingIndex<n.currentSegmentEndTime&&n.lastCeilingIndex<i.length-1;){let u=i[n.lastCeilingIndex];n.lastCeilingIndex++,this.addNdlEnd(n,u);let h=n.belowCeiling(u);if(!h&&n.fixedBrokenCeiling){let p=st.createBrokenCeiling(u.time,u.depth);n.events.add(p),n.fixedBrokenCeiling=!1;break}if(h&&!n.fixedBrokenCeiling&&(n.fixedBrokenCeiling=!0),u.time>n.currentSegmentEndTime)break}}static addNdlEnd(n,i){if(!n.ndlCeilingMarked&&i.depth>0){n.ndlCeilingMarked=!0;let u=i.time-n.currentSegmentStartTime,h=n.current.depthAt(u),p=st.createNoDecoEnd(i.time,h);n.events.add(p)}}static addIsobaricCounterDiffusion(n){let i=n.current,u=n.previous;if(n.switchingGas&&u){let h=i.gas.fN2-u.gas.fN2,p=i.gas.fHe-u.gas.fHe;if(u.gas.fHe>0&&h*5>-p){let S=st.createIsobaricCounterDiffusion(n.elapsed,i.startDepth,i.gas);n.events.add(S)}}}static addMndExceeded(n,i){let u=n.current,h=n.gasEnd(i.startDepth),p=n.gasEnd(i.endDepth);if(n.maxMnd<h&&n.fixedMnd||n.maxMnd<p&&n.fixedMnd)if(i.startDepth>n.maxMnd)this.addMndEvent(n,n.elapsed,u.startDepth);else{let S={start:i.startDepth,end:i.endDepth},y={start:n.elapsed,end:n.elapsed+u.duration},T=$e.xValueAtAbsolute(y,S,n.maxMnd),O=u.depthAt(T-n.elapsed);this.addMndEvent(n,T,O)}n.fixedMnd=p<=n.maxMnd}static addMndEvent(n,i,u){let h=n.current.gas,p=st.createMaxEndExceeded(i,u,h);n.events.add(p),n.fixedMnd=!0}static addDensityExceeded(n){let i=n.current,u=i.gas,h=i.startDepth,p=i.endDepth,S=i.endDepth>i.startDepth,y=n.switchingGas,T=n.densityAtDepth.atDepth(u,h),O=n.densityAtDepth.atDepth(u,p);if(y&&T>n.maxDensity||S&&O>n.maxDensity)if(i.startDepth>i.endDepth){let K=st.createHighDensity(n.elapsed,i.startDepth,i.gas);n.events.add(K)}else{let K={start:T,end:O},X={start:n.elapsed,end:n.elapsed+i.duration},nt=$e.xValueAtAbsolute(X,K,n.maxDensity),J=i.depthAt(nt-n.elapsed),Z=st.createHighDensity(nt,J,i.gas);n.events.add(Z)}}static addSafetyStop(n){let i=n.current;if(n.atSafetyStop&&i.duration>=W.safetyStopDuration){let u=n.elapsed+i.duration-W.safetyStopDuration,h=st.createSafetyStopStart(u,i.endDepth);n.events.add(h)}}static addShallowDepth(n){if(n.maxDepth<9&&n.totalDuration>W.oneHour*5){let i=st.createShallowDepth(n.maxDepth);n.events.add(i)}}static addMaximumDepth(n){if(n.maxDepth>120){let i=st.createMaxDepth(n.maxDepth);n.events.add(i)}}static addMissingAirBreak(n,i){if(n.brokenOxygenDuration&&i.isStop){let u=n.elapsed+n.options.airBreaks.oxygenDuration,h=st.createMissingAirBreak(u,n.current.startDepth);n.events.add(h)}}},ks=class{constructor(n,i){this.events=n,this.lastCeilingIndex=0,this.currentSegmentStartTime=0,this.currentSegmentEndTime=0,this.fixedBrokenCeiling=!0,this.ndlCeilingMarked=!1,this._current=i}get current(){return this._current}assignSegment(n){this.currentSegmentStartTime=this.currentSegmentEndTime,this.currentSegmentEndTime=this.currentSegmentStartTime+n.duration,this._current=n}belowCeiling(n){let i=n.time-this.currentSegmentStartTime;return this._current.depthAt(i)>=n.depth}};var To=class a{static{this.psiRate=14.503773773022}static{this.cftRate=28.316846592}static{this.lbRate=2.20462262185}static{this.footRate=.3048}static{this.poundRate=.00220462262}static{this.lbPerCuftRate=a.poundRate*a.cftRate}get name(){return"Imperial"}get lengthShortcut(){return"ft"}get pressureShortcut(){return"psi"}get volumeShortcut(){return"cuft"}get weightShortcut(){return"lb"}get altitudeShortcut(){return"ft.a.s.l"}get densityShortcut(){return"lb/cuft"}toMeters(n){return n*a.footRate}fromMeters(n){return n/a.footRate}toBar(n){return n/a.psiRate}fromBar(n){return n*a.psiRate}toLiter(n){return n*a.cftRate}fromLiter(n){return n/a.cftRate}fromTankLiters(n,i){return this.fromLiter(n)*i}toTankLiters(n,i){return this.toLiter(n)/i}fromGramPerLiter(n){return n*a.lbPerCuftRate}toGramPerLiter(n){return n/a.lbPerCuftRate}fromKilogram(n){return n*a.lbRate}toKilogram(n){return n/a.lbRate}},Po=class a{static{this.airDensity=1.225}static tankVolumeWeight(n){let i=n.size*n.consumed;return a.volumeWeight(i)}static volumeWeight(n){return n*a.airDensity/1e3}};var jn=xo(Cs());var ft=class a{static toTanks(n){let i=[];return n.forEach(u=>{let h=new qn(u.size,u.startPressure,0);h.id=u.id,h.gas.fO2=u.gas.fO2,h.gas.fHe=u.gas.fHe,i.push(h)}),gn.renumberIds(i),i}static fromTanks(n){let i=[];return n.forEach(u=>{let h=u.tank,p={id:h.id,size:h.size,workPressure:u.workingPressureBars,startPressure:h.startPressure,gas:a.fromGas(h.gas)};i.push(p)}),i}static toConsumed(n){let i=[];for(let u=0;u<n.length;u++){let h=n[u],p={id:h.id,consumed:h.consumed,reserve:h.reserve};i.push(p)}return i}static toSegments(n,i){let u=[];for(let h=0;h<n.length;h++){let p=n[h],S=a.toGas(p.gas),y=new Kt(p.startDepth,p.endDepth,S,p.duration);if(p.tankId>0&&p.tankId<=i.length){let T=p.tankId-1;y.tank=i[T]}u.push(y)}return u}static fromSegments(n){let i=[];return n.forEach(u=>{let h=u.tank?u.tank.id:0,p={startDepth:u.startDepth,endDepth:u.endDepth,duration:u.duration,tankId:h,gas:a.fromGas(u.gas)};i.push(p)}),i}static toProfile(n,i){let u=a.toSegments(n.segments,i);if(n.errors.length>0){let p=a.toEvents(n.errors);return dn.fromStatisticsErrors(u,p.items)}let h=a.toTissues(n.finalTissues);return be.fromProfile(u,h)}static fromProfile(n){return{segments:a.fromSegments(n.segments),finalTissues:a.fromTissues(n.finalTissues),errors:a.fromEvents(n.errors)}}static toTissues(n){return(0,jn.default)(n).map(i=>({pN2:i.pN2,pHe:i.pHe})).value()}static toTissuesHistory(n){return(0,jn.default)(n).map(i=>a.toTissues(i)).value()}static fromTissues(n){return(0,jn.default)(n).map(i=>({pN2:i.pN2,pHe:i.pHe})).value()}static fromTissuesHistory(n){return(0,jn.default)(n).map(i=>a.fromTissues(i)).value()}static toEvents(n){let i=new Zn;return n.forEach(u=>{let h=ht.create(u.type,u.timeStamp,u.depth);h.message=u.message,u.gas&&(h.gas=a.toGas(u.gas)),i.add(h)}),i}static fromEvents(n){let i=[];return n.forEach(u=>{let h={timeStamp:u.timeStamp,depth:u.depth,type:u.type,message:u.message};u.gas&&(h.gas=a.fromGas(u.gas)),i.push(h)}),i}static fromDiver(n){return{rmv:n.rmv,stressRmv:n.stressRmv}}static toDiver(n){return new vn(n.rmv,n.stressRmv)}static fromOptions(n){return{gfLow:n.gfLow,gfHigh:n.gfHigh,maxPpO2:n.maxPpO2,maxDecoPpO2:n.maxDecoPpO2,salinity:n.salinity,altitude:n.altitude,roundStopsToMinutes:n.roundStopsToMinutes,gasSwitchDuration:n.gasSwitchDuration,safetyStop:n.safetyStop,lastStopDepth:n.lastStopDepth,decoStopDistance:n.decoStopDistance,minimumAutoStopDepth:n.minimumAutoStopDepth,maxEND:n.maxEND,oxygenNarcotic:n.oxygenNarcotic,ascentSpeed6m:n.ascentSpeed6m,ascentSpeed50percTo6m:n.ascentSpeed50percTo6m,ascentSpeed50perc:n.ascentSpeed50perc,descentSpeed:n.descentSpeed,problemSolvingDuration:n.problemSolvingDuration,airBreaks:a.fromAirBreaks(n.airBreaks)}}static toOptions(n){let i=new $n(n.gfLow,n.gfHigh,n.maxPpO2,n.maxDecoPpO2,n.salinity);return i.altitude=n.altitude,i.roundStopsToMinutes=n.roundStopsToMinutes,i.gasSwitchDuration=n.gasSwitchDuration,i.safetyStop=n.safetyStop,i.lastStopDepth=n.lastStopDepth,i.decoStopDistance=n.decoStopDistance,i.minimumAutoStopDepth=n.minimumAutoStopDepth,i.maxEND=n.maxEND,i.oxygenNarcotic=n.oxygenNarcotic,i.ascentSpeed6m=n.ascentSpeed6m,i.ascentSpeed50percTo6m=n.ascentSpeed50percTo6m,i.ascentSpeed50perc=n.ascentSpeed50perc,i.descentSpeed=n.descentSpeed,i.problemSolvingDuration=n.problemSolvingDuration,a.toAirBreaks(i.airBreaks,n.airBreaks),i}static fromDensity(n){return{gas:a.fromGas(n.gas),depth:n.depth,density:n.density}}static toDensity(n){let i=a.toGas(n.gas);return new Jn(i,n.depth,n.density)}static toGas(n){return new at(n.fO2,n.fHe)}static fromGas(n){return{fO2:n.fO2,fHe:n.fHe}}static fromAirBreaks(n){return{enabled:n.enabled,oxygenDuration:n.oxygenDuration,bottomGasDuration:n.bottomGasDuration}}static toAirBreaks(n,i){i&&(n.enabled=i.enabled,n.oxygenDuration=i.oxygenDuration,n.bottomGasDuration=i.bottomGasDuration)}};var ii=class a{static calculateDecompression(n){let i=ft.toTanks(n.tanks),u=this.profileParametersFromTask(n,i),p=new Ye().decompression(u),S=ft.fromProfile(p);return{diveId:n.diveId,profile:S}}static diveInfo(n){let i=ft.toTanks(n.tanks),u=this.profileParametersFromTask(n,i),h=new Ye,p=h.decompressionStatistics(u),S=h.noDecoLimit(u),y=new de(n.options).create(),T=ft.toSegments(n.calculatedProfile,i),O=new ni(y).calculateForProfile(T),K=new ei(y).calculateForProfile(T),X=new Qn(y).forProfile(T),nt=St.averageDepth(T),J={maxDensity:n.eventOptions.maxDensity,startAscentIndex:u.segments.startAscentIndex,profile:T,ceilings:p.ceilings,profileOptions:u.options},Z=ri.fromProfile(J),$t=ft.fromEvents(Z.items),Sn=new pn,Bt=ft.toTissues(n.calculatedTissues),ge=Sn.surfaceGradient(Bt,y.surfacePressure),Ct=Sn.offgasingStart(p.tissues),me=St.depthAt(T,Ct);return{diveId:n.diveId,noDeco:S,otu:O,cns:K,density:ft.fromDensity(X),averageDepth:nt,events:$t,surfaceGradient:ge,offgasingStartTime:Ct,offgasingStartDepth:me,ceilings:p.ceilings,tissues:ft.fromTissuesHistory(p.tissues),tissueOverPressures:p.tissueOverPressures}}static calculateConsumption(n){let i=new de(n.options).create(),u=new ti(i),h=ft.toTanks(n.tanks),p=ft.toSegments(n.profile,h),S=ft.toSegments(n.plan,h),y=n.consumptionOptions.diver,T=new vn(y.rmv,y.stressRmv),O=ft.toOptions(n.options),K=a.selectConsumptionPlan(S,n.isComplex),X={diver:T,primaryTankReserve:n.consumptionOptions.primaryTankReserve,stageTankReserve:n.consumptionOptions.stageTankReserve},nt=u.calculateMaxBottomTime(K,h,X,O),J=Xn.emergencyAscent(p,O,h),Z=St.duration(J);return Z=W.toMinutes(Z),u.consumeFromTanks2(p,J,h,X),{diveId:n.diveId,maxTime:nt,timeToSurface:Z,tanks:ft.toConsumed(h)}}static selectConsumptionPlan(n,i){if(i)return St.fromCollection(n);let u=n.slice(0,1);return St.fromCollection(u)}static profileParametersFromTask(n,i){let u=Ee.fromTanks(i),h=ft.toSegments(n.plan,i),p=St.fromCollection(h),S=ft.toOptions(n.options),y=ft.toTissues(n.tissues),T=new Vn(y,n.surfaceInterval);return mn.forMultilevelDive(p,u,S,T)}};addEventListener("message",({data:a})=>{let n=ii.calculateConsumption(a);postMessage(n)});
