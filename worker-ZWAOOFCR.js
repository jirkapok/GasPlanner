var _m=Object.create;var Do=Object.defineProperty;var wm=Object.getOwnPropertyDescriptor;var xm=Object.getOwnPropertyNames;var ym=Object.getPrototypeOf,Am=Object.prototype.hasOwnProperty;var Pm=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports);var Tm=(a,n,i,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let f of xm(n))!Am.call(a,f)&&f!==i&&Do(a,f,{get:()=>n[f],enumerable:!(u=wm(n,f))||u.enumerable});return a};var So=(a,n,i)=>(i=a!=null?_m(ym(a)):{},Tm(n||!a||!a.__esModule?Do(i,"default",{value:a,enumerable:!0}):i,a));var ys=Pm((an,Hn)=>{"use strict";(function(){var a,n="4.17.21",i=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",d="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",y=500,A="__lodash_placeholder__",T=1,q=2,nt=4,pt=1,qt=2,ot=1,Pe=2,Gs=4,Xt=8,Ue=16,Vt=32,ze=64,ee=128,dn=256,ei=512,Ao=30,Po="...",To=800,Co=16,Fs=1,Oo=2,bo=3,Te=1/0,pe=9007199254740991,Eo=17976931348623157e292,Xn=NaN,Jt=4294967295,Io=Jt-1,Ro=Jt>>>1,Bo=[["ary",ee],["bind",ot],["bindKey",Pe],["curry",Xt],["curryRight",Ue],["flip",ei],["partial",Vt],["partialRight",ze],["rearg",dn]],Ke="[object Arguments]",Vn="[object Array]",Lo="[object AsyncFunction]",gn="[object Boolean]",mn="[object Date]",Mo="[object DOMException]",Jn="[object Error]",Qn="[object Function]",Ws="[object GeneratorFunction]",Ut="[object Map]",vn="[object Number]",No="[object Null]",ne="[object Object]",ks="[object Promise]",Ho="[object Proxy]",Dn="[object RegExp]",zt="[object Set]",Sn="[object String]",jn="[object Symbol]",Go="[object Undefined]",_n="[object WeakMap]",Fo="[object WeakSet]",wn="[object ArrayBuffer]",$e="[object DataView]",ni="[object Float32Array]",ri="[object Float64Array]",ii="[object Int8Array]",si="[object Int16Array]",ai="[object Int32Array]",ui="[object Uint8Array]",oi="[object Uint8ClampedArray]",ci="[object Uint16Array]",hi="[object Uint32Array]",Wo=/\b__p \+= '';/g,ko=/\b(__p \+=) '' \+/g,Uo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Us=/&(?:amp|lt|gt|quot|#39);/g,zs=/[&<>"']/g,zo=RegExp(Us.source),Ko=RegExp(zs.source),$o=/<%-([\s\S]+?)%>/g,Yo=/<%([\s\S]+?)%>/g,Ks=/<%=([\s\S]+?)%>/g,Zo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qo=/^\w*$/,Xo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fi=/[\\^$.*+?()[\]{}|]/g,Vo=RegExp(fi.source),li=/^\s+/,Jo=/\s/,Qo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jo=/\{\n\/\* \[wrapped with (.+)\] \*/,tc=/,? & /,ec=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nc=/[()=,{}\[\]\/\s]/,rc=/\\(\\)?/g,ic=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$s=/\w*$/,sc=/^[-+]0x[0-9a-f]+$/i,ac=/^0b[01]+$/i,uc=/^\[object .+?Constructor\]$/,oc=/^0o[0-7]+$/i,cc=/^(?:0|[1-9]\d*)$/,hc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tr=/($^)/,fc=/['\n\r\u2028\u2029\\]/g,er="\\ud800-\\udfff",lc="\\u0300-\\u036f",pc="\\ufe20-\\ufe2f",dc="\\u20d0-\\u20ff",Ys=lc+pc+dc,Zs="\\u2700-\\u27bf",qs="a-z\\xdf-\\xf6\\xf8-\\xff",gc="\\xac\\xb1\\xd7\\xf7",mc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",vc="\\u2000-\\u206f",Dc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xs="A-Z\\xc0-\\xd6\\xd8-\\xde",Vs="\\ufe0e\\ufe0f",Js=gc+mc+vc+Dc,pi="['\u2019]",Sc="["+er+"]",Qs="["+Js+"]",nr="["+Ys+"]",js="\\d+",_c="["+Zs+"]",ta="["+qs+"]",ea="[^"+er+Js+js+Zs+qs+Xs+"]",di="\\ud83c[\\udffb-\\udfff]",wc="(?:"+nr+"|"+di+")",na="[^"+er+"]",gi="(?:\\ud83c[\\udde6-\\uddff]){2}",mi="[\\ud800-\\udbff][\\udc00-\\udfff]",Ye="["+Xs+"]",ra="\\u200d",ia="(?:"+ta+"|"+ea+")",xc="(?:"+Ye+"|"+ea+")",sa="(?:"+pi+"(?:d|ll|m|re|s|t|ve))?",aa="(?:"+pi+"(?:D|LL|M|RE|S|T|VE))?",ua=wc+"?",oa="["+Vs+"]?",yc="(?:"+ra+"(?:"+[na,gi,mi].join("|")+")"+oa+ua+")*",Ac="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ca=oa+ua+yc,Tc="(?:"+[_c,gi,mi].join("|")+")"+ca,Cc="(?:"+[na+nr+"?",nr,gi,mi,Sc].join("|")+")",Oc=RegExp(pi,"g"),bc=RegExp(nr,"g"),vi=RegExp(di+"(?="+di+")|"+Cc+ca,"g"),Ec=RegExp([Ye+"?"+ta+"+"+sa+"(?="+[Qs,Ye,"$"].join("|")+")",xc+"+"+aa+"(?="+[Qs,Ye+ia,"$"].join("|")+")",Ye+"?"+ia+"+"+sa,Ye+"+"+aa,Pc,Ac,js,Tc].join("|"),"g"),Ic=RegExp("["+ra+er+Ys+Vs+"]"),Rc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lc=-1,Z={};Z[ni]=Z[ri]=Z[ii]=Z[si]=Z[ai]=Z[ui]=Z[oi]=Z[ci]=Z[hi]=!0,Z[Ke]=Z[Vn]=Z[wn]=Z[gn]=Z[$e]=Z[mn]=Z[Jn]=Z[Qn]=Z[Ut]=Z[vn]=Z[ne]=Z[Dn]=Z[zt]=Z[Sn]=Z[_n]=!1;var Y={};Y[Ke]=Y[Vn]=Y[wn]=Y[$e]=Y[gn]=Y[mn]=Y[ni]=Y[ri]=Y[ii]=Y[si]=Y[ai]=Y[Ut]=Y[vn]=Y[ne]=Y[Dn]=Y[zt]=Y[Sn]=Y[jn]=Y[ui]=Y[oi]=Y[ci]=Y[hi]=!0,Y[Jn]=Y[Qn]=Y[_n]=!1;var Mc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Nc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Gc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fc=parseFloat,Wc=parseInt,ha=typeof global=="object"&&global&&global.Object===Object&&global,kc=typeof self=="object"&&self&&self.Object===Object&&self,ct=ha||kc||Function("return this")(),Di=typeof an=="object"&&an&&!an.nodeType&&an,Ce=Di&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,fa=Ce&&Ce.exports===Di,Si=fa&&ha.process,Rt=function(){try{var g=Ce&&Ce.require&&Ce.require("util").types;return g||Si&&Si.binding&&Si.binding("util")}catch{}}(),la=Rt&&Rt.isArrayBuffer,pa=Rt&&Rt.isDate,da=Rt&&Rt.isMap,ga=Rt&&Rt.isRegExp,ma=Rt&&Rt.isSet,va=Rt&&Rt.isTypedArray;function Tt(g,D,v){switch(v.length){case 0:return g.call(D);case 1:return g.call(D,v[0]);case 2:return g.call(D,v[0],v[1]);case 3:return g.call(D,v[0],v[1],v[2])}return g.apply(D,v)}function Uc(g,D,v,C){for(var R=-1,k=g==null?0:g.length;++R<k;){var it=g[R];D(C,it,v(it),g)}return C}function Bt(g,D){for(var v=-1,C=g==null?0:g.length;++v<C&&D(g[v],v,g)!==!1;);return g}function zc(g,D){for(var v=g==null?0:g.length;v--&&D(g[v],v,g)!==!1;);return g}function Da(g,D){for(var v=-1,C=g==null?0:g.length;++v<C;)if(!D(g[v],v,g))return!1;return!0}function de(g,D){for(var v=-1,C=g==null?0:g.length,R=0,k=[];++v<C;){var it=g[v];D(it,v,g)&&(k[R++]=it)}return k}function rr(g,D){var v=g==null?0:g.length;return!!v&&Ze(g,D,0)>-1}function _i(g,D,v){for(var C=-1,R=g==null?0:g.length;++C<R;)if(v(D,g[C]))return!0;return!1}function X(g,D){for(var v=-1,C=g==null?0:g.length,R=Array(C);++v<C;)R[v]=D(g[v],v,g);return R}function ge(g,D){for(var v=-1,C=D.length,R=g.length;++v<C;)g[R+v]=D[v];return g}function wi(g,D,v,C){var R=-1,k=g==null?0:g.length;for(C&&k&&(v=g[++R]);++R<k;)v=D(v,g[R],R,g);return v}function Kc(g,D,v,C){var R=g==null?0:g.length;for(C&&R&&(v=g[--R]);R--;)v=D(v,g[R],R,g);return v}function xi(g,D){for(var v=-1,C=g==null?0:g.length;++v<C;)if(D(g[v],v,g))return!0;return!1}var $c=yi("length");function Yc(g){return g.split("")}function Zc(g){return g.match(ec)||[]}function Sa(g,D,v){var C;return v(g,function(R,k,it){if(D(R,k,it))return C=k,!1}),C}function ir(g,D,v,C){for(var R=g.length,k=v+(C?1:-1);C?k--:++k<R;)if(D(g[k],k,g))return k;return-1}function Ze(g,D,v){return D===D?sh(g,D,v):ir(g,_a,v)}function qc(g,D,v,C){for(var R=v-1,k=g.length;++R<k;)if(C(g[R],D))return R;return-1}function _a(g){return g!==g}function wa(g,D){var v=g==null?0:g.length;return v?Pi(g,D)/v:Xn}function yi(g){return function(D){return D==null?a:D[g]}}function Ai(g){return function(D){return g==null?a:g[D]}}function xa(g,D,v,C,R){return R(g,function(k,it,K){v=C?(C=!1,k):D(v,k,it,K)}),v}function Xc(g,D){var v=g.length;for(g.sort(D);v--;)g[v]=g[v].value;return g}function Pi(g,D){for(var v,C=-1,R=g.length;++C<R;){var k=D(g[C]);k!==a&&(v=v===a?k:v+k)}return v}function Ti(g,D){for(var v=-1,C=Array(g);++v<g;)C[v]=D(v);return C}function Vc(g,D){return X(D,function(v){return[v,g[v]]})}function ya(g){return g&&g.slice(0,Ca(g)+1).replace(li,"")}function Ct(g){return function(D){return g(D)}}function Ci(g,D){return X(D,function(v){return g[v]})}function xn(g,D){return g.has(D)}function Aa(g,D){for(var v=-1,C=g.length;++v<C&&Ze(D,g[v],0)>-1;);return v}function Pa(g,D){for(var v=g.length;v--&&Ze(D,g[v],0)>-1;);return v}function Jc(g,D){for(var v=g.length,C=0;v--;)g[v]===D&&++C;return C}var Qc=Ai(Mc),jc=Ai(Nc);function th(g){return"\\"+Gc[g]}function eh(g,D){return g==null?a:g[D]}function qe(g){return Ic.test(g)}function nh(g){return Rc.test(g)}function rh(g){for(var D,v=[];!(D=g.next()).done;)v.push(D.value);return v}function Oi(g){var D=-1,v=Array(g.size);return g.forEach(function(C,R){v[++D]=[R,C]}),v}function Ta(g,D){return function(v){return g(D(v))}}function me(g,D){for(var v=-1,C=g.length,R=0,k=[];++v<C;){var it=g[v];(it===D||it===A)&&(g[v]=A,k[R++]=v)}return k}function sr(g){var D=-1,v=Array(g.size);return g.forEach(function(C){v[++D]=C}),v}function ih(g){var D=-1,v=Array(g.size);return g.forEach(function(C){v[++D]=[C,C]}),v}function sh(g,D,v){for(var C=v-1,R=g.length;++C<R;)if(g[C]===D)return C;return-1}function ah(g,D,v){for(var C=v+1;C--;)if(g[C]===D)return C;return C}function Xe(g){return qe(g)?oh(g):$c(g)}function Kt(g){return qe(g)?ch(g):Yc(g)}function Ca(g){for(var D=g.length;D--&&Jo.test(g.charAt(D)););return D}var uh=Ai(Hc);function oh(g){for(var D=vi.lastIndex=0;vi.test(g);)++D;return D}function ch(g){return g.match(vi)||[]}function hh(g){return g.match(Ec)||[]}var fh=function g(D){D=D==null?ct:ve.defaults(ct.Object(),D,ve.pick(ct,Bc));var v=D.Array,C=D.Date,R=D.Error,k=D.Function,it=D.Math,K=D.Object,bi=D.RegExp,lh=D.String,Lt=D.TypeError,ar=v.prototype,ph=k.prototype,Ve=K.prototype,ur=D["__core-js_shared__"],or=ph.toString,z=Ve.hasOwnProperty,dh=0,Oa=function(){var t=/[^.]+$/.exec(ur&&ur.keys&&ur.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),cr=Ve.toString,gh=or.call(K),mh=ct._,vh=bi("^"+or.call(z).replace(fi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hr=fa?D.Buffer:a,De=D.Symbol,fr=D.Uint8Array,ba=hr?hr.allocUnsafe:a,lr=Ta(K.getPrototypeOf,K),Ea=K.create,Ia=Ve.propertyIsEnumerable,pr=ar.splice,Ra=De?De.isConcatSpreadable:a,yn=De?De.iterator:a,Oe=De?De.toStringTag:a,dr=function(){try{var t=Be(K,"defineProperty");return t({},"",{}),t}catch{}}(),Dh=D.clearTimeout!==ct.clearTimeout&&D.clearTimeout,Sh=C&&C.now!==ct.Date.now&&C.now,_h=D.setTimeout!==ct.setTimeout&&D.setTimeout,gr=it.ceil,mr=it.floor,Ei=K.getOwnPropertySymbols,wh=hr?hr.isBuffer:a,Ba=D.isFinite,xh=ar.join,yh=Ta(K.keys,K),st=it.max,dt=it.min,Ah=C.now,Ph=D.parseInt,La=it.random,Th=ar.reverse,Ii=Be(D,"DataView"),An=Be(D,"Map"),Ri=Be(D,"Promise"),Je=Be(D,"Set"),Pn=Be(D,"WeakMap"),Tn=Be(K,"create"),vr=Pn&&new Pn,Qe={},Ch=Le(Ii),Oh=Le(An),bh=Le(Ri),Eh=Le(Je),Ih=Le(Pn),Dr=De?De.prototype:a,Cn=Dr?Dr.valueOf:a,Ma=Dr?Dr.toString:a;function c(t){if(J(t)&&!B(t)&&!(t instanceof G)){if(t instanceof Mt)return t;if(z.call(t,"__wrapped__"))return Nu(t)}return new Mt(t)}var je=function(){function t(){}return function(e){if(!V(e))return{};if(Ea)return Ea(e);t.prototype=e;var r=new t;return t.prototype=a,r}}();function Sr(){}function Mt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}c.templateSettings={escape:$o,evaluate:Yo,interpolate:Ks,variable:"",imports:{_:c}},c.prototype=Sr.prototype,c.prototype.constructor=c,Mt.prototype=je(Sr.prototype),Mt.prototype.constructor=Mt;function G(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Jt,this.__views__=[]}function Rh(){var t=new G(this.__wrapped__);return t.__actions__=wt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=wt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=wt(this.__views__),t}function Bh(){if(this.__filtered__){var t=new G(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Lh(){var t=this.__wrapped__.value(),e=this.__dir__,r=B(t),s=e<0,o=r?t.length:0,h=Zf(0,o,this.__views__),l=h.start,p=h.end,m=p-l,S=s?p:l-1,_=this.__iteratees__,x=_.length,P=0,O=dt(m,this.__takeCount__);if(!r||!s&&o==m&&O==m)return su(t,this.__actions__);var E=[];t:for(;m--&&P<O;){S+=e;for(var M=-1,I=t[S];++M<x;){var H=_[M],F=H.iteratee,Et=H.type,Dt=F(I);if(Et==Oo)I=Dt;else if(!Dt){if(Et==Fs)continue t;break t}}E[P++]=I}return E}G.prototype=je(Sr.prototype),G.prototype.constructor=G;function be(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function Mh(){this.__data__=Tn?Tn(null):{},this.size=0}function Nh(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Hh(t){var e=this.__data__;if(Tn){var r=e[t];return r===w?a:r}return z.call(e,t)?e[t]:a}function Gh(t){var e=this.__data__;return Tn?e[t]!==a:z.call(e,t)}function Fh(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Tn&&e===a?w:e,this}be.prototype.clear=Mh,be.prototype.delete=Nh,be.prototype.get=Hh,be.prototype.has=Gh,be.prototype.set=Fh;function re(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function Wh(){this.__data__=[],this.size=0}function kh(t){var e=this.__data__,r=_r(e,t);if(r<0)return!1;var s=e.length-1;return r==s?e.pop():pr.call(e,r,1),--this.size,!0}function Uh(t){var e=this.__data__,r=_r(e,t);return r<0?a:e[r][1]}function zh(t){return _r(this.__data__,t)>-1}function Kh(t,e){var r=this.__data__,s=_r(r,t);return s<0?(++this.size,r.push([t,e])):r[s][1]=e,this}re.prototype.clear=Wh,re.prototype.delete=kh,re.prototype.get=Uh,re.prototype.has=zh,re.prototype.set=Kh;function ie(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var s=t[e];this.set(s[0],s[1])}}function $h(){this.size=0,this.__data__={hash:new be,map:new(An||re),string:new be}}function Yh(t){var e=Rr(this,t).delete(t);return this.size-=e?1:0,e}function Zh(t){return Rr(this,t).get(t)}function qh(t){return Rr(this,t).has(t)}function Xh(t,e){var r=Rr(this,t),s=r.size;return r.set(t,e),this.size+=r.size==s?0:1,this}ie.prototype.clear=$h,ie.prototype.delete=Yh,ie.prototype.get=Zh,ie.prototype.has=qh,ie.prototype.set=Xh;function Ee(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new ie;++e<r;)this.add(t[e])}function Vh(t){return this.__data__.set(t,w),this}function Jh(t){return this.__data__.has(t)}Ee.prototype.add=Ee.prototype.push=Vh,Ee.prototype.has=Jh;function $t(t){var e=this.__data__=new re(t);this.size=e.size}function Qh(){this.__data__=new re,this.size=0}function jh(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function tf(t){return this.__data__.get(t)}function ef(t){return this.__data__.has(t)}function nf(t,e){var r=this.__data__;if(r instanceof re){var s=r.__data__;if(!An||s.length<i-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new ie(s)}return r.set(t,e),this.size=r.size,this}$t.prototype.clear=Qh,$t.prototype.delete=jh,$t.prototype.get=tf,$t.prototype.has=ef,$t.prototype.set=nf;function Na(t,e){var r=B(t),s=!r&&Me(t),o=!r&&!s&&ye(t),h=!r&&!s&&!o&&rn(t),l=r||s||o||h,p=l?Ti(t.length,lh):[],m=p.length;for(var S in t)(e||z.call(t,S))&&!(l&&(S=="length"||o&&(S=="offset"||S=="parent")||h&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||oe(S,m)))&&p.push(S);return p}function Ha(t){var e=t.length;return e?t[zi(0,e-1)]:a}function rf(t,e){return Br(wt(t),Ie(e,0,t.length))}function sf(t){return Br(wt(t))}function Bi(t,e,r){(r!==a&&!Yt(t[e],r)||r===a&&!(e in t))&&se(t,e,r)}function On(t,e,r){var s=t[e];(!(z.call(t,e)&&Yt(s,r))||r===a&&!(e in t))&&se(t,e,r)}function _r(t,e){for(var r=t.length;r--;)if(Yt(t[r][0],e))return r;return-1}function af(t,e,r,s){return Se(t,function(o,h,l){e(s,o,r(o),l)}),s}function Ga(t,e){return t&&jt(e,ht(e),t)}function uf(t,e){return t&&jt(e,yt(e),t)}function se(t,e,r){e=="__proto__"&&dr?dr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Li(t,e){for(var r=-1,s=e.length,o=v(s),h=t==null;++r<s;)o[r]=h?a:ds(t,e[r]);return o}function Ie(t,e,r){return t===t&&(r!==a&&(t=t<=r?t:r),e!==a&&(t=t>=e?t:e)),t}function Nt(t,e,r,s,o,h){var l,p=e&T,m=e&q,S=e&nt;if(r&&(l=o?r(t,s,o,h):r(t)),l!==a)return l;if(!V(t))return t;var _=B(t);if(_){if(l=Xf(t),!p)return wt(t,l)}else{var x=gt(t),P=x==Qn||x==Ws;if(ye(t))return ou(t,p);if(x==ne||x==Ke||P&&!o){if(l=m||P?{}:Cu(t),!p)return m?Gf(t,uf(l,t)):Hf(t,Ga(l,t))}else{if(!Y[x])return o?t:{};l=Vf(t,x,p)}}h||(h=new $t);var O=h.get(t);if(O)return O;h.set(t,l),no(t)?t.forEach(function(I){l.add(Nt(I,e,r,I,t,h))}):to(t)&&t.forEach(function(I,H){l.set(H,Nt(I,e,r,H,t,h))});var E=S?m?ts:ji:m?yt:ht,M=_?a:E(t);return Bt(M||t,function(I,H){M&&(H=I,I=t[H]),On(l,H,Nt(I,e,r,H,t,h))}),l}function of(t){var e=ht(t);return function(r){return Fa(r,t,e)}}function Fa(t,e,r){var s=r.length;if(t==null)return!s;for(t=K(t);s--;){var o=r[s],h=e[o],l=t[o];if(l===a&&!(o in t)||!h(l))return!1}return!0}function Wa(t,e,r){if(typeof t!="function")throw new Lt(f);return Mn(function(){t.apply(a,r)},e)}function bn(t,e,r,s){var o=-1,h=rr,l=!0,p=t.length,m=[],S=e.length;if(!p)return m;r&&(e=X(e,Ct(r))),s?(h=_i,l=!1):e.length>=i&&(h=xn,l=!1,e=new Ee(e));t:for(;++o<p;){var _=t[o],x=r==null?_:r(_);if(_=s||_!==0?_:0,l&&x===x){for(var P=S;P--;)if(e[P]===x)continue t;m.push(_)}else h(e,x,s)||m.push(_)}return m}var Se=pu(Qt),ka=pu(Ni,!0);function cf(t,e){var r=!0;return Se(t,function(s,o,h){return r=!!e(s,o,h),r}),r}function wr(t,e,r){for(var s=-1,o=t.length;++s<o;){var h=t[s],l=e(h);if(l!=null&&(p===a?l===l&&!bt(l):r(l,p)))var p=l,m=h}return m}function hf(t,e,r,s){var o=t.length;for(r=L(r),r<0&&(r=-r>o?0:o+r),s=s===a||s>o?o:L(s),s<0&&(s+=o),s=r>s?0:io(s);r<s;)t[r++]=e;return t}function Ua(t,e){var r=[];return Se(t,function(s,o,h){e(s,o,h)&&r.push(s)}),r}function ft(t,e,r,s,o){var h=-1,l=t.length;for(r||(r=Qf),o||(o=[]);++h<l;){var p=t[h];e>0&&r(p)?e>1?ft(p,e-1,r,s,o):ge(o,p):s||(o[o.length]=p)}return o}var Mi=du(),za=du(!0);function Qt(t,e){return t&&Mi(t,e,ht)}function Ni(t,e){return t&&za(t,e,ht)}function xr(t,e){return de(e,function(r){return ce(t[r])})}function Re(t,e){e=we(e,t);for(var r=0,s=e.length;t!=null&&r<s;)t=t[te(e[r++])];return r&&r==s?t:a}function Ka(t,e,r){var s=e(t);return B(t)?s:ge(s,r(t))}function mt(t){return t==null?t===a?Go:No:Oe&&Oe in K(t)?Yf(t):sl(t)}function Hi(t,e){return t>e}function ff(t,e){return t!=null&&z.call(t,e)}function lf(t,e){return t!=null&&e in K(t)}function pf(t,e,r){return t>=dt(e,r)&&t<st(e,r)}function Gi(t,e,r){for(var s=r?_i:rr,o=t[0].length,h=t.length,l=h,p=v(h),m=1/0,S=[];l--;){var _=t[l];l&&e&&(_=X(_,Ct(e))),m=dt(_.length,m),p[l]=!r&&(e||o>=120&&_.length>=120)?new Ee(l&&_):a}_=t[0];var x=-1,P=p[0];t:for(;++x<o&&S.length<m;){var O=_[x],E=e?e(O):O;if(O=r||O!==0?O:0,!(P?xn(P,E):s(S,E,r))){for(l=h;--l;){var M=p[l];if(!(M?xn(M,E):s(t[l],E,r)))continue t}P&&P.push(E),S.push(O)}}return S}function df(t,e,r,s){return Qt(t,function(o,h,l){e(s,r(o),h,l)}),s}function En(t,e,r){e=we(e,t),t=Iu(t,e);var s=t==null?t:t[te(Gt(e))];return s==null?a:Tt(s,t,r)}function $a(t){return J(t)&&mt(t)==Ke}function gf(t){return J(t)&&mt(t)==wn}function mf(t){return J(t)&&mt(t)==mn}function In(t,e,r,s,o){return t===e?!0:t==null||e==null||!J(t)&&!J(e)?t!==t&&e!==e:vf(t,e,r,s,In,o)}function vf(t,e,r,s,o,h){var l=B(t),p=B(e),m=l?Vn:gt(t),S=p?Vn:gt(e);m=m==Ke?ne:m,S=S==Ke?ne:S;var _=m==ne,x=S==ne,P=m==S;if(P&&ye(t)){if(!ye(e))return!1;l=!0,_=!1}if(P&&!_)return h||(h=new $t),l||rn(t)?Au(t,e,r,s,o,h):Kf(t,e,m,r,s,o,h);if(!(r&pt)){var O=_&&z.call(t,"__wrapped__"),E=x&&z.call(e,"__wrapped__");if(O||E){var M=O?t.value():t,I=E?e.value():e;return h||(h=new $t),o(M,I,r,s,h)}}return P?(h||(h=new $t),$f(t,e,r,s,o,h)):!1}function Df(t){return J(t)&&gt(t)==Ut}function Fi(t,e,r,s){var o=r.length,h=o,l=!s;if(t==null)return!h;for(t=K(t);o--;){var p=r[o];if(l&&p[2]?p[1]!==t[p[0]]:!(p[0]in t))return!1}for(;++o<h;){p=r[o];var m=p[0],S=t[m],_=p[1];if(l&&p[2]){if(S===a&&!(m in t))return!1}else{var x=new $t;if(s)var P=s(S,_,m,t,e,x);if(!(P===a?In(_,S,pt|qt,s,x):P))return!1}}return!0}function Ya(t){if(!V(t)||tl(t))return!1;var e=ce(t)?vh:uc;return e.test(Le(t))}function Sf(t){return J(t)&&mt(t)==Dn}function _f(t){return J(t)&&gt(t)==zt}function wf(t){return J(t)&&Fr(t.length)&&!!Z[mt(t)]}function Za(t){return typeof t=="function"?t:t==null?At:typeof t=="object"?B(t)?Va(t[0],t[1]):Xa(t):mo(t)}function Wi(t){if(!Ln(t))return yh(t);var e=[];for(var r in K(t))z.call(t,r)&&r!="constructor"&&e.push(r);return e}function xf(t){if(!V(t))return il(t);var e=Ln(t),r=[];for(var s in t)s=="constructor"&&(e||!z.call(t,s))||r.push(s);return r}function ki(t,e){return t<e}function qa(t,e){var r=-1,s=xt(t)?v(t.length):[];return Se(t,function(o,h,l){s[++r]=e(o,h,l)}),s}function Xa(t){var e=ns(t);return e.length==1&&e[0][2]?bu(e[0][0],e[0][1]):function(r){return r===t||Fi(r,t,e)}}function Va(t,e){return is(t)&&Ou(e)?bu(te(t),e):function(r){var s=ds(r,t);return s===a&&s===e?gs(r,t):In(e,s,pt|qt)}}function yr(t,e,r,s,o){t!==e&&Mi(e,function(h,l){if(o||(o=new $t),V(h))yf(t,e,l,r,yr,s,o);else{var p=s?s(as(t,l),h,l+"",t,e,o):a;p===a&&(p=h),Bi(t,l,p)}},yt)}function yf(t,e,r,s,o,h,l){var p=as(t,r),m=as(e,r),S=l.get(m);if(S){Bi(t,r,S);return}var _=h?h(p,m,r+"",t,e,l):a,x=_===a;if(x){var P=B(m),O=!P&&ye(m),E=!P&&!O&&rn(m);_=m,P||O||E?B(p)?_=p:j(p)?_=wt(p):O?(x=!1,_=ou(m,!0)):E?(x=!1,_=cu(m,!0)):_=[]:Nn(m)||Me(m)?(_=p,Me(p)?_=so(p):(!V(p)||ce(p))&&(_=Cu(m))):x=!1}x&&(l.set(m,_),o(_,m,s,h,l),l.delete(m)),Bi(t,r,_)}function Ja(t,e){var r=t.length;if(r)return e+=e<0?r:0,oe(e,r)?t[e]:a}function Qa(t,e,r){e.length?e=X(e,function(h){return B(h)?function(l){return Re(l,h.length===1?h[0]:h)}:h}):e=[At];var s=-1;e=X(e,Ct(b()));var o=qa(t,function(h,l,p){var m=X(e,function(S){return S(h)});return{criteria:m,index:++s,value:h}});return Xc(o,function(h,l){return Nf(h,l,r)})}function Af(t,e){return ja(t,e,function(r,s){return gs(t,s)})}function ja(t,e,r){for(var s=-1,o=e.length,h={};++s<o;){var l=e[s],p=Re(t,l);r(p,l)&&Rn(h,we(l,t),p)}return h}function Pf(t){return function(e){return Re(e,t)}}function Ui(t,e,r,s){var o=s?qc:Ze,h=-1,l=e.length,p=t;for(t===e&&(e=wt(e)),r&&(p=X(t,Ct(r)));++h<l;)for(var m=0,S=e[h],_=r?r(S):S;(m=o(p,_,m,s))>-1;)p!==t&&pr.call(p,m,1),pr.call(t,m,1);return t}function tu(t,e){for(var r=t?e.length:0,s=r-1;r--;){var o=e[r];if(r==s||o!==h){var h=o;oe(o)?pr.call(t,o,1):Yi(t,o)}}return t}function zi(t,e){return t+mr(La()*(e-t+1))}function Tf(t,e,r,s){for(var o=-1,h=st(gr((e-t)/(r||1)),0),l=v(h);h--;)l[s?h:++o]=t,t+=r;return l}function Ki(t,e){var r="";if(!t||e<1||e>pe)return r;do e%2&&(r+=t),e=mr(e/2),e&&(t+=t);while(e);return r}function N(t,e){return us(Eu(t,e,At),t+"")}function Cf(t){return Ha(sn(t))}function Of(t,e){var r=sn(t);return Br(r,Ie(e,0,r.length))}function Rn(t,e,r,s){if(!V(t))return t;e=we(e,t);for(var o=-1,h=e.length,l=h-1,p=t;p!=null&&++o<h;){var m=te(e[o]),S=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return t;if(o!=l){var _=p[m];S=s?s(_,m,p):a,S===a&&(S=V(_)?_:oe(e[o+1])?[]:{})}On(p,m,S),p=p[m]}return t}var eu=vr?function(t,e){return vr.set(t,e),t}:At,bf=dr?function(t,e){return dr(t,"toString",{configurable:!0,enumerable:!1,value:vs(e),writable:!0})}:At;function Ef(t){return Br(sn(t))}function Ht(t,e,r){var s=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var h=v(o);++s<o;)h[s]=t[s+e];return h}function If(t,e){var r;return Se(t,function(s,o,h){return r=e(s,o,h),!r}),!!r}function Ar(t,e,r){var s=0,o=t==null?s:t.length;if(typeof e=="number"&&e===e&&o<=Ro){for(;s<o;){var h=s+o>>>1,l=t[h];l!==null&&!bt(l)&&(r?l<=e:l<e)?s=h+1:o=h}return o}return $i(t,e,At,r)}function $i(t,e,r,s){var o=0,h=t==null?0:t.length;if(h===0)return 0;e=r(e);for(var l=e!==e,p=e===null,m=bt(e),S=e===a;o<h;){var _=mr((o+h)/2),x=r(t[_]),P=x!==a,O=x===null,E=x===x,M=bt(x);if(l)var I=s||E;else S?I=E&&(s||P):p?I=E&&P&&(s||!O):m?I=E&&P&&!O&&(s||!M):O||M?I=!1:I=s?x<=e:x<e;I?o=_+1:h=_}return dt(h,Io)}function nu(t,e){for(var r=-1,s=t.length,o=0,h=[];++r<s;){var l=t[r],p=e?e(l):l;if(!r||!Yt(p,m)){var m=p;h[o++]=l===0?0:l}}return h}function ru(t){return typeof t=="number"?t:bt(t)?Xn:+t}function Ot(t){if(typeof t=="string")return t;if(B(t))return X(t,Ot)+"";if(bt(t))return Ma?Ma.call(t):"";var e=t+"";return e=="0"&&1/t==-Te?"-0":e}function _e(t,e,r){var s=-1,o=rr,h=t.length,l=!0,p=[],m=p;if(r)l=!1,o=_i;else if(h>=i){var S=e?null:Uf(t);if(S)return sr(S);l=!1,o=xn,m=new Ee}else m=e?[]:p;t:for(;++s<h;){var _=t[s],x=e?e(_):_;if(_=r||_!==0?_:0,l&&x===x){for(var P=m.length;P--;)if(m[P]===x)continue t;e&&m.push(x),p.push(_)}else o(m,x,r)||(m!==p&&m.push(x),p.push(_))}return p}function Yi(t,e){return e=we(e,t),t=Iu(t,e),t==null||delete t[te(Gt(e))]}function iu(t,e,r,s){return Rn(t,e,r(Re(t,e)),s)}function Pr(t,e,r,s){for(var o=t.length,h=s?o:-1;(s?h--:++h<o)&&e(t[h],h,t););return r?Ht(t,s?0:h,s?h+1:o):Ht(t,s?h+1:0,s?o:h)}function su(t,e){var r=t;return r instanceof G&&(r=r.value()),wi(e,function(s,o){return o.func.apply(o.thisArg,ge([s],o.args))},r)}function Zi(t,e,r){var s=t.length;if(s<2)return s?_e(t[0]):[];for(var o=-1,h=v(s);++o<s;)for(var l=t[o],p=-1;++p<s;)p!=o&&(h[o]=bn(h[o]||l,t[p],e,r));return _e(ft(h,1),e,r)}function au(t,e,r){for(var s=-1,o=t.length,h=e.length,l={};++s<o;){var p=s<h?e[s]:a;r(l,t[s],p)}return l}function qi(t){return j(t)?t:[]}function Xi(t){return typeof t=="function"?t:At}function we(t,e){return B(t)?t:is(t,e)?[t]:Mu(U(t))}var Rf=N;function xe(t,e,r){var s=t.length;return r=r===a?s:r,!e&&r>=s?t:Ht(t,e,r)}var uu=Dh||function(t){return ct.clearTimeout(t)};function ou(t,e){if(e)return t.slice();var r=t.length,s=ba?ba(r):new t.constructor(r);return t.copy(s),s}function Vi(t){var e=new t.constructor(t.byteLength);return new fr(e).set(new fr(t)),e}function Bf(t,e){var r=e?Vi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Lf(t){var e=new t.constructor(t.source,$s.exec(t));return e.lastIndex=t.lastIndex,e}function Mf(t){return Cn?K(Cn.call(t)):{}}function cu(t,e){var r=e?Vi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function hu(t,e){if(t!==e){var r=t!==a,s=t===null,o=t===t,h=bt(t),l=e!==a,p=e===null,m=e===e,S=bt(e);if(!p&&!S&&!h&&t>e||h&&l&&m&&!p&&!S||s&&l&&m||!r&&m||!o)return 1;if(!s&&!h&&!S&&t<e||S&&r&&o&&!s&&!h||p&&r&&o||!l&&o||!m)return-1}return 0}function Nf(t,e,r){for(var s=-1,o=t.criteria,h=e.criteria,l=o.length,p=r.length;++s<l;){var m=hu(o[s],h[s]);if(m){if(s>=p)return m;var S=r[s];return m*(S=="desc"?-1:1)}}return t.index-e.index}function fu(t,e,r,s){for(var o=-1,h=t.length,l=r.length,p=-1,m=e.length,S=st(h-l,0),_=v(m+S),x=!s;++p<m;)_[p]=e[p];for(;++o<l;)(x||o<h)&&(_[r[o]]=t[o]);for(;S--;)_[p++]=t[o++];return _}function lu(t,e,r,s){for(var o=-1,h=t.length,l=-1,p=r.length,m=-1,S=e.length,_=st(h-p,0),x=v(_+S),P=!s;++o<_;)x[o]=t[o];for(var O=o;++m<S;)x[O+m]=e[m];for(;++l<p;)(P||o<h)&&(x[O+r[l]]=t[o++]);return x}function wt(t,e){var r=-1,s=t.length;for(e||(e=v(s));++r<s;)e[r]=t[r];return e}function jt(t,e,r,s){var o=!r;r||(r={});for(var h=-1,l=e.length;++h<l;){var p=e[h],m=s?s(r[p],t[p],p,r,t):a;m===a&&(m=t[p]),o?se(r,p,m):On(r,p,m)}return r}function Hf(t,e){return jt(t,rs(t),e)}function Gf(t,e){return jt(t,Pu(t),e)}function Tr(t,e){return function(r,s){var o=B(r)?Uc:af,h=e?e():{};return o(r,t,b(s,2),h)}}function tn(t){return N(function(e,r){var s=-1,o=r.length,h=o>1?r[o-1]:a,l=o>2?r[2]:a;for(h=t.length>3&&typeof h=="function"?(o--,h):a,l&&vt(r[0],r[1],l)&&(h=o<3?a:h,o=1),e=K(e);++s<o;){var p=r[s];p&&t(e,p,s,h)}return e})}function pu(t,e){return function(r,s){if(r==null)return r;if(!xt(r))return t(r,s);for(var o=r.length,h=e?o:-1,l=K(r);(e?h--:++h<o)&&s(l[h],h,l)!==!1;);return r}}function du(t){return function(e,r,s){for(var o=-1,h=K(e),l=s(e),p=l.length;p--;){var m=l[t?p:++o];if(r(h[m],m,h)===!1)break}return e}}function Ff(t,e,r){var s=e&ot,o=Bn(t);function h(){var l=this&&this!==ct&&this instanceof h?o:t;return l.apply(s?r:this,arguments)}return h}function gu(t){return function(e){e=U(e);var r=qe(e)?Kt(e):a,s=r?r[0]:e.charAt(0),o=r?xe(r,1).join(""):e.slice(1);return s[t]()+o}}function en(t){return function(e){return wi(po(lo(e).replace(Oc,"")),t,"")}}function Bn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=je(t.prototype),s=t.apply(r,e);return V(s)?s:r}}function Wf(t,e,r){var s=Bn(t);function o(){for(var h=arguments.length,l=v(h),p=h,m=nn(o);p--;)l[p]=arguments[p];var S=h<3&&l[0]!==m&&l[h-1]!==m?[]:me(l,m);if(h-=S.length,h<r)return _u(t,e,Cr,o.placeholder,a,l,S,a,a,r-h);var _=this&&this!==ct&&this instanceof o?s:t;return Tt(_,this,l)}return o}function mu(t){return function(e,r,s){var o=K(e);if(!xt(e)){var h=b(r,3);e=ht(e),r=function(p){return h(o[p],p,o)}}var l=t(e,r,s);return l>-1?o[h?e[l]:l]:a}}function vu(t){return ue(function(e){var r=e.length,s=r,o=Mt.prototype.thru;for(t&&e.reverse();s--;){var h=e[s];if(typeof h!="function")throw new Lt(f);if(o&&!l&&Ir(h)=="wrapper")var l=new Mt([],!0)}for(s=l?s:r;++s<r;){h=e[s];var p=Ir(h),m=p=="wrapper"?es(h):a;m&&ss(m[0])&&m[1]==(ee|Xt|Vt|dn)&&!m[4].length&&m[9]==1?l=l[Ir(m[0])].apply(l,m[3]):l=h.length==1&&ss(h)?l[p]():l.thru(h)}return function(){var S=arguments,_=S[0];if(l&&S.length==1&&B(_))return l.plant(_).value();for(var x=0,P=r?e[x].apply(this,S):_;++x<r;)P=e[x].call(this,P);return P}})}function Cr(t,e,r,s,o,h,l,p,m,S){var _=e&ee,x=e&ot,P=e&Pe,O=e&(Xt|Ue),E=e&ei,M=P?a:Bn(t);function I(){for(var H=arguments.length,F=v(H),Et=H;Et--;)F[Et]=arguments[Et];if(O)var Dt=nn(I),It=Jc(F,Dt);if(s&&(F=fu(F,s,o,O)),h&&(F=lu(F,h,l,O)),H-=It,O&&H<S){var tt=me(F,Dt);return _u(t,e,Cr,I.placeholder,r,F,tt,p,m,S-H)}var Zt=x?r:this,fe=P?Zt[t]:t;return H=F.length,p?F=al(F,p):E&&H>1&&F.reverse(),_&&m<H&&(F.length=m),this&&this!==ct&&this instanceof I&&(fe=M||Bn(fe)),fe.apply(Zt,F)}return I}function Du(t,e){return function(r,s){return df(r,t,e(s),{})}}function Or(t,e){return function(r,s){var o;if(r===a&&s===a)return e;if(r!==a&&(o=r),s!==a){if(o===a)return s;typeof r=="string"||typeof s=="string"?(r=Ot(r),s=Ot(s)):(r=ru(r),s=ru(s)),o=t(r,s)}return o}}function Ji(t){return ue(function(e){return e=X(e,Ct(b())),N(function(r){var s=this;return t(e,function(o){return Tt(o,s,r)})})})}function br(t,e){e=e===a?" ":Ot(e);var r=e.length;if(r<2)return r?Ki(e,t):e;var s=Ki(e,gr(t/Xe(e)));return qe(e)?xe(Kt(s),0,t).join(""):s.slice(0,t)}function kf(t,e,r,s){var o=e&ot,h=Bn(t);function l(){for(var p=-1,m=arguments.length,S=-1,_=s.length,x=v(_+m),P=this&&this!==ct&&this instanceof l?h:t;++S<_;)x[S]=s[S];for(;m--;)x[S++]=arguments[++p];return Tt(P,o?r:this,x)}return l}function Su(t){return function(e,r,s){return s&&typeof s!="number"&&vt(e,r,s)&&(r=s=a),e=he(e),r===a?(r=e,e=0):r=he(r),s=s===a?e<r?1:-1:he(s),Tf(e,r,s,t)}}function Er(t){return function(e,r){return typeof e=="string"&&typeof r=="string"||(e=Ft(e),r=Ft(r)),t(e,r)}}function _u(t,e,r,s,o,h,l,p,m,S){var _=e&Xt,x=_?l:a,P=_?a:l,O=_?h:a,E=_?a:h;e|=_?Vt:ze,e&=~(_?ze:Vt),e&Gs||(e&=~(ot|Pe));var M=[t,e,o,O,x,E,P,p,m,S],I=r.apply(a,M);return ss(t)&&Ru(I,M),I.placeholder=s,Bu(I,t,e)}function Qi(t){var e=it[t];return function(r,s){if(r=Ft(r),s=s==null?0:dt(L(s),292),s&&Ba(r)){var o=(U(r)+"e").split("e"),h=e(o[0]+"e"+(+o[1]+s));return o=(U(h)+"e").split("e"),+(o[0]+"e"+(+o[1]-s))}return e(r)}}var Uf=Je&&1/sr(new Je([,-0]))[1]==Te?function(t){return new Je(t)}:_s;function wu(t){return function(e){var r=gt(e);return r==Ut?Oi(e):r==zt?ih(e):Vc(e,t(e))}}function ae(t,e,r,s,o,h,l,p){var m=e&Pe;if(!m&&typeof t!="function")throw new Lt(f);var S=s?s.length:0;if(S||(e&=~(Vt|ze),s=o=a),l=l===a?l:st(L(l),0),p=p===a?p:L(p),S-=o?o.length:0,e&ze){var _=s,x=o;s=o=a}var P=m?a:es(t),O=[t,e,r,s,o,_,x,h,l,p];if(P&&rl(O,P),t=O[0],e=O[1],r=O[2],s=O[3],o=O[4],p=O[9]=O[9]===a?m?0:t.length:st(O[9]-S,0),!p&&e&(Xt|Ue)&&(e&=~(Xt|Ue)),!e||e==ot)var E=Ff(t,e,r);else e==Xt||e==Ue?E=Wf(t,e,p):(e==Vt||e==(ot|Vt))&&!o.length?E=kf(t,e,r,s):E=Cr.apply(a,O);var M=P?eu:Ru;return Bu(M(E,O),t,e)}function xu(t,e,r,s){return t===a||Yt(t,Ve[r])&&!z.call(s,r)?e:t}function yu(t,e,r,s,o,h){return V(t)&&V(e)&&(h.set(e,t),yr(t,e,a,yu,h),h.delete(e)),t}function zf(t){return Nn(t)?a:t}function Au(t,e,r,s,o,h){var l=r&pt,p=t.length,m=e.length;if(p!=m&&!(l&&m>p))return!1;var S=h.get(t),_=h.get(e);if(S&&_)return S==e&&_==t;var x=-1,P=!0,O=r&qt?new Ee:a;for(h.set(t,e),h.set(e,t);++x<p;){var E=t[x],M=e[x];if(s)var I=l?s(M,E,x,e,t,h):s(E,M,x,t,e,h);if(I!==a){if(I)continue;P=!1;break}if(O){if(!xi(e,function(H,F){if(!xn(O,F)&&(E===H||o(E,H,r,s,h)))return O.push(F)})){P=!1;break}}else if(!(E===M||o(E,M,r,s,h))){P=!1;break}}return h.delete(t),h.delete(e),P}function Kf(t,e,r,s,o,h,l){switch(r){case $e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case wn:return!(t.byteLength!=e.byteLength||!h(new fr(t),new fr(e)));case gn:case mn:case vn:return Yt(+t,+e);case Jn:return t.name==e.name&&t.message==e.message;case Dn:case Sn:return t==e+"";case Ut:var p=Oi;case zt:var m=s&pt;if(p||(p=sr),t.size!=e.size&&!m)return!1;var S=l.get(t);if(S)return S==e;s|=qt,l.set(t,e);var _=Au(p(t),p(e),s,o,h,l);return l.delete(t),_;case jn:if(Cn)return Cn.call(t)==Cn.call(e)}return!1}function $f(t,e,r,s,o,h){var l=r&pt,p=ji(t),m=p.length,S=ji(e),_=S.length;if(m!=_&&!l)return!1;for(var x=m;x--;){var P=p[x];if(!(l?P in e:z.call(e,P)))return!1}var O=h.get(t),E=h.get(e);if(O&&E)return O==e&&E==t;var M=!0;h.set(t,e),h.set(e,t);for(var I=l;++x<m;){P=p[x];var H=t[P],F=e[P];if(s)var Et=l?s(F,H,P,e,t,h):s(H,F,P,t,e,h);if(!(Et===a?H===F||o(H,F,r,s,h):Et)){M=!1;break}I||(I=P=="constructor")}if(M&&!I){var Dt=t.constructor,It=e.constructor;Dt!=It&&"constructor"in t&&"constructor"in e&&!(typeof Dt=="function"&&Dt instanceof Dt&&typeof It=="function"&&It instanceof It)&&(M=!1)}return h.delete(t),h.delete(e),M}function ue(t){return us(Eu(t,a,Fu),t+"")}function ji(t){return Ka(t,ht,rs)}function ts(t){return Ka(t,yt,Pu)}var es=vr?function(t){return vr.get(t)}:_s;function Ir(t){for(var e=t.name+"",r=Qe[e],s=z.call(Qe,e)?r.length:0;s--;){var o=r[s],h=o.func;if(h==null||h==t)return o.name}return e}function nn(t){var e=z.call(c,"placeholder")?c:t;return e.placeholder}function b(){var t=c.iteratee||Ds;return t=t===Ds?Za:t,arguments.length?t(arguments[0],arguments[1]):t}function Rr(t,e){var r=t.__data__;return jf(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ns(t){for(var e=ht(t),r=e.length;r--;){var s=e[r],o=t[s];e[r]=[s,o,Ou(o)]}return e}function Be(t,e){var r=eh(t,e);return Ya(r)?r:a}function Yf(t){var e=z.call(t,Oe),r=t[Oe];try{t[Oe]=a;var s=!0}catch{}var o=cr.call(t);return s&&(e?t[Oe]=r:delete t[Oe]),o}var rs=Ei?function(t){return t==null?[]:(t=K(t),de(Ei(t),function(e){return Ia.call(t,e)}))}:ws,Pu=Ei?function(t){for(var e=[];t;)ge(e,rs(t)),t=lr(t);return e}:ws,gt=mt;(Ii&&gt(new Ii(new ArrayBuffer(1)))!=$e||An&&gt(new An)!=Ut||Ri&&gt(Ri.resolve())!=ks||Je&&gt(new Je)!=zt||Pn&&gt(new Pn)!=_n)&&(gt=function(t){var e=mt(t),r=e==ne?t.constructor:a,s=r?Le(r):"";if(s)switch(s){case Ch:return $e;case Oh:return Ut;case bh:return ks;case Eh:return zt;case Ih:return _n}return e});function Zf(t,e,r){for(var s=-1,o=r.length;++s<o;){var h=r[s],l=h.size;switch(h.type){case"drop":t+=l;break;case"dropRight":e-=l;break;case"take":e=dt(e,t+l);break;case"takeRight":t=st(t,e-l);break}}return{start:t,end:e}}function qf(t){var e=t.match(jo);return e?e[1].split(tc):[]}function Tu(t,e,r){e=we(e,t);for(var s=-1,o=e.length,h=!1;++s<o;){var l=te(e[s]);if(!(h=t!=null&&r(t,l)))break;t=t[l]}return h||++s!=o?h:(o=t==null?0:t.length,!!o&&Fr(o)&&oe(l,o)&&(B(t)||Me(t)))}function Xf(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&z.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Cu(t){return typeof t.constructor=="function"&&!Ln(t)?je(lr(t)):{}}function Vf(t,e,r){var s=t.constructor;switch(e){case wn:return Vi(t);case gn:case mn:return new s(+t);case $e:return Bf(t,r);case ni:case ri:case ii:case si:case ai:case ui:case oi:case ci:case hi:return cu(t,r);case Ut:return new s;case vn:case Sn:return new s(t);case Dn:return Lf(t);case zt:return new s;case jn:return Mf(t)}}function Jf(t,e){var r=e.length;if(!r)return t;var s=r-1;return e[s]=(r>1?"& ":"")+e[s],e=e.join(r>2?", ":" "),t.replace(Qo,`{
/* [wrapped with `+e+`] */
`)}function Qf(t){return B(t)||Me(t)||!!(Ra&&t&&t[Ra])}function oe(t,e){var r=typeof t;return e=e??pe,!!e&&(r=="number"||r!="symbol"&&cc.test(t))&&t>-1&&t%1==0&&t<e}function vt(t,e,r){if(!V(r))return!1;var s=typeof e;return(s=="number"?xt(r)&&oe(e,r.length):s=="string"&&e in r)?Yt(r[e],t):!1}function is(t,e){if(B(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||bt(t)?!0:qo.test(t)||!Zo.test(t)||e!=null&&t in K(e)}function jf(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ss(t){var e=Ir(t),r=c[e];if(typeof r!="function"||!(e in G.prototype))return!1;if(t===r)return!0;var s=es(r);return!!s&&t===s[0]}function tl(t){return!!Oa&&Oa in t}var el=ur?ce:xs;function Ln(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Ve;return t===r}function Ou(t){return t===t&&!V(t)}function bu(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==a||t in K(r))}}function nl(t){var e=Hr(t,function(s){return r.size===y&&r.clear(),s}),r=e.cache;return e}function rl(t,e){var r=t[1],s=e[1],o=r|s,h=o<(ot|Pe|ee),l=s==ee&&r==Xt||s==ee&&r==dn&&t[7].length<=e[8]||s==(ee|dn)&&e[7].length<=e[8]&&r==Xt;if(!(h||l))return t;s&ot&&(t[2]=e[2],o|=r&ot?0:Gs);var p=e[3];if(p){var m=t[3];t[3]=m?fu(m,p,e[4]):p,t[4]=m?me(t[3],A):e[4]}return p=e[5],p&&(m=t[5],t[5]=m?lu(m,p,e[6]):p,t[6]=m?me(t[5],A):e[6]),p=e[7],p&&(t[7]=p),s&ee&&(t[8]=t[8]==null?e[8]:dt(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function il(t){var e=[];if(t!=null)for(var r in K(t))e.push(r);return e}function sl(t){return cr.call(t)}function Eu(t,e,r){return e=st(e===a?t.length-1:e,0),function(){for(var s=arguments,o=-1,h=st(s.length-e,0),l=v(h);++o<h;)l[o]=s[e+o];o=-1;for(var p=v(e+1);++o<e;)p[o]=s[o];return p[e]=r(l),Tt(t,this,p)}}function Iu(t,e){return e.length<2?t:Re(t,Ht(e,0,-1))}function al(t,e){for(var r=t.length,s=dt(e.length,r),o=wt(t);s--;){var h=e[s];t[s]=oe(h,r)?o[h]:a}return t}function as(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Ru=Lu(eu),Mn=_h||function(t,e){return ct.setTimeout(t,e)},us=Lu(bf);function Bu(t,e,r){var s=e+"";return us(t,Jf(s,ul(qf(s),r)))}function Lu(t){var e=0,r=0;return function(){var s=Ah(),o=Co-(s-r);if(r=s,o>0){if(++e>=To)return arguments[0]}else e=0;return t.apply(a,arguments)}}function Br(t,e){var r=-1,s=t.length,o=s-1;for(e=e===a?s:e;++r<e;){var h=zi(r,o),l=t[h];t[h]=t[r],t[r]=l}return t.length=e,t}var Mu=nl(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Xo,function(r,s,o,h){e.push(o?h.replace(rc,"$1"):s||r)}),e});function te(t){if(typeof t=="string"||bt(t))return t;var e=t+"";return e=="0"&&1/t==-Te?"-0":e}function Le(t){if(t!=null){try{return or.call(t)}catch{}try{return t+""}catch{}}return""}function ul(t,e){return Bt(Bo,function(r){var s="_."+r[0];e&r[1]&&!rr(t,s)&&t.push(s)}),t.sort()}function Nu(t){if(t instanceof G)return t.clone();var e=new Mt(t.__wrapped__,t.__chain__);return e.__actions__=wt(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ol(t,e,r){(r?vt(t,e,r):e===a)?e=1:e=st(L(e),0);var s=t==null?0:t.length;if(!s||e<1)return[];for(var o=0,h=0,l=v(gr(s/e));o<s;)l[h++]=Ht(t,o,o+=e);return l}function cl(t){for(var e=-1,r=t==null?0:t.length,s=0,o=[];++e<r;){var h=t[e];h&&(o[s++]=h)}return o}function hl(){var t=arguments.length;if(!t)return[];for(var e=v(t-1),r=arguments[0],s=t;s--;)e[s-1]=arguments[s];return ge(B(r)?wt(r):[r],ft(e,1))}var fl=N(function(t,e){return j(t)?bn(t,ft(e,1,j,!0)):[]}),ll=N(function(t,e){var r=Gt(e);return j(r)&&(r=a),j(t)?bn(t,ft(e,1,j,!0),b(r,2)):[]}),pl=N(function(t,e){var r=Gt(e);return j(r)&&(r=a),j(t)?bn(t,ft(e,1,j,!0),a,r):[]});function dl(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:L(e),Ht(t,e<0?0:e,s)):[]}function gl(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:L(e),e=s-e,Ht(t,0,e<0?0:e)):[]}function ml(t,e){return t&&t.length?Pr(t,b(e,3),!0,!0):[]}function vl(t,e){return t&&t.length?Pr(t,b(e,3),!0):[]}function Dl(t,e,r,s){var o=t==null?0:t.length;return o?(r&&typeof r!="number"&&vt(t,e,r)&&(r=0,s=o),hf(t,e,r,s)):[]}function Hu(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=r==null?0:L(r);return o<0&&(o=st(s+o,0)),ir(t,b(e,3),o)}function Gu(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=s-1;return r!==a&&(o=L(r),o=r<0?st(s+o,0):dt(o,s-1)),ir(t,b(e,3),o,!0)}function Fu(t){var e=t==null?0:t.length;return e?ft(t,1):[]}function Sl(t){var e=t==null?0:t.length;return e?ft(t,Te):[]}function _l(t,e){var r=t==null?0:t.length;return r?(e=e===a?1:L(e),ft(t,e)):[]}function wl(t){for(var e=-1,r=t==null?0:t.length,s={};++e<r;){var o=t[e];s[o[0]]=o[1]}return s}function Wu(t){return t&&t.length?t[0]:a}function xl(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=r==null?0:L(r);return o<0&&(o=st(s+o,0)),Ze(t,e,o)}function yl(t){var e=t==null?0:t.length;return e?Ht(t,0,-1):[]}var Al=N(function(t){var e=X(t,qi);return e.length&&e[0]===t[0]?Gi(e):[]}),Pl=N(function(t){var e=Gt(t),r=X(t,qi);return e===Gt(r)?e=a:r.pop(),r.length&&r[0]===t[0]?Gi(r,b(e,2)):[]}),Tl=N(function(t){var e=Gt(t),r=X(t,qi);return e=typeof e=="function"?e:a,e&&r.pop(),r.length&&r[0]===t[0]?Gi(r,a,e):[]});function Cl(t,e){return t==null?"":xh.call(t,e)}function Gt(t){var e=t==null?0:t.length;return e?t[e-1]:a}function Ol(t,e,r){var s=t==null?0:t.length;if(!s)return-1;var o=s;return r!==a&&(o=L(r),o=o<0?st(s+o,0):dt(o,s-1)),e===e?ah(t,e,o):ir(t,_a,o,!0)}function bl(t,e){return t&&t.length?Ja(t,L(e)):a}var El=N(ku);function ku(t,e){return t&&t.length&&e&&e.length?Ui(t,e):t}function Il(t,e,r){return t&&t.length&&e&&e.length?Ui(t,e,b(r,2)):t}function Rl(t,e,r){return t&&t.length&&e&&e.length?Ui(t,e,a,r):t}var Bl=ue(function(t,e){var r=t==null?0:t.length,s=Li(t,e);return tu(t,X(e,function(o){return oe(o,r)?+o:o}).sort(hu)),s});function Ll(t,e){var r=[];if(!(t&&t.length))return r;var s=-1,o=[],h=t.length;for(e=b(e,3);++s<h;){var l=t[s];e(l,s,t)&&(r.push(l),o.push(s))}return tu(t,o),r}function os(t){return t==null?t:Th.call(t)}function Ml(t,e,r){var s=t==null?0:t.length;return s?(r&&typeof r!="number"&&vt(t,e,r)?(e=0,r=s):(e=e==null?0:L(e),r=r===a?s:L(r)),Ht(t,e,r)):[]}function Nl(t,e){return Ar(t,e)}function Hl(t,e,r){return $i(t,e,b(r,2))}function Gl(t,e){var r=t==null?0:t.length;if(r){var s=Ar(t,e);if(s<r&&Yt(t[s],e))return s}return-1}function Fl(t,e){return Ar(t,e,!0)}function Wl(t,e,r){return $i(t,e,b(r,2),!0)}function kl(t,e){var r=t==null?0:t.length;if(r){var s=Ar(t,e,!0)-1;if(Yt(t[s],e))return s}return-1}function Ul(t){return t&&t.length?nu(t):[]}function zl(t,e){return t&&t.length?nu(t,b(e,2)):[]}function Kl(t){var e=t==null?0:t.length;return e?Ht(t,1,e):[]}function $l(t,e,r){return t&&t.length?(e=r||e===a?1:L(e),Ht(t,0,e<0?0:e)):[]}function Yl(t,e,r){var s=t==null?0:t.length;return s?(e=r||e===a?1:L(e),e=s-e,Ht(t,e<0?0:e,s)):[]}function Zl(t,e){return t&&t.length?Pr(t,b(e,3),!1,!0):[]}function ql(t,e){return t&&t.length?Pr(t,b(e,3)):[]}var Xl=N(function(t){return _e(ft(t,1,j,!0))}),Vl=N(function(t){var e=Gt(t);return j(e)&&(e=a),_e(ft(t,1,j,!0),b(e,2))}),Jl=N(function(t){var e=Gt(t);return e=typeof e=="function"?e:a,_e(ft(t,1,j,!0),a,e)});function Ql(t){return t&&t.length?_e(t):[]}function jl(t,e){return t&&t.length?_e(t,b(e,2)):[]}function tp(t,e){return e=typeof e=="function"?e:a,t&&t.length?_e(t,a,e):[]}function cs(t){if(!(t&&t.length))return[];var e=0;return t=de(t,function(r){if(j(r))return e=st(r.length,e),!0}),Ti(e,function(r){return X(t,yi(r))})}function Uu(t,e){if(!(t&&t.length))return[];var r=cs(t);return e==null?r:X(r,function(s){return Tt(e,a,s)})}var ep=N(function(t,e){return j(t)?bn(t,e):[]}),np=N(function(t){return Zi(de(t,j))}),rp=N(function(t){var e=Gt(t);return j(e)&&(e=a),Zi(de(t,j),b(e,2))}),ip=N(function(t){var e=Gt(t);return e=typeof e=="function"?e:a,Zi(de(t,j),a,e)}),sp=N(cs);function ap(t,e){return au(t||[],e||[],On)}function up(t,e){return au(t||[],e||[],Rn)}var op=N(function(t){var e=t.length,r=e>1?t[e-1]:a;return r=typeof r=="function"?(t.pop(),r):a,Uu(t,r)});function zu(t){var e=c(t);return e.__chain__=!0,e}function cp(t,e){return e(t),t}function Lr(t,e){return e(t)}var hp=ue(function(t){var e=t.length,r=e?t[0]:0,s=this.__wrapped__,o=function(h){return Li(h,t)};return e>1||this.__actions__.length||!(s instanceof G)||!oe(r)?this.thru(o):(s=s.slice(r,+r+(e?1:0)),s.__actions__.push({func:Lr,args:[o],thisArg:a}),new Mt(s,this.__chain__).thru(function(h){return e&&!h.length&&h.push(a),h}))});function fp(){return zu(this)}function lp(){return new Mt(this.value(),this.__chain__)}function pp(){this.__values__===a&&(this.__values__=ro(this.value()));var t=this.__index__>=this.__values__.length,e=t?a:this.__values__[this.__index__++];return{done:t,value:e}}function dp(){return this}function gp(t){for(var e,r=this;r instanceof Sr;){var s=Nu(r);s.__index__=0,s.__values__=a,e?o.__wrapped__=s:e=s;var o=s;r=r.__wrapped__}return o.__wrapped__=t,e}function mp(){var t=this.__wrapped__;if(t instanceof G){var e=t;return this.__actions__.length&&(e=new G(this)),e=e.reverse(),e.__actions__.push({func:Lr,args:[os],thisArg:a}),new Mt(e,this.__chain__)}return this.thru(os)}function vp(){return su(this.__wrapped__,this.__actions__)}var Dp=Tr(function(t,e,r){z.call(t,r)?++t[r]:se(t,r,1)});function Sp(t,e,r){var s=B(t)?Da:cf;return r&&vt(t,e,r)&&(e=a),s(t,b(e,3))}function _p(t,e){var r=B(t)?de:Ua;return r(t,b(e,3))}var wp=mu(Hu),xp=mu(Gu);function yp(t,e){return ft(Mr(t,e),1)}function Ap(t,e){return ft(Mr(t,e),Te)}function Pp(t,e,r){return r=r===a?1:L(r),ft(Mr(t,e),r)}function Ku(t,e){var r=B(t)?Bt:Se;return r(t,b(e,3))}function $u(t,e){var r=B(t)?zc:ka;return r(t,b(e,3))}var Tp=Tr(function(t,e,r){z.call(t,r)?t[r].push(e):se(t,r,[e])});function Cp(t,e,r,s){t=xt(t)?t:sn(t),r=r&&!s?L(r):0;var o=t.length;return r<0&&(r=st(o+r,0)),Wr(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&Ze(t,e,r)>-1}var Op=N(function(t,e,r){var s=-1,o=typeof e=="function",h=xt(t)?v(t.length):[];return Se(t,function(l){h[++s]=o?Tt(e,l,r):En(l,e,r)}),h}),bp=Tr(function(t,e,r){se(t,r,e)});function Mr(t,e){var r=B(t)?X:qa;return r(t,b(e,3))}function Ep(t,e,r,s){return t==null?[]:(B(e)||(e=e==null?[]:[e]),r=s?a:r,B(r)||(r=r==null?[]:[r]),Qa(t,e,r))}var Ip=Tr(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]});function Rp(t,e,r){var s=B(t)?wi:xa,o=arguments.length<3;return s(t,b(e,4),r,o,Se)}function Bp(t,e,r){var s=B(t)?Kc:xa,o=arguments.length<3;return s(t,b(e,4),r,o,ka)}function Lp(t,e){var r=B(t)?de:Ua;return r(t,Gr(b(e,3)))}function Mp(t){var e=B(t)?Ha:Cf;return e(t)}function Np(t,e,r){(r?vt(t,e,r):e===a)?e=1:e=L(e);var s=B(t)?rf:Of;return s(t,e)}function Hp(t){var e=B(t)?sf:Ef;return e(t)}function Gp(t){if(t==null)return 0;if(xt(t))return Wr(t)?Xe(t):t.length;var e=gt(t);return e==Ut||e==zt?t.size:Wi(t).length}function Fp(t,e,r){var s=B(t)?xi:If;return r&&vt(t,e,r)&&(e=a),s(t,b(e,3))}var Wp=N(function(t,e){if(t==null)return[];var r=e.length;return r>1&&vt(t,e[0],e[1])?e=[]:r>2&&vt(e[0],e[1],e[2])&&(e=[e[0]]),Qa(t,ft(e,1),[])}),Nr=Sh||function(){return ct.Date.now()};function kp(t,e){if(typeof e!="function")throw new Lt(f);return t=L(t),function(){if(--t<1)return e.apply(this,arguments)}}function Yu(t,e,r){return e=r?a:e,e=t&&e==null?t.length:e,ae(t,ee,a,a,a,a,e)}function Zu(t,e){var r;if(typeof e!="function")throw new Lt(f);return t=L(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=a),r}}var hs=N(function(t,e,r){var s=ot;if(r.length){var o=me(r,nn(hs));s|=Vt}return ae(t,s,e,r,o)}),qu=N(function(t,e,r){var s=ot|Pe;if(r.length){var o=me(r,nn(qu));s|=Vt}return ae(e,s,t,r,o)});function Xu(t,e,r){e=r?a:e;var s=ae(t,Xt,a,a,a,a,a,e);return s.placeholder=Xu.placeholder,s}function Vu(t,e,r){e=r?a:e;var s=ae(t,Ue,a,a,a,a,a,e);return s.placeholder=Vu.placeholder,s}function Ju(t,e,r){var s,o,h,l,p,m,S=0,_=!1,x=!1,P=!0;if(typeof t!="function")throw new Lt(f);e=Ft(e)||0,V(r)&&(_=!!r.leading,x="maxWait"in r,h=x?st(Ft(r.maxWait)||0,e):h,P="trailing"in r?!!r.trailing:P);function O(tt){var Zt=s,fe=o;return s=o=a,S=tt,l=t.apply(fe,Zt),l}function E(tt){return S=tt,p=Mn(H,e),_?O(tt):l}function M(tt){var Zt=tt-m,fe=tt-S,vo=e-Zt;return x?dt(vo,h-fe):vo}function I(tt){var Zt=tt-m,fe=tt-S;return m===a||Zt>=e||Zt<0||x&&fe>=h}function H(){var tt=Nr();if(I(tt))return F(tt);p=Mn(H,M(tt))}function F(tt){return p=a,P&&s?O(tt):(s=o=a,l)}function Et(){p!==a&&uu(p),S=0,s=m=o=p=a}function Dt(){return p===a?l:F(Nr())}function It(){var tt=Nr(),Zt=I(tt);if(s=arguments,o=this,m=tt,Zt){if(p===a)return E(m);if(x)return uu(p),p=Mn(H,e),O(m)}return p===a&&(p=Mn(H,e)),l}return It.cancel=Et,It.flush=Dt,It}var Up=N(function(t,e){return Wa(t,1,e)}),zp=N(function(t,e,r){return Wa(t,Ft(e)||0,r)});function Kp(t){return ae(t,ei)}function Hr(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new Lt(f);var r=function(){var s=arguments,o=e?e.apply(this,s):s[0],h=r.cache;if(h.has(o))return h.get(o);var l=t.apply(this,s);return r.cache=h.set(o,l)||h,l};return r.cache=new(Hr.Cache||ie),r}Hr.Cache=ie;function Gr(t){if(typeof t!="function")throw new Lt(f);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function $p(t){return Zu(2,t)}var Yp=Rf(function(t,e){e=e.length==1&&B(e[0])?X(e[0],Ct(b())):X(ft(e,1),Ct(b()));var r=e.length;return N(function(s){for(var o=-1,h=dt(s.length,r);++o<h;)s[o]=e[o].call(this,s[o]);return Tt(t,this,s)})}),fs=N(function(t,e){var r=me(e,nn(fs));return ae(t,Vt,a,e,r)}),Qu=N(function(t,e){var r=me(e,nn(Qu));return ae(t,ze,a,e,r)}),Zp=ue(function(t,e){return ae(t,dn,a,a,a,e)});function qp(t,e){if(typeof t!="function")throw new Lt(f);return e=e===a?e:L(e),N(t,e)}function Xp(t,e){if(typeof t!="function")throw new Lt(f);return e=e==null?0:st(L(e),0),N(function(r){var s=r[e],o=xe(r,0,e);return s&&ge(o,s),Tt(t,this,o)})}function Vp(t,e,r){var s=!0,o=!0;if(typeof t!="function")throw new Lt(f);return V(r)&&(s="leading"in r?!!r.leading:s,o="trailing"in r?!!r.trailing:o),Ju(t,e,{leading:s,maxWait:e,trailing:o})}function Jp(t){return Yu(t,1)}function Qp(t,e){return fs(Xi(e),t)}function jp(){if(!arguments.length)return[];var t=arguments[0];return B(t)?t:[t]}function td(t){return Nt(t,nt)}function ed(t,e){return e=typeof e=="function"?e:a,Nt(t,nt,e)}function nd(t){return Nt(t,T|nt)}function rd(t,e){return e=typeof e=="function"?e:a,Nt(t,T|nt,e)}function id(t,e){return e==null||Fa(t,e,ht(e))}function Yt(t,e){return t===e||t!==t&&e!==e}var sd=Er(Hi),ad=Er(function(t,e){return t>=e}),Me=$a(function(){return arguments}())?$a:function(t){return J(t)&&z.call(t,"callee")&&!Ia.call(t,"callee")},B=v.isArray,ud=la?Ct(la):gf;function xt(t){return t!=null&&Fr(t.length)&&!ce(t)}function j(t){return J(t)&&xt(t)}function od(t){return t===!0||t===!1||J(t)&&mt(t)==gn}var ye=wh||xs,cd=pa?Ct(pa):mf;function hd(t){return J(t)&&t.nodeType===1&&!Nn(t)}function fd(t){if(t==null)return!0;if(xt(t)&&(B(t)||typeof t=="string"||typeof t.splice=="function"||ye(t)||rn(t)||Me(t)))return!t.length;var e=gt(t);if(e==Ut||e==zt)return!t.size;if(Ln(t))return!Wi(t).length;for(var r in t)if(z.call(t,r))return!1;return!0}function ld(t,e){return In(t,e)}function pd(t,e,r){r=typeof r=="function"?r:a;var s=r?r(t,e):a;return s===a?In(t,e,a,r):!!s}function ls(t){if(!J(t))return!1;var e=mt(t);return e==Jn||e==Mo||typeof t.message=="string"&&typeof t.name=="string"&&!Nn(t)}function dd(t){return typeof t=="number"&&Ba(t)}function ce(t){if(!V(t))return!1;var e=mt(t);return e==Qn||e==Ws||e==Lo||e==Ho}function ju(t){return typeof t=="number"&&t==L(t)}function Fr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=pe}function V(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function J(t){return t!=null&&typeof t=="object"}var to=da?Ct(da):Df;function gd(t,e){return t===e||Fi(t,e,ns(e))}function md(t,e,r){return r=typeof r=="function"?r:a,Fi(t,e,ns(e),r)}function vd(t){return eo(t)&&t!=+t}function Dd(t){if(el(t))throw new R(u);return Ya(t)}function Sd(t){return t===null}function _d(t){return t==null}function eo(t){return typeof t=="number"||J(t)&&mt(t)==vn}function Nn(t){if(!J(t)||mt(t)!=ne)return!1;var e=lr(t);if(e===null)return!0;var r=z.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&or.call(r)==gh}var ps=ga?Ct(ga):Sf;function wd(t){return ju(t)&&t>=-pe&&t<=pe}var no=ma?Ct(ma):_f;function Wr(t){return typeof t=="string"||!B(t)&&J(t)&&mt(t)==Sn}function bt(t){return typeof t=="symbol"||J(t)&&mt(t)==jn}var rn=va?Ct(va):wf;function xd(t){return t===a}function yd(t){return J(t)&&gt(t)==_n}function Ad(t){return J(t)&&mt(t)==Fo}var Pd=Er(ki),Td=Er(function(t,e){return t<=e});function ro(t){if(!t)return[];if(xt(t))return Wr(t)?Kt(t):wt(t);if(yn&&t[yn])return rh(t[yn]());var e=gt(t),r=e==Ut?Oi:e==zt?sr:sn;return r(t)}function he(t){if(!t)return t===0?t:0;if(t=Ft(t),t===Te||t===-Te){var e=t<0?-1:1;return e*Eo}return t===t?t:0}function L(t){var e=he(t),r=e%1;return e===e?r?e-r:e:0}function io(t){return t?Ie(L(t),0,Jt):0}function Ft(t){if(typeof t=="number")return t;if(bt(t))return Xn;if(V(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=V(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=ya(t);var r=ac.test(t);return r||oc.test(t)?Wc(t.slice(2),r?2:8):sc.test(t)?Xn:+t}function so(t){return jt(t,yt(t))}function Cd(t){return t?Ie(L(t),-pe,pe):t===0?t:0}function U(t){return t==null?"":Ot(t)}var Od=tn(function(t,e){if(Ln(e)||xt(e)){jt(e,ht(e),t);return}for(var r in e)z.call(e,r)&&On(t,r,e[r])}),ao=tn(function(t,e){jt(e,yt(e),t)}),kr=tn(function(t,e,r,s){jt(e,yt(e),t,s)}),bd=tn(function(t,e,r,s){jt(e,ht(e),t,s)}),Ed=ue(Li);function Id(t,e){var r=je(t);return e==null?r:Ga(r,e)}var Rd=N(function(t,e){t=K(t);var r=-1,s=e.length,o=s>2?e[2]:a;for(o&&vt(e[0],e[1],o)&&(s=1);++r<s;)for(var h=e[r],l=yt(h),p=-1,m=l.length;++p<m;){var S=l[p],_=t[S];(_===a||Yt(_,Ve[S])&&!z.call(t,S))&&(t[S]=h[S])}return t}),Bd=N(function(t){return t.push(a,yu),Tt(uo,a,t)});function Ld(t,e){return Sa(t,b(e,3),Qt)}function Md(t,e){return Sa(t,b(e,3),Ni)}function Nd(t,e){return t==null?t:Mi(t,b(e,3),yt)}function Hd(t,e){return t==null?t:za(t,b(e,3),yt)}function Gd(t,e){return t&&Qt(t,b(e,3))}function Fd(t,e){return t&&Ni(t,b(e,3))}function Wd(t){return t==null?[]:xr(t,ht(t))}function kd(t){return t==null?[]:xr(t,yt(t))}function ds(t,e,r){var s=t==null?a:Re(t,e);return s===a?r:s}function Ud(t,e){return t!=null&&Tu(t,e,ff)}function gs(t,e){return t!=null&&Tu(t,e,lf)}var zd=Du(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=cr.call(e)),t[e]=r},vs(At)),Kd=Du(function(t,e,r){e!=null&&typeof e.toString!="function"&&(e=cr.call(e)),z.call(t,e)?t[e].push(r):t[e]=[r]},b),$d=N(En);function ht(t){return xt(t)?Na(t):Wi(t)}function yt(t){return xt(t)?Na(t,!0):xf(t)}function Yd(t,e){var r={};return e=b(e,3),Qt(t,function(s,o,h){se(r,e(s,o,h),s)}),r}function Zd(t,e){var r={};return e=b(e,3),Qt(t,function(s,o,h){se(r,o,e(s,o,h))}),r}var qd=tn(function(t,e,r){yr(t,e,r)}),uo=tn(function(t,e,r,s){yr(t,e,r,s)}),Xd=ue(function(t,e){var r={};if(t==null)return r;var s=!1;e=X(e,function(h){return h=we(h,t),s||(s=h.length>1),h}),jt(t,ts(t),r),s&&(r=Nt(r,T|q|nt,zf));for(var o=e.length;o--;)Yi(r,e[o]);return r});function Vd(t,e){return oo(t,Gr(b(e)))}var Jd=ue(function(t,e){return t==null?{}:Af(t,e)});function oo(t,e){if(t==null)return{};var r=X(ts(t),function(s){return[s]});return e=b(e),ja(t,r,function(s,o){return e(s,o[0])})}function Qd(t,e,r){e=we(e,t);var s=-1,o=e.length;for(o||(o=1,t=a);++s<o;){var h=t==null?a:t[te(e[s])];h===a&&(s=o,h=r),t=ce(h)?h.call(t):h}return t}function jd(t,e,r){return t==null?t:Rn(t,e,r)}function tg(t,e,r,s){return s=typeof s=="function"?s:a,t==null?t:Rn(t,e,r,s)}var co=wu(ht),ho=wu(yt);function eg(t,e,r){var s=B(t),o=s||ye(t)||rn(t);if(e=b(e,4),r==null){var h=t&&t.constructor;o?r=s?new h:[]:V(t)?r=ce(h)?je(lr(t)):{}:r={}}return(o?Bt:Qt)(t,function(l,p,m){return e(r,l,p,m)}),r}function ng(t,e){return t==null?!0:Yi(t,e)}function rg(t,e,r){return t==null?t:iu(t,e,Xi(r))}function ig(t,e,r,s){return s=typeof s=="function"?s:a,t==null?t:iu(t,e,Xi(r),s)}function sn(t){return t==null?[]:Ci(t,ht(t))}function sg(t){return t==null?[]:Ci(t,yt(t))}function ag(t,e,r){return r===a&&(r=e,e=a),r!==a&&(r=Ft(r),r=r===r?r:0),e!==a&&(e=Ft(e),e=e===e?e:0),Ie(Ft(t),e,r)}function ug(t,e,r){return e=he(e),r===a?(r=e,e=0):r=he(r),t=Ft(t),pf(t,e,r)}function og(t,e,r){if(r&&typeof r!="boolean"&&vt(t,e,r)&&(e=r=a),r===a&&(typeof e=="boolean"?(r=e,e=a):typeof t=="boolean"&&(r=t,t=a)),t===a&&e===a?(t=0,e=1):(t=he(t),e===a?(e=t,t=0):e=he(e)),t>e){var s=t;t=e,e=s}if(r||t%1||e%1){var o=La();return dt(t+o*(e-t+Fc("1e-"+((o+"").length-1))),e)}return zi(t,e)}var cg=en(function(t,e,r){return e=e.toLowerCase(),t+(r?fo(e):e)});function fo(t){return ms(U(t).toLowerCase())}function lo(t){return t=U(t),t&&t.replace(hc,Qc).replace(bc,"")}function hg(t,e,r){t=U(t),e=Ot(e);var s=t.length;r=r===a?s:Ie(L(r),0,s);var o=r;return r-=e.length,r>=0&&t.slice(r,o)==e}function fg(t){return t=U(t),t&&Ko.test(t)?t.replace(zs,jc):t}function lg(t){return t=U(t),t&&Vo.test(t)?t.replace(fi,"\\$&"):t}var pg=en(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),dg=en(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),gg=gu("toLowerCase");function mg(t,e,r){t=U(t),e=L(e);var s=e?Xe(t):0;if(!e||s>=e)return t;var o=(e-s)/2;return br(mr(o),r)+t+br(gr(o),r)}function vg(t,e,r){t=U(t),e=L(e);var s=e?Xe(t):0;return e&&s<e?t+br(e-s,r):t}function Dg(t,e,r){t=U(t),e=L(e);var s=e?Xe(t):0;return e&&s<e?br(e-s,r)+t:t}function Sg(t,e,r){return r||e==null?e=0:e&&(e=+e),Ph(U(t).replace(li,""),e||0)}function _g(t,e,r){return(r?vt(t,e,r):e===a)?e=1:e=L(e),Ki(U(t),e)}function wg(){var t=arguments,e=U(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var xg=en(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});function yg(t,e,r){return r&&typeof r!="number"&&vt(t,e,r)&&(e=r=a),r=r===a?Jt:r>>>0,r?(t=U(t),t&&(typeof e=="string"||e!=null&&!ps(e))&&(e=Ot(e),!e&&qe(t))?xe(Kt(t),0,r):t.split(e,r)):[]}var Ag=en(function(t,e,r){return t+(r?" ":"")+ms(e)});function Pg(t,e,r){return t=U(t),r=r==null?0:Ie(L(r),0,t.length),e=Ot(e),t.slice(r,r+e.length)==e}function Tg(t,e,r){var s=c.templateSettings;r&&vt(t,e,r)&&(e=a),t=U(t),e=kr({},e,s,xu);var o=kr({},e.imports,s.imports,xu),h=ht(o),l=Ci(o,h),p,m,S=0,_=e.interpolate||tr,x="__p += '",P=bi((e.escape||tr).source+"|"+_.source+"|"+(_===Ks?ic:tr).source+"|"+(e.evaluate||tr).source+"|$","g"),O="//# sourceURL="+(z.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lc+"]")+`
`;t.replace(P,function(I,H,F,Et,Dt,It){return F||(F=Et),x+=t.slice(S,It).replace(fc,th),H&&(p=!0,x+=`' +
__e(`+H+`) +
'`),Dt&&(m=!0,x+=`';
`+Dt+`;
__p += '`),F&&(x+=`' +
((__t = (`+F+`)) == null ? '' : __t) +
'`),S=It+I.length,I}),x+=`';
`;var E=z.call(e,"variable")&&e.variable;if(!E)x=`with (obj) {
`+x+`
}
`;else if(nc.test(E))throw new R(d);x=(m?x.replace(Wo,""):x).replace(ko,"$1").replace(Uo,"$1;"),x="function("+(E||"obj")+`) {
`+(E?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(p?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var M=go(function(){return k(h,O+"return "+x).apply(a,l)});if(M.source=x,ls(M))throw M;return M}function Cg(t){return U(t).toLowerCase()}function Og(t){return U(t).toUpperCase()}function bg(t,e,r){if(t=U(t),t&&(r||e===a))return ya(t);if(!t||!(e=Ot(e)))return t;var s=Kt(t),o=Kt(e),h=Aa(s,o),l=Pa(s,o)+1;return xe(s,h,l).join("")}function Eg(t,e,r){if(t=U(t),t&&(r||e===a))return t.slice(0,Ca(t)+1);if(!t||!(e=Ot(e)))return t;var s=Kt(t),o=Pa(s,Kt(e))+1;return xe(s,0,o).join("")}function Ig(t,e,r){if(t=U(t),t&&(r||e===a))return t.replace(li,"");if(!t||!(e=Ot(e)))return t;var s=Kt(t),o=Aa(s,Kt(e));return xe(s,o).join("")}function Rg(t,e){var r=Ao,s=Po;if(V(e)){var o="separator"in e?e.separator:o;r="length"in e?L(e.length):r,s="omission"in e?Ot(e.omission):s}t=U(t);var h=t.length;if(qe(t)){var l=Kt(t);h=l.length}if(r>=h)return t;var p=r-Xe(s);if(p<1)return s;var m=l?xe(l,0,p).join(""):t.slice(0,p);if(o===a)return m+s;if(l&&(p+=m.length-p),ps(o)){if(t.slice(p).search(o)){var S,_=m;for(o.global||(o=bi(o.source,U($s.exec(o))+"g")),o.lastIndex=0;S=o.exec(_);)var x=S.index;m=m.slice(0,x===a?p:x)}}else if(t.indexOf(Ot(o),p)!=p){var P=m.lastIndexOf(o);P>-1&&(m=m.slice(0,P))}return m+s}function Bg(t){return t=U(t),t&&zo.test(t)?t.replace(Us,uh):t}var Lg=en(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),ms=gu("toUpperCase");function po(t,e,r){return t=U(t),e=r?a:e,e===a?nh(t)?hh(t):Zc(t):t.match(e)||[]}var go=N(function(t,e){try{return Tt(t,a,e)}catch(r){return ls(r)?r:new R(r)}}),Mg=ue(function(t,e){return Bt(e,function(r){r=te(r),se(t,r,hs(t[r],t))}),t});function Ng(t){var e=t==null?0:t.length,r=b();return t=e?X(t,function(s){if(typeof s[1]!="function")throw new Lt(f);return[r(s[0]),s[1]]}):[],N(function(s){for(var o=-1;++o<e;){var h=t[o];if(Tt(h[0],this,s))return Tt(h[1],this,s)}})}function Hg(t){return of(Nt(t,T))}function vs(t){return function(){return t}}function Gg(t,e){return t==null||t!==t?e:t}var Fg=vu(),Wg=vu(!0);function At(t){return t}function Ds(t){return Za(typeof t=="function"?t:Nt(t,T))}function kg(t){return Xa(Nt(t,T))}function Ug(t,e){return Va(t,Nt(e,T))}var zg=N(function(t,e){return function(r){return En(r,t,e)}}),Kg=N(function(t,e){return function(r){return En(t,r,e)}});function Ss(t,e,r){var s=ht(e),o=xr(e,s);r==null&&!(V(e)&&(o.length||!s.length))&&(r=e,e=t,t=this,o=xr(e,ht(e)));var h=!(V(r)&&"chain"in r)||!!r.chain,l=ce(t);return Bt(o,function(p){var m=e[p];t[p]=m,l&&(t.prototype[p]=function(){var S=this.__chain__;if(h||S){var _=t(this.__wrapped__),x=_.__actions__=wt(this.__actions__);return x.push({func:m,args:arguments,thisArg:t}),_.__chain__=S,_}return m.apply(t,ge([this.value()],arguments))})}),t}function $g(){return ct._===this&&(ct._=mh),this}function _s(){}function Yg(t){return t=L(t),N(function(e){return Ja(e,t)})}var Zg=Ji(X),qg=Ji(Da),Xg=Ji(xi);function mo(t){return is(t)?yi(te(t)):Pf(t)}function Vg(t){return function(e){return t==null?a:Re(t,e)}}var Jg=Su(),Qg=Su(!0);function ws(){return[]}function xs(){return!1}function jg(){return{}}function tm(){return""}function em(){return!0}function nm(t,e){if(t=L(t),t<1||t>pe)return[];var r=Jt,s=dt(t,Jt);e=b(e),t-=Jt;for(var o=Ti(s,e);++r<t;)e(r);return o}function rm(t){return B(t)?X(t,te):bt(t)?[t]:wt(Mu(U(t)))}function im(t){var e=++dh;return U(t)+e}var sm=Or(function(t,e){return t+e},0),am=Qi("ceil"),um=Or(function(t,e){return t/e},1),om=Qi("floor");function cm(t){return t&&t.length?wr(t,At,Hi):a}function hm(t,e){return t&&t.length?wr(t,b(e,2),Hi):a}function fm(t){return wa(t,At)}function lm(t,e){return wa(t,b(e,2))}function pm(t){return t&&t.length?wr(t,At,ki):a}function dm(t,e){return t&&t.length?wr(t,b(e,2),ki):a}var gm=Or(function(t,e){return t*e},1),mm=Qi("round"),vm=Or(function(t,e){return t-e},0);function Dm(t){return t&&t.length?Pi(t,At):0}function Sm(t,e){return t&&t.length?Pi(t,b(e,2)):0}return c.after=kp,c.ary=Yu,c.assign=Od,c.assignIn=ao,c.assignInWith=kr,c.assignWith=bd,c.at=Ed,c.before=Zu,c.bind=hs,c.bindAll=Mg,c.bindKey=qu,c.castArray=jp,c.chain=zu,c.chunk=ol,c.compact=cl,c.concat=hl,c.cond=Ng,c.conforms=Hg,c.constant=vs,c.countBy=Dp,c.create=Id,c.curry=Xu,c.curryRight=Vu,c.debounce=Ju,c.defaults=Rd,c.defaultsDeep=Bd,c.defer=Up,c.delay=zp,c.difference=fl,c.differenceBy=ll,c.differenceWith=pl,c.drop=dl,c.dropRight=gl,c.dropRightWhile=ml,c.dropWhile=vl,c.fill=Dl,c.filter=_p,c.flatMap=yp,c.flatMapDeep=Ap,c.flatMapDepth=Pp,c.flatten=Fu,c.flattenDeep=Sl,c.flattenDepth=_l,c.flip=Kp,c.flow=Fg,c.flowRight=Wg,c.fromPairs=wl,c.functions=Wd,c.functionsIn=kd,c.groupBy=Tp,c.initial=yl,c.intersection=Al,c.intersectionBy=Pl,c.intersectionWith=Tl,c.invert=zd,c.invertBy=Kd,c.invokeMap=Op,c.iteratee=Ds,c.keyBy=bp,c.keys=ht,c.keysIn=yt,c.map=Mr,c.mapKeys=Yd,c.mapValues=Zd,c.matches=kg,c.matchesProperty=Ug,c.memoize=Hr,c.merge=qd,c.mergeWith=uo,c.method=zg,c.methodOf=Kg,c.mixin=Ss,c.negate=Gr,c.nthArg=Yg,c.omit=Xd,c.omitBy=Vd,c.once=$p,c.orderBy=Ep,c.over=Zg,c.overArgs=Yp,c.overEvery=qg,c.overSome=Xg,c.partial=fs,c.partialRight=Qu,c.partition=Ip,c.pick=Jd,c.pickBy=oo,c.property=mo,c.propertyOf=Vg,c.pull=El,c.pullAll=ku,c.pullAllBy=Il,c.pullAllWith=Rl,c.pullAt=Bl,c.range=Jg,c.rangeRight=Qg,c.rearg=Zp,c.reject=Lp,c.remove=Ll,c.rest=qp,c.reverse=os,c.sampleSize=Np,c.set=jd,c.setWith=tg,c.shuffle=Hp,c.slice=Ml,c.sortBy=Wp,c.sortedUniq=Ul,c.sortedUniqBy=zl,c.split=yg,c.spread=Xp,c.tail=Kl,c.take=$l,c.takeRight=Yl,c.takeRightWhile=Zl,c.takeWhile=ql,c.tap=cp,c.throttle=Vp,c.thru=Lr,c.toArray=ro,c.toPairs=co,c.toPairsIn=ho,c.toPath=rm,c.toPlainObject=so,c.transform=eg,c.unary=Jp,c.union=Xl,c.unionBy=Vl,c.unionWith=Jl,c.uniq=Ql,c.uniqBy=jl,c.uniqWith=tp,c.unset=ng,c.unzip=cs,c.unzipWith=Uu,c.update=rg,c.updateWith=ig,c.values=sn,c.valuesIn=sg,c.without=ep,c.words=po,c.wrap=Qp,c.xor=np,c.xorBy=rp,c.xorWith=ip,c.zip=sp,c.zipObject=ap,c.zipObjectDeep=up,c.zipWith=op,c.entries=co,c.entriesIn=ho,c.extend=ao,c.extendWith=kr,Ss(c,c),c.add=sm,c.attempt=go,c.camelCase=cg,c.capitalize=fo,c.ceil=am,c.clamp=ag,c.clone=td,c.cloneDeep=nd,c.cloneDeepWith=rd,c.cloneWith=ed,c.conformsTo=id,c.deburr=lo,c.defaultTo=Gg,c.divide=um,c.endsWith=hg,c.eq=Yt,c.escape=fg,c.escapeRegExp=lg,c.every=Sp,c.find=wp,c.findIndex=Hu,c.findKey=Ld,c.findLast=xp,c.findLastIndex=Gu,c.findLastKey=Md,c.floor=om,c.forEach=Ku,c.forEachRight=$u,c.forIn=Nd,c.forInRight=Hd,c.forOwn=Gd,c.forOwnRight=Fd,c.get=ds,c.gt=sd,c.gte=ad,c.has=Ud,c.hasIn=gs,c.head=Wu,c.identity=At,c.includes=Cp,c.indexOf=xl,c.inRange=ug,c.invoke=$d,c.isArguments=Me,c.isArray=B,c.isArrayBuffer=ud,c.isArrayLike=xt,c.isArrayLikeObject=j,c.isBoolean=od,c.isBuffer=ye,c.isDate=cd,c.isElement=hd,c.isEmpty=fd,c.isEqual=ld,c.isEqualWith=pd,c.isError=ls,c.isFinite=dd,c.isFunction=ce,c.isInteger=ju,c.isLength=Fr,c.isMap=to,c.isMatch=gd,c.isMatchWith=md,c.isNaN=vd,c.isNative=Dd,c.isNil=_d,c.isNull=Sd,c.isNumber=eo,c.isObject=V,c.isObjectLike=J,c.isPlainObject=Nn,c.isRegExp=ps,c.isSafeInteger=wd,c.isSet=no,c.isString=Wr,c.isSymbol=bt,c.isTypedArray=rn,c.isUndefined=xd,c.isWeakMap=yd,c.isWeakSet=Ad,c.join=Cl,c.kebabCase=pg,c.last=Gt,c.lastIndexOf=Ol,c.lowerCase=dg,c.lowerFirst=gg,c.lt=Pd,c.lte=Td,c.max=cm,c.maxBy=hm,c.mean=fm,c.meanBy=lm,c.min=pm,c.minBy=dm,c.stubArray=ws,c.stubFalse=xs,c.stubObject=jg,c.stubString=tm,c.stubTrue=em,c.multiply=gm,c.nth=bl,c.noConflict=$g,c.noop=_s,c.now=Nr,c.pad=mg,c.padEnd=vg,c.padStart=Dg,c.parseInt=Sg,c.random=og,c.reduce=Rp,c.reduceRight=Bp,c.repeat=_g,c.replace=wg,c.result=Qd,c.round=mm,c.runInContext=g,c.sample=Mp,c.size=Gp,c.snakeCase=xg,c.some=Fp,c.sortedIndex=Nl,c.sortedIndexBy=Hl,c.sortedIndexOf=Gl,c.sortedLastIndex=Fl,c.sortedLastIndexBy=Wl,c.sortedLastIndexOf=kl,c.startCase=Ag,c.startsWith=Pg,c.subtract=vm,c.sum=Dm,c.sumBy=Sm,c.template=Tg,c.times=nm,c.toFinite=he,c.toInteger=L,c.toLength=io,c.toLower=Cg,c.toNumber=Ft,c.toSafeInteger=Cd,c.toString=U,c.toUpper=Og,c.trim=bg,c.trimEnd=Eg,c.trimStart=Ig,c.truncate=Rg,c.unescape=Bg,c.uniqueId=im,c.upperCase=Lg,c.upperFirst=ms,c.each=Ku,c.eachRight=$u,c.first=Wu,Ss(c,function(){var t={};return Qt(c,function(e,r){z.call(c.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),c.VERSION=n,Bt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){c[t].placeholder=c}),Bt(["drop","take"],function(t,e){G.prototype[t]=function(r){r=r===a?1:st(L(r),0);var s=this.__filtered__&&!e?new G(this):this.clone();return s.__filtered__?s.__takeCount__=dt(r,s.__takeCount__):s.__views__.push({size:dt(r,Jt),type:t+(s.__dir__<0?"Right":"")}),s},G.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),Bt(["filter","map","takeWhile"],function(t,e){var r=e+1,s=r==Fs||r==bo;G.prototype[t]=function(o){var h=this.clone();return h.__iteratees__.push({iteratee:b(o,3),type:r}),h.__filtered__=h.__filtered__||s,h}}),Bt(["head","last"],function(t,e){var r="take"+(e?"Right":"");G.prototype[t]=function(){return this[r](1).value()[0]}}),Bt(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");G.prototype[t]=function(){return this.__filtered__?new G(this):this[r](1)}}),G.prototype.compact=function(){return this.filter(At)},G.prototype.find=function(t){return this.filter(t).head()},G.prototype.findLast=function(t){return this.reverse().find(t)},G.prototype.invokeMap=N(function(t,e){return typeof t=="function"?new G(this):this.map(function(r){return En(r,t,e)})}),G.prototype.reject=function(t){return this.filter(Gr(b(t)))},G.prototype.slice=function(t,e){t=L(t);var r=this;return r.__filtered__&&(t>0||e<0)?new G(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==a&&(e=L(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},G.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},G.prototype.toArray=function(){return this.take(Jt)},Qt(G.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),s=/^(?:head|last)$/.test(e),o=c[s?"take"+(e=="last"?"Right":""):e],h=s||/^find/.test(e);o&&(c.prototype[e]=function(){var l=this.__wrapped__,p=s?[1]:arguments,m=l instanceof G,S=p[0],_=m||B(l),x=function(H){var F=o.apply(c,ge([H],p));return s&&P?F[0]:F};_&&r&&typeof S=="function"&&S.length!=1&&(m=_=!1);var P=this.__chain__,O=!!this.__actions__.length,E=h&&!P,M=m&&!O;if(!h&&_){l=M?l:new G(this);var I=t.apply(l,p);return I.__actions__.push({func:Lr,args:[x],thisArg:a}),new Mt(I,P)}return E&&M?t.apply(this,p):(I=this.thru(x),E?s?I.value()[0]:I.value():I)})}),Bt(["pop","push","shift","sort","splice","unshift"],function(t){var e=ar[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);c.prototype[t]=function(){var o=arguments;if(s&&!this.__chain__){var h=this.value();return e.apply(B(h)?h:[],o)}return this[r](function(l){return e.apply(B(l)?l:[],o)})}}),Qt(G.prototype,function(t,e){var r=c[e];if(r){var s=r.name+"";z.call(Qe,s)||(Qe[s]=[]),Qe[s].push({name:e,func:r})}}),Qe[Cr(a,Pe).name]=[{name:"wrapper",func:a}],G.prototype.clone=Rh,G.prototype.reverse=Bh,G.prototype.value=Lh,c.prototype.at=hp,c.prototype.chain=fp,c.prototype.commit=lp,c.prototype.next=pp,c.prototype.plant=gp,c.prototype.reverse=mp,c.prototype.toJSON=c.prototype.valueOf=c.prototype.value=vp,c.prototype.first=c.prototype.head,yn&&(c.prototype[yn]=dp),c},ve=fh();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ct._=ve,define(function(){return ve})):Ce?((Ce.exports=ve)._=ve,Di._=ve):ct._=ve}).call(an)});var qn=So(ys(),1),cn;(function(a){a[a.fresh=1]="fresh",a[a.brackish=2]="brackish",a[a.salt=3]="salt"})(cn||(cn={}));var un=class{static{this.fresh=1e3}static{this.brackish=1020}static{this.salt=1030}},Ur=class{static{this.standard=9.80665}},He=class a{static{this.coefficient=1e5}static pascalToBar(n){return n/a.coefficient}static barToPascal(n){return n*a.coefficient}},zr=class a{static{this.standard=1.01325}static{this.standardPascals=He.barToPascal(a.standard)}static{this.gasConstant=8.31432}static{this.temperature=288.15}static{this.lapsRate=-.0065}static{this.molarMass=.0289644}static{this.exponent=Ur.standard*a.molarMass/(a.gasConstant*a.lapsRate)}static{this.invertedExponent=1/a.exponent}static pressure(n){let i=a.temperature/(a.temperature+a.lapsRate*n);return a.standardPascals*Math.pow(i,a.exponent)}static altitude(n){if(n>=a.standardPascals)return 0;let i=n/a.standardPascals,u=Math.pow(i,a.invertedExponent);return(a.temperature/u-a.temperature)/a.lapsRate}};var at=class{constructor(n,i,u,f,d,w){this._n2HalfTime=n,this._n2A=i,this._n2B=u,this._heHalfTime=f,this._heA=d,this._heB=w}get n2HalfTime(){return this._n2HalfTime}get n2A(){return this._n2A}get n2B(){return this._n2B}get heHalfTime(){return this._heHalfTime}get heA(){return this._heA}get heB(){return this._heB}},Ne=class{static{this.buhlmannZHL16C=[new at(5,1.1696,.5578,1.88,1.6189,.477),new at(8,1,.6514,3.02,1.383,.5747),new at(12.5,.8618,.7222,4.72,1.1919,.6527),new at(18.5,.7562,.7826,6.99,1.0458,.7223),new at(27,.62,.8125,10.21,.922,.7582),new at(38.3,.5043,.8434,14.48,.8205,.7957),new at(54.3,.441,.8693,20.53,.7305,.8279),new at(77,.4,.891,29.11,.6502,.8553),new at(109,.375,.9092,41.2,.595,.8757),new at(146,.35,.9222,55.19,.5545,.8903),new at(187,.3295,.9319,70.69,.5333,.8997),new at(239,.3065,.9403,90.34,.5189,.9073),new at(305,.2835,.9477,115.29,.5181,.9122),new at(390,.261,.9544,147.42,.5176,.9171),new at(498,.248,.9602,188.24,.5172,.9217),new at(635,.2327,.9653,240.03,.5119,.9267)]}},St=class a{static{this.o2InAir=.209}static{this.nitroxInAir=1-a.o2InAir}static{this.minPpO2=.18}static{this.maxEnd=30}static partialPressure(n,i){return n*i}static mod(n,i){return n/i}static bestMix(n,i,u){let f=u.toBar(i),d=n/f;return d>1?1:d}static ead(n,i,u=a.o2InAir){let f=1-n,d=1-u;return a.end(i,f)/d}static end(n,i,u=0){let f=this.narcoticIndex(u,i);return n*f}static mnd(n,i,u=0){let f=this.narcoticIndex(u,i);return n/f}static ceiling(n,i){let f=a.minPpO2/n*i;return f<i?i:f}static narcoticIndex(n,i=0){return i+n}};var Kr=class a extends at{constructor(n,i){super(n.n2HalfTime,n.n2A,n.n2B,n.heHalfTime,n.heA,n.heB),this._pN2=0,this._pHe=0,this._pTotal=0,this._a=0,this._b=0;let u=this.pressureInLungs(i);this._pN2=St.partialPressure(u,St.nitroxInAir),this._pHe=0,this.updateTotal()}get pN2(){return this._pN2}get pHe(){return this._pHe}get pTotal(){return this._pTotal}get a(){return this._a}get b(){return this._b}static fromCurrent(n,i){let u=new a(i,1);return u._pN2=n.pN2,u._pHe=n.pHe,u._a=n.a,u._b=n.b,u.updateTotal(),u}copy(){return a.fromCurrent(this,this)}ceiling(n){return(this.pTotal-this.a*n)/(n/this.b+1-n)}load(n,i){this._pN2=this.loadGas(n,i.fN2,this.pN2,this.n2HalfTime),this._pHe=this.loadGas(n,i.fHe,this.pHe,this.heHalfTime);let u=this.pTotal;return this.updateTotal(),this._a=(this.n2A*this.pN2+this.heA*this.pHe)/this.pTotal,this._b=(this.n2B*this.pN2+this.heB*this.pHe)/this.pTotal,this.pTotal-u}loadGas(n,i,u,f){let d=n.speed*i,w=this.pressureInLungs(n.startPressure)*i;return this.schreinerEquation(u,w,n.duration,f,d)}pressureInLungs(n){return n-.0627}schreinerEquation(n,i,u,f,d){let y=.01155245301/f,A=Math.exp(-y*u);return i+d*(u-1/y)-(i-n-d/y)*A}updateTotal(){this._pTotal=this.pN2+this.pHe}},hn=class a{constructor(n){this._compartments=n}get compartments(){return this._compartments}static createLoaded(n){if(n.length!==Ne.buhlmannZHL16C.length)throw new Error("Provided incompatible count of tissues");let i=(0,qn.default)(n).map((u,f)=>{let d=Ne.buhlmannZHL16C[f];return Kr.fromCurrent(u,d)}).value();return new a(i)}static create(n){let i=[];for(let u=0;u<Ne.buhlmannZHL16C.length;u++){let f=Ne.buhlmannZHL16C[u],d=new Kr(f,n);i.push(d)}return new a(i)}static createLoadedAt(n){let i=zr.pressure(n),u=He.pascalToBar(i);return a.create(u).finalState()}static copy(n){let i=[];for(let u=0;u<n.length;u++){let f=n[u].copy();i.push(f)}return i}restoreFrom(n){this._compartments=a.copy(n)}finalState(){return a.copy(this._compartments)}ceiling(n){let i=0;for(let u=0;u<this._compartments.length;u++){let f=this._compartments[u].ceiling(n);f>i&&(i=f)}return i}load(n,i){let u=0;for(let f=0;f<this._compartments.length;f++){let w=this._compartments[f].load(n,i);u=u+w}return u}},$r=class a{static validTissue(n){return n.pN2>0&&n.pHe>=0&&n.a>=0&&n.b>=0}static validCount(n){return!!n&&n.length===Ne.buhlmannZHL16C.length}static valid(n){return a.validCount(n)?(0,qn.default)(n).every(u=>a.validTissue(u)):!1}},Q=class a{static fix(n){return Number(n.toFixed(10))}static roundTwoDecimals(n){return a.round(n,2)}static round(n,i=0){return a.adapt(Math.round,n,i)}static floorTwoDecimals(n){return a.floor(n,2)}static floor(n,i=0){return a.adapt(Math.floor,n,i)}static ceilTwoDecimals(n){return a.ceil(n,2)}static ceil(n,i=0){return a.adapt(Math.ceil,n,i)}static ceilDistance(n,i){return a.adaptDistance(Math.ceil,n,i)}static roundDistance(n,i){return a.adaptDistance(Math.round,n,i)}static floorDistance(n,i){return a.adaptDistance(Math.floor,n,i)}static adapt(n,i,u){let f=Math.pow(10,u);return n(i*f)/f}static adaptDistance(n,i,u){return n(i/u)*u}},le=class{constructor(n){this.options=n}create(){switch(this.options.salinity){case cn.salt:return Ge.forSaltWater(this.options.altitude);case cn.brackish:return Ge.forBrackishWater(this.options.altitude);default:return Ge.forFreshWater(this.options.altitude)}}},Ge=class a{constructor(n,i){this.density=n,this._gravity=Ur.standard;let u=zr.pressure(i);this._surfacePressure=He.pascalToBar(u)}get surfacePressure(){return this._surfacePressure}static forSaltWater(n=0){return new a(un.salt,n)}static forBrackishWater(n=0){return new a(un.brackish,n)}static forFreshWater(n=0){return new a(un.fresh,n)}static simple(){let n=new a(un.fresh,0);return n._surfacePressure=1,n._gravity=10,n}toBar(n){let i=this.density*this._gravity;return He.pascalToBar(n*i)+this._surfacePressure}fromBar(n){if(n<this._surfacePressure)throw new Error("Lower pressure than altitude isn`t convertible to depth.");let i=this.density*this._gravity;return He.barToPascal(n-this._surfacePressure)/i}},Fn;(function(a){a[a.never=1]="never",a[a.auto=2]="auto",a[a.always=3]="always"})(Fn||(Fn={}));var $=class a{static{this.altitude=0}static{this.saltWater=cn.salt}static{this.roundStopsToMinutes=!1}static{this.gasSwitchDuration=2}static{this.problemSolvingDuration=1}static{this.lastStopDepth=3}static{this.lastStopDepthRecre=5}static{this.safetyStopRecre=Fn.auto}static{this.decoStopDistance=3}static{this.minimumAutoStopDepth=10}static{this.addSafetyStop=!0}static{this.maxEND=St.maxEnd}static{this.oxygenNarcotic=!0}static{this.ascentSpeed6m=3}static{this.ascentSpeed50percTo6m=3}static{this.ascentSpeed50perc=9}static{this.descentSpeed=18}static{this.gfLow=.4}static{this.gfHigh=.85}static{this.maxPpO2=1.4}static{this.maxDecoPpO2=1.6}static{this.airBreakOxygenDuration=20}static{this.airBreakBottomGasDuration=5}static setMediumConservatism(n){n.gfLow=a.gfLow,n.gfHigh=a.gfHigh}static useGeneralRecommended(n){n.safetyStop=a.safetyStopRecre,n.roundStopsToMinutes=a.roundStopsToMinutes,n.gasSwitchDuration=a.gasSwitchDuration,n.oxygenNarcotic=a.oxygenNarcotic}},As=class{constructor(n=!1,i=$.airBreakOxygenDuration,u=$.airBreakBottomGasDuration){this.enabled=n,this.oxygenDuration=i,this.bottomGasDuration=u}loadFrom(n){this.enabled=n.enabled,this.oxygenDuration=n.oxygenDuration,this.bottomGasDuration=n.bottomGasDuration}},Wn=class{constructor(n=$.gfLow,i=$.gfHigh,u=$.maxPpO2,f=$.maxDecoPpO2,d=$.saltWater){this.gfLow=n,this.gfHigh=i,this.maxPpO2=u,this.maxDecoPpO2=f,this.salinity=d,this.altitude=$.altitude,this.roundStopsToMinutes=$.roundStopsToMinutes,this.gasSwitchDuration=$.gasSwitchDuration,this.safetyStop=$.safetyStopRecre,this.lastStopDepth=$.lastStopDepth,this.decoStopDistance=$.decoStopDistance,this.minimumAutoStopDepth=$.minimumAutoStopDepth,this.maxEND=$.maxEND,this.oxygenNarcotic=!0,this.ascentSpeed6m=$.ascentSpeed6m,this.ascentSpeed50percTo6m=$.ascentSpeed50percTo6m,this.ascentSpeed50perc=$.ascentSpeed50perc,this.descentSpeed=$.descentSpeed,this.problemSolvingDuration=$.problemSolvingDuration,this._airBreaks=new As,this.gfLow=n||$.gfLow,this.gfHigh=i||$.gfHigh,this.maxPpO2=u||$.maxPpO2,this.maxDecoPpO2=f||$.maxDecoPpO2,this.salinity=d||$.saltWater}get airBreaks(){return this._airBreaks}loadFrom(n){this.gfLow=n.gfLow||this.gfLow,this.gfHigh=n.gfHigh||this.gfHigh,this.maxPpO2=n.maxPpO2||this.maxPpO2,this.maxDecoPpO2=n.maxDecoPpO2||this.maxDecoPpO2,this.oxygenNarcotic=n.oxygenNarcotic,this.salinity=n.salinity||this.salinity,this.altitude=n.altitude||n.altitude===0?n.altitude:this.altitude,this.roundStopsToMinutes=n.roundStopsToMinutes,this.gasSwitchDuration=n.gasSwitchDuration||this.gasSwitchDuration,this.problemSolvingDuration=n.problemSolvingDuration||this.problemSolvingDuration,this.lastStopDepth=n.lastStopDepth||this.lastStopDepth,this.decoStopDistance=n.decoStopDistance||this.decoStopDistance,this.minimumAutoStopDepth=n.minimumAutoStopDepth||this.minimumAutoStopDepth,this.safetyStop=n.safetyStop||this.safetyStop,this.maxEND=n.maxEND||this.maxEND,this.ascentSpeed6m=n.ascentSpeed6m||this.ascentSpeed6m,this.ascentSpeed50percTo6m=n.ascentSpeed50percTo6m||this.ascentSpeed50percTo6m,this.ascentSpeed50perc=n.ascentSpeed50perc||this.ascentSpeed50perc,this.descentSpeed=n.descentSpeed||this.descentSpeed,this.airBreaks.loadFrom(n.airBreaks)}},kn=class{constructor(n,i){this.depthConverter=n,this.options=i}toDecoStop(n){let i=this.depthConverter.fromBar(n);return Q.roundDistance(i,this.options.decoStopDistance)}nextStop(n){if(n<=this.options.lastStopDepth)return 0;let i=Q.floorDistance(n,this.options.decoStopDistance);if(i!==n)return i;let u=n-this.options.decoStopDistance;return u<=this.options.lastStopDepth?this.options.lastStopDepth:u}addSafetyStop(n,i){return(this.options.safetyStop===Fn.always||this.options.safetyStop===Fn.auto&&i>this.options.minimumAutoStopDepth)&&n===this.options.lastStopDepth}},lt;(function(a){a[a.noAction=0]="noAction",a[a.error=1]="error",a[a.gasSwitch=2]="gasSwitch",a[a.noDecoEnd=3]="noDecoEnd",a[a.lowPpO2=4]="lowPpO2",a[a.highPpO2=5]="highPpO2",a[a.highAscentSpeed=6]="highAscentSpeed",a[a.highDescentSpeed=7]="highDescentSpeed",a[a.brokenCeiling=8]="brokenCeiling",a[a.maxEndExceeded=9]="maxEndExceeded",a[a.isobaricCounterDiffusion=10]="isobaricCounterDiffusion",a[a.highGasDensity=11]="highGasDensity",a[a.safetyStop=12]="safetyStop",a[a.minDepth=13]="minDepth",a[a.maxDepth=14]="maxDepth",a[a.missingAirBreak=15]="missingAirBreak"})(lt||(lt={}));var ut=class a{constructor(n,i,u,f,d){this.timeStamp=n,this.depth=i,this.type=u,this.message=f,this.gas=d}static create(n,i,u,f){return new a(i,u,n,"",f)}static createError(n){return new a(0,0,lt.error,n)}},et=class{static createError(n){return ut.createError(n)}static createSafetyStopStart(n,i){return ut.create(lt.safetyStop,n,i)}static createNoDecoEnd(n,i){return ut.create(lt.noDecoEnd,n,i)}static createGasSwitch(n,i,u){return ut.create(lt.gasSwitch,n,i,u)}static createLowPpO2(n,i){return ut.create(lt.lowPpO2,n,i)}static createHighPpO2(n,i){return ut.create(lt.highPpO2,n,i)}static createHighAscentSpeed(n,i){return ut.create(lt.highAscentSpeed,n,i)}static createHighDescentSpeed(n,i){return ut.create(lt.highDescentSpeed,n,i)}static createBrokenCeiling(n,i){return ut.create(lt.brokenCeiling,n,i)}static createMaxEndExceeded(n,i,u){return ut.create(lt.maxEndExceeded,n,i,u)}static createIsobaricCounterDiffusion(n,i,u){return ut.create(lt.isobaricCounterDiffusion,n,i,u)}static createHighDensity(n,i,u){return ut.create(lt.highGasDensity,n,i,u)}static createShallowDepth(n){return ut.create(lt.minDepth,0,n)}static createMaxDepth(n){return ut.create(lt.maxDepth,0,n)}static createMissingAirBreak(n,i){return ut.create(lt.missingAirBreak,n,i)}},Un=class{constructor(){this.items=[]}add(n){this.items.push(n)}},Ps=class{constructor(n,i){this.time=n,this.depth=i}get notAtSurface(){return this.depth>0}static isDecoDive(n){for(let i of n)if(i.notAtSurface)return!0;return!1}},We=class a{constructor(n,i,u,f){this.seg=n,this.ceil=i,this.tiss=u,this.err=f}get segments(){return this.seg}get ceilings(){return this.ceil}get tissues(){return this.tiss}get errors(){return this.err}static fromErrors(n,i){return new a(n,[],[],i)}static fromProfile(n,i,u){return new a(n,i,u,[])}},Ts=class{static validate(n){let i=[];if(!n.hasBottomGas){let u=et.createError("At least one bottom gas has to be defined.");return i.push(u),i}return i}},Cs=class{constructor(n,i){this.gases=n,this.depthConverter=Ge.simple(),this.depthLevels=new kn(this.depthConverter,i)}bestGas(n){let i=this.depthConverter.toBar(n.currentDepth),u=this.depthConverter.toBar(n.maxEnd),f=n.currentGas;return this.gases.all.forEach(d=>{let w=d.mod(n.maxDecoPpO2),y=this.depthLevels.toDecoStop(w),A=d.end(i,n.oxygenNarcotic);n.currentDepth<=y&&A<=u&&(!f||f.fO2<d.fO2)&&(f=d)}),f}airBreakGas(n,i){let u=this.depthConverter.toBar(n);return(0,qn.default)(this.gases.all).filter(d=>St.partialPressure(u,d.fO2)>=St.minPpO2).minBy(d=>d.fO2)||i}},Ae=class a{constructor(){this.items=[]}get all(){return this.items.slice()}get hasBottomGas(){return this.items.length>=1}static fromTanks(n){let i=new a;return n.forEach(u=>{i.add(u.gas)}),i}add(n){this.items.push(n)}isRegistered(n){return this.items.includes(n)}},rt=class a{constructor(n,i){if(this._fO2=n,this._fHe=i,this._contentCode=0,this.contentExceeds100percent())throw new Error("O2 + He can't exceed 100 %");this.updateContentCode()}get fN2(){return 1-this._fO2-this._fHe}get fO2(){return this._fO2}get fHe(){return this._fHe}get name(){return a.nameFor(this.fO2,this.fHe)}get contentCode(){return this._contentCode}set fO2(n){this._fO2=n>1?1:n,this.contentExceeds100percent()&&(this._fHe=this.countRemaining(this._fO2)),this.updateContentCode()}set fHe(n){this._fHe=n>.99?.99:n,this.contentExceeds100percent()&&(this._fO2=this.countRemaining(this._fHe)),this.updateContentCode()}static init(n,i){a.nameFor=n,a.byName=i}copy(){return new a(this._fO2,this._fHe)}mod(n){return St.mod(n,this._fO2)}end(n,i){let u=i?this._fO2:0;return St.end(n,this.fN2,u)}mnd(n,i){let u=i?this._fO2:0;return St.mnd(n,this.fN2,u)}ceiling(n){return St.ceiling(this._fO2,n)}compositionEquals(n){return!!n&&this._fO2===n._fO2&&this._fHe===n._fHe}assignStandardGas(n){let i=a.byName(n);i&&(this.fO2=i.fO2,this.fHe=i.fHe)}contentExceeds100percent(){return this._fO2+this._fHe>1}countRemaining(n){let i=1-n;return Q.round(i,5)}updateContentCode(){this._contentCode=Q.round(this._fO2*1e4*1e4)+Q.round(this._fHe*1e4)}},Wt=class a{static{this.oxygen=new rt(1,0)}static{this.ean50=new rt(.5,0)}static{this.ean38=new rt(.38,0)}static{this.ean36=new rt(.36,0)}static{this.ean32=new rt(.32,0)}static{this.trimix3525=new rt(.35,.25)}static{this.trimix2525=new rt(.25,.25)}static{this.air=new rt(St.o2InAir,0)}static{this.trimix2135=new rt(.21,.35)}static{this.trimix1845=new rt(.18,.45)}static{this.trimix1555=new rt(.15,.55)}static{this.trimix1260=new rt(.12,.6)}static{this.trimix1070=new rt(.1,.7)}static{this.airName="Air"}static{this.oxygenName="Oxygen"}static{this.namesRegEx=/[EAN](?<fO2>\d{2})|(?<fO2b>\d{2})\/(?<fHe>\d{2})/i}static{this.map=new Map([[a.airName,a.air],["EAN32",a.ean32],["EAN36",a.ean36],["EAN38",a.ean38],["EAN50",a.ean50],[a.oxygenName,a.oxygen],["Helitrox 35/25",a.trimix3525],["Helitrox 25/25",a.trimix2525],["Helitrox 21/35",a.trimix2135],["Trimix 18/45",a.trimix1845],["Trimix 15/55",a.trimix1555],["Trimix 12/60",a.trimix1260],["Trimix 10/70",a.trimix1070]])}static nitroxNames(){return a.allNames().slice(0,6)}static allNames(){return Array.from(a.map.keys())}static nameFor(n,i=0){let f=Q.round(n*100),d=Q.round(i*100);return f<=0?"":d<=0?f>=100?a.oxygenName:f===21?a.airName:"EAN"+f.toString():`${f>=21?"Helitrox":"Trimix"} ${f.toString()}/${d.toString()}`}static byName(n){let i=[...a.map.keys()],u=(0,qn.default)(i).filter(d=>d.toLowerCase()===n.toLowerCase()).first();if(u)return a.map.get(u)??null;let f=a.namesRegEx.exec(n);if(f){if(f[1]){let d=Number(f[1])/100;if(d>0)return new rt(d,0)}if(f[2]&&f[3]){let d=Number(f[2])/100,w=Number(f[3])/100;if(d>0&&w>0)return new rt(d,w)}}return null}};rt.init((a,n)=>Wt.nameFor(a,n),a=>Wt.byName(a));var fn=class a{static haveReserve(n){for(let i=0;i<n.length;i++)if(!n[i].hasReserve)return!1;return!0}static resetConsumption(n){n.forEach(i=>{i.consumed=0,i.reserve=0})}static removeTank(n,i){let u=n.filter(f=>f!==i);return a.renumberIds(u),u}static renumberIds(n){for(let i=0;i<n.length;i++){let u=n[i];u.id=i+1}}},zn=class a{constructor(n,i,u){this.size=n,this.startPressure=i,this.id=0,this.consumed=0,this.reserve=0,this._gas=Wt.air.copy(),this.o2=u}get gas(){return this._gas}get o2(){return Yr.getO2(this.gas.fO2,this.gas.fHe)}get he(){let n=this.gas.fHe*100;return Q.roundTwoDecimals(n)}get n2(){let n=100-this.o2-this.he;return Q.roundTwoDecimals(n)}get volume(){return a.volume(this)}get reserveVolume(){return a.volume2(this.size,this.reserve)}get consumedVolume(){return a.volume2(this.size,this.consumed)}get name(){return this._gas.name}get endPressure(){let n=this.startPressure-this.consumed;return n>0?n:0}get percentsRemaining(){return this.endPressure/this.startPressure*100}get percentsReserve(){let n=this.reserve/this.startPressure*100;return n>100?100:n}get hasReserve(){return this.endPressure>=this.reserve}set o2(n){this._gas.fO2=Yr.setO2(n,this.gas.fHe)}set he(n){this.gas.fHe=n/100}static createDefault(){return new a(15,200,St.o2InAir*100)}static volume(n){return a.volume2(n.size,n.startPressure)}static volume2(n,i){return n*i}assignStandardGas(n){this.gas.assignStandardGas(n)}loadFrom(n){this.size=n.size,this.startPressure=n.startPressure,this.consumed=n.consumed,this.reserve=n.reserve,this.gas.fO2=n._gas.fO2,this.gas.fHe=n._gas.fHe}},Yr=class a{static{this.pinnedO2=21}static{this.o2InAirPercent=St.o2InAir*100}static getO2(n,i){let u=n*100;return this.isInAirRange(u,i)?a.pinnedO2:Q.roundTwoDecimals(u)}static setO2(n,i){return this.isInAirRange(n,i)?St.o2InAir:n/100}static isInAirRange(n,i){return a.o2InAirPercent<=n&&n<=a.pinnedO2&&i===0}},Fe=class a{static speed(n,i){let u=n.end-n.start;return a.speedByXChange(i.start,i.end,u)}static speedByXChange(n,i,u){return(i-n)/u}static yValueAt(n,i,u){return n+i*u}static xValueAtAbsolute(n,i,u){let f=this.speed(n,i);return n.start+a.xValueAt(i.start,f,u)}static xValueAt(n,i,u){return i===0?0:(u-n)/i}},Os=class a{static validate(n,i){let u=[];if(!n.any()){let f=et.createError("There needs to be at least one segment at depth.");u.push(f)}return n.withAll(f=>{a.validateRegisteredGas(u,i,f)}),u}static validateRegisteredGas(n,i,u){if(!i.isRegistered(u.gas)){let f=`Segment ${u.startDepth}-${u.endDepth} has gas not registered in gases.`,d=et.createError(f);n.push(d)}}},kt=class a{constructor(n,i,u,f){this._startDepth=n,this._endDepth=i,this._duration=f,u instanceof zn?(this._tank=u,this._gas=u.gas):this._gas=u}get startDepth(){return this._startDepth}get endDepth(){return this._endDepth}get duration(){return this._duration}get gas(){return this._gas}get tank(){return this._tank}get speed(){return a.speed(this.startDepth,this.endDepth,this.duration)}get averageDepth(){return(this.startDepth+this.endDepth)/2}set startDepth(n){this._startDepth=n}set endDepth(n){this._endDepth=n}set duration(n){this._duration=n}set tank(n){this._tank=n,n&&(this._gas=n.gas)}static from(n){let i=new a(n.startDepth,n.endDepth,n._gas,n.duration);return i.tank=n.tank,i}static speed(n,i,u){return Fe.speedByXChange(n,i,u)}static depthAt(n,i,u){return Fe.yValueAt(n,i,u)}static timeAt(n,i,u){return Fe.xValueAt(n,i,u)}contentEquals(n){return this.speed===n.speed&&this._gas.compositionEquals(n._gas)}depthAt(n){return a.depthAt(this.startDepth,this.speed,n)}mergeFrom(n){this.duration+=n.duration,this.endDepth=n.endDepth}},Pt=class a{constructor(){this.segments=[],this._maxDepth=0}get startAscentIndex(){return this.deepestPart().length}get startAscentTime(){let n=this.deepestPart();return a.duration(n)}get length(){return this.segments.length}get items(){return this.segments.slice()}get maxDepth(){return this._maxDepth}get currentDepth(){return this.any()?this.last().endDepth:0}get duration(){return a.duration(this.segments)}static from(n){return a.fromCollection(n.segments)}static fromCollection(n){let i=new a;return n.forEach(u=>{let f=kt.from(u);i.segments.push(f),i.updateMaxDepth(f)}),i}static duration(n){let i=0;for(let u of n)i+=u.duration;return i}static averageDepth(n){if(n.length<=0)return 0;let i=0,u=0;return n.forEach(f=>{if(f.duration>0){let d=f.averageDepth*f.duration+u*i;u+=f.duration,i=d/u}}),i}add(n,i,u){let f=new kt(this.currentDepth,n,i,u);return this.segments.push(f),this.updateMaxDepth(f),f}addFlat(n,i){return this.add(this.currentDepth,n,i)}mergeFlat(n=0){if(n<0)return this.items;let i=[];for(let u=this.segments.length-1;u>n;u--){let f=this.segments[u-1],d=this.segments[u];f.contentEquals(d)&&(f.mergeFrom(d),i.push(d))}return this.segments=this.segments.filter(u=>!i.includes(u)),this.items}remove(n){this.segments=this.segments.filter(i=>i!==n),this.fixStartDepths()}cutDown(n){let i=this.segments.length-n;this.segments=this.segments.slice(0,i),this.fixStartDepths()}withAll(n){for(let i=0;i<this.segments.length;i++)n(this.segments[i])}any(){return this.segments.length!==0}last(){return this.segments[this.segments.length-1]}copy(){return a.from(this)}fixStartDepths(){this.any()&&(this.segments[0].startDepth=0);for(let n=0;n<this.segments.length-1;n++){let i=this.segments[n],u=this.segments[n+1];u.startDepth=i.endDepth,this.updateMaxDepth(u)}}deepestPart(){for(let n=this.segments.length-1;n>=0;n--)if(this.segments[n].endDepth===this.maxDepth)return this.items.slice(0,n+1);return[]}updateMaxDepth(n){n.endDepth>this._maxDepth&&(this._maxDepth=n.endDepth)}},W=class a{static{this.oneSecond=1}static{this.oneMinute=60}static{this.oneHour=a.oneMinute*60}static{this.oneDay=a.oneHour*24}static{this.safetyStopDuration=a.oneMinute*3}static toSeconds(n){return n*a.oneMinute}static toMinutes(n){return n/a.oneMinute}static toHours(n){return n/a.oneHour}},Zr=class a{static{this.minimalStep=1}constructor(){}search(n){if(n.maxValue<n.initialValue)throw Error("Max value cant be smaller than initial value");if(n.estimationStep>n.maxValue-n.initialValue)throw Error("Step cant be larger than range");let i=this.findInitialLimit(n);return this.searchInsideInterval(n,i)}searchInsideInterval(n,i){for(;i.right-i.left>a.minimalStep;){let u=i.left+(i.right-i.left)/2;u=Math.round(u),n.doWork(u),n.meetsCondition()?i.left=u:i.right=u}return i.left}findInitialLimit(n){let i=n.initialValue;for(n.doWork(i);n.meetsCondition()&&i<=n.maxValue;)i+=n.estimationStep,n.doWork(i);let u=i-n.estimationStep;u=u<n.initialValue?n.initialValue:u;let f=i>n.maxValue?n.maxValue:i;return{left:u,right:f}}},bs=class{constructor(n,i,u){this.depthConverter=n,this.options=i,this.tissues=u,this.lowestCeiling=0,this.lowestCeiling=this.depthConverter.surfacePressure+1}ceiling(){let n=this.tolerated();return n<this.depthConverter.surfacePressure&&(n=this.depthConverter.surfacePressure),this.depthConverter.fromBar(n)}toleratedTissues(n,i,u,f){let d=this.tissues.compartments,w=0;for(let y=0;y<d.length;y++){let A=d[y],T=w;(n/A.b+A.a-n)*u+n<(i/A.b+A.a-i)*f+i&&(T=(-A.a*A.b*(u*i-f*n)-(1-A.b)*(u-f)*i*n+A.b*(i-n)*A.pTotal)/(-A.a*A.b*(u-f)+(1-A.b)*(f*i-u*n)+A.b*(i-n))),T>=w&&(w=T)}return w}tolerated(){let n=this.options.gfLow,i=this.options.gfHigh,u=this.depthConverter.surfacePressure,f=this.tissues.ceiling(n);return f>this.lowestCeiling&&(this.lowestCeiling=f),this.toleratedTissues(u,this.lowestCeiling,i,n)}},qr=class a{static{this.sixMeters=6}constructor(n){this.options=n,this.averageDepth=0}markAverageDepth(n){let i=n.deepestPart();this.averageDepth=Pt.averageDepth(i)}ascent(n){let i=this.averageDepth/2;return n>a.sixMeters?n>i?this.options.ascentSpeed50perc:this.options.ascentSpeed50percTo6m:this.options.ascentSpeed6m}},Gn=class{constructor(n,i,u,f,d){this.gases=n,this.segments=i,this.options=u,this.depthConverter=f,this.ceilings=[],this.runTime=0,this._oxygenStarted=0,this.tissues=hn.createLoaded(d),this.gradients=new bs(f,u,this.tissues);let w=i.last();this._currentGas=w.gas,this.bestGasOptions={currentDepth:this.currentDepth,maxDecoPpO2:this.options.maxDecoPpO2,oxygenNarcotic:this.options.oxygenNarcotic,maxEnd:this.options.maxEND,currentGas:this.currentGas},this.speeds=new qr(this.options),this.levels=new kn(f,u),this.gasSource=new Cs(n,u)}get currentGas(){return this._currentGas}get ascentSpeed(){return this.speeds.ascent(this.currentDepth)}get currentDepth(){return this.segments.currentDepth}get addSafetyStop(){return this.levels.addSafetyStop(this.currentDepth,this.segments.maxDepth)}get decoStopDuration(){return this.options.roundStopsToMinutes?W.oneMinute:W.oneSecond}get isAtSurface(){return this.segments.last().endDepth===0}get shouldAddAirBreaks(){return this.isBreathingOxygen&&this.options.airBreaks.enabled}get runTimeOnOxygen(){return this.runTime-this._oxygenStarted}get isBreathingOxygen(){return this.currentGas.compositionEquals(Wt.oxygen)}set currentGas(n){n.compositionEquals(Wt.oxygen)&&!this.isBreathingOxygen&&(this._oxygenStarted=this.runTime),this._currentGas=n}markAverageDepth(){this.speeds.markAverageDepth(this.segments)}addCeiling(){let n=this.ceiling(),i=new Ps(this.runTime,n);this.ceilings.push(i)}ceiling(){return this.gradients.ceiling()}bestDecoGas(){return this.bestGasOptions.currentDepth=this.currentDepth,this.bestGasOptions.currentGas=this.currentGas,this.gasSource.bestGas(this.bestGasOptions)}createMemento(){return{runTime:this.runTime,oxygenStarted:this._oxygenStarted,tissues:hn.copy(this.tissues.compartments),ceilings:this.ceilings.length,segments:this.segments.length,lowestCeiling:this.gradients.lowestCeiling}}restore(n){this.tissues.restoreFrom(n.tissues),this.gradients.lowestCeiling=n.lowestCeiling,this.runTime=n.runTime,this._oxygenStarted=n.oxygenStarted,this.ceilings=this.ceilings.slice(0,n.ceilings);let i=this.segments.length-n.segments;this.segments.cutDown(i)}nextStop(n){return this.levels.nextStop(n)}shouldSwitchTo(n){return n&&!this.currentGas.compositionEquals(n)}addAscentSegment(n,i){return this.segments.add(n,this.currentGas,i)}addGasSwitchSegment(){let n=this.options.gasSwitchDuration*W.oneMinute;return this.addStopSegment(n)}addStopSegment(n){return this.segments.addFlat(this.currentGas,n)}airBreakGas(){return this.gasSource.airBreakGas(this.currentDepth,this.currentGas)}},Es=class{constructor(n,i){this.context=n,this.remainingStopTime=i,this.maxOxygenTime=this.context.options.airBreaks.oxygenDuration*W.oneMinute,this.maxBottomGasTime=this.context.options.airBreaks.bottomGasDuration*W.oneMinute,this._initialStopDuration=Math.min(this.remainingStopTime,this.remainingOxygenTime)}get needsStop(){return this.remainingStopTime>0}get maxGasTime(){return this.context.isBreathingOxygen?this.maxOxygenTime:this.maxBottomGasTime}get stopDuration(){return this._initialStopDuration>0?this._initialStopDuration:Math.min(this.remainingStopTime,this.maxGasTime)}get remainingOxygenTime(){let n=this.maxOxygenTime-this.context.runTimeOnOxygen;return n>0?n:0}switchStopGas(){if(!(this._initialStopDuration>0)){if(this.context.isBreathingOxygen){this.context.currentGas=this.context.airBreakGas();return}this.context.currentGas=this.context.bestDecoGas()}}subtractStopDuration(){if(this._initialStopDuration>0){this.subtractRemainingStopTime(this._initialStopDuration),this._initialStopDuration=0;return}this.subtractRemainingStopTime(this.stopDuration)}subtractRemainingStopTime(n){this.remainingStopTime-=n}},yo=(a,n)=>{let i=W.toMinutes(n);return a/i},Kn=class{constructor(n,i){this.current=n,this.surfaceInterval=i}},Is=class{constructor(n,i,u){this.previousTissues=n,this.altitude=i,this.surfaceInterval=u}},ln=class a{constructor(n,i,u,f){this._segments=n,this._gases=i,this._options=u,this._surface=this.resolveSurfaceParameters(f)}get segments(){return this._segments}get gases(){return this._gases}get options(){return this._options}get surfaceInterval(){return new Is(this._surface.current,this.options.altitude,this._surface.surfaceInterval)}static forSimpleDive(n,i,u,f){let d=new Ae;d.add(i);let w=new Pt,y=yo(n,u.descentSpeed);return w.add(n,i,y),new a(w,d,u,f)}static forMultilevelDive(n,i,u,f){return new a(n,i,u,f)}resolveSurfaceParameters(n){if(n&&$r.validCount(n?.current))return n;let i=hn.createLoadedAt(this.options.altitude);return new Kn(i,Number.POSITIVE_INFINITY)}},ke=class{noDecoLimit({segments:n,gases:i,options:u,surfaceInterval:f}){let d=new le(u).create(),w=this.applySurfaceInterval(f),y=new Gn(i,n,u,d,w);return this.swimNoDecoLimit(n,i,y)}decompression({segments:n,gases:i,options:u,surfaceInterval:f}){let d=new le(u).create(),w=n.copy(),y=this.validate(n,i);if(y.length>0){let pt=w.mergeFlat(n.length);return We.fromErrors(pt,y)}let A=this.applySurfaceInterval(f),T=new Gn(i,w,u,d,A);this.swimPlan(T),T.markAverageDepth();let q=T.nextStop(T.currentDepth);for(;q>=0&&!T.isAtSurface;)this.tryGasSwitch(T),this.stayAtDecoStop(T,q),this.stayAtSafetyStop(T),this.ascentToNextStop(T,q),q=T.nextStop(q);let nt=T.segments.mergeFlat(n.length);return We.fromProfile(nt,T.ceilings,T.tissues.finalState())}applySurfaceInterval({previousTissues:n,altitude:i,surfaceInterval:u}){if(!$r.valid(n))throw Error("Provided tissues collection isn`t valid. It needs have valid items of 16 compartments ordered by halftime.");if(i<0)throw Error("Altitude needs to be positive number or 0.");if(u<0)throw Error("Surface interval needs to be positive number or 0.");if(u===Number.POSITIVE_INFINITY)return hn.createLoadedAt(i);let f=new Pt,d=f.addFlat(Wt.air,u),w=new Ae;w.add(Wt.air);let y=new Wn(1,1,1.6,1.6,cn.salt);y.altitude=i;let A=new le(y).create(),T=new Gn(w,f,y,A,n);return this.swim(T,d),T.tissues.finalState()}tryGasSwitch(n){let i=n.bestDecoGas();if(n.shouldSwitchTo(i)){n.currentGas=i;let u=n.addGasSwitchSegment();this.swim(n,u)}}stayAtDecoStop(n,i){if(this.needsDecoStop(n,i)){let u=n.createMemento(),f={estimationStep:W.oneMinute*20,initialValue:0,maxValue:W.oneDay,doWork:A=>this.swimDecoStop(n,u,A),meetsCondition:()=>this.needsDecoStop(n,i)},w=new Zr().search(f)+W.oneSecond,y=Q.ceilDistance(w,n.decoStopDuration);this.swimDecoStop(n,u,y)}}swimDecoStop(n,i,u){n.restore(i),this.stayAtStop(n,u)}stayAtSafetyStop(n){n.addSafetyStop&&this.stayAtStop(n,W.safetyStopDuration)}stayAtStop(n,i){n.shouldAddAirBreaks?this.swimOxygenStop(n,i):this.swimStopDuration(n,i)}swimOxygenStop(n,i){let u=new Es(n,i);for(;u.needsStop;)u.switchStopGas(),this.swimStopDuration(n,u.stopDuration),u.subtractStopDuration();n.currentGas=Wt.oxygen}swimStopDuration(n,i){let u=n.addStopSegment(i);this.swim(n,u)}needsDecoStop(n,i){if(i>=n.ceiling())return!1;let u=n.createMemento();this.ascentToNextStop(n,i);let f=i<n.ceiling();return n.restore(u),f}ascentToNextStop(n,i){let u=n.currentDepth-i,f=yo(u,n.ascentSpeed),d=n.addAscentSegment(i,f);this.swim(n,d)}validate(n,i){let u=Os.validate(n,i);if(u.length>0)return u;let f=Ts.validate(i);return f.length>0?f:[]}swimPlan(n){n.addCeiling(),n.segments.withAll(i=>{this.swim(n,i)})}swim(n,i){let u=i.startDepth,f=W.oneSecond;for(let d=0;d<i.duration;d+=f){let w=kt.depthAt(u,i.speed,f),y=new kt(u,w,i.gas,f);this.swimPart(n,y),u=y.endDepth}}swimPart(n,i){let u=this.toLoadSegment(n.depthConverter,i);n.tissues.load(u,i.gas),n.runTime+=i.duration,n.addCeiling()}swimNoDecoLimit(n,i,u){if(this.validate(n,i).length>0)return 0;this.swimPlan(u);let d=this.currentNdl(u.ceilings);return d!==Number.POSITIVE_INFINITY?d:this.predictNoDecoLimit(n,u)}predictNoDecoLimit(n,i){let u=n.last(),f=u.endDepth,d=new kt(f,f,u.gas,W.oneMinute),w=this.toLoadSegment(i.depthConverter,d),y=1;for(;i.ceiling()<=0&&y>0;)y=i.tissues.load(w,u.gas),i.runTime+=W.oneMinute;return y===0||f===0?Number.POSITIVE_INFINITY:this.floorNdl(i.runTime)}floorNdl(n){let i=W.toMinutes(n);return i=Q.floor(i),i-1}currentNdl(n){for(let i=0;i<n.length;i+=W.oneMinute){let u=n[i];if(u.notAtSurface)return this.floorNdl(u.time)}return Number.POSITIVE_INFINITY}toLoadSegment(n,i){let u=n.toBar(i.speed)-n.surfacePressure;return{startPressure:n.toBar(i.startDepth),duration:i.duration,speed:u}}},$n=class a{static createPlan(n,i,u,f){let d=new Pt,w=a.descentDuration(n,f);d.add(n,u,w);let y=W.toSeconds(i)-w;return y=y<0?0:y,d.addFlat(u,y),d}static descentDuration(n,i){let u=n/i.descentSpeed;return u=Q.ceil(u,1),u=W.toSeconds(u),Q.ceil(u)}static emergencyAscent(n,i,u){let d=Pt.fromCollection(n).deepestPart(),w=d.length;a.addSolvingSegment(d,i.problemSolvingDuration),a.addUserDefinedAscent(d,n,w);let y=Pt.fromCollection(d),A=Ae.fromTanks(u),T=new ke,q=ln.forMultilevelDive(y,A,i),pt=T.decompression(q).segments;return pt.slice(w,pt.length)}static addSolvingSegment(n,i){if(n.length===0)return;let u=i*W.oneMinute,f=n[n.length-1],d=f.endDepth,w=new kt(d,d,f.gas,u);n.push(w)}static addUserDefinedAscent(n,i,u){for(let f=u;f<i.length;f++){let d=i[f];if(!d.tank)return;n.push(d)}}},Xr=class{constructor(){this.remaining=new Map}get(n){return this.remaining.get(n)||0}set(n,i){let u=i>0?i:0;this.remaining.set(n,u)}},Vr=class a{static{this.defaultPrimaryReserve=30}static{this.defaultStageReserve=20}constructor(n){this.depthConverter=n}static calculateDecompression(n,i,u){let f=Ae.fromTanks(i),d=new ke,w=n.copy(),y=ln.forMultilevelDive(w,f,u);return d.decompression(y)}consumeFromTanks(n,i,u,f){if(n.length<2)throw new Error("Profile needs to contain at least 2 segments.");let d=$n.emergencyAscent(n,i,u);this.consumeFromTanks2(n,d,u,f)}consumeFromTanks2(n,i,u,f){if(n.length<2)throw new Error("Profile needs to contain at least 2 segments.");fn.resetConsumption(u),this.updateReserve(i,u,f);let d=A=>A.reserve,w=f.diver.rmv,y=this.toBeConsumedYet(n,w,new Xr,A=>!!A.tank);y=this.consumeByTanks(n,y,w,d),y=this.consumeByTanksRemaining(n,y,()=>0),y=this.toBeConsumedYet(n,w,y,A=>!A.tank),y=this.consumeByGases(u,y,d),this.consumeByGases(u,y,()=>0),this.roundTanksConsumedToBars(u)}calculateMaxBottomTime(n,i,u,f){let d=this.createTestProfile(n),w=d.last(),y={estimationStep:W.oneMinute*40,initialValue:0,maxValue:W.oneDay,doWork:nt=>{w.duration=nt,this.consumeFromProfile(d,i,u,f)},meetsCondition:()=>fn.haveReserve(i)},T=new Zr().search(y);if(T===0)return 0;let q=W.toMinutes(n.duration+T);return Q.floor(q)}consumeFromProfile(n,i,u,f){let d=a.calculateDecompression(n,i,f);this.consumeFromTanks(d.segments,f,i,u)}createTestProfile(n){let i=n.copy(),u=n.last();return i.addFlat(u.gas,0),i}updateReserve(n,i,u){let f=this.toBeConsumedYet(n,u.diver.teamStressRmv,new Xr,()=>!0);for(let d=0;d<=i.length-1;d++){let w=i[d],y=w.gas.contentCode,A=f.get(y);this.updateTankReserve(w,d,u,A);let T=A-w.reserve*w.size;f.set(y,T)}}updateTankReserve(n,i,u,f){let d=Q.ceil(f/n.size),w=d>n.startPressure?n.startPressure:d;n.reserve=this.ensureMinimalReserve(w,i,u)}ensureMinimalReserve(n,i,u){let f=i===0?u.primaryTankReserve:u.stageTankReserve;return n<f?f:n}consumeByGases(n,i,u){for(let f=n.length-1;f>=0;f--){let d=n[f],w=d.gas.contentCode,y=i.get(w),A=this.consumeFromTank(d,y,u);A=A<0?0:A,y-=A,i.set(w,y)}return i}consumeByTanks(n,i,u,f){let d=W.toMinutes(u);return this.consumeBySegmentTank(n,i,f,w=>this.consumedBySegment(w,d))}consumeByTanksRemaining(n,i,u){return this.consumeBySegmentTank(n,i,u,(f,d)=>d)}consumeBySegmentTank(n,i,u,f){return n.forEach(d=>{if(d.tank){let w=d.gas.contentCode,y=i.get(w),A=f(d,y),T=this.consumeFromTank(d.tank,A,u);T=T<0?0:T,y-=T,i.set(w,y)}}),i}consumeFromTank(n,i,u){let f=n.endPressure-u(n);f=f>0?f:0;let d=f*n.size,w=i>d?d:i;return n.consumed+=w/n.size,w}toBeConsumedYet(n,i,u,f){let d=W.toMinutes(i);for(let w=0;w<n.length;w++){let y=n[w];if(f(y)){let T=y.gas.contentCode,q=this.consumedBySegment(y,d),nt=u.get(T);nt+=q,u.set(T,nt)}}return u}consumedBySegment(n,i){let u=this.depthConverter.toBar(n.averageDepth);return Q.roundTwoDecimals(n.duration)*u*i}roundTanksConsumedToBars(n){n.forEach(i=>i.consumed=Q.ceil(i.consumed))}},Jr=class{constructor(n){this.depthConverter=n,this.minimumPpO2=.5}calculateForProfile(n){let i=0;return n.forEach(u=>{let f=u.gas.fO2,d=this.calculate(f,u.startDepth,u.endDepth,u.duration);i+=d}),i}calculate(n,i,u,f){let d=(i+u)/2,w=this.depthConverter.toBar(d),y=n*w;if(y<=this.minimumPpO2)return 0;let A=this.exponentByPpO2(y),T=Math.exp(A);return f*T*100}exponentByPpO2(n){return n<=1.5?-11.7853+1.93873*n:-23.6349+9.80829*n}},on=class{static{this.imperialTankSize=124.1}static{this.imperialTankWorkPressure=3442}static{this.imperialStageSize=80.1}static{this.imperialStageWorkPressure=3e3}static{this.mertricTankSize=15}static{this.metricStageSize=11.1}},Rs=class{get available(){return[this.primary,this.stage,{name:"2xLP85",size:165,workingPressure:2640},{name:"S40",size:41.3,workingPressure:3e3},{name:"LP85",size:82.5,workingPressure:2640},{name:"HP80",size:84.4,workingPressure:3442},{name:"HP100",size:106.7,workingPressure:3442}]}get primary(){return{name:"HP117",size:on.imperialTankSize,workingPressure:on.imperialTankWorkPressure}}get stage(){return{name:"S80",size:on.imperialStageSize,workingPressure:on.imperialStageWorkPressure}}};var _o=class a{static{this.lastStopDepth=15}static{this.depthDistance=10}static{this.descentSpeed=a.depthDistance*6}static{this.recreSpeed=a.depthDistance*3}static{this.maxEnd=a.depthDistance*10}get tanks(){return new Rs}get lastSpeedLevel(){return 20}get autoStopLevel(){return 33}get stopsDistance(){return a.depthDistance}get recreationalOptions(){return{ascentSpeed50perc:a.recreSpeed,ascentSpeed50percTo6m:a.recreSpeed,ascentSpeed6m:a.recreSpeed,descentSpeed:a.descentSpeed,lastStopDepth:a.lastStopDepth,maxEND:a.maxEnd}}get recommendedOptions(){return{ascentSpeed50perc:a.recreSpeed,ascentSpeed50percTo6m:a.depthDistance*2,ascentSpeed6m:a.depthDistance,descentSpeed:a.descentSpeed,lastStopDepth:a.depthDistance,maxEND:a.maxEnd}}},pn=class a{static{this.defaultSac=20}constructor(n=a.defaultSac,i){this.rmv=n,this.stressRmv=i||n*1.5}get teamStressRmv(){return this.stressRmv*2}static gasSac(n,i){return n/i}gasSac(n){return a.gasSac(this.rmv,n.size)}loadFrom(n){this.rmv=n.rmv,this.stressRmv=n.stressRmv}};var Yn=class a{constructor(n,i,u){this.gas=n,this.depth=i,this.density=u}static createDefault(){return new a(Wt.air,0,0)}applyHigher(n,i,u){u>this.density&&(this.gas=n,this.density=u,this.depth=i)}},Bs=class{constructor(){this.helium=.179,this.nitrogen=1.251,this.oxygen=1.428}static{this.recommendedMaximum=5.7}forGas(n){return this.forContent(n.fO2,n.fHe)}forContent(n,i){let u=1-n-i,f=this.nitrogen*u,d=this.oxygen*n,w=this.helium*i;return f+d+w}},Zn=class{constructor(n){this.depthConverter=n,this.density=new Bs}forProfile(n){let i=Yn.createDefault();return n.forEach(u=>{let f=u.gas,d=this.density.forGas(f);this.applyHigher(i,f,u.startDepth,d),this.applyHigher(i,f,u.endDepth,d)}),i}atDepth(n,i){let u=this.density.forGas(n);return this.fromAtaDensity(u,i)}applyHigher(n,i,u,f){let d=this.fromAtaDensity(f,u);n.applyHigher(i,u,d)}fromAtaDensity(n,i){let u=this.depthConverter.toBar(i);return n*u}};var Qr=class{static{this.dailyLimit=300}constructor(n){this.depthConverter=n,this.minPressure=.5}calculateForProfile(n){let i=0;return n.forEach(u=>{let f=u.gas.fO2,d=this.calculate(u.duration,f,u.startDepth,u.endDepth);i+=d}),i}calculate(n,i,u,f){let d=W.toMinutes(n),w=this.depthConverter.toBar(u),y=this.depthConverter.toBar(f),A=w*i,T=y*i;if(A<=this.minPressure&&T<=this.minPressure)return 0;A<=this.minPressure?(d=d*(T-this.minPressure)/(T-A),A=.501):T<=this.minPressure&&(d=d*(A-this.minPressure)/(A-T),T=.501);let q=A+T-1;return Math.pow(q,5/6)*(1-5*Math.pow(T-A,2)/216/Math.pow(q,2))*d}},Ls=class{constructor(n,i,u){this.startDepth=n,this.endDepth=i,this.duration=u}get minDepth(){return Math.min(this.startDepth,this.endDepth)}get maxDepth(){return Math.max(this.startDepth,this.endDepth)}get isDescent(){return this.startDepth<this.endDepth}get isStop(){return this.startDepth===this.endDepth}get isAscent(){return this.startDepth>this.endDepth}timeAt(n){let i=kt.speed(this.startDepth,this.endDepth,this.duration),u=kt.timeAt(this.startDepth,i,n);return Q.round(u)}},Ms=class{constructor(n){this.simpleDepths=Ge.simple(),this.events=new Un,this.elapsed=0,this.index=0,this.fixedMnd=!0,this.profile=n.profile,this.options=n.profileOptions,this.startAscentIndex=n.startAscentIndex,this.maxDensity=n.maxDensity,this.exactDepths=new le(this.options).create(),this.levels=new kn(this.exactDepths,this.options),this.densityAtDepth=new Zn(this.exactDepths),this.speeds=new qr(this.options);let i=Pt.fromCollection(this.profile);this._maxDepth=i.maxDepth,this._totalDuration=i.duration,this.speeds.markAverageDepth(i),this._mndBars=this.simpleDepths.toBar(this.options.maxEND)}get maxDepth(){return this._maxDepth}get totalDuration(){return this._totalDuration}get previous(){return this.index>0?this.profile[this.index-1]:null}get isBeforeDecoAscent(){return this.index<this.startAscentIndex}get maxPpo(){return this.isBeforeDecoAscent?this.options.maxPpO2:this.options.maxDecoPpO2}get current(){return this.profile[this.index]}get switchingGas(){return!!this.previous&&!this.current.gas.compositionEquals(this.previous.gas)}get switchingTank(){return!!this.previous&&!!this.previous.tank&&!!this.current.tank&&this.previous.tank!==this.current.tank}get brokenOxygenDuration(){return this.current.gas.compositionEquals(Wt.oxygen)&&this.current.duration>W.oneMinute*20}get maxMnd(){return this._mndBars}get currentEndTime(){return this.elapsed+this.current.duration}get atSafetyStop(){if(this.index!==this.profile.length-2)return!1;let n=this.current.startDepth;return this.levels.addSafetyStop(n,this.maxDepth)}gasEnd(n){let i=this.current.gas,u=this.options.oxygenNarcotic;return i.end(n,u)}addElapsed(){this.elapsed=this.currentEndTime}},jr=class a{static fromProfile(n){let i=new Ms(n),u=new Ns(i.events,i.current);for(i.index=0;i.index<n.profile.length;i.index++){let f=this.toPressureSegment(i.current,i.simpleDepths);this.addHighPpO2(i,f),this.addLowPpO2(i,f),this.addGasSwitch(i),this.addUserTankSwitch(i),this.addHighDescentSpeed(i),this.addHighAscentSpeed(i),this.addIsobaricCounterDiffusion(i),this.addMndExceeded(i,f),this.addDensityExceeded(i),this.addSafetyStop(i),this.addMissingAirBreak(i,f),u.assignSegment(i.current),a.addBrokenCeiling(u,n.ceilings),i.addElapsed()}return this.addShallowDepth(i),this.addMaximumDepth(i),i.events}static addHighAscentSpeed(n){let i=n.current,u=W.toSeconds(i.speed);if(u=Q.roundTwoDecimals(u),-u>n.speeds.ascent(i.startDepth)){let f=et.createHighAscentSpeed(n.elapsed,i.startDepth);n.events.add(f)}}static addHighDescentSpeed(n){let i=n.current;if(W.toSeconds(i.speed)>n.options.descentSpeed){let f=et.createHighDescentSpeed(n.elapsed,i.startDepth);n.events.add(f)}}static addGasSwitch(n){if(n.switchingGas){let i=n.current,u=et.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(u)}}static addUserTankSwitch(n){if(n.switchingTank){let i=n.current,u=et.createGasSwitch(n.elapsed,i.startDepth,i.gas);n.events.add(u)}}static toPressureSegment(n,i){let u=i.toBar(n.startDepth),f=i.toBar(n.endDepth);return new Ls(u,f,n.duration)}static addHighPpO2(n,i){if(i.isDescent||n.isBeforeDecoAscent&&n.switchingGas){let u=n.current.gas.mod(n.maxPpo);if(i.maxDepth>u){let f=i.startDepth,d=n.elapsed;i.startDepth<u&&(f=u,d+=i.timeAt(f));let w=n.simpleDepths.fromBar(f),y=et.createHighPpO2(d,w);n.events.add(y)}}}static addLowPpO2(n,i){let u=n.current,f=u.gas.ceiling(n.simpleDepths.surfacePressure);if(i.minDepth<f&&n.switchingGas||i.startDepth>f&&f>i.endDepth&&i.isAscent||u.startDepth===0&&i.startDepth<f&&i.isDescent){let w=i.startDepth,y=n.elapsed;i.startDepth>f&&(w=f,y+=i.timeAt(w));let A=n.simpleDepths.fromBar(w),T=et.createLowPpO2(y,A);n.events.add(T)}}static addBrokenCeiling(n,i){for(;n.lastCeilingIndex<n.currentSegmentEndTime&&n.lastCeilingIndex<i.length-1;){let u=i[n.lastCeilingIndex];n.lastCeilingIndex++,this.addNdlEnd(n,u);let f=n.belowCeiling(u);if(!f&&n.fixedBrokenCeiling){let d=et.createBrokenCeiling(u.time,u.depth);n.events.add(d),n.fixedBrokenCeiling=!1;break}if(f&&!n.fixedBrokenCeiling&&(n.fixedBrokenCeiling=!0),u.time>n.currentSegmentEndTime)break}}static addNdlEnd(n,i){if(!n.ndlCeilingMarked&&i.depth>0){n.ndlCeilingMarked=!0;let u=i.time-n.currentSegmentStartTime,f=n.current.depthAt(u),d=et.createNoDecoEnd(i.time,f);n.events.add(d)}}static addIsobaricCounterDiffusion(n){let i=n.current,u=n.previous;if(n.switchingGas&&u){let f=i.gas.fN2-u.gas.fN2,d=i.gas.fHe-u.gas.fHe;if(u.gas.fHe>0&&f*5>-d){let w=et.createIsobaricCounterDiffusion(n.elapsed,i.startDepth,i.gas);n.events.add(w)}}}static addMndExceeded(n,i){let u=n.current,f=n.gasEnd(i.startDepth),d=n.gasEnd(i.endDepth);if(n.maxMnd<f&&n.fixedMnd||n.maxMnd<d&&n.fixedMnd)if(i.startDepth>n.maxMnd)this.addMndEvent(n,n.elapsed,u.startDepth);else{let w={start:i.startDepth,end:i.endDepth},y={start:n.elapsed,end:n.elapsed+u.duration},A=Fe.xValueAtAbsolute(y,w,n.maxMnd),T=u.depthAt(A-n.elapsed);this.addMndEvent(n,A,T)}n.fixedMnd=d<=n.maxMnd}static addMndEvent(n,i,u){let f=n.current.gas,d=et.createMaxEndExceeded(i,u,f);n.events.add(d),n.fixedMnd=!0}static addDensityExceeded(n){let i=n.current,u=i.gas,f=i.startDepth,d=i.endDepth,w=i.endDepth>i.startDepth,y=n.switchingGas,A=n.densityAtDepth.atDepth(u,f),T=n.densityAtDepth.atDepth(u,d);if(y&&A>n.maxDensity||w&&T>n.maxDensity)if(i.startDepth>i.endDepth){let q=et.createHighDensity(n.elapsed,i.startDepth,i.gas);n.events.add(q)}else{let q={start:A,end:T},nt={start:n.elapsed,end:n.elapsed+i.duration},pt=Fe.xValueAtAbsolute(nt,q,n.maxDensity),qt=i.depthAt(pt-n.elapsed),ot=et.createHighDensity(pt,qt,i.gas);n.events.add(ot)}}static addSafetyStop(n){let i=n.current;if(n.atSafetyStop&&i.duration>=W.safetyStopDuration){let u=n.elapsed+i.duration-W.safetyStopDuration,f=et.createSafetyStopStart(u,i.endDepth);n.events.add(f)}}static addShallowDepth(n){if(n.maxDepth<9&&n.totalDuration>W.oneHour*5){let i=et.createShallowDepth(n.maxDepth);n.events.add(i)}}static addMaximumDepth(n){if(n.maxDepth>120){let i=et.createMaxDepth(n.maxDepth);n.events.add(i)}}static addMissingAirBreak(n,i){if(n.brokenOxygenDuration&&i.isStop){let u=n.elapsed+n.options.airBreaks.oxygenDuration,f=et.createMissingAirBreak(u,n.current.startDepth);n.events.add(f)}}},Ns=class{constructor(n,i){this.events=n,this.lastCeilingIndex=0,this.currentSegmentStartTime=0,this.currentSegmentEndTime=0,this.fixedBrokenCeiling=!0,this.ndlCeilingMarked=!1,this._current=i}get current(){return this._current}assignSegment(n){this.currentSegmentStartTime=this.currentSegmentEndTime,this.currentSegmentEndTime=this.currentSegmentStartTime+n.duration,this._current=n}belowCeiling(n){let i=n.time-this.currentSegmentStartTime;return this._current.depthAt(i)>=n.depth}};var wo=class a{static{this.psiRate=14.503773773022}static{this.cftRate=28.316846592}static{this.lbRate=2.20462262185}static{this.footRate=.3048}static{this.poundRate=.00220462262}static{this.lbPerCuftRate=a.poundRate*a.cftRate}get name(){return"Imperial"}get lengthShortcut(){return"ft"}get pressureShortcut(){return"psi"}get volumeShortcut(){return"cuft"}get weightShortcut(){return"lb"}get altitudeShortcut(){return"ft.a.s.l"}get densityShortcut(){return"lb/cuft"}toMeters(n){return n*a.footRate}fromMeters(n){return n/a.footRate}toBar(n){return n/a.psiRate}fromBar(n){return n*a.psiRate}toLiter(n){return n*a.cftRate}fromLiter(n){return n/a.cftRate}fromTankLiters(n,i){return this.fromLiter(n)*i}toTankLiters(n,i){return this.toLiter(n)/i}fromGramPerLiter(n){return n*a.lbPerCuftRate}toGramPerLiter(n){return n/a.lbPerCuftRate}fromKilogram(n){return n*a.lbRate}toKilogram(n){return n/a.lbRate}},xo=class a{static{this.airDensity=1.225}static tankVolumeWeight(n){let i=n.size*n.consumed;return a.volumeWeight(i)}static volumeWeight(n){return n*a.airDensity/1e3}};var Hs=So(ys());var _t=class a{static toTanks(n){let i=[];return n.forEach(u=>{let f=new zn(u.size,u.startPressure,0);f.id=u.id,f.gas.fO2=u.gas.fO2,f.gas.fHe=u.gas.fHe,i.push(f)}),fn.renumberIds(i),i}static fromTanks(n){let i=[];return n.forEach(u=>{let f=u.tank,d={id:f.id,size:f.size,workPressure:u.workingPressureBars,startPressure:f.startPressure,gas:a.fromGas(f.gas)};i.push(d)}),i}static toConsumed(n){let i=[];for(let u=0;u<n.length;u++){let f=n[u],d={id:f.id,consumed:f.consumed,reserve:f.reserve};i.push(d)}return i}static toSegments(n,i){let u=[];for(let f=0;f<n.length;f++){let d=n[f],w=a.toGas(d.gas),y=new kt(d.startDepth,d.endDepth,w,d.duration);if(d.tankId>0&&d.tankId<=i.length){let A=d.tankId-1;y.tank=i[A]}u.push(y)}return u}static fromSegments(n){let i=[];return n.forEach(u=>{let f=u.tank?u.tank.id:0,d={startDepth:u.startDepth,endDepth:u.endDepth,duration:u.duration,tankId:f,gas:a.fromGas(u.gas)};i.push(d)}),i}static toProfile(n,i){let u=a.toSegments(n.segments,i);if(n.errors.length>0){let d=a.toEvents(n.errors);return We.fromErrors(u,d.items)}let f=a.toTissues(n.tissues);return We.fromProfile(u,n.ceilings,f)}static fromProfile(n){return{segments:a.fromSegments(n.segments),ceilings:n.ceilings,tissues:a.fromTissues(n.tissues),errors:a.fromEvents(n.errors)}}static toTissues(n){return(0,Hs.default)(n).map(i=>({pN2:i.pN2,pHe:i.pHe,a:i.a,b:i.b})).value()}static fromTissues(n){return(0,Hs.default)(n).map(i=>({pN2:i.pN2,pHe:i.pHe,a:i.a,b:i.b})).value()}static toEvents(n){let i=new Un;return n.forEach(u=>{let f=ut.create(u.type,u.timeStamp,u.depth);f.message=u.message,u.gas&&(f.gas=a.toGas(u.gas)),i.add(f)}),i}static fromEvents(n){let i=[];return n.forEach(u=>{let f={timeStamp:u.timeStamp,depth:u.depth,type:u.type,message:u.message};u.gas&&(f.gas=a.fromGas(u.gas)),i.push(f)}),i}static fromDiver(n){return{rmv:n.rmv,stressRmv:n.stressRmv}}static toDiver(n){return new pn(n.rmv,n.stressRmv)}static fromOptions(n){return{gfLow:n.gfLow,gfHigh:n.gfHigh,maxPpO2:n.maxPpO2,maxDecoPpO2:n.maxDecoPpO2,salinity:n.salinity,altitude:n.altitude,roundStopsToMinutes:n.roundStopsToMinutes,gasSwitchDuration:n.gasSwitchDuration,safetyStop:n.safetyStop,lastStopDepth:n.lastStopDepth,decoStopDistance:n.decoStopDistance,minimumAutoStopDepth:n.minimumAutoStopDepth,maxEND:n.maxEND,oxygenNarcotic:n.oxygenNarcotic,ascentSpeed6m:n.ascentSpeed6m,ascentSpeed50percTo6m:n.ascentSpeed50percTo6m,ascentSpeed50perc:n.ascentSpeed50perc,descentSpeed:n.descentSpeed,problemSolvingDuration:n.problemSolvingDuration,airBreaks:a.fromAirBreaks(n.airBreaks)}}static toOptions(n){let i=new Wn(n.gfLow,n.gfHigh,n.maxPpO2,n.maxDecoPpO2,n.salinity);return i.altitude=n.altitude,i.roundStopsToMinutes=n.roundStopsToMinutes,i.gasSwitchDuration=n.gasSwitchDuration,i.safetyStop=n.safetyStop,i.lastStopDepth=n.lastStopDepth,i.decoStopDistance=n.decoStopDistance,i.minimumAutoStopDepth=n.minimumAutoStopDepth,i.maxEND=n.maxEND,i.oxygenNarcotic=n.oxygenNarcotic,i.ascentSpeed6m=n.ascentSpeed6m,i.ascentSpeed50percTo6m=n.ascentSpeed50percTo6m,i.ascentSpeed50perc=n.ascentSpeed50perc,i.descentSpeed=n.descentSpeed,i.problemSolvingDuration=n.problemSolvingDuration,a.toAirBreaks(i.airBreaks,n.airBreaks),i}static fromDensity(n){return{gas:a.fromGas(n.gas),depth:n.depth,density:n.density}}static toDensity(n){let i=a.toGas(n.gas);return new Yn(i,n.depth,n.density)}static toGas(n){return new rt(n.fO2,n.fHe)}static fromGas(n){return{fO2:n.fO2,fHe:n.fHe}}static fromAirBreaks(n){return{enabled:n.enabled,oxygenDuration:n.oxygenDuration,bottomGasDuration:n.bottomGasDuration}}static toAirBreaks(n,i){i&&(n.enabled=i.enabled,n.oxygenDuration=i.oxygenDuration,n.bottomGasDuration=i.bottomGasDuration)}};var ti=class a{static calculateDecompression(n){let i=this.profileParametersFromTask(n),f=new ke().decompression(i),d=_t.fromProfile(f),w={maxDensity:n.eventOptions.maxDensity,startAscentIndex:i.segments.startAscentIndex,profile:f.segments,ceilings:f.ceilings,profileOptions:i.options},y=jr.fromProfile(w),A=_t.fromEvents(y.items);return{diveId:n.diveId,profile:d,events:A}}static diveInfo(n){let i=this.profileParametersFromTask(n),f=new ke().noDecoLimit(i),d=new le(n.options).create(),w=i.segments.items,y=new Qr(d).calculateForProfile(w),A=new Jr(d).calculateForProfile(w),T=new Zn(d).forProfile(w);return{diveId:n.diveId,noDeco:f,otu:y,cns:A,density:_t.fromDensity(T)}}static calculateConsumption(n){let i=new le(n.options).create(),u=new Vr(i),f=_t.toTanks(n.tanks),d=_t.toSegments(n.profile,f),w=_t.toSegments(n.plan,f),y=n.consumptionOptions.diver,A=new pn(y.rmv,y.stressRmv),T=_t.toOptions(n.options),q=a.selectConsumptionPlan(w,n.isComplex),nt={diver:A,primaryTankReserve:n.consumptionOptions.primaryTankReserve,stageTankReserve:n.consumptionOptions.stageTankReserve},pt=u.calculateMaxBottomTime(q,f,nt,T),qt=$n.emergencyAscent(d,T,f),ot=Pt.duration(qt);return ot=W.toMinutes(ot),u.consumeFromTanks2(d,qt,f,nt),{diveId:n.diveId,maxTime:pt,timeToSurface:ot,tanks:_t.toConsumed(f)}}static selectConsumptionPlan(n,i){if(i)return Pt.fromCollection(n);let u=n.slice(0,1);return Pt.fromCollection(u)}static profileParametersFromTask(n){let i=_t.toTanks(n.tanks),u=Ae.fromTanks(i),f=_t.toSegments(n.plan,i),d=Pt.fromCollection(f),w=_t.toOptions(n.options),y=_t.toTissues(n.tissues),A=new Kn(y,n.surfaceInterval);return ln.forMultilevelDive(d,u,w,A)}};addEventListener("message",({data:a})=>{let n=ti.calculateConsumption(a);postMessage(n)});
